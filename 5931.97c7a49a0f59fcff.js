"use strict";(self.webpackChunkAngularClient=self.webpackChunkAngularClient||[]).push([[5931],{5931:(V,F,n)=>{n.d(F,{A:()=>f});var m=n(10467),p=n(8189),O=n(98877),S=n(5922),P=n(3248),h=n(56492),v=n(45272),x=n(85211),E=(n(35150),n(40707),n(76576)),M=n(58701),j=n(6829),T=n(93164),U=n(68800),B=n(33063),W=n(28067),G=n(1277),L=n(87086);function y(){return(y=(0,m.A)(function*(t,e,d){const c=(0,U.Dl)(t),g=yield(0,G.Jf)(c,L.A.from(e),{...d}),D=g.data.extent;return!D||isNaN(D.xmin)||isNaN(D.ymin)||isNaN(D.xmax)||isNaN(D.ymax)?{count:g.data.count,extent:null}:{count:g.data.count,extent:W.A.fromJSON(D)}})).apply(this,arguments)}var r=n(87342),s=n(34687),l=n(11170),u=n(93327);let i=class extends O.A{constructor(t){super(t),this.dynamicDataSource=null,this.fieldsIndex=null,this.gdbVersion=null,this.infoFor3D=null,this.pbfSupported=!1,this.queryAttachmentsSupported=!1,this.sourceSpatialReference=null,this.url=null}get parsedUrl(){return(0,v.An)(this.url)}execute(t,e){var d=this;return(0,m.A)(function*(){const c=yield d.executeJSON(t,e);return d.featureSetFromJSON(t,c,e)})()}executeJSON(t,e){var d=this;return(0,m.A)(function*(){const c=d._normalizeQuery(t),g=null!=t.outStatistics?.[0],D=(0,P.A)("featurelayer-pbf-statistics"),C=(!g||D)&&!0!==t.returnTrueCurves;let I;if(d.pbfSupported&&C)try{I=yield(0,l.S)(d.url,c,e)}catch(J){if("query:parsing-pbf"!==J.name)throw J;d.pbfSupported=!1}return d.pbfSupported&&C||(I=yield(0,s.e)(d.url,c,e)),d._normalizeFields(I.fields),I})()}featureSetFromJSON(t,e,d){var c=this;return(0,m.A)(function*(){if(!c._queryIs3DObjectFormat(t)||null==c.infoFor3D||!e.features)return u.A.fromJSON(e);const{meshFeatureSetFromJSON:g}=yield(0,h.qr)(Promise.all([n.e(5434),n.e(6456),n.e(6141),n.e(5184),n.e(2076),n.e(3567)]).then(n.bind(n,71698)),d);return g(t,c.infoFor3D,e)})()}executeForCount(t,e){return(0,B.I)(this.url,this._normalizeQuery(t),e)}executeForExtent(t,e){return function N(t,e,d){return y.apply(this,arguments)}(this.url,this._normalizeQuery(t),e)}executeForIds(t,e){return(0,r.V)(this.url,this._normalizeQuery(t),e)}executeRelationshipQuery(t,e){var d=this;return(0,m.A)(function*(){const[{default:c},{executeRelationshipQuery:g}]=yield(0,h.qr)(Promise.all([Promise.resolve().then(n.bind(n,59487)),n.e(5345).then(n.bind(n,65345))]),e);return t=c.from(t),(d.gdbVersion||d.dynamicDataSource)&&((t=t.clone()).gdbVersion=t.gdbVersion||d.gdbVersion,t.dynamicDataSource=t.dynamicDataSource||d.dynamicDataSource),g(d.url,t,e)})()}executeRelationshipQueryForCount(t,e){var d=this;return(0,m.A)(function*(){const[{default:c},{executeRelationshipQueryForCount:g}]=yield(0,h.qr)(Promise.all([Promise.resolve().then(n.bind(n,59487)),n.e(5345).then(n.bind(n,65345))]),e);return t=c.from(t),(d.gdbVersion||d.dynamicDataSource)&&((t=t.clone()).gdbVersion=t.gdbVersion||d.gdbVersion,t.dynamicDataSource=t.dynamicDataSource||d.dynamicDataSource),g(d.url,t,e)})()}executeAttachmentQuery(t,e){var d=this;return(0,m.A)(function*(){const{executeAttachmentQuery:c,fetchAttachments:g,processAttachmentQueryResult:D}=yield(0,h.qr)(Promise.all([n.e(2076),n.e(3083)]).then(n.bind(n,43083)),e),C=(0,U.Dl)(d.url);return D(C,yield d.queryAttachmentsSupported?c(C,t,e):g(C,t,e))})()}executeAttributeBinsQuery(t,e){var d=this;return(0,m.A)(function*(){const{executeAttributeBinsQuery:c}=yield(0,h.qr)(Promise.all([n.e(5423),n.e(8451)]).then(n.bind(n,58451)),e);return c(d.parsedUrl,t,e)})()}executeTopFeaturesQuery(t,e){var d=this;return(0,m.A)(function*(){const{executeTopFeaturesQuery:c}=yield(0,h.qr)(Promise.all([n.e(2076),n.e(8041)]).then(n.bind(n,8041)),e);return c(d.parsedUrl,t,d.sourceSpatialReference,e)})()}executeForTopIds(t,e){var d=this;return(0,m.A)(function*(){const{executeForTopIds:c}=yield(0,h.qr)(Promise.all([n.e(2076),n.e(5021)]).then(n.bind(n,5021)),e);return c(d.parsedUrl,t,e)})()}executeForTopExtents(t,e){var d=this;return(0,m.A)(function*(){const{executeForTopExtents:c}=yield(0,h.qr)(Promise.all([n.e(2076),n.e(7058)]).then(n.bind(n,7058)),e);return c(d.parsedUrl,t,e)})()}executeForTopCount(t,e){var d=this;return(0,m.A)(function*(){const{executeForTopCount:c}=yield(0,h.qr)(Promise.all([n.e(2076),n.e(6436)]).then(n.bind(n,6436)),e);return c(d.parsedUrl,t,e)})()}_normalizeQuery(t){let e=L.A.from(t);e.sourceSpatialReference=e.sourceSpatialReference||this.sourceSpatialReference,(this.gdbVersion||this.dynamicDataSource)&&(e=e===t?e.clone():e,e.gdbVersion=t.gdbVersion||this.gdbVersion,e.dynamicDataSource=t.dynamicDataSource?T.L.from(t.dynamicDataSource):this.dynamicDataSource);const{infoFor3D:d}=this;if(null!=d&&this._queryIs3DObjectFormat(t)){if(e=e===t?e.clone():e,e.formatOf3DObjects=(0,j.Hz)(d),!e.formatOf3DObjects)throw new S.A("query:unsupported-3d-query-formats","Could not find any supported 3D object query format. Only supported formats are 3D_glb and 3D_gltf");if(e.outSpatialReference&&!(0,M.aI)(e.outSpatialReference,this.sourceSpatialReference))throw new S.A("query:unsupported-out-spatial-reference","3D object feature services do not support projection of geometries");if(null==e.outFields||!e.outFields.includes("*")){e=e===t?e.clone():e,null==e.outFields&&(e.outFields=[]);const{originX:c,originY:g,originZ:D,translationX:C,translationY:I,translationZ:J,scaleX:Q,scaleY:z,scaleZ:Z,rotationX:_,rotationY:K,rotationZ:b,rotationDeg:$}=d.transformFieldRoles;e.outFields.push(c,g,D,C,I,J,Q,z,Z,_,K,b,$)}}return e}_normalizeFields(t){if(null!=this.fieldsIndex&&null!=t)for(const e of t){const d=this.fieldsIndex.get(e.name);d&&Object.assign(e,d.toJSON())}}_queryIs3DObjectFormat(t){return null!=this.infoFor3D&&!0===t.returnGeometry&&"xyFootprint"!==t.multipatchOption&&!t.outStatistics}};(0,p._)([(0,x.MZ)({type:T.L})],i.prototype,"dynamicDataSource",void 0),(0,p._)([(0,x.MZ)()],i.prototype,"fieldsIndex",void 0),(0,p._)([(0,x.MZ)()],i.prototype,"gdbVersion",void 0),(0,p._)([(0,x.MZ)()],i.prototype,"infoFor3D",void 0),(0,p._)([(0,x.MZ)({readOnly:!0})],i.prototype,"parsedUrl",null),(0,p._)([(0,x.MZ)()],i.prototype,"pbfSupported",void 0),(0,p._)([(0,x.MZ)()],i.prototype,"queryAttachmentsSupported",void 0),(0,p._)([(0,x.MZ)()],i.prototype,"sourceSpatialReference",void 0),(0,p._)([(0,x.MZ)({type:String})],i.prototype,"url",void 0),i=(0,p._)([(0,E.$)("esri.layers.graphics.sources.support.QueryTask")],i);const f=i},1832:(V,F,n)=>{function m(p){const O={};for(const S in p){if("declaredClass"===S)continue;const P=p[S];if(null!=P&&"function"!=typeof P)if(Array.isArray(P)){O[S]=[];for(let h=0;h<P.length;h++)O[S][h]=m(P[h])}else"object"==typeof P?P.toJSON&&(O[S]=JSON.stringify(P)):O[S]=P}return O}n.d(F,{z:()=>m})},33063:(V,F,n)=>{n.d(F,{I:()=>P});var m=n(10467),p=n(68800),O=n(1277),S=n(87086);function P(v,x,R){return h.apply(this,arguments)}function h(){return(h=(0,m.A)(function*(v,x,R){const A=(0,p.Dl)(v),{data:E}=yield(0,O.gW)(A,S.A.from(x),R);return E.count})).apply(this,arguments)}},87342:(V,F,n)=>{n.d(F,{V:()=>P});var m=n(10467),p=n(68800),O=n(1277),S=n(87086);function P(v,x,R){return h.apply(this,arguments)}function h(){return(h=(0,m.A)(function*(v,x,R){const A=(0,p.Dl)(v),{data:E}=yield(0,O.Pk)(A,S.A.from(x),R);return E.objectIds??[]})).apply(this,arguments)}},34687:(V,F,n)=>{n.d(F,{e:()=>x,s:()=>h});var m=n(10467),p=n(68800),O=n(1277),S=n(93327),P=n(87086);function h(A,E,M){return v.apply(this,arguments)}function v(){return(v=(0,m.A)(function*(A,E,M){const j=yield x(A,E,M);return S.A.fromJSON(j)})).apply(this,arguments)}function x(A,E,M){return R.apply(this,arguments)}function R(){return(R=(0,m.A)(function*(A,E,M){const j=(0,p.Dl)(A),T={...M},U=P.A.from(E),{data:B}=yield(0,O.eW)(j,U,U.sourceSpatialReference,T);return B})).apply(this,arguments)}},11170:(V,F,n)=>{n.d(F,{S:()=>L});var m=n(10467),p=n(68800),O=n(11432),S=n(23743),P=n(31732);function h(y,r){return r}function v(y,r,s,l){switch(s){case 0:return E(y,r+l,0);case 1:return"lowerLeft"===y.originPosition?E(y,r+l,1):function M({translate:y,scale:r},s,l){return y[l]-s*r[l]}(y,r+l,1)}}function x(y,r,s,l){return 2===s?E(y,r,2):v(y,r,s,l)}function R(y,r,s,l){return 2===s?0===r?0:E(y,r,3):v(y,r,s,l)}function A(y,r,s,l){return 3===s?0===r?0:E(y,r,3):x(y,r,s,l)}function E({translate:y,scale:r},s,l){return y[l]+s*r[l]}class j{constructor(r){this._options=r,this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],this._previousCoordinate=[0,0],this._transform=null,this._applyTransform=h,this._lengths=[],this._currentLengthIndex=0,this._toAddInCurrentPath=0,this._vertexDimension=0,this._mValueOffset=null,this._coordinateBuffer=null,this._coordinateBufferPtr=0,this._attributesConstructor=class{}}createFeatureResult(){return{fields:[],features:[]}}finishFeatureResult(r){if(this._options.applyTransform&&(r.transform=null),this._attributesConstructor=class{},this._coordinateBuffer=null,this._lengths.length=0,!r.hasZ)return;const s=(0,S.N)(r.geometryType,this._options.sourceSpatialReference,r.spatialReference);if(null!=s)for(const l of r.features)s(l.geometry)}createSpatialReference(){return{}}addField(r,s){const l=r.fields;(0,O.Lw)(l),l.push(s);const u=l.map(i=>i.name);this._attributesConstructor=function(){for(const i of u)this[i]=null}}addFeature(r,s){r.features.push(s)}prepareFeatures(r){switch(this._transform=r.transform,this._options.applyTransform&&r.transform&&(this._applyTransform=this._deriveApplyTransform(r)),this._mValueOffset=null,this._vertexDimension=2,r.hasZ&&this._vertexDimension++,r.hasM&&(this._mValueOffset=this._vertexDimension,this._vertexDimension++),r.geometryType){case"esriGeometryPoint":this.addCoordinate=(s,l,u)=>this.addCoordinatePoint(s,l,u),this.createGeometry=s=>this.createPointGeometry(s);break;case"esriGeometryPolygon":this.addCoordinate=(s,l,u)=>this._addCoordinatePolygon(s,l,u),this.createGeometry=s=>this._createPolygonGeometry(s);break;case"esriGeometryPolyline":this.addCoordinate=(s,l,u)=>this._addCoordinatePolyline(s,l,u),this.createGeometry=s=>this._createPolylineGeometry(s);break;case"esriGeometryMultipoint":this.addCoordinate=(s,l,u)=>this._addCoordinateMultipoint(s,l,u),this.createGeometry=s=>this._createMultipointGeometry(s)}}createFeature(){return this._lengths.length=0,this._currentLengthIndex=0,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,{attributes:new this._attributesConstructor}}allocateCoordinates(){}addLength(r,s,l){0===this._lengths.length&&(this._toAddInCurrentPath=s),this._lengths.push(s)}addQueryGeometry(r,s){const{queryGeometry:l,queryGeometryType:u}=s,i=this._transform?(0,P.Ch)(l.clone(),l,!1,!1,this._transform):l.clone(),f=(0,P.zv)(i,u,!1,!1);r.queryGeometryType=u,r.queryGeometry={...f}}createPointGeometry(r){const s={x:0,y:0,spatialReference:r.spatialReference};return r.hasZ&&(s.z=0),r.hasM&&(s.m=0),s}addCoordinatePoint(r,s,l){switch(s=this._applyTransform(this._transform,s,l,0),l){case 0:r.x=s;break;case 1:r.y=s;break;case 2:"z"in r?r.z=s:r.m=s;break;case 3:r.m=s}}_transformPathLikeValue(r,s){let l=0;return s<=1&&(l=this._previousCoordinate[s],this._previousCoordinate[s]+=r),null!==this._mValueOffset&&0===r&&s>0&&!(s%this._mValueOffset)?0:this._applyTransform(this._transform,r,s,l)}_addCoordinatePolyline(r,s,l){this._dehydratedAddPointsCoordinate(r.paths,s,l)}_addCoordinatePolygon(r,s,l){this._dehydratedAddPointsCoordinate(r.rings,s,l)}_addCoordinateMultipoint(r,s,l){0===l&&r.points.push([]);const u=this._transformPathLikeValue(s,l);r.points[r.points.length-1].push(u)}_createPolygonGeometry(r){return{rings:[[]],spatialReference:r.spatialReference,hasZ:!!r.hasZ,hasM:!!r.hasM}}_createPolylineGeometry(r){return{paths:[[]],spatialReference:r.spatialReference,hasZ:!!r.hasZ,hasM:!!r.hasM}}_createMultipointGeometry(r){return{points:[],spatialReference:r.spatialReference,hasZ:!!r.hasZ,hasM:!!r.hasM}}_dehydratedAddPointsCoordinate(r,s,l){0===l&&0==this._toAddInCurrentPath--&&(r.push([]),this._toAddInCurrentPath=this._lengths[++this._currentLengthIndex]-1,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0);const u=this._transformPathLikeValue(s,l),i=r[r.length-1];0===l&&(this._coordinateBufferPtr=0,this._coordinateBuffer=new Array(this._vertexDimension),i.push(this._coordinateBuffer)),this._coordinateBuffer[this._coordinateBufferPtr++]=u}_deriveApplyTransform(r){const{hasZ:s,hasM:l}=r;return s&&l?A:s?x:l?R:v}}var T=n(1277),B=(n(93327),n(87086));function L(y,r,s){return N.apply(this,arguments)}function N(){return(N=(0,m.A)(function*(y,r,s){const l=(0,p.Dl)(y),u={...s},i=B.A.from(r),f=!i.quantizationParameters,{data:t}=yield(0,T.IJ)(l,i,new j({sourceSpatialReference:i.sourceSpatialReference,applyTransform:f}),u);return t})).apply(this,arguments)}},1277:(V,F,n)=>{n.d(F,{IJ:()=>U,Jf:()=>N,Pk:()=>G,eW:()=>j,gW:()=>L,kS:()=>W});var m=n(10467),p=n(89563),O=n(45272),S=n(61320),P=n(77098),h=n(58701),v=n(1832),x=n(78304),R=n(98789);const A="Layer does not support extent calculation.";function M(u,i){const f=u.geometry,t=u.toJSON();delete t.compactGeometryEnabled,delete t.defaultSpatialReferenceEnabled;const e=t;let d,c,g;if(null!=f&&(c=f.spatialReference,g=(0,h.YX)(c),e.geometryType=(0,S.$B)(f),e.geometry=function E(u,i){if(i&&"extent"===u.type)return`${u.xmin},${u.ymin},${u.xmax},${u.ymax}`;if(i&&"point"===u.type)return`${u.x},${u.y}`;const f=u.toJSON();return delete f.spatialReference,JSON.stringify(f)}(f,u.compactGeometryEnabled),e.inSR=g),t.groupByFieldsForStatistics&&(e.groupByFieldsForStatistics=t.groupByFieldsForStatistics.join(",")),t.objectIds&&(e.objectIds=t.objectIds.join(",")),t.orderByFields&&(e.orderByFields=t.orderByFields.join(",")),!t.outFields||!t.returnDistinctValues&&(i?.returnCountOnly||i?.returnExtentOnly||i?.returnIdsOnly)?delete e.outFields:e.outFields=t.outFields.includes("*")?"*":t.outFields.join(","),t.outSR?(e.outSR=(0,h.YX)(t.outSR),d=u.outSpatialReference):f&&(t.returnGeometry||t.returnCentroid)&&(e.outSR=e.inSR,d=c),t.returnGeometry&&delete t.returnGeometry,t.outStatistics&&(e.outStatistics=JSON.stringify(t.outStatistics)),t.fullText&&(e.fullText=JSON.stringify(t.fullText)),t.pixelSize&&(e.pixelSize=JSON.stringify(t.pixelSize)),t.quantizationParameters&&(u.defaultSpatialReferenceEnabled&&null!=c&&null!=u.quantizationParameters?.extent&&c.equals(u.quantizationParameters.extent.spatialReference)&&delete t.quantizationParameters.extent.spatialReference,e.quantizationParameters=JSON.stringify(t.quantizationParameters)),t.parameterValues&&(e.parameterValues=JSON.stringify(t.parameterValues)),t.rangeValues&&(e.rangeValues=JSON.stringify(t.rangeValues)),t.dynamicDataSource&&(e.layer=JSON.stringify({source:t.dynamicDataSource}),delete t.dynamicDataSource),t.timeExtent){const D=t.timeExtent,{start:C,end:I}=D;null==C&&null==I||(e.time=C===I?C:`${C??"null"},${I??"null"}`),delete t.timeExtent}return u.defaultSpatialReferenceEnabled&&null!=c&&null!=d&&c.equals(d)&&(e.defaultSR=e.inSR,delete e.inSR,delete e.outSR),e}function j(u,i,f,t){return T.apply(this,arguments)}function T(){return(T=(0,m.A)(function*(u,i,f,t){const e=null!=i.timeExtent&&i.timeExtent.isEmpty?{data:{features:[]}}:yield r(u,i,"json",t);return(0,R.q)(i,f,e.data),e})).apply(this,arguments)}function U(u,i,f,t){return B.apply(this,arguments)}function B(){return(B=(0,m.A)(function*(u,i,f,t){if(null!=i.timeExtent&&i.timeExtent.isEmpty)return{data:f.createFeatureResult()};const e=yield W(u,i,t),d=e;return d.data=(0,x.m)(e.data,f),d})).apply(this,arguments)}function W(u,i,f){return r(u,i,"pbf",f)}function G(u,i,f){return null!=i.timeExtent&&i.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):r(u,i,"json",f,{returnIdsOnly:!0})}function L(u,i,f){return null!=i.timeExtent&&i.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):r(u,i,"json",f,{returnIdsOnly:!0,returnCountOnly:!0})}function N(u,i,f){return y.apply(this,arguments)}function y(){return(y=(0,m.A)(function*(u,i,f){if(null!=i.timeExtent&&i.timeExtent.isEmpty)return{data:{count:0,extent:null}};const t=yield r(u,i,"json",f,{returnExtentOnly:!0,returnCountOnly:!0}),e=t.data;if(e.hasOwnProperty("extent"))return t;if(e.features)throw new Error(A);if(e.hasOwnProperty("count"))throw new Error(A);return t})).apply(this,arguments)}function r(u,i,f){return s.apply(this,arguments)}function s(){return(s=(0,m.A)(function*(u,i,f,t={},e={}){const d="string"==typeof u?(0,O.An)(u):u,c=i.geometry?[i.geometry]:[],g=yield(0,P.el)(c,null,{signal:t.signal}),D=g?.[0];null!=D&&((i=i.clone()).geometry=D);const C=(0,v.z)({...d.query,f,...e,...M(i,e)});return(0,p.A)((0,O.fj)(d.path,function l(u,i){return null!=u.formatOf3DObjects&&!(i.returnCountOnly||i.returnExtentOnly||i.returnIdsOnly)}(i,e)?"query3d":"query"),{...t,responseType:"pbf"===f?"array-buffer":"json",query:{...C,...t.query}})})).apply(this,arguments)}}}]);