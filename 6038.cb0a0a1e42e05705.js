"use strict";(self.webpackChunkAngularClient=self.webpackChunkAngularClient||[]).push([[6038,9728,6773,6598,2117],{63583:(st,We,_)=>{var z,E;_.d(We,{u:()=>z}),(E=z||(z={}))[E.KILOBYTES=1024]="KILOBYTES",E[E.MEGABYTES=1048576]="MEGABYTES",E[E.GIGABYTES=1073741824]="GIGABYTES"},33087:(st,We,_)=>{_.d(We,{q:()=>E});var z=_(60611);class E{constructor(ae,k){this._storage=new z.F,this.id="",this.name="",this.size=0,this._storage.maxSize=ae,this._storage.register(this),k&&this._storage.registerRemoveFunc("",k)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(ae,k,ye=1){this._storage.put(this,ae,k,ye,1)}pop(ae){return this._storage.pop(this,ae)}get(ae){return this._storage.get(this,ae)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(ae){this._storage.maxSize=ae}resetHitRate(){}}},60611:(st,We,_)=>{_.d(We,{F:()=>ye,Ti:()=>E});var z=_(12438);const E=-3,Ue=E-1;var ae,Pe;(Pe=ae||(ae={}))[Pe.ALL=0]="ALL",Pe[Pe.SOME=1]="SOME";class ye{get size(){return this._size}constructor(ne=10485760){this._maxSize=ne,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new z.A,this._users=new z.A}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear()}register(ne){this._users.push(ne)}deregister(ne){this._users.removeUnordered(ne)}registerRemoveFunc(ne,V){this._removeFuncs.push([ne,V])}deregisterRemoveFunc(ne){this._removeFuncs.filterInPlace(V=>V[0]!==ne)}get maxSize(){return this._maxSize}set maxSize(ne){this._maxSize=Math.max(ne,-1),this._checkSize()}getSize(ne,V){return this._db.get(ne.id+V)?.size??0}put(ne,V,me,ue,ge){const G=this._db.get(V=ne.id+V);if(G&&(this._size-=G.size,ne.size-=G.size,this._db.delete(V),G.entry!==me&&this._notifyRemove(V,G.entry,G.size,ae.ALL)),ue>this._maxSize)return void this._notifyRemove(V,me,ue,ae.ALL);if(void 0===me)return void console.warn("Refusing to cache undefined entry ");if(!ue||ue<0)return console.warn(`Refusing to cache entry with size ${ue} for key ${V}`),void this._notifyRemove(V,me,0,ae.ALL);const oe=1+Math.max(ge,Ue)-E;this._db.set(V,new H(me,ue,oe)),this._size+=ue,ne.size+=ue,this._checkSize()}updateSize(ne,V,me,ue){const ge=this._db.get(V=ne.id+V);if(ge&&ge.entry===me){for(this._size-=ge.size,ne.size-=ge.size;ue>this._maxSize;){const G=this._notifyRemove(V,me,ue,ae.SOME);if(!(null!=G&&G>0))return void this._db.delete(V);ue=G}ge.size=ue,this._size+=ue,ne.size+=ue,this._checkSize()}}pop(ne,V){const me=this._db.get(V=ne.id+V);if(me)return this._size-=me.size,ne.size-=me.size,this._db.delete(V),++this._hit,me.entry;++this._miss}get(ne,V){const me=this._db.get(V=ne.id+V);if(void 0!==me)return this._db.delete(V),me.lives=me.lifetime,this._db.set(V,me),++this._hit,me.entry;++this._miss}peek(ne,V){const me=this._db.get(ne.id+V);return me?++this._hit:++this._miss,me?.entry}get performanceInfo(){const ne={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},V={},me=new Array;this._db.forEach((G,oe)=>{const q=G.lifetime;me[q]=(me[q]||0)+G.size,this._users.forAll(w=>{const{id:U,name:R}=w;oe.startsWith(U)&&(V[R]=(V[R]||0)+G.size)})});const ue={};this._users.forAll(G=>{const oe=G.name;"hitRate"in G&&"number"==typeof G.hitRate&&!isNaN(G.hitRate)&&G.hitRate>0?(V[oe]=V[oe]||0,ue[oe]=Math.round(100*G.hitRate)+"%"):ue[oe]="0%"});const ge=Object.keys(V);ge.sort((G,oe)=>V[oe]-V[G]),ge.forEach(G=>ne[G]=Math.round(V[G]/2**20)+"MB / "+ue[G]);for(let G=me.length-1;G>=0;--G){const oe=me[G];oe&&(ne["Priority "+(G+E-1)]=Math.round(oe/this._size*100)+"%")}return ne}resetStats(){this._hit=this._miss=0,this._users.forAll(ne=>ne.resetHitRate())}clear(ne){const V=ne.id;this._db.forEach((me,ue)=>{ue.startsWith(V)&&(this._size-=me.size,this._db.delete(ue),this._notifyRemove(ue,me.entry,me.size,ae.ALL))}),ne.size=0}clearAll(){this._db.forEach((ne,V)=>this._notifyRemove(V,ne.entry,ne.size,ae.ALL)),this._users.forAll(ne=>ne.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(ne,V,me,ue){let ge;return this._removeFuncs.some(G=>{if(ne.startsWith(G[0])){const oe=G[1](V,ue,me);return"number"==typeof oe&&(ge=oe),!0}return!1}),ge}_checkSize(){this._users.forAll(ne=>this._checkSizeLimits(ne)),this._checkSizeLimits()}_checkSizeLimits(ne){const V=ne??this;if(V.maxSize<0||V.size<=V.maxSize)return;const me=ne?.id;let ue=!0;for(;ue;){ue=!1;for(const[ge,G]of this._db)if(0===G.lifetime&&(!me||ge.startsWith(me))){if(this._purgeItem(ge,G,ne),V.size<=.9*V.maxSize)return;ue||=this._db.has(ge)}}for(const[ge,G]of this._db)if((!me||ge.startsWith(me))&&(this._purgeItem(ge,G,ne),V.size<=.9*V.maxSize))return}_purgeItem(ne,V,me=this._users.find(ue=>ne.startsWith(ue.id))){if(this._db.delete(ne),V.lives<=1){this._size-=V.size,me&&(me.size-=V.size);const ue=this._notifyRemove(ne,V.entry,V.size,ae.SOME);null!=ue&&ue>0&&(this._size+=ue,me&&(me.size+=ue),V.lives=V.lifetime,V.size=ue,this._db.set(ne,V))}else--V.lives,this._db.set(ne,V)}}class H{constructor(ne,V,me){this.entry=ne,this.size=V,this.lifetime=me,this.lives=me}}},43141:(st,We,_)=>{_.d(We,{A:()=>Ue});var z=_(9700),E=_(4032);class Ue{constructor(k){this._observable=new E.I,this._set=new Set(k)}get size(){return(0,z.gc)(this._observable),this._set.size}add(k){const ye=this._set.size;return this._set.add(k),this._set.size!==ye&&this._observable.notify(),this}clear(){this._set.size>0&&(this._set.clear(),this._observable.notify())}delete(k){const ye=this._set.delete(k);return ye&&this._observable.notify(),ye}entries(){return(0,z.gc)(this._observable),this._set.entries()}forEach(k,ye){(0,z.gc)(this._observable),this._set.forEach((je,H)=>k.call(ye,je,H,this),ye)}has(k){return(0,z.gc)(this._observable),this._set.has(k)}keys(){return(0,z.gc)(this._observable),this._set.keys()}values(){return(0,z.gc)(this._observable),this._set.values()}[Symbol.iterator](){return(0,z.gc)(this._observable),this._set[Symbol.iterator]()}[Symbol.dispose](){this._observable.destroy()}get[Symbol.toStringTag](){return this._set[Symbol.toStringTag]}}},29430:(st,We,_)=>{_.d(We,{$:()=>te,IB:()=>je,Iy:()=>xe,N2:()=>_e,QP:()=>Xe,RH:()=>ce,Vl:()=>ze,Ws:()=>Ee,ZD:()=>re,_L:()=>Ze,bJ:()=>Re,e$:()=>Ve,f6:()=>se,pW:()=>ve,pf:()=>J});var z=_(68677),E=_(89952),Ue=_(77806),ye=(_(69287),_(53781),_(89141));function je(L){return"r"in L&&"g"in L&&"b"in L}function H(L){return"h"in L&&"s"in L&&"v"in L}function Pe(L){return"l"in L&&"a"in L&&"b"in L}function ne(L){return"l"in L&&"c"in L&&"h"in L}const me=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],ue=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function ge(L,Me){const S=[];let he,Ce;if(L[0].length!==Me.length)throw new Error("dimensions do not match");const Se=L.length,Te=L[0].length;let Ke=0;for(he=0;he<Se;he++){for(Ke=0,Ce=0;Ce<Te;Ce++)Ke+=L[he][Ce]*Me[Ce];S.push(Ke)}return S}function G(L){const Me=[L.r/255,L.g/255,L.b/255].map(he=>he<=.04045?he/12.92:((he+.055)/1.055)**2.4),S=ge(me,Me);return{x:100*S[0],y:100*S[1],z:100*S[2]}}function oe(L){const Me=ge(ue,[L.x/100,L.y/100,L.z/100]).map(S=>Math.min(1,Math.max(S<=.0031308?12.92*S:1.055*S**.4166666666666667-.055,0)));return{r:Math.round(255*Me[0]),g:Math.round(255*Me[1]),b:Math.round(255*Me[2])}}function q(L){const Me=[L.x/95.047,L.y/100,L.z/108.883].map(S=>S>.008856451679035631?S**.3333333333333333:7.787037037037035*S+.13793103448275862);return{l:116*Me[1]-16,a:500*(Me[0]-Me[1]),b:200*(Me[1]-Me[2])}}function w(L){const Me=L.l,S=[(Me+16)/116+L.a/500,(Me+16)/116,(Me+16)/116-L.b/200].map(he=>he>6/29?he**3:3*(6/29)**2*(he-4/29));return{x:95.047*S[0],y:100*S[1],z:108.883*S[2]}}function te(L){return je(L)?L:ne(L)?function C(L){return oe(w(function R(L){const S=L.c,he=L.h;return{l:L.l,a:S*Math.cos(he),b:S*Math.sin(he)}}(L)))}(L):Pe(L)?function Z(L){return oe(w(L))}(L):function V(L){return"x"in L&&"y"in L&&"z"in L}(L)?oe(L):H(L)?function W(L){const Me=(L.h+360)%360/60,he=L.v/100*255,Ce=he*(L.s/100),Se=Ce*(1-Math.abs(Me%2-1));let Te;switch(Math.floor(Me)){case 0:Te={r:Ce,g:Se,b:0};break;case 1:Te={r:Se,g:Ce,b:0};break;case 2:Te={r:0,g:Ce,b:Se};break;case 3:Te={r:0,g:Se,b:Ce};break;case 4:Te={r:Se,g:0,b:Ce};break;case 5:case 6:Te={r:Ce,g:0,b:Se};break;default:Te={r:0,g:0,b:0}}return Te.r=Math.round(Te.r+he-Ce),Te.g=Math.round(Te.g+he-Ce),Te.b=Math.round(Te.b+he-Ce),Te}(L):L}function _e(L){return H(L)?L:function P(L){const Me=L.r,S=L.g,he=L.b,Ce=Math.max(Me,S,he),Se=Ce-Math.min(Me,S,he);let Te=Ce,Ke=0===Se?0:Ce===Me?(S-he)/Se%6:Ce===S?(he-Me)/Se+2:(Me-S)/Se+4,qe=0===Se?0:Se/Te;return Ke<0&&(Ke+=6),Ke*=60,qe*=100,Te*=100/255,{h:Ke,s:qe,v:Te}}(te(L))}function re(L){return Pe(L)?L:function B(L){return q(G(L))}(te(L))}function ce(L){return ne(L)?L:function Q(L){return function U(L){const Me=L.l,S=L.a,he=L.b,Ce=Math.sqrt(S*S+he*he);let Se=Math.atan2(he,S);return Se=Se>0?Se:Se+2*Math.PI,{l:Me,c:Ce,h:Se}}(q(G(L)))}(te(L))}function Ee(L,Me){const{r:S,g:he,b:Ce}=Me?.ignoreAlpha?L:function Le(L){let{r:Me,g:S,b:he,a:Ce}=L;return Ce<1&&(Me=Math.round(Ce*Me+255*(1-Ce)),S=Math.round(Ce*S+255*(1-Ce)),he=Math.round(Ce*he+255*(1-Ce))),new z.A({r:Me,g:S,b:he})}(L);return.2126*S+.7152*he+.0722*Ce}var ve,L;function Re(L,Me=ve.High){return Ee(L,{ignoreAlpha:!0})>Me?new z.A([0,0,0,L.a]):new z.A([255,255,255,L.a])}function Ve(L,Me){const S=re(L);S.l*=1-Me;const he=te(S),Ce=L.clone();return Ce.setColor(he),Ce.a=L.a,Ce}function Ze(L,Me){const S=L.clone();return S.a*=Me,S}function ze(L,Me){const S=_e(L);S.s*=Me;const he=te(S),Ce=L.clone();return Ce.setColor(he),Ce.a=L.a,Ce}function Xe(L){return z.A.toUnitRGBA(L)}function J(L){return(0,ye.fA)(L[0],L[1],L[2],L.length>3?L[3]:1)}function se(L,Me){const S=z.A.toUnitRGBA(L);return S[3]*=Me,S}function xe(L,Me,S={}){if(0===L.length||Me<=0)return[];if(1===(L=L.map(he=>"string"==typeof he?new z.A(he):he)).length||1===Me){const he=[],Ce=L[0];for(let Se=0;Se<Me;Se++)he.push(Ce.clone());return he}if(S.shuffle&&(L=(0,E.k4)((0,Ue.o8)(L),S.seed)),L.length>=Me){const he=[],Ce=(L.length-1)/(Me-1);for(let Se=0;Se<Me;Se++){const Te=Math.round(Se*Ce);he.push(L[Te].clone())}return he}return function Y(L,Me,S={}){const he=[],Ce=L.length-1,Se=Math.ceil((Me-L.length)/Ce);e:for(let Te=0;Te<Ce;Te++){const Ke=L[Te],qe=L[Te+1];for(let Je=1;Je<=Se;Je++)if(he.push(fe(Ke,qe,Je/(Se+1),S)),he.length+L.length===Me)break e}return[...L.map(Te=>Te.clone()),...(0,E.k4)(he,S.seed??1)]}(L,Me,S)}(L=ve||(ve={}))[L.Low=160]="Low",L[L.High=225]="High";const ee=(L,Me)=>{const S=Math.floor(10*Me())-5;return Math.min(255,Math.max(0,L+S))};function fe(L,Me,S,he={}){const Ce=L.r,Se=L.g,Te=L.b,qe=Me.g,Je=Me.b,lt=Math.round(Ce+(Me.r-Ce)*S),tt=Math.round(Se+(qe-Se)*S),yt=Math.round(Te+(Je-Te)*S);if(!he.offset)return new z.A([lt,tt,yt]);const ht=(0,E.Mo)(he.seed);return new z.A([ee(lt,ht),ee(tt,ht),ee(yt,ht)])}},7201:(st,We,_)=>{function z(H){return H=H||globalThis.location.hostname,je.some(Pe=>null!=H?.match(Pe))}function E(H,Pe){return H?(Pe=Pe||globalThis.location.hostname)?null!=Pe.match(Ue)||null!=Pe.match(k)?H.replace("static.arcgis.com","staticdev.arcgis.com"):null!=Pe.match(ae)||null!=Pe.match(ye)?H.replace("static.arcgis.com","staticqa.arcgis.com"):H:H:null}_.d(We,{EM:()=>E,b5:()=>z});const Ue=/^devext\.arcgis\.com$/,ae=/^qaext\.arcgis\.com$/,k=/^[\w-]*\.mapsdevext\.arcgis\.com$/,ye=/^[\w-]*\.mapsqa\.arcgis\.com$/,je=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local\.esri\.com$/,Ue,ae,/^jsapps\.esri\.com$/,k,ye]},81142:(st,We,_)=>{_.d(We,{IV:()=>w,LF:()=>Ue,T9:()=>V,Wq:()=>ye,d_:()=>ae,g2:()=>ge,gT:()=>k,hs:()=>ue,iT:()=>oe,kM:()=>H,l3:()=>Pe,n0:()=>U,r7:()=>G});var z=_(82663);function Ue(R){return{value:R}}function ae(R,B){return{type:(0,z.t$)(B),value:R,unit:B}}function k(R,B){return{type:(0,z.t$)(B),value:R,unit:B}}function ye(R,B,Z="arithmetic"){return{type:(0,z.t$)(B),value:R,unit:B,rotationType:Z}}function H(R,B){const Z=Pe(R,B);return"angle"===R.type?ye(Z,B,R.rotationType):function E(R,B){return{type:(0,z.t$)(B),value:R,unit:B}}(Z,B)}function Pe(R,B){return(0,z.oU)(R.value,R.unit,B)}function V(R,B){return null==R?B:null==B||R.value>(0,z.oU)(B.value,B.unit,R.unit)?R:B}function ue(R,B){return null==R?null:{...R,value:R.value*B}}function ge(R,B,Z){if(B===Z)return R;switch(Z){case"arithmetic":case"geographic":return 90-R}}const G=ae(0,"meters"),oe=k(0,"square-meters"),w=(ye(0,"radians"),ye(0,"degrees")),U=ye(0,"degrees","geographic")},98158:(st,We,_)=>{function z(E,Ue,ae,k){let ye=null,je=1e3;"number"==typeof Ue?(je=Ue,k=ae):(ye=Ue??null,je=ae);let H,Pe=0;const ne=()=>{Pe=0,E.apply(k,H)},V=(...me)=>{ye&&ye.apply(k,me),H=me,je?Pe||(Pe=setTimeout(ne,je)):ne()};return V.remove=()=>{Pe&&(clearTimeout(Pe),Pe=0)},V.forceUpdate=()=>{Pe&&(clearTimeout(Pe),ne())},V.hasPendingUpdates=()=>!!Pe,V}_.d(We,{n:()=>z})},35926:(st,We,_)=>{_.d(We,{Cq:()=>H,Ee:()=>V,J1:()=>oe,LF:()=>w,Me:()=>Q,Mm:()=>me,Sz:()=>R,W4:()=>ue,e_:()=>ge,nD:()=>ne,t_:()=>q,tr:()=>G,v7:()=>_e,zJ:()=>Pe,zq:()=>U});var z=_(63583),E=_(73596),Ue=_(69287),ae=_(81142),k=_(1119),ye=_(82663),je=_(68479);function H(re,ce,de){return re.units[ce][de]}function Pe(re,ce,de,Le=2,Ee="abbr"){return`${(0,je.ZV)(ce,{minimumFractionDigits:Le,maximumFractionDigits:Le,signDisplay:ce>0?"never":"exceptZero"})} ${H(re,de,Ee)}`}function ne(re,ce,de,Le=2,Ee="abbr"){return`${(0,je.ZV)(ce,{minimumFractionDigits:Le,maximumFractionDigits:Le,signDisplay:"exceptZero"})} ${H(re,de,Ee)}`}function V(re,ce,de,Le=2,Ee="abbr"){const ve=(0,ye.x0)(ce,de);return Pe(re,(0,ye.oU)(ce,de,ve),ve,Le,Ee)}function me(re,ce,de,Le=2,Ee="abbr"){const ve=(0,ye.x0)(ce,de);return ne(re,(0,ye.oU)(ce,de,ve),ve,Le,Ee)}function ue(re,ce,de,Le=2,Ee="abbr"){const ve=(0,ye.x$)(ce,de);return Pe(re,(0,ye.oU)(ce,de,ve),ve,Le,Ee)}function ge(re,ce,de,Le=2,Ee="abbr"){const ve=(0,ye.x$)(ce,de);return ne(re,(0,ye.oU)(ce,de,ve),ve,Le,Ee)}function G(re,ce,de,Le=2,Ee="abbr"){const ve=(0,ye.OU)(ce,de);return Pe(re,(0,ye.oU)(ce,de,ve),ve,Le,Ee)}function oe(re,ce,de,Le=2,Ee="abbr"){const ve=(0,ye.OU)(ce,de);return ne(re,(0,ye.oU)(ce,de,ve),ve,Le,Ee)}function q(re,ce,de,Le=2,Ee="abbr"){const ve=(0,ye.y7)(ce,de);return Pe(re,(0,ye.oU)(ce,de,ve),ve,Le,Ee)}function w(re,ce,de,Le=2,Ee="abbr"){const ve=(0,ye.y7)(ce,de);return ne(re,(0,ye.oU)(ce,de,ve),ve,Le,Ee)}function U(re,ce,de,Le=2,Ee="abbr"){const ve=(0,ye.wv)(ce,de);return Pe(re,(0,ye.oU)(ce,de,ve),ve,Le,Ee)}function R(re,ce,de,Le=2,Ee="abbr"){const ve=(0,ye.TL)(ce,de);return Pe(re,(0,ye.oU)(ce,de,ve),ve,Le,Ee)}const Z=(re,ce)=>({style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:ce,minimumFractionDigits:ce,signDisplay:re>0?"never":"exceptZero"});function Q(re,ce,de,Le,Ee,ve=E.ie,Re=!0){let Ve=ve.normalize((0,ae.g2)((0,ye.oU)(re,ce,"degrees"),de,Le),0,Re);const Ze=Z(Ve,Ee??2);return Ve=function W(re,ce){const de=JSON.stringify(ce);let Le=P.get(de);return Le||(Le=new Intl.NumberFormat("en-US",ce),P.set(de,Le)),/^[-+]?360\.?0*\xb0?$/.test(Le.format(re))?0:re}(Ve,Ze),(0,je.ZV)(Ve,Ze)}const P=new Map;const te=["B","kB","MB","GB","TB"];function _e(re,ce){let de=0===(ce=Math.round(ce))?0:Math.floor(Math.log(ce)/Math.log(z.u.KILOBYTES));de=(0,Ue.qE)(de,0,te.length-1);const Le=(0,je.ZV)(ce/z.u.KILOBYTES**de,{maximumFractionDigits:2});return(0,k.HC)(re.units.bytes[te[de]],{fileSize:Le})}},94376:(st,We,_)=>{_.d(We,{p:()=>H});var z=_(8189),E=_(85211),ye=(_(3248),_(35150),_(40707),_(76576));const H=Pe=>{let ne=class extends Pe{get apiKey(){return this._isOverridden("apiKey")?this._get("apiKey"):function je(Pe){return"portalItem"in Pe}(this)?this.portalItem?.apiKey:null}set apiKey(V){null!=V?this._override("apiKey",V):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return(0,z._)([(0,E.MZ)({type:String})],ne.prototype,"apiKey",null),ne=(0,z._)([(0,ye.$)("esri.layers.mixins.APIKeyMixin")],ne),ne}},43124:(st,We,_)=>{_.d(We,{Rr:()=>Pe,fY:()=>me,ne:()=>V});var z=_(8189),E=_(89221),Ue=_(85211),je=(_(3248),_(35150),_(40707),_(76576)),H=_(15848);function Pe(ue,ge,G){if(!ue)return null;const oe=ue.find(w=>!!w.field);if(!oe)return null;const q=new H.A;return q.read(oe,G),[q]}const V={type:[H.A],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:Pe},write:{writer:function ne(ue,ge,G,oe){const q=ue.find(w=>!!w.field);q&&(0,E.sM)(G,[q.toJSON()],ge)}}}},me=ue=>{let ge=class extends ue{constructor(){super(...arguments),this.orderBy=null}};return(0,z._)([(0,Ue.MZ)(V)],ge.prototype,"orderBy",void 0),ge=(0,z._)([(0,je.$)("esri.layers.mixins.OrderedLayer")],ge),ge}},47063:(st,We,_)=>{_.d(We,{A:()=>ge});var z=_(8189),E=_(90660),Ue=_(71065),ae=_(85211),H=(_(3248),_(35150),_(40707),_(17221)),Pe=_(76576),ne=_(50305),V=_(39664),me=_(69741);let ue=class extends(E.A.ClonableMixin(Ue.A)){constructor(G){super(G),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(G){const oe={};for(const q of Object.keys(G))oe[q]=(0,V.rS)(G[q]);return oe}writeDomains(G,oe){const q={};for(const w of Object.keys(G))G[w]&&(q[w]=G[w]?.toJSON());oe.domains=q}};(0,z._)([(0,ae.MZ)({json:{write:!0}})],ue.prototype,"id",void 0),(0,z._)([(0,ae.MZ)({json:{write:!0}})],ue.prototype,"name",void 0),(0,z._)([(0,ae.MZ)({json:{write:!0}})],ue.prototype,"domains",void 0),(0,z._)([(0,H.w)("domains")],ue.prototype,"readDomains",null),(0,z._)([(0,ne.K)("domains")],ue.prototype,"writeDomains",null),(0,z._)([(0,ae.MZ)({type:[me.A],json:{write:!0}})],ue.prototype,"templates",void 0),ue=(0,z._)([(0,Pe.$)("esri.layers.support.FeatureType")],ue);const ge=ue},64584:(st,We,_)=>{_.d(We,{A:()=>V});var Pe,z=_(8189),E=_(31178),Ue=_(71065),ae=_(85211),H=(_(3248),_(35150),_(40707),_(76576));let ne=Pe=class extends Ue.A{constructor(me){super(me),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new E.A}clone(){return new Pe({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};(0,z._)([(0,ae.MZ)({type:String,json:{write:{isRequired:!0}}})],ne.prototype,"floorField",void 0),(0,z._)([(0,ae.MZ)({json:{read:!1,write:!1}})],ne.prototype,"viewAllMode",void 0),(0,z._)([(0,ae.MZ)({json:{read:!1,write:!1}})],ne.prototype,"viewAllLevelIds",void 0),ne=Pe=(0,z._)([(0,H.$)("esri.layers.support.LayerFloorInfo")],ne);const V=ne},15848:(st,We,_)=>{_.d(We,{A:()=>me});var Pe,z=_(8189),E=_(49976),Ue=_(71065),ae=_(85211),H=(_(3248),_(35150),_(40707),_(76576));const ne=new E.J({asc:"ascending",desc:"descending"});let V=Pe=class extends Ue.A{constructor(ue){super(ue),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new Pe({field:this.field,valueExpression:this.valueExpression,order:this.order})}};(0,z._)([(0,ae.MZ)({type:String,json:{write:!0}})],V.prototype,"field",void 0),(0,z._)([(0,ae.MZ)({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],V.prototype,"valueExpression",void 0),(0,z._)([(0,ae.MZ)({type:ne.apiValues,json:{type:ne.jsonValues,read:ne.read,write:ne.write}})],V.prototype,"order",void 0),V=Pe=(0,z._)([(0,H.$)("esri.layers.support.OrderByInfo")],V);const me=V},36267:(st,We,_)=>{_.d(We,{A:()=>ue});var z=_(8189),E=_(90660),Ue=_(49976),ae=_(71065),k=_(85211),Pe=(_(3248),_(35150),_(40707),_(76576));const ne=new Ue.J({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),V=new Ue.J({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let me=class extends(E.A.ClonableMixin(ae.A)){constructor(ge){super(ge),this.cardinality=null,this.catalogId=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};(0,z._)([(0,k.MZ)({json:{read:ne.read,write:ne.write}})],me.prototype,"cardinality",void 0),(0,z._)([(0,k.MZ)({json:{name:"catalogID"}})],me.prototype,"catalogId",void 0),(0,z._)([(0,k.MZ)({json:{read:!0,write:!0}})],me.prototype,"composite",void 0),(0,z._)([(0,k.MZ)({json:{read:!0,write:!0}})],me.prototype,"id",void 0),(0,z._)([(0,k.MZ)({json:{read:!0,write:!0}})],me.prototype,"keyField",void 0),(0,z._)([(0,k.MZ)({json:{read:!0,write:!0}})],me.prototype,"keyFieldInRelationshipTable",void 0),(0,z._)([(0,k.MZ)({json:{read:!0,write:!0}})],me.prototype,"name",void 0),(0,z._)([(0,k.MZ)({json:{read:!0,write:!0}})],me.prototype,"relatedTableId",void 0),(0,z._)([(0,k.MZ)({json:{read:!0,write:!0}})],me.prototype,"relationshipTableId",void 0),(0,z._)([(0,k.MZ)({json:{read:V.read,write:V.write}})],me.prototype,"role",void 0),me=(0,z._)([(0,Pe.$)("esri.layers.support.Relationship")],me);const ue=me},85791:(st,We,_)=>{_.d(We,{A:()=>oe});var z=_(10467),E=_(8189),Ue=_(98877),ae=_(89447),k=_(31178),ye=_(85211),ne=(_(3248),_(35150),_(40707),_(76576)),V=_(86300),me=_(48218);let G=class extends Ue.A{constructor(q){super(q),this._featureUtils=null,this.effectivePopupTemplate=null}get _arcadeTask(){return this.expressionsUsedInTitle.length>0?this._get("_arcadeTask")||(0,ae.UT)(()=>(0,me.lw)()):null}get featureUtilsPromise(){return this._get("featureUtilsPromise")??_.e(3958).then(_.bind(_,93958)).then(q=>this._featureUtils=q)}get calculatedExpressions(){const q=new k.A;if(!this.expressionsUsedInTitle.length)return q;if(!this._arcadeTask?.value){for(const w of this.expressionsUsedInTitle??[])q.push({name:w.name,invalid:!0});return q}for(const w of this.expressionsUsedInTitle)try{const U=this._arcadeTask.value.arcade.parseScript(w.expression,["$layer","$map","$datastore"]);if(U.isAsync){q.push({name:w.name,invalid:!0});break}q.push({name:w.name,syntax:U,invalid:!1,func:this._arcadeTask.value.arcade.compileScript(U,{vars:{$feature:"any"}})})}catch{q.push({name:w.name,invalid:!0});break}return q}get expressionsUsedInTitle(){let q=this.effectivePopupTemplate?.title??"";return"string"!=typeof q?[]:(q=q.toLowerCase(),this.effectivePopupTemplate?.expressionInfos?.filter(w=>q.includes(`{expression/${w.name.toLowerCase()}}`))??[])}get fieldInfoMap(){return this._featureUtils?this._createFieldInfoMap(this._featureUtils.getAllFieldInfos(this.effectivePopupTemplate)):null}get hasBadExpressions(){return this.calculatedExpressions.some(q=>!0===q.invalid)}get requiredFields(){const q=new Set;if(this._arcadeTask?.value&&!this.hasBadExpressions)for(const U of this.calculatedExpressions?.toArray()??[])try{const R=this._arcadeTask.value.arcade.extractFieldLiterals(U.syntax);for(const B of R){const Z=B.split("."),Q=this.fieldsIndex.get(Z.at(-1)??"");Q&&q.add(Q.name)}}catch{}const w=this._extractFieldNames(this.workingTitle);for(const U of w){const R=this.fieldsIndex.get(U);R&&q.add(R.name)}return q}get titleFromDisplayField(){let q="";return this.displayField&&(q=this.fieldsIndex.get(this.displayField)?.name??""),q||(q=this.fieldsIndex.get(this.objectIdField)?.name??""),q?`{${q}}`:""}get workingTitle(){const q=this.effectivePopupTemplate?this.effectivePopupTemplate.title:"";return""===q||null==q||this.hasBadExpressions||"string"!=typeof q?this.titleFromDisplayField:q}getTitle(q,w,U){var R=this;return(0,z.A)(function*(){try{const{attributes:B}=w,Z=U?.timeZone??"system",[{substituteFieldsInLinksAndAttributes:Q}]=yield Promise.all([R.featureUtilsPromise,R._arcadeTask?.promise]);if(U.fetchMissingFields&&(w=yield R._checkAndReQueryGraphic(q,w)),R.workingTitle&&R.fieldInfoMap){const C=R._createFormattedAttributes(q,w,Z).global;return Q({attributes:B,expressionAttributes:null,fieldInfoMap:R.fieldInfoMap,globalAttributes:C,layer:q,text:R.workingTitle})}return""}catch{}return""})()}_checkAndReQueryGraphic(q,w){var U=this;return(0,z.A)(function*(){const R=w.getObjectId();if(null==R)return w;if(!(0,V.Kl)(U.requiredFields,w)){const B=q.createQuery();B.where="1=1",B.outFields=[...U.requiredFields],B.objectIds=[R];const Z=yield q.queryFeatures(B);if(1===Z?.features.length)return Z.features[0]}return w})()}_createFieldInfoMap(q){const w=new Map;if(!q)return w;for(const U of q){if(!U.fieldName)continue;const R=this.fieldsIndex.get(U.fieldName),B=R?.name??U.fieldName;U.fieldName=B,w.set(B.toLowerCase(),U)}return w}_createFormattedAttributes(q,w,U="system"){const R=this.effectivePopupTemplate?.fieldInfos??[],B={};if(!this._featureUtils)return{};if(!this.hasBadExpressions&&this.calculatedExpressions.length>0&&this._arcadeTask?.value){const Q=this._arcadeTask.value.Feature.createFromGraphicLikeObject(w.geometry,w.attributes,q,null);for(const C of this.calculatedExpressions)try{B[`expression/${C.name}`]=C.func({vars:{$feature:Q}})}catch{}}const Z={...w.attributes,...B};return{global:this._featureUtils.formatAttributes({fieldInfos:R,attributes:Z,graphic:w,timeZone:U,layer:q,fieldInfoMap:this.fieldInfoMap}),content:[]}}_extractFieldNames(q){return(0,V.nw)(q).filter(w=>!(0===w.indexOf("relationships/")||0===w.indexOf("expression/")))}};(0,E._)([(0,ye.MZ)({readOnly:!0})],G.prototype,"_arcadeTask",null),(0,E._)([(0,ye.MZ)()],G.prototype,"_featureUtils",void 0),(0,E._)([(0,ye.MZ)({readOnly:!0})],G.prototype,"featureUtilsPromise",null),(0,E._)([(0,ye.MZ)({readOnly:!0})],G.prototype,"calculatedExpressions",null),(0,E._)([(0,ye.MZ)()],G.prototype,"displayField",void 0),(0,E._)([(0,ye.MZ)()],G.prototype,"effectivePopupTemplate",void 0),(0,E._)([(0,ye.MZ)()],G.prototype,"expressionsUsedInTitle",null),(0,E._)([(0,ye.MZ)()],G.prototype,"fieldsIndex",void 0),(0,E._)([(0,ye.MZ)()],G.prototype,"fieldInfoMap",null),(0,E._)([(0,ye.MZ)()],G.prototype,"fields",void 0),(0,E._)([(0,ye.MZ)()],G.prototype,"objectIdField",void 0),(0,E._)([(0,ye.MZ)()],G.prototype,"requiredFields",null),G=(0,E._)([(0,ne.$)("esri.layers.support.TitleCreator")],G);const oe=G},27960:(st,We,_)=>{_.d(We,{Ch:()=>k,mW:()=>Ue,u2:()=>ae});var z=_(69287),E=_(63484);function Ue(ue,ge){return{...ge,filterMode:ue.mode}}function ae(ue,ge){return je(ue,ge).next().value??null}function k(ue,ge,G){const oe=function ye(ue){if("manual"===ne(ue))return null;const ge=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:G,maxScale:oe}of ue.filters)ge[0]=Math.max(ge[0],V(G)),ge[1]=Math.min(ge[1],me(oe));return ge}(ue);if(oe&&((0,z.gg)(ge,oe[0])||(0,z.ZH)(G,oe[1])))return"";const q=Array.from(je(ue,ge,G)),w=function H(ue,ge,G){if(0===ue.length)return!0;const oe=V(ue.at(0)?.minScale),q=me(ue.at(-1)?.maxScale);if((0,z.ZH)(oe,ge)||(0,z.gg)(q,G))return!0;for(let w=0;w<ue.length-1;w++){const U=ue[w];if((0,z.ZH)(V(ue[w+1].minScale),me(U.maxScale)))return!0}return!1}(q,ge,G)?"1=1":q.map(U=>U.where||"1=1").reduce((U,R)=>(0,E.IW)(U,R),"");return w&&"1=1"!==w?w:""}function*je(ue,ge,G){if("manual"===ne(ue)){const oe=ue.filters.find(q=>q.id===ue.activeFilterId);oe&&(yield oe)}else{"object"==typeof ge&&(ge=ge.scale);for(const oe of ue.filters)Pe(oe.minScale,oe.maxScale,ge,G)&&(yield oe)}}function Pe(ue,ge,G,oe){return ue=V(ue),G=V(G),ge=me(ge),!(!(0,z.Sp)(G,ue)&&(oe??G)>ue||(0,z.Hx)(ge,G)||void 0!==oe&&(0,z.Sp)(oe,ue))}function ne(ue){return"mode"in ue?ue.mode:ue.filterMode}function V(ue){return ue||Number.POSITIVE_INFINITY}function me(ue){return ue||0}},6829:(st,We,_)=>{_.d(We,{CW:()=>ue,Fm:()=>H,Hz:()=>ge,JQ:()=>me,JZ:()=>P,ND:()=>oe,R_:()=>ye,U9:()=>V,fu:()=>E,nr:()=>G,oF:()=>Ue,rq:()=>Pe,z$:()=>ne});const z=[["binary","application/octet-stream","bin",""]];function E(W,te){return null!=R(te.name,W?.supportedFormats??[])}function Ue(W,te){if(!W)return!1;const _e=Pe(te,W.supportedFormats??[]);return null!=_e&&W.editFormats.includes(_e)}function ye(W,te){return B(function U(W,te){const _e=W.toLowerCase();return q(te).find(re=>Z(re)===_e)}(W,te))}function je(W,te){return B(R(W,te))}function H(W,te){return Z(function w(W,te){return q(te).find(_e=>B(_e)===W)}(W,te))}function Pe(W,te){return je(W.name,te)??ye(W.type,te)}function ne(W,te,_e){return ye(W,_e)??je(te,_e)}function V({supportedFormats:W}){return ne("model/gltf-binary","glb",W)}function me(W){const te=V(W);return null!=te&&W.editFormats.includes(te)}function ue({supportedFormats:W}){return ne("model/gltf+json","gltf",W)}function ge(W){if(!W)return null;const te=V(W),_e=ue(W);let re=null;for(const ce of W.queryFormats){if(ce===te)return ce;ce===_e&&(re=ce)}return re}function G({supportedFormats:W}){return ne("application/esri3do-SR_world","wld",W)}function oe({supportedFormats:W}){return ne("application/esri3do-SR_prj","prj",W)}function q(W){return[...z,...W]}function R(W,te){const _e=W.toLowerCase();return q(te).find(re=>function Q(W){return W?.[2].split(",").map(te=>te.toLowerCase())??[]}(re).some(ce=>_e.endsWith(ce)))}function B(W){return W?.[0]}function Z(W){return W?.[1].toLowerCase()}function P(W){return W.tables?.find(te=>"assetMaps"===te.role)}},4858:(st,We,_)=>{_.d(We,{BI:()=>ge,D3:()=>me,XJ:()=>ue,lc:()=>V,mX:()=>oe,rU:()=>G,tH:()=>Z});var z=_(1119);const E="__begin__",Ue="__end__",ae=new RegExp(E,"ig"),k=new RegExp(Ue,"ig"),ye=new RegExp("^"+E,"i"),je=new RegExp(Ue+"$","i"),H='"',Pe=H+" + ",ne=" + "+H;function V(Q){return Q.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function me(Q){return Q.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function ue(Q){const C={expression:"",type:"none"};return Q.labelExpressionInfo?Q.labelExpressionInfo.value?(C.expression=Q.labelExpressionInfo.value,C.type="conventional"):Q.labelExpressionInfo.expression&&(C.expression=Q.labelExpressionInfo.expression,C.type="arcade"):null!=Q.labelExpression&&(C.expression=V(Q.labelExpression),C.type="conventional"),C}function ge(Q){const C=ue(Q);switch(C.type){case"conventional":return oe(C.expression);case"arcade":return C.expression}return null}function G(Q){const C=ue(Q);switch(C.type){case"conventional":return function w(Q){return Q?.match(q)?.[1].trim()||null}(C.expression);case"arcade":return Z(C.expression)}return null}function oe(Q){let C;return Q?(C=(0,z.HC)(Q,P=>E+'$feature["'+P+'"]'+Ue),C=ye.test(C)?C.replace(ye,""):H+C,C=je.test(C)?C.replace(je,""):C+H,C=C.replaceAll(ae,Pe).replaceAll(k,ne)):C='""',C}const q=/^\s*\{([^}]+)\}\s*$/i,U=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,R=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,B=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function Z(Q){if(!Q)return null;let C=U.exec(Q)||R.exec(Q);return C?C[1]||C[3]:(C=B.exec(Q),C?C[2]:null)}},90543:(st,We,_)=>{_.d(We,{S:()=>me,d:()=>Q});var z=_(3248),E=_(68438),Ue=_(6829);function ae(C,P,W){return!!ye(C,P,W)}function k(C,P,W){return ye(C,P,W)}function ye(C,P,W){return C&&C.hasOwnProperty(P)?C[P]:W}const je={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function H(C){const P=C?.supportedSpatialAggregationStatistics?.map(W=>W.toLowerCase());return{envelope:!!P?.includes("envelopeaggregate"),centroid:!!P?.includes("centroidaggregate"),convexHull:!!P?.includes("convexhullaggregate")}}function Pe(C,P){return!!C?.supportedOperationsWithCacheHint?.map(te=>te.toLowerCase())?.includes(P.toLowerCase())}function ne(C){const P=C?.supportedStatisticTypes?.map(W=>W.toLowerCase());return{count:!!P?.includes("count"),sum:!!P?.includes("sum"),min:!!P?.includes("min"),max:!!P?.includes("max"),avg:!!P?.includes("avg"),var:!!P?.includes("var"),stddev:!!P?.includes("stddev"),percentileContinuous:!!P?.includes("percentile_continuous"),percentileDiscrete:!!P?.includes("percentile_discrete"),envelope:!!P?.includes("envelopeaggregate"),centroid:!!P?.includes("centroidaggregate"),convexHull:!!P?.includes("convexhullaggregate")}}function V(C){const P=C?.supportedNormalizationTypes?.map(W=>W.toLowerCase());return{field:!!P?.includes("field"),log:!!P?.includes("log"),naturalLog:!!P?.includes("naturallog"),percentOfTotal:!!P?.includes("percentoftotal"),squareRoot:!!P?.includes("squareroot")}}function me(C,P){return{analytics:ue(C),attachment:ge(C),data:G(C),metadata:oe(C),operations:q(C.capabilities,C,P),query:w(C,P),queryAttributeBins:B(C),queryRelated:U(C),queryTopFeatures:R(C),editing:Z(C)}}function ue(C){return{supportsCacheHint:Pe(C.advancedQueryCapabilities,"queryAnalytics")}}function ge(C){const P=C.attachmentProperties,W={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:Pe(C.advancedQueryCapabilities,"queryAttachments"),supportsOrderByFields:ae(C.advancedQueryCapabilities,"supportsQueryAttachmentOrderByFields",!1),supportsResize:ae(C,"supportsAttachmentsResizing",!1)};return P&&Array.isArray(P)&&P.forEach(te=>{const _e=je[te.name];_e&&(W[_e]=!!te.isEnabled)}),W}function G(C){return{isVersioned:ae(C,"isDataVersioned",!1),isBranchVersioned:ae(C,"isDataBranchVersioned",!1),supportsAttachment:ae(C,"hasAttachments",!1),supportsM:ae(C,"hasM",!1),supportsZ:ae(C,"hasZ",!1)}}function oe(C){return{supportsAdvancedFieldProperties:ae(C,"supportsFieldDescriptionProperty",!1)}}function q(C,P,W){const te=C?C.toLowerCase().split(",").map(Ve=>Ve.trim()):[],_e=W?(0,E.qg)(W):null,re=te.includes(null!=_e&&"MapServer"===_e.serverType?"data":"query"),ce=te.includes("editing")&&!P.datesInUnknownTimezone;let de=ce&&te.includes("create"),Le=ce&&te.includes("delete"),Ee=ce&&te.includes("update");const ve=te.includes("changetracking"),Re=P.advancedQueryCapabilities;return ce&&!(de||Le||Ee)&&(de=Le=Ee=!0),{supportsCalculate:ae(P,"supportsCalculate",!1),supportsTruncate:ae(P,"supportsTruncate",!1),supportsValidateSql:ae(P,"supportsValidateSql",!1),supportsAdd:de,supportsDelete:Le,supportsEditing:ce,supportsChangeTracking:ve,supportsQuery:re,supportsQueryAnalytics:ae(Re,"supportsQueryAnalytic",!1),supportsQueryAttachments:ae(Re,"supportsQueryAttachments",!1),supportsQueryBins:ae(Re,"supportsQueryBins",!1),supportsQueryTopFeatures:ae(Re,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:ae(P,"supportsAttachmentsResizing",!1),supportsSync:te.includes("sync"),supportsUpdate:Ee,supportsExceedsLimitStatistics:ae(P,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:ae(P,"supportsAsyncConvert3D",!1)}}function w(C,P){const W=C.advancedQueryCapabilities,te=C.ownershipBasedAccessControlForFeatures,_e=C.archivingInfo,re=C.currentVersion,ce=P?.includes("MapServer"),de=!ce||re>=(0,z.A)("mapserver-pbf-version-support"),Le=(0,E.Wo)(P),Ee=new Set((C.supportedQueryFormats??"").split(",").map(ve=>ve.toLowerCase().trim()));return{maxRecordCount:k(C,"maxRecordCount",void 0),maxRecordCountFactor:k(C,"maxRecordCountFactor",void 0),standardMaxRecordCount:k(C,"standardMaxRecordCount",void 0),supportedSpatialAggregationStatistics:H(W),supportsCacheHint:ae(W,"supportsQueryWithCacheHint",!1)||Pe(W,"query"),supportsCentroid:ae(W,"supportsReturningGeometryCentroid",!1),supportsCompactGeometry:Le,supportsCurrentUser:ae(W,"supportsCurrentUserQueries",!1),supportsDefaultSpatialReference:ae(W,"supportsDefaultSR",!1),supportsDisjointSpatialRelationship:ae(W,"supportsDisjointSpatialRel",!1),supportsDistance:ae(W,"supportsQueryWithDistance",!1),supportsDistinct:ae(W,"supportsDistinct",C.supportsAdvancedQueries),supportsExtent:ae(W,"supportsReturningQueryExtent",!1),supportsFormatPBF:de&&Ee.has("pbf"),supportsFullTextSearch:ae(W,"supportsFullTextSearch",!1),supportsGeometryProperties:ae(W,"supportsReturningGeometryProperties",!1),supportsHavingClause:ae(W,"supportsHavingClause",!1),supportsHistoricMoment:ae(_e,"supportsQueryWithHistoricMoment",!1),supportsMaxRecordCountFactor:ae(W,"supportsMaxRecordCountFactor",!1),supportsOrderBy:ae(W,"supportsOrderBy",C.supportsAdvancedQueries),supportsPagination:ae(W,"supportsPagination",!1),supportsPercentileStatistics:ae(W,"supportsPercentileStatistics",!1),supportsQuantization:ae(C,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:ae(C,"supportsQuantizationEditMode",!1),supportsQueryByAnonymous:ae(te,"allowAnonymousToQuery",!0),supportsQueryByOthers:ae(te,"allowOthersToQuery",!0),supportsQueryGeometry:ae(C,"supportsReturningQueryGeometry",!1),supportsResultType:ae(W,"supportsQueryWithResultType",!1),supportsReturnMesh:!!(0,Ue.Hz)(C.infoFor3D),supportsSpatialAggregationStatistics:ae(W,"supportsSpatialAggregationStatistics",!1),supportsSqlExpression:ae(W,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:ae(C,"useStandardizedQueries",!1),supportsStatistics:ae(W,"supportsStatistics",C.supportsStatistics),supportsTopFeaturesQuery:ae(W,"supportsTopFeaturesQuery",!1),supportsTrueCurve:ae(W,"supportsTrueCurve",!1),tileMaxRecordCount:k(C,"tileMaxRecordCount",void 0)}}function U(C){const P=C.advancedQueryCapabilities,W=ae(P,"supportsAdvancedQueryRelated",!1);return{supportsPagination:ae(P,"supportsQueryRelatedPagination",!1),supportsCount:W,supportsOrderBy:W,supportsCacheHint:Pe(P,"queryRelated")}}function R(C){return{supportsCacheHint:Pe(C.advancedQueryCapabilities,"queryTopFilter")}}function B(C){const P=C?C.queryBinsCapabilities:void 0;return{supportsDate:ae(P,"supportsDateBin",!1),supportsFixedInterval:ae(P,"supportsFixedIntervalBin",!1),supportsAutoInterval:ae(P,"supportsAutoIntervalBin",!1),supportsFixedBoundaries:ae(P,"supportsFixedBoundariesBin",!1),supportsStackBy:ae(P,"supportsStackBy",!1),supportsSplitBy:ae(P,"supportsSplitBy",!1),supportsSnapToData:ae(P,"supportsSnapToData",!1),supportsReturnFullIntervalBin:ae(P,"supportsReturnFullIntervalBin",!1),supportsFirstDayOfWeek:ae(P,"supportsFirstDayOfWeek",!1),supportsNormalization:ae(P,"supportsNormalization",!1),supportedStatistics:ne(P),supportedNormalizationTypes:V(P)}}function Z(C){const P=C.ownershipBasedAccessControlForFeatures,W=C?C.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:ae(C,"allowGeometryUpdates",!0),supportsGlobalId:ae(C,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:ae(C,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:ae(C,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:ae(C,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:ae(C,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:ae(P,"allowAnonymousToDelete",!0),supportsDeleteByOthers:ae(P,"allowOthersToDelete",!0),supportsUpdateByAnonymous:ae(P,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:ae(P,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:ae(W,"supportsAsyncApplyEdits",!1),zDefault:k(C,"zDefault",void 0)}}function Q(C){return{operations:{supportsAppend:ae(C,"supportsAppend",!1),supportsCoverageQuery:C?.playbackInfo?.klv["0601"]??!1,supportsExportClip:ae(C,"supportsExportClip",!1),supportsExportFrameset:ae(C,"supportsExportFrameset",!1),supportsMensuration:ae(C,"supportsMensuration",!1),supportsUpdate:ae(C,"supportsUpdate",!1)}}}},78592:(st,We,_)=>{_.d(We,{O3:()=>Pe,PU:()=>je,YW:()=>V,ex:()=>k,hv:()=>ne,zp:()=>ye});var z=_(69287),E=_(67685),Ue=_(53781),ae=_(89141);const k=2.4;function ye(me){return(0,E.PN)(me*k)}function je(me){return(0,E.Lz)(me)/k}function H(me,ue,ge,G){let{color:oe,ratio:q}=ue,{color:w,ratio:U}=ge;U===q&&(1===U?q-=1e-6:U+=1e-6);const R=(0,z.qE)((G-q)/(U-q),0,1);(0,Ue.l)(me,oe.toArray(),w.toArray(),R)}function Pe(me){const ge=new Uint8ClampedArray(2048);if((me=me.filter(({ratio:U})=>U>=0&&U<=1).sort((U,R)=>U.ratio-R.ratio).map(({color:U,ratio:R})=>({color:U,ratio:Math.max(R,.001)}))).length<1)return ge;let G=me[0],oe=me[0],q=1;const w=(0,ae.vt)();for(let U=0;U<512;U++){const R=(U+.5)/512;for(;R>oe.ratio&&q<me.length;)G=oe,oe=me[q++];H(w,G,oe,R),ge.set(w,4*U)}return ge}function ne(me,ue,ge){const G=Math.sqrt(me**2+ue**2)/ge;return G>1?0:3/(Math.PI*ge**2)*(1-G**2)**2}function V(me){return"function"==typeof me?me:me?ue=>+ue[me]:()=>1}},91515:(st,We,_)=>{_.d(We,{GP:()=>V,LI:()=>Pe,lc:()=>je,u5:()=>H}),_(13242);var E=_(68479);const Ue=/^-?(\d+)(\.(\d+))?$/i;function ae(me,ue){return me-ue}function k(me,ue){let ge,G;return ge=Number(me.toFixed(ue)),ge<me?G=ge+1/10**ue:(G=ge,ge-=1/10**ue),ge=Number(ge.toFixed(ue)),G=Number(G.toFixed(ue)),[ge,G]}function ye(me,ue,ge,G,oe){const q=H(me,ue,ge,G);return(null==q.previous||q.previous<=oe)&&(null==q.next||q.next<=oe)||q.previous+q.next<=2*oe}function je(me){const ue=String(me),ge=ue.match(Ue);if(ge?.[1])return{integer:ge[1].split("").length,fractional:ge[3]?ge[3].split("").length:0};if(ue.toLowerCase().includes("e")){const G=ue.split("e"),oe=G[0],q=G[1];if(oe&&q){const w=Number(oe);let U=Number(q);const R=U>0;R||(U=Math.abs(U));const B=je(w);return R?(B.integer+=U,U>B.fractional?B.fractional=0:B.fractional-=U):(B.fractional+=U,U>B.integer?B.integer=1:B.integer-=U),B}}return{integer:0,fractional:0}}function H(me,ue,ge,G){const oe={previous:null,next:null};if(null!=ge){const q=me-ge;oe.previous=Math.floor(Math.abs(100*(ue-ge-q)/q))}if(null!=G){const q=G-me;oe.next=Math.floor(Math.abs(100*(G-ue-q)/q))}return oe}function Pe(me,ue={}){const ge=me.slice(),{tolerance:G=2,strictBounds:oe=!1,indexes:q=ge.map((w,U)=>U)}=ue;q.sort(ae);for(let w=0;w<q.length;w++){const U=q[w],R=ge[U],B=0===U?null:ge[U-1],Z=U===ge.length-1?null:ge[U+1],Q=je(R).fractional;if(Q){let C,P=0,W=!1;for(;P<=Q&&!W;){const te=k(R,P);C=oe&&0===w?te[1]:te[0],W=ye(R,C,B,Z,G),P++}W&&(ge[U]=C)}}return ge}const ne={maximumFractionDigits:20};function V(me){return(0,E.ZV)(me,ne)}},1832:(st,We,_)=>{function z(E){const Ue={};for(const ae in E){if("declaredClass"===ae)continue;const k=E[ae];if(null!=k&&"function"!=typeof k)if(Array.isArray(k)){Ue[ae]=[];for(let ye=0;ye<k.length;ye++)Ue[ae][ye]=z(k[ye])}else"object"==typeof k?k.toJSON&&(Ue[ae]=JSON.stringify(k)):Ue[ae]=k}return Ue}_.d(We,{z:()=>z})},34687:(st,We,_)=>{_.d(We,{e:()=>H,s:()=>ye});var z=_(10467),E=_(68800),Ue=_(1277),ae=_(93327),k=_(87086);function ye(ne,V,me){return je.apply(this,arguments)}function je(){return(je=(0,z.A)(function*(ne,V,me){const ue=yield H(ne,V,me);return ae.A.fromJSON(ue)})).apply(this,arguments)}function H(ne,V,me){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,z.A)(function*(ne,V,me){const ue=(0,E.Dl)(ne),ge={...me},G=k.A.from(V),{data:oe}=yield(0,Ue.eW)(ue,G,G.sourceSpatialReference,ge);return oe})).apply(this,arguments)}},1277:(st,We,_)=>{_.d(We,{IJ:()=>G,Jf:()=>R,Pk:()=>w,eW:()=>ue,gW:()=>U,kS:()=>q});var z=_(10467),E=_(89563),Ue=_(45272),ae=_(61320),k=_(77098),ye=_(58701),je=_(1832),H=_(78304),Pe=_(98789);const ne="Layer does not support extent calculation.";function me(P,W){const te=P.geometry,_e=P.toJSON();delete _e.compactGeometryEnabled,delete _e.defaultSpatialReferenceEnabled;const re=_e;let ce,de,Le;if(null!=te&&(de=te.spatialReference,Le=(0,ye.YX)(de),re.geometryType=(0,ae.$B)(te),re.geometry=function V(P,W){if(W&&"extent"===P.type)return`${P.xmin},${P.ymin},${P.xmax},${P.ymax}`;if(W&&"point"===P.type)return`${P.x},${P.y}`;const te=P.toJSON();return delete te.spatialReference,JSON.stringify(te)}(te,P.compactGeometryEnabled),re.inSR=Le),_e.groupByFieldsForStatistics&&(re.groupByFieldsForStatistics=_e.groupByFieldsForStatistics.join(",")),_e.objectIds&&(re.objectIds=_e.objectIds.join(",")),_e.orderByFields&&(re.orderByFields=_e.orderByFields.join(",")),!_e.outFields||!_e.returnDistinctValues&&(W?.returnCountOnly||W?.returnExtentOnly||W?.returnIdsOnly)?delete re.outFields:re.outFields=_e.outFields.includes("*")?"*":_e.outFields.join(","),_e.outSR?(re.outSR=(0,ye.YX)(_e.outSR),ce=P.outSpatialReference):te&&(_e.returnGeometry||_e.returnCentroid)&&(re.outSR=re.inSR,ce=de),_e.returnGeometry&&delete _e.returnGeometry,_e.outStatistics&&(re.outStatistics=JSON.stringify(_e.outStatistics)),_e.fullText&&(re.fullText=JSON.stringify(_e.fullText)),_e.pixelSize&&(re.pixelSize=JSON.stringify(_e.pixelSize)),_e.quantizationParameters&&(P.defaultSpatialReferenceEnabled&&null!=de&&null!=P.quantizationParameters?.extent&&de.equals(P.quantizationParameters.extent.spatialReference)&&delete _e.quantizationParameters.extent.spatialReference,re.quantizationParameters=JSON.stringify(_e.quantizationParameters)),_e.parameterValues&&(re.parameterValues=JSON.stringify(_e.parameterValues)),_e.rangeValues&&(re.rangeValues=JSON.stringify(_e.rangeValues)),_e.dynamicDataSource&&(re.layer=JSON.stringify({source:_e.dynamicDataSource}),delete _e.dynamicDataSource),_e.timeExtent){const Ee=_e.timeExtent,{start:ve,end:Re}=Ee;null==ve&&null==Re||(re.time=ve===Re?ve:`${ve??"null"},${Re??"null"}`),delete _e.timeExtent}return P.defaultSpatialReferenceEnabled&&null!=de&&null!=ce&&de.equals(ce)&&(re.defaultSR=re.inSR,delete re.inSR,delete re.outSR),re}function ue(P,W,te,_e){return ge.apply(this,arguments)}function ge(){return(ge=(0,z.A)(function*(P,W,te,_e){const re=null!=W.timeExtent&&W.timeExtent.isEmpty?{data:{features:[]}}:yield Z(P,W,"json",_e);return(0,Pe.q)(W,te,re.data),re})).apply(this,arguments)}function G(P,W,te,_e){return oe.apply(this,arguments)}function oe(){return(oe=(0,z.A)(function*(P,W,te,_e){if(null!=W.timeExtent&&W.timeExtent.isEmpty)return{data:te.createFeatureResult()};const re=yield q(P,W,_e),ce=re;return ce.data=(0,H.m)(re.data,te),ce})).apply(this,arguments)}function q(P,W,te){return Z(P,W,"pbf",te)}function w(P,W,te){return null!=W.timeExtent&&W.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):Z(P,W,"json",te,{returnIdsOnly:!0})}function U(P,W,te){return null!=W.timeExtent&&W.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):Z(P,W,"json",te,{returnIdsOnly:!0,returnCountOnly:!0})}function R(P,W,te){return B.apply(this,arguments)}function B(){return(B=(0,z.A)(function*(P,W,te){if(null!=W.timeExtent&&W.timeExtent.isEmpty)return{data:{count:0,extent:null}};const _e=yield Z(P,W,"json",te,{returnExtentOnly:!0,returnCountOnly:!0}),re=_e.data;if(re.hasOwnProperty("extent"))return _e;if(re.features)throw new Error(ne);if(re.hasOwnProperty("count"))throw new Error(ne);return _e})).apply(this,arguments)}function Z(P,W,te){return Q.apply(this,arguments)}function Q(){return(Q=(0,z.A)(function*(P,W,te,_e={},re={}){const ce="string"==typeof P?(0,Ue.An)(P):P,de=W.geometry?[W.geometry]:[],Le=yield(0,k.el)(de,null,{signal:_e.signal}),Ee=Le?.[0];null!=Ee&&((W=W.clone()).geometry=Ee);const ve=(0,je.z)({...ce.query,f:te,...re,...me(W,re)});return(0,E.A)((0,Ue.fj)(ce.path,function C(P,W){return null!=P.formatOf3DObjects&&!(W.returnCountOnly||W.returnExtentOnly||W.returnIdsOnly)}(W,re)?"query3d":"query"),{..._e,responseType:"pbf"===te?"array-buffer":"json",query:{...ve,..._e.query}})})).apply(this,arguments)}},98789:(st,We,_)=>{_.d(We,{q:()=>E});var z=_(23743);function E(Ue,ae,k){if(!k?.features||!k.hasZ)return;const ye=(0,z.N)(k.geometryType,ae,Ue.outSpatialReference);if(null!=ye)for(const je of k.features)ye(je.geometry)}},93327:(st,We,_)=>{_.d(We,{A:()=>U});var oe,z=_(8189),E=_(81098),Ue=_(49976),ae=_(71065),k=_(77806),ye=_(85211),Pe=(_(3248),_(35150),_(17221)),ne=_(76576),V=_(50305),me=_(32034),ue=_(61320),ge=_(6434),G=_(29141);const q=new Ue.J({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let w=oe=class extends ae.A{constructor(R){super(R),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(R,B){return this.readFeaturesWithClass(R,B,E.A)}writeGeometryType(R,B,Z,Q){if(R)return void q.write(R,B,Z,Q);const{features:C}=this;if(C)for(const P of C)if(null!=P?.geometry)return void q.write(P.geometry.type,B,Z,Q)}readQueryGeometry(R,B){if(!R)return null;const Z=!!R.spatialReference,Q=(0,ue.rS)(R);return Q&&!Z&&B.spatialReference&&(Q.spatialReference=me.A.fromJSON(B.spatialReference)),Q}writeSpatialReference(R,B){if(R)return void(B.spatialReference=R.toJSON());const{features:Z}=this;if(Z)for(const Q of Z)if(Q&&null!=Q.geometry&&Q.geometry.spatialReference)return void(B.spatialReference=Q.geometry.spatialReference.toJSON())}clone(){return new oe(this.cloneProperties())}cloneProperties(){return(0,k.o8)({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(R){const B=this.write();if(B.features&&Array.isArray(R)&&R.length>0)for(let Z=0;Z<B.features.length;Z++){const Q=B.features[Z];if(Q.geometry){const C=R?.[Z];Q.geometry=C?.toJSON()||Q.geometry}}return B}quantize(R){const{scale:[B,Z],translate:[Q,C]}=R,te=this.features,_e=this._getQuantizationFunction(this.geometryType,re=>Math.round((re-Q)/B),re=>Math.round((C-re)/Z));for(let re=0,ce=te.length;re<ce;re++)_e?.(te[re].geometry)||(te.splice(re,1),re--,ce--);return this.transform=R,this}unquantize(){const{geometryType:R,features:B,transform:Z}=this;if(!Z)return this;const{translate:[Q,C],scale:[P,W]}=Z;let re=null,ce=null;if(this.hasZ&&null!=Z?.scale?.[2]){const{translate:[,,Le],scale:[,,Ee]}=Z;re=ve=>ve*Ee+Le}if(this.hasM&&null!=Z?.scale?.[3]){const{translate:[,,,Le],scale:[,,,Ee]}=Z;ce=ve=>null==ve?ve:ve*Ee+Le}const de=this._getHydrationFunction(R,Le=>Le*P+Q,Le=>C-Le*W,re,ce);for(const{geometry:Le}of B)null!=Le&&de&&de(Le);return this.transform=null,this}readFeaturesWithClass(R,B,Z){const Q=me.A.fromJSON(B.spatialReference),C=[];for(let P=0;P<R.length;P++){const W=R[P],te=Z.fromJSON(W),_e=W.geometry?.spatialReference;null==te.geometry||_e||(te.geometry.spatialReference=Q);const re=W.aggregateGeometries,ce=te.aggregateGeometries;if(re&&null!=ce)for(const de in ce){const Le=ce[de],Ee=re[de],ve=Ee?.spatialReference;null==Le||ve||(Le.spatialReference=Q)}C.push(te)}return C}_quantizePoints(R,B,Z){let Q,C;const P=[];for(let W=0,te=R.length;W<te;W++){const _e=R[W];if(W>0){const re=B(_e[0]),ce=Z(_e[1]);re===Q&&ce===C||(P.push([re-Q,ce-C]),Q=re,C=ce)}else Q=B(_e[0]),C=Z(_e[1]),P.push([Q,C])}return P.length>0?P:null}_getQuantizationFunction(R,B,Z){return"point"===R?Q=>(Q.x=B(Q.x),Q.y=Z(Q.y),Q):"polyline"===R||"polygon"===R?Q=>{const C=(0,ue.Bi)(Q)?Q.rings:Q.paths,P=[];for(let W=0,te=C.length;W<te;W++){const re=this._quantizePoints(C[W],B,Z);re&&P.push(re)}return P.length>0?((0,ue.Bi)(Q)?Q.rings=P:Q.paths=P,Q):null}:"multipoint"===R?Q=>{const C=this._quantizePoints(Q.points,B,Z);return C&&C.length>0?(Q.points=C,Q):null}:"extent"===R?Q=>Q:null}_getHydrationFunction(R,B,Z,Q,C){return"point"===R?P=>{P.x=B(P.x),P.y=Z(P.y),Q&&(P.z=Q(P.z))}:"polyline"===R||"polygon"===R?P=>{const W=(0,ue.Bi)(P)?P.rings:P.paths;let te,_e;for(let re=0,ce=W.length;re<ce;re++){const de=W[re];for(let Le=0,Ee=de.length;Le<Ee;Le++){const ve=de[Le];Le>0?(te+=ve[0],_e+=ve[1]):(te=ve[0],_e=ve[1]),ve[0]=B(te),ve[1]=Z(_e)}}if(Q&&C)for(let re=0,ce=W.length;re<ce;re++){const de=W[re];for(let Le=0,Ee=de.length;Le<Ee;Le++){const ve=de[Le];ve[2]=Q(ve[2]),ve[3]=C(ve[3])}}else if(Q)for(let re=0,ce=W.length;re<ce;re++){const de=W[re];for(let Le=0,Ee=de.length;Le<Ee;Le++){const ve=de[Le];ve[2]=Q(ve[2])}}else if(C)for(let re=0,ce=W.length;re<ce;re++){const de=W[re];for(let Le=0,Ee=de.length;Le<Ee;Le++){const ve=de[Le];ve[2]=C(ve[2])}}}:"extent"===R?P=>{P.xmin=B(P.xmin),P.ymin=Z(P.ymin),P.xmax=B(P.xmax),P.ymax=Z(P.ymax),Q&&null!=P.zmax&&null!=P.zmin&&(P.zmax=Q(P.zmax),P.zmin=Q(P.zmin)),C&&null!=P.mmax&&null!=P.mmin&&(P.mmax=C(P.mmax),P.mmin=C(P.mmin))}:"multipoint"===R?P=>{const W=P.points;let te,_e;for(let re=0,ce=W.length;re<ce;re++){const de=W[re];re>0?(te+=de[0],_e+=de[1]):(te=de[0],_e=de[1]),de[0]=B(te),de[1]=Z(_e)}if(Q&&C)for(let re=0,ce=W.length;re<ce;re++){const de=W[re];de[2]=Q(de[2]),de[3]=C(de[3])}else if(Q)for(let re=0,ce=W.length;re<ce;re++){const de=W[re];de[2]=Q(de[2])}else if(C)for(let re=0,ce=W.length;re<ce;re++){const de=W[re];de[2]=C(de[2])}}:null}};(0,z._)([(0,ye.MZ)({type:String,json:{write:!0}})],w.prototype,"displayFieldName",void 0),(0,z._)([(0,ye.MZ)({type:Boolean,json:{write:{overridePolicy:R=>({enabled:R})}}})],w.prototype,"exceededTransferLimit",void 0),(0,z._)([(0,ye.MZ)({type:[E.A],json:{write:!0}})],w.prototype,"features",void 0),(0,z._)([(0,Pe.w)("features")],w.prototype,"readFeatures",null),(0,z._)([(0,ye.MZ)({type:[G.A],json:{write:!0}})],w.prototype,"fields",void 0),(0,z._)([(0,ye.MZ)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:q.read}}})],w.prototype,"geometryType",void 0),(0,z._)([(0,V.K)("geometryType")],w.prototype,"writeGeometryType",null),(0,z._)([(0,ye.MZ)({type:Boolean,json:{write:{overridePolicy:R=>({enabled:R})}}})],w.prototype,"hasM",void 0),(0,z._)([(0,ye.MZ)({type:Boolean,json:{write:{overridePolicy:R=>({enabled:R})}}})],w.prototype,"hasZ",void 0),(0,z._)([(0,ye.MZ)({types:ge.yR,json:{write:!0}})],w.prototype,"queryGeometry",void 0),(0,z._)([(0,Pe.w)("queryGeometry")],w.prototype,"readQueryGeometry",null),(0,z._)([(0,ye.MZ)({type:me.A,json:{write:!0}})],w.prototype,"spatialReference",void 0),(0,z._)([(0,V.K)("spatialReference")],w.prototype,"writeSpatialReference",null),(0,z._)([(0,ye.MZ)({json:{write:!0}})],w.prototype,"transform",void 0),w=oe=(0,z._)([(0,ne.$)("esri.rest.support.FeatureSet")],w),w.prototype.toJSON.isDefaultToJSON=!0;const U=w},68470:(st,We,_)=>{_.d(We,{K:()=>me,Q:()=>Pe});var z=_(8189),E=_(49976),Ue=_(35150),ae=_(85211),je=(_(3248),_(40707),_(15463)),H=_(76576);const Pe=(0,E.O)()({naturalLog:"natural-log",squareRoot:"square-root",percentOfTotal:"percent-of-total",log:"log",field:"field"}),ne="percent-of-total",V="field",me=ue=>{let ge=class extends ue{constructor(){super(...arguments),this.normalizationField=null,this.normalizationMaxValue=null,this.normalizationMinValue=null,this.normalizationTotal=null}get normalizationType(){let G=this._get("normalizationType");const oe=!!this.normalizationField,q=null!=this.normalizationTotal;return oe||q?(G=oe&&V||q&&ne||null,oe&&q&&Ue.A.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):G!==V&&G!==ne||(G=null),G}set normalizationType(G){this._set("normalizationType",G)}};return(0,z._)([(0,ae.MZ)({type:String,json:{name:"parameters.normalizationField",write:!0}})],ge.prototype,"normalizationField",void 0),(0,z._)([(0,ae.MZ)({type:Number,json:{name:"parameters.normalizationMaxValue",write:!0}})],ge.prototype,"normalizationMaxValue",void 0),(0,z._)([(0,ae.MZ)({type:Number,json:{name:"parameters.normalizationMinValue",write:!0}})],ge.prototype,"normalizationMinValue",void 0),(0,z._)([(0,ae.MZ)({type:Number,json:{name:"parameters.normalizationTotal",write:!0}})],ge.prototype,"normalizationTotal",void 0),(0,z._)([(0,je.e)(Pe,{name:"parameters.normalizationType"})],ge.prototype,"normalizationType",null),ge=(0,z._)([(0,H.$)("esri.rest.support.NormalizationBinParametersMixin")],ge),ge}},32117:(st,We,_)=>{_.d(We,{$w:()=>q,Bu:()=>ce,DW:()=>W,FH:()=>_t,FM:()=>H,G9:()=>ae,GV:()=>U,Go:()=>ne,K3:()=>ke,Kn:()=>C,MM:()=>ue,MO:()=>X,Nl:()=>de,Ny:()=>R,O2:()=>Le,UE:()=>Ee,YC:()=>K,YF:()=>Re,ZO:()=>Ze,_1:()=>_e,_H:()=>Z,_W:()=>w,_d:()=>P,bs:()=>J,dI:()=>L,e6:()=>V,gQ:()=>je,iA:()=>ze,jn:()=>G,lW:()=>me,mA:()=>ge,n5:()=>ve,pM:()=>te,pV:()=>Q,pk:()=>se,rB:()=>xe,s4:()=>Ue,xo:()=>re,yH:()=>B,yX:()=>Me,zb:()=>Ve,zr:()=>oe});var z=_(46988);function Ue(S,he,Ce,Se){return function E(S){return"function"==typeof S}(S)?S(he,Ce,Se):S}function ae(S){return[S.r,S.g,S.b,S.a]}const k=" /-,\n";function ye(S){let he=S.length;for(;he--;)if(!k.includes(S.charAt(he)))return!1;return!0}function je(S,he){const Ce=[];let Se=0,Te=-1;do{if(Te=S.indexOf("[",Se),Te>=Se){if(Te>Se){const Ke=S.slice(Se,Te);Ce.push([Ke,null,ye(Ke)])}if(Se=Te+1,Te=S.indexOf("]",Se),Te>=Se){if(Te>Se){const Ke=he[S.slice(Se,Te)];Ke&&Ce.push([null,Ke,!1])}Se=Te+1}}}while(-1!==Te);if(Se<S.length){const Ke=S.slice(Se);Ce.push([Ke,null,ye(Ke)])}return Ce}function H(S,he,Ce,Se){let Te="",Ke=null;for(const qe of he){const[Je,lt,tt]=qe;if(Je)tt?Ke=Je:(Ke&&(Te+=Ke,Ke=null),Te+=Je);else{let yt=lt;null!=Ce&&(yt=X(lt,Ce));const ht=S.attributes[yt];ht&&(Ke&&(Te+=Ke,Ke=null),Te+=ht)}}return function Pe(S,he){switch("string"!=typeof S&&(S=String(S)),he){case"LowerCase":return S.toLowerCase();case"Allcaps":return S.toUpperCase();default:return S}}(Te,Se)}function ne(S,he,Ce,Se,Te,Ke,qe=!0){const Je=he/Te,lt=Ce/Ke,tt=Math.ceil(Je/2),yt=Math.ceil(lt/2);for(let ht=0;ht<Ke;ht++)for(let Ot=0;Ot<Te;Ot++){const Ut=4*(Ot+(qe?Ke-ht-1:ht)*Te);let wt=0,Ht=0,Vt=0,ci=0,ti=0,Mi=0,Rt=0;const fi=(ht+.5)*lt;for(let $t=Math.floor(ht*lt);$t<(ht+1)*lt;$t++){const yi=Math.abs(fi-($t+.5))/yt,pi=(Ot+.5)*Je,Qt=yi*yi;for(let ri=Math.floor(Ot*Je);ri<(Ot+1)*Je;ri++){let ii=Math.abs(pi-(ri+.5))/tt;const Mt=Math.sqrt(Qt+ii*ii);Mt>=-1&&Mt<=1&&(wt=2*Mt*Mt*Mt-3*Mt*Mt+1,wt>0&&(ii=4*(ri+$t*he),Rt+=wt*S[ii+3],Vt+=wt,S[ii+3]<255&&(wt=wt*S[ii+3]/250),ci+=wt*S[ii],ti+=wt*S[ii+1],Mi+=wt*S[ii+2],Ht+=wt))}}Se[Ut]=ci/Ht,Se[Ut+1]=ti/Ht,Se[Ut+2]=Mi/Ht,Se[Ut+3]=Rt/Vt}}function V(S){return S?[S[0],S[1],S[2],S[3]/255]:[0,0,0,0]}function me(S){return S.data?.symbol??null}function ue(S){return"CIMVectorMarker"===S.type||"CIMPictureMarker"===S.type||"CIMBarChartMarker"===S.type||"CIMCharacterMarker"===S.type||"CIMPieChartMarker"===S.type||"CIMStackedBarChartMarker"===S.type}function ge(S){return"CIMGradientStroke"===S.type||"CIMPictureStroke"===S.type||"CIMSolidStroke"===S.type}function G(S){return null!=S&&("CIMGradientFill"===S.type||"CIMHatchFill"===S.type||"CIMPictureFill"===S.type||"CIMSolidFill"===S.type||"CIMWaterFill"===S.type)}function oe(S){return null!=S&&("CIMMarkerPlacementAlongLineRandomSize"===S.type||"CIMMarkerPlacementAlongLineSameSize"===S.type||"CIMMarkerPlacementAlongLineVariableSize"===S.type||"CIMMarkerPlacementAtExtremities"===S.type||"CIMMarkerPlacementAtMeasuredUnits"===S.type||"CIMMarkerPlacementAtRatioPositions"===S.type||"CIMMarkerPlacementOnLine"===S.type||"CIMMarkerPlacementOnVertices"===S.type)}const q=(S,he=0)=>null==S||isNaN(S)?he:S,w=(S,he)=>S??he,U=(S,he)=>S??he,R=S=>S.tintColor?V(S.tintColor):[255,255,255,1],B=S=>{if(!S)return!1;for(const he of S)switch(he.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function Z(){return Promise.all([_.e(3930),_.e(2076),_.e(4108)]).then(_.bind(_,27815))}function Q(S){if(!S)return"normal";switch(S.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function C(S){if(!S)return"normal";switch(S.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function P(S){let he="normal",Ce="normal";if(S){const Se=S.toLowerCase();Se.includes("italic")?he="italic":Se.includes("oblique")&&(he="oblique"),Se.includes("bold")?Ce="bold":Se.includes("light")&&(Ce="lighter")}return{style:he,weight:Ce}}function W(S){return S.underline?"underline":S.strikethrough?"line-through":"none"}function te(S){if(!S)return null;switch(S.type){case"CIMPolygonSymbol":if(S.symbolLayers)for(const he of S.symbolLayers){const Ce=te(he);if(null!=Ce)return Ce}break;case"CIMTextSymbol":return te(S.symbol);case"CIMSolidFill":return S.color}return null}function _e(S){if(S)switch(S.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const he=S.symbolLayers;if(he)for(const Ce of he){const Se=_e(Ce);if(null!=Se)return Se}break}case"CIMTextSymbol":return _e(S.symbol);case"CIMSolidStroke":return S.color}}function re(S){if(S)switch(S.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(S.symbolLayers)for(const he of S.symbolLayers){const Ce=re(he);if(void 0!==Ce)return Ce}break;case"CIMTextSymbol":return re(S.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return S.width}}function ce(S){switch(S){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function de(S){switch(S){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function Le(S){return(S?Object.keys(S):[]).map(he=>({name:he,alias:he,type:"string"==typeof S[he]?"esriFieldTypeString":"esriFieldTypeDouble"}))}const Ee=S=>S.includes("data:image/svg+xml");function ve(S){if(!S)return null;switch(S.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function Re(S){return S&&S.charAt(0).toLowerCase()+S.slice(1)}function Ve(S,he,Ce,Se,Te,Ke,qe=!0){const{infos:Je}=Ke;let lt=1,tt=0,yt=0,ht=0,Ot=1;for(const{absoluteAnchorPoint:Ht,offsetX:Vt,offsetY:ci,rotation:ti,size:Mi,frameHeight:Rt,rotateClockWise:fi,scaleSymbolsProportionally:$t}of Je)Ot=Ht?1:lt,yt=ee(Vt,ci,tt,Ot,yt),ht=Y(Vt,ci,tt,Ot,ht),Rt&&($t||qe)&&(lt*=Mi/Rt),tt=fe(ti,fi,tt);const Ut=ee(Se,Te,tt,Ot,yt),wt=Y(Se,Te,tt,Ot,ht);return{size:S*lt,rotation:fe(he,Ce,tt),offsetX:Ut,offsetY:wt}}function Ze(S){if(null==S)return!1;if(Array.isArray(S))return S.every(he=>Ze(he));switch(typeof S){case"string":return!!S;case"number":return!isNaN(S)}}function ze(S,he){if("color"===he||"outlinecolor"===he||"backgroundcolor"===he||"borderlinecolor"===he||"tintcolor"===he)return[...z.K[he]];const Ce=z.D[S];if(!Ce)throw new Error(`InternalError: default value for type ${S}.`);return Ce[he]}function ke(S){return"string"==typeof S?function Xe(S){return S.split(" ").map(he=>Number(he))}(S):S}function _t(S){return S?.dashTemplate&&(S.dashTemplate=ke(S.dashTemplate)),S}function J(S){if(null==S)return"Normal";switch(S.type){case"CIMTextSymbol":return S.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const he=S.symbolLayers;if(!he)return"Normal";for(const Ce of he)if("CIMVectorMarker"===Ce.type)return J(Ce)}break;case"CIMVectorMarker":{const he=S.markerGraphics;if(!he)return"Normal";for(const Ce of he)if(Ce.symbol)return J(Ce.symbol)}}return"Normal"}function K(S){if(S)switch(S.type){case"CIMTextSymbol":return S.height;case"CIMPointSymbol":{let he=0;if(S.symbolLayers)for(const Ce of S.symbolLayers)if(Ce)switch(Ce.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const Se=Ce.size??z.D.CIMVectorMarker.size;Se>he&&(he=Se);break}}return he}case"CIMLineSymbol":case"CIMPolygonSymbol":{let he=0;if(S.symbolLayers)for(const Ce of S.symbolLayers)if(Ce)switch(Ce.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const Se=Ce.width;null!=Se&&Se>he&&(he=Se);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(Ce.markerPlacement&&oe(Ce.markerPlacement)){const Se=Ce.size??z.D.CIMVectorMarker.size;Se>he&&(he=Se)}break;case"CIMPictureFill":{const Se=Ce.height;null!=Se&&Se>he&&(he=Se)}}return he}}}function X(S,he){if(null!==he){const Ce=he.get(S);return Ce?Ce.name:S}return S}function se(S){return S.map(he=>({...he,propertyName:Re(he.propertyName)}))}function xe(S){const he={};for(const Ce in S){const Se=S[Ce];he[Re(Ce)]=Se}return he}function Y(S,he,Ce,Se,Te){const Ke=Ce*Math.PI/180;if(Ke){const qe=Math.cos(Ke);return(Math.sin(Ke)*S+qe*he)*Se+Te}return he*Se+Te}function ee(S,he,Ce,Se,Te){const Ke=Ce*Math.PI/180;return Ke?(Math.cos(Ke)*S-Math.sin(Ke)*he)*Se+Te:S*Se+Te}function fe(S,he,Ce){return he?Ce-S:Ce+S}function L(S,he,Ce){const Se="Color"===Ce||"TintColor"===Ce||"ToColor"===Ce,Te="Rotation"===Ce||"Angle"===Ce||"ToRotation"===Ce;let Ke=he[Re(Ce)];if(null!=Ke&&(Se?Ke=[Ke[0]/255,Ke[1]/255,Ke[2]/255,Ke[3]/255]:Te&&(Ke*=Math.PI/180)),null==Ke&&(Ke=ze(he.type,Ce.toLowerCase()),null!=Ke&&(Se?Ke=[Ke[0]/255,Ke[1]/255,Ke[2]/255,Ke[3]]:Te&&(Ke*=Math.PI/180))),null!=he.primitiveName){const qe=S[he.primitiveName];if(null!=qe){const Je=qe[Ce];null==Je||("string"==typeof Je||"number"==typeof Je||Array.isArray(Je)?(Ke=Je,null!=Ke&&(Se?Ke=[Ke[0]/255,Ke[1]/255,Ke[2]/255,Ke[3]/255]:Te&&(Ke*=Math.PI/180))):(Ke={valueExpressionInfo:Je,defaultValue:Ke},null!=Ke&&(Se?Ke={type:"Process",op:"ArcadeColor",value:Ke}:Te&&(Ke={type:"Process",op:"Divide",left:Ke,right:180/Math.PI}))))}}if(null==Ke)throw new Error(`Failed to derive a value or an expression for "${Ce}".`);return Ke}function Me(S,he){return Math.max(Math.min((S??he)/100,1),0)}},76926:(st,We,_)=>{_.d(We,{Fe:()=>ue,Km:()=>ye,Nk:()=>ne});var z=_(68677),E=_(32117);function ye(w,U,R,B){if(w)if("CIMTextSymbol"!==w.type){if(R&&w.effects)for(const Z of w.effects)Pe(Z,U);if(w.symbolLayers)for(const Z of w.symbolLayers){switch(Z.type){case"CIMPictureMarker":case"CIMVectorMarker":je(Z,U,B);break;case"CIMPictureStroke":case"CIMSolidStroke":case"CIMGradientStroke":!B?.preserveOutlineWidth&&Z.width&&(Z.width*=U);break;case"CIMPictureFill":Z.height&&(Z.height*=U),Z.offsetX&&(Z.offsetX*=U),Z.offsetY&&(Z.offsetY*=U);break;case"CIMHatchFill":ye(Z.lineSymbol,U,!0,{...B,preserveOutlineWidth:!1}),Z.offsetX&&(Z.offsetX*=U),Z.offsetY&&(Z.offsetY*=U),Z.separation&&(Z.separation*=U)}if(Z.effects)for(const Q of Z.effects)Pe(Q,U)}}else null!=w.height&&(w.height*=U)}function je(w,U,R){if(w&&(w.markerPlacement&&function H(w,U){switch((0,E.zr)(w)&&w.offset&&(w.offset*=U),w.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(w.customEndingOffset&&(w.customEndingOffset*=U),w.offsetAlongLine&&(w.offsetAlongLine*=U),w.placementTemplate&&w.placementTemplate.length){const R=w.placementTemplate.map(B=>B*U);w.placementTemplate=R}break;case"CIMMarkerPlacementAlongLineVariableSize":if(w.maxRandomOffset&&(w.maxRandomOffset*=U),w.placementTemplate&&w.placementTemplate.length){const R=w.placementTemplate.map(B=>B*U);w.placementTemplate=R}break;case"CIMMarkerPlacementOnLine":w.startPointOffset&&(w.startPointOffset*=U);break;case"CIMMarkerPlacementAtExtremities":w.offsetAlongLine&&(w.offsetAlongLine*=U);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":w.beginPosition&&(w.beginPosition*=U),w.endPosition&&(w.endPosition*=U);break;case"CIMMarkerPlacementPolygonCenter":w.offsetX&&(w.offsetX*=U),w.offsetY&&(w.offsetY*=U);break;case"CIMMarkerPlacementInsidePolygon":w.offsetX&&(w.offsetX*=U),w.offsetY&&(w.offsetY*=U),w.stepX&&(w.stepX*=U),w.stepY&&(w.stepY*=U)}}(w.markerPlacement,U),w.offsetX&&(w.offsetX*=U),w.offsetY&&(w.offsetY*=U),w.anchorPoint&&"Absolute"===w.anchorPointUnits&&(w.anchorPoint={x:w.anchorPoint.x*U,y:w.anchorPoint.y*U}),w.size=null!=w.size?w.size*U:0,"CIMVectorMarker"===w.type&&w.markerGraphics))for(const B of w.markerGraphics)w.scaleSymbolsProportionally||ye(B.symbol,U,!0,R)}function Pe(w,U){switch(w.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":w.width&&(w.width*=U);break;case"CIMGeometricEffectBuffer":w.size&&(w.size*=U);break;case"CIMGeometricEffectCut":w.beginCut&&(w.beginCut*=U),w.endCut&&(w.endCut*=U),w.middleCut&&(w.middleCut*=U);break;case"CIMGeometricEffectDashes":if(w.customEndingOffset&&(w.customEndingOffset*=U),w.offsetAlongLine&&(w.offsetAlongLine*=U),w.dashTemplate&&w.dashTemplate.length){const R=w.dashTemplate.map(B=>B*U);w.dashTemplate=R}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":w.length&&(w.length*=U);break;case"CIMGeometricEffectMove":w.offsetX&&(w.offsetX*=U),w.offsetY&&(w.offsetY*=U);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":w.offset&&(w.offset*=U);break;case"CIMGeometricEffectRegularPolygon":w.radius&&(w.radius*=U);break;case"CIMGeometricEffectTaperedPolygon":w.fromWidth&&(w.fromWidth*=U),w.length&&(w.length*=U),w.toWidth&&(w.toWidth*=U);break;case"CIMGeometricEffectWave":w.amplitude&&(w.amplitude*=U),w.period&&(w.period*=U)}}function ne(w){const U=[];return V((0,E.lW)(w),U),U.length?new z.A((0,E.e6)(U[0])):null}function V(w,U){if(!w)return;let R;R="CIMTextSymbol"===w.type?w.symbol:w;const B="CIMPolygonSymbol"===w.type;if(R?.symbolLayers)for(const Z of R.symbolLayers)if(!(Z.colorLocked||B&&((0,E.mA)(Z)||(0,E.MM)(Z)&&Z.markerPlacement&&(0,E.zr)(Z.markerPlacement))))switch(Z.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":Z.tintColor&&me(U,Z.tintColor);break;case"CIMVectorMarker":Z.markerGraphics?.forEach(Q=>{V(Q.symbol,U)});break;case"CIMSolidStroke":case"CIMSolidFill":me(U,Z.color);break;case"CIMHatchFill":V(Z.lineSymbol,U)}}function me(w,U){for(const R of w)if(R.join(".")===U.join("."))return;w.push(U)}function ue(w,U,R){U instanceof z.A||(U=new z.A(U));const B=(0,E.lW)(w);B&&ge(B,U,R)}function ge(w,U,R){if(!w)return;let B;B="CIMTextSymbol"===w.type?w.symbol:w;const Z="CIMPolygonSymbol"===B?.type;if(B?.symbolLayers)for(const Q of B.symbolLayers){if(Q.colorLocked)continue;if(Z)if(R){const{layersToColor:P}=R;if(((0,E.mA)(Q)||(0,E.MM)(Q)&&Q.markerPlacement&&(0,E.zr)(Q.markerPlacement))&&"fill"===P||(0,E.jn)(Q)&&"outline"===P)continue}else if((0,E.mA)(Q)||(0,E.MM)(Q)&&Q.markerPlacement&&(0,E.zr)(Q.markerPlacement))continue;const C=U.toArray();switch(Q.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":Q.tintColor=C;break;case"CIMVectorMarker":Q.markerGraphics?.forEach(P=>{ge(P.symbol,U,R)});break;case"CIMSolidStroke":case"CIMSolidFill":Q.color=C;break;case"CIMHatchFill":ge(Q.lineSymbol,U,R)}}}},91644:(st,We,_)=>{_.d(We,{A7:()=>H,Cx:()=>Pe,Hk:()=>ne,JJ:()=>ge,SF:()=>V,UK:()=>je,jM:()=>me,x3:()=>ue}),_(3248);var E=_(88521),Ue=_(55417),ae=_(46602),k=_(47705),ye=_(48254);const je=ae.A.fromJSON(ye.Cb),H=Ue.A.fromJSON(ye.yM),Pe=E.A.fromJSON(ye.WR),ne=k.A.fromJSON(ye.JZ);function V(G){if(null==G)return null;switch(G.type){case"mesh":return null;case"point":case"multipoint":return je;case"polyline":return H;case"polygon":case"extent":return Pe}return null}const me=ae.A.fromJSON(ye.nC),ue=Ue.A.fromJSON(ye.HW),ge=E.A.fromJSON(ye.b6)},48254:(st,We,_)=>{_.d(We,{Cb:()=>Ue,HW:()=>H,JR:()=>E,JZ:()=>ye,WR:()=>k,b6:()=>Pe,fT:()=>z,nC:()=>je,yM:()=>ae});const z=[252,146,31,255],E=[153,153,153,255],Ue={type:"esriSMS",style:"esriSMSCircle",size:6,color:z,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},ae={type:"esriSLS",style:"esriSLSSolid",width:.75,color:z},k={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},ye={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},je={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},H={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},Pe={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},8134:(st,We,_)=>{_.d(We,{$4:()=>q,O0:()=>w,O1:()=>U,Sw:()=>R,eH:()=>G,rc:()=>oe});var z=_(90261),E=_(68677),Ue=_(89563),ae=_(33087),k=_(67685),ye=_(76926);const je="picture-fill",H="simple-fill",Pe="simple-line",ne="simple-marker",V="text",me="cim",ue=new Map([["dash",[4,3]],["dashdot",[4,3,1,3]],["dot",[1,3]],["longdash",[8,3]],["longdashdot",[8,3,1,3]],["longdashdotdot",[8,3,1,3,1,3]],["shortdash",[4,1]],["shortdashdot",[4,1,1,1]],["shortdashdotdot",[4,1,1,1,1,1]],["shortdot",[1,1]],["solid",[]]]),ge=new ae.q(1e3);function G(B){const Z=B.style;let Q=null;if(B)switch(B.type){case ne:"cross"!==Z&&"x"!==Z&&(Q=B.color);break;case H:Z&&"solid"!==Z?"none"!==Z&&(Q={type:"pattern",x:0,y:0,src:(0,z.s)(`esri/symbols/patterns/${Z}.png`),width:5,height:5}):Q=B.color;break;case je:Q={type:"pattern",src:B.url,width:(0,k.Lz)(B.width)*B.xscale,height:(0,k.Lz)(B.height)*B.yscale,x:(0,k.Lz)(B.xoffset),y:(0,k.Lz)(B.yoffset)};break;case V:Q=B.color;break;case me:Q=(0,ye.Nk)(B)}return Q}function oe(B,Z){const Q=B+"-"+Z;return void 0!==ge.get(Q)?Promise.resolve(ge.get(Q)):(0,Ue.A)(B,{responseType:"image"}).then(C=>{const P=C.data,W=P.naturalWidth,te=P.naturalHeight,_e=document.createElement("canvas");_e.width=W,_e.height=te;const re=_e.getContext("2d");re.fillStyle=Z,re.fillRect(0,0,W,te),re.globalCompositeOperation="destination-in",re.drawImage(P,0,0);const ce=_e.toDataURL();return ge.put(Q,ce),ce})}function q(B){if(!B)return null;let Z=null;switch(B.type){case H:case je:case ne:Z=q(B.outline);break;case Pe:{const Q=(0,k.Lz)(B.width);null!=B.style&&"none"!==B.style&&0!==Q&&(Z={color:B.color,style:U(B.style),width:Q,cap:B.cap,join:"miter"===B.join?(0,k.Lz)(B.miterLimit):B.join},Z.dashArray=w(Z).join(",")||"none");break}default:Z=null}return Z}function w(B){if(!B?.style)return[];const{dashArray:Z,style:Q,width:C}=B;if("string"==typeof Z&&"none"!==Z)return Z.split(",").map(te=>Number(te));const P=C??0,W=ue.has(Q)?ue.get(Q).map(te=>te*P):[];if("butt"!==B.cap)for(const[te,_e]of W.entries())W[te]=te%2==1?_e+P:Math.max(_e-P,1);return W}const U=(()=>{const B={};return Z=>{if(B[Z])return B[Z];const Q=Z.replaceAll("-","");return B[Z]=Q,Q}})(),R=new E.A([128,128,128])},20175:(st,We,_)=>{_.r(We),_.d(We,{getPatternDescriptor:()=>W,getSizeFromOptions:()=>ve,getSymbolLayerFill:()=>P,previewSymbol3D:()=>_t});var z=_(10467),E=_(90261),Ue=_(29430),k=(_(3248),_(5922)),ye=_(35150),je=_(67685),H=_(8134),Pe=_(28831),ne=_(15225),V=_(44460),me=_(16633),ue=_(83393),ge=_(58964);const G=V.CB.size,oe=V.CB.maxSize,q=V.CB.maxOutlineSize,w=V.CB.lineWidth,U=V.CB.tallSymbolWidth;function R(J){const K=J.outline,X=null!=J.material?J.material.color:null,se=null!=X?X.toHex():null;if(null==K||"pattern"in K&&null!=K.pattern&&"style"===K.pattern.type&&"none"===K.pattern.style)return"fill"===J.type&&"#ffffff"===se?{color:"#bdc3c7",width:.75}:null;const xe=(0,je.Lz)(K.size)||0;return{color:"rgba("+(null!=K.color?K.color.toRgba():"255,255,255,1")+")",width:Math.min(xe,q),style:"pattern"in K&&null!=K.pattern&&"style"===K.pattern.type?(0,H.O1)(K.pattern.style):null,join:"butt",cap:"patternCap"in K?K.patternCap:"butt"}}function Z(){return(Z=(0,z.A)(function*(J,K){if(J.thumbnail?.url)return J.thumbnail.url;if("icon"===K.type&&K?.resource?.href)return(0,ue.N7)(K);const X=(0,E.s)("esri/images/Legend/legend3dsymboldefault.png");if(J.styleOrigin&&(J.styleOrigin.styleName||J.styleOrigin.styleUrl)){const se=yield(0,ge.resolveWebStyleSymbol)(J.styleOrigin,{portal:J.styleOrigin.portal}).catch(()=>null);if(se&&"thumbnail"in se&&se.thumbnail?.url)return se.thumbnail.url}return X})).apply(this,arguments)}function Q(J,K=1){const X=J.a,se=(0,Ue.N2)(J),xe=se.h,Y=se.s/K,ee=100-(100-se.v)/K,{r:fe,g:L,b:Me}=(0,Ue.$)({h:xe,s:Y,v:ee});return[fe,L,Me,X]}function C(J){return"water"===J.type?null==J.color?null:J.color:null==J.material?.color?null:J.material.color}function P(J,K=0){const X=C(J);if(!X){if("fill"===J.type)return null;const Y=(0,V.dr)(H.Sw.r,K);return[Y,Y,Y,100]}const se=X.toRgba();for(let xe=0;xe<3;xe++)se[xe]=(0,V.dr)(se[xe],K);return se}function W(J,K){return te.apply(this,arguments)}function te(){return(te=(0,z.A)(function*(J,K){const X=J.style;return"none"===X?null:{type:"pattern",x:0,y:0,src:yield(0,H.rc)((0,E.s)(`esri/symbols/patterns/${X}.png`),K.toCss(!0)),width:5,height:5}})).apply(this,arguments)}function _e(J){return J.outline?R(J):{color:"rgba(0, 0, 0, 1)",width:1.5}}function re(J,K){const X=C(J);if(!X)return null;let se="rgba(";return se+=(0,V.dr)(X.r,K)+",",se+=(0,V.dr)(X.g,K)+",",se+=(0,V.dr)(X.b,K)+",",se+X.a+");"}function ce(J,K){const X=re(J,K);return X?"pattern"in J&&null!=J.pattern&&"style"===J.pattern.type&&"none"===J.pattern.style?null:{color:X,width:Math.min(J.size?(0,je.Lz)(J.size):.75,q),style:"pattern"in J&&null!=J.pattern&&"style"===J.pattern.type?(0,H.O1)(J.pattern.style):null,cap:"cap"in J?J.cap:null,join:"join"in J?"miter"===J.join?(0,je.Lz)(2):J.join:null}:{}}function de(J,K,X){const se=null!=X?.75*X:0;return{type:"linear",x1:se?.25*se:0,y1:se?.5*se:0,x2:se||4,y2:se?.5*se:4,colors:[{color:J,offset:0},{color:K,offset:1}]}}function ve(J){const K="number"==typeof J?.size?J?.size:null;return K?(0,je.Lz)(K):null}function Ze(){return Ze=(0,z.A)(function*(J,K){const X=ve(K),se=K?.maxSize?(0,je.Lz)(K.maxSize):null,xe=K?.disableUpsampling??!1,ee=[],fe=[];let L=!1,Me=0,S=0,he=0;J.symbolLayers.forEach(Te=>{if("icon"!==Te.type&&"object"!==Te.type)return;Te&&"icon"===Te.type&&(he=Math.max(Te.size&&(0,je.Lz)(Te.size),he));const Ke="icon"===Te.type?Te.size&&(0,je.Lz)(Te.size):0,qe=X||Ke?Math.ceil(Math.min(X||Ke,se||oe)):G;let Je="icon"===Te.type?Te.angle:null;if(null!=K?.rotation&&(Je=(Je??0)+K.rotation),fe.push(Je),Te?.resource?.href){const lt=function B(J,K){return Z.apply(this,arguments)}(J,Te).then(tt=>{const yt=Te?.material?.color,ht=function Re(J){return"icon"===J.type?"multiply":"tint"}(Te);return(0,me.UB)(tt,qe,yt,ht,xe)}).then(tt=>{const yt=tt.width,ht=tt.height;return Me=Math.max(Me,yt),S=Math.max(S,ht),Je&&(L=!0),[{shape:{type:"image",x:0,y:0,width:yt,height:ht,src:tt.url},fill:null,stroke:null}]});ee.push(lt)}else{let lt=qe;"icon"===Te.type&&X&&(lt=qe*(Ke/he));const tt="tall"===K?.symbolConfig||K?.symbolConfig?.isTall||"object"===Te.type&&function Le(J){const K=J.depth,X=J.height,se=J.width;return 0!==se&&0!==K&&0!==X&&se===K&&null!=se&&null!=X&&se<X}(Te);Me=Math.max(Me,tt?U:lt),S=Math.max(S,lt),Je&&Te.resource?.primitive&&["square","triangle","x"].includes(Te.resource?.primitive)&&(L=!0),ee.push(Promise.resolve(function Ee(J,K,X){const se=[];if(!J)return se;switch(J.type){case"icon":{const ee=K,fe=K;switch(J.resource?.primitive??Pe.r){case"circle":se.push({shape:{type:"circle",cx:0,cy:0,r:.5*K},fill:P(J,0),stroke:R(J)});break;case"square":se.push({shape:{type:"path",path:[{command:"M",values:[0,fe]},{command:"L",values:[0,0]},{command:"L",values:[ee,0]},{command:"L",values:[ee,fe]},{command:"Z",values:[]}]},fill:P(J,0),stroke:R(J)});break;case"triangle":se.push({shape:{type:"path",path:[{command:"M",values:[0,fe]},{command:"L",values:[.5*ee,0]},{command:"L",values:[ee,fe]},{command:"Z",values:[]}]},fill:P(J,0),stroke:R(J)});break;case"cross":se.push({shape:{type:"path",path:[{command:"M",values:[.5*ee,0]},{command:"L",values:[.5*ee,fe]},{command:"M",values:[0,.5*fe]},{command:"L",values:[ee,.5*fe]}]},stroke:_e(J)});break;case"x":se.push({shape:{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[ee,fe]},{command:"M",values:[ee,0]},{command:"L",values:[0,fe]}]},stroke:_e(J)});break;case"kite":se.push({shape:{type:"path",path:[{command:"M",values:[0,.5*fe]},{command:"L",values:[.5*ee,0]},{command:"L",values:[ee,.5*fe]},{command:"L",values:[.5*ee,fe]},{command:"Z",values:[]}]},fill:P(J,0),stroke:R(J)})}break}case"object":switch(J.resource?.primitive??ne.r){case"cone":{const xe=de(P(J,0),P(J,-.6),X?U:K),Y=(0,V.mN)(K,X);se.push({shape:Y[0],fill:xe},{shape:Y[1],fill:xe});break}case"inverted-cone":{const xe=P(J,0),Y=de(xe,P(J,-.6),K),ee=(0,V.Pc)(K);se.push({shape:ee[0],fill:Y},{shape:ee[1],fill:xe});break}case"cube":{const xe=(0,V.cZ)(K,X);se.push({shape:xe[0],fill:P(J,0)},{shape:xe[1],fill:P(J,-.3)},{shape:xe[2],fill:P(J,-.5)});break}case"cylinder":{const xe=de(P(J,0),P(J,-.6),X?U:K),Y=(0,V.dt)(K,X);se.push({shape:Y[0],fill:xe},{shape:Y[1],fill:xe},{shape:Y[2],fill:P(J,0)});break}case"diamond":{const xe=(0,V.D)(K);se.push({shape:xe[0],fill:P(J,-.3)},{shape:xe[1],fill:P(J,0)},{shape:xe[2],fill:P(J,-.3)},{shape:xe[3],fill:P(J,-.7)});break}case"sphere":{const xe=de(P(J,0),P(J,-.6));xe.x1=0,xe.y1=0,xe.x2=.25*K,xe.y2=.25*K,se.push({shape:{type:"circle",cx:0,cy:0,r:.5*K},fill:xe});break}case"tetrahedron":{const xe=(0,V.Nz)(K);se.push({shape:xe[0],fill:P(J,-.3)},{shape:xe[1],fill:P(J,0)},{shape:xe[2],fill:P(J,-.6)});break}}}return se}(Te,lt,tt)))}});const Ce=yield Promise.allSettled(ee),Se=[];return Ce.forEach(Te=>{"fulfilled"===Te.status?Se.push(Te.value):Te.reason&&ye.A.getLogger("esri.symbols.support.previewSymbol3D").warn("error while building swatchInfo!",Te.reason)}),(0,me.fz)(Se,[Me,S],{node:K?.node,scale:!1,opacity:K?.opacity,ariaLabel:K?.ariaLabel,rotations:fe,useRotationSize:L})}),Ze.apply(this,arguments)}function ke(){return(ke=(0,z.A)(function*(J,K){const X="mesh-3d"===J.type,se=J.symbolLayers,xe=ve(K),Y=K?.maxSize?(0,je.Lz)(K.maxSize):null,ee=xe||G,fe=[];let L=0,Me=0,S=!1;for(let he=0;he<se.length;he++){const Ce=se.at(he),Se=[];if(!X||"fill"===Ce.type){switch(Ce.type){case"fill":{const Te=Math.min(ee,Y||oe);if(L=Math.max(L,Te),Me=Math.max(Me,Te),S=!0,X){const Ke=V.nq.meshSymbol3DFill,qe=re(Ce,-.4),Je=qe?{color:qe,width:1,join:"round"}:{};Se.push({shape:Ke[0],fill:P(Ce,0),stroke:Je},{shape:Ke[1],fill:P(Ce,-.2),stroke:Je},{shape:Ke[2],fill:P(Ce,-.6),stroke:Je})}else{let Ke=P(Ce,0);const qe="pattern"in Ce?Ce.pattern:null,Je=R(Ce),lt=C(Ce);null!=qe&&"style"===qe.type&&"solid"!==qe.style&&lt&&(Ke=yield W(qe,lt)),Se.push({shape:V.nq.fill[0],fill:Ke,stroke:Je})}break}case"line":{const Te=ce(Ce,0);if(null==Te)break;const Ke={stroke:Te,shape:V.nq.fill[0]};L=Math.max(L,G),Me=Math.max(Me,G),Se.push(Ke);break}case"extrude":{const Te={join:"round",width:1,...ce(Ce,-.4)},Ke=P(Ce,0),qe=P(Ce,-.2),Je=Math.min(ee,Y||oe),lt=(0,V.sU)(Je);Te.width=1,Se.push({shape:lt[0],fill:qe,stroke:Te},{shape:lt[1],fill:qe,stroke:Te},{shape:lt[2],fill:Ke,stroke:Te});const yt=.7*G+.5*Je;L=Math.max(L,G),Me=Math.max(Me,yt);break}case"water":{const Te=C(Ce),Ke=Q(Te),qe=Q(Te,2),Je=Q(Te,3),lt=(0,V.cP)();S=!0,Se.push({shape:lt[0],fill:Ke},{shape:lt[1],fill:qe},{shape:lt[2],fill:Je});const tt=Math.min(ee,Y||oe);L=Math.max(L,tt),Me=Math.max(Me,tt);break}}fe.push(Se)}}return(0,me.fz)(fe,[L,Me],{node:K?.node,scale:S,opacity:K?.opacity,ariaLabel:K?.ariaLabel})})).apply(this,arguments)}function _t(J,K){if(0===J.symbolLayers.length)return Promise.reject(new k.A("symbolPreview: renderPreviewHTML3D","No symbolLayers in the symbol."));switch(J.type){case"point-3d":return function Ve(J,K){return Ze.apply(this,arguments)}(J,K);case"line-3d":return function ze(J,K){const X=J.symbolLayers,se=[],xe=(0,ue.$d)(J),Y=ve(K),ee=(K?.maxSize?(0,je.Lz)(K.maxSize):null)||q;let fe,L=0,Me=0;return X.forEach((S,he)=>{if(!S||"line"!==S.type&&"path"!==S.type)return;const Ce=[];switch(S.type){case"line":{const Se=ce(S,0);if(null==Se)break;const Te=Se?.width||0;0===he&&(fe=Te);const Ke=Math.min(Y||Te,ee),qe=0===he?Ke:Y?Ke*(Te/fe):Ke,Je=qe>w/2?2*qe:w;Me=Math.max(Me,qe),L=Math.max(L,Je),Se.width=qe,Ce.push({shape:{type:"path",path:[{command:"M",values:[0,.5*Me]},{command:"L",values:[L,.5*Me]}]},stroke:Se});break}case"path":{const Se=Math.min(Y||G,ee),Te=P(S,0),Ke=P(S,-.2),qe=re(S,-.4),Je=qe?{color:qe,width:1}:{};if("quad"===S.profile){const lt=S.width,tt=S.height,yt=(0,V.KX)(lt&&tt?lt/tt:1,0===tt,0===lt),ht={...Je,join:"bevel"};Ce.push({shape:yt[0],fill:Ke,stroke:ht},{shape:yt[1],fill:Ke,stroke:ht},{shape:yt[2],fill:Te,stroke:ht})}else Ce.push({shape:V.nq.pathSymbol3DLayer[0],fill:Ke,stroke:Je},{shape:V.nq.pathSymbol3DLayer[1],fill:Te,stroke:Je});Me=Math.max(Me,Se),L=Me}}se.push(Ce)}),Promise.resolve((0,me.fz)(se,[L,Me],{node:K?.node,scale:xe,opacity:K?.opacity,ariaLabel:K?.ariaLabel}))}(J,K);case"polygon-3d":case"mesh-3d":return function Xe(J,K){return ke.apply(this,arguments)}(J,K)}return Promise.reject(new k.A("symbolPreview: swatchInfo3D","symbol not supported."))}},44460:(st,We,_)=>{_.d(We,{CB:()=>E,D:()=>V,KX:()=>ae,Nz:()=>me,Pc:()=>ne,QC:()=>ge,cP:()=>ye,cZ:()=>je,dr:()=>ue,dt:()=>H,mN:()=>Pe,nq:()=>Ue,sU:()=>k});var E,G,z=_(68677);(G=E||(E={}))[G.size=22]="size",G[G.lineWidth=50]="lineWidth",G[G.maxSize=120]="maxSize",G[G.maxOutlineSize=80]="maxOutlineSize",G[G.tallSymbolWidth=20]="tallSymbolWidth";const Ue={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],squareFill:[{type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 Z"}],meshSymbol3DFill:[{type:"path",path:"M -10,-8 L 6,0 L 6,6 L -10,6 L -10,-8 Z"},{type:"path",path:"M -10,-8 L -7,-10 L 9,-2 L 6,0 L -10,-8 Z"},{type:"path",path:"M 6,0 L 9,-2 L 9,4 L 6,6 L 6,0 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}],extrudeSymbol3DLayer:[{type:"path",path:"M -7,-5 L -2,0 L -2,7 L -7,3 L -7,-5 Z"},{type:"path",path:"M -2,0 L -2,7 L 10,-3 L 10,-10 L -2,0 Z"},{type:"path",path:"M -7,-5 L -2,0 L 10,-10 L -2,-10 L -7,-5 Z"}],cone:[{type:"path",path:"M 0,-10 L -8,5 L -4,6.5 L 0,7 L 4,6.5 L 8,5 Z"}],tallCone:[{type:"path",path:"M 0,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 0,-9 Z"}],invertedCone:[{type:"path",path:"M 0,7 L -8,-8 L 8,-8 Z"},{type:"path",path:"M -8,-8 L -4,-9.5 L 0,-10 L 4,-9.5 L 8,-8 L 4,-6.5 L 0,-6 L -4,-6.5 Z"}],cube:[{type:"path",path:"M -10,-7 L 0,-12 L 10,-7 L 0,-2 L -10,-7 Z"},{type:"path",path:"M -10,-7 L 0,-2 L 0,12 L -10,7 L -10,-7 Z"},{type:"path",path:"M 0,-2 L 10,-7 L 10,7 L 0,12 L 0,-2 Z"}],tallCube:[{type:"path",path:"M -3.5,-8.5 L 0,-9.5 L 3.5,-8.5 L 0,-7.5 L -3.5,-8.5 Z"},{type:"path",path:"M -3.5,-8.5 L 0,-7.5 L 0,9 L -3.5,8 L -3.5,-8.5 Z"},{type:"path",path:"M 0,-7.5 L 3.5,-8.5 L 3.5,8 L 0,9 L 0,-7.5 Z"}],cylinder:[{type:"path",path:"M -8,-9 L -8,7 L -4,8.5 L 0,9 L 4,8.5 L 8,7 L 8,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:8,ry:2}],tallCylinder:[{type:"path",path:"M -3.5,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 3.5,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:3.5,ry:1}],diamond:[{type:"path",path:"M 0,-10 L 10,-1 L -1,1 L 0,-10 Z"},{type:"path",path:"M 0,-10 L -1,1 L -8,-1 L 0,-10 Z"},{type:"path",path:"M -1,1 L 0,10 L -8,-1 L -1,1 Z"},{type:"path",path:"M -1,0 L 0,10 L 10,-1 L -1,1 Z"}],tetrahedron:[{type:"path",path:"M 0,-10 L 10,7 L 0,0 L 0,-10 Z"},{type:"path",path:"M 0,-10 L 0,0 L -8,7 L 0,-10 Z"},{type:"path",path:"M 10,7 L 0,0 L -8,7 L 10,7 Z"}]};function ae(G,oe,q){const w=E.size;let U=w,R=w;G<1?U*=.75:G>1&&(R*=1.25);let Q=w,C=w;return oe&&q&&(U=R=Q=C=0),[{type:"path",path:[{command:"M",values:[Q,0]},{command:"L",values:[q?Q:.875*Q,0]},{command:"L",values:[q?U-.5*Q:0,R-.5*C]},{command:"L",values:[U-.5*Q,R-.5*C]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[Q,0]},{command:"L",values:[Q,oe?0:.125*C]},{command:"L",values:[U-.5*Q,oe?R-.5*C:C]},{command:"L",values:[U-.5*Q,R-.5*C]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[U-.5*Q,R-.5*C]},{command:"L",values:[q?U-.5*Q:0,R-.5*C]},{command:"L",values:[q?U-.5*Q:0,oe?R-.5*C:C]},{command:"L",values:[U-.5*Q,oe?R-.5*C:C]},{command:"Z",values:[]}]}]}function k(G){const oe=E.size,q=.5*G;return[{type:"path",path:[{command:"M",values:[0,.7*oe*.5]},{command:"L",values:[.3*oe,.7*oe]},{command:"L",values:[.3*oe,.7*oe+q]},{command:"L",values:[0,.7*oe+q-.7*oe*.5]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*oe,.7*oe]},{command:"L",values:[.3*oe,.7*oe+q]},{command:"L",values:[oe,q]},{command:"L",values:[oe,0]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*oe,0]},{command:"L",values:[oe,0]},{command:"L",values:[.3*oe,.7*oe]},{command:"L",values:[0,.7*oe*.5]},{command:"Z",values:[]}]}]}function ye(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]}function je(G,oe){let q=oe?E.tallSymbolWidth:G;const U=oe?4:6;q-=q<=E.size?.5*U:U;const Z=oe?.35*q:.5*q;return[{type:"path",path:[{command:"M",values:[.5*q,0]},{command:"L",values:[q,.5*Z]},{command:"L",values:[.5*q,Z]},{command:"L",values:[0,.5*Z]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*Z]},{command:"L",values:[.5*q,Z]},{command:"L",values:[.5*q,G]},{command:"L",values:[0,G-.5*Z]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*q,Z]},{command:"L",values:[.5*q,G]},{command:"L",values:[q,G-.5*Z]},{command:"L",values:[q,.5*Z]},{command:"Z",values:[]}]}]}function H(G,oe){let q=oe?E.tallSymbolWidth:G;const U=oe?4:6;q-=q<=E.size?.5*U:U;const R=.5*q,B=.15*q,Q=G-B;return[{type:"ellipse",cx:.5*q,cy:Q,rx:R,ry:B},{type:"path",path:[{command:"M",values:[0,B]},{command:"L",values:[0,Q]},{command:"L",values:[q,Q]},{command:"L",values:[q,B]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*q,cy:B,rx:R,ry:B}]}function Pe(G,oe){let q=oe?E.tallSymbolWidth:G;const U=oe?4:6;q-=q<=E.size?.5*U:U;const R=.15*q,B=G-R;return[{type:"ellipse",cx:.5*q,cy:B,rx:.5*q,ry:R},{type:"path",path:[{command:"M",values:[.5*q,0]},{command:"L",values:[q,B]},{command:"L",values:[0,B]},{command:"Z",values:[]}]}]}function ne(G){let oe=G;oe-=oe<E.size?3:6;const U=.15*oe;return[{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[oe,0]},{command:"L",values:[.5*oe,G-U]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*oe,cy:0,rx:.5*oe,ry:U}]}function V(G){let oe=G;const q=G;oe-=oe<E.size?2:4;const B=oe,Z=q,Q=Math.floor(G/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*B,0]},{command:"L",values:[B,.5*Z-Q]},{command:"L",values:[.45*B-Q,.5*Z+Q]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*B,0]},{command:"L",values:[.45*B-Q,.5*Z+Q]},{command:"L",values:[0,.5*Z-Q]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*Z-Q]},{command:"L",values:[.45*B-Q,.5*Z+Q]},{command:"L",values:[.45*B,q]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*B,q]},{command:"L",values:[B,.5*Z-Q]},{command:"L",values:[.45*B-Q,.5*Z+Q]},{command:"Z",values:[]}]}]}function me(G){let w=G;return w-=w<E.size?1:2,[{type:"path",path:[{command:"M",values:[.45*G,0]},{command:"L",values:[G,w]},{command:"L",values:[.45*G,.6*w]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*G,0]},{command:"L",values:[.45*G,.6*w]},{command:"L",values:[0,w]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,w]},{command:"L",values:[.45*G,.6*w]},{command:"L",values:[G,w]},{command:"Z",values:[]}]}]}function ue(G,oe){return Math.round(Math.min(Math.max(G+255*oe*.75,0),255))}function ge(G,oe){if(null==G)return new z.A;if("type"in G&&("linear"===G.type||"pattern"===G.type))return G;const q=new z.A(G);return new z.A([ue(q.r,oe),ue(q.g,oe),ue(q.b,oe),q.a])}},16633:(st,We,_)=>{_.d(We,{UB:()=>q,fz:()=>me});var z=_(77469),E=_(89563),Ue=_(29430),ae=_(5922),k=_(3248),je=(_(92129),_(76062)),H=_(86308),Pe=_(83393);const ne=(0,je.F)();function me(w,U,R){const B=Math.ceil(U[0]),Z=Math.ceil(U[1]);if(!w.some(C=>!!C.length))return null;const Q=R?.node||document.createElement("div");return null!=R.opacity&&(Q.style.opacity=R.opacity.toString()),null!=R.effectView&&(Q.style.filter=(0,Pe.di)(R.effectView)),function V(w,U){ne.append(w,U),ne.detach(U)}(Q,()=>(0,H.d8)(w,B,Z,R)),Q}function oe(w,U,R,B,Z){switch(Z){case"multiply":w[U]*=R[0],w[U+1]*=R[1],w[U+2]*=R[2],w[U+3]*=R[3];break;default:{const Q=(0,Ue.N2)({r:w[U],g:w[U+1],b:w[U+2]});Q.h=B.h,Q.s=B.s,Q.v=Q.v/100*B.v;const C=(0,Ue.$)(Q);w[U]=C.r,w[U+1]=C.g,w[U+2]=C.b,w[U+3]*=R[3];break}}}function q(w,U,R,B,Z){return function ge(w,U,R){return w?(0,E.A)(w,{responseType:"image"}).then(B=>{const Z=B.data,Q=Z.width,C=Z.height,P=Q/C;let W=U;if(R){const te=Math.max(Q,C);W=Math.min(W,te)}return{image:Z,width:P<=1?Math.ceil(W*P):W,height:P<=1?W:Math.ceil(W/P)}}):Promise.reject(new ae.A("renderUtils: imageDataSize","href not provided."))}(w,U,Z).then(Q=>{const C=Q.width??U,P=Q.height??U;if(Q.image&&function G(w,U){return!(!w||"ignore"===U||"multiply"===U&&255===w.r&&255===w.g&&255===w.b&&1===w.a)}(R,B)){let W=Q.image.width,te=Q.image.height;(0,k.A)("edge")&&/\.svg$/i.test(w)&&(W-=1,te-=1);const _e=function ue(w,U){w=Math.ceil(w),U=Math.ceil(U);const R=document.createElement("canvas");R.width=w,R.height=U,R.style.width=w+"px",R.style.height=U+"px";const B=R.getContext("2d");return B.clearRect(0,0,w,U),B}(C,P);_e.drawImage(Q.image,0,0,W,te,0,0,C,P);const re=_e.getImageData(0,0,C,P),ce=[R.r/255,R.g/255,R.b/255,R.a],de=(0,Ue.N2)(R);for(let Le=0;Le<re.data.length;Le+=4)oe(re.data,Le,ce,de,B);_e.putImageData(re,0,0),w=_e.canvas.toDataURL("image/png")}else{const W=z.id?.findCredential(w);if(W?.token){const te=w.includes("?")?"&":"?";w=`${w}${te}token=${W.token}`}}return{url:w,width:C,height:P}}).catch(()=>({url:w,width:U,height:U}))}},86308:(st,We,_)=>{_.d(We,{d8:()=>xe});var z=_(68677),E=_(3248),Ue=_(11432),ae=_(3672),k=_(76329),ye=_(8134);let je=0,ne=0,ue=0;_(60421);var w=_(56295);const U="http://www.w3.org/2000/svg",R=(0,E.A)("android"),B=(0,E.A)("chrome")||R&&R>=4?"auto":"optimizeLegibility",Z={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},Q=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g;let C={},P={};const W=Math.PI;function te(Y,ee){const fe=Y*(W/180);return Math.abs(ee*Math.sin(fe))+Math.abs(ee*Math.cos(fe))}function _e(Y){return Y.map(ee=>`${ee.command} ${ee.values.join(" ")}`).join(" ").trim()}function re(Y,ee,fe,L,Me){if(Y){if("circle"===Y.type)return(0,w.K)("circle",{cx:Y.cx,cy:Y.cy,fill:ee,"fill-rule":"evenodd",r:Y.r,stroke:fe.color,"stroke-dasharray":fe.dashArray,"stroke-dashoffset":fe.dashOffset,"stroke-linecap":fe.cap,"stroke-linejoin":fe.join,"stroke-miterlimit":"4","stroke-width":fe.width});if("ellipse"===Y.type)return(0,w.K)("ellipse",{cx:Y.cx,cy:Y.cy,fill:ee,"fill-rule":"evenodd",rx:Y.rx,ry:Y.ry,stroke:fe.color,"stroke-dasharray":fe.dashArray,"stroke-linecap":fe.cap,"stroke-linejoin":fe.join,"stroke-miterlimit":"4","stroke-width":fe.width});if("rect"===Y.type)return(0,w.K)("rect",{fill:ee,"fill-rule":"evenodd",height:Y.height,stroke:fe.color,"stroke-dasharray":fe.dashArray,"stroke-linecap":fe.cap,"stroke-linejoin":fe.join,"stroke-miterlimit":"4","stroke-width":fe.width,width:Y.width,x:Y.x,y:Y.y});if("image"===Y.type)return(0,w.K)("image",{alt:Me||"image",height:Y.height,href:Y.src,preserveAspectRatio:"none",width:Y.width,x:Y.x,y:Y.y});if("path"===Y.type){const S="string"!=typeof Y.path?_e(Y.path):Y.path;return(0,w.K)("path",{d:S,fill:ee,"fill-rule":"evenodd",stroke:fe.color,"stroke-dasharray":fe.dashArray,"stroke-linecap":fe.cap,"stroke-linejoin":fe.join,"stroke-miterlimit":"4","stroke-width":fe.width})}if("text"===Y.type)return(0,Ue.Lw)(L),(0,w.K)("text",{"dominant-baseline":L.dominantBaseline,fill:ee,"fill-rule":"evenodd","font-family":L.font.family,"font-size":L.font.size,"font-style":L.font.style,"font-variant":L.font.variant,"font-weight":L.font.weight,kerning:L.kerning,rotate:L.rotate,stroke:fe.color,"stroke-dasharray":fe.dashArray,"stroke-linecap":fe.cap,"stroke-linejoin":fe.join,"stroke-miterlimit":"4","stroke-width":fe.width,"text-anchor":L.align,"text-decoration":L.decoration,"text-rendering":B,x:Y.x,y:Y.y},Y.text)}return null}function ce(Y){if(!Y)return{fill:"none",pattern:null,linearGradient:null};if(!("type"in Y))return{fill:new z.A(Y).toString(),pattern:null,linearGradient:null};if("pattern"===Y.type){const fe=`patternId-${function H(){return je++}()}`;return{fill:`url(#${fe})`,pattern:{id:fe,x:Y.x,y:Y.y,width:Y.width,height:Y.height,image:{x:0,y:0,width:Y.width,height:Y.height,href:Y.src}},linearGradient:null}}const ee=`linearGradientId-${function V(){return ne++}()}`;return{fill:`url(#${ee})`,pattern:null,linearGradient:{id:ee,x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,stops:Y.colors.map(fe=>({offset:fe.offset,color:fe.color&&new z.A(fe.color).toString()}))}}}function de(Y){const ee={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};return Y&&(null!=Y.width&&(ee.width=Y.width),Y.cap&&(ee.cap=Y.cap),Y.join&&(ee.join=Y.join.toString()),Y.color&&(ee.color=new z.A(Y.color).toString()),Y.dashArray&&(ee.dashArray=Y.dashArray),Y.dashoffset&&(ee.dashOffset=Y.dashoffset),Y.style&&!Y.dashArray&&(ee.dashArray=(0,ye.O0)(Y).join(",")||"none")),ee}function Le(Y,ee){const fe={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};if(Y){const L=Y.alignBaseline,Me="baseline"===L?"auto":"top"===L?"text-top":"bottom"===L?"hanging":L;fe.align=Y.align,fe.dominantBaseline=Me,fe.decoration=Y.decoration,fe.kerning=Y.kerning?"auto":"0",fe.rotate=Y.rotated?"90":"0",(0,Ue.Lw)(ee),fe.font.style=ee.style||"normal",fe.font.variant=ee.variant||"normal",fe.font.weight=ee.weight||"normal",fe.font.size=ee.size&&ee.size.toString()||"10pt",fe.font.family=ee.family||"serif"}return fe}function Ee(Y){const{pattern:ee,linearGradient:fe}=Y;if(ee)return(0,w.K)("pattern",{height:ee.height,id:ee.id,patternUnits:"userSpaceOnUse",width:ee.width,x:ee.x,y:ee.y},(0,w.K)("image",{height:ee.image.height,href:ee.image.href,width:ee.image.width,x:ee.image.x,y:ee.image.y}));if(fe){const L=fe.stops.map((Me,S)=>(0,w.K)("stop",{key:`${S}-stop`,offset:Me.offset,"stop-color":Me.color}));return(0,w.K)("linearGradient",{gradientUnits:"userSpaceOnUse",id:fe.id,x1:fe.x1,x2:fe.x2,y1:fe.y1,y2:fe.y2},L)}return null}function ve(Y,ee){if(!Y||0===Y.length)return null;const fe=[];for(const L of Y){const{shape:Me,fill:S,stroke:he,font:Ce}=L,Se=ce(S),Te=de(he),Ke="text"===Me.type?Le(Me,Ce):null,qe=re(Me,Se.fill,Te,Ke);qe&&fe.push(qe)}return(0,w.K)("mask",{id:ee,maskUnits:"userSpaceOnUse"},(0,w.K)("g",null,fe))}function Re(Y,ee,fe){return(0,k.Tl)(Y,(0,k.D_)(Y),[ee,fe])}function Ve(Y,ee,fe,L,Me){return(0,k.hs)(Y,(0,k.D_)(Y),[ee,fe]),Y[4]=Y[4]*ee-L*ee+L,Y[5]=Y[5]*fe-Me*fe+Me,Y}function ze(Y,ee){C&&"left"in C?(null!=C.left&&C.left>Y&&(C.left=Y),(null==C.right||C.right<Y)&&(C.right=Y),(null==C.top||C.top>ee)&&(C.top=ee),(null==C.bottom||C.bottom<ee)&&(C.bottom=ee)):C={left:Y,bottom:ee,right:Y,top:ee}}function Xe(Y){const ee=Y.args,fe=ee.length;let L;switch(Y.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(L=0;L<fe;L+=2)ze(ee[L],ee[L+1]);P.x=ee[fe-2],P.y=ee[fe-1];break;case"H":for(L=0;L<fe;++L)ze(ee[L],P.y);P.x=ee[fe-1];break;case"V":for(L=0;L<fe;++L)ze(P.x,ee[L]);P.y=ee[fe-1];break;case"m":{let Me=0;for(("x"in P||(ze(P.x=ee[0],P.y=ee[1]),Me=2),L=Me);L<fe;L+=2)ze(P.x+=ee[L],P.y+=ee[L+1]);break}case"l":case"t":for(L=0;L<fe;L+=2)ze(P.x+=ee[L],P.y+=ee[L+1]);break;case"h":for(L=0;L<fe;++L)ze(P.x+=ee[L],P.y);break;case"v":for(L=0;L<fe;++L)ze(P.x,P.y+=ee[L]);break;case"c":for(L=0;L<fe;L+=6)ze(P.x+ee[L],P.y+ee[L+1]),ze(P.x+ee[L+2],P.y+ee[L+3]),ze(P.x+=ee[L+4],P.y+=ee[L+5]);break;case"s":case"q":for(L=0;L<fe;L+=4)ze(P.x+ee[L],P.y+ee[L+1]),ze(P.x+=ee[L+2],P.y+=ee[L+3]);break;case"A":for(L=0;L<fe;L+=7)ze(ee[L+5],ee[L+6]);P.x=ee[fe-2],P.y=ee[fe-1];break;case"a":for(L=0;L<fe;L+=7)ze(P.x+=ee[L+5],P.y+=ee[L+6])}}function ke(Y,ee,fe){const L=Z[Y.toLowerCase()];let Me;"number"==typeof L&&(L?ee.length>=L&&(Me={action:Y,args:ee.slice(0,ee.length-ee.length%L)},fe.push(Me),Xe(Me)):(Me={action:Y,args:[]},fe.push(Me),Xe(Me)))}function J(Y){const ee={x:0,y:0,width:0,height:0};if("circle"===Y.type)ee.x=Y.cx-Y.r,ee.y=Y.cy-Y.r,ee.width=2*Y.r,ee.height=2*Y.r;else if("ellipse"===Y.type)ee.x=Y.cx-Y.rx,ee.y=Y.cy-Y.ry,ee.width=2*Y.rx,ee.height=2*Y.ry;else if("image"===Y.type||"rect"===Y.type)ee.x=Y.x,ee.y=Y.y,ee.width=Y.width,ee.height=Y.height;else if("path"===Y.type){const fe=function _t(Y){const ee=("string"!=typeof Y.path?_e(Y.path):Y.path).match(Q),fe=[];if(C={},P={},!ee)return null;let L="",Me=[];const S=ee.length;for(let Ce=0;Ce<S;++Ce){const Se=ee[Ce],Te=parseFloat(Se);isNaN(Te)?(L&&ke(L,Me,fe),Me=[],L=Se):Me.push(Te)}ke(L,Me,fe);const he={x:0,y:0,width:0,height:0};return C&&"left"in C&&(he.x=C.left,he.y=C.top,he.width=C.right-C.left,he.height=C.bottom-C.top),he}(Y);ee.x=fe.x,ee.y=fe.y,ee.width=fe.width,ee.height=fe.height}return ee}function K(Y){const ee={x:0,y:0,width:0,height:0};let fe=null,L=Number.NEGATIVE_INFINITY,Me=Number.NEGATIVE_INFINITY;for(const S of Y)fe?(fe.x=Math.min(fe.x,S.x),fe.y=Math.min(fe.y,S.y),L=Math.max(L,S.x+S.width),Me=Math.max(Me,S.y+S.height)):(fe=ee,fe.x=S.x,fe.y=S.y,L=S.x+S.width,Me=S.y+S.height);return fe&&(fe.width=L-fe.x,fe.height=Me-fe.y),fe}function X(Y,ee,fe,L,Me,S,he,Ce,Se){let Te=(he&&S?te(S,ee):ee)/2,Ke=(he&&S?te(S,fe):fe)/2;if(Se){const Ut=Se[0],wt=Se[1];Te=(he&&S?te(S,Ut):Ut)/2,Ke=(he&&S?te(S,wt):wt)/2}const qe=Y.width+L,Je=Y.height+L,lt=(0,ae.vt)(),tt=(0,ae.vt)();let yt=!1;if(Me&&0!==qe&&0!==Je){const Ut=ee!==fe?ee/fe:qe/Je,wt=ee>fe?ee:fe;let Ht=1,Vt=1;isNaN(wt)||(Ut>1?(Ht=wt/qe,Vt=wt/Ut/Je):(Vt=wt/Je,Ht=wt*Ut/qe)),(0,k.lw)(tt,tt,Ve(lt,Ht,Vt,Te,Ke)),yt=!0}const ht=Y.x+(qe-L)/2,Ot=Y.y+(Je-L)/2;if((0,k.lw)(tt,tt,Re(lt,Te-ht,Ke-Ot)),!yt&&(qe>ee||Je>fe)){const Ut=qe/ee>Je/fe,wt=(Ut?ee:fe)/(Ut?qe:Je);(0,k.lw)(tt,tt,Ve(lt,wt,wt,ht,Ot))}return Ce&&(0,k.lw)(tt,tt,Re(lt,Ce[0],Ce[1])),S&&(0,k.lw)(tt,tt,function Ze(Y,ee,fe,L){const Me=ee%360*Math.PI/180;(0,k.e$)(Y,(0,k.D_)(Y),Me);const S=Math.cos(Me),he=Math.sin(Me),Ce=Y[4],Se=Y[5];return Y[4]=Ce*S-Se*he+L*he-fe*S+fe,Y[5]=Se*S+Ce*he-fe*he-L*S+L,Y}(lt,S,ht,Ot)),`matrix(${tt[0]},${tt[1]},${tt[2]},${tt[3]},${tt[4]},${tt[5]})`}function xe(Y,ee,fe,L={}){const Me=[],S=[],he=function ge(){return ue++}(),Ce=function se(Y,ee,fe){const L=Y?.effects.find(Te=>"bloom"===Te.type);if(!L)return null;const{strength:Me,radius:S}=L,he=Me>0?S:0,Ce=(Me+he)*ee,Se=4*Me+1;return(0,w.K)("filter",{filterUnits:"userSpaceOnUse",height:"300%",id:`bloom${fe}`,width:"300%",x:"-100%",y:"-100%"},(0,w.K)("feMorphology",{in:"SourceGraphic",operator:"dilate",radius:(Me+.5*he)*(5**(ee/100)*(.4+ee/100)),result:"dilate"}),(0,w.K)("feGaussianBlur",{in:"dilate",result:"blur",stdDeviation:Ce/25}),(0,w.K)("feGaussianBlur",{in:"blur",result:"intensityBlur",stdDeviation:Ce/50}),(0,w.K)("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},(0,w.K)("feFuncR",{slope:Se,type:"linear"}),(0,w.K)("feFuncG",{slope:Se,type:"linear"}),(0,w.K)("feFuncB",{slope:Se,type:"linear"})),(0,w.K)("feMerge",null,(0,w.K)("feMergeNode",{in:"intensityBlur"}),(0,w.K)("feMergeNode",{in:"intensityBrightness"}),(0,w.K)("feGaussianBlur",{stdDeviation:Me/10})))}(L.effectView,ee,he);let Se=null;if(Ce){const Je=L.effectView?.effects.find(ht=>"bloom"===ht.type),lt=(Je.strength?Je.strength+Je.radius/2:0)/3,yt=fe+fe*lt;Se=[Math.max(ee+ee*lt,10),Math.max(yt,10)]}let Te=ee,Ke=fe;if(L.useRotationSize)for(let Je=0;Je<Y.length;Je++){const lt=L.rotations?.[Je]??0;Te=Math.max(te(lt,ee),Te),Ke=Math.max(te(lt,fe),Ke)}for(let Je=0;Je<Y.length;Je++){const lt=Y[Je],tt=[],yt=[];let ht=0,Ot=0,Ut=0;for(const ci of lt){const{shape:ti,fill:Mi,stroke:Rt,font:fi,offset:$t}=ci;L.ignoreStrokeWidth||"text"===ti.type||(ht+=Rt?.width||0);const yi=ce(Mi),pi=de(Rt),Qt="text"===ti.type?Le(ti,fi):null;Me.push(Ee(yi)),tt.push(re(ti,yi.fill,pi,Qt,L.ariaLabel)),yt.push(J(ti)),$t&&(Ot+=$t[0],Ut+=$t[1])}const wt=L.rotations?.[Je]??0;L.useRotationSize&&(Ot+=(Te-te(wt,ee))/2,Ut+=(Ke-te(wt,fe))/2);const Ht=X(K(yt),ee,fe,ht,L.scale??!1,wt,L.useRotationSize??!1,[Ot,Ut],Se);let Vt=null;if(L.masking){const ci=`mask-${Je}`;Me.push(ve(L.masking[Je],ci)),Vt=`url(#${ci})`}S.push(Vt?(0,w.K)("g",{mask:Vt},(0,w.K)("g",{transform:Ht},tt)):(0,w.K)("g",{transform:Ht},tt))}return Ce&&((0,Ue.Lw)(Se),Te=Se[0],Ke=Se[1]),(0,w.K)("svg",{"aria-label":L.ariaLabel,focusable:!1,height:Ke,role:"img",style:"display: block;",width:Te,xmlns:U},Ce,(0,w.K)("defs",null,Me),Ce?(0,w.K)("g",{filter:`url(#bloom${he})`},S):S)}},83393:(st,We,_)=>{_.d(We,{$d:()=>G,GG:()=>ke,N7:()=>oe,Sx:()=>q,UQ:()=>ze,di:()=>_t,dt:()=>Z,f3:()=>J,k_:()=>ge});var z=_(10467),E=_(68677),Ue=_(89447),k=(_(3248),_(67685)),ye=_(25866),je=_(72211),H=_(76926),Pe=_(8134),ne=_(74760),V=_(94048);const me=new E.A("white");function ge(K){if(!K)return 0;if((0,V.wk)(K)){const X=function ue(K){const X=K.symbolLayers?.at(-1);if(X&&"outline"in X)return X?.outline?.size}(K);return X??0}return(0,k.PN)((0,Pe.$4)(K)?.width)}function G(K){if(null==K||!("symbolLayers"in K)||null==K.symbolLayers)return!1;switch(K.type){case"point-3d":return K.symbolLayers.some(X=>"object"===X.type);case"line-3d":return K.symbolLayers.some(X=>"path"===X.type);case"polygon-3d":return K.symbolLayers.some(X=>"object"===X.type||"extrude"===X.type);default:return!1}}function oe(K){return K.resource?.href??""}function q(K,X){if(!K)return null;let se=null;return(0,V.wk)(K)?se=function w(K){const X=K.symbolLayers;if(!X)return null;let se=null;return X.forEach(xe=>{"object"===xe.type&&xe.resource?.href||(se="water"===xe.type?xe.color:xe.material?xe.material.color:null)}),se?new E.A(se):null}(K):(0,V.$y)(K)&&(se="cim"===K.type?(0,H.Nk)(K):K.color?new E.A(K.color):null),se?U(se,X):null}function U(K,X){if(null==X||null==K)return K;const se=K.toRgba();return se[3]=se[3]*X,new E.A(se)}function Z(K,X,se){K&&(X||null!=se)&&(X&&(X=new E.A(X)),(0,V.wk)(K)?function R(K,X,se){const xe=K.symbolLayers;if(!xe)return;const Y=ee=>U(X=X??ee??(null!=se?me:null),se);xe.forEach(ee=>{if("object"!==ee.type||!ee.resource?.href||X)if("water"===ee.type)ee.color=Y(ee.color);else{const L=Y(null!=ee.material?ee.material.color:null);null==ee.material?ee.material=new ne.N({color:L}):ee.material.color=L,null!=se&&"outline"in ee&&null!=ee.outline?.color&&(ee.outline.color=U(ee.outline.color,se))}})}(K,X,se):(0,V.$y)(K)&&function B(K,X,se){(X=X??K.color)&&(K.color=U(X,se)),null!=se&&"outline"in K&&K.outline?.color&&(K.outline.color=U(K.outline.color,se))}(K,X,se))}function C(){return C=(0,z.A)(function*(K,X){const se=K.symbolLayers;se&&(yield(0,Ue.jJ)(se,function(){var xe=(0,z.A)(function*(Y){return function P(K,X){return W.apply(this,arguments)}(Y,X)});return function(Y){return xe.apply(this,arguments)}}()))}),C.apply(this,arguments)}function W(){return W=(0,z.A)(function*(K,X){switch(K.type){case"extrude":!function re(K,X){K.size="number"==typeof X[2]?X[2]:0}(K,X);break;case"icon":case"line":case"text":!function te(K,X){const se=_e(X);null!=se&&(K.size=se)}(K,X);break;case"path":!function Le(K,X){const se=Ee(X,ye.Un,[K.width,void 0,K.height]);K.width=Ve(X[0],K.width,1,se),K.height=Ve(X[2],K.height,1,se)}(K,X);break;case"object":yield function ce(K,X){return de.apply(this,arguments)}(K,X)}}),W.apply(this,arguments)}function _e(K){for(const X of K)if("number"==typeof X)return X;return null}function de(){return de=(0,z.A)(function*(K,X){const{resourceSize:se,symbolSize:xe}=yield function ve(K){return Re.apply(this,arguments)}(K),Y=Ee(X,se,xe);K.width=Ve(X[0],xe[0],se[0],Y),K.depth=Ve(X[1],xe[1],se[1],Y),K.height=Ve(X[2],xe[2],se[2],Y)}),de.apply(this,arguments)}function Ee(K,X,se){for(let xe=0;xe<3;xe++){const Y=K[xe];switch(Y){case"symbol-value":{const ee=se[xe];return null!=ee?ee/X[xe]:1}case"proportional":break;default:if(Y&&X[xe])return Y/X[xe]}}return 1}function Re(){return(Re=(0,z.A)(function*(K){const{computeObjectLayerResourceSize:X}=yield _.e(5020).then(_.bind(_,75020)),se=yield X(K,10),{width:xe,height:Y,depth:ee}=K,fe=[xe,ee,Y];let L=1;for(let Me=0;Me<3;Me++){const S=fe[Me];if(null!=S){L=S/se[Me];break}}for(let Me=0;Me<3;Me++)null==fe[Me]&&(fe[Me]=se[Me]*L);return{resourceSize:se,symbolSize:fe}})).apply(this,arguments)}function Ve(K,X,se,xe){switch(K){case"proportional":return se*xe;case"symbol-value":return X??se;default:return K}}function ze(K,X){return Xe.apply(this,arguments)}function Xe(){return Xe=(0,z.A)(function*(K,X){if(K&&X)return(0,V.wk)(K)?function Q(K,X){return C.apply(this,arguments)}(K,X):void((0,V.$y)(K)&&function Ze(K,X){const se=_e(X);if(null!=se)switch(K.type){case"simple-marker":K.size=se;break;case"picture-marker":{const xe=K.width/K.height;xe>1?(K.width=se,K.height=se*xe):(K.width=se*xe,K.height=se);break}case"simple-line":K.width=se;break;case"text":K.font.size=se}}(K,X))}),Xe.apply(this,arguments)}function ke(K,X,se){if(K&&null!=X)if((0,V.wk)(K)){const xe=K.symbolLayers;xe&&xe.forEach(Y=>{if("object"===Y.type)switch(se){case"tilt":Y.tilt=(Y.tilt??0)+X;break;case"roll":Y.roll=(Y.roll??0)+X;break;default:Y.heading=(Y.heading??0)+X}"icon"===Y.type&&(Y.angle+=X)})}else(0,V.$y)(K)&&("simple-marker"!==K.type&&"picture-marker"!==K.type&&"text"!==K.type||(K.angle+=X))}function _t(K){if(!K)return null;const X=K.effects.filter(se=>"bloom"!==se.type).map(se=>se.toJSON());return(0,je.zu)(X)}function J(K){return null!=K&&"polygon-3d"===K.type&&K.symbolLayers.some(X=>"extrude"===X.type)}},6558:(st,We,_)=>{function E(ne){return ne&&"function"==typeof ne.highlight}function ae(ne,V,me){return null==ne||ne>=me&&(0===V||ne<=V)}function k(ne,V){if(V&&ne){const{minScale:me,maxScale:ue}=ne;if(function ye(ne,V){return null!=ne&&ne>0||null!=V&&V>0}(me,ue))return ae(V,me,ue)}return!0}function je(ne){return!ne?.minScale||!ne.maxScale||ne.minScale>=ne.maxScale}_.d(We,{E5:()=>k,JU:()=>ae,Of:()=>E,g7:()=>je}),_(5922)},71655:(st,We,_)=>{var z,E;_.d(We,{X:()=>z}),(E=z||(z={}))[E.SAVE=0]="SAVE",E[E.SAVE_AS=1]="SAVE_AS"},69725:(st,We,_)=>{_.d(We,{A:()=>R});var z=_(10467),E=_(8189),Ue=_(81098),ae=_(98877),k=_(31178),ye=_(5922),je=_(48900),H=_(85211),Pe=_(48669),me=(_(3248),_(40707),_(76576)),ue=_(32992),ge=_(70994),G=_(52466),oe=_(93958);const q={editing:!1,operations:{add:!0,update:!0,delete:!0}},w=k.A.ofType(ge.A);let U=class extends ae.A{constructor(B){super(B),this._getAttachmentsPromise=null,this._attachmentLayer=null,this.capabilities={...q},this.activeAttachmentInfo=null,this.activeFileInfo=null,this.attachmentInfos=new w,this.fileInfos=new k.A,this.graphic=null,this.mode="view",this.orderByFields=null,this.filesEnabled=!1,this.addHandles((0,je.wB)(()=>this.graphic,()=>this._graphicChanged(),je.Vh))}destroy(){this._attachmentLayer=null,this.graphic=null}castCapabilities(B){return{...q,...B}}get state(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}get supportsResizeAttachments(){const{graphic:B}=this;if(!B)return!1;const Z=B.layer||B.sourceLayer;return Z?.loaded&&"capabilities"in Z&&Z.capabilities&&"attachment"in Z.capabilities&&Z.capabilities.attachment&&"supportsResize"in Z.capabilities.attachment&&Z.capabilities.attachment.supportsResize||!1}getAttachments(){var B=this;return(0,z.A)(function*(){const{_attachmentLayer:Z,attachmentInfos:Q,orderByFields:C}=B;if(!Z||"function"!=typeof Z.queryAttachments)throw new ye.A("invalid-layer","getAttachments(): A valid layer is required.");const P=B._getObjectId();if("number"!=typeof P)throw new ye.A("invalid-object-id","getAttachments(): Numeric object id is required");const W=C?.map(de=>`${de.field} ${"descending"===de.order?"DESC":"ASC"}`),te=new G.A({objectIds:[P],returnMetadata:!0,orderByFields:W}),_e=[],re=Z.queryAttachments(te).then(de=>de[P]||_e).catch(()=>_e);B._getAttachmentsPromise=re,B.notifyChange("state");const ce=yield re;return Q.destroyAll(),ce.length&&Q.addMany(ce),B._getAttachmentsPromise=null,B.notifyChange("state"),ce})()}addAttachment(B,Z=this.graphic){var Q=this;return(0,z.A)(function*(){const{_attachmentLayer:C,attachmentInfos:P,capabilities:W}=Q;if(!Z)throw new ye.A("invalid-graphic","addAttachment(): A valid graphic is required.",{graphic:Z});if(!B)throw new ye.A("invalid-attachment","addAttachment(): An attachment is required.",{attachment:B});if(!W.operations?.add)throw new ye.A("invalid-capabilities","addAttachment(): add capabilities are required.");if(!C||"function"!=typeof C.addAttachment)throw new ye.A("invalid-layer","addAttachment(): A valid layer is required.");const te=C.addAttachment(Z,B).then(re=>Q._queryAttachment(re.objectId,Z)),_e=yield te;return P.add(_e),_e})()}deleteAttachment(B){var Z=this;return(0,z.A)(function*(){const{_attachmentLayer:Q,attachmentInfos:C,graphic:P,capabilities:W}=Z;if(!B)throw new ye.A("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:B});if(!W.operations?.delete)throw new ye.A("invalid-capabilities","deleteAttachment(): delete capabilities are required.");if(!Q||"function"!=typeof Q.deleteAttachments)throw new ye.A("invalid-layer","deleteAttachment(): A valid layer is required.");if(!P)throw new ye.A("invalid-graphic","deleteAttachment(): A graphic is required.");const te=Q.deleteAttachments(P,[B.id]).then(()=>B),_e=yield te;return C.remove(_e),_e.destroy(),_e})()}updateAttachment(B,Z=this.activeAttachmentInfo){var Q=this;return(0,z.A)(function*(){const{_attachmentLayer:C,attachmentInfos:P,graphic:W,capabilities:te}=Q;if(!B)throw new ye.A("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:B});if(!Z)throw new ye.A("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:Z});if(!te.operations?.update)throw new ye.A("invalid-capabilities","updateAttachment(): Update capabilities are required.");const _e=P.indexOf(Z);if(!C||"function"!=typeof C.updateAttachment)throw new ye.A("invalid-layer","updateAttachment(): A valid layer is required.");if(!W)throw new ye.A("invalid-graphic","updateAttachment(): A graphic is required.");const re=C.updateAttachment(W,Z.id,B).then(de=>Q._queryAttachment(de.objectId)),ce=yield re;return P.splice(_e,1,ce),ce})()}commitFiles(){var B=this;return(0,z.A)(function*(){return yield Promise.all(B.fileInfos.items.map(Z=>B.addAttachment(Z.form))),B.fileInfos.removeAll(),B.getAttachments()})()}addFile(B,Z){if(!B||!Z)return null;const Q={file:B,form:Z};return this.fileInfos.add(Q),Q}updateFile(B,Z,Q=this.activeFileInfo){if(!B||!Z||!Q)return null;const C=this.fileInfos.indexOf(Q);return C>-1&&this.fileInfos.splice(C,1,{file:B,form:Z}),this.fileInfos.items[C]}deleteFile(B){const Z=this.fileInfos.find(Q=>Q.file===B);return Z?(this.fileInfos.remove(Z),Z):null}_queryAttachment(B,Z){var Q=this;return(0,z.A)(function*(){const{_attachmentLayer:C}=Q;if(!B||!C?.queryAttachments)throw new ye.A("invalid-attachment-id","Could not query attachment.");const P=Q._getObjectId(Z);if("number"!=typeof P)throw new ye.A("invalid-object-id","getAttachments(): Numeric object id is required");const W=new G.A({objectIds:[P],attachmentsWhere:`AttachmentId=${B}`,returnMetadata:!0});return C.queryAttachments(W).then(te=>te[P][0])})()}_getObjectId(B=this.graphic){return B?.getObjectId()??null}_graphicChanged(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>this.attachmentInfos.destroyAll()))}_setAttachmentLayer(){const{graphic:B}=this,Z=(0,oe.getSourceLayer)(B);this._attachmentLayer=Z?"scene"===Z.type&&null!=Z.associatedLayer?Z.associatedLayer:Z:null}};(0,E._)([(0,H.MZ)()],U.prototype,"capabilities",void 0),(0,E._)([(0,Pe.w)("capabilities")],U.prototype,"castCapabilities",null),(0,E._)([(0,H.MZ)()],U.prototype,"activeAttachmentInfo",void 0),(0,E._)([(0,H.MZ)()],U.prototype,"activeFileInfo",void 0),(0,E._)([(0,H.MZ)({readOnly:!0,type:w})],U.prototype,"attachmentInfos",void 0),(0,E._)([(0,H.MZ)()],U.prototype,"fileInfos",void 0),(0,E._)([(0,H.MZ)({type:Ue.A})],U.prototype,"graphic",void 0),(0,E._)([(0,H.MZ)()],U.prototype,"mode",void 0),(0,E._)([(0,H.MZ)({type:[ue.A]})],U.prototype,"orderByFields",void 0),(0,E._)([(0,H.MZ)({readOnly:!0})],U.prototype,"state",null),(0,E._)([(0,H.MZ)()],U.prototype,"filesEnabled",void 0),(0,E._)([(0,H.MZ)({readOnly:!0})],U.prototype,"supportsResizeAttachments",null),U=(0,E._)([(0,me.$)("esri.widgets.Attachments.AttachmentsViewModel")],U);const R=U},10573:(st,We,_)=>{_.r(We),_.d(We,{default:()=>ai});var z=_(10467),E=_(8189),ae=(_(13242),_(48900)),k=_(85211),ye=_(48669),Pe=(_(3248),_(40707),_(76576)),ne=_(2188),me=(_(35150),_(5922)),ue=_(35926),ge=_(69725),G=_(90261);function oe(A){const D=A.toLowerCase();return"image/bmp"===D||"image/emf"===D||"image/exif"===D||"image/gif"===D||"image/x-icon"===D||"image/jpeg"===D||"image/png"===D||"image/tiff"===D||"image/x-wmf"===D}var U=_(42900),R=_(92190),B=_(37360),Z=_(60421),Q=_(5668),C=_(56295);const P={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},W="esri-attachments",te={base:W,loaderContainer:`${W}__loader-container`,loader:`${W}__loader`,fadeIn:`${W}--fade-in`,container:`${W}__container`,containerList:`${W}__container--list`,containerPreview:`${W}__container--preview`,actions:`${W}__actions`,deleteButton:`${W}__delete-button`,addAttachmentButton:`${W}__add-attachment-button`,errorMessage:`${W}__error-message`,items:`${W}__items`,item:`${W}__item`,itemButton:`${W}__item-button`,itemMask:`${W}__item-mask`,itemMaskIcon:`${W}__item-mask--icon`,itemImage:`${W}__image`,itemImageResizable:`${W}__image--resizable`,itemLabel:`${W}__label`,itemFilename:`${W}__filename`,itemChevronIcon:`${W}__item-chevron-icon`,itemLink:`${W}__item-link`,itemLinkOverlay:`${W}__item-link-overlay`,itemLinkOverlayIcon:`${W}__item-link-overlay-icon`,itemEditIcon:`${W}__item-edit-icon`,itemAddIcon:`${W}__item-add-icon`,itemAddButton:`${W}__item-add-button`,formNode:`${W}__form-node`,fileFieldset:`${W}__file-fieldset`,fileLabel:`${W}__file-label`,fileName:`${W}__file-name`,fileInput:`${W}__file-input`,metadata:`${W}__metadata`,metadataFieldset:`${W}__metadata-fieldset`,progressBar:`${W}__progress-bar`},_e=window.CSS;let re=class extends ne.A{constructor(A,D){super(A,D),this.displayType="auto",this.messages=null,this.messagesUnits=null,this.selectedFile=null,this.submitting=!1,this.viewModel=null,this.visibleElements={...P},this._supportsImageOrientation=_e&&_e.supports&&_e.supports("image-orientation","from-image"),this._addAttachmentForm=null,this._updateAttachmentForm=null}normalizeCtorArgs(A){return A?.viewModel||(A={viewModel:new ge.A,...A}),A}initialize(){this.addHandles([(0,ae.on)(()=>this.viewModel?.attachmentInfos,"change",()=>this.scheduleRender()),(0,ae.on)(()=>this.viewModel?.fileInfos,"change",()=>this.scheduleRender()),(0,ae.wB)(()=>this.viewModel?.mode,()=>this._modeChanged(),ae.Vh)])}loadDependencies(){return(0,U.W)({icon:()=>_.e(1951).then(_.bind(_,81951))})}get capabilities(){return this.viewModel.capabilities}set capabilities(A){this.viewModel.capabilities=A}get effectiveDisplayType(){const{displayType:A}=this;return A&&"auto"!==A?A:this.viewModel.supportsResizeAttachments?"preview":"list"}get graphic(){return this.viewModel.graphic}set graphic(A){this.viewModel.graphic=A}get icon(){return"attachment"}set icon(A){this._overrideIfSome("icon",A)}get label(){return this.messages?.widgetLabel??""}set label(A){this._overrideIfSome("label",A)}castVisibleElements(A){return{...P,...A}}addAttachment(){const{_addAttachmentForm:A,viewModel:D}=this;return this._set("submitting",!0),this._set("error",null),D.addAttachment(A).then(le=>(this._set("submitting",!1),this._set("error",null),D.mode="view",le)).catch(le=>{throw this._set("submitting",!1),this._set("error",new me.A("attachments:add-attachment",this.messages.addErrorMessage,le)),le})}deleteAttachment(A){const{viewModel:D}=this;return this._set("submitting",!0),this._set("error",null),D.deleteAttachment(A).then(le=>(this._set("submitting",!1),this._set("error",null),D.mode="view",le)).catch(le=>{throw this._set("submitting",!1),this._set("error",new me.A("attachments:delete-attachment",this.messages.deleteErrorMessage,le)),le})}updateAttachment(){const{viewModel:A}=this,{_updateAttachmentForm:D}=this;return this._set("submitting",!0),this._set("error",null),A.updateAttachment(D).then(le=>(this._set("submitting",!1),this._set("error",null),A.mode="view",le)).catch(le=>{throw this._set("submitting",!1),this._set("error",new me.A("attachments:update-attachment",this.messages.updateErrorMessage,le)),le})}addFile(){const A=this.viewModel.addFile(this.selectedFile,this._addAttachmentForm);return this.viewModel.mode="view",A}updateFile(){const{viewModel:A}=this,D=A.updateFile(this.selectedFile,this._updateAttachmentForm,A.activeFileInfo);return A.mode="view",D}deleteFile(A){const D=this.viewModel.deleteFile(A||this.viewModel.activeFileInfo?.file);return this.viewModel.mode="view",D}render(){const{submitting:A,viewModel:D}=this,{state:le}=D;return(0,C.K)("div",{class:this.classes(te.base,R.D.widget)},A?this._renderProgressBar():null,"loading"===le?this._renderLoading():this._renderAttachments(),this._renderErrorMessage())}_renderErrorMessage(){const{error:A,visibleElements:D}=this;return A&&D.errorMessage?(0,C.K)("div",{class:te.errorMessage,key:"error-message"},A.message):null}_renderAttachments(){const{activeFileInfo:A,mode:D,activeAttachmentInfo:le}=this.viewModel;return"add"===D?this._renderAddForm():"edit"===D?this._renderDetailsForm(le||A):this._renderAttachmentContainer()}_renderLoading(){return(0,C.K)("div",{class:te.loaderContainer,key:"loader"},(0,C.K)("div",{class:te.loader}))}_renderProgressBar(){return this.visibleElements.progressBar?(0,C.K)("div",{class:te.progressBar,key:"progress-bar"}):null}_renderAddForm(){const{submitting:A,selectedFile:D}=this,le=A||!D,Ie=this.visibleElements.cancelAddButton?(0,C.K)("button",{bind:this,class:this.classes(R.D.button,R.D.buttonTertiary,R.D.buttonSmall,R.D.buttonHalf,A&&R.D.buttonDisabled),disabled:A,onclick:this._cancelForm,type:"button"},this.messages.cancel):null,Be=this.visibleElements.addSubmitButton?(0,C.K)("button",{class:this.classes(R.D.button,R.D.buttonSecondary,R.D.buttonSmall,R.D.buttonHalf,{[R.D.buttonDisabled]:le}),disabled:le,type:"submit"},this.messages.add):null,Oe=D?(0,C.K)("span",{class:te.fileName,key:"file-name"},D.name):null,$e=(0,C.K)("form",{afterCreate:Z.cA,afterRemoved:Z.N_,bind:this,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},(0,C.K)("fieldset",{class:te.fileFieldset},Oe,(0,C.K)("label",{class:this.classes(te.fileLabel,R.D.button,R.D.buttonSecondary)},D?this.messages.changeFile:this.messages.selectFile,(0,C.K)("input",{bind:this,class:te.fileInput,name:"attachment",onchange:this._handleFileInputChange,type:"file"}))),Be,Ie);return(0,C.K)("div",{class:te.formNode,key:"add-form-container"},$e)}_renderDetailsForm(A){const{visibleElements:D,viewModel:le,selectedFile:Ie,submitting:Be}=this,{capabilities:Oe}=le,$e=Be||!Ie;let Qe,ot,mt,Ct;Ie?(Qe=Ie.type,ot=Ie.name,mt=Ie.size):A&&"file"in A?(Qe=A.file.type,ot=A.file.name,mt=A.file.size):A&&"contentType"in A&&(Qe=A.contentType,ot=A.name,mt=A.size,Ct=A.url);const It=Oe.editing&&Oe.operations?.delete&&D.deleteButton?(0,C.K)("button",{bind:this,class:this.classes(R.D.button,R.D.buttonSmall,R.D.buttonTertiary,te.deleteButton,{[R.D.buttonDisabled]:Be}),disabled:Be,key:"delete-button",onclick:rt=>this._submitDeleteAttachment(rt,A),type:"button"},this.messages.delete):void 0,vt=Oe.editing&&Oe.operations?.update&&D.updateButton?(0,C.K)("button",{class:this.classes(R.D.button,R.D.buttonSmall,R.D.buttonThird,{[R.D.buttonDisabled]:$e}),disabled:$e,key:"update-button",type:"submit"},this.messages.update):void 0,Ft=this.visibleElements.cancelUpdateButton?(0,C.K)("button",{bind:this,class:this.classes(R.D.button,R.D.buttonSmall,R.D.buttonTertiary,R.D.buttonThird,{[R.D.buttonDisabled]:Be}),disabled:Be,key:"cancel-button",onclick:this._cancelForm,type:"button"},this.messages.cancel):void 0,Zt=Oe.editing&&Oe.operations?.update?(0,C.K)("fieldset",{class:te.fileFieldset,key:"file"},(0,C.K)("span",{class:te.fileName,key:"file-name"},ot),(0,C.K)("label",{class:this.classes(te.fileLabel,R.D.button,R.D.buttonSecondary)},this.messages.changeFile,(0,C.K)("input",{bind:this,class:te.fileInput,name:"attachment",onchange:this._handleFileInputChange,type:"file"}))):void 0,Wt=(0,C.K)("fieldset",{class:te.metadataFieldset,key:"size"},(0,C.K)("label",null,(0,ue.v7)(this.messagesUnits,mt??0))),Gt=(0,C.K)("fieldset",{class:te.metadataFieldset,key:"content-type"},(0,C.K)("label",null,Qe)),li=null!=Ct?(0,C.K)("a",{class:te.itemLink,href:Ct,rel:"noreferrer",target:"_blank"},this._renderImageMask(A,400),(0,C.K)("div",{class:te.itemLinkOverlay},(0,C.K)("span",{class:te.itemLinkOverlayIcon},(0,C.K)("calcite-icon",{icon:"launch"})))):this._renderImageMask(A,400),oi=(0,C.K)("form",{afterCreate:Z.cA,afterRemoved:Z.N_,bind:this,"data-node-ref":"_updateAttachmentForm",onsubmit:rt=>this._submitUpdateAttachment(rt,A)},(0,C.K)("div",{class:te.metadata},Wt,Gt),Zt,(0,C.K)("div",{class:te.actions},It,Ft,vt));return(0,C.K)("div",{class:te.formNode,key:"edit-form-container"},li,oi)}_renderImageMask(A,D){return A?"file"in A?this._renderGenericImageMask(A.file.name,A.file.type):this._renderImageMaskForAttachment(A,D):null}_renderGenericImageMask(A,D){const{supportsResizeAttachments:le}=this.viewModel,Ie=function q(A){const D=(0,G.s)("esri/themes/base/images/files/");return A?"text/plain"===A?`${D}text-32.svg`:"application/pdf"===A?`${D}pdf-32.svg`:"text/csv"===A?`${D}csv-32.svg`:"application/gpx+xml"===A?`${D}gpx-32.svg`:"application/x-dwf"===A?`${D}cad-32.svg`:"application/postscript"===A||"application/json"===A||"text/xml"===A||"model/vrml"===A?`${D}code-32.svg`:"application/x-zip-compressed"===A||"application/x-7z-compressed"===A||"application/x-gzip"===A||"application/x-tar"===A||"application/x-gtar"===A||"application/x-bzip2"===A||"application/gzip"===A||"application/x-compress"===A||"application/x-apple-diskimage"===A||"application/x-rar-compressed"===A||"application/zip"===A?`${D}zip-32.svg`:A.includes("image/")?`${D}image-32.svg`:A.includes("audio/")?`${D}sound-32.svg`:A.includes("video/")?`${D}video-32.svg`:A.includes("msexcel")||A.includes("ms-excel")||A.includes("spreadsheetml")?`${D}excel-32.svg`:A.includes("msword")||A.includes("ms-word")||A.includes("wordprocessingml")?`${D}word-32.svg`:A.includes("powerpoint")||A.includes("presentationml")?`${D}report-32.svg`:`${D}generic-32.svg`:`${D}generic-32.svg`}(D),Be={[te.itemImageResizable]:le};return(0,C.K)("div",{class:this.classes(te.itemMaskIcon,te.itemMask),key:Ie},(0,C.K)("img",{alt:A,class:this.classes(Be,te.itemImage),src:Ie,title:A}))}_renderImageMaskForAttachment(A,D){const{supportsResizeAttachments:le}=this.viewModel;if(!A)return null;const{contentType:Ie,name:Be,url:Oe}=A;if(!le||!oe(Ie))return this._renderGenericImageMask(Be,Ie);const $e=this._getCSSTransform(A),Qe=$e?{transform:$e,"image-orientation":"none"}:{},ot=`${Oe}${Oe?.includes("?")?"&":"?"}w=${D}`,mt={[te.itemImageResizable]:le};return(0,C.K)("div",{class:this.classes(te.itemMask),key:ot},(0,C.K)("img",{alt:Be,class:this.classes(mt,te.itemImage),src:ot,styles:Qe,title:Be}))}_renderFile(A){const{file:D}=A;return(0,C.K)("li",{class:te.item,key:D},(0,C.K)("button",{"aria-label":this.messages.attachmentDetails,bind:this,class:te.itemButton,key:"details-button",onclick:()=>this._startEditFile(A),title:this.messages.attachmentDetails,type:"button"},this._renderImageMask(A),(0,C.K)("label",{class:te.itemLabel},(0,C.K)("span",{class:te.itemFilename},D.name||this.messages.noTitle),(0,C.K)("span",{"aria-hidden":"true",class:this.classes(te.itemChevronIcon,(0,Z.V8)(this.container)?B.T.left:B.T.right)}))))}_renderAttachmentInfo({attachmentInfo:A,displayType:D}){const{viewModel:le,effectiveDisplayType:Ie}=this,{capabilities:Be,supportsResizeAttachments:Oe}=le,{contentType:$e,name:Qe,url:ot}=A,mt=this._renderImageMask(A,"list"===D?48:400),Ct=Be.editing?(0,C.K)("span",{"aria-hidden":"true",class:this.classes(te.itemChevronIcon,(0,Z.V8)(this.container)?B.T.left:B.T.right)}):null,It=[mt,"preview"===Ie&&Oe&&oe($e)?null:(0,C.K)("label",{class:te.itemLabel},(0,C.K)("span",{class:te.itemFilename},Qe||this.messages.noTitle),Ct)],vt=Be.editing?(0,C.K)("button",{"aria-label":this.messages.attachmentDetails,bind:this,class:te.itemButton,"data-attachment-info-id":A.id,key:"details-button",onclick:()=>this._startEditAttachment(A),title:this.messages.attachmentDetails,type:"button"},It):(0,C.K)("a",{class:te.itemButton,href:ot??void 0,key:"details-link",rel:"noreferrer",target:"_blank"},It);return(0,C.K)("li",{class:te.item,key:A},vt)}_renderAttachmentContainer(){const{effectiveDisplayType:A,viewModel:D,visibleElements:le}=this,{attachmentInfos:Ie,capabilities:Be,fileInfos:Oe}=D,$e=!!Ie?.length,Qe=!!Oe?.length,ot={[te.containerList]:"preview"!==A,[te.containerPreview]:"preview"===A},mt=Be.editing&&Be.operations?.add&&le.addButton?(0,C.K)("button",{bind:this,class:this.classes(R.D.button,R.D.buttonTertiary,te.addAttachmentButton),onclick:()=>this._startAddAttachment(),type:"button"},(0,C.K)("span",{"aria-hidden":"true",class:this.classes(te.itemAddIcon,B.T.plus)}),this.messages.add):void 0,Ct=$e?(0,C.K)("ul",{class:te.items,key:"attachments-list"},Ie.toArray().map(Ft=>this._renderAttachmentInfo({attachmentInfo:Ft,displayType:A}))):void 0,It=Qe?(0,C.K)("ul",{class:te.items,key:"file-list"},Oe.toArray().map(Ft=>this._renderFile(Ft))):void 0,vt=Qe||$e?void 0:(0,C.K)("div",{class:R.D.empty},this.messages.noAttachments);return(0,C.K)("div",{class:this.classes(te.container,ot),key:"attachments-container"},Ct,It,vt,mt)}_modeChanged(){this._set("error",null),this._set("selectedFile",null)}_handleFileInputChange(A){const D=A.target,le=D.files?.item(0);this._set("selectedFile",le)}_submitDeleteAttachment(A,D){A.preventDefault(),D&&("file"in D?this.deleteFile(D.file):D&&this.deleteAttachment(D))}_submitAddAttachment(A){A.preventDefault(),this.viewModel.filesEnabled?this.addFile():this.addAttachment()}_submitUpdateAttachment(A,D){A.preventDefault(),D&&"file"in D?this.updateFile():this.updateAttachment()}_startEditAttachment(A){const{viewModel:D}=this;D.activeFileInfo=null,D.activeAttachmentInfo=A,D.mode="edit"}_startEditFile(A){const{viewModel:D}=this;D.activeAttachmentInfo=null,D.activeFileInfo=A,D.mode="edit"}_startAddAttachment(){this.viewModel.mode="add"}_cancelForm(A){A.preventDefault(),this.viewModel.mode="view"}_getCSSTransform(A){const{orientationInfo:D}=A;return!this._supportsImageOrientation&&D?[D.rotation?`rotate(${D.rotation}deg)`:"",D.mirrored?"scaleX(-1)":""].join(" "):""}};(0,E._)([(0,k.MZ)()],re.prototype,"capabilities",null),(0,E._)([(0,k.MZ)()],re.prototype,"displayType",void 0),(0,E._)([(0,k.MZ)({readOnly:!0})],re.prototype,"effectiveDisplayType",null),(0,E._)([(0,k.MZ)()],re.prototype,"graphic",null),(0,E._)([(0,k.MZ)()],re.prototype,"icon",null),(0,E._)([(0,k.MZ)()],re.prototype,"label",null),(0,E._)([(0,k.MZ)(),(0,Q.G)("esri/widgets/Attachments/t9n/Attachments")],re.prototype,"messages",void 0),(0,E._)([(0,k.MZ)(),(0,Q.G)("esri/core/t9n/Units")],re.prototype,"messagesUnits",void 0),(0,E._)([(0,k.MZ)({readOnly:!0})],re.prototype,"selectedFile",void 0),(0,E._)([(0,k.MZ)({readOnly:!0})],re.prototype,"submitting",void 0),(0,E._)([(0,k.MZ)({readOnly:!0})],re.prototype,"error",void 0),(0,E._)([(0,k.MZ)({type:ge.A})],re.prototype,"viewModel",void 0),(0,E._)([(0,k.MZ)()],re.prototype,"visibleElements",void 0),(0,E._)([(0,ye.w)("visibleElements")],re.prototype,"castVisibleElements",null),re=(0,E._)([(0,Pe.$)("esri.widgets.Attachments")],re);const ce=re;var de=_(47252),Le=_(53158);const Ee="esri-feature-element-info",ve={base:Ee,title:`${Ee}__title`,description:`${Ee}__description`};let Re=class extends ne.A{constructor(A,D){super(A,D),this.description=null,this.headingLevel=2,this.title=null}render(){return(0,C.K)("div",{class:ve.base},this._renderTitle(),this._renderDescription())}_renderTitle(){const{title:A}=this;return A?(0,C.K)(Le.D,{class:ve.title,innerHTML:A,level:this.headingLevel}):null}_renderDescription(){const{description:A}=this;return A?(0,C.K)("div",{class:ve.description,innerHTML:A,key:"description"}):null}};(0,E._)([(0,k.MZ)()],Re.prototype,"description",void 0),(0,E._)([(0,k.MZ)()],Re.prototype,"headingLevel",void 0),(0,E._)([(0,k.MZ)()],Re.prototype,"title",void 0),Re=(0,E._)([(0,Pe.$)("esri.widgets.Feature.support.FeatureElementInfo")],Re);const Ve=Re;let ze=class extends ne.A{constructor(A,D){super(A,D),this._featureElementInfo=null,this.attachmentsWidget=new ce,this.headingLevel=2,this.viewModel=new de.A}initialize(){this._featureElementInfo=new Ve,this.addHandles([(0,ae.wB)(()=>[this.viewModel?.description,this.viewModel?.title,this.headingLevel],()=>this._setupFeatureElementInfo(),ae.Vh),(0,ae.wB)(()=>this.viewModel,A=>this.attachmentsWidget.viewModel=A,ae.Vh)])}destroy(){this.attachmentsWidget.viewModel=null,this.attachmentsWidget.destroy(),this._featureElementInfo?.destroy()}get description(){return this.viewModel.description}set description(A){this.viewModel.description=A}get displayType(){return this.attachmentsWidget.displayType}set displayType(A){this.attachmentsWidget.displayType=A}get graphic(){return this.viewModel.graphic}set graphic(A){this.viewModel.graphic=A}get title(){return this.viewModel.title}set title(A){this.viewModel.title=A}render(){const{attachmentsWidget:A}=this;return(0,C.K)("div",{class:"esri-feature-attachments"},this._featureElementInfo?.render(),A?.render())}_setupFeatureElementInfo(){const{description:A,title:D,headingLevel:le}=this;this._featureElementInfo?.set({description:A,title:D,headingLevel:le})}};(0,E._)([(0,k.MZ)({readOnly:!0})],ze.prototype,"attachmentsWidget",void 0),(0,E._)([(0,k.MZ)()],ze.prototype,"description",null),(0,E._)([(0,k.MZ)()],ze.prototype,"displayType",null),(0,E._)([(0,k.MZ)()],ze.prototype,"graphic",null),(0,E._)([(0,k.MZ)()],ze.prototype,"headingLevel",void 0),(0,E._)([(0,k.MZ)()],ze.prototype,"title",null),(0,E._)([(0,k.MZ)({type:de.A})],ze.prototype,"viewModel",void 0),ze=(0,E._)([(0,Pe.$)("esri.widgets.Feature.FeatureAttachments")],ze);const Xe=ze;var ke=_(45806),_t=_(93958),J=_(44182);const K="esri-feature-content",X={base:K,loaderContainer:`${K}__loader-container`,loader:`${K}__loader`};let se=class extends ne.A{constructor(A,D){super(A,D),this.viewModel=null,this._addTargetToAnchors=le=>{Array.from(le.querySelectorAll("a")).forEach(Ie=>{(0,_t.shouldOpenInNewTab)(Ie.href)&&!Ie.hasAttribute("target")&&Ie.setAttribute("target","_blank")})}}get creator(){return this.viewModel?.creator}set creator(A){this.viewModel&&(this.viewModel.creator=A)}get graphic(){return this.viewModel?.graphic}set graphic(A){this.viewModel&&(this.viewModel.graphic=A)}render(){const A=this.viewModel?.state;return(0,C.K)("div",{class:X.base},"loading"===A?this._renderLoading():this._renderCreated())}_renderLoading(){return(0,C.K)("div",{class:X.loaderContainer,key:"loader"},(0,C.K)("div",{class:X.loader}))}_renderCreated(){const A=this.viewModel?.created;return A?A instanceof HTMLElement?(0,C.K)("div",{afterCreate:this._attachToNode,bind:A,key:A}):(0,J.p4)(A)?(0,C.K)("div",{key:A},!A.destroyed&&A.render()):(0,C.K)("div",{afterCreate:this._addTargetToAnchors,innerHTML:A,key:A}):null}_attachToNode(A){A.appendChild(this)}};(0,E._)([(0,k.MZ)()],se.prototype,"creator",null),(0,E._)([(0,k.MZ)()],se.prototype,"graphic",null),(0,E._)([(0,k.MZ)({type:ke.A})],se.prototype,"viewModel",void 0),se=(0,E._)([(0,Pe.$)("esri.widgets.Feature.FeatureContent")],se);const xe=se;var Y=_(68878),ee=_(1119);const fe=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}],Me="esri-feature-fields",S={base:Me,fieldHeader:`${Me}__field-header`,fieldData:`${Me}__field-data`,fieldDataDate:`${Me}__field-data--date`};let he=class extends ne.A{constructor(A,D){super(A,D),this._featureElementInfo=null,this.viewModel=new Y.A,this.messages=null,this.messagesURIUtils=null}initialize(){this._featureElementInfo=new Ve,this.addHandles((0,ae.wB)(()=>[this.viewModel?.description,this.viewModel?.title],()=>this._setupFeatureElementInfo(),ae.Vh))}destroy(){this._featureElementInfo?.destroy()}get attributes(){return this.viewModel.attributes}set attributes(A){this.viewModel.attributes=A}get description(){return this.viewModel.description}set description(A){this.viewModel.description=A}get expressionInfos(){return this.viewModel.expressionInfos}set expressionInfos(A){this.viewModel.expressionInfos=A}get fieldInfos(){return this.viewModel.fieldInfos}set fieldInfos(A){this.viewModel.fieldInfos=A}get title(){return this.viewModel.title}set title(A){this.viewModel.title=A}render(){return(0,C.K)("div",{class:S.base},this._featureElementInfo?.render(),this._renderFields())}_renderFieldInfo(A,D){const{attributes:le}=this.viewModel,Ie=A.fieldName||"",Be=A.label||Ie,Oe=le?null==le[Ie]?"":le[Ie]:"",$e=!!A.format?.dateFormat,Qe="number"!=typeof Oe||$e?function L(A,D){if("string"!=typeof D||!D)return D;const le=fe.find(ot=>ot.pattern.test(D));if(!le)return D;const Ie=D.match(le.pattern),Be=Ie?.[2],Oe=(0,ee.HC)((0,ee.HC)(le.label,{messages:A,hierPart:Be}),{appName:le.appName});return D.replace(le.pattern,`<a${le.target?` target="${le.target}"`:""} href="$1"${"_blank"===le.target?' rel="noreferrer"':""}>${Oe}</a>`)}(this.messagesURIUtils,Oe):this._forceLTR(Oe),ot={[S.fieldDataDate]:$e};return(0,C.K)("tr",{key:`fields-element-info-row-${Ie}-${D}`},(0,C.K)("th",{class:S.fieldHeader,innerHTML:Be,key:`fields-element-info-row-header-${Ie}-${D}`}),(0,C.K)("td",{class:this.classes(S.fieldData,ot),innerHTML:Qe,key:`fields-element-info-row-data-${Ie}-${D}`}))}_renderFields(){const{formattedFieldInfos:A}=this.viewModel;return A?.length?(0,C.K)("table",{class:R.D.table,summary:this.messages.fieldsSummary},(0,C.K)("tbody",null,A.map((D,le)=>this._renderFieldInfo(D,le)))):null}_setupFeatureElementInfo(){const{description:A,title:D}=this;this._featureElementInfo?.set({description:A,title:D})}_forceLTR(A){return`&lrm;${A}`}};(0,E._)([(0,k.MZ)()],he.prototype,"attributes",null),(0,E._)([(0,k.MZ)()],he.prototype,"description",null),(0,E._)([(0,k.MZ)()],he.prototype,"expressionInfos",null),(0,E._)([(0,k.MZ)()],he.prototype,"fieldInfos",null),(0,E._)([(0,k.MZ)()],he.prototype,"title",null),(0,E._)([(0,k.MZ)({type:Y.A,nonNullable:!0})],he.prototype,"viewModel",void 0),(0,E._)([(0,k.MZ)(),(0,Q.G)("esri/widgets/Feature/t9n/Feature")],he.prototype,"messages",void 0),(0,E._)([(0,k.MZ)(),(0,Q.G)("esri/widgets/support/t9n/uriUtils")],he.prototype,"messagesURIUtils",void 0),he=(0,E._)([(0,Pe.$)("esri.widgets.Feature.FeatureFields")],he);const Ce=he;var Se=_(76157),Te=_(89952),Ke=_(60797),qe=_(48266),ht=(_(86300),_(91515),_(5236),_(43039),_(83393)),Ot=_(36634),Ut=_(3114);function Rt(A,D,le){return fi.apply(this,arguments)}function fi(){return(fi=(0,z.A)(function*(A,D,le){(0,Ke.tE)(A,D,()=>[]).push(...le)})).apply(this,arguments)}function yi(){return(yi=(0,z.A)(function*(A){const D=new Map;if(!A)return D;if("visualVariables"in A&&A.visualVariables)for(const le of A.visualVariables)if(Gi(le)){const Ie=((yield(0,Ot.getRampStops)(le))??[]).map(Be=>Be.color);yield Rt(D,le.field||le.valueExpression,Ie)}if("heatmap"===A.type){const le=function wt(A){if(!A.colorStops)return[];const D=[...A.colorStops].filter(Ie=>Ie.color?.a>0);let le=D.length-1;if(D[0]){const Ie=D[le];Ie&&1!==Ie.ratio&&(D.push(new Ut.A({ratio:1,color:Ie.color})),le++)}return D.map((Ie,Be)=>{let Oe="";return 0===Be?Oe=A.legendOptions?.minLabel||"low":Be===le&&(Oe=A.legendOptions?.maxLabel||"high"),{color:Ie.color,label:Oe,ratio:Ie.ratio}}).reverse()}(A).map(Ie=>Ie.color);yield Rt(D,A.field||A.valueExpression,le)}else if("pie-chart"===A.type){for(const le of A.attributes)yield Rt(D,le.field||le.valueExpression,[le.color]);yield Rt(D,"default",[A?.othersCategory?.color,(0,ht.Sx)(A.backgroundFillSymbol,null)])}else if("dot-density"===A.type){for(const le of A.attributes)yield Rt(D,le.field||le.valueExpression,[le.color]);yield Rt(D,"default",[A.backgroundColor])}else if("unique-value"===A.type)if("predominance"===A.authoringInfo?.type)for(const le of A.uniqueValueInfos??[])yield Rt(D,le.value.toString(),[(0,ht.Sx)(le.symbol,null)]);else{const le=(A.uniqueValueInfos??[]).map(Qe=>(0,ht.Sx)(Qe.symbol,null)),{field:Ie,field2:Be,field3:Oe,valueExpression:$e}=A;(Ie||$e)&&(yield Rt(D,Ie||$e,le)),Be&&(yield Rt(D,Be,le)),Oe&&(yield Rt(D,Oe,le))}else if("class-breaks"===A.type){const le=A.classBreakInfos.map(Oe=>(0,ht.Sx)(Oe.symbol,null)),{field:Ie,valueExpression:Be}=A;yield Rt(D,Ie??Be,le)}else"simple"===A.type&&(yield Rt(D,"default",[(0,ht.Sx)(A.symbol,null)]));return"defaultSymbol"in A&&A.defaultSymbol&&(yield Rt(D,"default",[(0,ht.Sx)(A.defaultSymbol,null)])),D.forEach((le,Ie)=>{const Be=(0,Te.Am)(le.filter(Boolean),(Oe,$e)=>JSON.stringify(Oe)===JSON.stringify($e));D.set(Ie,Be)}),D})).apply(this,arguments)}function Gi(A){return"color"===A.type}(0,qe.J2)("short-date");var ji=_(55060),Ci=_(67722),wi=_(46186);const Bt="esri-feature-media",qt={base:Bt,mediaContainer:`${Bt}__container`,mediaItemContainer:`${Bt}__item-container`,mediaItem:`${Bt}__item`,mediaItemText:`${Bt}__item-text`,mediaItemTitle:`${Bt}__item-title`,mediaItemCaption:`${Bt}__item-caption`,mediaNavigation:`${Bt}__item-navigation`,mediaPagination:`${Bt}__pagination`,mediaPaginationText:`${Bt}__pagination-text`,mediaPrevious:`${Bt}__previous`,mediaPreviousIconLTR:`${Bt}__previous-icon`,mediaPreviousIconRTL:`${Bt}__previous-icon--rtl`,mediaNext:`${Bt}__next`,mediaNextIconLTR:`${Bt}__next-icon`,mediaNextIconRTL:`${Bt}__next-icon--rtl`,mediaChart:`${Bt}__chart`,mediaPaginationButton:`${Bt}__pagination-button`,mediaPaginationIcon:`${Bt}__pagination-icon`,mediaChartRendered:`${Bt}__chart--rendered`},Ai="category",Fi="value";let Kt=class extends ne.A{constructor(A,D){var le;super(A,D),le=this,this._refreshTimer=null,this._refreshIntervalInfo=null,this._featureElementInfo=null,this._chartRootMap=new WeakMap,this.viewModel=new ji.A,this.messages=null,this._disposeChart=Ie=>{this._chartRootMap.get(Ie)?.dispose(),this._chartRootMap.delete(Ie)},this._createChart=function(){var Ie=(0,z.A)(function*(Be){const{destroyed:Oe,viewModel:$e}=le;if(Oe||!$e||!Be)return;const{createRoot:Qe}=yield Promise.all([_.e(3568),_.e(7551),_.e(2076),_.e(959)]).then(_.bind(_,60959)),ot=yield Qe(Be);le._chartRootMap.set(Be,ot),le._renderChart({mediaInfo:$e.activeMediaInfo,root:ot})});return function(Be){return Ie.apply(this,arguments)}}()}initialize(){this._featureElementInfo=new Ve,this.addHandles([(0,ae.wB)(()=>[this.viewModel?.activeMediaInfo,this.viewModel?.activeMediaInfoIndex],()=>this._setupMediaRefreshTimer(),ae.Vh),(0,ae.wB)(()=>[this.viewModel?.description,this.viewModel?.title],()=>this._setupFeatureElementInfo(),ae.Vh)])}loadDependencies(){return(0,U.W)({icon:()=>_.e(1951).then(_.bind(_,81951))})}destroy(){this._clearMediaRefreshTimer(),this._featureElementInfo?.destroy()}get attributes(){return this.viewModel.attributes}set attributes(A){this.viewModel.attributes=A}get activeMediaInfoIndex(){return this.viewModel.activeMediaInfoIndex}set activeMediaInfoIndex(A){this.viewModel.activeMediaInfoIndex=A}get description(){return this.viewModel.description}set description(A){this.viewModel.description=A}get fieldInfoMap(){return this.viewModel.fieldInfoMap}set fieldInfoMap(A){this.viewModel.fieldInfoMap=A}get layer(){return this.viewModel.layer}set layer(A){this.viewModel.layer=A}get mediaInfos(){return this.viewModel.mediaInfos}set mediaInfos(A){this.viewModel.mediaInfos=A}get popupTemplate(){return this.viewModel.popupTemplate}set popupTemplate(A){this.viewModel.popupTemplate=A}get relatedInfos(){return this.viewModel.relatedInfos}set relatedInfos(A){this.viewModel.relatedInfos=A}get title(){return this.viewModel.title}set title(A){this.viewModel.title=A}render(){return(0,C.K)("div",{bind:this,class:qt.base,onkeyup:this._handleMediaKeyup},this._featureElementInfo?.render(),this._renderMedia())}_renderMedia(){const{formattedMediaInfoCount:A,activeMediaInfoIndex:D}=this.viewModel,le=this._renderMediaText();return A?(0,C.K)("div",{class:qt.mediaContainer,key:"media-element-container"},this._renderMediaInfo(),(0,C.K)("div",{class:qt.mediaNavigation},le,A>1?(0,C.K)("div",{class:qt.mediaPagination},this._renderMediaPageButton("previous"),(0,C.K)("span",{class:qt.mediaPaginationText},(0,wi.V)(this.messages.pageText,{index:D+1,total:A})),this._renderMediaPageButton("next")):null)):null}_renderMediaText(){const{activeMediaInfo:A}=this.viewModel;if(!A)return null;const D=A&&A.title?(0,C.K)("div",{class:qt.mediaItemTitle,innerHTML:A.title,key:"media-title"}):null,le=A&&A.caption?(0,C.K)("div",{class:qt.mediaItemCaption,innerHTML:A.caption,key:"media-caption"}):null;return D||le?(0,C.K)("div",{class:qt.mediaItemText,key:"media-text"},D,le):null}_renderImageMediaInfo(A){if(!A.value)return null;const{_refreshIntervalInfo:D}=this,{activeMediaInfoIndex:le,formattedMediaInfoCount:Ie}=this.viewModel,{value:Be,refreshInterval:Oe,altText:$e,title:Qe,type:ot}=A,{sourceURL:mt,linkURL:Ct}=Be,It=(0,_t.shouldOpenInNewTab)(Ct??void 0)?"_blank":"_self",vt="_blank"===It?"noreferrer":"",Ft=Oe?D:null,Gt=(0,C.K)("img",{alt:$e||Qe,key:`media-${ot}-${le}-${Ie}-${Ft?Ft.timestamp:0}`,src:(Ft?Ft.sourceURL:mt)??void 0});return(Ct?(0,C.K)("a",{href:Ct,rel:vt,target:It,title:Qe},Gt):null)??Gt}_renderChartMediaInfo(A){const{activeMediaInfoIndex:D,formattedMediaInfoCount:le}=this.viewModel;return(0,C.K)("div",{afterCreate:this._createChart,afterRemoved:this._disposeChart,bind:this,class:qt.mediaChart,key:`media-${A.type}-${D}-${le}`})}_renderMediaInfoType(){const{activeMediaInfo:A}=this.viewModel;return A?"image"===A.type?this._renderImageMediaInfo(A):A.type.includes("chart")?this._renderChartMediaInfo(A):null:null}_renderMediaInfo(){const{activeMediaInfo:A}=this.viewModel;return A?(0,C.K)("div",{class:qt.mediaItemContainer,key:"media-container"},(0,C.K)("div",{class:qt.mediaItem,key:"media-item-container"},this._renderMediaInfoType())):null}_renderMediaPageButton(A){if(this.viewModel.formattedMediaInfoCount<2)return null;const D="previous"===A,le=D?this.messages.previous:this.messages.next;return(0,C.K)("button",{"aria-label":le,bind:this,class:qt.mediaPaginationButton,key:D?"media-previous":"media-next",onclick:D?this._previous:this._next,tabIndex:0,title:le,type:"button"},(0,C.K)("calcite-icon",{class:qt.mediaPaginationIcon,icon:D?"chevron-left":"chevron-right",scale:"s"}))}_setupFeatureElementInfo(){const{description:A,title:D}=this;this._featureElementInfo?.set({description:A,title:D})}_next(){this.viewModel.next()}_previous(){this.viewModel.previous()}_getRenderer(){if(!this.viewModel)return;const{isAggregate:A,layer:D}=this.viewModel;return A&&D?.featureReduction&&"renderer"in D.featureReduction?D.featureReduction.renderer:D?.renderer}_getSeriesColors(A){return(0,z.A)(function*(){const{colorAm5:D}=yield Promise.all([_.e(3568),_.e(2076),_.e(4674)]).then(_.bind(_,14674)),le=new Map;return A.forEach(Ie=>{Ie.color&&le.set(Ie,D(Ie.color.toCss(!0)))}),le})()}_getRendererColors(){var A=this;return(0,z.A)(function*(){const{colorAm5:D}=yield Promise.all([_.e(3568),_.e(2076),_.e(4674)]).then(_.bind(_,14674)),le=new Map,Ie=A._getRenderer();if(!Ie)return le;const Oe=yield function $t(A){return yi.apply(this,arguments)}(Ie);return Oe.delete("default"),Array.from(Oe.values()).every($e=>1===$e?.length)&&Array.from(Oe.keys()).forEach($e=>{const Qe=Oe.get($e)?.[0]?.toCss(!0);Qe&&le.set($e,D(Qe))}),le})()}_handleMediaKeyup(A){const{key:D}=A;"ArrowLeft"===D&&(A.stopPropagation(),this.viewModel.previous()),"ArrowRight"===D&&(A.stopPropagation(),this.viewModel.next())}_canAnimateChart(){return!!this.viewModel&&!!this.viewModel.abilities.chartAnimation&&!(0,Se.O)()}_getChartAnimationMS(){return this._canAnimateChart()?250:0}_getChartSeriesAnimationMS(){return this._canAnimateChart()?500:0}_renderChart(A){var D=this;return(0,z.A)(function*(){const{root:le,mediaInfo:Ie}=A,{value:Be,type:Oe}=Ie,{ResponsiveThemeAm5:$e,DarkThemeAm5:Qe,AnimatedThemeAm5:ot,ColorSetAm5:mt,ThemeAm5:Ct,esriChartColorSet:It}=yield Promise.all([_.e(3568),_.e(2076),_.e(4674)]).then(_.bind(_,14674)),vt=Ct.new(le);vt.rule("ColorSet").set("colors",It),vt.rule("ColorSet").set("reuse",!0);const Ft=[$e.new(le),vt];(0,Ci.g4)()&&Ft.push(Qe.new(le)),D._canAnimateChart()&&Ft.push(ot.new(le)),le.setThemes(Ft);const Zt=yield D._getRendererColors(),Wt=yield D._getSeriesColors(Be.series),Gt=mt.new(le,{}),li=Wt.get(Be.series[0]),oi=li?{lineSettings:{stroke:li}}:void 0,rt=Be.series.map((mi,ui)=>{const Ei=Wt.get(mi)||Zt.get(mi.fieldName)||Gt.getIndex(ui);return{[Ai]:mi.tooltip,[Fi]:mi.value,columnSettings:{fill:Ei,stroke:Ei},...oi}}).filter(mi=>"pie-chart"!==Oe||null!=mi.value&&mi.value>0);"pie-chart"===Oe?D._createPieChart(A,rt):D._createXYChart(A,rt)})()}_getDirection(){return(0,Z.V8)(this.container)?"rtl":"ltr"}_customizeChartTooltip(A,D="horizontal"){var le=this;return(0,z.A)(function*(){const{colorAm5:Ie}=yield Promise.all([_.e(3568),_.e(2076),_.e(4674)]).then(_.bind(_,14674));A.setAll({pointerOrientation:D}),A.get("background")?.setAll({stroke:Ie("rgba(50, 50, 50, 1)")}),A.label.setAll({direction:le._getDirection(),oversizedBehavior:"wrap",maxWidth:200})})()}_createPieChart(A,D){var le=this;return(0,z.A)(function*(){const{TooltipAm5:Ie}=yield Promise.all([_.e(3568),_.e(2076),_.e(4674)]).then(_.bind(_,14674)),{PieChartAm5:Be,PieSeriesAm5:Oe}=yield Promise.all([_.e(3568),_.e(7551),_.e(7199),_.e(2644)]).then(_.bind(_,22644)),{mediaInfo:$e,root:Qe}=A,{title:ot}=$e,It=Qe.container.children.push(Be.new(Qe,{ariaLabel:$e?.altText||$e?.title||"",focusable:!0,paddingBottom:5,paddingTop:5,paddingLeft:5,paddingRight:5})),vt="{category}: {valuePercentTotal.formatNumber('0.00')}%\n ({value})",Ft=Ie.new(Qe,{labelText:vt}),Zt=It.series.push(Oe.new(Qe,{name:ot,valueField:Fi,categoryField:Ai,tooltip:Ft}));Zt.ticks.template.set("forceHidden",!0),Zt.labels.template.set("forceHidden",!0),Zt.slices.template.states.create("active",{shiftRadius:5}),le._customizeChartTooltip(Ft),Zt.slices.template.setAll({ariaLabel:vt,focusable:!0,templateField:"columnSettings"}),Zt.data.setAll(D),Zt.appear(le._getChartSeriesAnimationMS()),It.appear(le._getChartAnimationMS()),It.root.dom.classList.toggle(qt.mediaChartRendered,!0)})()}_getMinSeriesValue(A){let D=0;return A.forEach(le=>D=Math.min(le.value,D)),D}_createColumnChart(A,D,le){var Ie=this;return(0,z.A)(function*(){const{TooltipAm5:Be,ScrollbarAm5:Oe}=yield Promise.all([_.e(3568),_.e(2076),_.e(4674)]).then(_.bind(_,14674)),{CategoryAxisAm5:$e,AxisRendererXAm5:Qe,ValueAxisAm5:ot,AxisRendererYAm5:mt,ColumnSeriesAm5:Ct}=yield Promise.all([_.e(3568),_.e(7551),_.e(7199),_.e(2076),_.e(9064)]).then(_.bind(_,29064)),{mediaInfo:It,root:vt}=D,{value:Ft,title:Zt}=It;A.setAll({wheelX:"panX",wheelY:"zoomX"});const Wt=A.xAxes.push($e.new(vt,{renderer:Qe.new(vt,{inversed:(0,Z.V8)(Ie.container)}),categoryField:Ai}));Wt.get("renderer").labels.template.setAll({forceHidden:!0});const Gt=A.yAxes.push(ot.new(vt,{renderer:mt.new(vt,{inside:!1}),min:Ie._getMinSeriesValue(Ft.series)}));Gt.get("renderer").labels.template.setAll({direction:Ie._getDirection()});const li="{categoryX}",oi=Be.new(vt,{labelText:li}),rt=A.series.push(Ct.new(vt,{name:Zt,xAxis:Wt,yAxis:Gt,valueYField:Fi,categoryXField:Ai,tooltip:oi}));Ie._customizeChartTooltip(oi),rt.columns.template.setAll({ariaLabel:li,focusable:!0,templateField:"columnSettings"}),Ft.series.length>15&&A.set("scrollbarX",Oe.new(vt,{orientation:"horizontal"})),Wt.data.setAll(le),rt.data.setAll(le),rt.appear(Ie._getChartSeriesAnimationMS()),A.appear(Ie._getChartAnimationMS())})()}_createBarChart(A,D,le){var Ie=this;return(0,z.A)(function*(){const{TooltipAm5:Be,ScrollbarAm5:Oe}=yield Promise.all([_.e(3568),_.e(2076),_.e(4674)]).then(_.bind(_,14674)),{CategoryAxisAm5:$e,AxisRendererXAm5:Qe,ValueAxisAm5:ot,AxisRendererYAm5:mt,ColumnSeriesAm5:Ct}=yield Promise.all([_.e(3568),_.e(7551),_.e(7199),_.e(2076),_.e(9064)]).then(_.bind(_,29064)),{mediaInfo:It,root:vt}=D,{value:Ft,title:Zt}=It;A.setAll({wheelX:"panY",wheelY:"zoomY"});const Wt=A.yAxes.push($e.new(vt,{renderer:mt.new(vt,{inversed:!0}),categoryField:Ai}));Wt.get("renderer").labels.template.setAll({forceHidden:!0});const Gt=A.xAxes.push(ot.new(vt,{renderer:Qe.new(vt,{inside:!1,inversed:(0,Z.V8)(Ie.container)}),min:Ie._getMinSeriesValue(Ft.series)}));Gt.get("renderer").labels.template.setAll({direction:Ie._getDirection()});const li="{categoryY}",oi=Be.new(vt,{labelText:li}),rt=A.series.push(Ct.new(vt,{name:Zt,xAxis:Gt,yAxis:Wt,valueXField:Fi,categoryYField:Ai,tooltip:oi}));Ie._customizeChartTooltip(oi,"vertical"),rt.columns.template.setAll({ariaLabel:li,focusable:!0,templateField:"columnSettings"}),Ft.series.length>15&&A.set("scrollbarY",Oe.new(vt,{orientation:"vertical"})),Wt.data.setAll(le),rt.data.setAll(le),rt.appear(Ie._getChartSeriesAnimationMS()),A.appear(Ie._getChartAnimationMS())})()}_createLineChart(A,D,le){var Ie=this;return(0,z.A)(function*(){const{TooltipAm5:Be,ScrollbarAm5:Oe}=yield Promise.all([_.e(3568),_.e(2076),_.e(4674)]).then(_.bind(_,14674)),{CategoryAxisAm5:$e,AxisRendererXAm5:Qe,ValueAxisAm5:ot,AxisRendererYAm5:mt,LineSeriesAm5:Ct}=yield Promise.all([_.e(3568),_.e(7551),_.e(7199),_.e(2076),_.e(9064)]).then(_.bind(_,29064)),{root:It,mediaInfo:vt}=D,{value:Ft,title:Zt}=vt;A.setAll({wheelX:"panX",wheelY:"zoomX"});const Wt=A.xAxes.push($e.new(It,{renderer:Qe.new(It,{inversed:(0,Z.V8)(Ie.container)}),categoryField:Ai}));Wt.get("renderer").labels.template.setAll({forceHidden:!0});const Gt=A.yAxes.push(ot.new(It,{renderer:mt.new(It,{inside:!1}),min:Ie._getMinSeriesValue(Ft.series)}));Gt.get("renderer").labels.template.setAll({direction:Ie._getDirection()});const oi=le[0]?.lineSettings?.stroke,rt=Be.new(It,{getFillFromSprite:!oi,labelText:"{categoryX}"});oi&&rt.get("background")?.setAll({fill:oi});const mi=A.series.push(Ct.new(It,{name:Zt,xAxis:Wt,yAxis:Gt,valueYField:Fi,categoryXField:Ai,tooltip:rt}));mi.strokes.template.setAll({templateField:"lineSettings"}),Ie._customizeChartTooltip(rt,"vertical"),Ft.series.length>15&&A.set("scrollbarX",Oe.new(It,{orientation:"horizontal"})),Wt.data.setAll(le),mi.data.setAll(le),mi.appear(Ie._getChartSeriesAnimationMS()),A.appear(Ie._getChartAnimationMS())})()}_createXYChart(A,D){var le=this;return(0,z.A)(function*(){const{XYChartAm5:Ie,XYCursorAm5:Be}=yield Promise.all([_.e(3568),_.e(7551),_.e(7199),_.e(2076),_.e(9064)]).then(_.bind(_,29064)),{root:Oe,mediaInfo:$e}=A,{type:Qe}=$e,mt=Oe.container.children.push(Ie.new(Oe,{ariaLabel:$e?.altText||$e?.title||"",focusable:!0,panX:!0,panY:!0}));mt.set("cursor",Be.new(Oe,{})),"column-chart"===Qe&&(yield le._createColumnChart(mt,A,D)),"bar-chart"===Qe&&(yield le._createBarChart(mt,A,D)),"line-chart"===Qe&&(yield le._createLineChart(mt,A,D)),mt.root.dom.classList.toggle(qt.mediaChartRendered,!0)})()}_clearMediaRefreshTimer(){const{_refreshTimer:A}=this;A&&(clearTimeout(A),this._refreshTimer=null)}_updateMediaInfoTimestamp(A){const D=Date.now();this._refreshIntervalInfo={timestamp:D,sourceURL:A&&this._getImageSource(A,D)}}_setupMediaRefreshTimer(){this._clearMediaRefreshTimer();const{activeMediaInfo:A}=this.viewModel;"image"===A?.type&&A?.refreshInterval>0&&this._setRefreshTimeout(A)}_setRefreshTimeout(A){const{refreshInterval:D,value:le}=A,Ie=6e4*D;this._updateMediaInfoTimestamp(le.sourceURL);const Be=setInterval(()=>{this._updateMediaInfoTimestamp(le.sourceURL)},Ie);this._refreshTimer=Be}_getImageSource(A,D){const le=A.includes("?")?"&":"?",[Ie,Be=""]=A.split("#");return`${Ie}${le}timestamp=${D}${Be?"#":""}${Be}`}};(0,E._)([(0,k.MZ)()],Kt.prototype,"_refreshIntervalInfo",void 0),(0,E._)([(0,k.MZ)()],Kt.prototype,"attributes",null),(0,E._)([(0,k.MZ)()],Kt.prototype,"activeMediaInfoIndex",null),(0,E._)([(0,k.MZ)()],Kt.prototype,"description",null),(0,E._)([(0,k.MZ)()],Kt.prototype,"fieldInfoMap",null),(0,E._)([(0,k.MZ)()],Kt.prototype,"layer",null),(0,E._)([(0,k.MZ)()],Kt.prototype,"mediaInfos",null),(0,E._)([(0,k.MZ)()],Kt.prototype,"popupTemplate",null),(0,E._)([(0,k.MZ)()],Kt.prototype,"relatedInfos",null),(0,E._)([(0,k.MZ)()],Kt.prototype,"title",null),(0,E._)([(0,k.MZ)({type:ji.A})],Kt.prototype,"viewModel",void 0),(0,E._)([(0,k.MZ)(),(0,Q.G)("esri/widgets/Feature/t9n/Feature")],Kt.prototype,"messages",void 0),Kt=(0,E._)([(0,Pe.$)("esri.widgets.Feature.FeatureMedia")],Kt);const pt=Kt;var Wi=_(61222);const xi="esri-feature",ie={base:`${xi}-expression`,loadingSpinnerContainer:`${xi}__loading-container`};let we=class extends ne.A{constructor(A,D){super(A,D),this._contentWidget=null,this.viewModel=new Wi.A}initialize(){this.addHandles((0,ae.wB)(()=>this.viewModel?.contentElementViewModel,()=>this._setupExpressionWidget(),ae.Vh))}loadDependencies(){return(0,U.W)({loader:()=>_.e(5897).then(_.bind(_,45897))})}destroy(){this._destroyContentWidget()}render(){const{state:A}=this.viewModel;return(0,C.K)("div",{class:ie.base},"loading"===A?this._renderLoading():"disabled"===A?null:this._contentWidget?.render())}_renderLoading(){return(0,C.K)("div",{class:ie.loadingSpinnerContainer,key:"loading-container"},(0,C.K)("calcite-loader",{inline:!0,label:""}))}_destroyContentWidget(){const{_contentWidget:A}=this;A&&(A.viewModel=null,A.destroy()),this._contentWidget=null}_setupExpressionWidget(){const{contentElementViewModel:A,contentElement:D}=this.viewModel,le=D?.type;this._destroyContentWidget();const Ie=A?"fields"===le?new Ce({viewModel:A}):"media"===le?new pt({viewModel:A}):"text"===le?new xe({viewModel:A}):null:null;this._contentWidget=Ie,this.scheduleRender()}};(0,E._)([(0,k.MZ)({type:Wi.A})],we.prototype,"viewModel",void 0),we=(0,E._)([(0,Pe.$)("esri.widgets.Feature.FeatureExpression")],we);const De=we;var At,Ge=_(11432),Ye=_(56492),ut=_(84484),gt=_(68479);const dt="esri-feature",Dt=`${dt}-relationship`,Nt={base:Dt,listContainer:`${Dt}__list`,listItem:`${Dt}__list-item`,listItemHidden:`${Dt}__list-item--hidden`,listContainerQuerying:`${Dt}__list--querying`,featureObserver:`${dt}__feature-observer`,stickySpinnerContainer:`${dt}__sticky-loading-container`,loadingSpinnerContainer:`${dt}__loading-container`},ni={title:!0,description:!0};let bt=At=class extends ne.A{constructor(A,D){super(A,D),this._featureElementInfo=null,this._relatedFeatureIntersectionObserverNode=null,this._relatedFeatureIntersectionObserver=new IntersectionObserver(([le])=>{le?.isIntersecting&&this._increaseFeaturePage()},{root:window.document}),this.flowItems=null,this.flowType="feature-relationship",this.headingLevel=2,this.viewModel=new ut.A,this.messages=null,this.messagesCommon=null,this.visibleElements={...ni},this._increaseFeaturePage=()=>{const{state:le,showAllEnabled:Ie,relatedFeatures:Be,featuresPerPage:Oe,featurePage:$e}=this.viewModel;"ready"===le&&Ie&&Be.length>=Oe*$e&&this.viewModel.featurePage++}}initialize(){this._featureElementInfo=new Ve,this.addHandles([(0,ae.wB)(()=>[this.viewModel.description,this.viewModel.title,this.headingLevel],()=>this._setupFeatureElementInfo(),ae.Vh),(0,ae.wB)(()=>[this.viewModel.state,this.viewModel.showAllEnabled,this._relatedFeatureIntersectionObserverNode],()=>this._handleRelatedFeatureObserverChange()),(0,ae.on)(()=>this.viewModel.relatedFeatureViewModels,"change",()=>this._setupRelatedFeatureViewModels())])}loadDependencies(){return(0,U.W)({chip:()=>Promise.all([_.e(1951),_.e(9998)]).then(_.bind(_,99998)),icon:()=>_.e(1951).then(_.bind(_,81951)),list:()=>Promise.all([_.e(1951),_.e(3869),_.e(2076),_.e(6620)]).then(_.bind(_,26620)),"list-item":()=>Promise.all([_.e(1951),_.e(8569),_.e(6126),_.e(2076),_.e(7313)]).then(_.bind(_,10160)),loader:()=>_.e(5897).then(_.bind(_,45897)),notice:()=>Promise.all([_.e(1951),_.e(7520)]).then(_.bind(_,77520))})}destroy(){this._unobserveRelatedFeatureObserver(),this._featureElementInfo=(0,Ge.pR)(this._featureElementInfo)}get displayShowAllButton(){const{showAllEnabled:A,featureCount:D,displayCount:le,state:Ie,allCategoriesCount:Be}=this.viewModel;return!A&&"ready"===Ie&&(!!Be&&(Be>le||0===le)||!!D&&(D>le||0===le))}get displayListItems(){const{relatedFeatureViewModels:A,allCategoriesCount:D}=this.viewModel;return this.displayShowAllButton||!!A.length||!!D}get allItemsDescription(){const{messages:A}=this,{featureCount:D,allCategories:le,allCategoriesCount:Ie}=this.viewModel;return(0,wi.V)(A?.numberRecords,{number:(0,gt.ZV)(le?Ie:D)})}get description(){return this.viewModel.description}set description(A){this.viewModel.description=A}get title(){const{activeCategory:A,title:D}=this.viewModel;return A?.name??D}set title(A){this.viewModel.title=A}castVisibleElements(A){return{...ni,...A}}render(){const{state:A}=this.viewModel;return(0,C.K)("div",{class:this.classes(Nt.base,R.D.widget)},this._featureElementInfo?.render(),"loading"===A?this._renderLoading():"disabled"===A?this._renderRelationshipNotFound():this._renderRelatedFeatures())}_selectCategory(A){var D=this;return(0,z.A)(function*(){const{flowItems:le,featureVisibleElements:Ie,viewModel:Be}=D;le&&(Be.activeCategory=A,Be.showAllEnabled=!0,le.push(new At({flowItems:le,featureVisibleElements:Ie,visibleElements:{title:!1,description:!1},viewModel:Be})))})()}_selectRecord(A){var D=this;return(0,z.A)(function*(){const{flowItems:le,featureVisibleElements:Ie}=D;if(!le)return;A.abilities={relationshipContent:!0};const{default:Be}=yield Promise.resolve().then(_.bind(_,10573));le.push(new Be({flowItems:le,flowType:D.flowType,viewModel:A,visibleElements:Ie}))})()}_showAllRecords(){const{flowItems:A}=this;if(!A)return;const{viewModel:D,featureVisibleElements:le}=this;D.showAllEnabled=!0;const Ie=new At({flowItems:A,featureVisibleElements:le,visibleElements:{title:!1,description:!1},viewModel:D});A.push(Ie)}_renderStickyLoading(){return"querying"===this.viewModel.state?(0,C.K)("div",{class:Nt.stickySpinnerContainer,key:"sticky-loader"},this._renderLoadingIcon()):null}_renderLoadingIcon(){return(0,C.K)("calcite-loader",{inline:!0,label:""})}_renderLoading(){return(0,C.K)("div",{class:Nt.loadingSpinnerContainer,key:"loading-container"},this._renderLoadingIcon())}_renderShowAllIconNode(){return(0,C.K)("calcite-icon",{icon:"list",scale:"s",slot:"content-end"})}_renderChevronIconNode(){const A=(0,Z.V8)(this.container)?"chevron-left":"chevron-right";return(0,C.K)("calcite-icon",{icon:A,scale:"s",slot:"content-end"})}_renderCategory(A){const{count:D,name:le,value:Ie}=A,Be=(0,gt.ZV)(D);return(0,C.K)("calcite-list-item",{class:Nt.listItem,disabled:!D,key:Ie,label:le,onCalciteListItemSelect:()=>this._selectCategory(A)},(0,C.K)("calcite-chip",{label:Be,scale:"s",slot:"content-end"},Be),this._renderChevronIconNode())}_renderRelatedFeature(A){const{itemDescriptionFieldName:D}=this.viewModel,le=A.title;return A.description=D&&A.formattedAttributes?.global[D],(0,C.K)("calcite-list-item",{class:this.classes(Nt.listItem,{[Nt.listItemHidden]:"loading"===A.state}),description:(0,ee._e)(A.description??""),key:A.uid,label:(0,ee._e)(le),onCalciteListItemSelect:()=>this._selectRecord(A)},this._renderChevronIconNode())}_renderShowAllListItem(){return this.displayShowAllButton?(0,C.K)("calcite-list-item",{description:this.allItemsDescription,key:"show-all-item",label:this.messages?.showAll,onCalciteListItemSelect:()=>this._showAllRecords()},this._renderShowAllIconNode()):null}_renderNoRelatedFeaturesMessage(){return(0,C.K)("calcite-notice",{icon:"information",key:"no-related-features-message",kind:"brand",open:!0,scale:"s",width:"full"},(0,C.K)("div",{slot:"message"},this.messages?.noRelatedFeatures))}_renderFeatureObserver(){return(0,C.K)("div",{afterCreate:this._relatedFeatureIntersectionObserverCreated,bind:this,class:Nt.featureObserver,key:"feature-observer"})}_renderList(){const{relatedFeatureViewModels:A,categories:D}=this.viewModel;return(0,C.K)("calcite-list",{displayMode:"flat",label:this.messages?.relatedFeaturesList},D?.map(le=>this._renderCategory(le))??A.toArray().map(le=>this._renderRelatedFeature(le)),this._renderShowAllListItem())}_renderRelatedFeatures(){const{displayListItems:A}=this,{state:D}=this.viewModel;return(0,C.K)("div",{class:this.classes(Nt.listContainer,{[Nt.listContainerQuerying]:"querying"===D}),key:"list-container"},A?this._renderList():"ready"===D?this._renderNoRelatedFeaturesMessage():null,this._renderStickyLoading(),this._renderFeatureObserver())}_renderRelationshipNotFound(){return(0,C.K)("calcite-notice",{icon:"exclamation-mark-triangle",key:"relationship-not-found",kind:"danger",open:!0,scale:"s",width:"full"},(0,C.K)("div",{slot:"message"},this.messages?.relationshipNotFound))}_setupRelatedFeatureViewModels(){const{relatedFeatureViewModels:A}=this.viewModel,D="related-feature-viewmodels";this.removeHandles(D),A?.forEach(le=>{this.addHandles((0,ae.wB)(()=>[le.title,le.state],()=>this.scheduleRender(),ae.Vh),D)}),this.scheduleRender()}_setupFeatureElementInfo(){const{headingLevel:A,visibleElements:D}=this,le=D.description&&this.description,Ie=D.title&&this.title;this._featureElementInfo?.set({description:le,title:Ie,headingLevel:A})}_handleRelatedFeatureObserverChange(){var A=this;return(0,z.A)(function*(){A._unobserveRelatedFeatureObserver();const{state:D,showAllEnabled:le}=A.viewModel;yield(0,Ye.Pl)(0),A._relatedFeatureIntersectionObserverNode&&"ready"===D&&le&&A._relatedFeatureIntersectionObserver.observe(A._relatedFeatureIntersectionObserverNode)})()}_relatedFeatureIntersectionObserverCreated(A){this._relatedFeatureIntersectionObserverNode=A}_unobserveRelatedFeatureObserver(){this._relatedFeatureIntersectionObserverNode&&this._relatedFeatureIntersectionObserver.unobserve(this._relatedFeatureIntersectionObserverNode)}};(0,E._)([(0,k.MZ)()],bt.prototype,"_relatedFeatureIntersectionObserverNode",void 0),(0,E._)([(0,k.MZ)({readOnly:!0})],bt.prototype,"displayShowAllButton",null),(0,E._)([(0,k.MZ)({readOnly:!0})],bt.prototype,"displayListItems",null),(0,E._)([(0,k.MZ)({readOnly:!0})],bt.prototype,"allItemsDescription",null),(0,E._)([(0,k.MZ)()],bt.prototype,"description",null),(0,E._)([(0,k.MZ)()],bt.prototype,"featureVisibleElements",void 0),(0,E._)([(0,k.MZ)()],bt.prototype,"flowItems",void 0),(0,E._)([(0,k.MZ)()],bt.prototype,"flowType",void 0),(0,E._)([(0,k.MZ)()],bt.prototype,"headingLevel",void 0),(0,E._)([(0,k.MZ)()],bt.prototype,"title",null),(0,E._)([(0,k.MZ)({type:ut.A})],bt.prototype,"viewModel",void 0),(0,E._)([(0,k.MZ)(),(0,Q.G)("esri/widgets/Feature/t9n/Feature")],bt.prototype,"messages",void 0),(0,E._)([(0,k.MZ)(),(0,Q.G)("esri/t9n/common")],bt.prototype,"messagesCommon",void 0),(0,E._)([(0,k.MZ)()],bt.prototype,"visibleElements",void 0),(0,E._)([(0,ye.w)("visibleElements")],bt.prototype,"castVisibleElements",null),bt=At=(0,E._)([(0,Pe.$)("esri.widgets.Feature.FeatureRelationship")],bt);const hi=bt;var kt=_(75737),si=_(83648);const Jt="esri-feature-utility-network-associations",gi=`${Jt}__loading-container`,Yt={base:Jt,listContainer:`${Jt}__list`,loadingContainer:gi,loadingContainerSticky:`${gi}--sticky`};let jt=class extends ne.A{constructor(A,D){super(A,D),this._featureElementInfo=null,this.onSelectAssociationType=()=>{},this.flowType="feature-utility-network-associations",this.flowItems=null,this.parentFeatureViewModel=null,this.headingLevel=5,this.viewModel=new si.A,this.messages=null,this.messagesCommon=null,this.visibleElements=new kt.A}initialize(){this._featureElementInfo=new Ve,this.addHandles([(0,ae.wB)(()=>[this.viewModel.description,this.viewModel.title,this.headingLevel],()=>this._setupFeatureElementInfo(),ae.Vh)])}loadDependencies(){return(0,U.W)({icon:()=>_.e(1951).then(_.bind(_,81951)),list:()=>Promise.all([_.e(1951),_.e(3869),_.e(2076),_.e(6620)]).then(_.bind(_,26620)),"list-item":()=>Promise.all([_.e(1951),_.e(8569),_.e(6126),_.e(2076),_.e(7313)]).then(_.bind(_,10160)),loader:()=>_.e(5897).then(_.bind(_,45897)),notice:()=>Promise.all([_.e(1951),_.e(7520)]).then(_.bind(_,77520))})}destroy(){this._featureElementInfo=(0,Ge.pR)(this._featureElementInfo)}get description(){return this.viewModel.description}set description(A){this.viewModel.description=A}get title(){return this.viewModel.title}set title(A){this.viewModel.title=A}render(){const{state:A}=this.viewModel;return(0,C.K)("div",{class:this.classes(Yt.base,R.D.widget)},this._featureElementInfo?.render(),"loading"===A?this._renderLoading():"disabled"===A?this._renderAssociationNotFound():this._renderContent())}_renderStickyLoading(){return"querying"===this.viewModel.state?(0,C.K)("div",{class:Yt.loadingContainerSticky,key:"sticky-loader"},this._renderLoadingIcon()):null}_renderLoadingIcon(){return(0,C.K)("calcite-loader",{inline:!0,label:this.messagesCommon.loading})}_renderLoading(){return(0,C.K)("div",{class:Yt.loadingContainer,key:"loading-container"},this._renderLoadingIcon())}_renderAssociationNotFound(){return(0,C.K)("calcite-notice",{icon:"exclamation-mark-triangle",key:"association-not-found",kind:"danger",open:!0,scale:"s",width:"full"},(0,C.K)("div",{slot:"message"},this.messages?.noAssociations))}_renderAssociationType(A){const{viewModel:D}=this,le=this._getAssociationTypeTitle(A);return(0,C.K)("calcite-list-item",{description:(0,ee._e)(A.description),key:`association-type-${A.type}`,label:(0,ee._e)(le),value:A.type,onCalciteListItemSelect:()=>this.onSelectAssociationType({viewModel:D,listType:A,title:le})},(0,C.K)("calcite-icon",{flipRtl:!0,icon:"chevron-right",scale:"s",slot:"content-end"}))}_renderAssociations(A){const{viewModel:D}=this;return"featureForm"===D.source||D.getFeatureCountForAssociationType(A.type)>0?this._renderAssociationType(A):void 0}_renderContent(){const{messages:A,viewModel:D}=this,{state:le,associationTypes:Ie}=D;return(0,C.K)("div",{class:Yt.listContainer,key:"list-container"},"ready"===le?(0,C.K)("div",null,(0,C.K)("calcite-list",{displayMode:"flat",label:A?.associationsList},Ie.map(Be=>this._renderAssociations(Be)))):null,this._renderStickyLoading())}_getAssociationTypeTitle(A){const{messages:D}=this;if(A.title)return A.title;switch(A.type){case"attachment":return D.associationsAttachments;case"connectivity":return D.associationsConnectivity;case"structure":return D.associationsStructure;case"content":return D.associationsContents;case"container":return D.associationsContainer}}_setupFeatureElementInfo(){const{headingLevel:A,visibleElements:D}=this,le=D.description&&this.description,Ie=D.title&&this.title;this._featureElementInfo?.set({description:le,title:Ie,headingLevel:A})}};(0,E._)([(0,k.MZ)({constructOnly:!0})],jt.prototype,"onSelectAssociationType",void 0),(0,E._)([(0,k.MZ)()],jt.prototype,"flowType",void 0),(0,E._)([(0,k.MZ)()],jt.prototype,"flowItems",void 0),(0,E._)([(0,k.MZ)()],jt.prototype,"parentFeatureViewModel",void 0),(0,E._)([(0,k.MZ)()],jt.prototype,"featureVisibleElements",void 0),(0,E._)([(0,k.MZ)()],jt.prototype,"description",null),(0,E._)([(0,k.MZ)()],jt.prototype,"headingLevel",void 0),(0,E._)([(0,k.MZ)()],jt.prototype,"title",null),(0,E._)([(0,k.MZ)({type:si.A})],jt.prototype,"viewModel",void 0),(0,E._)([(0,k.MZ)(),(0,Q.G)("esri/widgets/Feature/t9n/Feature")],jt.prototype,"messages",void 0),(0,E._)([(0,k.MZ)(),(0,Q.G)("esri/t9n/common")],jt.prototype,"messagesCommon",void 0),(0,E._)([(0,k.MZ)({type:kt.A,nonNullable:!0})],jt.prototype,"visibleElements",void 0),jt=(0,E._)([(0,Pe.$)("esri.widgets.Feature.FeatureUtilityNetworkAssociations")],jt);const vi=jt;var bi=_(79895),St=_(58084),Ti=_(72029);const Pi={title:!0,content:!0,lastEditedInfo:!0};let Tt=class extends((0,Ti.j)(ne.A)){constructor(A,D){super(A,D),this._contentWidgets=[],this.flowType="feature",this.flowItems=null,this.headingLevel=2,this.messages=null,this.messagesCommon=null,this.visibleElements={...Pi},this.viewModel=new bi.A}initialize(){this.addHandles((0,ae.wB)(()=>this.viewModel?.contentViewModels,()=>this._setupContentWidgets(),ae.Vh))}loadDependencies(){return(0,U.W)({notice:()=>Promise.all([_.e(1951),_.e(7520)]).then(_.bind(_,77520)),loader:()=>_.e(5897).then(_.bind(_,45897))})}destroy(){this._destroyContentWidgets()}get graphic(){return this.viewModel.graphic}set graphic(A){this.viewModel.graphic=A}get defaultPopupTemplateEnabled(){return this.viewModel.defaultPopupTemplateEnabled}set defaultPopupTemplateEnabled(A){this.viewModel.defaultPopupTemplateEnabled=A}get isTable(){return this.viewModel.isTable}get icon(){return"polygon"}set icon(A){this._overrideIfSome("icon",A)}get label(){return this.messages?.widgetLabel??""}set label(A){this._overrideIfSome("label",A)}get location(){return this.viewModel.location}set location(A){this.viewModel.location=A}get spatialReference(){return this.viewModel.spatialReference}set spatialReference(A){this.viewModel.spatialReference=A}get timeZone(){return this.viewModel.timeZone}set timeZone(A){this.viewModel.timeZone=A}get title(){return this.viewModel.title}castVisibleElements(A){return{...Pi,...A}}get map(){return this.viewModel.map}set map(A){this.viewModel.map=A}get view(){return this.viewModel.view}set view(A){this.viewModel.view=A}setActiveMedia(A,D){return this.viewModel.setActiveMedia(A,D)}nextMedia(A){return this.viewModel.nextMedia(A)}previousMedia(A){return this.viewModel.previousMedia(A)}render(){const{state:A}=this.viewModel,D=(0,C.K)("div",{class:St.A.container,key:"container"},this._renderTitle(),"error"===A?this._renderError():"loading"===A?this._renderLoading():this._renderContentContainer());return(0,C.K)("div",{class:this.classes(St.A.base,R.D.widget)},D)}_renderError(){const{messagesCommon:A,messages:D,visibleElements:le}=this;return(0,C.K)("calcite-notice",{icon:"exclamation-mark-circle",kind:"danger",open:!0,scale:"s"},le.title?(0,C.K)("div",{key:"error-title",slot:"title"},A.errorMessage):null,(0,C.K)("div",{key:"error-message",slot:"message"},D.loadingError))}_renderLoading(){return(0,C.K)("div",{class:St.A.loadingSpinnerContainer,key:"loading-container"},(0,C.K)("calcite-loader",{inline:!0,label:""}))}_renderContentContainer(){const{visibleElements:A}=this;return A.content?(0,C.K)("div",{class:St.A.main},[this._renderContent(),this._renderLastEditInfo()]):null}_renderTitle(){const{visibleElements:A,title:D}=this;return A.title?(0,C.K)(Le.D,{class:St.A.title,innerHTML:D,level:this.headingLevel}):null}_renderContent(){const A=this.viewModel.content,D="content";if(!A)return null;if(Array.isArray(A))return A.length?(0,C.K)("div",{class:St.A.contentNode,key:`${D}-content-elements`},A.map(this._renderContentElement,this)):null;if("string"==typeof A){const le=this._contentWidgets[0];return!le||le.destroyed?null:(0,C.K)("div",{class:this.classes(St.A.contentNode,St.A.contentNodeText),key:`${D}-content`},le.render())}return this.renderNodeContent(A)}_renderContentElement(A,D){const{visibleElements:le}=this;if("boolean"!=typeof le.content&&!le.content?.[A.type])return null;switch(A.type){case"attachments":return this._renderAttachments(D);case"custom":return this._renderCustom(A,D);case"fields":return this._renderFields(D);case"media":return this._renderMedia(D);case"text":return this._renderText(A,D);case"expression":return this._renderExpression(D);case"relationship":return this._renderRelationship(D);case"utility-network-associations":return this._renderAssociation(D);default:return null}}_renderAttachments(A){const D=this._contentWidgets[A];if(!D||D.destroyed)return null;const{state:le,attachmentInfos:Ie}=D.viewModel;return"loading"===le||Ie.length>0?(0,C.K)("div",{class:this.classes(St.A.contentElement),key:this._buildKey("attachments-element",A)},D.render()):null}_renderRelationship(A){const D=this._contentWidgets[A];return D&&!D.destroyed&&this.flowItems?(0,C.K)("div",{class:St.A.contentElement,key:this._buildKey("relationship-element",A)},D.render()):null}_renderAssociation(A){const D=this._contentWidgets[A];return D&&!D.destroyed&&this.flowItems?(0,C.K)("div",{class:St.A.contentElement,key:this._buildKey("utility-network-association-element",A)},D.render()):null}_renderExpression(A){const D=this._contentWidgets[A];return D&&!D.destroyed&&D.viewModel.contentElement?(0,C.K)("div",{class:St.A.contentElement,key:this._buildKey("expression-element",A)},D.render()):null}_renderCustom(A,D){const{creator:le}=A,Ie=this._contentWidgets[D];return!Ie||Ie.destroyed?null:le?(0,C.K)("div",{class:St.A.contentElement,key:this._buildKey("custom-element",D)},Ie.render()):null}_renderFields(A){const D=this._contentWidgets[A];return!D||D.destroyed?null:(0,C.K)("div",{class:St.A.contentElement,key:this._buildKey("fields-element",A)},D.render())}_renderMedia(A){const D=this._contentWidgets[A];return!D||D.destroyed?null:(0,C.K)("div",{class:St.A.contentElement,key:this._buildKey("media-element",A)},D.render())}_renderLastEditInfo(){const{visibleElements:A,messages:D}=this,{lastEditInfo:le}=this.viewModel;if(!le||!A.lastEditedInfo)return null;const{date:Ie,user:Be}=le,$e=(0,wi.V)("edit"===le.type?Be?D.lastEditedByUser:D.lastEdited:Be?D.lastCreatedByUser:D.lastCreated,{date:Ie,user:Be});return(0,C.K)("div",{class:this.classes(St.A.lastEditedInfo,St.A.contentElement),key:"edit-info-element"},$e)}_renderText(A,D){const Ie=this._contentWidgets[D];return!Ie||Ie.destroyed?null:A.text?(0,C.K)("div",{class:this.classes(St.A.contentElement,St.A.text),key:this._buildKey("text-element",D)},Ie.render()):null}_buildKey(A,...D){return`${A}__${this.viewModel?.graphic?.uid||"0"}-${D.join("-")}`}_destroyContentWidget(A){A&&(A.viewModel=null,!A.destroyed&&A.destroy())}_destroyContentWidgets(){this._contentWidgets.forEach(A=>this._destroyContentWidget(A)),this._contentWidgets=[]}_setupContentWidgets(){this._destroyContentWidgets();const{headingLevel:A,visibleElements:D,flowItems:le,viewModel:Ie}=this,Be=Ie?.content,{contentViewModels:Oe}=Ie;if(Array.isArray(Be))Be.forEach(($e,Qe)=>{if("attachments"===$e.type&&(this._contentWidgets[Qe]=new Xe({displayType:$e.displayType,headingLevel:D.title&&A<6?A+1:A,viewModel:Oe[Qe]})),"fields"===$e.type&&(this._contentWidgets[Qe]=new Ce({viewModel:Oe[Qe]})),"media"===$e.type&&(this._contentWidgets[Qe]=new pt({viewModel:Oe[Qe]})),"text"===$e.type&&(this._contentWidgets[Qe]=new xe({viewModel:Oe[Qe]})),"custom"===$e.type&&(this._contentWidgets[Qe]=new xe({viewModel:Oe[Qe]})),"expression"===$e.type&&(this._contentWidgets[Qe]=new De({viewModel:Oe[Qe]})),"relationship"===$e.type){const ot=new hi({flowItems:le,featureVisibleElements:D,viewModel:Oe[Qe]});this._contentWidgets[Qe]=ot}if("utility-network-associations"===$e.type){const ot=function(){var Ct=(0,z.A)(function*(It){const{viewModel:vt,listType:Ft,title:Zt}=It;if(!le)return;vt.activeAssociationType=Ft;const{default:Wt}=yield _.e(5047).then(_.bind(_,45047)),Gt=new Wt({viewModel:vt,parentFeatureViewModel:Ie,listType:Ft,title:Zt,featureVisibleElements:D,description:Ie.title,flowItems:le});le.push(Gt)});return function(vt){return Ct.apply(this,arguments)}}(),mt=new vi({flowItems:le,onSelectAssociationType:ot,parentFeatureViewModel:Ie,featureVisibleElements:D,viewModel:Oe[Qe]});this._contentWidgets[Qe]=mt}},this);else{const $e=Oe[0];$e&&!$e.destroyed&&(this._contentWidgets[0]=new xe({viewModel:$e}))}this.scheduleRender()}};(0,E._)([(0,k.MZ)()],Tt.prototype,"flowType",void 0),(0,E._)([(0,k.MZ)()],Tt.prototype,"graphic",null),(0,E._)([(0,k.MZ)()],Tt.prototype,"defaultPopupTemplateEnabled",null),(0,E._)([(0,k.MZ)()],Tt.prototype,"flowItems",void 0),(0,E._)([(0,k.MZ)()],Tt.prototype,"headingLevel",void 0),(0,E._)([(0,k.MZ)({readOnly:!0})],Tt.prototype,"isTable",null),(0,E._)([(0,k.MZ)()],Tt.prototype,"icon",null),(0,E._)([(0,k.MZ)()],Tt.prototype,"label",null),(0,E._)([(0,k.MZ)()],Tt.prototype,"location",null),(0,E._)([(0,k.MZ)(),(0,Q.G)("esri/widgets/Feature/t9n/Feature")],Tt.prototype,"messages",void 0),(0,E._)([(0,k.MZ)(),(0,Q.G)("esri/t9n/common")],Tt.prototype,"messagesCommon",void 0),(0,E._)([(0,k.MZ)()],Tt.prototype,"spatialReference",null),(0,E._)([(0,k.MZ)()],Tt.prototype,"timeZone",null),(0,E._)([(0,k.MZ)({readOnly:!0})],Tt.prototype,"title",null),(0,E._)([(0,k.MZ)()],Tt.prototype,"visibleElements",void 0),(0,E._)([(0,ye.w)("visibleElements")],Tt.prototype,"castVisibleElements",null),(0,E._)([(0,k.MZ)()],Tt.prototype,"map",null),(0,E._)([(0,k.MZ)()],Tt.prototype,"view",null),(0,E._)([(0,k.MZ)({type:bi.A})],Tt.prototype,"viewModel",void 0),Tt=(0,E._)([(0,Pe.$)("esri.widgets.Feature")],Tt);const ai=Tt},47252:(st,We,_)=>{_.d(We,{A:()=>Pe});var z=_(8189),E=_(85211),ye=(_(3248),_(35150),_(40707),_(76576)),je=_(69725);let H=class extends je.A{constructor(ne){super(ne),this.description=null,this.title=null}};(0,z._)([(0,E.MZ)()],H.prototype,"description",void 0),(0,z._)([(0,E.MZ)()],H.prototype,"title",void 0),H=(0,z._)([(0,ye.$)("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],H);const Pe=H},45806:(st,We,_)=>{_.d(We,{A:()=>ue});var z=_(10467),E=_(8189),Ue=_(81098),ae=_(98877),k=_(48900),ye=_(85211),ne=(_(3248),_(35150),_(40707),_(76576)),V=_(93958);let me=class extends ae.A{constructor(ge){super(ge),this._loadingPromise=null,this.created=null,this.creator=null,this.destroyer=null,this.graphic=null,this.addHandles((0,k.wB)(()=>this.creator,G=>{this._destroyContent(),this._createContent(G)},k.Vh))}destroy(){this._destroyContent()}get state(){return this._loadingPromise?"loading":"ready"}_destroyContent(){const{created:ge,graphic:G,destroyer:oe}=this;ge&&G&&((0,V.graphicCallback)({type:"content",value:oe,event:{graphic:G}}),this._set("created",null))}_createContent(ge){var G=this;return(0,z.A)(function*(){const oe=G.graphic;if(!oe||!ge)return;const q=(0,V.graphicCallback)({type:"content",value:ge,event:{graphic:oe}});G._loadingPromise=q,G.notifyChange("state");const w=yield q;q===G._loadingPromise&&(G._loadingPromise=null,G.notifyChange("state"),G._set("created",w))})()}};(0,E._)([(0,ye.MZ)({readOnly:!0})],me.prototype,"created",void 0),(0,E._)([(0,ye.MZ)()],me.prototype,"creator",void 0),(0,E._)([(0,ye.MZ)()],me.prototype,"destroyer",void 0),(0,E._)([(0,ye.MZ)({type:Ue.A})],me.prototype,"graphic",void 0),(0,E._)([(0,ye.MZ)({readOnly:!0})],me.prototype,"state",null),me=(0,E._)([(0,ne.$)("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],me);const ue=me},61222:(st,We,_)=>{_.d(We,{A:()=>Le});var z=_(10467),E=_(8189),Ue=_(81098),ae=_(98877),k=_(89447),ye=_(11432),je=_(56492),H=_(48900),Pe=_(98158),ne=_(85211),ge=(_(3248),_(35150),_(40707),_(76576)),G=_(1749),R=(_(54042),_(75432),_(65121),_(558),_(8975)),B=_(90792),Q=(_(83902),_(98089)),P=(_(62270),_(19969)),W=_(45806),te=_(68878),_e=_(55060),re=_(21462);let de=class extends ae.A{constructor(Ee){super(Ee),this._compileTask=null,this._evaluateTask=null,this.expressionInfo=null,this.graphic=null,this.contentElementViewModel=null,this.interceptor=null,this.location=null,this.view=null,this._createVM=()=>{const ve=this.contentElement?.type;this.contentElementViewModel?.destroy();const Re="fields"===ve?new te.A:"media"===ve?new _e.A:"text"===ve?new W.A:null;this._set("contentElementViewModel",Re)},this._compileThrottled=(0,Pe.n)(this._startCompile,()=>this.notifyChange("state"),1,this),this._evaluateThrottled=(0,Pe.n)(this._startEvaluate,()=>this.notifyChange("state"),1,this),this.addHandles([(0,H.wB)(()=>[this.expressionInfo,this.graphic],()=>this._compileThrottled(),H.Vh),(0,H.wB)(()=>[this.contentElement],()=>this._createVM(),H.Vh),(0,H.z7)(()=>{if(!this._compileTask?.finished)return null;const ve=this._compileTask.value,Re=ve?.dependencies;return[ve,this.spatialReference,this.map,this.view,Re?.has("view-scale")?this.view?.scale:null,Re?.has("view-time-extent")?this.view?.timeExtent?.start:null,Re?.has("view-time-extent")?this.view?.timeExtent?.end:null]},([ve])=>this._evaluateThrottled(ve))])}initialize(){this.addHandles([this._compileThrottled,this._evaluateThrottled])}destroy(){this._compileTask=(0,ye.DC)(this._compileTask),this._evaluateTask=(0,ye.DC)(this._evaluateTask),this.contentElementViewModel?.destroy(),this._set("contentElementViewModel",null)}get contentElement(){return this._evaluateTask?.value}get spatialReference(){return this.view?.spatialReference??null}set spatialReference(Ee){this._override("spatialReference",Ee)}get state(){const{contentElement:Ee,contentElementViewModel:ve}=this;return this._compileThrottled.hasPendingUpdates()||this._evaluateThrottled.hasPendingUpdates()||!this._compileTask?.finished||!this._evaluateTask?.finished?"loading":Ee||ve?"ready":"disabled"}get map(){return this.view?.map??null}set map(Ee){this._override("map",Ee)}_startCompile(){var Ee=this;this._evaluateTask=(0,ye.DC)(this._evaluateTask),this._compileTask=(0,ye.DC)(this._compileTask),this._compileTask=(0,k.UT)(function(){var ve=(0,z.A)(function*(Re){const{expressionInfo:Ve,graphic:Ze}=Ee;if(!Ve||!Ze)return null;const ze=yield(0,re.lw)();(0,je.Te)(Re);const Xe=yield(0,re.Wo)({expressionInfo:Ve,arcade:ze,graphic:Ze});return(0,je.Te)(Re),Xe});return function(Re){return ve.apply(this,arguments)}}())}_startEvaluate(Ee){var ve=this;this._evaluateTask=(0,ye.DC)(this._evaluateTask),this._evaluateTask=(0,k.UT)(function(){var Re=(0,z.A)(function*(Ve){const{graphic:Ze}=ve;if(!Ee||!Ze)return null;const{interceptor:ze,spatialReference:Xe,map:ke,location:_t,view:J}=ve,K=yield Ee.evaluate({graphic:Ze,interceptor:ze,location:_t,map:ke,options:{signal:Ve},spatialReference:Xe,view:J});(0,je.Te)(Ve);const X=K;if(!X||"esri.arcade.Dictionary"!==X.declaredClass)return null;const se=yield X.castAsJsonAsync(Ve);(0,je.Te)(Ve);const xe=se?.type,Y="media"===xe?B.A.fromJSON(se):"text"===xe?Q.A.fromJSON(se):"fields"===xe?R.A.fromJSON(se):null;return"media"===Y.type&&!Y.mediaInfos||"fields"===Y.type&&!Y.fieldInfos||"text"===Y.type&&!Y.text?null:Y});return function(Ve){return Re.apply(this,arguments)}}())}};(0,E._)([(0,ne.MZ)()],de.prototype,"_compileTask",void 0),(0,E._)([(0,ne.MZ)()],de.prototype,"_evaluateTask",void 0),(0,E._)([(0,ne.MZ)({type:P.A})],de.prototype,"expressionInfo",void 0),(0,E._)([(0,ne.MZ)({type:Ue.A})],de.prototype,"graphic",void 0),(0,E._)([(0,ne.MZ)({readOnly:!0})],de.prototype,"contentElement",null),(0,E._)([(0,ne.MZ)({readOnly:!0})],de.prototype,"contentElementViewModel",void 0),(0,E._)([(0,ne.MZ)()],de.prototype,"interceptor",void 0),(0,E._)([(0,ne.MZ)({type:G.A})],de.prototype,"location",void 0),(0,E._)([(0,ne.MZ)()],de.prototype,"spatialReference",null),(0,E._)([(0,ne.MZ)({readOnly:!0})],de.prototype,"state",null),(0,E._)([(0,ne.MZ)()],de.prototype,"map",null),(0,E._)([(0,ne.MZ)()],de.prototype,"view",void 0),de=(0,E._)([(0,ge.$)("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],de);const Le=de},68878:(st,We,_)=>{_.d(We,{A:()=>me});var z=_(8189),E=_(98877),Ue=_(85211),je=(_(3248),_(35150),_(40707),_(76576)),H=_(26025),Pe=_(61099),ne=_(93958);let V=class extends E.A{constructor(ue){super(ue),this.attributes=null,this.expressionInfos=null,this.description=null,this.fieldInfos=null,this.title=null}get formattedFieldInfos(){const{expressionInfos:ue,fieldInfos:ge}=this,G=[];return ge?.forEach(oe=>{if(oe.hasOwnProperty("visible")&&!oe.visible)return;const q=oe.clone();q.label=(0,ne.getFieldInfoLabel)(q,ue),G.push(q)}),G}};(0,z._)([(0,Ue.MZ)()],V.prototype,"attributes",void 0),(0,z._)([(0,Ue.MZ)({type:[H.A]})],V.prototype,"expressionInfos",void 0),(0,z._)([(0,Ue.MZ)()],V.prototype,"description",void 0),(0,z._)([(0,Ue.MZ)({type:[Pe.A]})],V.prototype,"fieldInfos",void 0),(0,z._)([(0,Ue.MZ)({readOnly:!0})],V.prototype,"formattedFieldInfos",null),(0,z._)([(0,Ue.MZ)()],V.prototype,"title",void 0),V=(0,z._)([(0,je.$)("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],V);const me=V},55060:(st,We,_)=>{_.d(We,{A:()=>ge});var z=_(8189),E=_(98877),Ue=_(89952),ae=_(85211),k=_(48669),je=(_(3248),_(76576)),H=_(61099),Pe=_(19457),ne=_(93958),V=_(61693);const me={chartAnimation:!0};let ue=class extends E.A{constructor(G){super(G),this.abilities={...me},this.activeMediaInfoIndex=0,this.attributes=null,this.description=null,this.fieldInfoMap=null,this.formattedAttributes=null,this.expressionAttributes=null,this.isAggregate=!1,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null}castAbilities(G){return{...me,...G}}get activeMediaInfo(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}get formattedMediaInfos(){return this._formatMediaInfos()||[]}get formattedMediaInfoCount(){return this.formattedMediaInfos.length}setActiveMedia(G){this._setContentElementMedia(G)}next(){this._pageContentElementMedia(1)}previous(){this._pageContentElementMedia(-1)}_setContentElementMedia(G){const{formattedMediaInfoCount:oe}=this;this.activeMediaInfoIndex=(G+oe)%oe}_pageContentElementMedia(G){const{activeMediaInfoIndex:oe}=this;this._setContentElementMedia(oe+G)}_formatMediaInfos(){const{mediaInfos:G,layer:oe}=this,q=this.attributes??{},w=this.formattedAttributes??{},U=this.expressionAttributes??{},R=this.fieldInfoMap??new Map;return G?.map(B=>{const Z=B?.clone();return Z?(Z.title=(0,ne.substituteFieldsInLinksAndAttributes)({attributes:q,fieldInfoMap:R,globalAttributes:w,expressionAttributes:U,layer:oe,text:Z.title}),Z.caption=(0,ne.substituteFieldsInLinksAndAttributes)({attributes:q,fieldInfoMap:R,globalAttributes:w,expressionAttributes:U,layer:oe,text:Z.caption}),Z.altText=(0,ne.substituteFieldsInLinksAndAttributes)({attributes:q,fieldInfoMap:R,globalAttributes:w,expressionAttributes:U,layer:oe,text:Z.altText}),"image"===Z.type?Z.value?(this._setImageValue({value:Z.value,formattedAttributes:w,layer:oe}),Z.value.sourceURL?Z:void 0):void 0:"pie-chart"===Z.type||"line-chart"===Z.type||"column-chart"===Z.type||"bar-chart"===Z.type?Z.value?(this._setChartValue({value:Z.value,chartType:Z.type,attributes:q,formattedAttributes:w,layer:oe,expressionAttributes:U}),Z):void 0:null):null}).filter(Ue.Ru)??[]}_setImageValue(G){const oe=this.fieldInfoMap??new Map,{value:q,formattedAttributes:w,layer:U}=G,{linkURL:R,sourceURL:B}=q;if(B){const Z=(0,ne.fixTokens)(B,U);q.sourceURL=(0,ne.substituteAttributes)({formattedAttributes:w,template:Z,fieldInfoMap:oe})}if(R){const Z=(0,ne.fixTokens)(R,U);q.linkURL=(0,ne.substituteAttributes)({formattedAttributes:w,template:Z,fieldInfoMap:oe})}}_setChartValue(G){const{value:oe,attributes:q,formattedAttributes:w,chartType:U,layer:R,expressionAttributes:B}=G,{popupTemplate:Z,relatedInfos:Q}=this,{fields:C,normalizeField:P}=oe,W=R;if(oe.fields=(0,ne.getFixedFieldNames)(C,W),P&&(oe.normalizeField=(0,ne.getFixedFieldName)(P,W)),!C.some(_e=>!!(null!=w[_e]||(0,ne.isRelatedField)(_e)&&Q?.size)))return;const te=Z?.fieldInfos??[];C.forEach((_e,re)=>{const ce=oe.colors?.[re];if((0,ne.isRelatedField)(_e))return void(oe.series=[...oe.series,...this._getRelatedChartInfos({fieldInfos:te,fieldName:_e,formattedAttributes:w,chartType:U,value:oe,color:ce})]);const de=this._getChartOption({value:oe,attributes:q,chartType:U,formattedAttributes:w,expressionAttributes:B,fieldName:_e,fieldInfos:te,color:ce});oe.series.push(de)})}_getRelatedChartInfos(G){const{fieldInfos:oe,fieldName:q,formattedAttributes:w,chartType:U,value:R,color:B}=G,Z=[],Q=(0,V.kC)(q),C=Q&&this.relatedInfos?.get(Q.layerId.toString());if(!C)return Z;const{relatedFeatures:P,relation:W}=C;if(!W||!P)return Z;const{cardinality:te}=W;return P.forEach(_e=>{const{attributes:re}=_e;re&&Object.keys(re).forEach(ce=>{ce===Q.fieldName&&Z.push(this._getChartOption({value:R,attributes:re,formattedAttributes:w,fieldName:q,chartType:U,relatedFieldName:ce,hasMultipleRelatedFeatures:P?.length>1,fieldInfos:oe,color:B}))})}),"one-to-many"===te||"many-to-many"===te?Z:[Z[0]]}_getTooltip({label:G,value:oe,chartType:q}){return"pie-chart"===q?`${G}`:`${G}: ${oe}`}_getChartOption(G){const{value:oe,attributes:q,formattedAttributes:w,expressionAttributes:U,fieldName:R,relatedFieldName:B,fieldInfos:Z,chartType:Q,hasMultipleRelatedFeatures:C,color:P}=G,W=this.layer,te=this.fieldInfoMap??new Map,{normalizeField:_e,tooltipField:re}=oe,ce=_e?(0,ne.isRelatedField)(_e)?q[(0,V.kC)(_e).fieldName]:q[_e]:null,de=(0,ne.isExpressionField)(R)&&U&&void 0!==U[R]?U[R]:B&&void 0!==q[B]?q[B]:void 0!==q[R]?q[R]:w[R],Le=new Pe.A({fieldName:R,color:P,value:void 0===de?null:de&&ce?de/ce:de});if((0,ne.isRelatedField)(R)){const Ze=te.get(R.toLowerCase()),ze=re&&te.get(re.toLowerCase()),Xe=Ze?.fieldName??R,ke=C&&re?(0,V.kC)(re).fieldName:ze?.fieldName??re;return Le.tooltip=this._getTooltip({label:C&&ke?q[ke]:w[ke]??Ze?.label??Ze?.fieldName??B,value:C&&B?q[B]:w[Xe],chartType:Q}),Le}const Ee=(0,ne.getFieldInfo)(Z,R),ve=(0,ne.getFixedFieldName)(R,W),Re=re&&void 0!==w[re]?w[re]:(0,ne.getFieldInfoLabel)(Ee||new H.A({fieldName:ve}),this.popupTemplate?.expressionInfos);return Le.tooltip=this._getTooltip({label:Re,value:w[ve],chartType:Q}),Le}};(0,z._)([(0,ae.MZ)()],ue.prototype,"abilities",void 0),(0,z._)([(0,k.w)("abilities")],ue.prototype,"castAbilities",null),(0,z._)([(0,ae.MZ)()],ue.prototype,"activeMediaInfoIndex",void 0),(0,z._)([(0,ae.MZ)({readOnly:!0})],ue.prototype,"activeMediaInfo",null),(0,z._)([(0,ae.MZ)()],ue.prototype,"attributes",void 0),(0,z._)([(0,ae.MZ)()],ue.prototype,"description",void 0),(0,z._)([(0,ae.MZ)()],ue.prototype,"fieldInfoMap",void 0),(0,z._)([(0,ae.MZ)()],ue.prototype,"formattedAttributes",void 0),(0,z._)([(0,ae.MZ)()],ue.prototype,"expressionAttributes",void 0),(0,z._)([(0,ae.MZ)({readOnly:!0})],ue.prototype,"formattedMediaInfos",null),(0,z._)([(0,ae.MZ)()],ue.prototype,"isAggregate",void 0),(0,z._)([(0,ae.MZ)()],ue.prototype,"layer",void 0),(0,z._)([(0,ae.MZ)({readOnly:!0})],ue.prototype,"formattedMediaInfoCount",null),(0,z._)([(0,ae.MZ)()],ue.prototype,"mediaInfos",void 0),(0,z._)([(0,ae.MZ)()],ue.prototype,"popupTemplate",void 0),(0,z._)([(0,ae.MZ)()],ue.prototype,"relatedInfos",void 0),(0,z._)([(0,ae.MZ)()],ue.prototype,"title",void 0),ue=(0,z._)([(0,je.$)("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],ue);const ge=ue},84484:(st,We,_)=>{_.d(We,{A:()=>xi});var Te,Ke,ie,z=_(10467),E=_(8189),Ue=_(81098),ae=_(98877),k=_(89952),ye=_(90660),je=_(31178),H=_(3046),Pe=_(56492),ne=_(48900),V=_(85211),ge=(_(3248),_(35150),_(76576)),G=_(59487),oe=_(93958),R=(_(13242),_(69690),_(77806),_(1119));_(8410),_(54444),_(86300),_(58443),_(43039),_(5922),_(69287),_(48266),_(3527),_(20543),_(44549),_(88996),(ie=Te||(Te={})).Text="text",ie.Number="number",ie.Date="date",ie.Unsupported="unsupported",function(ie){ie.CANNOT_BE_EMPTY="input-validation-error::cannot-be-empty",ie.TOO_SHORT="length-validation-error::too-short",ie.TOO_LONG="length-validation-error::too-long"}(Ke||(Ke={})),_(46186);const Fi=ie=>{const we=[];if(ie.formTemplate){const{description:De,title:Ge}=ie.formTemplate;ie.fields?.forEach(Ye=>{const ut=Ge&&(0,R.mk)(Ge,Ye.name),gt=De&&(0,R.mk)(De,Ye.name);(ut||gt)&&we.push(Ye.name)})}return we};let pt=class extends(ye.A.ClonableMixin(H.A.IdentifiableMixin(ae.A))){constructor(ie){var we;super(ie),we=this,this._loaded=!1,this._queryAbortController=null,this._queryPageAbortController=null,this._queryFeatureCountAbortController=null,this.featuresPerPage=10,this.activeCategory=null,this.allCategories=null,this.description=null,this.graphic=null,this.layer=null,this.map=null,this.orderByFields=null,this.featureCount=0,this.relationshipId=null,this.showAllEnabled=!1,this.title=null,this._cancelQuery=()=>{const{_queryAbortController:De}=this;De&&De.abort(),this._queryAbortController=null},this._cancelQueryFeatureCount=()=>{const{_queryFeatureCountAbortController:De}=this;De&&De.abort(),this._queryFeatureCountAbortController=null},this._cancelQueryPage=()=>{const{_queryPageAbortController:De}=this;De&&De.abort(),this._queryPageAbortController=null},this._queryController=(0,z.A)(function*(){we._cancelQuery();const De=new AbortController;we._queryAbortController=De,yield(0,Pe.QZ)(we._query()),we._queryAbortController===De&&(we._queryAbortController=null)}),this._queryFeatureCountController=(0,z.A)(function*(){we._loaded=!1,we._cancelQueryFeatureCount();const De=new AbortController;we._queryFeatureCountAbortController=De,yield(0,Pe.QZ)(we._queryFeatureCount()),we._queryFeatureCountAbortController===De&&(we._queryFeatureCountAbortController=null),we._loaded=!0}),this._queryPageController=(0,z.A)(function*(){const De=new AbortController;we._queryPageAbortController=De,yield(0,Pe.QZ)(we._queryPage()),we._queryPageAbortController===De&&(we._queryPageAbortController=null)}),this._queryDebounced=(0,Pe.sg)(this._queryController,100),this._queryFeatureCountDebounced=(0,Pe.sg)(this._queryFeatureCountController,100),this._queryPageDebounced=(0,Pe.sg)(this._queryPageController,100),this._query=(0,z.A)(function*(){const{_queryAbortController:De,relatedFeatures:Ge}=we;we.featureCount&&("subtype-group"!==we.relatedLayer?.type||we.activeCategory)&&(we._destroyRelatedFeatureViewModels(),we.featurePage=1,Ge.destroyAll(),we.destroyed||Ge.addMany(we._sliceFeatures(yield we._queryRelatedFeatures({signal:De?.signal}))))}),this.addHandles([(0,ne.wB)(()=>[this.displayCount,this.graphic,this.layer,this.layer?.loaded,this.map,this.orderByFields,this.relationshipId,this.featuresPerPage,this.showAllEnabled,this.canQuery,this.featureCount,this.activeCategory],()=>this._queryDebounced(),ne.Vh),(0,ne.wB)(()=>[this.featurePage,this.showAllEnabled],()=>this._queryPageDebounced()),(0,ne.wB)(()=>[this.layer,this.relationshipId,this.objectId,this.canQuery,this.activeCategory],()=>this._queryFeatureCountDebounced())])}destroy(){this._destroyRelatedFeatureViewModels(),this.relatedFeatures.destroyAll(),this._cancelQuery(),this._cancelQueryFeatureCount(),this._cancelQueryPage()}set featurePage(ie){const{featuresPerPage:we,featureCount:De}=this,Ye=Math.ceil(De/we)||1;this._set("featurePage",Math.min(Math.max(ie,1),Ye))}get featurePage(){return this._get("featurePage")}get orderByFieldsFixedCasing(){const{orderByFields:ie,relatedLayer:we}=this;return ie&&we?.loaded?ie.map(De=>{const Ge=De.clone();return Ge.field=(0,oe.getFixedFieldName)(De.field,we),Ge}):ie??[]}get supportsCacheHint(){return!!this.layer?.capabilities?.queryRelated?.supportsCacheHint}get canLoad(){return!!this.map&&null!=this.relationshipId&&"number"==typeof this.objectId}get canQuery(){const ie=this.layer?.capabilities?.queryRelated;return!!(this.relatedLayer&&this.relationship&&null!=this.relationshipId&&null!=this.objectId&&ie?.supportsCount&&ie?.supportsPagination)}get allCategoriesCount(){return this.allCategories?.length??0}get categories(){const{allCategories:ie}=this;return this.showAllEnabled?ie:ie?.slice(0,this.displayCount)??null}set displayCount(ie){this._set("displayCount",Math.min(Math.max(ie??3,0),10))}get displayCount(){return this._get("displayCount")}get itemDescriptionFieldName(){return this.orderByFieldsFixedCasing[0]?.field||null}get objectId(){return(this.objectIdField&&this.graphic?.attributes?.[this.objectIdField])??null}get objectIdField(){return this.layer?.objectIdField||null}get relatedFeatures(){return this._get("relatedFeatures")||new je.A}get relatedLayer(){const{layer:ie,map:we,relationship:De}=this;if(!ie?.loaded||!we||!De)return null;const Ge="subtype-sublayer"===ie.type&&ie.parent&&(0,oe.isRelatableFeatureSupportedLayer)(ie.parent)?ie.parent:ie;return(0,oe.findRelatedLayer)(we,Ge,De)??null}get relatedLayerKeyField(){const{relatedLayer:ie,relationshipId:we}=this;return ie?.loaded&&null!=we?ie.relationships?.find(De=>De.id===we)?.keyField:null}get relatedLayerKeyFields(){const{relatedLayer:ie}=this;return ie?.loaded?ie.relationships?.map(we=>we.keyField).filter(k.Ru)??[]:[]}get relationship(){const{relationshipId:ie,layer:we}=this;return null!=ie&&we?.loaded?we.relationships?.find(({id:De})=>De===ie)??null:null}get relationshipKey(){const{relationshipKeyField:ie}=this;return(ie&&this.graphic?.attributes?.[ie])??null}get relationshipKeyField(){return this.relationship?.keyField||null}get relatedFeatureViewModels(){return this._get("relatedFeatureViewModels")||new je.A}get state(){const{_queryAbortController:ie,_queryFeatureCountAbortController:we,_queryPageAbortController:De,canQuery:Ge,_loaded:Ye,canLoad:ut}=this;return we||ut&&!Ye?"loading":ie||De?"querying":Ge?"ready":"disabled"}getRelatedFeatureByObjectId(ie){return this.relatedFeatures.find(we=>we.getObjectId()===ie)}refresh(){this._queryFeatureCountDebounced()}_destroyRelatedFeatureViewModels(){this.relatedFeatureViewModels?.destroyAll()}_queryFeatureCount(){var ie=this;return(0,z.A)(function*(){const{layer:we,relatedLayer:De}=ie;yield we?.load(),yield De?.load();const{_queryFeatureCountAbortController:Ge,activeCategory:Ye,canQuery:ut,objectId:gt,relatedLayerKeyField:At,relationshipId:dt,relationshipKey:Dt,supportsCacheHint:Nt}=ie;if(!ut||!we||!De||null==gt)return ie._set("featureCount",0),void ie._set("allCategories",null);if("subtype-group"===De?.type&&!Ye){if(ie._set("featureCount",0),ie._destroyRelatedFeatureViewModels(),ie.featurePage=1,ie.relatedFeatures.destroyAll(),At&&null!=Dt){const{default:si}=yield Promise.all([_.e(1732),_.e(9377),_.e(5423),_.e(8113),_.e(9897)]).then(_.bind(_,89897)),{uniqueValueInfos:Jt}=yield si({layer:De,sqlWhere:`${At} = '${Dt}'`,field:De.subtypeField,signal:Ge?.signal}),gi=Jt.map(({count:Yt,value:jt})=>{const vi=De.subtypes?.find(bi=>bi.code===jt)?.name;return null!=jt&&vi?{count:Yt,value:jt,name:vi}:void 0}).filter(k.Ru);ie._set("allCategories",gi)}return}const{historicMoment:ni,gdbVersion:bt}=we,hi=new G.default({cacheHint:Nt,gdbVersion:bt,historicMoment:ni,relationshipId:dt,returnGeometry:!1,objectIds:[gt],where:ie._getRelationshipWhereClause(De)}),kt=yield we.queryRelatedFeaturesCount(hi,{signal:Ge?.signal});ie._set("allCategories",null),ie._set("featureCount",kt[gt]||0)})()}_getRelationshipWhereClause(ie){const{activeCategory:we}=this,De=ie.createQuery(),Ge="subtypeField"in ie?ie.subtypeField:void 0,Ye=we&&Ge?`${Ge} = ${we.value}`:void 0,ut=De.where;return ut&&Ye?`(${ut}) AND (${Ye})`:ut??Ye}_sliceFeatures(ie){const{showAllEnabled:we,displayCount:De}=this;return we?ie:De?ie.slice(0,De):[]}_queryPage(){var ie=this;return(0,z.A)(function*(){const{relatedFeatures:we,featurePage:De,showAllEnabled:Ge,_queryPageAbortController:Ye,featureCount:ut}=ie;!Ge||De<2||!ut||"subtype-group"===ie.relatedLayer?.type&&!ie.activeCategory||we.addMany(yield ie._queryRelatedFeatures({signal:Ye?.signal}))})()}_queryRelatedFeatures(ie){var we=this;return(0,z.A)(function*(){const{displayCount:De,featureCount:Ge,featurePage:Ye,featuresPerPage:ut,layer:gt,orderByFieldsFixedCasing:At,relatedLayer:dt,relatedLayerKeyFields:Dt,relationshipId:Nt,showAllEnabled:ni,supportsCacheHint:bt}=we,{canQuery:hi,objectId:kt}=we;if(!hi||!gt||!dt||null==kt)return[];const si=ni?((Ye-1)*ut+Ge)%Ge:0,Jt=ni?ut:De,gi=dt.objectIdField,Yt="subtypeField"in dt?dt.subtypeField:void 0,jt=[...At.map(ai=>ai.field),...Fi(dt),...Dt,gi,Yt].filter(Wi),vi=At.map(ai=>`${ai.field} ${ai.order}`),{historicMoment:bi,gdbVersion:St}=gt,Ti=new G.default({orderByFields:vi,start:si,num:Jt,outFields:jt,cacheHint:bt,historicMoment:bi,gdbVersion:St,relationshipId:Nt,returnGeometry:!1,objectIds:[kt],where:we._getRelationshipWhereClause(dt)}),Pi=yield gt.queryRelatedFeatures(Ti,{signal:ie?.signal}),Tt=Pi[kt]?.features||[];return Tt.forEach("subtype-group"===dt.type&&Yt?ai=>{const A=ai.attributes[Yt],D=dt.findSublayerForSubtypeCode?.(A);ai.sourceLayer=D,ai.layer=D}:ai=>{ai.sourceLayer=dt,ai.layer=dt}),Tt})()}};function Wi(ie){return null!=ie&&""!==ie}(0,E._)([(0,V.MZ)()],pt.prototype,"_loaded",void 0),(0,E._)([(0,V.MZ)()],pt.prototype,"_queryAbortController",void 0),(0,E._)([(0,V.MZ)()],pt.prototype,"_queryPageAbortController",void 0),(0,E._)([(0,V.MZ)()],pt.prototype,"_queryFeatureCountAbortController",void 0),(0,E._)([(0,V.MZ)({value:1})],pt.prototype,"featurePage",null),(0,E._)([(0,V.MZ)()],pt.prototype,"featuresPerPage",void 0),(0,E._)([(0,V.MZ)({readOnly:!0})],pt.prototype,"orderByFieldsFixedCasing",null),(0,E._)([(0,V.MZ)({readOnly:!0})],pt.prototype,"supportsCacheHint",null),(0,E._)([(0,V.MZ)({readOnly:!0})],pt.prototype,"canLoad",null),(0,E._)([(0,V.MZ)({readOnly:!0})],pt.prototype,"canQuery",null),(0,E._)([(0,V.MZ)()],pt.prototype,"activeCategory",void 0),(0,E._)([(0,V.MZ)({readOnly:!0})],pt.prototype,"allCategories",void 0),(0,E._)([(0,V.MZ)({readOnly:!0})],pt.prototype,"allCategoriesCount",null),(0,E._)([(0,V.MZ)({readOnly:!0})],pt.prototype,"categories",null),(0,E._)([(0,V.MZ)()],pt.prototype,"description",void 0),(0,E._)([(0,V.MZ)({value:3})],pt.prototype,"displayCount",null),(0,E._)([(0,V.MZ)({type:Ue.A})],pt.prototype,"graphic",void 0),(0,E._)([(0,V.MZ)({readOnly:!0})],pt.prototype,"itemDescriptionFieldName",null),(0,E._)([(0,V.MZ)()],pt.prototype,"layer",void 0),(0,E._)([(0,V.MZ)()],pt.prototype,"map",void 0),(0,E._)([(0,V.MZ)({readOnly:!0})],pt.prototype,"objectId",null),(0,E._)([(0,V.MZ)({readOnly:!0})],pt.prototype,"objectIdField",null),(0,E._)([(0,V.MZ)()],pt.prototype,"orderByFields",void 0),(0,E._)([(0,V.MZ)({readOnly:!0})],pt.prototype,"relatedFeatures",null),(0,E._)([(0,V.MZ)({readOnly:!0})],pt.prototype,"relatedLayer",null),(0,E._)([(0,V.MZ)({readOnly:!0})],pt.prototype,"relatedLayerKeyField",null),(0,E._)([(0,V.MZ)({readOnly:!0})],pt.prototype,"relatedLayerKeyFields",null),(0,E._)([(0,V.MZ)({readOnly:!0})],pt.prototype,"relationship",null),(0,E._)([(0,V.MZ)({readOnly:!0})],pt.prototype,"relationshipKey",null),(0,E._)([(0,V.MZ)({readOnly:!0})],pt.prototype,"relationshipKeyField",null),(0,E._)([(0,V.MZ)({readOnly:!0})],pt.prototype,"featureCount",void 0),(0,E._)([(0,V.MZ)({readOnly:!0})],pt.prototype,"relatedFeatureViewModels",null),(0,E._)([(0,V.MZ)()],pt.prototype,"relationshipId",void 0),(0,E._)([(0,V.MZ)()],pt.prototype,"showAllEnabled",void 0),(0,E._)([(0,V.MZ)()],pt.prototype,"state",null),(0,E._)([(0,V.MZ)()],pt.prototype,"title",void 0),pt=(0,E._)([(0,ge.$)("esri.widgets.Feature.FeatureRelationship.FeatureRelationshipViewModel")],pt);const xi=pt},75737:(st,We,_)=>{_.d(We,{A:()=>Pe});var z=_(8189),E=_(98877),Ue=_(85211),je=(_(3248),_(35150),_(40707),_(76576));let H=class extends E.A{constructor(ne){super(ne),this.title=!0,this.description=!0}};(0,z._)([(0,Ue.MZ)({type:Boolean,nonNullable:!0})],H.prototype,"title",void 0),(0,z._)([(0,Ue.MZ)({type:Boolean,nonNullable:!0})],H.prototype,"description",void 0),H=(0,z._)([(0,je.$)("esri.widgets.Feature.FeatureUtilityNetworkAssociations.VisibleElements")],H);const Pe=H},79895:(st,We,_)=>{_.d(We,{A:()=>_t});var ve,z=_(10467),E=_(8189),Ue=_(81098),k=_(98877),ye=_(89952),je=_(89447),H=_(31178),Pe=_(3046),ne=_(35150),V=_(11432),me=_(56492),ue=_(48900),ge=_(98158),G=_(85211),oe=_(48669),w=(_(3248),_(76576)),U=_(1749),R=_(32034),B=_(98089),Z=_(41843),Q=_(20543),C=_(47252),P=_(45806),W=_(61222),te=_(68878),_e=_(55060),re=_(84484),ce=_(21462),de=_(93958),Le=_(61693),Ee=_(83648);const Ve="content-view-models",Ze="relationship-view-models",Xe={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0,relationshipContent:!0,utilityNetworkAssociationsContent:!0};let ke=ve=class extends(Pe.A.IdentifiableMixin(k.A)){constructor(J){super(J),this._error=null,this._graphicChangedTask=null,this._evaluateExpressionAttributesTask=null,this._associationVMAbortController=null,this._expressionAttributes=null,this._graphicExpressionAttributes=null,this.abilities={...Xe},this.content=null,this.contentViewModels=[],this.description=null,this.defaultPopupTemplateEnabled=!1,this.formattedAttributes=null,this.lastEditInfo=null,this.location=null,this.relatedInfos=new Map,this.title="",this.view=null,this._graphicChangedThrottled=(0,ge.n)(this._graphicChanged,()=>this.notifyChange("waitingForContent"),1,this),this._isAllowedContentType=K=>{const{abilities:X}=this;return"attachments"===K.type&&!!X.attachmentsContent||"custom"===K.type&&!!X.customContent||"fields"===K.type&&!!X.fieldsContent||"media"===K.type&&!!X.mediaContent||"text"===K.type&&!!X.textContent||"expression"===K.type&&!!X.expressionContent||"relationship"===K.type&&!!X.relationshipContent||"utility-network-associations"===K.type&&!!X.utilityNetworkAssociationsContent},this._evaluateExpressionAttributesThrottled=(0,ge.n)(this._evaluateExpressionAttributes,()=>this.notifyChange("waitingForContent"),1,this),this.addHandles([(0,ue.wB)(()=>[this.graphic,this._effectivePopupTemplate,this.abilities,this.timeZone],()=>this._graphicChangedThrottled(),ue.Vh),(0,ue.z7)(()=>{if(!this._graphicChangedTask?.finished||null==this._graphicChangedTask.value)return null;const K=this._graphicChangedTask.value,X=K?.expressionInfos?.dependencies;return[K,X?.has("view-scale")?this.view?.scale:null,X?.has("view-time-extent")?this.view?.timeExtent?.start:null,X?.has("view-time-extent")?this.view?.timeExtent?.end:null]},([K])=>this._evaluateExpressionAttributesThrottled(K))])}initialize(){this.addHandles([this._graphicChangedThrottled,this._evaluateExpressionAttributesThrottled])}destroy(){this._clear(),this._graphicChangedTask=(0,V.DC)(this._graphicChangedTask),this._evaluateExpressionAttributesTask=(0,V.DC)(this._evaluateExpressionAttributesTask),this._error=null,this.graphic=null,this._destroyContentViewModels(),this.relatedInfos.clear()}get _effectivePopupTemplate(){return null!=this.graphic?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}get _fieldInfoMap(){return(0,de.createFieldInfoMap)((0,de.getAllFieldInfos)(this._effectivePopupTemplate),this._sourceLayer)}get _sourceLayer(){return(0,de.getSourceLayer)(this.graphic)}castAbilities(J){return{...Xe,...J}}get isTable(){return this._sourceLayer?.isTable||!1}get state(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}set graphic(J){this._set("graphic",J?.clone()??null)}get spatialReference(){return this.view?.spatialReference??null}set spatialReference(J){this._override("spatialReference",J)}get timeZone(){return this.view?.timeZone??Q.qU}set timeZone(J){this._overrideIfSome("timeZone",J)}get map(){return this.view?.map||null}set map(J){this._override("map",J)}get waitingForContent(){const{_graphicChangedThrottled:J,_evaluateExpressionAttributesThrottled:K,_graphicChangedTask:X,_evaluateExpressionAttributesTask:se,_associationVMAbortController:xe}=this;return J.hasPendingUpdates()||K.hasPendingUpdates()||null!=X&&!X.finished||null!=se&&!se.finished||!!xe}setActiveMedia(J,K){const X=this.contentViewModels[J];X instanceof _e.A&&X.setActiveMedia(K)}nextMedia(J){const K=this.contentViewModels[J];K instanceof _e.A&&K.next()}previousMedia(J){const K=this.contentViewModels[J];K instanceof _e.A&&K.previous()}updateGeometry(){var J=this;return(0,z.A)(function*(){const{graphic:K,spatialReference:X,_sourceLayer:se}=J;yield se?.load();const xe=se?.objectIdField;if(!xe||!K||!se)return;const Y=K?.attributes?.[xe];if(null==Y)return;const ee=[Y];if(!K.geometry){const fe=yield(0,de.querySourceLayer)({layer:se,graphic:K,outFields:[],objectIds:ee,returnGeometry:!0,spatialReference:X}),L=fe?.geometry;L&&(K.geometry=L)}})()}_clear(){this._set("title",""),this._set("content",null),this._set("formattedAttributes",null)}_graphicChanged(){var J=this;this._evaluateExpressionAttributesTask=(0,V.DC)(this._evaluateExpressionAttributesTask),this._graphicChangedTask=(0,V.DC)(this._graphicChangedTask),this._graphicChangedTask=(0,je.UT)(function(){var K=(0,z.A)(function*(X){J._error=null,J._clear();const{graphic:se}=J;try{if(!se)return null;const{_sourceLayer:xe,_effectivePopupTemplate:Y}=J,ee=J.spatialReference;yield(0,de.queryUpdatedFeature)({graphic:se,popupTemplate:Y,layer:xe,spatialReference:ee},{signal:X});const[{value:fe},{value:L}]=yield(0,me.Lx)([J._getContent(),J._getTitle()]),[,{value:Me}]=yield(0,me.Lx)([J._checkForRelatedFeatures({signal:X}),(0,ce.lO)(Y?.expressionInfos,se)]);return{expressionInfos:Me,content:fe,title:L}}catch(xe){throw(0,me.zf)(xe)||(J._error=xe,ne.A.getLogger(J).error("error","The popupTemplate could not be displayed for this feature.",{error:xe,graphic:se,popupTemplate:J._effectivePopupTemplate})),xe}});return function(X){return K.apply(this,arguments)}}())}_compileContentElement(J,K){return"attachments"===J.type?this._compileAttachments(J,K):"custom"===J.type?this._compileCustom(J,K):"fields"===J.type?this._compileFields(J,K):"media"===J.type?this._compileMedia(J,K):"text"===J.type?this._compileText(J,K):"expression"===J.type?this._compileExpression(J,K):"relationship"===J.type?this._compileRelationship(J,K):"utility-network-associations"===J.type?this._compileUtilityNetworkAssociation(J,K):void 0}_compileContent(J){if(this._destroyContentViewModels(),this.graphic)return Array.isArray(J)?J.filter(this._isAllowedContentType).map((K,X)=>this._compileContentElement(K,X)).filter(ye.Ru):"string"==typeof J?this._compileText(new B.A({text:J}),0).text:J}_destroyContentViewModels(){this.removeHandles(Ze),this.removeHandles(Ve),this.contentViewModels.forEach(J=>J&&!J.destroyed&&J.destroy()),this._set("contentViewModels",[])}_matchesFeature(J,K){const X=J?.graphic?.getObjectId(),se=K?.getObjectId();return null!=X&&null!=se&&X===se}_setRelatedFeaturesViewModels({relatedFeatureViewModels:J,relatedFeatures:K,map:X}){const{view:se,spatialReference:xe,timeZone:Y}=this;K?.filter(Boolean).forEach(ee=>{J.some(fe=>this._matchesFeature(fe,ee))||J.add(new ve({abilities:{relationshipContent:!1},map:X,view:se,spatialReference:xe,timeZone:Y,graphic:ee}))}),J.forEach(ee=>{K?.find(L=>this._matchesFeature(ee,L))||J.remove(ee)})}_setExpressionContentVM(J,K){const X=this.formattedAttributes,{contentElement:se,contentElementViewModel:xe}=J,Y=se?.type;xe&&Y&&("fields"===Y&&(this._createFieldsFormattedAttributes({contentElement:se,contentElementIndex:K,formattedAttributes:X}),xe.set(this._createFieldsVMParams(se,K))),"media"===Y&&(this._createMediaFormattedAttributes({contentElement:se,contentElementIndex:K,formattedAttributes:X}),xe.set(this._createMediaVMParams(se,K))),"text"===Y&&xe.set(this._createTextVMParams(se)))}_compileRelationship(J,K){const{displayCount:X,orderByFields:se,relationshipId:xe,title:Y,description:ee}=J,{_sourceLayer:fe,graphic:L,map:Me}=this;if(!(0,de.isRelatableFeatureSupportedLayer)(fe))return;const S=new re.A({displayCount:X,graphic:L,orderByFields:se,relationshipId:xe,layer:fe,map:Me,...this._compileTitleAndDesc({title:Y,description:ee})});return this.contentViewModels[K]=S,this.addHandles((0,ue.on)(()=>S.relatedFeatures,"change",()=>this._setRelatedFeaturesViewModels(S)),Ze),J}_matchesGlobalFeature(J,K){const X=J?.association.globalId,se=K?.association.globalId;return null!=X&&null!=se&&X===se}_setUpUtilityNetworkAssociationsViewModels(J,K,X){var se=this;return(0,z.A)(function*(){const{view:xe,spatialReference:Y,timeZone:ee}=se;J.forEach((L,Me)=>{const S=K.get(Me);S?L.forEach(he=>{S.find(Ce=>se._matchesGlobalFeature(he,Ce))||(L.remove(he),0===L.length&&J.delete(Me))}):(L.removeAll(),J.delete(Me))}),K.forEach((L,Me)=>{const S=J.get(Me)||new H.A;L?.filter(Boolean).forEach(he=>{S.some(Ce=>se._matchesGlobalFeature(Ce,he))||S.add({association:he.association,featureViewModel:new ve({abilities:{utilityNetworkAssociationsContent:!1},map:X,view:xe,spatialReference:Y,timeZone:ee,graphic:he.feature}),terminalName:he.terminalName})}),J.set(Me,S)});const fe=new AbortController;se._associationVMAbortController=fe,yield se._sortListObjectsByTitle(J,{signal:fe.signal}),se._associationVMAbortController===fe&&(se._associationVMAbortController=null)})()}_sortListObjectsByTitle(J,K){var X=this;return(0,z.A)(function*(){for(const se of J.values()){const xe=se.map(Y=>(0,ue.C_)(()=>"ready"===Y.featureViewModel.state,K?.signal));yield Promise.all(xe),se.sort(X._compareByFeatureTitle)}})()}_compareByFeatureTitle(J,K){const X=(0,Z.DQ)(J.featureViewModel),se=(0,Z.DQ)(K.featureViewModel);return X.localeCompare(se,void 0,{numeric:!0})}_compileUtilityNetworkAssociation(J,K){const{displayCount:X,title:se,description:xe,associationTypes:Y}=J,{_sourceLayer:ee,graphic:fe,map:L}=this;if(!(0,de.isAssociatedFeatureSupportedLayer)(ee))return;const Me=new Ee.A({graphic:fe,displayCount:X,associationTypes:Y,layer:ee,map:L,...this._compileTitleAndDesc({title:se,description:xe})});return this.contentViewModels[K]=Me,this.addHandles([(0,ue.wB)(()=>Me.associationFeatures.values(),()=>this._setUpUtilityNetworkAssociationsViewModels(Me.associationViewModels,Me.associationFeatures,Me.map))],"association-view-models"),J}_compileExpression(J,K){const{expressionInfo:X}=J,{graphic:se,map:xe,spatialReference:Y,view:ee,location:fe}=this,L=new W.A({expressionInfo:X,graphic:se,interceptor:ve.interceptor,map:xe,spatialReference:Y,view:ee,location:fe});return this.contentViewModels[K]=L,this.addHandles((0,ue.wB)(()=>L.contentElementViewModel,()=>this._setExpressionContentVM(L,K),ue.Vh),Ve),J}_compileAttachments(J,K){const{graphic:X}=this,{description:se,title:xe,orderByFields:Y}=J;return this.contentViewModels[K]=new C.A({graphic:X,orderByFields:Y,...this._compileTitleAndDesc({title:xe,description:se})}),J}_compileCustom(J,K){const{graphic:X}=this,{creator:se,destroyer:xe}=J;return this.contentViewModels[K]=new P.A({graphic:X,creator:se,destroyer:xe}),J}_compileTitleAndDesc({title:J,description:K}){const{_fieldInfoMap:X,_sourceLayer:se,graphic:xe,formattedAttributes:Y}=this,ee=xe?.attributes,fe=this._expressionAttributes,L=Y.global;return{title:(0,de.substituteFieldsInLinksAndAttributes)({attributes:ee,fieldInfoMap:X,globalAttributes:L,expressionAttributes:fe,layer:se,text:J}),description:(0,de.substituteFieldsInLinksAndAttributes)({attributes:ee,fieldInfoMap:X,globalAttributes:L,expressionAttributes:fe,layer:se,text:K})}}_createFieldsVMParams(J,K){const X=this._effectivePopupTemplate,se=this.formattedAttributes,xe={...se?.global,...se?.content[K]},Y=J?.fieldInfos||X?.fieldInfos,ee=Y?.filter(({fieldName:S})=>!!S&&((0,de.isExpressionField)(S)||(0,de.isRelatedField)(S)||xe.hasOwnProperty(S))),fe=X?.expressionInfos,{description:L,title:Me}=J;return{attributes:xe,expressionInfos:fe,fieldInfos:ee,...this._compileTitleAndDesc({title:Me,description:L})}}_compileFields(J,K){const X=J.clone(),se=new te.A(this._createFieldsVMParams(J,K));return this.contentViewModels[K]=se,X.fieldInfos=se.formattedFieldInfos.slice(),X}_createMediaVMParams(J,K){const{abilities:X,graphic:se,_fieldInfoMap:xe,_effectivePopupTemplate:Y,relatedInfos:ee,_sourceLayer:fe,_expressionAttributes:L}=this,Me=this.formattedAttributes,S=se?.attributes??{},{description:he,mediaInfos:Ce,title:Se}=J;return{abilities:{chartAnimation:X.chartAnimation},activeMediaInfoIndex:J.activeMediaInfoIndex||0,attributes:S,isAggregate:se?.isAggregate,layer:fe,fieldInfoMap:xe,formattedAttributes:{...Me?.global,...Me?.content[K]},expressionAttributes:L,mediaInfos:Ce,popupTemplate:Y,relatedInfos:ee,...this._compileTitleAndDesc({title:Se,description:he})}}_compileMedia(J,K){const X=J.clone(),se=new _e.A(this._createMediaVMParams(J,K));return X.mediaInfos=se.formattedMediaInfos.slice(),this.contentViewModels[K]=se,X}_createTextVMParams(J){const{graphic:K,_fieldInfoMap:X,_sourceLayer:se,_expressionAttributes:xe}=this;return J&&J.text&&(J.text=(0,de.substituteFieldsInLinksAndAttributes)({attributes:K?.attributes??{},fieldInfoMap:X,globalAttributes:this.formattedAttributes?.global??{},expressionAttributes:xe,layer:se,text:J.text})),{graphic:K,creator:J.text}}_compileText(J,K){const X=J.clone();return this.contentViewModels[K]=new P.A(this._createTextVMParams(X)),X}_compileLastEditInfo(){const{_effectivePopupTemplate:J,_sourceLayer:K,graphic:X,timeZone:se}=this;if(!J)return;const{lastEditInfoEnabled:xe}=J,Y=K?.editFieldsInfo;return xe&&Y?(0,de.formatEditInfo)(Y,X?.attributes,se,K):void 0}_compileTitle(J){const{_fieldInfoMap:K,_sourceLayer:X,graphic:se,_expressionAttributes:xe}=this;return(0,de.substituteFieldsInLinksAndAttributes)({attributes:se?.attributes??{},fieldInfoMap:K,globalAttributes:this.formattedAttributes?.global??{},expressionAttributes:xe,layer:X,text:J})}_getTitle(){var J=this;return(0,z.A)(function*(){const{_effectivePopupTemplate:K,graphic:X}=J;return X?(0,de.graphicCallback)({type:"title",value:K?.title,event:{graphic:X}}):null})()}_getContent(){var J=this;return(0,z.A)(function*(){const{_effectivePopupTemplate:K,graphic:X}=J;return X?(0,de.graphicCallback)({type:"content",value:K?.content,event:{graphic:X}}):null})()}_evaluateExpressionAttributes({title:J,content:K,expressionInfos:X}){var se=this;this._evaluateExpressionAttributesTask=(0,V.DC)(this._evaluateExpressionAttributesTask),this._evaluateExpressionAttributesTask=(0,je.UT)(function(){var xe=(0,z.A)(function*(Y){const{graphic:ee,map:fe,view:L,spatialReference:Me,location:S}=se;try{if(!ee)return;let he;if(null!=X){const Ce=[];for(const[Se,Te]of X.expressions.entries())Ce.push(null!=Te?Te.evaluate({graphic:ee,interceptor:ve.interceptor,location:S,map:fe,options:{signal:Y},spatialReference:Me,view:L}).then(Ke=>[Se,(0,ce.vc)(Ke)]).catch(()=>[Se,void 0]):Promise.resolve([Se,void 0]));he=Object.fromEntries(yield Promise.all(Ce)),(0,me.Te)(Y)}se._expressionAttributes=he,se._graphicExpressionAttributes={...ee.attributes,...he},se._set("formattedAttributes",se._createFormattedAttributes(K)),se._set("title",se._compileTitle(J)),se._set("lastEditInfo",se._compileLastEditInfo()||null),se._set("content",se._compileContent(K)||null)}catch(he){(0,me.zf)(he)||(se._error=he,ne.A.getLogger(se).error("error","The popupTemplate could not be displayed for this feature.",{error:he,graphic:ee,popupTemplate:se._effectivePopupTemplate}))}});return function(Y){return xe.apply(this,arguments)}}())}_createMediaFormattedAttributes({contentElement:J,contentElementIndex:K,formattedAttributes:X}){const{_effectivePopupTemplate:se,graphic:xe,relatedInfos:Y,_sourceLayer:ee,_fieldInfoMap:fe,_graphicExpressionAttributes:L,timeZone:Me}=this;X.content[K]=(0,de.formatAttributes)({fieldInfos:se?.fieldInfos,graphic:xe,attributes:{...L,...J.attributes},layer:ee,fieldInfoMap:fe,relatedInfos:Y,timeZone:Me})}_createFieldsFormattedAttributes({contentElement:J,contentElementIndex:K,formattedAttributes:X}){if(J.fieldInfos){const{graphic:se,relatedInfos:xe,_sourceLayer:Y,_fieldInfoMap:ee,_graphicExpressionAttributes:fe,timeZone:L}=this;X.content[K]=(0,de.formatAttributes)({fieldInfos:J.fieldInfos,graphic:se,attributes:{...fe,...J.attributes},layer:Y,fieldInfoMap:ee,relatedInfos:xe,timeZone:L})}}_createFormattedAttributes(J){const{_effectivePopupTemplate:K,graphic:X,relatedInfos:se,_sourceLayer:xe,_fieldInfoMap:Y,_graphicExpressionAttributes:ee,timeZone:fe}=this,L=K?.fieldInfos,Me={global:(0,de.formatAttributes)({fieldInfos:L,graphic:X,attributes:ee,layer:xe,fieldInfoMap:Y,relatedInfos:se,timeZone:fe}),content:[]};return Array.isArray(J)&&J.forEach((S,he)=>{"fields"===S.type&&this._createFieldsFormattedAttributes({contentElement:S,contentElementIndex:he,formattedAttributes:Me}),"media"===S.type&&this._createMediaFormattedAttributes({contentElement:S,contentElementIndex:he,formattedAttributes:Me})}),Me}_checkForRelatedFeatures(J){const{graphic:K,_effectivePopupTemplate:X}=this;return this._queryRelatedInfos(K,(0,de.getAllFieldInfos)(X),J)}_queryRelatedInfos(J,K,X){var se=this;return(0,z.A)(function*(){const{relatedInfos:xe,_sourceLayer:Y}=se;xe.clear();const ee=null!=Y?.associatedLayer?yield Y?.associatedLayer.load(X):Y;if(!ee||!J||!K.filter(S=>!!S.fieldName&&(0,de.isRelatedField)(S.fieldName))?.length)return;K.forEach(S=>se._configureRelatedInfo(S,ee));const L=yield(0,Le.Xx)({relatedInfos:xe,layer:ee},X);Object.keys(L).forEach(S=>{const he=xe.get(S.toString()),Ce=L[S]?.value;he&&Ce&&(he.layerInfo=Ce.data)});const Me=yield(0,Le.hM)({graphic:J,relatedInfos:xe,layer:ee},X);Object.keys(Me).forEach(S=>{(0,Le.nD)(Me[S]?.value,xe.get(S.toString()))})})()}_configureRelatedInfo(J,K){const{relatedInfos:X}=this,se=(0,Le.kC)(J.fieldName||"");if(!se)return;const{layerId:xe,fieldName:Y}=se;if(!xe)return;const ee=X.get(xe.toString())||(0,Le.cl)(xe,K);ee&&((0,Le.LI)({relatedInfo:ee,fieldName:Y,fieldInfo:J}),this.relatedInfos.set(xe,ee))}};ke.interceptor=new class ae{constructor(K,X){this.preLayerQueryCallback=K,this.preRequestCallback=X,this.preLayerQueryCallback||(this.preLayerQueryCallback=se=>{}),this.preRequestCallback||(this.preLayerQueryCallback=se=>{})}}(de.preLayerQueryCallback,de.preRequestCallback),(0,E._)([(0,G.MZ)()],ke.prototype,"_error",void 0),(0,E._)([(0,G.MZ)()],ke.prototype,"_graphicChangedTask",void 0),(0,E._)([(0,G.MZ)()],ke.prototype,"_evaluateExpressionAttributesTask",void 0),(0,E._)([(0,G.MZ)()],ke.prototype,"_associationVMAbortController",void 0),(0,E._)([(0,G.MZ)({readOnly:!0})],ke.prototype,"_effectivePopupTemplate",null),(0,E._)([(0,G.MZ)({readOnly:!0})],ke.prototype,"_fieldInfoMap",null),(0,E._)([(0,G.MZ)({readOnly:!0})],ke.prototype,"_sourceLayer",null),(0,E._)([(0,G.MZ)()],ke.prototype,"abilities",void 0),(0,E._)([(0,oe.w)("abilities")],ke.prototype,"castAbilities",null),(0,E._)([(0,G.MZ)({readOnly:!0})],ke.prototype,"content",void 0),(0,E._)([(0,G.MZ)({readOnly:!0})],ke.prototype,"contentViewModels",void 0),(0,E._)([(0,G.MZ)()],ke.prototype,"description",void 0),(0,E._)([(0,G.MZ)({type:Boolean})],ke.prototype,"defaultPopupTemplateEnabled",void 0),(0,E._)([(0,G.MZ)({readOnly:!0})],ke.prototype,"isTable",null),(0,E._)([(0,G.MZ)({readOnly:!0})],ke.prototype,"state",null),(0,E._)([(0,G.MZ)({readOnly:!0})],ke.prototype,"formattedAttributes",void 0),(0,E._)([(0,G.MZ)({type:Ue.A,value:null})],ke.prototype,"graphic",null),(0,E._)([(0,G.MZ)({readOnly:!0})],ke.prototype,"lastEditInfo",void 0),(0,E._)([(0,G.MZ)({type:U.A})],ke.prototype,"location",void 0),(0,E._)([(0,G.MZ)({readOnly:!0})],ke.prototype,"relatedInfos",void 0),(0,E._)([(0,G.MZ)({type:R.A})],ke.prototype,"spatialReference",null),(0,E._)([(0,G.MZ)()],ke.prototype,"timeZone",null),(0,E._)([(0,G.MZ)({readOnly:!0})],ke.prototype,"title",void 0),(0,E._)([(0,G.MZ)()],ke.prototype,"map",null),(0,E._)([(0,G.MZ)({readOnly:!0})],ke.prototype,"waitingForContent",null),(0,E._)([(0,G.MZ)()],ke.prototype,"view",void 0),ke=ve=(0,E._)([(0,w.$)("esri.widgets.Feature.FeatureViewModel")],ke);const _t=ke},58084:(st,We,_)=>{_.d(We,{A:()=>E});const z="esri-feature",E={base:z,container:`${z}__size-container`,title:`${z}__title`,main:`${z}__main-container`,btn:`${z}__button`,icon:`${z}__icon`,content:`${z}__content`,contentNode:`${z}__content-node`,contentNodeText:`${z}__content-node--text`,contentElement:`${z}__content-element`,text:`${z}__text`,lastEditedInfo:`${z}__last-edited-info`,fields:`${z}__fields`,fieldHeader:`${z}__field-header`,fieldData:`${z}__field-data`,fieldDataDate:`${z}__field-data--date`,loadingSpinnerContainer:`${z}__loading-container`}},72029:(st,We,_)=>{_.d(We,{j:()=>ne});var z=_(8189),ye=(_(35150),_(3248),_(40707),_(5922),_(76576)),je=_(58084),H=_(44182),Pe=_(56295);const ne=V=>{let me=class extends V{constructor(){super(...arguments),this.renderNodeContent=ue=>(0,H.p4)(ue)&&!ue.destroyed?(0,Pe.K)("div",{class:je.A.contentNode,key:ue},ue.render()):ue instanceof HTMLElement?(0,Pe.K)("div",{afterCreate:this._attachToNode,bind:ue,class:je.A.contentNode,key:ue}):(0,H.xk)(ue)?(0,Pe.K)("div",{afterCreate:this._attachToNode,bind:ue.domNode,class:je.A.contentNode,key:ue}):null}_attachToNode(ue){ue.appendChild(this)}};return me=(0,z._)([(0,ye.$)("esri.widgets.Feature.support.FeatureContentMixin")],me),me}},21462:(st,We,_)=>{_.d(We,{Wo:()=>W,lO:()=>_e,lw:()=>me,vc:()=>Pe});var z=_(10467),E=_(7981),Ue=_(35150),ae=_(35940),k=_(93958),ye=_(92190);const H=()=>Ue.A.getLogger("esri.widgets.Feature.support.arcadeFeatureUtils");function Pe(ce){return"string"==typeof ce?(0,k.applyTextFormattingHTML)((0,k.htmlEntities)(ce)):Array.isArray(ce)?function ne(ce){return`<ul class="esri-widget__list">${ce.map(de=>`<li>${"string"==typeof de?(0,k.applyTextFormattingHTML)((0,k.htmlEntities)(de)):de}</li>`).join("")}</ul>`}(ce):"esri.arcade.Dictionary"===ce?.declaredClass?function V(ce){const de=ce.keys().map(Le=>{const Ee=ce.field(Le);return`<tr><th>${Le}</th><td>${"string"==typeof Ee?(0,k.applyTextFormattingHTML)((0,k.htmlEntities)(Ee)):Ee}</td></tr>`}).join("");return`<table class="${ye.D.table}">${de}</table>`}(ce):ce}function me(){return ue.apply(this,arguments)}function ue(){return(ue=(0,z.A)(function*(){const[ce,de]=yield Promise.all([_.e(5724).then(_.bind(_,55724)),Promise.all([_.e(1732),_.e(1329),_.e(9324),_.e(2933),_.e(4047)]).then(_.bind(_,4047))]);return{executor:ce,syntaxUtils:de}})).apply(this,arguments)}function oe(){return(oe=(0,z.A)(function*({graphic:ce,view:de,options:Le}){const{isAggregate:Ee,layer:ve}=ce;if(!Ee||!ve||"2d"!==de?.type)return[];const Re=yield de.whenLayerView(ve);if(!function ge(ce){return"createQuery"in ce&&"queryFeatures"in ce}(Re))return[];const Ve=Re.createQuery(),Ze=ce.getObjectId();Ve.aggregateIds=null!=Ze?[Ze]:[];const{features:ze}=yield Re.queryFeatures(Ve,Le);return ze})).apply(this,arguments)}function U(ce){return{scale:ce?.scale,timeProperties:{currentStart:ce?.timeExtent?.start,currentEnd:ce?.timeExtent?.end,startIncluded:!0,endIncluded:!0}}}function R(ce){return{$voxel:ce}}function Z(){return Z=(0,z.A)(function*(ce,de,Le,Ee,ve){let Re=null;if(ve.has("$aggregatedfeatures")){const Ve=yield function G(ce){return oe.apply(this,arguments)}({graphic:ce,view:de,options:Le});Re=function q({layer:ce,aggregatedFeatures:de,interceptor:Le}){const{fields:Ee,objectIdField:ve,geometryType:Re,spatialReference:Ve,displayField:Ze}=ce;return new ae.default({fields:Ee,objectIdField:ve,geometryType:Re,spatialReference:Ve,displayField:Ze,interceptor:Le,..."feature"===ce.type?{templates:ce.templates,typeIdField:ce.typeIdField,types:ce.types}:null,source:de})}({layer:ce.sourceLayer||ce.layer,aggregatedFeatures:Ve,interceptor:Ee})}return{vars:{$feature:ce,$aggregatedFeatures:Re,$view:U(de)},[Symbol.dispose]:()=>Re?.[Symbol.dispose]()}}),Z.apply(this,arguments)}function Q(ce,de,Le,Ee){const ve=(ce.sourceLayer||ce.layer)??void 0;return{$feature:ce,$layer:null!=ve&&(0,E.eB)(ve)?ve:"scene"===ve?.type&&null!=ve.associatedLayer?ve.associatedLayer:void 0,$map:de,$datastore:ve?.url,$userInput:Le,$graph:"knowledge-graph-sublayer"===ve?.type?ve?.parentCompositeLayer?.knowledgeGraph:void 0,$view:U(Ee)}}function P(){return P=(0,z.A)(function*(ce,{graphic:de,map:Le,location:Ee,view:ve,options:Re,interceptor:Ve,arcadeExecutor:Ze}){switch(ce){case"popup":return{vars:Q(de,Le,Ee,ve),[Symbol.dispose](){}};case"popup-feature-reduction":{const ze=new Set(Ze.variablesUsed);return yield function B(ce,de,Le,Ee,ve){return Z.apply(this,arguments)}(de,ve,Re,Ve,ze)}case"popup-voxel":return{vars:R(de),[Symbol.dispose](){}};default:throw new Error(`Unexpected profile name ${ce}`)}}),P.apply(this,arguments)}function W(ce){return te.apply(this,arguments)}function te(){return te=(0,z.A)(function*({expressionInfo:ce,arcade:{executor:de,syntaxUtils:Le},graphic:Ee}){const ve=ce?.expression;if(!ve)return null;const Re=function w(ce){return ce.isAggregate?"popup-feature-reduction":"esri.views.3d.layers.VoxelGraphic"===ce.declaredClass?"popup-voxel":"popup"}(Ee),Ve=de.createArcadeProfile(Re);let Ze;try{Ze=yield de.createArcadeExecutor(ve,Ve)}catch(Xe){return H().error("arcade-executor-error",{error:Xe,expressionInfo:ce}),null}const ze=new Set;return Ze.variablesUsed.includes("$view")&&(Le.scriptUsesViewProperties(Ze.syntaxTree,["scale"])&&ze.add("view-scale"),Le.scriptUsesViewProperties(Ze.syntaxTree,["timeProperties"])&&ze.add("view-time-extent")),{dependencies:ze,evaluate:({graphic:Xe,interceptor:ke,location:_t,map:J,options:K,spatialReference:X,view:se})=>(0,z.A)(function*(){const xe=yield function C(ce,de){return P.apply(this,arguments)}(Re,{graphic:Xe,map:J,location:_t,view:se,options:K,interceptor:ke,arcadeExecutor:Ze}),Y={abortSignal:K?.signal??void 0,interceptor:ke??void 0,rawOutput:!0,spatialReference:X??void 0,timeZone:se?.timeZone,console(...ee){H().info(...ee)}};try{return yield Ze.executeAsync(xe.vars,Y)}catch(ee){return void H().error("arcade-execution-error",{error:ee,graphic:Xe,expressionInfo:ce})}finally{xe[Symbol.dispose]()}})()}}),te.apply(this,arguments)}function _e(ce,de){return re.apply(this,arguments)}function re(){return(re=(0,z.A)(function*(ce,de){if(!ce?.length)return{dependencies:new Set,expressions:new Map};const Le=yield me(),Ee=new Set,ve=new Map;for(const Re of ce){const Ve=yield W({expressionInfo:Re,arcade:Le,graphic:de});ve.set(`expression/${Re.name}`,Ve),Ve?.dependencies.forEach(Ze=>Ee.add(Ze))}return{dependencies:Ee,expressions:ve}})).apply(this,arguments)}},61693:(st,We,_)=>{_.d(We,{LI:()=>de,Xx:()=>re,cl:()=>R,hM:()=>ce,kC:()=>oe,nD:()=>B});var z=_(10467),E=_(89563),Ue=_(89952),ae=_(5922),k=_(35150),ye=_(56492),je=_(86300),H=_(34687),Pe=_(87086),ne=_(59487),V=_(16842),me=_(93958);const ge=()=>k.A.getLogger("esri.widgets.Feature.support.relatedFeatureUtils"),G=new Map;function oe(Ee){if(!(0,me.isRelatedField)(Ee))return null;const[ve,Re]=Ee.split("/").slice(1);return{layerId:ve,fieldName:Re}}function R(Ee,ve){const Re=function q(Ee,ve){if(!ve.relationships)return null;let Re=null;const{relationships:Ve}=ve;return Ve.some(Ze=>Ze.id===parseInt(Ee,10)&&(Re=Ze,!0)),Re}(Ee,ve);if(Re)return{url:`${ve.url}/${Re.relatedTableId}`,sourceSpatialReference:ve.spatialReference,relation:Re,relatedFields:[],outStatistics:[]}}function B(Ee,ve){if(!ve||!Ee)return;const{features:Re,statsFeatures:Ve}=Ee,Ze=Re?.value;ve.relatedFeatures=Ze?Ze.features:[];const ze=Ve?.value;ve.relatedStatsFeatures=ze?ze.features:[]}function te(){return(te=(0,z.A)(function*(Ee,ve,Re,Ve){const Ze=Re.layerId.toString(),{layerInfo:ze,relation:Xe,relatedFields:ke,outStatistics:_t,url:J,sourceSpatialReference:K}=ve,X=function C(Ee){return Ee?(0,Ue.Am)(Ee):void 0}(ke),se=function P(Ee){return Ee?(0,Ue.Am)(Ee,(ve,Re)=>JSON.stringify(ve.toJSON())===JSON.stringify(Re.toJSON())):void 0}(_t);if(!ze||!Xe)return null;const xe=function w({originRelationship:Ee,relationships:ve,layerId:Re}){return ve.find(({relatedTableId:Ve,id:Ze})=>`${Ve}`===Re&&Ze===Ee?.id)??null}({originRelationship:Xe,relationships:ze.relationships,layerId:Ze});if(xe?.relationshipTableId&&xe.keyFieldInRelationshipTable){const ee=(yield function Z(Ee,ve,Re,Ve){const Ze=new ne.default;return Ze.outFields=["*"],Ze.relationshipId="number"==typeof ve.id?ve.id:parseInt(ve.id,10),Ze.objectIds=[Ee.attributes[Re.objectIdField]],Ze.gdbVersion=Re.gdbVersion??null,Ze.historicMoment=Re.historicMoment??null,Re.queryRelatedFeatures?.(Ze,Ve)??Promise.resolve({})}(Ee,xe,Re,Ve))[Ee.attributes[Re.objectIdField]];if(!ee)return null;const fe=ee.features.map(L=>L.attributes[ze.objectIdField]);if(se?.length&&ze.supportsStatistics){const L=new Pe.A;L.where=function Q(Ee,ve,Re){let Ve=0;const Ze=[];for(;Ve<ve.length;)Ze.push(`${Ee} IN (${ve.slice(Ve,Re+Ve)})`),Ve+=Re;return Ze.join(" OR ")}(ze.objectIdField,fe,1e3),L.outFields=X,L.outStatistics=se,L.sourceSpatialReference=K;const Me={features:Promise.resolve(ee),statsFeatures:(0,H.s)(J,L)};return(0,ye.Lx)(Me)}}const Y=xe?.keyField;if(Y){const ee=(0,je.WA)(function Le(Ee,ve){if(null!=Ee){ve=ve.toLowerCase();for(const Re of Ee)if(Re&&Re.name.toLowerCase()===ve)return Re}return null}(ze.fields,Y)),fe=function U(Ee,ve){const Re=ve.toLowerCase();for(const Ve in Ee)if(Ve.toLowerCase()===Re)return Ee[Ve];return null}(Ee.attributes,Xe.keyField),L=ee?`${Y}=${fe}`:`${Y}='${fe}'`,he=(0,H.s)(J,new Pe.A({where:L,outFields:X,sourceSpatialReference:K,historicMoment:Re.historicMoment,gdbVersion:Re.gdbVersion}),Ve),Ce=se?.length&&ze.supportsStatistics?(0,H.s)(J,new Pe.A({where:L,outFields:X,outStatistics:se,sourceSpatialReference:K}),Ve):null,Se={features:he};return Ce&&(Se.statsFeatures=Ce),(0,ye.Lx)(Se)}return null})).apply(this,arguments)}function re({relatedInfos:Ee,layer:ve},Re){const Ve={};return Ee.forEach((Ze,ze)=>{const{relation:Xe}=Ze;if(!Xe){const X=new ae.A("relation-required","A relation is required on a layer to retrieve related records.");throw ge().error(X),X}const{relatedTableId:ke}=Xe;if("number"!=typeof ke){const X=new ae.A("A related table ID is required on a layer to retrieve related records.");throw ge().error(X),X}const _t=`${ve.url}/${ke}`,J=G.get(_t),K=J??function _e(Ee,ve){return(0,E.A)(Ee,{query:{f:"json"},signal:ve?.signal})}(_t);J||G.set(_t,K),Ve[ze]=K}),(0,ye.qr)((0,ye.Lx)(Ve),Re)}function ce({graphic:Ee,relatedInfos:ve,layer:Re},Ve){const Ze={};return ve.forEach((ze,Xe)=>{ze.layerInfo&&(Ze[Xe]=function W(Ee,ve,Re,Ve){return te.apply(this,arguments)}(Ee,ze,Re,Ve))}),(0,ye.Lx)(Ze)}function de({relatedInfo:Ee,fieldName:ve,fieldInfo:Re}){if(Ee.relatedFields?.push(ve),Re.statisticType){const Ve=new V.A({statisticType:Re.statisticType,onStatisticField:ve,outStatisticFieldName:ve});Ee.outStatistics?.push(Ve)}}},36634:(st,We,_)=>{_.r(We),_.d(We,{getColorFromPointCloudStops:()=>V,getRampStops:()=>ye,getRampStopsForPointCloud:()=>ne,getStretchRampStops:()=>ue});var z=_(10467),E=_(68677),Ue=_(76882);const ae=new E.A([64,64,64]);function k(ge,G){const oe=[],q=ge.length-1;return 5===ge.length?oe.push(0,2,4):oe.push(0,q),ge.map((w,U)=>oe.includes(U)?(0,Ue.createStopLabel)(w,U,q,G):null)}function ye(ge,G,oe){return je.apply(this,arguments)}function je(){return je=(0,z.A)(function*(ge,G,oe){let q=!1,w=[],U=[];if(ge.stops){const Q=ge.stops;w=Q.map(C=>C.value),q=Q.some(C=>!!C.label),q&&(U=Q.map(C=>C.label))}if(null==w[0]&&null==w[w.length-1])return null;const Z=q?null:k(w,oe);return(yield Promise.all(w.map(function(){var Q=(0,z.A)(function*(C,P){return{value:C,color:"opacity"===ge.type?yield H(C,ge,G):(yield Promise.resolve().then(_.bind(_,77522))).getColor(ge,C),label:q?U[P]:Z?.[P]??""}});return function(C,P){return Q.apply(this,arguments)}}()))).reverse()}),je.apply(this,arguments)}function H(ge,G,oe){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,z.A)(function*(ge,G,oe){const q=new E.A(oe??ae),w=(yield Promise.resolve().then(_.bind(_,77522))).getOpacity(G,ge);return null!=w&&(q.a=w),q})).apply(this,arguments)}function ne(ge){let G=!1,oe=[],q=[];if(oe=ge.map(B=>B.value),G=ge.some(B=>!!B.label),G&&(q=ge.map(B=>B.label??"")),null==oe[0]&&null==oe[oe.length-1])return null;const R=G?null:k(oe);return oe.map((B,Z)=>({value:B,color:V(B,ge),label:G?q[Z]:R?.[Z]??""})).reverse()}function V(ge,G){const{startIndex:oe,endIndex:q,weight:w}=function me(ge,G){let oe=0,q=G.length-1;return G.some((w,U)=>ge<w.value?(q=U,!0):(oe=U,!1)),{startIndex:oe,endIndex:q,weight:(ge-G[oe].value)/(G[q].value-G[oe].value)}}(ge,G);if(oe===q)return G[oe].color;const U=E.A.blendColors(G[oe].color,G[q].color,w);return new E.A(U)}function ue(ge,G){let oe=[];if(ge&&"multipart"===ge.type)ge.colorRamps.reverse().forEach((q,w)=>{oe.push(0===w?{value:G.max,color:new E.A(q.toColor),label:"high"}:{value:null,color:new E.A(q.toColor),label:""}),oe.push(w===ge.colorRamps.length-1?{value:G.min,color:new E.A(q.fromColor),label:"low"}:{value:null,color:new E.A(q.fromColor),label:""})});else{let q,w;ge&&"algorithmic"===ge.type?(q=ge.fromColor,w=ge.toColor):(q=[0,0,0,1],w=[255,255,255,1]),oe=[{value:G.max,color:new E.A(w),label:"high"},{value:G.min,color:new E.A(q),label:"low"}]}return oe}},76882:(st,We,_)=>{_.r(We),_.d(We,{createStopLabel:()=>Pe,getDateFormatOptions:()=>q,getMedianColor:()=>V,getReferenceSizeAuthoringInfoVisualVariable:()=>w,getSymbolForFlowRenderer:()=>ue,rgbImgSource:()=>ne,specialCharsGreaterThan:()=>H,specialCharsLessThan:()=>je});var z=_(10467),E=_(97442),Ue=_(86300),ae=_(91515),k=_(43039),ye=_(55417);const je="<",H=">";function Pe(U,R,B,Z){let Q="";return 0===R?Q=`${je} `:R===B&&(Q=`${H} `),Q+(Z?(0,k.i0)(U,Z):(0,ae.GP)(U))}const ne=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII="];function V(U){return me.apply(this,arguments)}function me(){return(me=(0,z.A)(function*(U){if(!("visualVariables"in U)||!U.visualVariables)return null;const R=U.visualVariables.find(P=>"color"===P.type);if(!R)return null;let B=null,Z=null;if(R.stops){if(1===R.stops.length)return R.stops[0].color;B=R.stops[0].value,Z=R.stops[R.stops.length-1].value}const Q=null!=B&&null!=Z?B+(Z-B)/2:0,{getColor:C}=yield Promise.resolve().then(_.bind(_,77522));return C(R,Q)??null})).apply(this,arguments)}function ue(U,R){return ge.apply(this,arguments)}function ge(){return(ge=(0,z.A)(function*(U,R){const B=U.trailCap,Z=U.trailWidth||1,Q=R||(yield V(U))||U.color;return new ye.A({cap:B,color:Q,width:Z})})).apply(this,arguments)}function q(U,R,B){const Z=function G(U,R){if(!R.field)return null;if("featureReduction"in U)switch(U.featureReduction?.type){case"cluster":case"binning":{const B=U.featureReduction.fields.find(({name:Z})=>Z.toLowerCase()===R.field.toLowerCase());return B&&"getField"in U?U.getField(B.onStatisticField):null}}return"getField"in U?U.getField?.(R.field):null}(U,R);if(!Z||!(0,k.fs)(Z)&&!(0,Ue.OH)(Z))return null;let Q=function oe(U,R){const B="popupTemplate"in U?U.popupTemplate?.fieldInfos:null;if(B?.length&&R)return B.find(Z=>Z.fieldName?.toLowerCase()===R.toLowerCase())?.format?.dateFormat}(U,Z.name);if(!Q&&"date"===Z.type){let C=0,P=0;R.stops?(C=R.stops?.at(0)?.value??C,P=R.stops?.at(-1)?.value??P):"minDataValue"in R&&"maxDataValue"in R&&(C=R.minDataValue??C,P=R.maxDataValue??P),Q=P-C>2*E.vf.days?"short-date":"short-date-short-time"}return{fieldType:Z.type,format:Q,timeZoneOptions:{layerTimeZone:"preferredTimeZone"in U?U.preferredTimeZone:null,viewTimeZone:B,datesInUnknownTimezone:"datesInUnknownTimezone"in U&&U.datesInUnknownTimezone}}}function w(U){if("authoringInfo"in U)return U.authoringInfo?.visualVariables?.find(({theme:R})=>"reference-size"===R)}},70542:(st,We,_)=>{_.r(We),_.d(We,{default:()=>un});var z=_(10467),E=_(8189),Ue=_(35150),ae=_(56492),k=_(48900),ye=_(3804),je=_(1119),H=_(85211),V=(_(3248),_(40707),_(76576)),me=_(11342),ge=(_(13242),_(31178)),G=_(98158);function w(M){switch(M?.type){case"point":return M;case"extent":return M.center;case"polygon":return M.centroid;case"multipoint":case"polyline":return M.extent?.center;default:return null}}_(28067),_(40856);var C=_(46186);function W(M){return M?{backgroundImage:`url(${M})`}:{}}var _e=_(10573),re=_(2188),ce=_(42425),de=_(13970);let Le=class extends ce.A.EventedAccessor{constructor(M){super(M),this.location=null,this.screenLocationEnabled=!1,this.view=null,this.addHandles([(0,k.z7)(()=>{const I=this.screenLocationEnabled?this.view:null;return I?[I.size,"3d"===I.type?I.camera:I.viewpoint]:null},()=>this.notifyChange("screenLocation")),(0,k.wB)(()=>this.screenLocation,(I,$)=>{null!=I&&null!=$&&this.emit("view-change")})])}destroy(){this.view=null}get screenLocation(){const{location:M,view:I,screenLocationEnabled:$}=this,pe=I?.spatialReference,Ae=pe?(0,de.projectOrLoad)(M,pe).geometry:null;return $&&Ae&&I?.ready?I.toScreen(Ae):null}};(0,E._)([(0,H.MZ)()],Le.prototype,"location",void 0),(0,E._)([(0,H.MZ)()],Le.prototype,"screenLocation",null),(0,E._)([(0,H.MZ)()],Le.prototype,"screenLocationEnabled",void 0),(0,E._)([(0,H.MZ)()],Le.prototype,"view",void 0),Le=(0,E._)([(0,V.$)("esri.widgets.support.AnchorElementViewModel")],Le);const Ee=Le;let ve=class extends Ee{constructor(M){super(M),this.visible=!1}};(0,E._)([(0,H.MZ)()],ve.prototype,"visible",void 0),ve=(0,E._)([(0,V.$)("esri.widgets.Spinner.SpinnerViewModel")],ve);const Re=ve;var Ve=_(60421),Ze=_(56295);const ze="esri-spinner",Xe_base=ze,Xe_spinnerStart=`${ze}--start`,Xe_spinnerFinish=`${ze}--finish`;let ke=class extends re.A{constructor(M,I){super(M,I),this._animationDelay=500,this._animationPromise=null,this.viewModel=new Re}initialize(){this.addHandles((0,k.wB)(()=>this.visible,M=>this._visibleChange(M)))}destroy(){this._animationPromise=null}get location(){return this.viewModel.location}set location(M){this.viewModel.location=M}get view(){return this.viewModel.view}set view(M){this.viewModel.view=M}get visible(){return this.viewModel.visible}set visible(M){this.viewModel.visible=M}show(M){const{location:I,promise:$}=M??{};I&&(this.viewModel.location=I),this.visible=!0,$&&$.catch(()=>{}).then(()=>this.hide())}hide(){this.visible=!1}render(){const{visible:M}=this,{screenLocation:I}=this.viewModel,$=!!I,be={[Xe_spinnerStart]:M&&$,[Xe_spinnerFinish]:!M&&$},Fe=this._getPositionStyles();return(0,Ze.K)("div",{class:this.classes(Xe_base,be),styles:Fe})}_visibleChange(M){if(M)return void(this.viewModel.screenLocationEnabled=!0);const I=(0,ae.Pl)(this._animationDelay);this._animationPromise=I,I.catch(()=>{}).then(()=>{this._animationPromise===I&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)})}_getPositionStyles(){const{screenLocation:M,view:I}=this.viewModel;if(null==I||null==M)return{};const{padding:$}=I;return{left:M.x-$.left+"px",top:M.y-$.top+"px"}}};(0,E._)([(0,H.MZ)()],ke.prototype,"location",null),(0,E._)([(0,H.MZ)()],ke.prototype,"view",null),(0,E._)([(0,H.MZ)({type:Re})],ke.prototype,"viewModel",void 0),(0,E._)([(0,H.MZ)()],ke.prototype,"visible",null),ke=(0,E._)([(0,V.$)("esri.widgets.Spinner")],ke);const _t=ke;var J=_(58084),K=_(72029);const X="esri-features",se={icon:`${X}__icon`,actionImage:`${X}__action-image`,base:X,container:`${X}__container`,contentContainer:`${X}__content-container`,contentFeature:`${X}__content-feature`,flowItemCollapsed:`${X}__flow-item--collapsed`,header:`${X}__header`,footer:`${X}__footer`,featureMenuObserver:`${X}__feature-menu-observer`,actionExit:`${X}__action--exit`,loader:`${X}__loader`,featuresHeading:`${X}__heading`,paginationText:`${X}__pagination-text`,paginationActionBar:`${X}__pagination-action-bar`,paginationMenuButton:`${X}__pagination-menu-button`,paginationPrevious:`${X}__pagination-previous`,paginationNext:`${X}__pagination-next`};var xe=_(52491),Y=_(41866),ee=_(37360);const fe=ge.A.ofType({key:"type",defaultKeyValue:"button",base:xe.A,typeMap:{button:me.A,toggle:Y.A}}),L=new me.A({icon:"magnifying-glass-plus",id:"zoom-to-feature",title:"{messages.zoom}",className:ee.T.zoomInMagnifyingGlass}),Me=new me.A({icon:"trash",id:"remove-selected-feature",title:"{messages.remove}",className:ee.T.trash}),S=new me.A({icon:"magnifying-glass-plus",id:"zoom-to-clustered-features",title:"{messages.zoom}",className:ee.T.zoomInMagnifyingGlass}),he=new Y.A({icon:"table",id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:ee.T.table,value:!1});var Se=_(42900),Te=_(5668);const Ke=L.clone();let qe=class extends re.A{constructor(M,I){super(M,I),this.messages=null,this.closed=!1,this.closable=!0,this._handleOpenFeature=$=>{this.emit("open-feature",{feature:$})},this._handleZoomToFeature=$=>{this.emit("zoom-to-feature",{featureWidget:$})}}loadDependencies(){return(0,Se.W)({action:()=>Promise.all([_.e(1951),_.e(6126),_.e(9838)]).then(_.bind(_,86126)),"action-bar":()=>Promise.all([_.e(1951),_.e(8569),_.e(6126),_.e(3277),_.e(2076),_.e(9253)]).then(_.bind(_,71634)),"action-group":()=>Promise.all([_.e(1951),_.e(8569),_.e(6126),_.e(3277),_.e(2076)]).then(_.bind(_,72152)),"flow-item":()=>Promise.all([_.e(1951),_.e(8569),_.e(6126),_.e(3277),_.e(1634),_.e(3300)]).then(_.bind(_,53300))})}render(){const{flowItems:M}=this,I=M?.toArray();return(0,Ze.K)(Ze.w,null,I?.map(($,pe)=>this._renderFlowItem($,pe===M.length-1)))}_handleCloseClick(){this.emit("close")}_handleExitClick(){this.emit("exit")}_handleDrillInBackClick(){const{flowItems:M}=this,I=M?.pop();I&&("activeCategory"in I.viewModel?(I.viewModel.activeCategory=null,M.length||(I.viewModel.showAllEnabled=!1)):"showAllEnabled"in I.viewModel&&(I.viewModel.showAllEnabled=!1),I&&(I.viewModel=null,I.destroy()))}_getExitMessage(M){switch(M.flowType){case"feature":case"feature-association":return"";case"feature-relationship":return this.messages.exitRelatedRecords;case"feature-utility-network-associations":case"feature-utility-network-association-type":return this.messages.exitAssociations}}_renderFlowItem(M,I){const{messages:$,closable:pe,closed:Ae}=this,be="graphic"in M&&!M.isTable,Fe="feature-association"===M.flowType,Ne=this._getExitMessage(M),He=$.selectFeature;return(0,Ze.K)("calcite-flow-item",{bind:this,closable:pe,closed:Ae,description:(0,je._e)(this._getDrillInFlowItemDescription(M)??""),heading:(0,je._e)(M.title??""),key:`flow-item-${M.viewModel.uid}`,selected:I,onCalciteFlowItemBack:it=>{it.preventDefault(),this._handleDrillInBackClick()},onCalciteFlowItemClose:this._handleCloseClick},(0,Ze.K)("calcite-action",{appearance:"transparent",bind:this,class:se.actionExit,icon:"move-up",key:"exit-action",onclick:this._handleExitClick,slot:"header-actions-start",text:Ne,title:Ne}),be?(0,Ze.K)("calcite-action",{appearance:"transparent",bind:this,icon:"zoom-to-object",key:"open-feature-action",onclick:()=>this._handleOpenFeature(M),slot:"header-actions-end",text:He,title:He}):null,Fe?(0,Ze.K)("calcite-action-bar",{expandDisabled:!0,expanded:!0,key:"header-action-bar",scale:"s",slot:"action-bar"},(0,Ze.K)("calcite-action-group",{overlayPositioning:"fixed",scale:"s"},this._renderDefaultActions(M))):null,(0,Ze.K)("div",{class:se.container},M.render()))}_renderDefaultActions(M){const I=this._getActionTitle(Ke);return(0,Ze.K)("calcite-action",{active:Ke.active,appearance:"solid",bind:this,"data-action-uid":Ke.uid,disabled:Ke.disabled,icon:Ke.icon??"question",indicator:Ke.indicator,key:`action-${Ke.uid}`,loading:Ke.active,onclick:()=>this._handleZoomToFeature(M),scale:"s",text:I,textEnabled:!0,title:I})}_getActionTitle(M){const{messages:I}=this,{id:$}=M,pe=M.title??"";return"zoom-to-feature"===$?(0,C.V)(pe,{messages:I}):pe}_getDrillInFlowItemDescription(M){switch(M.flowType){case"feature":case"feature-association":case"feature-utility-network-associations":return M.viewModel.description??"";case"feature-relationship":return M.allItemsDescription;case"feature-utility-network-association-type":return M.description??""}}};(0,E._)([(0,H.MZ)()],qe.prototype,"flowItems",void 0),(0,E._)([(0,H.MZ)(),(0,Te.G)("esri/widgets/Features/t9n/Features")],qe.prototype,"messages",void 0),(0,E._)([(0,H.MZ)()],qe.prototype,"closed",void 0),(0,E._)([(0,H.MZ)()],qe.prototype,"closable",void 0),qe=(0,E._)([(0,V.$)("esri.widgets.Features.FeaturesDrillIn")],qe);const Je=qe;var lt=_(81098),tt=_(89952),yt=_(5922),ht=_(43141),Ot=_(1749),Ut=_(32034),wt=_(55039),Vt=_(88521),ti=(_(58443),_(48218)),$t=(_(8134),_(44460),_(16633),_(83393));function Ri(M){return M&&"opacity"in M?M.opacity*Ri(M.parent):1}function Kt(M,I){return pt.apply(this,arguments)}function pt(){return(pt=(0,z.A)(function*(M,I){if(!M)return;const $=M.sourceLayer,pe=(null!=I&&I.useSourceLayer?$:M.layer)??$,Ae=I?.ignoreOpacity?1:Ri(pe);if(null!=M.symbol&&(null==I||!0!==I.ignoreGraphicSymbol)){const Lt="web-style"===M.symbol.type?yield M.symbol.fetchSymbol({...I,acceptedFormats:["web","cim"],cache:null!=I?I.webStyleCache:null}):M.symbol.clone();return(0,$t.dt)(Lt,null,Ae),Lt}const be=I?.renderer??function ie(M){if(M)return"renderer"in M?M.renderer:void 0}(pe);let Fe=be&&"getSymbolAsync"in be?yield be.getSymbolAsync(M,I):null;if(!Fe)return;if(Fe="web-style"===Fe.type?yield Fe.fetchSymbol({...I,cache:null!=I?I.webStyleCache:null}):Fe.clone(),!be||!("visualVariables"in be)||!be.visualVariables?.length)return(0,$t.dt)(Fe,null,Ae),Fe;if("arcadeRequiredForVisualVariables"in be&&be.arcadeRequiredForVisualVariables&&null==I?.arcade){const Lt={...I};Lt.arcade=yield(0,ti.lw)(),I=Lt}const{getColor:Ne,getOpacity:He,getAllSizes:it,getRotationAngle:et}=yield Promise.resolve().then(_.bind(_,77522)),at=[],nt=[],ft=[],ct=[];for(const Lt of be.visualVariables)switch(Lt.type){case"color":at.push(Lt);break;case"opacity":nt.push(Lt);break;case"rotation":ct.push(Lt);break;case"size":Lt.target||ft.push(Lt)}const Pt=!!at.length&&at[at.length-1],xt=Pt?Ne(Pt,M,I):null,ei=!!nt.length&&nt[nt.length-1];let Xt=ei?He(ei,M,I):null;if(null!=Ae&&(Xt=null!=Xt?Xt*Ae:Ae),I?.ignoreOpacity&&(Xt=1),(0,$t.dt)(Fe,xt,Xt),ft.length&&!0!==I?.ignoreSizeVariables){const Lt=it(ft,M,I);yield(0,$t.UQ)(Fe,Lt)}if(!0!==I?.ignoreRotationVariables)for(const Lt of ct)(0,$t.GG)(Fe,et(Lt,M,I),Lt.axis);return Fe})).apply(this,arguments)}_(86308),_(77806),_(20175);var ut=_(20543),gt=_(6558),At=_(79895);const Dt=()=>Ue.A.getLogger("esri.widgets.Popup.PopupViewModel"),Nt=M=>{const{event:I,view:$,viewModel:pe}=M,{action:Ae}=I;if(!Ae)return Promise.reject(new yt.A("trigger-action:missing-arguments","Event has no action"));const{disabled:be,id:Fe}=Ae;if(!Fe)return Promise.reject(new yt.A("trigger-action:invalid-action","action.id is missing"));if(be)return Promise.reject(new yt.A("trigger-action:invalid-action","Action is disabled"));if(Fe===L.id)return si(pe).catch(ae.jH);if(Fe===S.id)return function gi(M){return Yt.apply(this,arguments)}(pe);if(Fe===he.id)return pe.browseClusterEnabled=!pe.browseClusterEnabled,pe.featureMenuOpen=pe.browseClusterEnabled,Promise.resolve();if(Fe===Me.id){pe.visible=!1;const{selectedFeature:Ne}=pe;if(!Ne)return Promise.reject(new yt.A(`trigger-action:${Me.id}`,"selectedFeature is required",{selectedFeature:Ne}));const{sourceLayer:He}=Ne;return He?He.remove(Ne):$?.graphics.remove(Ne),Promise.resolve()}return Promise.resolve()};function ni(M){const{selectedFeature:I,location:$,view:pe}=M;return pe?I??$??null:null}function bt(M){return!!M&&M.isAggregate&&"cluster"===M.sourceLayer?.featureReduction?.type}function kt(){return(kt=(0,z.A)(function*(M,I){if("3d"!==I?.type||!M||"esri.Graphic"!==M.declaredClass)return!0;const $=I.getViewForGraphic(M);if($&&"whenGraphicBounds"in $){let pe=null;try{pe=yield $.whenGraphicBounds(M,{useViewElevation:!0})}catch{}return!pe||!pe.boundingBox||pe.boundingBox[0]===pe.boundingBox[3]&&pe.boundingBox[1]===pe.boundingBox[4]&&pe.boundingBox[2]===pe.boundingBox[5]}return!0})).apply(this,arguments)}function si(M,I){return Jt.apply(this,arguments)}function Jt(){return Jt=(0,z.A)(function*(M,I){const{location:$,selectedFeature:pe,view:Ae,zoomFactor:be}=M;yield I?.viewModel?.updateGeometry();const Fe=I?.graphic,Ne=Fe?.geometry?Fe:ni(M);if(!Ae||!Ne){const at=new yt.A("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:Ne,view:Ae});throw Dt().error(at),at}const He=Ae.scale/be,it=Fe?.geometry??M.selectedFeature?.geometry??$,et=null!=it&&"point"===it.type&&(yield function hi(M,I){return kt.apply(this,arguments)}(Fe??pe,Ae));L.active=!0,L.disabled=!0;try{yield M.zoomTo({target:{target:Ne,scale:et?He:void 0}})}catch(at){if((0,ae.zf)(at))return;const nt=new yt.A("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:Fe??pe});Dt().error(nt)}finally{L.active=!1,L.disabled=!1,M.zoomToLocation=null,et&&(M.location=it)}}),Jt.apply(this,arguments)}function Yt(){return(Yt=(0,z.A)(function*(M){const{selectedFeature:I,view:$}=M;if("2d"!==$?.type){const Fe=new yt.A("zoomToCluster:invalid-view","View must be 2d MapView.",{view:$});throw Dt().error(Fe),Fe}if(!I||!bt(I)){const Fe=new yt.A("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:I});throw Dt().error(Fe),Fe}const[pe,Ae]=yield Ti($,I);S.active=!0,S.disabled=!0;const{extent:be}=yield pe.queryExtent(Ae);be&&(yield M.zoomTo({target:be})),S.active=!1,S.disabled=!1})).apply(this,arguments)}function vi(){return(vi=(0,z.A)(function*(M){const{view:I,selectedFeature:$}=M;if(!I||!$)return;const[pe,Ae]=yield Ti(I,$),{extent:be}=yield pe.queryExtent(Ae);M.selectedClusterBoundaryFeature.geometry=be,I.graphics.add(M.selectedClusterBoundaryFeature)})).apply(this,arguments)}function St(){return(St=(0,z.A)(function*(M){const{selectedFeature:I,view:$}=M;if(!$||!I)return;const[pe,Ae]=yield Ti($,I);he.active=!0,he.disabled=!0;const{features:be}=yield pe.queryFeatures(Ae);he.active=!1,he.disabled=!1,he.value=!0;const Fe={features:[I].concat(be)};"feature"===M?.initialDisplayMode&&(Fe.featureMenuOpen=!0),M?.open(Fe)})).apply(this,arguments)}function Ti(M,I){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,z.A)(function*(M,I){const $=yield M.whenLayerView(I.sourceLayer),pe=$.createQuery(),Ae=I.getObjectId();return pe.aggregateIds=null!=Ae?[Ae]:[],[$,pe]})).apply(this,arguments)}var ai=_(10361);const A="location-scale-handle";let Ie=null,Oe=class extends((0,ai.A)(Ee)){constructor(M){var I;super(M),I=this,this._pendingPromises=new ht.A,this._fetchFeaturesController=null,this._highlightPromises={"highlight-active-feature":null,"highlight-selected-feature":null},this._selectedClusterFeature=null,this.actions=new fe,this.activeFeature=null,this.autoCloseEnabled=!1,this.browseClusterEnabled=!1,this.content=null,this.defaultPopupTemplateEnabled=!1,this.featurePage=null,this.featuresPerPage=20,this.featureMenuOpen=!1,this.featureMenuTitle=null,this.featureViewModelAbilities=null,this.featureViewModels=[],this.highlightEnabled=!0,this.includeDefaultActions=!0,this.initialDisplayMode="feature",this.selectedClusterBoundaryFeature=new lt.A({symbol:new Vt.A({outline:{width:1.5,color:"cyan"},style:"none"})}),this.title=null,this.updateLocationEnabled=!1,this.view=null,this.visible=!1,this.zoomFactor=4,this.zoomToLocation=null,this._debouncedLocationUpdate=(0,ae.sg)(function(){var $=(0,z.A)(function*(pe){const{spatialReference:Ae}=I,be=I.selectedFeature?.geometry?.type,Fe=I.location??pe;if(be&&"mesh"!==be&&Ae&&Fe&&I.selectedFeature)if("point"!==be)try{const Ne=I.selectedFeature;let He=Ne.geometry;const it=I._getHighlightLayer(Ne),et=Ne.getObjectId();if(!it||!I.view)return;if(et){const at=I.view?.allLayerViews.find(ct=>ct.layer.uid===it.uid);if(!at||!("queryFeatures"in at))return;const nt=at.createQuery();nt.outSpatialReference=Ae,nt.objectIds=[et],nt.returnGeometry=!0;const{features:ft}=yield at.queryFeatures(nt);He=ft[0]?.geometry}if(!He||"mesh"===He.type)return;if(He=(0,de.project)(He,Ae),Ie||(Ie=yield _.e(9154).then(_.bind(_,16773))),!(yield Ie.intersects(He,Fe))){const at=(yield Ie.nearestCoordinate(He,Fe)).coordinate??Fe;I.selectedFeature===Ne&&(I.location=at)}}catch(Ne){(0,ae.zf)(Ne)||Ue.A.getLogger(I).error(Ne)}else I.location=w(I.selectedFeature.geometry)??Fe});return function(pe){return $.apply(this,arguments)}}())}initialize(){this.addHandles([this.on("view-change",()=>this._autoClose()),(0,k.wB)(()=>[this.highlightEnabled,this.selectedFeature,this.visible,this.view],()=>this._highlightSelectedFeature()),(0,k.wB)(()=>[this.highlightEnabled,this.activeFeature,this.visible,this.view],()=>this._highlightActiveFeature()),(0,k.wB)(()=>this.view?.animation?.state,M=>this._animationStateChange(M)),(0,k.wB)(()=>this.location,M=>this._locationChange(M)),(0,k.wB)(()=>this.selectedFeature,M=>this._selectedFeatureChange(M)),(0,k.wB)(()=>[this.selectedFeatureIndex,this.featureCount,this.featuresPerPage],()=>this._selectedFeatureIndexChange()),(0,k.wB)(()=>[this.featurePage,this.selectedFeatureIndex,this.featureCount,this.featuresPerPage,this.featureViewModels],()=>this._setGraphicOnFeatureViewModels()),(0,k.wB)(()=>this.featureViewModels,()=>this._featureViewModelsChange()),this.on("trigger-action",M=>Nt({event:M,viewModel:this,view:this.view})),(0,k.z7)(()=>!this.waitingForResult,()=>this._waitingForResultChange(),k.OH),(0,k.wB)(()=>[this.features,this.map,this.spatialReference,this.timeZone],()=>this._updateFeatureVMs()),(0,k.wB)(()=>this.view?.scale,()=>this._viewScaleChange()),(0,k.z7)(()=>!this.visible,()=>this.browseClusterEnabled=!1),(0,k.wB)(()=>this.browseClusterEnabled,M=>M?this.enableClusterBrowsing():this.disableClusterBrowsing())])}destroy(){this._cancelFetchingFeatures(),this._pendingPromises.clear(),this.browseClusterEnabled=!1,this.view=null,this.map=null,this.spatialReference=null,this.timeZone=null}get active(){return!(!this.visible||this.waitingForResult)}get allActions(){const M=this._get("allActions")||new fe;M.removeAll();const{actions:I,defaultActions:$,defaultPopupTemplateEnabled:pe,includeDefaultActions:Ae,selectedFeature:be}=this,Fe=Ae?$.concat(I):I,Ne=be&&("function"==typeof be.getEffectivePopupTemplate&&be.getEffectivePopupTemplate(pe)||be.popupTemplate),He=Ne?.actions;return(Ne?.overwriteActions?He:He?.concat(Fe)??Fe)?.filter(Boolean).forEach(et=>M.add(et)),M}get defaultActions(){const M=this._get("defaultActions")||new fe;return M.removeAll(),M.addMany(bt(this.selectedFeature)?[S.clone(),he.clone()]:[L.clone()]),M}get featureCount(){return this.features.length}set features(M){const I=M||[];this._set("features",I);const{pendingPromisesCount:$,promiseCount:pe,selectedFeatureIndex:Ae}=this,be=pe&&I.length;"list"!==this.initialDisplayMode?be&&$&&-1===Ae?this.selectedFeatureIndex=0:be&&-1!==Ae||(this.selectedFeatureIndex=I.length?0:-1):(!be||be&&$===pe)&&(this.selectedFeatureIndex=-1)}set location(M){let I=M;const $=this.spatialReference?.isWebMercator;M?.spatialReference?.isWGS84&&$&&(I=(0,wt.Gh)(M)),this._set("location",I)}get map(){return this.view?.map??null}set map(M){this._override("map",M)}get pendingPromisesCount(){return this._pendingPromises.size}get promiseCount(){return this.promises.length}get promises(){return this._get("promises")||[]}set promises(M){this._pendingPromises.clear(),this.features=[],Array.isArray(M)&&M.length?(this._set("promises",M),(M=M.slice()).forEach(I=>this._pendingPromises.add(I)),M.reduce((I,$)=>I.finally(()=>$.then(pe=>{this._pendingPromises.has($)&&this._updateFeatures(pe)}).finally(()=>this._pendingPromises.delete($)).catch(()=>{})),Promise.resolve())):this._set("promises",[])}get selectedFeature(){const{features:M,selectedFeatureIndex:I}=this;return-1===I?null:M[I]||null}get selectedFeatureIndex(){const M=this._get("selectedFeatureIndex");return"number"==typeof M?M:-1}set selectedFeatureIndex(M){const{featureCount:I}=this;(isNaN(M)||M<0||!I)&&(M=-1),this.activeFeature=null,this._set("selectedFeatureIndex",M)}get selectedFeatureViewModel(){return this.featureViewModels[this.selectedFeatureIndex]||null}get spatialReference(){return this.view?.spatialReference??null}set spatialReference(M){this._override("spatialReference",M)}get state(){const{view:M,map:I}=this;return M?M.ready?"ready":"disabled":I?"ready":"disabled"}get timeZone(){return this.view?.timeZone??ut.qU}set timeZone(M){this._overrideIfSome("timeZone",M)}get waitingForContents(){return this.featureViewModels.some(M=>M.waitingForContent)}get waitingForResult(){return!(!(this._fetchFeaturesController||this.pendingPromisesCount>0)||0!==this.featureCount)}centerAtLocation(){const{view:M}=this,I=ni(this);return I&&M?this.callGoTo({target:{target:I,scale:M.scale}}):Promise.reject(new yt.A("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:I,view:M}))}zoomTo(M){return this.callGoTo(M)}clear(){this.set({promises:[],features:[],content:null,title:null,location:null,activeFeature:null})}fetchFeatures(M,I){const{view:$}=this;if(!$||!M)throw new yt.A("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:M,view:$});return $.fetchPopupFeatures(M,{pointerType:I?.event?.pointerType,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:I?.signal})}open(M){const I={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,...M,visible:!0},{fetchFeatures:$}=I;delete I.fetchFeatures,$&&this._setFetchFeaturesPromises(I.location);const pe=["actionsMenuOpen","collapsed"];for(const Ae of pe)delete I[Ae];this.set(I)}triggerAction(M){const I=this.allActions.at(M);I&&!I.disabled&&this.emit("trigger-action",{action:I})}next(){return this.selectedFeatureIndex=this._getRoundRobinIndex(this.selectedFeatureIndex+1,this.featureCount),this}previous(){return this.selectedFeatureIndex=this._getRoundRobinIndex(this.selectedFeatureIndex-1,this.featureCount),this}disableClusterBrowsing(){(function Tt(M){he.value=!1;const I=M.features.filter($=>bt($));I.length&&(M.features=I)})(this),this._clearBrowsedClusterGraphics()}enableClusterBrowsing(){var M=this;return(0,z.A)(function*(){const{view:I,selectedFeature:$}=M;"2d"===I?.type?bt($)?(yield function jt(M){return vi.apply(this,arguments)}(M),yield function bi(M){return St.apply(this,arguments)}(M)):Ue.A.getLogger(M).warn("enableClusterBrowsing:invalid-selectedFeature: Selected feature must represent an aggregate/cluster graphic.",$):Ue.A.getLogger(M).warn("enableClusterBrowsing:invalid-view: View must be 2d MapView.",$)})()}handleViewClick(M){this._fetchFeaturesAndOpen(M)}_getRoundRobinIndex(M,I){return(M+I)%I}_animationStateChange(M){this.zoomToLocation||(L.disabled="waiting-for-target"===M)}_clearBrowsedClusterGraphics(){const M=[this.selectedClusterBoundaryFeature,this._selectedClusterFeature].filter(tt.Ru);this.view?.graphics?.removeMany(M),this._selectedClusterFeature=null,this.selectedClusterBoundaryFeature.geometry=null}_viewScaleChange(){if(bt(this.selectedFeature))return this.browseClusterEnabled=!1,this.visible=!1,void this.clear();this.browseClusterEnabled&&(this.features=this.selectedFeature?[this.selectedFeature]:[])}_locationChange(M){const{selectedFeature:I,updateLocationEnabled:$,view:pe}=this;pe&&$&&M&&(!I||I.geometry)&&this.centerAtLocation()}_selectedFeatureIndexChange(){this.featurePage=this.featureCount>0?Math.floor((this.selectedFeatureIndex+1)/this.featuresPerPage):null}_featureViewModelsChange(){this.featurePage=this.featureCount>0?1:null}_setGraphicOnFeatureViewModels(){const{features:M,featureCount:I,featurePage:$,featuresPerPage:pe,featureViewModels:Ae}=this;if(null==$)return;const be=(($-1)*pe+I)%I;Ae.slice(be,be+pe).forEach((Ne,He)=>{Ne&&(Ne.graphic??=M[be+He])})}_selectedFeatureChange(M){var I=this;return(0,z.A)(function*(){const{location:$,updateLocationEnabled:pe,view:Ae}=I;if(!M||!Ae)return;if(I.browseClusterEnabled)return I._selectedClusterFeature&&(Ae.graphics.remove(I._selectedClusterFeature),I._selectedClusterFeature=null),bt(M)?void 0:(M.symbol=yield Kt(M),I._selectedClusterFeature=M,void Ae.graphics.add(I._selectedClusterFeature));const be=M.sourceLayer?.type;if("map-image"!==be&&"imagery"!==be&&"imagery-tile"!==be||(M.symbol=yield Kt(M)),!pe&&$||!M.geometry){if(pe&&!M.geometry){yield I.centerAtLocation();const Fe=Ae.center?.clone();Fe&&(I.location=Fe)}}else I.location=w(M.geometry)})()}_waitingForResultChange(){!this.featureCount&&this.promises&&(this.visible=!1)}_setFetchFeaturesPromises(M){var I=this;return(0,z.A)(function*(){const{pendingFeatures:$}=yield I._fetchFeaturesWithController({mapPoint:M});I.promises=$})()}_destroyFeatureVMs(){this.featureViewModels.forEach(M=>M&&!M.destroyed&&M.destroy()),this._set("featureViewModels",[])}_updateFeatureVMs(){const{selectedFeature:M,features:I,featureViewModels:$,view:pe,spatialReference:Ae,map:be,timeZone:Fe,location:Ne}=this;if(bt(I[0])||(this.browseClusterEnabled=!1),this._destroyFeatureVMs(),!I?.length)return;const He=$.slice(),it=[];I.forEach((et,at)=>{if(!et)return;let nt=null;if(He.some((ft,ct)=>(ft&&ft.graphic===et&&(nt=ft,He.splice(ct,1)),!!nt)),nt)it[at]=nt;else{const ft=new At.A({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:Ae,graphic:et===M?et:null,location:Ne,map:be,view:pe,timeZone:Fe});it[at]=ft}}),He.forEach(et=>et&&!et.destroyed&&et.destroy()),this._set("featureViewModels",it)}_getScreenPoint(M,I){var $=this;return(0,z.A)(function*(){const{spatialReference:pe,view:Ae}=$;if(!Ae)return null;yield Ae?.when();const be=M?.spatialReference;return be&&pe?(yield(0,de.initializeProjection)(be,pe,null,I),Ae.toScreen(M)):null})()}_cancelFetchingFeatures(){const M=this._fetchFeaturesController;M&&M.abort(),this._fetchFeaturesController=null}_projectScreenPointAndFetchFeatures({mapPoint:M,screenPoint:I,event:$,signal:pe}){var Ae=this;return(0,z.A)(function*(){return Ae.fetchFeatures(I??(yield Ae._getScreenPoint(M??Ae.location,{signal:pe})),{signal:pe,event:$})})()}_fetchFeaturesWithController({mapPoint:M,screenPoint:I,event:$}){this._cancelFetchingFeatures();const pe=new AbortController,{signal:Ae}=pe;this._fetchFeaturesController=pe;const be=this._projectScreenPointAndFetchFeatures({mapPoint:M,screenPoint:I,signal:Ae,event:$});return be.catch(()=>{}).then(()=>{this._fetchFeaturesController=null}),be}_fetchFeaturesAndOpen(M){var I=this;return(0,z.A)(function*(){const{mapPoint:$,screenPoint:pe}=M,{view:Ae}=I;I.removeHandles(A),I.addHandles([(0,k.wB)(()=>I.view?.scale,()=>I._debouncedLocationUpdate($).catch(Fe=>{(0,ae.zf)(Fe)||Ue.A.getLogger(I).error(Fe)})),(0,k.z7)(()=>!I.visible,()=>{I.removeHandles(A)},{once:!0})],A);const{pendingFeatures:be}=yield I._fetchFeaturesWithController({mapPoint:$,screenPoint:pe,event:M});Ae?.popup&&"open"in Ae.popup&&Ae.popup.open({location:$??void 0,promises:be})})()}_autoClose(){this.autoCloseEnabled&&(this.visible=!1)}_getLayerView(M,I){return(0,z.A)(function*(){return yield M.when(),M.whenLayerView(I)})()}_getHighlightLayer(M){const{layer:I,sourceLayer:$}=M;return $&&"layer"in $&&$.layer?$.layer:"map-notes"===$?.type||"subtype-group"===$?.type?$:I}_getHighlightLayerView(M,I){return"subtype-sublayer"===I.type&&I.parent&&this._mapIncludesLayer(I.parent)?this._getLayerView(M,I.parent):I&&this._mapIncludesLayer(I)?this._getLayerView(M,I):null}_getHighlightTarget(M,I,$){if(function Be(M,I){return"building-scene"===M||"2d"===I&&("map-image"===M||"tile"===M||"imagery"===M||"imagery-tile"===M)}(I.type,$))return M;const pe=M.getObjectId();if(null!=pe)return pe;const Ae="imagery"===I.type?void 0:"objectIdField"in I?I.objectIdField||"OBJECTID":null,be=M.attributes;return be&&Ae&&be[Ae]||M}_mapIncludesLayer(M){return!!this.map?.allLayers?.includes(M)}_highlightFeature(M,I){var $=this;return(0,z.A)(function*(){$.removeHandles(M);const pe=$[I];if(!pe)return;const{highlightEnabled:Ae,view:be,visible:Fe}=$;if(!be||!Ae||!Fe)return;const Ne=$._getHighlightLayer(pe);if(!Ne)return;const He=$._getHighlightLayerView(be,Ne);if(!He)return;$._highlightPromises[M]=He;const it=yield He;if(!(it&&(0,gt.Of)(it)&&$._highlightPromises[M]===He&&$[I]&&$.highlightEnabled))return;const et=it.highlight($._getHighlightTarget(pe,Ne,be.type));$.addHandles(et,M)})()}_highlightActiveFeature(){var M=this;return(0,z.A)(function*(){return M._highlightFeature("highlight-active-feature","activeFeature")})()}_highlightSelectedFeature(){var M=this;return(0,z.A)(function*(){return M._highlightFeature("highlight-selected-feature","selectedFeature")})()}_updateFeatures(M){const{features:I}=this,$=M.filter(pe=>!I.includes(pe));$?.length&&(this.features=I.concat($))}};(0,E._)([(0,H.MZ)()],Oe.prototype,"_fetchFeaturesController",void 0),(0,E._)([(0,H.MZ)({type:fe})],Oe.prototype,"actions",void 0),(0,E._)([(0,H.MZ)({readOnly:!0})],Oe.prototype,"active",null),(0,E._)([(0,H.MZ)()],Oe.prototype,"activeFeature",void 0),(0,E._)([(0,H.MZ)({readOnly:!0})],Oe.prototype,"allActions",null),(0,E._)([(0,H.MZ)()],Oe.prototype,"autoCloseEnabled",void 0),(0,E._)([(0,H.MZ)()],Oe.prototype,"browseClusterEnabled",void 0),(0,E._)([(0,H.MZ)()],Oe.prototype,"content",void 0),(0,E._)([(0,H.MZ)({type:fe,readOnly:!0})],Oe.prototype,"defaultActions",null),(0,E._)([(0,H.MZ)({type:Boolean})],Oe.prototype,"defaultPopupTemplateEnabled",void 0),(0,E._)([(0,H.MZ)({readOnly:!0})],Oe.prototype,"featureCount",null),(0,E._)([(0,H.MZ)()],Oe.prototype,"featurePage",void 0),(0,E._)([(0,H.MZ)({value:[]})],Oe.prototype,"features",null),(0,E._)([(0,H.MZ)()],Oe.prototype,"featuresPerPage",void 0),(0,E._)([(0,H.MZ)()],Oe.prototype,"featureMenuOpen",void 0),(0,E._)([(0,H.MZ)()],Oe.prototype,"featureMenuTitle",void 0),(0,E._)([(0,H.MZ)()],Oe.prototype,"featureViewModelAbilities",void 0),(0,E._)([(0,H.MZ)({readOnly:!0})],Oe.prototype,"featureViewModels",void 0),(0,E._)([(0,H.MZ)()],Oe.prototype,"highlightEnabled",void 0),(0,E._)([(0,H.MZ)()],Oe.prototype,"includeDefaultActions",void 0),(0,E._)([(0,H.MZ)()],Oe.prototype,"initialDisplayMode",void 0),(0,E._)([(0,H.MZ)({type:Ot.A})],Oe.prototype,"location",null),(0,E._)([(0,H.MZ)()],Oe.prototype,"map",null),(0,E._)([(0,H.MZ)({readOnly:!0})],Oe.prototype,"pendingPromisesCount",null),(0,E._)([(0,H.MZ)({readOnly:!0})],Oe.prototype,"promiseCount",null),(0,E._)([(0,H.MZ)()],Oe.prototype,"promises",null),(0,E._)([(0,H.MZ)({readOnly:!0})],Oe.prototype,"selectedClusterBoundaryFeature",void 0),(0,E._)([(0,H.MZ)({value:null,readOnly:!0})],Oe.prototype,"selectedFeature",null),(0,E._)([(0,H.MZ)({value:-1})],Oe.prototype,"selectedFeatureIndex",null),(0,E._)([(0,H.MZ)({readOnly:!0})],Oe.prototype,"selectedFeatureViewModel",null),(0,E._)([(0,H.MZ)({type:Ut.A})],Oe.prototype,"spatialReference",null),(0,E._)([(0,H.MZ)({readOnly:!0})],Oe.prototype,"state",null),(0,E._)([(0,H.MZ)()],Oe.prototype,"timeZone",null),(0,E._)([(0,H.MZ)()],Oe.prototype,"title",void 0),(0,E._)([(0,H.MZ)()],Oe.prototype,"updateLocationEnabled",void 0),(0,E._)([(0,H.MZ)()],Oe.prototype,"view",void 0),(0,E._)([(0,H.MZ)()],Oe.prototype,"visible",void 0),(0,E._)([(0,H.MZ)({readOnly:!0})],Oe.prototype,"waitingForContents",null),(0,E._)([(0,H.MZ)({readOnly:!0})],Oe.prototype,"waitingForResult",null),(0,E._)([(0,H.MZ)()],Oe.prototype,"zoomFactor",void 0),(0,E._)([(0,H.MZ)()],Oe.prototype,"zoomToLocation",void 0),(0,E._)([(0,H.MZ)()],Oe.prototype,"centerAtLocation",null),Oe=(0,E._)([(0,V.$)("esri.widgets.Features.FeaturesViewModel")],Oe);const $e=Oe;var Qe=_(98877);let ot=class extends Qe.A{constructor(){super(...arguments),this.actionBar=!0,this.closeButton=!0,this.collapseButton=!1,this.featureMenuHeading=!0,this.featureNavigation=!0,this.featureListLayerTitle=!0,this.flow=!0,this.heading=!0,this.spinner=!0}};(0,E._)([(0,H.MZ)({type:Boolean,nonNullable:!0})],ot.prototype,"actionBar",void 0),(0,E._)([(0,H.MZ)({type:Boolean,nonNullable:!0})],ot.prototype,"closeButton",void 0),(0,E._)([(0,H.MZ)({type:Boolean,nonNullable:!0})],ot.prototype,"collapseButton",void 0),(0,E._)([(0,H.MZ)({type:Boolean,nonNullable:!0})],ot.prototype,"featureMenuHeading",void 0),(0,E._)([(0,H.MZ)({type:Boolean,nonNullable:!0})],ot.prototype,"featureNavigation",void 0),(0,E._)([(0,H.MZ)({type:Boolean,nonNullable:!0})],ot.prototype,"featureListLayerTitle",void 0),(0,E._)([(0,H.MZ)({type:Boolean,nonNullable:!0})],ot.prototype,"flow",void 0),(0,E._)([(0,H.MZ)({type:Boolean,nonNullable:!0})],ot.prototype,"heading",void 0),(0,E._)([(0,H.MZ)({type:Boolean,nonNullable:!0})],ot.prototype,"spinner",void 0),ot=(0,E._)([(0,V.$)("esri.widgets.Features.FeaturesVisibleElements")],ot);const mt=ot;var Ct=_(92190),It=_(53158);function vt(M){return I=>{I.hasOwnProperty("_delegatedEventNames")||(I._delegatedEventNames=I._delegatedEventNames?I._delegatedEventNames.slice():[]);const $=I._delegatedEventNames,pe=Array.isArray(M)?M:function Ft(M){return M.split(",").map(I=>I.trim())}(M);$.push(...pe)}}var Zt=_(68479);const Wt="selected-index",li="features-spinner";function oi(M){return M?.declaredClass.startsWith("esri.layers.")??!1}let rt=class extends((0,K.j)(re.A)){constructor(M,I){super(M,I),this._featureMenuIntersectionObserverCallback=([$])=>{$?.isIntersecting&&null!=this.viewModel.featurePage&&this.viewModel.featurePage++},this._featureMenuIntersectionObserver=new IntersectionObserver(this._featureMenuIntersectionObserverCallback,{root:window.document}),this._featureMenuIntersectionObserverNode=null,this._spinner=null,this._feature=null,this._focusAbortController=null,this._drillInFlowItems=new ge.A,this._drillInWidget=new Je({flowItems:this._drillInFlowItems}),this._rootNode=null,this._rootFlowItemNode=null,this._featureMenuViewportNode=null,this._actionBarMenuNode=null,this.collapsed=!1,this.featureNavigationTop=!1,this.headerActions=new fe,this.headingLevel=2,this.messages=null,this.messagesCommon=null,this.responsiveActionsEnabled=!1,this.viewModel=new $e,this.visibleElements=new mt,this._renderAction=($,pe)=>{const Ae=this._getActionTitle($),{type:be,active:Fe,uid:Ne,disabled:He,indicator:it}=$;return $.visible?(0,Ze.K)("calcite-action",{active:"toggle"===be&&$.value,appearance:"solid",bind:this,"data-action-id":$.id,"data-action-uid":Ne,disabled:He,icon:this._getActionIcon($),indicator:it,key:`action-${pe}`,loading:Fe,onclick:this._triggerAction,scale:"s",text:Ae,textEnabled:!this._hideActionText,title:this._hideActionText?Ae:void 0},this._getFallbackIcon($)):null},this._openFeatureMenu=()=>{this.featureMenuOpen=!0,this._focusFlowItemNode()},this._closeFeatureMenu=()=>{this.featureMenuOpen=!1,this._focusFlowItemNode()},this._previousFeature=()=>{this.viewModel.previous()},this._nextFeature=()=>{this.viewModel.next()},this._handleFeatureBack=()=>{"list"===this.initialDisplayMode?(this.selectedFeatureIndex=-1,this._focusFlowItemNode()):this._openFeatureMenu()},this._handleFeatureMenuBack=()=>{"list"===this.initialDisplayMode?(this.selectedFeatureIndex=-1,this._focusFlowItemNode()):this.featureMenuOpen&&this._closeFeatureMenu()},this._storeRootNode=$=>{this._rootNode=$},this._displaySpinnerThrottled=(0,G.n)(()=>this._displaySpinner(),0),this._addSelectedFeatureIndexHandle(),this.addHandles([this._displaySpinnerThrottled,(0,k.wB)(()=>this.viewModel?.active,()=>this._toggleScreenLocationEnabled()),(0,k.wB)(()=>this.viewModel?.active,$=>this._drillInWidget.closed=!$),(0,k.wB)(()=>this.visibleElements?.closeButton,$=>this._drillInWidget.closable=$),(0,k.wB)(()=>this.visibleElements?.spinner,$=>this._spinnerEnabledChange($)),(0,k.wB)(()=>this.viewModel?.view,($,pe)=>this._viewChange($,pe)),(0,k.wB)(()=>this.viewModel?.view?.ready,($,pe)=>this._viewReadyChange($??!1,pe??!1)),(0,k.wB)(()=>[this.viewModel?.waitingForResult,this.viewModel?.location],()=>{this._hideSpinner(),this._displaySpinnerThrottled()}),(0,k.wB)(()=>this.viewModel?.screenLocation,()=>this._closeOpenActionMenu()),(0,k.wB)(()=>this.selectedFeatureWidget,()=>this._destroyDrillInFlowItemWidgets()),(0,k.wB)(()=>{const $=this.selectedFeatureWidget?.viewModel;return[$?.title,$?.state]},()=>this._setTitleFromFeatureWidget()),(0,k.wB)(()=>{const $=this.selectedFeatureWidget?.viewModel;return[$?.content,$?.state]},()=>this._setContentFromFeatureWidget()),(0,k.wB)(()=>this.viewModel?.featureViewModels,()=>this._featureMenuViewportScrollTop()),(0,k.wB)(()=>this._drillInFlowItems.length,()=>this._focusFlowItemNode()),this._drillInWidget.on("close",()=>this.close()),this._drillInWidget.on("exit",()=>this._destroyDrillInFlowItemWidgets()),this._drillInWidget.on("open-feature",({feature:$})=>this._openRelatedFeature($)),this._drillInWidget.on("zoom-to-feature",({featureWidget:$})=>si(this.viewModel,$))])}loadDependencies(){return(0,Se.W)({action:()=>Promise.all([_.e(1951),_.e(6126),_.e(9838)]).then(_.bind(_,86126)),"action-bar":()=>Promise.all([_.e(1951),_.e(8569),_.e(6126),_.e(3277),_.e(2076),_.e(9253)]).then(_.bind(_,71634)),"action-group":()=>Promise.all([_.e(1951),_.e(8569),_.e(6126),_.e(3277),_.e(2076)]).then(_.bind(_,72152)),button:()=>Promise.all([_.e(1951),_.e(7392)]).then(_.bind(_,7392)),icon:()=>_.e(1951).then(_.bind(_,81951)),flow:()=>_.e(4260).then(_.bind(_,84260)),"flow-item":()=>Promise.all([_.e(1951),_.e(8569),_.e(6126),_.e(3277),_.e(1634),_.e(3300)]).then(_.bind(_,53300)),list:()=>Promise.all([_.e(1951),_.e(3869),_.e(2076),_.e(6620)]).then(_.bind(_,26620)),"list-item":()=>Promise.all([_.e(1951),_.e(8569),_.e(6126),_.e(2076),_.e(7313)]).then(_.bind(_,10160)),"list-item-group":()=>Promise.all([_.e(2076),_.e(6554)]).then(_.bind(_,86554)),loader:()=>_.e(5897).then(_.bind(_,45897))})}destroy(){this._destroyDrillInFlowItemWidgets(),this._destroySelectedFeatureWidget(),this._destroySpinner(),this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver?.disconnect(),this._drillInWidget?.destroy(),this._focusAbortController?.abort()}get _hideActionText(){if(!this.responsiveActionsEnabled)return!1;const M=this.view?.widthBreakpoint;return"xsmall"===M||"small"===M||"medium"===M}get _featureNavigationVisible(){return this.viewModel.active&&this.viewModel.featureCount>1&&!!this.viewModel.selectedFeature&&this.visibleElements.featureNavigation}get _isCollapsed(){return this._collapseEnabled&&this.collapsed}get _collapseEnabled(){return this.visibleElements.collapseButton&&("list"===this.initialDisplayMode||!!this.title&&!!this.content)}get active(){return this.viewModel.active}get content(){return this.viewModel.content}set content(M){this.viewModel.content=M}get icon(){return null}get featureMenuOpen(){return this.viewModel.featureMenuOpen}set featureMenuOpen(M){this.viewModel.featureMenuOpen=M}get featureMenuTitle(){return this.viewModel.featureMenuTitle}set featureMenuTitle(M){this.viewModel.featureMenuTitle=M}get features(){return this.viewModel.features}set features(M){this.viewModel.features=M}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(M){this.viewModel.goToOverride=M}get initialDisplayMode(){return this.viewModel.initialDisplayMode}set initialDisplayMode(M){this.viewModel.initialDisplayMode=M}get location(){return this.viewModel.location}set location(M){this.viewModel.location=M}get label(){return this.messages?.widgetLabel??""}set label(M){this._overrideIfSome("label",M)}get map(){return this.viewModel.map}set map(M){this.viewModel.map=M}get promises(){return this.viewModel.promises}set promises(M){this.viewModel.promises=M}get selectedFeature(){return this.viewModel.selectedFeature}get selectedDrillInFeature(){const M=Array.from(this._drillInFlowItems).at(-1);if(!M)return null;const{flowType:I}=M;return"feature-association"===I||"feature-relationship"===I?M.graphic??null:null}get selectedFeatureIndex(){return this.viewModel.selectedFeatureIndex}set selectedFeatureIndex(M){this.viewModel.selectedFeatureIndex=M}get selectedFeatureWidget(){const{_feature:M,headingLevel:I,_drillInFlowItems:$,timeZone:pe,spatialReference:Ae,map:be}=this,{selectedFeatureViewModel:Fe}=this.viewModel,Ne={title:!1};return Fe?(M?(M.viewModel=Fe,M.visibleElements=Ne):this._feature=new _e.default({flowItems:$,headingLevel:I+1,timeZone:pe,spatialReference:Ae,map:be,viewModel:Fe,visibleElements:Ne}),this._feature):null}get spatialReference(){return this.viewModel.spatialReference}set spatialReference(M){this.viewModel.spatialReference=M}get title(){return this.viewModel.title}set title(M){this.viewModel.title=M}get timeZone(){return this.viewModel.timeZone}set timeZone(M){this.viewModel.timeZone=M}get updateLocationEnabled(){return this.viewModel.updateLocationEnabled}set updateLocationEnabled(M){this.viewModel.updateLocationEnabled=M}get view(){return this.viewModel.view}set view(M){this.viewModel.view=M}get visible(){return this.viewModel.visible}set visible(M){this.viewModel.visible=M}blur(){const{active:M}=this.viewModel;M?this._rootFlowItemNode?.blur():Ue.A.getLogger(this).warn("Features can only be blurred when currently active.")}clear(){return this.viewModel.clear()}close(){this.viewModel.visible=!1}fetchFeatures(M,I){return this.viewModel.fetchFeatures(M,I)}focus(){const{active:M}=this.viewModel;M?this._focusFlowItemNode():Ue.A.getLogger(this).warn("Features can only be focused when currently active.")}next(){return this.viewModel.next()}open(M){this.removeHandles(Wt),this.set({collapsed:M?.collapsed??!1}),this.viewModel.open(M),this.addHandles((0,k.z7)(()=>!this.viewModel.waitingForResult,()=>this._addSelectedFeatureIndexHandle(),{once:!0}))}previous(){return this.viewModel.previous()}triggerAction(M){return this.viewModel.triggerAction(M)}render(){return(0,Ze.K)("div",{afterCreate:this._storeRootNode,bind:this,class:this.classes(se.base,Ct.D.widget,Ct.D.panel),onkeydown:this._onMainKeydown},this._renderHeader(),this._renderContentContainer())}_renderFeatureNavigation(){return[this._renderPagination(),"list"===this.initialDisplayMode?this._renderFeaturePaginationText():this._renderFeatureMenuButton()]}_renderHeader(){return this.featureNavigationTop&&this._featureNavigationVisible?(0,Ze.K)("div",{class:se.header,key:"header-actions"},this._renderFeatureNavigation()):null}_renderFooter(){return!this.featureNavigationTop&&this._featureNavigationVisible?(0,Ze.K)("div",{class:se.footer,key:"footer-actions",slot:"footer"},this._renderFeatureNavigation()):null}_renderFeaturePaginationText(){const{messages:M,viewModel:I}=this,{featureCount:$,selectedFeatureIndex:pe}=I;return(0,Ze.K)("div",{class:se.paginationText,key:"feature-pagination-text"},(0,C.V)(M.pageText,{index:(0,Zt.ZV)(pe+1),total:(0,Zt.ZV)($)}))}_renderFeatureMenuButton(){const{messages:M,viewModel:I}=this,{featureCount:$,selectedFeatureIndex:pe,pendingPromisesCount:Ae}=I;return(0,Ze.K)("calcite-action",{appearance:"solid",bind:this,class:se.paginationMenuButton,icon:"list",key:"feature-menu-button",label:M.selectFeature,loading:Ae>0,onclick:this._openFeatureMenu,scale:"s",text:(0,C.V)(M.pageText,{index:(0,Zt.ZV)(pe+1),total:(0,Zt.ZV)($)}),textEnabled:!0,title:M.selectFeature})}_renderPagination(){const{previous:M,next:I}=this.messagesCommon.pagination;return(0,Ze.K)("calcite-action-bar",{class:se.paginationActionBar,expandDisabled:!0,key:"pagination-action-bar",layout:"horizontal",overflowActionsDisabled:!0,scale:"s"},(0,Ze.K)("calcite-action-group",{scale:"s"},(0,Ze.K)("calcite-action",{appearance:"solid",class:se.paginationPrevious,icon:"chevron-left",iconFlipRtl:!0,label:M,onclick:this._previousFeature,scale:"s",text:M,title:M}),(0,Ze.K)("calcite-action",{appearance:"solid",icon:"chevron-right",iconFlipRtl:!0,label:I,onclick:this._nextFeature,scale:"s",text:I,title:I})))}_renderFeatureMenuItem(M){const{initialDisplayMode:I}=this,{selectedFeatureViewModel:$,featureViewModels:pe}=this.viewModel,Ae=M===$,be=pe.indexOf(M);return(0,Ze.K)("calcite-list-item",{bind:this,"data-feature-index":be,key:`feature-menu-item-${M.uid}`,onblur:this._removeActiveFeature,onfocus:this._setActiveFeature,onmouseleave:this._removeActiveFeature,onmouseover:this._setActiveFeature,selected:Ae,onCalciteListItemSelect:this._selectFeature},(0,Ze.K)("span",{innerHTML:M.title||this.messagesCommon.untitled,slot:"content"}),"list"===I?(0,Ze.K)("calcite-icon",{flipRtl:!0,icon:"chevron-right",scale:"s",slot:"content-end"}):null)}_groupResultsByLayer(){const{featureViewModels:M}=this.viewModel,I=new Map;return M.forEach($=>{const pe=$?.graphic;if(!pe)return;const{layer:Ae,sourceLayer:be}=pe,Fe=(oi(Ae)?Ae:null)||(oi(be)?be:null),Ne=I.get(Fe)??[];I.set(Fe,[...Ne,$])}),I}_renderFeatureMenu(){const{messages:M,viewModel:I}=this,$=this._groupResultsByLayer(),pe="list"===this.initialDisplayMode?"none":"single";return I.featureViewModels.length?(0,Ze.K)("calcite-list",{displayMode:"flat",label:M?.featuresList,selectionAppearance:"icon",selectionMode:pe},Array.from($.keys(),Ae=>{const be=$.get(Ae)?.map(Ne=>this._renderFeatureMenuItem(Ne)),Fe=Ae?Ae.title??this.messagesCommon.untitled:null;return this.visibleElements.featureListLayerTitle&&null!==Fe?(0,Ze.K)("calcite-list-item-group",{heading:Fe,key:Ae?.uid||"map-graphics"},be):be})):null}_renderHeaderAction(M,I){const $=M.title||"";return M.visible?(0,Ze.K)("calcite-action",{active:"toggle"===M.type&&M.value,appearance:"solid",bind:this,"data-action-id":M.id,"data-action-uid":M.uid,disabled:M.disabled,icon:M.icon??void 0,indicator:M.indicator,key:`header-action-${I}`,loading:M.active,onclick:this._triggerHeaderAction,slot:"header-actions-end",text:$,title:$}):null}_renderHeaderActions(){return this.headerActions.map((M,I)=>this._renderHeaderAction(M,I)).toArray()}_renderContentFeature(){const{headingLevel:M,visibleElements:I,_isCollapsed:$,_collapseEnabled:pe,featureNavigationTop:Ae,_drillInFlowItems:be,initialDisplayMode:Fe,selectedFeature:Ne,featureMenuOpen:He}=this,{title:it,active:et}=this.viewModel,at=I.heading&&it?it:"";if("list"===Fe&&!Ne)return null;const nt=0===be.length&&("list"===Fe?!!Ne:!He);return(0,Ze.K)("calcite-flow-item",{afterCreate:this._storeRootFlowItemNode,bind:this,class:this.classes({[se.contentFeature]:!0,[se.flowItemCollapsed]:$}),closable:I.closeButton,closed:!et,collapsed:$,collapseDirection:Ae?"down":"up",collapsible:pe,headingLevel:M,key:"root-flow-item",selected:nt,onCalciteFlowItemBack:this._handleFeatureBack,onCalciteFlowItemClose:this.close,onCalciteFlowItemToggle:this._handleCollapseToggle},at?(0,Ze.K)(It.D,{class:this.classes(se.featuresHeading,Ct.D.heading),innerHTML:at,key:"header-content",level:this.headingLevel,slot:"header-content"}):null,this._renderHeaderActions(),this._renderActionBar(),(0,Ze.K)("div",{class:this.classes(se.container,se.contentContainer)},this._renderContent()),this._renderFooter())}_renderFeatureMenuContainer(){const{viewModel:M,visibleElements:I,featureMenuTitle:$,messages:pe,messagesCommon:Ae,_drillInFlowItems:be,initialDisplayMode:Fe,featureMenuOpen:Ne,selectedFeature:He,_collapseEnabled:it,_isCollapsed:et,featureNavigationTop:at,headingLevel:nt}=this,{active:ft,featureViewModels:ct,pendingPromisesCount:Pt}=M,{featureMenuHeading:xt}=I,ei=$??pe.selectFeature;if("feature"===Fe&&!Ne)return null;const Xt=0===be.length&&("list"===Fe?!He:Ne);return(0,Ze.K)("calcite-flow-item",{afterCreate:this._storeFeatureMenuFlowItemNode,bind:this,class:this.classes({[se.flowItemCollapsed]:et}),closable:"list"===Fe&&I.closeButton,closed:!ft,collapsed:"list"===Fe&&et,collapseDirection:at?"down":"up",collapsible:"list"===Fe&&it,description:xt?(0,C.V)(pe.total,{total:ct.length}):void 0,heading:xt?ei:void 0,headingLevel:nt,key:"feature-menu",loading:M.waitingForContents,selected:Xt,onCalciteFlowItemBack:Lt=>{Lt.preventDefault(),this._handleFeatureMenuBack()},onCalciteFlowItemClose:this.close,onCalciteFlowItemToggle:this._handleCollapseToggle},"list"===Fe?this._renderHeaderActions():null,Pt>0?(0,Ze.K)("calcite-loader",{class:se.loader,inline:!0,key:"feature-menu-loader",label:Ae.loading,slot:"header-actions-end"}):null,(0,Ze.K)("div",{class:se.container},this._renderFeatureMenu()),(0,Ze.K)("div",{afterCreate:this._featureMenuIntersectionObserverCreated,bind:this,class:se.featureMenuObserver}),"feature"===Fe?(0,Ze.K)("calcite-button",{appearance:"transparent",onclick:this._handleFeatureMenuBack,slot:"footer-actions",width:"full"},Ae.back):null)}_renderContentContainer(){const M="list"===this.initialDisplayMode?[this._renderFeatureMenuContainer(),this._renderContentFeature(),this._drillInWidget.render()]:[this._renderContentFeature(),this._renderFeatureMenuContainer(),this._drillInWidget.render()];return this.visibleElements.flow?(0,Ze.K)("calcite-flow",{key:"content-container"},M):M}_getFallbackIcon(M){const{className:I,icon:$}=M;if($)return null;const pe=function te({action:M,feature:I}){const $=I?.attributes,pe="image"in M?M.image:void 0;return pe&&$?(0,C.V)(pe,$):pe??""}({action:M,feature:this.selectedFeature}),Ae={[se.icon]:!!I,[se.actionImage]:!!pe};return I&&(Ae[I]=!0),pe||I?(0,Ze.K)("span",{"aria-hidden":"true",class:this.classes(se.icon,Ae),key:"icon",styles:W(pe)}):null}_renderActionBar(){return!this._isCollapsed&&this.visibleElements.actionBar&&this.viewModel.allActions?.length?(0,Ze.K)("calcite-action-bar",{expandDisabled:!0,expanded:!this._hideActionText,key:"header-action-bar",scale:"s",slot:"action-bar"},(0,Ze.K)("calcite-action-group",{afterCreate:M=>this._actionBarMenuNode=M,overlayPositioning:"fixed",scale:"s"},this._renderActions())):null}_renderActions(){return this.viewModel.allActions.toArray().map(this._renderAction)}_renderContent(){const M=this.viewModel?.content;return M?"string"==typeof M?(0,Ze.K)("div",{class:J.A.contentNode,innerHTML:M,key:M}):this.renderNodeContent(M):null}_handleCollapseToggle(){this.collapsed=!this.collapsed}_openRelatedFeature(M){var I=this;return(0,z.A)(function*(){yield M.viewModel.updateGeometry();const $=M.graphic,pe=$?.geometry;if(null==pe||null==$)return;I._destroyDrillInFlowItemWidgets(),yield I.viewModel.zoomTo({target:pe});const Ae=w(pe);I.open({features:[$],location:Ae??void 0}),I._focusFlowItemNode()})()}_focusFlowItemNode(){var M=this;return(0,z.A)(function*(){M._focusAbortController?.abort(),M._focusAbortController=new AbortController;const I=M._focusAbortController.signal;yield(0,ae.QZ)((0,ye.$m)(I));const $=M._rootNode?.querySelector("calcite-flow-item[selected]");(0,Ve.Z6)($)})()}_storeRootFlowItemNode(M){this._rootFlowItemNode=M}_storeFeatureMenuFlowItemNode(M){this._featureMenuViewportNode=M}_setActiveFeature(M){const{viewModel:I}=this,$=M.currentTarget["data-feature-index"];I.activeFeature=I.features?.[$]||null}_removeActiveFeature(){this.viewModel.activeFeature=null}_selectFeature(M){const I=M.currentTarget["data-feature-index"];isNaN(I)||(this.viewModel.selectedFeatureIndex=I),"feature"===this.initialDisplayMode?this._handleFeatureMenuBack():this._focusFlowItemNode()}_unobserveFeatureMenuObserver(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)}_featureMenuIntersectionObserverCreated(M){this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver.observe(M),this._featureMenuIntersectionObserverNode=M}_getActionIcon(M){return M.icon?M.icon:M.image||M.className?void 0:"question"}_getActionTitle(M){const{messages:I,selectedFeature:$,messagesCommon:pe}=this,{id:Ae}=M,be=$?.attributes,Fe=M.title??"",Ne="zoom-to-feature"===Ae?(0,C.V)(Fe,{messages:I}):"remove-selected-feature"===Ae?(0,C.V)(Fe,{messages:pe}):"zoom-to-clustered-features"===Ae||"browse-clustered-features"===Ae?(0,C.V)(Fe,{messages:I}):M.title;return Ne&&be?(0,C.V)(Ne,be):Ne??""}_onMainKeydown(M){const{key:I}=M;"ArrowLeft"===I&&(M.stopPropagation(),this._handleFeatureMenuBack(),this.previous()),"ArrowRight"===I&&(M.stopPropagation(),this._handleFeatureMenuBack(),this.next())}_featureMenuViewportScrollTop(){this._featureMenuViewportNode&&this._featureMenuViewportNode.scrollContentTo({top:0})}_setContentFromFeatureWidget(){const{selectedFeatureWidget:M}=this;M&&(this.viewModel.content=M)}_setTitleFromFeatureWidget(){const{selectedFeatureWidget:M,messagesCommon:I}=this,$=M?.viewModel;M&&(this.viewModel.title="error"===$?.state?I?.errorMessage:$?.title||"")}_addSelectedFeatureIndexHandle(){const M=(0,k.wB)(()=>this.viewModel?.selectedFeatureIndex,(I,$)=>this._selectedFeatureIndexUpdated(I,$));this.addHandles(M,Wt)}_selectedFeatureIndexUpdated(M,I){const{featureCount:$}=this.viewModel;$&&M!==I&&-1!==M&&(this._destroyDrillInFlowItemWidgets(),this._rootFlowItemNode&&this._rootFlowItemNode.scrollContentTo({top:0}))}_triggerHeaderAction(M){const I=M.currentTarget;if(I.disabled)return;const $=I.dataset.actionUid,pe=this.headerActions.find(({uid:Ae})=>Ae===$);pe&&!pe.disabled&&("toggle"===pe?.type&&(pe.value=!pe.value),this.emit("trigger-header-action",{action:pe}))}_triggerAction(M){const I=M.currentTarget;if(I.disabled)return;const $=I.dataset.actionUid,{allActions:pe}=this.viewModel,Ae=pe.findIndex(Fe=>Fe.uid===$),be=pe.at(Ae);be&&"toggle"===be.type&&(be.value=!be.value),this.viewModel.triggerAction(Ae)}_createSpinner(M){M&&(this._spinner=new _t({view:M}),M.ui.add(this._spinner,{key:li,position:"manual",internal:!0}))}_wireUpView(M){this._destroySpinner(),M&&this.visibleElements?.spinner&&this._createSpinner(M)}_hideSpinner(){const{_spinner:M}=this;M&&(M.location=null,M.hide())}_viewReadyChange(M,I){M?this._wireUpView(this.viewModel?.view):I&&this.viewModel.clear()}_viewChange(M,I){M&&I&&this.viewModel.clear()}_destroySelectedFeatureWidget(){const{_feature:M}=this;M&&(M.viewModel=null,!M.destroyed&&M.destroy()),this._feature=null}_closeOpenActionMenu(){const{_actionBarMenuNode:M}=this;M&&(M.menuOpen=!1)}_destroyDrillInFlowItemWidgets(){this._drillInFlowItems.drain(M=>{"showAllEnabled"in M.viewModel&&(M.viewModel.showAllEnabled=!1),"activeCategory"in M.viewModel&&(M.viewModel.activeCategory=null),M.viewModel=null,M.destroy()})}_toggleScreenLocationEnabled(){const{viewModel:M}=this;M&&(M.screenLocationEnabled=M.active)}_displaySpinner(){const{_spinner:M}=this;if(!M)return;const{location:I,waitingForResult:$}=this.viewModel;$&&I?M.show({location:I}):M.hide()}_destroySpinner(){const{_spinner:M}=this;M&&(M.view?.ui?.remove(M,li),M.destroy(),this._spinner=null)}_spinnerEnabledChange(M){this._destroySpinner(),M&&this._createSpinner(this.viewModel?.view)}};(0,E._)([(0,H.MZ)()],rt.prototype,"_drillInFlowItems",void 0),(0,E._)([(0,H.MZ)()],rt.prototype,"_hideActionText",null),(0,E._)([(0,H.MZ)()],rt.prototype,"_featureNavigationVisible",null),(0,E._)([(0,H.MZ)()],rt.prototype,"_isCollapsed",null),(0,E._)([(0,H.MZ)()],rt.prototype,"_collapseEnabled",null),(0,E._)([(0,H.MZ)({readOnly:!0})],rt.prototype,"active",null),(0,E._)([(0,H.MZ)()],rt.prototype,"collapsed",void 0),(0,E._)([(0,H.MZ)()],rt.prototype,"content",null),(0,E._)([(0,H.MZ)()],rt.prototype,"icon",null),(0,E._)([(0,H.MZ)()],rt.prototype,"featureMenuOpen",null),(0,E._)([(0,H.MZ)()],rt.prototype,"featureMenuTitle",null),(0,E._)([(0,H.MZ)()],rt.prototype,"featureNavigationTop",void 0),(0,E._)([(0,H.MZ)()],rt.prototype,"features",null),(0,E._)([(0,H.MZ)()],rt.prototype,"goToOverride",null),(0,E._)([(0,H.MZ)({type:fe})],rt.prototype,"headerActions",void 0),(0,E._)([(0,H.MZ)()],rt.prototype,"headingLevel",void 0),(0,E._)([(0,H.MZ)()],rt.prototype,"initialDisplayMode",null),(0,E._)([(0,H.MZ)()],rt.prototype,"location",null),(0,E._)([(0,H.MZ)()],rt.prototype,"label",null),(0,E._)([(0,H.MZ)()],rt.prototype,"map",null),(0,E._)([(0,H.MZ)(),(0,Te.G)("esri/widgets/Features/t9n/Features")],rt.prototype,"messages",void 0),(0,E._)([(0,H.MZ)(),(0,Te.G)("esri/t9n/common")],rt.prototype,"messagesCommon",void 0),(0,E._)([(0,H.MZ)()],rt.prototype,"promises",null),(0,E._)([(0,H.MZ)()],rt.prototype,"responsiveActionsEnabled",void 0),(0,E._)([(0,H.MZ)({readOnly:!0})],rt.prototype,"selectedFeature",null),(0,E._)([(0,H.MZ)({readOnly:!0})],rt.prototype,"selectedDrillInFeature",null),(0,E._)([(0,H.MZ)()],rt.prototype,"selectedFeatureIndex",null),(0,E._)([(0,H.MZ)({readOnly:!0})],rt.prototype,"selectedFeatureWidget",null),(0,E._)([(0,H.MZ)()],rt.prototype,"spatialReference",null),(0,E._)([(0,H.MZ)()],rt.prototype,"title",null),(0,E._)([(0,H.MZ)()],rt.prototype,"timeZone",null),(0,E._)([(0,H.MZ)()],rt.prototype,"updateLocationEnabled",null),(0,E._)([(0,H.MZ)()],rt.prototype,"view",null),(0,E._)([(0,H.MZ)({type:$e}),vt(["triggerAction","trigger-action"])],rt.prototype,"viewModel",void 0),(0,E._)([(0,H.MZ)({type:mt,nonNullable:!0})],rt.prototype,"visibleElements",void 0),(0,E._)([(0,H.MZ)()],rt.prototype,"visible",null),rt=(0,E._)([(0,V.$)("esri.widgets.Features")],rt);const mi=rt,ui="esri-popup",Ei=`${ui}--is-docked`,zt={base:ui,baseHidden:`${ui}--hidden`,main:`${ui}__main-container`,shadow:`${ui}--shadow`,isDocked:Ei,isDockedTopLeft:`${Ei}-top-left`,isDockedTopCenter:`${Ei}-top-center`,isDockedTopRight:`${Ei}-top-right`,isDockedBottomLeft:`${Ei}-bottom-left`,isDockedBottomCenter:`${Ei}-bottom-center`,isDockedBottomRight:`${Ei}-bottom-right`,alignTopCenter:`${ui}--aligned-top-center`,alignBottomCenter:`${ui}--aligned-bottom-center`,alignTopLeft:`${ui}--aligned-top-left`,alignBottomLeft:`${ui}--aligned-bottom-left`,alignTopRight:`${ui}--aligned-top-right`,alignBottomRight:`${ui}--aligned-bottom-right`,pointer:`${ui}__pointer`,pointerDirection:`${ui}__pointer-direction`};let Hi=class extends $e{constructor(M){super(M)}};Hi=(0,E._)([(0,V.$)("esri.widgets.Popup.PopupViewModel")],Hi);const qi=Hi;let _i=class extends Qe.A{constructor(){super(...arguments),this.actionBar=!0,this.closeButton=!0,this.collapseButton=!0,this.featureMenuHeading=!0,this.featureNavigation=!0,this.featureListLayerTitle=!0,this.heading=!0,this.spinner=!0}};(0,E._)([(0,H.MZ)({type:Boolean,nonNullable:!0})],_i.prototype,"actionBar",void 0),(0,E._)([(0,H.MZ)({type:Boolean,nonNullable:!0})],_i.prototype,"closeButton",void 0),(0,E._)([(0,H.MZ)({type:Boolean,nonNullable:!0})],_i.prototype,"collapseButton",void 0),(0,E._)([(0,H.MZ)({type:Boolean,nonNullable:!0})],_i.prototype,"featureMenuHeading",void 0),(0,E._)([(0,H.MZ)({type:Boolean,nonNullable:!0})],_i.prototype,"featureNavigation",void 0),(0,E._)([(0,H.MZ)({type:Boolean,nonNullable:!0})],_i.prototype,"featureListLayerTitle",void 0),(0,E._)([(0,H.MZ)({type:Boolean,nonNullable:!0})],_i.prototype,"heading",void 0),(0,E._)([(0,H.MZ)({type:Boolean,nonNullable:!0})],_i.prototype,"spinner",void 0),_i=(0,E._)([(0,V.$)("esri.widgets.Popup.PopupVisibleElements")],_i);const en=_i,tn={buttonEnabled:!0,position:"auto",breakpoint:{width:544}};let Et=class extends re.A{constructor(M,I){super(M,I),this._dockAction=new me.A({id:"popup-dock-action"}),this._featuresWidget=new mi({responsiveActionsEnabled:!0}),this._containerNode=null,this._mainContainerNode=null,this._pointerOffsetInPx=16,this._focusAbortController=null,this.alignment="auto",this.dockEnabled=!1,this.headingLevel=2,this.messages=null,this.viewModel=new qi,this.visibleElements=new en}initialize(){this.addHandles([(0,k.wB)(()=>[this.viewModel?.view?.widthBreakpoint,this.dockEnabled],()=>this._handleDockIcon(),k.Vh),(0,k.wB)(()=>[this.dockEnabled,this.messages?.undock,this.messages?.dock],()=>this._handleDockEnabled(),k.Vh),(0,k.wB)(()=>this.dockOptions,M=>{const{_dockAction:I}=this,$=this._featuresWidget.headerActions;$.remove(I),M.buttonEnabled&&$.add(I)},k.Vh),(0,k.wB)(()=>this.viewModel?.screenLocation,()=>this._positionContainer()),(0,k.wB)(()=>[this.viewModel?.active,this.dockEnabled],()=>this._toggleScreenLocationEnabled()),(0,k.wB)(()=>[this.viewModel?.screenLocation,this.viewModel?.view?.padding,this.viewModel?.view?.size,this.viewModel?.active,this.viewModel?.location,this.alignment],()=>this.reposition()),(0,k.wB)(()=>this.viewModel?.view?.size,(M,I)=>this._updateDockEnabledForViewSize(M,I)),(0,k.wB)(()=>this.viewModel?.view,(M,I)=>this._viewChange(M,I)),(0,k.wB)(()=>this.viewModel?.view?.ready,(M,I)=>this._viewReadyChange(M??!1,I??!1)),(0,k.wB)(()=>this.viewModel,()=>this._featuresWidget.viewModel=this.viewModel,k.Vh),(0,k.wB)(()=>this._featureNavigationTop,M=>this._featuresWidget.featureNavigationTop=M,k.Vh),(0,k.wB)(()=>this.headingLevel,M=>this._featuresWidget.headingLevel=M,k.Vh),(0,k.wB)(()=>this.visibleElements.actionBar,M=>this._featuresWidget.visibleElements.actionBar=!!M,k.Vh),(0,k.wB)(()=>this.visibleElements.closeButton,M=>this._featuresWidget.visibleElements.closeButton=!!M,k.Vh),(0,k.wB)(()=>this.visibleElements.collapseButton,M=>this._featuresWidget.visibleElements.collapseButton=!!M,k.Vh),(0,k.wB)(()=>this.visibleElements.heading,M=>this._featuresWidget.visibleElements.heading=!!M,k.Vh),(0,k.wB)(()=>this.visibleElements.spinner,M=>this._featuresWidget.visibleElements.spinner=!!M,k.Vh),(0,k.wB)(()=>this.visibleElements.featureNavigation,M=>this._featuresWidget.visibleElements.featureNavigation=!!M,k.Vh),(0,k.wB)(()=>this.visibleElements.featureMenuHeading,M=>this._featuresWidget.visibleElements.featureMenuHeading=!!M,k.Vh),(0,k.wB)(()=>this.visibleElements.featureListLayerTitle,M=>this._featuresWidget.visibleElements.featureListLayerTitle=!!M,k.Vh),(0,k.on)(()=>this._featuresWidget,"trigger-header-action",M=>{M.action===this._dockAction&&(this.dockEnabled=!this.dockEnabled)})])}destroy(){this._dockAction.destroy(),this._featuresWidget&&(this._featuresWidget.viewModel=new $e,this._featuresWidget.destroy()),this._focusAbortController?.abort()}get _featureNavigationTop(){const{currentAlignment:M,currentDockPosition:I}=this;return"bottom-left"===M||"bottom-center"===M||"bottom-right"===M||"top-left"===I||"top-center"===I||"top-right"===I}get actions(){return this.viewModel.actions}set actions(M){this.viewModel.actions=M}get active(){return this.viewModel.active}get autoCloseEnabled(){return this.viewModel.autoCloseEnabled}set autoCloseEnabled(M){this.viewModel.autoCloseEnabled=M}get defaultPopupTemplateEnabled(){return this.viewModel.defaultPopupTemplateEnabled}set defaultPopupTemplateEnabled(M){this.viewModel.defaultPopupTemplateEnabled=M}get content(){return this.viewModel.content}set content(M){this.viewModel.content=M}get collapsed(){return this._featuresWidget.collapsed}set collapsed(M){this._featuresWidget.collapsed=M}get currentAlignment(){return this._getCurrentAlignment()}get currentDockPosition(){return this._getCurrentDockPosition()}get dockOptions(){return this._get("dockOptions")||tn}set dockOptions(M){const I={...tn},$=this.viewModel?.view?.breakpoints,pe={};$&&(pe.width=$.xsmall,pe.height=$.xsmall);const Ae={...I,...M},be={...I.breakpoint,...pe},{breakpoint:Fe}=Ae;"object"==typeof Fe?Ae.breakpoint={...be,...Fe}:Fe&&(Ae.breakpoint=be),this._set("dockOptions",Ae),this._setCurrentDockPosition(),this.reposition()}get featureCount(){return this.viewModel.featureCount}get featureMenuOpen(){return this.viewModel.featureMenuOpen}set featureMenuOpen(M){this.viewModel.featureMenuOpen=M}get features(){return this.viewModel.features}set features(M){this.viewModel.features=M}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(M){this.viewModel.goToOverride=M}get highlightEnabled(){return this.viewModel.highlightEnabled}set highlightEnabled(M){this.viewModel.highlightEnabled=M}get icon(){return"popup"}set icon(M){this._overrideIfSome("icon",M)}get initialDisplayMode(){return this.viewModel.initialDisplayMode}set initialDisplayMode(M){this.viewModel.initialDisplayMode=M}get location(){return this.viewModel.location}set location(M){this.viewModel.location=M}get label(){return this.messages?.widgetLabel??""}set label(M){this._overrideIfSome("label",M)}get promises(){return this.viewModel.promises}set promises(M){this.viewModel.promises=M}get selectedFeature(){return this.viewModel.selectedFeature}get selectedDrillInFeature(){return this._featuresWidget.selectedDrillInFeature??null}get selectedFeatureIndex(){return this.viewModel.selectedFeatureIndex}set selectedFeatureIndex(M){this.viewModel.selectedFeatureIndex=M}get selectedFeatureWidget(){return this._featuresWidget.selectedFeatureWidget}get title(){return this.viewModel.title}set title(M){this.viewModel.title=M}get updateLocationEnabled(){return this.viewModel.updateLocationEnabled}set updateLocationEnabled(M){this.viewModel.updateLocationEnabled=M}get view(){return this.viewModel.view}set view(M){this.viewModel.view=M}get visible(){return this.viewModel.visible}set visible(M){this.viewModel.visible=M}blur(){const{active:M}=this.viewModel;M||Ue.A.getLogger(this).warn("Popup can only be blurred when currently active."),this._featuresWidget.blur()}clear(){return this.viewModel.clear()}close(){this.visible=!1}fetchFeatures(M,I){return this.viewModel.fetchFeatures(M,I)}focus(){const{active:M}=this.viewModel;M||Ue.A.getLogger(this).warn("Popup can only be focused when currently active."),this._handleFocus()}next(){return this.viewModel.next()}open(M){this.set({collapsed:!!M&&!!M.collapsed,featureMenuOpen:!!M&&!!M.featureMenuOpen}),this.viewModel.open(M),M?.shouldFocus&&this._handleFocus(!0)}previous(){return this.viewModel.previous()}reposition(){this.renderNow(),this._positionContainer(),this._setCurrentAlignment()}triggerAction(M){return this.viewModel.triggerAction(M)}render(){const{dockEnabled:M,currentAlignment:I,currentDockPosition:$}=this,{active:pe,screenLocation:Ae}=this.viewModel,be=pe&&M,Fe=pe&&!M,Ne=this.selectedFeature?.layer?.title,He=this.selectedFeature?.layer?.id,it={[zt.alignTopCenter]:"top-center"===I,[zt.alignBottomCenter]:"bottom-center"===I,[zt.alignTopLeft]:"top-left"===I,[zt.alignBottomLeft]:"bottom-left"===I,[zt.alignTopRight]:"top-right"===I,[zt.alignBottomRight]:"bottom-right"===I,[zt.isDocked]:be,[zt.shadow]:Fe,[zt.isDockedTopLeft]:"top-left"===$,[zt.isDockedTopCenter]:"top-center"===$,[zt.isDockedTopRight]:"top-right"===$,[zt.isDockedBottomLeft]:"bottom-left"===$,[zt.isDockedBottomCenter]:"bottom-center"===$,[zt.isDockedBottomRight]:"bottom-right"===$};return(0,Ze.K)("div",{afterCreate:this._positionContainer,afterUpdate:this._positionContainer,"aria-hidden":(!pe).toString(),"aria-label":(0,je._e)(this.title??""),"aria-modal":"false",bind:this,class:this.classes(zt.base,it,{[zt.baseHidden]:!Ae&&!M}),"data-layer-id":He,"data-layer-title":Ne,role:"dialog"},pe?[this._renderMainContainer(),this._renderPointer()]:null)}_renderPointer(){return this.dockEnabled?null:(0,Ze.K)("div",{class:zt.pointer,key:"popup-pointer",role:"presentation"},(0,Ze.K)("div",{class:this.classes(zt.pointerDirection,zt.shadow)}))}_renderMainContainer(){const{dockEnabled:M}=this;return(0,Ze.K)("div",{afterCreate:this._setMainContainerNode,afterUpdate:this._setMainContainerNode,bind:this,class:this.classes(zt.main,Ct.D.widget,{[zt.shadow]:M})},this._featuresWidget.render())}_getAnimationDurationMS(){const{_containerNode:M}=this;return M?1e3*parseFloat(window.getComputedStyle(M).animationDuration):200}_handleFocus(M=!1){var I=this;return(0,z.A)(function*(){I._focusAbortController?.abort(),I._focusAbortController=new AbortController;const $=I._focusAbortController.signal;M&&(yield(0,k.C_)(()=>!0===I.viewModel?.active,{signal:$})),yield(0,ae.QZ)((0,ye.$m)($)),yield(0,ae.QZ)((0,ae.Pl)(I._getAnimationDurationMS(),$)),I._featuresWidget.focus()})()}_isOutsideView(M){const{popupHeight:I,popupWidth:$,screenLocation:pe,side:Ae,view:be}=M;if(isNaN($)||isNaN(I)||!be||!pe)return!1;const Fe=be.padding;return"right"===Ae&&pe.x+$/2>be.width-Fe.right||"left"===Ae&&pe.x-$/2<Fe.left||"top"===Ae&&pe.y-I<Fe.top||"bottom"===Ae&&pe.y+I>be.height-Fe.bottom}_calculateAutoAlignment(M){if("auto"!==M)return M;const{_pointerOffsetInPx:I,_containerNode:$,_mainContainerNode:pe,viewModel:Ae}=this,{screenLocation:be,view:Fe}=Ae;if(null==be||!Fe||!$)return"top-center";function Ne(Lt){return parseInt(Lt.replaceAll(/[^-\d.]/g,""),10)}const He=pe?window.getComputedStyle(pe,null):null,it=He?Ne(He.getPropertyValue("max-height")):0,et=He?Ne(He.getPropertyValue("height")):0,{height:at,width:nt}=$.getBoundingClientRect(),ft=nt+I,ct=Math.max(at,it,et)+I,Pt=this._isOutsideView({popupHeight:ct,popupWidth:ft,screenLocation:be,side:"right",view:Fe}),xt=this._isOutsideView({popupHeight:ct,popupWidth:ft,screenLocation:be,side:"left",view:Fe}),ei=this._isOutsideView({popupHeight:ct,popupWidth:ft,screenLocation:be,side:"top",view:Fe}),Xt=this._isOutsideView({popupHeight:ct,popupWidth:ft,screenLocation:be,side:"bottom",view:Fe});return xt?ei?"bottom-right":"top-right":Pt?ei?"bottom-left":"top-left":ei?Xt?"top-center":"bottom-center":"top-center"}_callCurrentAlignment(M){return"function"==typeof M?M.call(this):M}_getCurrentAlignment(){const{alignment:M,dockEnabled:I}=this;return I||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(M)))}_setCurrentAlignment(){this._set("currentAlignment",this._getCurrentAlignment())}_setCurrentDockPosition(){this._set("currentDockPosition",this._getCurrentDockPosition())}_calculatePositionResult(M){const I=["left","right"];return(0,Ve.V8)(this.container)&&I.reverse(),M?.replace(/leading/gi,I[0]).replaceAll(/trailing/gi,I[1])}_callDockPosition(M){return"function"==typeof M?M.call(this):M}_getDockPosition(){return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition(this.dockOptions?.position)))}_getCurrentDockPosition(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null}_calculateAutoDockPosition(M){if("auto"!==M)return M;const I=this.viewModel?.view,$=(0,Ve.V8)(this.container)?"top-left":"top-right";if(!I)return $;const pe=I.padding||{left:0,right:0,top:0,bottom:0},Ae=I.width-pe.left-pe.right,{breakpoints:be}=I;return be&&Ae<=be.xsmall?"bottom-center":$}_getDockIcon(){const M=this._getDockPosition();if(this.dockEnabled)return"minimize";switch(M){case"top-left":case"bottom-left":return"dock-left";case"top-center":return"maximize";case"bottom-center":return"dock-bottom";default:return"dock-right"}}_handleDockIcon(){this._dockAction.icon=this._getDockIcon()}_handleDockEnabled(){this._dockAction.title=this.dockEnabled?this.messages?.undock:this.messages?.dock}_setMainContainerNode(M){this._mainContainerNode=M}_positionContainer(M=this._containerNode){if(M&&(this._containerNode=M),!this._containerNode)return;const{screenLocation:I}=this.viewModel,{width:$}=this._containerNode.getBoundingClientRect(),pe=this._calculatePositionStyle(I,$);pe&&Object.assign(this._containerNode.style,pe)}_calculateFullWidth(M){const{currentAlignment:I,_pointerOffsetInPx:$}=this;return"top-left"===I||"bottom-left"===I||"top-right"===I||"bottom-right"===I?M+$:M}_calculateAlignmentPosition(M,I,$,pe){const{currentAlignment:Ae,_pointerOffsetInPx:be}=this;if(!$)return;const{padding:Fe}=$,Ne=pe/2,He=$.height-I,it=$.width-M;return"bottom-center"===Ae?{top:I+be-Fe.top,left:M-Ne-Fe.left}:"top-left"===Ae?{bottom:He+be-Fe.bottom,right:it+be-Fe.right}:"bottom-left"===Ae?{top:I+be-Fe.top,right:it+be-Fe.right}:"top-right"===Ae?{bottom:He+be-Fe.bottom,left:M+be-Fe.left}:"bottom-right"===Ae?{top:I+be-Fe.top,left:M+be-Fe.left}:"top-center"===Ae?{bottom:He+be-Fe.bottom,left:M-Ne-Fe.left}:void 0}_calculatePositionStyle(M,I){const{dockEnabled:$,view:pe}=this;if(!pe)return;if($)return{left:"",top:"",right:"",bottom:""};if(null==M||!I)return;const Ae=this._calculateFullWidth(I),be=this._calculateAlignmentPosition(M.x,M.y,pe,Ae);return be?{top:void 0!==be.top?`${be.top}px`:"auto",left:void 0!==be.left?`${be.left}px`:"auto",bottom:void 0!==be.bottom?`${be.bottom}px`:"auto",right:void 0!==be.right?`${be.right}px`:"auto"}:void 0}_viewChange(M,I){M&&I&&(this.close(),this.clear())}_viewReadyChange(M,I){M?this._wireUpView():I&&(this.close(),this.clear())}_wireUpView(){this._setDockEnabledForViewSize(this.dockOptions)}_dockingThresholdCrossed(M,I,$){const[pe,Ae]=M,[be,Fe]=I,{width:Ne=0,height:He=0}=$??{};return pe<=Ne&&be>Ne||pe>Ne&&be<=Ne||Ae<=He&&Fe>He||Ae>He&&Fe<=He}_updateDockEnabledForViewSize(M,I){if(!M||!I)return;const $=this.viewModel?.view?.padding||{left:0,right:0,top:0,bottom:0},pe=$.left+$.right,Ae=$.top+$.bottom,be=[],Fe=[];be[0]=M[0]-pe,be[1]=M[1]-Ae,Fe[0]=I[0]-pe,Fe[1]=I[1]-Ae;const{dockOptions:Ne}=this;this._dockingThresholdCrossed(be,Fe,Ne.breakpoint)&&this._setDockEnabledForViewSize(Ne),this._setCurrentDockPosition()}_toggleScreenLocationEnabled(){const{dockEnabled:M,viewModel:I}=this;I&&(I.screenLocationEnabled=I.active&&!M)}_shouldDockAtCurrentViewSize(M){const I=M.breakpoint,$=this.viewModel?.view?.ui;if(!$)return!1;const{width:pe,height:Ae}=$;if(isNaN(pe)||isNaN(Ae)||!I)return!1;const be=I.hasOwnProperty("width")&&pe<=(I.width??0),Fe=I.hasOwnProperty("height")&&Ae<=(I.height??0);return be||Fe}_setDockEnabledForViewSize(M){M.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(M))}};(0,E._)([(0,H.MZ)({readOnly:!0})],Et.prototype,"_featureNavigationTop",null),(0,E._)([(0,H.MZ)()],Et.prototype,"actions",null),(0,E._)([(0,H.MZ)({readOnly:!0})],Et.prototype,"active",null),(0,E._)([(0,H.MZ)()],Et.prototype,"alignment",void 0),(0,E._)([(0,H.MZ)()],Et.prototype,"autoCloseEnabled",null),(0,E._)([(0,H.MZ)()],Et.prototype,"defaultPopupTemplateEnabled",null),(0,E._)([(0,H.MZ)()],Et.prototype,"content",null),(0,E._)([(0,H.MZ)()],Et.prototype,"collapsed",null),(0,E._)([(0,H.MZ)({readOnly:!0})],Et.prototype,"currentAlignment",null),(0,E._)([(0,H.MZ)({readOnly:!0})],Et.prototype,"currentDockPosition",null),(0,E._)([(0,H.MZ)()],Et.prototype,"dockOptions",null),(0,E._)([(0,H.MZ)()],Et.prototype,"dockEnabled",void 0),(0,E._)([(0,H.MZ)({readOnly:!0})],Et.prototype,"featureCount",null),(0,E._)([(0,H.MZ)()],Et.prototype,"featureMenuOpen",null),(0,E._)([(0,H.MZ)()],Et.prototype,"features",null),(0,E._)([(0,H.MZ)()],Et.prototype,"goToOverride",null),(0,E._)([(0,H.MZ)()],Et.prototype,"headingLevel",void 0),(0,E._)([(0,H.MZ)()],Et.prototype,"highlightEnabled",null),(0,E._)([(0,H.MZ)()],Et.prototype,"icon",null),(0,E._)([(0,H.MZ)()],Et.prototype,"initialDisplayMode",null),(0,E._)([(0,H.MZ)()],Et.prototype,"location",null),(0,E._)([(0,H.MZ)()],Et.prototype,"label",null),(0,E._)([(0,H.MZ)(),(0,Te.G)("esri/widgets/Popup/t9n/Popup")],Et.prototype,"messages",void 0),(0,E._)([(0,H.MZ)()],Et.prototype,"promises",null),(0,E._)([(0,H.MZ)({readOnly:!0})],Et.prototype,"selectedFeature",null),(0,E._)([(0,H.MZ)({readOnly:!0})],Et.prototype,"selectedDrillInFeature",null),(0,E._)([(0,H.MZ)()],Et.prototype,"selectedFeatureIndex",null),(0,E._)([(0,H.MZ)({readOnly:!0})],Et.prototype,"selectedFeatureWidget",null),(0,E._)([(0,H.MZ)()],Et.prototype,"title",null),(0,E._)([(0,H.MZ)()],Et.prototype,"updateLocationEnabled",null),(0,E._)([(0,H.MZ)()],Et.prototype,"view",null),(0,E._)([(0,H.MZ)({type:qi}),vt(["triggerAction","trigger-action"])],Et.prototype,"viewModel",void 0),(0,E._)([(0,H.MZ)()],Et.prototype,"visible",null),(0,E._)([(0,H.MZ)({type:en,nonNullable:!0})],Et.prototype,"visibleElements",void 0),Et=(0,E._)([(0,V.$)("esri.widgets.Popup")],Et);const un=Et},53158:(st,We,_)=>{_.d(We,{D:()=>k});var z=_(69287),E=_(92190),Ue=_(60421),ae=_(56295);function k({level:H,class:Pe,...ne},V){const me=function ye(H){return(0,z.qE)(Math.ceil(H),1,6)}(H);return(0,ae.K)(`h${me}`,{...ne,"aria-level":String(me),class:(0,Ue.Ly)(E.D.heading,Pe),role:"heading"},V)}},83648:(st,We,_)=>{_.d(We,{A:()=>Q});var z=_(10467),E=_(8189),Ue=_(81098),ae=_(98877),k=_(90660),ye=_(31178),je=_(3046),H=_(56492),Pe=_(12619),ne=_(48900),V=_(85211),G=(_(3248),_(35150),_(40707),_(76576)),oe=_(58443),q=_(92323),w=_(87086);var R=_(93958);let Z=class extends(k.A.ClonableMixin(je.A.IdentifiableMixin(ae.A))){constructor(C){var P;super(C),P=this,this._loaded=!1,this._queryAbortController=null,this._queryPageAbortController=null,this._queryFeatureCountAbortController=null,this.networkSourceIdsInUse=new Set,this.source="popup",this.description=null,this.graphic=null,this.layer=null,this.map=null,this.featureCount=0,this.associationTypes=null,this.showAllEnabled=!1,this.title=null,this.attachmentsFeatureCount=0,this.structureFeatureCount=0,this.contentFeatureCount=0,this.containerFeatureCount=0,this.connectivityFeatureCount=0,this._queryOpenAssociationType=(0,z.A)(function*(){P.activeAssociationType&&(yield P._queryDebounced(P.activeAssociationType))}),this._cancelQuery=()=>{const{_queryAbortController:W}=this;W&&W.abort(),this._queryAbortController=null},this._cancelQueryFeatureCount=()=>{const{_queryFeatureCountAbortController:W}=this;W&&W.abort(),this._queryFeatureCountAbortController=null},this._queryController=function(){var W=(0,z.A)(function*(te){P._cancelQuery();const _e=new AbortController;P._queryAbortController=_e,yield(0,H.QZ)(P._query(te)),P._queryAbortController===_e&&(P._queryAbortController=null)});return function(te){return W.apply(this,arguments)}}(),this._queryFeatureCountController=(0,z.A)(function*(){P._loaded=!1,P._cancelQueryFeatureCount();const W=new AbortController;P._queryFeatureCountAbortController=W,yield(0,H.QZ)(P._queryFeatureCount()),P._queryFeatureCountAbortController===W&&(P._queryFeatureCountAbortController=null),P._loaded=!0}),this._queryDebounced=(0,H.sg)(this._queryController,100),this._queryFeatureCountDebounced=(0,H.sg)(this._queryFeatureCountController,100)}initialize(){this.addHandles([(0,ne.wB)(()=>[this.graphic,this.layer,this.map,this.associationTypes,this.objectId,this.globalId,this.canQuery],()=>this.refresh(),ne.Vh),(0,ne.wB)(()=>this.activeAssociationType,C=>this._queryDebounced(C),ne.Vh)])}destroy(){this._cancelQuery(),this._cancelQueryFeatureCount(),this._destroyAssociatedFeatureViewModels()}get supportsCacheHint(){return!!this.layer?.capabilities?.query?.supportsCacheHint}get canLoad(){return!!this.map&&!!this.associationTypes&&"string"==typeof this.globalId}get canQuery(){const C=this.layer?.capabilities?.query;return!!this.associationTypes&&"string"==typeof this.globalId&&!!C?.supportsPagination}set displayCount(C){this._set("displayCount",Math.max(C??3,0))}get displayCount(){return this._get("displayCount")}get objectId(){return(this.objectIdField&&this.graphic?.attributes?.[this.objectIdField])??null}get objectIdField(){return this.layer?.objectIdField||null}get globalId(){return(this.globalIdField&&this.graphic?.attributes?.[this.globalIdField])??null}get globalIdField(){const{layer:C}=this;return C?.globalIdField}get activeAssociationType(){return this._get("activeAssociationType")}set activeAssociationType(C){C&&!this.associationTypes.includes(C)||this._set("activeAssociationType",C)}get state(){const{_queryAbortController:C,_queryFeatureCountAbortController:P,_queryPageAbortController:W,canQuery:te,_loaded:_e,canLoad:re,source:ce}=this;return P||re&&!_e?"loading":C||W?"querying":!te||"popup"===ce&&0===this.featureCount?"disabled":"ready"}get utilityNetwork(){const{layer:C,map:P}=this;if(!C?.loaded||!P)return null;const W=(0,oe.Sv)(C)?C.parent:C;return(0,R.findUtilityNetwork)(P,W)}get attachmentsAssociations(){return this._get("attachmentsAssociations")||new ye.A}get structureAssociations(){return this._get("structureAssociations")||new ye.A}get contentAssociations(){return this._get("contentAssociations")||new ye.A}get containerAssociations(){return this._get("containerAssociations")||new ye.A}get connectivityAssociations(){return this._get("connectivityAssociations")||new ye.A}get associationFeatures(){return this._get("associationFeatures")||new Pe.A}get associationViewModels(){return this._get("associationViewModels")||new Map}refresh(){var C=this;return(0,z.A)(function*(){yield C._queryFeatureCountDebounced(),yield C._queryOpenAssociationType()})()}getFeatureCountForAssociationType(C){switch(C){case"attachment":return this.attachmentsFeatureCount;case"structure":return this.structureFeatureCount;case"content":return this.contentFeatureCount;case"container":return this.containerFeatureCount;case"connectivity":return this.connectivityFeatureCount}}_destroyAssociatedFeatureViewModels(){this.associationViewModels.forEach(C=>C.destroyAll())}_loadUtiltyNetworks(){var C=this;return(0,z.A)(function*(){const P=C.map;if(!P)return;yield Promise.allSettled(P.utilityNetworks?.map(function(){var te=(0,z.A)(function*(_e){yield _e.load()});return function(_e){return te.apply(this,arguments)}}())??[]);const W=C.utilityNetwork;if(W){const te=_e=>{if("layerId"in _e&&W.isUtilityLayer(_e)){const re=W.getSourceIdByLayerId(_e.layerId);null!==re&&C.networkSourceIdsInUse.add(re)}};C._set("networkSourceIdsInUse",new Set),P.allLayers.forEach(te),P.allTables.forEach(te)}})()}_findLayersBySourceId(C){var P=this;return(0,z.A)(function*(){const{utilityNetwork:W,map:te}=P,_e=Ee=>!(!Ee.url||Ee.layerId!==re)&&Ee.url.replace(/\/\d+$/,"")===W?.featureServiceUrl;yield W?.load();const re=W.getLayerIdBySourceId(C),ce=te.allLayers.filter(_e),de=te.allTables.filter(_e),Le=ce.concat(de).toArray();return yield Promise.allSettled(Le.map(Ee=>Ee.load())),Le})()}_clearAssociations(){this.attachmentsAssociations.removeAll(),this.structureAssociations.removeAll(),this.contentAssociations.removeAll(),this.containerAssociations.removeAll(),this.connectivityAssociations.removeAll()}_clearFeatures(){this.associationFeatures.forEach(C=>C.removeAll()),this.associationFeatures.clear()}_getAssociationsByType(C){switch(C){case"attachment":return this.attachmentsAssociations;case"structure":return this.structureAssociations;case"connectivity":return this.connectivityAssociations;case"container":return this.containerAssociations;case"content":return this.contentAssociations}}_queryLayer(C,P,W,te,_e){var re=this;return(0,z.A)(function*(){const ce=C.fieldsIndex.get("assetgroup"),de=C.fieldsIndex.get("assettype"),Le=null!=W,Ee=null!=te,ve="("+P.map(Xe=>`'${Xe}'`).join(", ")+")",ze=new w.A({outFields:["*"],cacheHint:re.supportsCacheHint,where:`${C.globalIdField} IN ${ve}`+(Le?` AND ${ce?.name} = ${W}`:"")+(Le&&Ee?` AND ${de?.name} = ${te}`:"")});return yield re._queryAll(ze,C,{signal:_e?.signal})})()}_createAssociationFeatureObjects(C,P,W,te,_e,re){var ce=this;return(0,z.A)(function*(){if(0===C.length)return[];const de=new Map;for(const[Ee,ve]of P){const Re=yield ce._findLayersBySourceId(Ee);for(const Ve of Re)(yield ce._queryLayer(Ve,ve,te,_e,re)).forEach(Ze=>{if("popup"===ce.source?Ze.layer&&Ze.getEffectivePopupTemplate():Ze.layer){const ze=de.get(Ze.attributes[Ve.globalIdField])??[];ze.push(Ze),de.set(Ze.attributes[Ve.globalIdField],ze)}})}const Le=[];return yield Promise.all(C.toArray().map(function(){var Ee=(0,z.A)(function*(ve){const{fromNetworkElement:Re,toNetworkElement:Ve}=ve,Ze=Re.globalId===W?Ve:Re,ze=de.get(Ze.globalId)??[];yield Promise.all(ze.map(function(){var Xe=(0,z.A)(function*(ke){const _t=ce.utilityNetwork?.getTerminalById(Ze?.terminalId)?.name;if(ke.layer&&"getFeatureTitle"in ke.layer){const J=yield ke.layer.getFeatureTitle(ke);Le.push({title:J,association:ve,feature:ke,terminalName:_t})}else Le.push({association:ve,feature:ke,terminalName:_t})});return function(ke){return Xe.apply(this,arguments)}}()))});return function(ve){return Ee.apply(this,arguments)}}())),Le})()}_parseFeatureObjects(C,P){C.forEach(W=>{const te=W?.feature,_e=te.layer,re=P.get(_e)??new ye.A;re.add(W),P.set(_e,re)})}_queryAll(C,P,W){return(0,z.A)(function*(){const te=[];let _e=0,re=!1;C.num=P.sourceJSON?.maxRecordCount??2e3;do{C.start=_e;const ce=yield P.queryFeatures(C,W);te.push(...ce.features),re=ce.exceededTransferLimit,re&&(_e+=ce.features.length)}while(re);return te})()}_queryAssociations(C){var P=this;return(0,z.A)(function*(){const{layer:W,globalId:te,associationTypes:_e,utilityNetwork:re,canQuery:ce}=P;if(yield Promise.allSettled([W?.load(),re?.load()]),P._clearAssociations(),!(ce&&W&&_e&&re&&te))return;const de=(0,oe.Sv)(W)?W.parent:W,Le=new q.A({globalId:te,networkSourceId:re.getSourceIdByLayerId(de.layerId)}),Ee=new Set;_e.forEach(ze=>{switch(ze.type){case"attachment":case"structure":Ee.add("attachment");break;case"container":case"content":Ee.add("containment");break;case"connectivity":Ee.add("connectivity"),Ee.add("junction-junction-connectivity"),Ee.add("junction-edge-from-connectivity"),Ee.add("junction-edge-midspan-connectivity"),Ee.add("junction-edge-to-connectivity")}});const ve=yield re?.queryAssociations({elements:[Le],types:Array.from(Ee)},{signal:C?.signal}),Re=new Map,Ve=new Map;_e.forEach(ze=>{Ve.set(ze.type,ze),Re.set(ze.type,[])}),ve.forEach(ze=>{const{toNetworkElement:Xe,fromNetworkElement:ke}=ze;switch(ze.associationType){case"connectivity":case"junction-junction-connectivity":case"junction-edge-from-connectivity":case"junction-edge-midspan-connectivity":case"junction-edge-to-connectivity":if(ke?.globalId===te){if(P._shouldDiscardNetworkElement(Xe,"connectivity",Ve))break;Re.get("connectivity")?.push(Xe.globalId)}else{if(P._shouldDiscardNetworkElement(ke,"connectivity",Ve))break;Re.get("connectivity")?.push(ke.globalId)}P.connectivityAssociations.add(ze);break;case"containment":if(ke?.globalId===te){if(P._shouldDiscardNetworkElement(Xe,"content",Ve))break;Re.get("content")?.push(Xe.globalId),P.contentAssociations.add(ze)}else{if(P._shouldDiscardNetworkElement(ke,"container",Ve))break;Re.get("container")?.push(ke.globalId),P.containerAssociations.add(ze)}break;case"attachment":if(ke?.globalId===te){if(P._shouldDiscardNetworkElement(Xe,"attachment",Ve))break;Re.get("attachment")?.push(Xe.globalId),P.attachmentsAssociations.add(ze)}else{if(P._shouldDiscardNetworkElement(ke,"structure",Ve))break;Re.get("structure")?.push(ke.globalId),P.structureAssociations.add(ze)}}});const Ze=_e.map(function(){var ze=(0,z.A)(function*(Xe){const{associatedNetworkSourceId:ke,associatedAssetGroup:_t,associatedAssetType:J}=Xe,K=Re.get(Xe.type),X=null!=_t?yield P._countAssociatedFeatures(ke,K,_t,J,C):K.length;switch(Xe.type){case"attachment":P._set("attachmentsFeatureCount",X);break;case"structure":P._set("structureFeatureCount",X);break;case"content":P._set("contentFeatureCount",X);break;case"container":P._set("containerFeatureCount",X);break;case"connectivity":P._set("connectivityFeatureCount",X)}});return function(Xe){return ze.apply(this,arguments)}}());yield Promise.allSettled(Ze)})()}_countAssociatedFeatureCount(C,P,W,te,_e){return(0,z.A)(function*(){const re=C.fieldsIndex.get("assetgroup"),ce=C.fieldsIndex.get("assettype"),de=null!=te,Le="("+P.map(Ve=>`'${Ve}'`).join(", ")+")";return C.queryFeatureCount({where:`${C.globalIdField} IN ${Le} AND ${re?.name} = ${W}`+(de?` AND ${ce?.name} = ${te}`:""),outFields:["*"],returnGeometry:!1},{signal:_e?.signal})})()}_countAssociatedFeatures(C,P,W,te,_e){var re=this;return(0,z.A)(function*(){if(0===P.length)return 0;const ce=(yield re._findLayersBySourceId(C)).map(function(){var de=(0,z.A)(function*(Le){return re._countAssociatedFeatureCount(Le,P,W,te,_e)});return function(Le){return de.apply(this,arguments)}}());return(yield Promise.all(ce)).reduce((de,Le)=>de+Le,0)})()}_queryAssociatedFeatures(C,P){var W=this;return(0,z.A)(function*(){const{layer:te,globalId:_e,associationTypes:re,utilityNetwork:ce,canQuery:de,associationFeatures:Le}=W;if(yield Promise.allSettled([te?.load(),ce?.load()]),!(de&&te&&re&&ce))return;const Ee=W._getAssociationsByType(C.type),{associatedAssetGroup:ve,associatedAssetType:Re}=C,Ve=new Map;Ee.forEach(ze=>{const{fromNetworkElement:Xe,toNetworkElement:ke}=ze,{networkSourceId:_t,elementGlobalId:J}=Xe.globalId===_e?{networkSourceId:ke.networkSourceId,elementGlobalId:ke.globalId}:{networkSourceId:Xe.networkSourceId,elementGlobalId:Xe.globalId},K=Ve.get(_t)||[];K.push(J),Ve.set(_t,K)});const Ze=yield W._createAssociationFeatureObjects(Ee,Ve,_e,ve,Re,P);W._parseFeatureObjects(Ze,Le)})()}_queryFeatureCount(){var C=this;return(0,z.A)(function*(){yield C._loadUtiltyNetworks();const{_queryFeatureCountAbortController:P,canQuery:W}=C;W?(yield C._queryAssociations(P),C._set("featureCount",C.attachmentsFeatureCount+C.structureFeatureCount+C.contentFeatureCount+C.containerFeatureCount+C.connectivityFeatureCount)):C._set("featureCount",0)})()}_query(C){var P=this;return(0,z.A)(function*(){if(!C)return;yield P._loadUtiltyNetworks();const{_queryAbortController:W}=P;P._destroyAssociatedFeatureViewModels(),P._clearFeatures(),0!==P.featureCount&&(P.destroyed||(yield P._queryAssociatedFeatures(C,{signal:W?.signal})))})()}_shouldDiscardNetworkElement(C,P,W){if(!C)return!1;const{networkSourceIdsInUse:te}=this,{networkSourceId:_e}=C,re=W.get(P)?.associatedNetworkSourceId,ce=te.has(_e);return null!=re&&re!==_e||!ce}};(0,E._)([(0,V.MZ)()],Z.prototype,"_loaded",void 0),(0,E._)([(0,V.MZ)()],Z.prototype,"_queryAbortController",void 0),(0,E._)([(0,V.MZ)()],Z.prototype,"_queryPageAbortController",void 0),(0,E._)([(0,V.MZ)()],Z.prototype,"_queryFeatureCountAbortController",void 0),(0,E._)([(0,V.MZ)({readOnly:!0})],Z.prototype,"supportsCacheHint",null),(0,E._)([(0,V.MZ)({readOnly:!0})],Z.prototype,"canLoad",null),(0,E._)([(0,V.MZ)({readOnly:!0})],Z.prototype,"canQuery",null),(0,E._)([(0,V.MZ)()],Z.prototype,"networkSourceIdsInUse",void 0),(0,E._)([(0,V.MZ)({constructOnly:!0})],Z.prototype,"source",void 0),(0,E._)([(0,V.MZ)()],Z.prototype,"description",void 0),(0,E._)([(0,V.MZ)({value:3})],Z.prototype,"displayCount",null),(0,E._)([(0,V.MZ)({type:Ue.A})],Z.prototype,"graphic",void 0),(0,E._)([(0,V.MZ)()],Z.prototype,"layer",void 0),(0,E._)([(0,V.MZ)()],Z.prototype,"map",void 0),(0,E._)([(0,V.MZ)({readOnly:!0})],Z.prototype,"objectId",null),(0,E._)([(0,V.MZ)({readOnly:!0})],Z.prototype,"objectIdField",null),(0,E._)([(0,V.MZ)({readOnly:!0})],Z.prototype,"globalId",null),(0,E._)([(0,V.MZ)({readOnly:!0})],Z.prototype,"globalIdField",null),(0,E._)([(0,V.MZ)()],Z.prototype,"featureCount",void 0),(0,E._)([(0,V.MZ)()],Z.prototype,"associationTypes",void 0),(0,E._)([(0,V.MZ)()],Z.prototype,"activeAssociationType",null),(0,E._)([(0,V.MZ)()],Z.prototype,"showAllEnabled",void 0),(0,E._)([(0,V.MZ)()],Z.prototype,"state",null),(0,E._)([(0,V.MZ)()],Z.prototype,"title",void 0),(0,E._)([(0,V.MZ)({readOnly:!0})],Z.prototype,"utilityNetwork",null),(0,E._)([(0,V.MZ)({readOnly:!0})],Z.prototype,"attachmentsFeatureCount",void 0),(0,E._)([(0,V.MZ)({readOnly:!0})],Z.prototype,"structureFeatureCount",void 0),(0,E._)([(0,V.MZ)({readOnly:!0})],Z.prototype,"attachmentsAssociations",null),(0,E._)([(0,V.MZ)({readOnly:!0})],Z.prototype,"structureAssociations",null),(0,E._)([(0,V.MZ)({readOnly:!0})],Z.prototype,"contentFeatureCount",void 0),(0,E._)([(0,V.MZ)({readOnly:!0})],Z.prototype,"containerFeatureCount",void 0),(0,E._)([(0,V.MZ)({readOnly:!0})],Z.prototype,"contentAssociations",null),(0,E._)([(0,V.MZ)({readOnly:!0})],Z.prototype,"containerAssociations",null),(0,E._)([(0,V.MZ)({readOnly:!0})],Z.prototype,"connectivityFeatureCount",void 0),(0,E._)([(0,V.MZ)({readOnly:!0})],Z.prototype,"connectivityAssociations",null),(0,E._)([(0,V.MZ)({readOnly:!0})],Z.prototype,"associationFeatures",null),(0,E._)([(0,V.MZ)({readOnly:!0})],Z.prototype,"associationViewModels",null),Z=(0,E._)([(0,G.$)("esri.widgets.support.UtilityNetworkAssociations.FeatureUtilityNetworkAssociationsViewModel")],Z);const Q=Z},37360:(st,We,_)=>{_.d(We,{T:()=>z});const z={close:"esri-icon-close",collapse:"esri-icon-collapse",down:"esri-icon-down",downArrow:"esri-icon-down-arrow",dragHorizontal:"esri-icon-drag-horizontal",dragVertical:"esri-icon-drag-vertical",duplicate:"esri-icon-duplicate",expand:"esri-icon-expand",fontFallbackText:"esri-icon-font-fallback-text",forward:"esri-icon-forward",handleVertical:"esri-icon-handle-vertical",icon:"esri-icon",left:"esri-icon-left",locateCircled:"esri-icon-locate-circled",noticeTriangle:"esri-icon-notice-triangle",pause:"esri-icon-pause",play:"esri-icon-play",plus:"esri-icon-plus",radioChecked:"esri-icon-radio-checked",radioUnchecked:"esri-icon-radio-unchecked",refresh:"esri-icon-refresh",reverse:"esri-icon-reverse",right:"esri-icon-right",search:"esri-icon-search",swap:"esri-icon-swap",table:"esri-icon-table",trash:"esri-icon-trash",up:"esri-icon-up",upArrow:"esri-icon-up-arrow",upDownArrows:"esri-icon-up-down-arrows",urbanModel:"esri-icon-urban-model",zoomInMagnifyingGlass:"esri-icon-zoom-in-magnifying-glass",zoomToObject:"esri-icon-zoom-to-object"}},44182:(st,We,_)=>{function ae(ye){return ye&&"function"==typeof ye.render}function k(ye){return ye&&"function"==typeof ye.postMixInProperties&&"function"==typeof ye.buildRendering&&"function"==typeof ye.postCreate&&"function"==typeof ye.startup}_.d(We,{p4:()=>ae,xk:()=>k}),_(54737),_(56295),_(60421)}}]);