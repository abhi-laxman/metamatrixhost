"use strict";(self.webpackChunkAngularClient=self.webpackChunkAngularClient||[]).push([[2226,8860,6322,5204,9728,6773,6598,2117],{33087:(V,b,e)=>{e.d(b,{q:()=>f});var y=e(60611);class f{constructor(a,j){this._storage=new y.F,this.id="",this.name="",this.size=0,this._storage.maxSize=a,this._storage.register(this),j&&this._storage.registerRemoveFunc("",j)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(a,j,P=1){this._storage.put(this,a,j,P,1)}pop(a){return this._storage.pop(this,a)}get(a){return this._storage.get(this,a)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(a){this._storage.maxSize=a}resetHitRate(){}}},60611:(V,b,e)=>{e.d(b,{F:()=>P,Ti:()=>f});var y=e(12438);const f=-3,W=f-1;var a,T;(T=a||(a={}))[T.ALL=0]="ALL",T[T.SOME=1]="SOME";class P{get size(){return this._size}constructor(r=10485760){this._maxSize=r,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new y.A,this._users=new y.A}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear()}register(r){this._users.push(r)}deregister(r){this._users.removeUnordered(r)}registerRemoveFunc(r,l){this._removeFuncs.push([r,l])}deregisterRemoveFunc(r){this._removeFuncs.filterInPlace(l=>l[0]!==r)}get maxSize(){return this._maxSize}set maxSize(r){this._maxSize=Math.max(r,-1),this._checkSize()}getSize(r,l){return this._db.get(r.id+l)?.size??0}put(r,l,c,i,h){const _=this._db.get(l=r.id+l);if(_&&(this._size-=_.size,r.size-=_.size,this._db.delete(l),_.entry!==c&&this._notifyRemove(l,_.entry,_.size,a.ALL)),i>this._maxSize)return void this._notifyRemove(l,c,i,a.ALL);if(void 0===c)return void console.warn("Refusing to cache undefined entry ");if(!i||i<0)return console.warn(`Refusing to cache entry with size ${i} for key ${l}`),void this._notifyRemove(l,c,0,a.ALL);const v=1+Math.max(h,W)-f;this._db.set(l,new z(c,i,v)),this._size+=i,r.size+=i,this._checkSize()}updateSize(r,l,c,i){const h=this._db.get(l=r.id+l);if(h&&h.entry===c){for(this._size-=h.size,r.size-=h.size;i>this._maxSize;){const _=this._notifyRemove(l,c,i,a.SOME);if(!(null!=_&&_>0))return void this._db.delete(l);i=_}h.size=i,this._size+=i,r.size+=i,this._checkSize()}}pop(r,l){const c=this._db.get(l=r.id+l);if(c)return this._size-=c.size,r.size-=c.size,this._db.delete(l),++this._hit,c.entry;++this._miss}get(r,l){const c=this._db.get(l=r.id+l);if(void 0!==c)return this._db.delete(l),c.lives=c.lifetime,this._db.set(l,c),++this._hit,c.entry;++this._miss}peek(r,l){const c=this._db.get(r.id+l);return c?++this._hit:++this._miss,c?.entry}get performanceInfo(){const r={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},l={},c=new Array;this._db.forEach((_,v)=>{const d=_.lifetime;c[d]=(c[d]||0)+_.size,this._users.forAll(M=>{const{id:g,name:n}=M;v.startsWith(g)&&(l[n]=(l[n]||0)+_.size)})});const i={};this._users.forAll(_=>{const v=_.name;"hitRate"in _&&"number"==typeof _.hitRate&&!isNaN(_.hitRate)&&_.hitRate>0?(l[v]=l[v]||0,i[v]=Math.round(100*_.hitRate)+"%"):i[v]="0%"});const h=Object.keys(l);h.sort((_,v)=>l[v]-l[_]),h.forEach(_=>r[_]=Math.round(l[_]/2**20)+"MB / "+i[_]);for(let _=c.length-1;_>=0;--_){const v=c[_];v&&(r["Priority "+(_+f-1)]=Math.round(v/this._size*100)+"%")}return r}resetStats(){this._hit=this._miss=0,this._users.forAll(r=>r.resetHitRate())}clear(r){const l=r.id;this._db.forEach((c,i)=>{i.startsWith(l)&&(this._size-=c.size,this._db.delete(i),this._notifyRemove(i,c.entry,c.size,a.ALL))}),r.size=0}clearAll(){this._db.forEach((r,l)=>this._notifyRemove(l,r.entry,r.size,a.ALL)),this._users.forAll(r=>r.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(r,l,c,i){let h;return this._removeFuncs.some(_=>{if(r.startsWith(_[0])){const v=_[1](l,i,c);return"number"==typeof v&&(h=v),!0}return!1}),h}_checkSize(){this._users.forAll(r=>this._checkSizeLimits(r)),this._checkSizeLimits()}_checkSizeLimits(r){const l=r??this;if(l.maxSize<0||l.size<=l.maxSize)return;const c=r?.id;let i=!0;for(;i;){i=!1;for(const[h,_]of this._db)if(0===_.lifetime&&(!c||h.startsWith(c))){if(this._purgeItem(h,_,r),l.size<=.9*l.maxSize)return;i||=this._db.has(h)}}for(const[h,_]of this._db)if((!c||h.startsWith(c))&&(this._purgeItem(h,_,r),l.size<=.9*l.maxSize))return}_purgeItem(r,l,c=this._users.find(i=>r.startsWith(i.id))){if(this._db.delete(r),l.lives<=1){this._size-=l.size,c&&(c.size-=l.size);const i=this._notifyRemove(r,l.entry,l.size,a.SOME);null!=i&&i>0&&(this._size+=i,c&&(c.size+=i),l.lives=l.lifetime,l.size=i,this._db.set(r,l))}else--l.lives,this._db.set(r,l)}}class z{constructor(r,l,c){this.entry=r,this.size=l,this.lifetime=c,this.lives=c}}},36819:(V,b,e)=>{e.d(b,{A:()=>h});var y=e(8189),f=e(85211),P=(e(3248),e(35150),e(40707),e(76576)),F=e(88494),z=e(95478),T=e(93410),r=e(33036),l=e(27641),c=e(88485);let i=class extends((0,T.dM)((0,r.j)(z.A))){constructor(_){super(_),this.elevationInfo=null,this.graphics=new l.Y,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(_){return this.graphics.add(_),this}addMany(_){return this.graphics.addMany(_),this}removeAll(){return this.graphics.removeAll(),this}remove(_){this.graphics.remove(_)}removeMany(_){this.graphics.removeMany(_)}on(_,v){return super.on(_,v)}graphicChanged(_){this.emit("graphic-update",_)}};(0,y._)([(0,f.MZ)({type:c.A})],i.prototype,"elevationInfo",void 0),(0,y._)([(0,f.MZ)((0,F.C)(l.Y,"graphics"))],i.prototype,"graphics",void 0),(0,y._)([(0,f.MZ)({type:["show","hide"]})],i.prototype,"listMode",void 0),(0,y._)([(0,f.MZ)()],i.prototype,"screenSizePerspectiveEnabled",void 0),(0,y._)([(0,f.MZ)({readOnly:!0})],i.prototype,"type",void 0),(0,y._)([(0,f.MZ)({constructOnly:!0})],i.prototype,"internal",void 0),i=(0,y._)([(0,P.$)("esri.layers.GraphicsLayer")],i);const h=i},72921:(V,b,e)=>{e.r(b),e.d(b,{default:()=>Ce});var y=e(10467),f=e(8189),W=e(81098),a=e(31178),j=e(5922),P=e(77806),F=e(39693),z=e(89221),T=e(96996),r=e(85211),i=(e(3248),e(35150),e(17221)),h=e(76576),_=e(50305),v=e(28067),d=e(13970),M=e(32034),g=e(51995),n=e(77098),E=e(58701),D=e(35940),p=e(36819),s=e(95478),u=e(18056),o=e(93410),O=e(17049),B=e(85551),S=e(33036),x=e(29141),U=e(88521),K=e(55417),$=e(46602),J=e(47705);function X(R){return"markup"===R.featureCollectionType||R.layers.some(I=>null!=I.layerDefinition.visibilityField||!_e(I))}function _e({layerDefinition:R,featureSet:I}){const N=R.geometryType??I.geometryType;return me.find(G=>N===G.geometryTypeJSON&&R.drawingInfo?.renderer?.symbol?.type===G.identifyingSymbol.type)}function ye(){return new v.A({xmin:-180,ymin:-90,xmax:180,ymax:90})}const fe=new x.A({name:"OBJECTID",alias:"OBJECTID",type:"oid",nullable:!1,editable:!1}),ve=new x.A({name:"title",alias:"Title",type:"string",nullable:!0,editable:!0,length:255});let ee=class extends p.A{constructor(R){super(R),this.visibilityMode="inherited"}initialize(){for(const R of this.graphics)R.sourceLayer=this.layer;this.graphics.on("after-add",R=>{R.item.sourceLayer=this.layer}),this.graphics.on("after-remove",R=>{R.item.sourceLayer=null})}get fullExtent(){const R=this.layer?.spatialReference,I=this.fullBounds;return R?null==I?(0,d.projectOrLoad)(ye(),R).geometry:(0,g.w1)(I,R):null}get fullBounds(){const R=this.layer?.spatialReference;if(!R)return null;const I=(0,g.Ie)();return this.graphics.forEach(N=>{const G=null!=N.geometry?(0,d.projectOrLoad)(N.geometry,R).geometry:null;null!=G&&(0,g.fT)(I,"point"===G.type?G:G.extent,I)}),(0,g.aI)(I,g.qv)?null:I}get sublayers(){return this.graphics}};(0,f._)([(0,r.MZ)({readOnly:!0})],ee.prototype,"fullExtent",null),(0,f._)([(0,r.MZ)({readOnly:!0})],ee.prototype,"fullBounds",null),(0,f._)([(0,r.MZ)({readOnly:!0})],ee.prototype,"sublayers",null),(0,f._)([(0,r.MZ)()],ee.prototype,"layer",void 0),(0,f._)([(0,r.MZ)()],ee.prototype,"layerId",void 0),(0,f._)([(0,r.MZ)({readOnly:!0})],ee.prototype,"visibilityMode",void 0),ee=(0,f._)([(0,h.$)("esri.layers.MapNotesLayer.MapNotesSublayer")],ee);const me=[{geometryType:"polygon",geometryTypeJSON:"esriGeometryPolygon",id:"polygonLayer",layerId:0,title:"Polygons",identifyingSymbol:(new U.A).toJSON()},{geometryType:"polyline",geometryTypeJSON:"esriGeometryPolyline",id:"polylineLayer",layerId:1,title:"Polylines",identifyingSymbol:(new K.A).toJSON()},{geometryType:"multipoint",geometryTypeJSON:"esriGeometryMultipoint",id:"multipointLayer",layerId:2,title:"Multipoints",identifyingSymbol:(new $.A).toJSON()},{geometryType:"point",geometryTypeJSON:"esriGeometryPoint",id:"pointLayer",layerId:3,title:"Points",identifyingSymbol:(new $.A).toJSON()},{geometryType:"point",geometryTypeJSON:"esriGeometryPoint",id:"textLayer",layerId:4,title:"Text",identifyingSymbol:(new J.A).toJSON()}];let Z=class extends((0,o.dM)((0,S.j)((0,O.q)((0,B.A)((0,F.P)(s.A)))))){constructor(R){super(R),this.capabilities={operations:{supportsMapNotesEditing:!0}},this.featureCollections=null,this.featureCollectionJSON=null,this.featureCollectionType="notes",this.legendEnabled=!1,this.listMode="hide-children",this.minScale=0,this.maxScale=0,this.spatialReference=M.A.WGS84,this.sublayers=new a.A(me.map(I=>new ee({id:I.id,layerId:I.layerId,title:I.title,layer:this}))),this.title="Map Notes",this.type="map-notes",this.visibilityMode="inherited"}readCapabilities(R,I,N){return{operations:{supportsMapNotesEditing:!X(I)&&"portal-item"!==N?.origin}}}readFeatureCollections(R,I,N){if(!X(I))return null;const G=I.layers.map(H=>{const Q=new D.default;return Q.read(H,N),Q});return new a.A({items:G})}readLegacyfeatureCollectionJSON(R,I){return X(I)?(0,P.o8)(I.featureCollection):null}get fullExtent(){const R=this.spatialReference,I=(0,g.Ie)();return null!=this.sublayers?this.sublayers.forEach(({fullBounds:N})=>null!=N?(0,g.fT)(I,N,I):I,I):this.featureCollectionJSON?.layers.some(N=>N.layerDefinition.extent)&&this.featureCollectionJSON.layers.forEach(N=>{const G=(0,d.projectOrLoad)(N.layerDefinition.extent,R).geometry;null!=G&&(0,g.fT)(I,G,I)}),(0,g.aI)(I,g.qv)?(0,d.projectOrLoad)(ye(),R).geometry:(0,g.w1)(I,R)}readMinScale(R,I){for(const N of I.layers)if(null!=N.layerDefinition.minScale)return N.layerDefinition.minScale;return 0}readMaxScale(R,I){for(const N of I.layers)if(null!=N.layerDefinition.maxScale)return N.layerDefinition.maxScale;return 0}get multipointLayer(){return this._findSublayer("multipointLayer")}get pointLayer(){return this._findSublayer("pointLayer")}get polygonLayer(){return this._findSublayer("polygonLayer")}get polylineLayer(){return this._findSublayer("polylineLayer")}readSpatialReference(R,I){return I.layers.length?M.A.fromJSON(I.layers[0].layerDefinition.spatialReference):M.A.WGS84}readSublayers(R,I,N){if(X(I))return null;const G=[];let H=I.layers.reduce((Q,Y)=>Math.max(Q,Y.layerDefinition.id??-1),-1)+1;for(const Q of I.layers){const{layerDefinition:Y,featureSet:te}=Q,t=Y.id??H++,m=_e(Q);if(null!=m){const C=new ee({id:m.id,title:Y.name,layerId:t,layer:this,graphics:te.features.map(({geometry:L,symbol:w,attributes:A,popupInfo:se})=>W.A.fromJSON({attributes:A,geometry:L,symbol:w,popupTemplate:se}))});G.push(C)}}return new a.A(G)}writeSublayers(R,I,N,G){const{minScale:H,maxScale:Q}=this;if(null==R)return;const Y=R.some(m=>m.graphics.length>0);if(!this.capabilities.operations.supportsMapNotesEditing)return void(Y&&G?.messages?.push(new j.A("map-notes-layer:editing-not-supported","New map notes cannot be added to this layer")));const te=[];let t=this.spatialReference.toJSON();e:for(const m of R)for(const C of m.graphics)if(null!=C.geometry){t=C.geometry.spatialReference.toJSON();break e}for(const m of me){const C=R.find(L=>m.id===L.id);this._writeMapNoteSublayer(te,C,m,H,Q,t,G)}(0,z.sM)("featureCollection.layers",te,I)}get textLayer(){return this._findSublayer("textLayer")}load(R){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Feature Collection"]},R)),Promise.resolve(this)}read(R,I){"featureCollection"in R&&(R=(0,P.o8)(R),Object.assign(R,R.featureCollection)),super.read(R,I)}beforeSave(){var R=this;return(0,y.A)(function*(){if(null==R.sublayers)return;let I=null;const N=[];for(const H of R.sublayers)for(const Q of H.graphics)if(null!=Q.geometry){const Y=Q.geometry;I?(0,E.aI)(Y.spatialReference,I)||((0,d.canProjectWithoutEngine)(Y.spatialReference,I)||(0,d.isLoaded)()||(yield(0,d.load)()),Q.geometry=(0,d.project)(Y,I)):I=Y.spatialReference,N.push(Q)}const G=yield(0,n.el)(N.map(H=>H.geometry));N.forEach((H,Q)=>H.geometry=G[Q])})()}_findSublayer(R){return null==this.sublayers?null:this.sublayers?.find(I=>I.id===R)??null}_writeMapNoteSublayer(R,I,N,G,H,Q,Y){const te=[];if(null!=I){for(const t of I.graphics)this._writeMapNote(te,t,N.geometryType,Y);this._normalizeObjectIds(te,fe),R.push({layerDefinition:{name:I.title,drawingInfo:{renderer:{type:"simple",symbol:(0,P.o8)(N.identifyingSymbol)}},id:I.layerId,geometryType:N.geometryTypeJSON,minScale:G,maxScale:H,objectIdField:"OBJECTID",fields:[fe.toJSON(),ve.toJSON()],spatialReference:Q},featureSet:{features:te,geometryType:N.geometryTypeJSON}})}}_writeMapNote(R,I,N,G){if(null==I)return;const{geometry:H,symbol:Q,popupTemplate:Y}=I;if(null==H)return;if(H.type!==N)return void G?.messages?.push(new T.A("map-notes-layer:invalid-geometry-type",`Geometry "${H.type}" cannot be saved in "${N}" layer`,{graphic:I}));if(null==Q)return void G?.messages?.push(new T.A("map-notes-layer:no-symbol","Skipping map notes with no symbol",{graphic:I}));const te={attributes:{...I.attributes},geometry:H.toJSON(),symbol:Q.toJSON()};null!=Y&&(te.popupInfo=Y.toJSON()),R.push(te)}_normalizeObjectIds(R,I){const N=I.name;let G=(0,u.H)(N,R)+1;const H=new Set;for(const Q of R){Q.attributes||(Q.attributes={});const{attributes:Y}=Q;(null==Y[N]||H.has(Y[N]))&&(Y[N]=G++),H.add(Y[N])}}};(0,f._)([(0,r.MZ)({readOnly:!0})],Z.prototype,"capabilities",void 0),(0,f._)([(0,i.w)(["portal-item","web-map"],"capabilities",["layers"])],Z.prototype,"readCapabilities",null),(0,f._)([(0,r.MZ)({readOnly:!0})],Z.prototype,"featureCollections",void 0),(0,f._)([(0,i.w)(["web-map","portal-item"],"featureCollections",["layers"])],Z.prototype,"readFeatureCollections",null),(0,f._)([(0,r.MZ)({readOnly:!0,json:{origins:{"web-map":{write:{enabled:!0,target:"featureCollection"}}}}})],Z.prototype,"featureCollectionJSON",void 0),(0,f._)([(0,i.w)(["web-map","portal-item"],"featureCollectionJSON",["featureCollection"])],Z.prototype,"readLegacyfeatureCollectionJSON",null),(0,f._)([(0,r.MZ)({readOnly:!0,json:{read:!0,write:{enabled:!0,ignoreOrigin:!0}}})],Z.prototype,"featureCollectionType",void 0),(0,f._)([(0,r.MZ)({readOnly:!0})],Z.prototype,"fullExtent",null),(0,f._)([(0,r.MZ)({readOnly:!0,json:{origins:{"web-map":{write:{target:"featureCollection.showLegend",overridePolicy(){return{enabled:null!=this.featureCollectionJSON}}}}}}})],Z.prototype,"legendEnabled",void 0),(0,f._)([(0,r.MZ)({type:["show","hide","hide-children"]})],Z.prototype,"listMode",void 0),(0,f._)([(0,r.MZ)({type:Number,nonNullable:!0,json:{write:!1}})],Z.prototype,"minScale",void 0),(0,f._)([(0,i.w)(["web-map","portal-item"],"minScale",["layers"])],Z.prototype,"readMinScale",null),(0,f._)([(0,r.MZ)({type:Number,nonNullable:!0,json:{write:!1}})],Z.prototype,"maxScale",void 0),(0,f._)([(0,i.w)(["web-map","portal-item"],"maxScale",["layers"])],Z.prototype,"readMaxScale",null),(0,f._)([(0,r.MZ)({readOnly:!0})],Z.prototype,"multipointLayer",null),(0,f._)([(0,r.MZ)({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],Z.prototype,"operationalLayerType",void 0),(0,f._)([(0,r.MZ)({readOnly:!0})],Z.prototype,"pointLayer",null),(0,f._)([(0,r.MZ)({readOnly:!0})],Z.prototype,"polygonLayer",null),(0,f._)([(0,r.MZ)({readOnly:!0})],Z.prototype,"polylineLayer",null),(0,f._)([(0,r.MZ)({type:M.A})],Z.prototype,"spatialReference",void 0),(0,f._)([(0,i.w)(["web-map","portal-item"],"spatialReference",["layers"])],Z.prototype,"readSpatialReference",null),(0,f._)([(0,r.MZ)({readOnly:!0,json:{origins:{"web-map":{write:{ignoreOrigin:!0}}}}})],Z.prototype,"sublayers",void 0),(0,f._)([(0,i.w)("web-map","sublayers",["layers"])],Z.prototype,"readSublayers",null),(0,f._)([(0,_.K)("web-map","sublayers")],Z.prototype,"writeSublayers",null),(0,f._)([(0,r.MZ)({readOnly:!0})],Z.prototype,"textLayer",null),(0,f._)([(0,r.MZ)()],Z.prototype,"title",void 0),(0,f._)([(0,r.MZ)({readOnly:!0,json:{read:!1}})],Z.prototype,"type",void 0),Z=(0,f._)([(0,h.$)("esri.layers.MapNotesLayer")],Z);const Ce=Z},94376:(V,b,e)=>{e.d(b,{p:()=>z});var y=e(8189),f=e(85211),P=(e(3248),e(35150),e(40707),e(76576));const z=T=>{let r=class extends T{get apiKey(){return this._isOverridden("apiKey")?this._get("apiKey"):function F(T){return"portalItem"in T}(this)?this.portalItem?.apiKey:null}set apiKey(l){null!=l?this._override("apiKey",l):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return(0,y._)([(0,f.MZ)({type:String})],r.prototype,"apiKey",null),r=(0,y._)([(0,P.$)("esri.layers.mixins.APIKeyMixin")],r),r}},43124:(V,b,e)=>{e.d(b,{Rr:()=>T,fY:()=>c,ne:()=>l});var y=e(8189),f=e(89221),W=e(85211),F=(e(3248),e(35150),e(40707),e(76576)),z=e(15848);function T(i,h,_){if(!i)return null;const v=i.find(M=>!!M.field);if(!v)return null;const d=new z.A;return d.read(v,_),[d]}const l={type:[z.A],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:T},write:{writer:function r(i,h,_,v){const d=i.find(M=>!!M.field);d&&(0,f.sM)(_,[d.toJSON()],h)}}}},c=i=>{let h=class extends i{constructor(){super(...arguments),this.orderBy=null}};return(0,y._)([(0,W.MZ)(l)],h.prototype,"orderBy",void 0),h=(0,y._)([(0,F.$)("esri.layers.mixins.OrderedLayer")],h),h}},47063:(V,b,e)=>{e.d(b,{A:()=>h});var y=e(8189),f=e(90660),W=e(71065),a=e(85211),z=(e(3248),e(35150),e(40707),e(17221)),T=e(76576),r=e(50305),l=e(39664),c=e(69741);let i=class extends(f.A.ClonableMixin(W.A)){constructor(_){super(_),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(_){const v={};for(const d of Object.keys(_))v[d]=(0,l.rS)(_[d]);return v}writeDomains(_,v){const d={};for(const M of Object.keys(_))_[M]&&(d[M]=_[M]?.toJSON());v.domains=d}};(0,y._)([(0,a.MZ)({json:{write:!0}})],i.prototype,"id",void 0),(0,y._)([(0,a.MZ)({json:{write:!0}})],i.prototype,"name",void 0),(0,y._)([(0,a.MZ)({json:{write:!0}})],i.prototype,"domains",void 0),(0,y._)([(0,z.w)("domains")],i.prototype,"readDomains",null),(0,y._)([(0,r.K)("domains")],i.prototype,"writeDomains",null),(0,y._)([(0,a.MZ)({type:[c.A],json:{write:!0}})],i.prototype,"templates",void 0),i=(0,y._)([(0,T.$)("esri.layers.support.FeatureType")],i);const h=i},73258:(V,b,e)=>{e.d(b,{A:()=>h});var y=e(5922),f=e(71065),W=e(35150),a=e(60797),j=e(24098),P=e(86300),F=e(20543),z=e(22639),T=e(44549);const i=new Map;class h{static fromJSON(n){return new h(n.fields,n.timeZoneByFieldName)}static fromLayer(n){return new h(n.fields??[],M(n))}static fromLayerJSON(n){return new h(n.fields??[],M(n))}constructor(n=[],E){this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=n||[],this._timeZoneByFieldName=E?new Map(E):null;const D=[];for(const p of this.fields){const s=p?.name,u=v(s);if(s&&u){const o=_(s);this._fieldsMap.set(s,p),this._fieldsMap.set(o,p),this._normalizedFieldsMap.set(u,p),D.push(`${o}:${p.type}:${this._timeZoneByFieldName?.get(s)}`),(0,P.vE)(p)?(this.dateFields.push(p),this._dateFieldsSet.add(p)):(0,P.WA)(p)&&(this._numericFieldsSet.add(p),this.numericFields.push(p)),(0,P.te)(p)||(0,P.Xz)(p)||(p.editable=null==p.editable||!!p.editable,p.nullable=null==p.nullable||!!p.nullable)}}D.sort(),this.uid=D.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const n of this.fields)(0,P.te)(n)||(0,P.Xz)(n)||n.nullable||void 0!==(0,P.lD)(n)||this._requiredFields.push(n)}return this._requiredFields}equals(n){return this.uid===n?.uid}has(n){return null!=this.get(n)}get(n){if(!n)return;let E=this._fieldsMap.get(n);return E||(E=this._fieldsMap.get(_(n))??this._normalizedFieldsMap.get(v(n)),E&&this._fieldsMap.set(n,E),E)}getTimeZone(n){const E=this.get(n&&"string"!=typeof n?n.name:n);return E?this._timeZoneByFieldName?this._timeZoneByFieldName.get(E.name):"date"===E.type||"esriFieldTypeDate"===E.type?(W.A.getLogger("esri.layers.support.FieldsIndex").errorOnce(new y.A("getTimeZone:no-timezone-information",`no time zone information for field '${E.name}'`)),F.n$):d.has(E.type)?F.L5:null:null}getLuxonTimeZone(n){const E=this.getTimeZone(n);return E?E===F.L5?j.GB.instance:E===F.n$?T.mQ.utcInstance:(0,a.tE)(i,E,()=>T.oh.create(E)):null}isDateField(n){return this._dateFieldsSet.has(this.get(n))}isTimeOnlyField(n){return(0,P.OH)(this.get(n))}isNumericField(n){return this._numericFieldsSet.has(this.get(n))}normalizeFieldName(n){return this.get(n)?.name??void 0}toJSON(){return{fields:this.fields.map(n=>f.A.isSerializable(n)?n.toJSON():n),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}function _(g){return g.trim().toLowerCase()}function v(g){return(0,P.rS)(g)?.toLowerCase()??""}const d=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function M(g){const n=new Map;if(!g.fields)return n;const E=!0===g.datesInUnknownTimezone,{timeInfo:D,editFieldsInfo:p}=g,s=(D?"startField"in D?D.startField:D.startTimeField:"")??"",u=(D?"endField"in D?D.endField:D.endTimeField:"")??"",o=function c(g){return"dateFieldsTimeZone"in g}(g)?g.dateFieldsTimeZone??null:g.dateFieldsTimeReference?(0,z.ZS)(g.dateFieldsTimeReference):null,O=p?function r(g){return"timeZone"in g}(p)?p.timeZone??o:p.dateFieldsTimeReference?(0,z.ZS)(p.dateFieldsTimeReference):o??F.n$:null,B=D?function l(g){return"timeZone"in g}(D)?D.timeZone??o:D.timeReference?(0,z.ZS)(D.timeReference):o:null,S=new Map([[_(p?.creationDateField??""),O],[_(p?.editDateField??""),O],[_(s),B],[_(u),B]]);for(const{name:x,type:U}of g.fields)if(d.has(U))n.set(x,F.L5);else if("date"!==U&&"esriFieldTypeDate"!==U)n.set(x,null);else if(E)n.set(x,F.L5);else{const K=S.get(_(x??""))??o;n.set(x,K)}return n}},64584:(V,b,e)=>{e.d(b,{A:()=>l});var T,y=e(8189),f=e(31178),W=e(71065),a=e(85211),z=(e(3248),e(35150),e(40707),e(76576));let r=T=class extends W.A{constructor(c){super(c),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new f.A}clone(){return new T({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};(0,y._)([(0,a.MZ)({type:String,json:{write:{isRequired:!0}}})],r.prototype,"floorField",void 0),(0,y._)([(0,a.MZ)({json:{read:!1,write:!1}})],r.prototype,"viewAllMode",void 0),(0,y._)([(0,a.MZ)({json:{read:!1,write:!1}})],r.prototype,"viewAllLevelIds",void 0),r=T=(0,y._)([(0,z.$)("esri.layers.support.LayerFloorInfo")],r);const l=r},15848:(V,b,e)=>{e.d(b,{A:()=>c});var T,y=e(8189),f=e(49976),W=e(71065),a=e(85211),z=(e(3248),e(35150),e(40707),e(76576));const r=new f.J({asc:"ascending",desc:"descending"});let l=T=class extends W.A{constructor(i){super(i),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new T({field:this.field,valueExpression:this.valueExpression,order:this.order})}};(0,y._)([(0,a.MZ)({type:String,json:{write:!0}})],l.prototype,"field",void 0),(0,y._)([(0,a.MZ)({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],l.prototype,"valueExpression",void 0),(0,y._)([(0,a.MZ)({type:r.apiValues,json:{type:r.jsonValues,read:r.read,write:r.write}})],l.prototype,"order",void 0),l=T=(0,y._)([(0,z.$)("esri.layers.support.OrderByInfo")],l);const c=l},36267:(V,b,e)=>{e.d(b,{A:()=>i});var y=e(8189),f=e(90660),W=e(49976),a=e(71065),j=e(85211),T=(e(3248),e(35150),e(40707),e(76576));const r=new W.J({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),l=new W.J({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let c=class extends(f.A.ClonableMixin(a.A)){constructor(h){super(h),this.cardinality=null,this.catalogId=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};(0,y._)([(0,j.MZ)({json:{read:r.read,write:r.write}})],c.prototype,"cardinality",void 0),(0,y._)([(0,j.MZ)({json:{name:"catalogID"}})],c.prototype,"catalogId",void 0),(0,y._)([(0,j.MZ)({json:{read:!0,write:!0}})],c.prototype,"composite",void 0),(0,y._)([(0,j.MZ)({json:{read:!0,write:!0}})],c.prototype,"id",void 0),(0,y._)([(0,j.MZ)({json:{read:!0,write:!0}})],c.prototype,"keyField",void 0),(0,y._)([(0,j.MZ)({json:{read:!0,write:!0}})],c.prototype,"keyFieldInRelationshipTable",void 0),(0,y._)([(0,j.MZ)({json:{read:!0,write:!0}})],c.prototype,"name",void 0),(0,y._)([(0,j.MZ)({json:{read:!0,write:!0}})],c.prototype,"relatedTableId",void 0),(0,y._)([(0,j.MZ)({json:{read:!0,write:!0}})],c.prototype,"relationshipTableId",void 0),(0,y._)([(0,j.MZ)({json:{read:l.read,write:l.write}})],c.prototype,"role",void 0),c=(0,y._)([(0,T.$)("esri.layers.support.Relationship")],c);const i=c},85791:(V,b,e)=>{e.d(b,{A:()=>v});var y=e(10467),f=e(8189),W=e(98877),a=e(89447),j=e(31178),P=e(85211),r=(e(3248),e(35150),e(40707),e(76576)),l=e(86300),c=e(48218);let _=class extends W.A{constructor(d){super(d),this._featureUtils=null,this.effectivePopupTemplate=null}get _arcadeTask(){return this.expressionsUsedInTitle.length>0?this._get("_arcadeTask")||(0,a.UT)(()=>(0,c.lw)()):null}get featureUtilsPromise(){return this._get("featureUtilsPromise")??e.e(3958).then(e.bind(e,93958)).then(d=>this._featureUtils=d)}get calculatedExpressions(){const d=new j.A;if(!this.expressionsUsedInTitle.length)return d;if(!this._arcadeTask?.value){for(const M of this.expressionsUsedInTitle??[])d.push({name:M.name,invalid:!0});return d}for(const M of this.expressionsUsedInTitle)try{const g=this._arcadeTask.value.arcade.parseScript(M.expression,["$layer","$map","$datastore"]);if(g.isAsync){d.push({name:M.name,invalid:!0});break}d.push({name:M.name,syntax:g,invalid:!1,func:this._arcadeTask.value.arcade.compileScript(g,{vars:{$feature:"any"}})})}catch{d.push({name:M.name,invalid:!0});break}return d}get expressionsUsedInTitle(){let d=this.effectivePopupTemplate?.title??"";return"string"!=typeof d?[]:(d=d.toLowerCase(),this.effectivePopupTemplate?.expressionInfos?.filter(M=>d.includes(`{expression/${M.name.toLowerCase()}}`))??[])}get fieldInfoMap(){return this._featureUtils?this._createFieldInfoMap(this._featureUtils.getAllFieldInfos(this.effectivePopupTemplate)):null}get hasBadExpressions(){return this.calculatedExpressions.some(d=>!0===d.invalid)}get requiredFields(){const d=new Set;if(this._arcadeTask?.value&&!this.hasBadExpressions)for(const g of this.calculatedExpressions?.toArray()??[])try{const n=this._arcadeTask.value.arcade.extractFieldLiterals(g.syntax);for(const E of n){const D=E.split("."),p=this.fieldsIndex.get(D.at(-1)??"");p&&d.add(p.name)}}catch{}const M=this._extractFieldNames(this.workingTitle);for(const g of M){const n=this.fieldsIndex.get(g);n&&d.add(n.name)}return d}get titleFromDisplayField(){let d="";return this.displayField&&(d=this.fieldsIndex.get(this.displayField)?.name??""),d||(d=this.fieldsIndex.get(this.objectIdField)?.name??""),d?`{${d}}`:""}get workingTitle(){const d=this.effectivePopupTemplate?this.effectivePopupTemplate.title:"";return""===d||null==d||this.hasBadExpressions||"string"!=typeof d?this.titleFromDisplayField:d}getTitle(d,M,g){var n=this;return(0,y.A)(function*(){try{const{attributes:E}=M,D=g?.timeZone??"system",[{substituteFieldsInLinksAndAttributes:p}]=yield Promise.all([n.featureUtilsPromise,n._arcadeTask?.promise]);if(g.fetchMissingFields&&(M=yield n._checkAndReQueryGraphic(d,M)),n.workingTitle&&n.fieldInfoMap){const s=n._createFormattedAttributes(d,M,D).global;return p({attributes:E,expressionAttributes:null,fieldInfoMap:n.fieldInfoMap,globalAttributes:s,layer:d,text:n.workingTitle})}return""}catch{}return""})()}_checkAndReQueryGraphic(d,M){var g=this;return(0,y.A)(function*(){const n=M.getObjectId();if(null==n)return M;if(!(0,l.Kl)(g.requiredFields,M)){const E=d.createQuery();E.where="1=1",E.outFields=[...g.requiredFields],E.objectIds=[n];const D=yield d.queryFeatures(E);if(1===D?.features.length)return D.features[0]}return M})()}_createFieldInfoMap(d){const M=new Map;if(!d)return M;for(const g of d){if(!g.fieldName)continue;const n=this.fieldsIndex.get(g.fieldName),E=n?.name??g.fieldName;g.fieldName=E,M.set(E.toLowerCase(),g)}return M}_createFormattedAttributes(d,M,g="system"){const n=this.effectivePopupTemplate?.fieldInfos??[],E={};if(!this._featureUtils)return{};if(!this.hasBadExpressions&&this.calculatedExpressions.length>0&&this._arcadeTask?.value){const p=this._arcadeTask.value.Feature.createFromGraphicLikeObject(M.geometry,M.attributes,d,null);for(const s of this.calculatedExpressions)try{E[`expression/${s.name}`]=s.func({vars:{$feature:p}})}catch{}}const D={...M.attributes,...E};return{global:this._featureUtils.formatAttributes({fieldInfos:n,attributes:D,graphic:M,timeZone:g,layer:d,fieldInfoMap:this.fieldInfoMap}),content:[]}}_extractFieldNames(d){return(0,l.nw)(d).filter(M=>!(0===M.indexOf("relationships/")||0===M.indexOf("expression/")))}};(0,f._)([(0,P.MZ)({readOnly:!0})],_.prototype,"_arcadeTask",null),(0,f._)([(0,P.MZ)()],_.prototype,"_featureUtils",void 0),(0,f._)([(0,P.MZ)({readOnly:!0})],_.prototype,"featureUtilsPromise",null),(0,f._)([(0,P.MZ)({readOnly:!0})],_.prototype,"calculatedExpressions",null),(0,f._)([(0,P.MZ)()],_.prototype,"displayField",void 0),(0,f._)([(0,P.MZ)()],_.prototype,"effectivePopupTemplate",void 0),(0,f._)([(0,P.MZ)()],_.prototype,"expressionsUsedInTitle",null),(0,f._)([(0,P.MZ)()],_.prototype,"fieldsIndex",void 0),(0,f._)([(0,P.MZ)()],_.prototype,"fieldInfoMap",null),(0,f._)([(0,P.MZ)()],_.prototype,"fields",void 0),(0,f._)([(0,P.MZ)()],_.prototype,"objectIdField",void 0),(0,f._)([(0,P.MZ)()],_.prototype,"requiredFields",null),_=(0,f._)([(0,r.$)("esri.layers.support.TitleCreator")],_);const v=_},27960:(V,b,e)=>{e.d(b,{Ch:()=>j,mW:()=>W,u2:()=>a});var y=e(69287),f=e(63484);function W(i,h){return{...h,filterMode:i.mode}}function a(i,h){return F(i,h).next().value??null}function j(i,h,_){const v=function P(i){if("manual"===r(i))return null;const h=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:_,maxScale:v}of i.filters)h[0]=Math.max(h[0],l(_)),h[1]=Math.min(h[1],c(v));return h}(i);if(v&&((0,y.gg)(h,v[0])||(0,y.ZH)(_,v[1])))return"";const d=Array.from(F(i,h,_)),M=function z(i,h,_){if(0===i.length)return!0;const v=l(i.at(0)?.minScale),d=c(i.at(-1)?.maxScale);if((0,y.ZH)(v,h)||(0,y.gg)(d,_))return!0;for(let M=0;M<i.length-1;M++){const g=i[M];if((0,y.ZH)(l(i[M+1].minScale),c(g.maxScale)))return!0}return!1}(d,h,_)?"1=1":d.map(g=>g.where||"1=1").reduce((g,n)=>(0,f.IW)(g,n),"");return M&&"1=1"!==M?M:""}function*F(i,h,_){if("manual"===r(i)){const v=i.filters.find(d=>d.id===i.activeFilterId);v&&(yield v)}else{"object"==typeof h&&(h=h.scale);for(const v of i.filters)T(v.minScale,v.maxScale,h,_)&&(yield v)}}function T(i,h,_,v){return i=l(i),_=l(_),h=c(h),!(!(0,y.Sp)(_,i)&&(v??_)>i||(0,y.Hx)(h,_)||void 0!==v&&(0,y.Sp)(v,i))}function r(i){return"mode"in i?i.mode:i.filterMode}function l(i){return i||Number.POSITIVE_INFINITY}function c(i){return i||0}},6829:(V,b,e)=>{e.d(b,{CW:()=>i,Fm:()=>z,Hz:()=>h,JQ:()=>c,JZ:()=>u,ND:()=>v,R_:()=>P,U9:()=>l,fu:()=>f,nr:()=>_,oF:()=>W,rq:()=>T,z$:()=>r});const y=[["binary","application/octet-stream","bin",""]];function f(o,O){return null!=n(O.name,o?.supportedFormats??[])}function W(o,O){if(!o)return!1;const B=T(O,o.supportedFormats??[]);return null!=B&&o.editFormats.includes(B)}function P(o,O){return E(function g(o,O){const B=o.toLowerCase();return d(O).find(S=>D(S)===B)}(o,O))}function F(o,O){return E(n(o,O))}function z(o,O){return D(function M(o,O){return d(O).find(B=>E(B)===o)}(o,O))}function T(o,O){return F(o.name,O)??P(o.type,O)}function r(o,O,B){return P(o,B)??F(O,B)}function l({supportedFormats:o}){return r("model/gltf-binary","glb",o)}function c(o){const O=l(o);return null!=O&&o.editFormats.includes(O)}function i({supportedFormats:o}){return r("model/gltf+json","gltf",o)}function h(o){if(!o)return null;const O=l(o),B=i(o);let S=null;for(const x of o.queryFormats){if(x===O)return x;x===B&&(S=x)}return S}function _({supportedFormats:o}){return r("application/esri3do-SR_world","wld",o)}function v({supportedFormats:o}){return r("application/esri3do-SR_prj","prj",o)}function d(o){return[...y,...o]}function n(o,O){const B=o.toLowerCase();return d(O).find(S=>function p(o){return o?.[2].split(",").map(O=>O.toLowerCase())??[]}(S).some(x=>B.endsWith(x)))}function E(o){return o?.[0]}function D(o){return o?.[1].toLowerCase()}function u(o){return o.tables?.find(O=>"assetMaps"===O.role)}},4858:(V,b,e)=>{e.d(b,{BI:()=>h,D3:()=>c,XJ:()=>i,lc:()=>l,mX:()=>v,rU:()=>_,tH:()=>D});var y=e(1119);const f="__begin__",W="__end__",a=new RegExp(f,"ig"),j=new RegExp(W,"ig"),P=new RegExp("^"+f,"i"),F=new RegExp(W+"$","i"),z='"',T=z+" + ",r=" + "+z;function l(p){return p.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function c(p){return p.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function i(p){const s={expression:"",type:"none"};return p.labelExpressionInfo?p.labelExpressionInfo.value?(s.expression=p.labelExpressionInfo.value,s.type="conventional"):p.labelExpressionInfo.expression&&(s.expression=p.labelExpressionInfo.expression,s.type="arcade"):null!=p.labelExpression&&(s.expression=l(p.labelExpression),s.type="conventional"),s}function h(p){const s=i(p);switch(s.type){case"conventional":return v(s.expression);case"arcade":return s.expression}return null}function _(p){const s=i(p);switch(s.type){case"conventional":return function M(p){return p?.match(d)?.[1].trim()||null}(s.expression);case"arcade":return D(s.expression)}return null}function v(p){let s;return p?(s=(0,y.HC)(p,u=>f+'$feature["'+u+'"]'+W),s=P.test(s)?s.replace(P,""):z+s,s=F.test(s)?s.replace(F,""):s+z,s=s.replaceAll(a,T).replaceAll(j,r)):s='""',s}const d=/^\s*\{([^}]+)\}\s*$/i,g=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,n=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,E=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function D(p){if(!p)return null;let s=g.exec(p)||n.exec(p);return s?s[1]||s[3]:(s=E.exec(p),s?s[2]:null)}},90543:(V,b,e)=>{e.d(b,{S:()=>c,d:()=>p});var y=e(3248),f=e(68438),W=e(6829);function a(s,u,o){return!!P(s,u,o)}function j(s,u,o){return P(s,u,o)}function P(s,u,o){return s&&s.hasOwnProperty(u)?s[u]:o}const F={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function z(s){const u=s?.supportedSpatialAggregationStatistics?.map(o=>o.toLowerCase());return{envelope:!!u?.includes("envelopeaggregate"),centroid:!!u?.includes("centroidaggregate"),convexHull:!!u?.includes("convexhullaggregate")}}function T(s,u){return!!s?.supportedOperationsWithCacheHint?.map(O=>O.toLowerCase())?.includes(u.toLowerCase())}function r(s){const u=s?.supportedStatisticTypes?.map(o=>o.toLowerCase());return{count:!!u?.includes("count"),sum:!!u?.includes("sum"),min:!!u?.includes("min"),max:!!u?.includes("max"),avg:!!u?.includes("avg"),var:!!u?.includes("var"),stddev:!!u?.includes("stddev"),percentileContinuous:!!u?.includes("percentile_continuous"),percentileDiscrete:!!u?.includes("percentile_discrete"),envelope:!!u?.includes("envelopeaggregate"),centroid:!!u?.includes("centroidaggregate"),convexHull:!!u?.includes("convexhullaggregate")}}function l(s){const u=s?.supportedNormalizationTypes?.map(o=>o.toLowerCase());return{field:!!u?.includes("field"),log:!!u?.includes("log"),naturalLog:!!u?.includes("naturallog"),percentOfTotal:!!u?.includes("percentoftotal"),squareRoot:!!u?.includes("squareroot")}}function c(s,u){return{analytics:i(s),attachment:h(s),data:_(s),metadata:v(s),operations:d(s.capabilities,s,u),query:M(s,u),queryAttributeBins:E(s),queryRelated:g(s),queryTopFeatures:n(s),editing:D(s)}}function i(s){return{supportsCacheHint:T(s.advancedQueryCapabilities,"queryAnalytics")}}function h(s){const u=s.attachmentProperties,o={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:T(s.advancedQueryCapabilities,"queryAttachments"),supportsOrderByFields:a(s.advancedQueryCapabilities,"supportsQueryAttachmentOrderByFields",!1),supportsResize:a(s,"supportsAttachmentsResizing",!1)};return u&&Array.isArray(u)&&u.forEach(O=>{const B=F[O.name];B&&(o[B]=!!O.isEnabled)}),o}function _(s){return{isVersioned:a(s,"isDataVersioned",!1),isBranchVersioned:a(s,"isDataBranchVersioned",!1),supportsAttachment:a(s,"hasAttachments",!1),supportsM:a(s,"hasM",!1),supportsZ:a(s,"hasZ",!1)}}function v(s){return{supportsAdvancedFieldProperties:a(s,"supportsFieldDescriptionProperty",!1)}}function d(s,u,o){const O=s?s.toLowerCase().split(",").map(_e=>_e.trim()):[],B=o?(0,f.qg)(o):null,S=O.includes(null!=B&&"MapServer"===B.serverType?"data":"query"),x=O.includes("editing")&&!u.datesInUnknownTimezone;let U=x&&O.includes("create"),K=x&&O.includes("delete"),$=x&&O.includes("update");const J=O.includes("changetracking"),X=u.advancedQueryCapabilities;return x&&!(U||K||$)&&(U=K=$=!0),{supportsCalculate:a(u,"supportsCalculate",!1),supportsTruncate:a(u,"supportsTruncate",!1),supportsValidateSql:a(u,"supportsValidateSql",!1),supportsAdd:U,supportsDelete:K,supportsEditing:x,supportsChangeTracking:J,supportsQuery:S,supportsQueryAnalytics:a(X,"supportsQueryAnalytic",!1),supportsQueryAttachments:a(X,"supportsQueryAttachments",!1),supportsQueryBins:a(X,"supportsQueryBins",!1),supportsQueryTopFeatures:a(X,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:a(u,"supportsAttachmentsResizing",!1),supportsSync:O.includes("sync"),supportsUpdate:$,supportsExceedsLimitStatistics:a(u,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:a(u,"supportsAsyncConvert3D",!1)}}function M(s,u){const o=s.advancedQueryCapabilities,O=s.ownershipBasedAccessControlForFeatures,B=s.archivingInfo,S=s.currentVersion,x=u?.includes("MapServer"),U=!x||S>=(0,y.A)("mapserver-pbf-version-support"),K=(0,f.Wo)(u),$=new Set((s.supportedQueryFormats??"").split(",").map(J=>J.toLowerCase().trim()));return{maxRecordCount:j(s,"maxRecordCount",void 0),maxRecordCountFactor:j(s,"maxRecordCountFactor",void 0),standardMaxRecordCount:j(s,"standardMaxRecordCount",void 0),supportedSpatialAggregationStatistics:z(o),supportsCacheHint:a(o,"supportsQueryWithCacheHint",!1)||T(o,"query"),supportsCentroid:a(o,"supportsReturningGeometryCentroid",!1),supportsCompactGeometry:K,supportsCurrentUser:a(o,"supportsCurrentUserQueries",!1),supportsDefaultSpatialReference:a(o,"supportsDefaultSR",!1),supportsDisjointSpatialRelationship:a(o,"supportsDisjointSpatialRel",!1),supportsDistance:a(o,"supportsQueryWithDistance",!1),supportsDistinct:a(o,"supportsDistinct",s.supportsAdvancedQueries),supportsExtent:a(o,"supportsReturningQueryExtent",!1),supportsFormatPBF:U&&$.has("pbf"),supportsFullTextSearch:a(o,"supportsFullTextSearch",!1),supportsGeometryProperties:a(o,"supportsReturningGeometryProperties",!1),supportsHavingClause:a(o,"supportsHavingClause",!1),supportsHistoricMoment:a(B,"supportsQueryWithHistoricMoment",!1),supportsMaxRecordCountFactor:a(o,"supportsMaxRecordCountFactor",!1),supportsOrderBy:a(o,"supportsOrderBy",s.supportsAdvancedQueries),supportsPagination:a(o,"supportsPagination",!1),supportsPercentileStatistics:a(o,"supportsPercentileStatistics",!1),supportsQuantization:a(s,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:a(s,"supportsQuantizationEditMode",!1),supportsQueryByAnonymous:a(O,"allowAnonymousToQuery",!0),supportsQueryByOthers:a(O,"allowOthersToQuery",!0),supportsQueryGeometry:a(s,"supportsReturningQueryGeometry",!1),supportsResultType:a(o,"supportsQueryWithResultType",!1),supportsReturnMesh:!!(0,W.Hz)(s.infoFor3D),supportsSpatialAggregationStatistics:a(o,"supportsSpatialAggregationStatistics",!1),supportsSqlExpression:a(o,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:a(s,"useStandardizedQueries",!1),supportsStatistics:a(o,"supportsStatistics",s.supportsStatistics),supportsTopFeaturesQuery:a(o,"supportsTopFeaturesQuery",!1),supportsTrueCurve:a(o,"supportsTrueCurve",!1),tileMaxRecordCount:j(s,"tileMaxRecordCount",void 0)}}function g(s){const u=s.advancedQueryCapabilities,o=a(u,"supportsAdvancedQueryRelated",!1);return{supportsPagination:a(u,"supportsQueryRelatedPagination",!1),supportsCount:o,supportsOrderBy:o,supportsCacheHint:T(u,"queryRelated")}}function n(s){return{supportsCacheHint:T(s.advancedQueryCapabilities,"queryTopFilter")}}function E(s){const u=s?s.queryBinsCapabilities:void 0;return{supportsDate:a(u,"supportsDateBin",!1),supportsFixedInterval:a(u,"supportsFixedIntervalBin",!1),supportsAutoInterval:a(u,"supportsAutoIntervalBin",!1),supportsFixedBoundaries:a(u,"supportsFixedBoundariesBin",!1),supportsStackBy:a(u,"supportsStackBy",!1),supportsSplitBy:a(u,"supportsSplitBy",!1),supportsSnapToData:a(u,"supportsSnapToData",!1),supportsReturnFullIntervalBin:a(u,"supportsReturnFullIntervalBin",!1),supportsFirstDayOfWeek:a(u,"supportsFirstDayOfWeek",!1),supportsNormalization:a(u,"supportsNormalization",!1),supportedStatistics:r(u),supportedNormalizationTypes:l(u)}}function D(s){const u=s.ownershipBasedAccessControlForFeatures,o=s?s.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:a(s,"allowGeometryUpdates",!0),supportsGlobalId:a(s,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:a(s,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:a(s,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:a(s,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:a(s,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:a(u,"allowAnonymousToDelete",!0),supportsDeleteByOthers:a(u,"allowOthersToDelete",!0),supportsUpdateByAnonymous:a(u,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:a(u,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:a(o,"supportsAsyncApplyEdits",!1),zDefault:j(s,"zDefault",void 0)}}function p(s){return{operations:{supportsAppend:a(s,"supportsAppend",!1),supportsCoverageQuery:s?.playbackInfo?.klv["0601"]??!1,supportsExportClip:a(s,"supportsExportClip",!1),supportsExportFrameset:a(s,"supportsExportFrameset",!1),supportsMensuration:a(s,"supportsMensuration",!1),supportsUpdate:a(s,"supportsUpdate",!1)}}}},78592:(V,b,e)=>{e.d(b,{O3:()=>T,PU:()=>F,YW:()=>l,ex:()=>j,hv:()=>r,zp:()=>P});var y=e(69287),f=e(67685),W=e(53781),a=e(89141);const j=2.4;function P(c){return(0,f.PN)(c*j)}function F(c){return(0,f.Lz)(c)/j}function z(c,i,h,_){let{color:v,ratio:d}=i,{color:M,ratio:g}=h;g===d&&(1===g?d-=1e-6:g+=1e-6);const n=(0,y.qE)((_-d)/(g-d),0,1);(0,W.l)(c,v.toArray(),M.toArray(),n)}function T(c){const h=new Uint8ClampedArray(2048);if((c=c.filter(({ratio:g})=>g>=0&&g<=1).sort((g,n)=>g.ratio-n.ratio).map(({color:g,ratio:n})=>({color:g,ratio:Math.max(n,.001)}))).length<1)return h;let _=c[0],v=c[0],d=1;const M=(0,a.vt)();for(let g=0;g<512;g++){const n=(g+.5)/512;for(;n>v.ratio&&d<c.length;)_=v,v=c[d++];z(M,_,v,n),h.set(M,4*g)}return h}function r(c,i,h){const _=Math.sqrt(c**2+i**2)/h;return _>1?0:3/(Math.PI*h**2)*(1-_**2)**2}function l(c){return"function"==typeof c?c:c?i=>+i[c]:()=>1}},98789:(V,b,e)=>{e.d(b,{q:()=>f});var y=e(23743);function f(W,a,j){if(!j?.features||!j.hasZ)return;const P=(0,y.N)(j.geometryType,a,W.outSpatialReference);if(null!=P)for(const F of j.features)P(F.geometry)}},93327:(V,b,e)=>{e.d(b,{A:()=>g});var v,y=e(8189),f=e(81098),W=e(49976),a=e(71065),j=e(77806),P=e(85211),T=(e(3248),e(35150),e(17221)),r=e(76576),l=e(50305),c=e(32034),i=e(61320),h=e(6434),_=e(29141);const d=new W.J({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let M=v=class extends a.A{constructor(n){super(n),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(n,E){return this.readFeaturesWithClass(n,E,f.A)}writeGeometryType(n,E,D,p){if(n)return void d.write(n,E,D,p);const{features:s}=this;if(s)for(const u of s)if(null!=u?.geometry)return void d.write(u.geometry.type,E,D,p)}readQueryGeometry(n,E){if(!n)return null;const D=!!n.spatialReference,p=(0,i.rS)(n);return p&&!D&&E.spatialReference&&(p.spatialReference=c.A.fromJSON(E.spatialReference)),p}writeSpatialReference(n,E){if(n)return void(E.spatialReference=n.toJSON());const{features:D}=this;if(D)for(const p of D)if(p&&null!=p.geometry&&p.geometry.spatialReference)return void(E.spatialReference=p.geometry.spatialReference.toJSON())}clone(){return new v(this.cloneProperties())}cloneProperties(){return(0,j.o8)({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(n){const E=this.write();if(E.features&&Array.isArray(n)&&n.length>0)for(let D=0;D<E.features.length;D++){const p=E.features[D];if(p.geometry){const s=n?.[D];p.geometry=s?.toJSON()||p.geometry}}return E}quantize(n){const{scale:[E,D],translate:[p,s]}=n,O=this.features,B=this._getQuantizationFunction(this.geometryType,S=>Math.round((S-p)/E),S=>Math.round((s-S)/D));for(let S=0,x=O.length;S<x;S++)B?.(O[S].geometry)||(O.splice(S,1),S--,x--);return this.transform=n,this}unquantize(){const{geometryType:n,features:E,transform:D}=this;if(!D)return this;const{translate:[p,s],scale:[u,o]}=D;let S=null,x=null;if(this.hasZ&&null!=D?.scale?.[2]){const{translate:[,,K],scale:[,,$]}=D;S=J=>J*$+K}if(this.hasM&&null!=D?.scale?.[3]){const{translate:[,,,K],scale:[,,,$]}=D;x=J=>null==J?J:J*$+K}const U=this._getHydrationFunction(n,K=>K*u+p,K=>s-K*o,S,x);for(const{geometry:K}of E)null!=K&&U&&U(K);return this.transform=null,this}readFeaturesWithClass(n,E,D){const p=c.A.fromJSON(E.spatialReference),s=[];for(let u=0;u<n.length;u++){const o=n[u],O=D.fromJSON(o),B=o.geometry?.spatialReference;null==O.geometry||B||(O.geometry.spatialReference=p);const S=o.aggregateGeometries,x=O.aggregateGeometries;if(S&&null!=x)for(const U in x){const K=x[U],$=S[U],J=$?.spatialReference;null==K||J||(K.spatialReference=p)}s.push(O)}return s}_quantizePoints(n,E,D){let p,s;const u=[];for(let o=0,O=n.length;o<O;o++){const B=n[o];if(o>0){const S=E(B[0]),x=D(B[1]);S===p&&x===s||(u.push([S-p,x-s]),p=S,s=x)}else p=E(B[0]),s=D(B[1]),u.push([p,s])}return u.length>0?u:null}_getQuantizationFunction(n,E,D){return"point"===n?p=>(p.x=E(p.x),p.y=D(p.y),p):"polyline"===n||"polygon"===n?p=>{const s=(0,i.Bi)(p)?p.rings:p.paths,u=[];for(let o=0,O=s.length;o<O;o++){const S=this._quantizePoints(s[o],E,D);S&&u.push(S)}return u.length>0?((0,i.Bi)(p)?p.rings=u:p.paths=u,p):null}:"multipoint"===n?p=>{const s=this._quantizePoints(p.points,E,D);return s&&s.length>0?(p.points=s,p):null}:"extent"===n?p=>p:null}_getHydrationFunction(n,E,D,p,s){return"point"===n?u=>{u.x=E(u.x),u.y=D(u.y),p&&(u.z=p(u.z))}:"polyline"===n||"polygon"===n?u=>{const o=(0,i.Bi)(u)?u.rings:u.paths;let O,B;for(let S=0,x=o.length;S<x;S++){const U=o[S];for(let K=0,$=U.length;K<$;K++){const J=U[K];K>0?(O+=J[0],B+=J[1]):(O=J[0],B=J[1]),J[0]=E(O),J[1]=D(B)}}if(p&&s)for(let S=0,x=o.length;S<x;S++){const U=o[S];for(let K=0,$=U.length;K<$;K++){const J=U[K];J[2]=p(J[2]),J[3]=s(J[3])}}else if(p)for(let S=0,x=o.length;S<x;S++){const U=o[S];for(let K=0,$=U.length;K<$;K++){const J=U[K];J[2]=p(J[2])}}else if(s)for(let S=0,x=o.length;S<x;S++){const U=o[S];for(let K=0,$=U.length;K<$;K++){const J=U[K];J[2]=s(J[2])}}}:"extent"===n?u=>{u.xmin=E(u.xmin),u.ymin=D(u.ymin),u.xmax=E(u.xmax),u.ymax=D(u.ymax),p&&null!=u.zmax&&null!=u.zmin&&(u.zmax=p(u.zmax),u.zmin=p(u.zmin)),s&&null!=u.mmax&&null!=u.mmin&&(u.mmax=s(u.mmax),u.mmin=s(u.mmin))}:"multipoint"===n?u=>{const o=u.points;let O,B;for(let S=0,x=o.length;S<x;S++){const U=o[S];S>0?(O+=U[0],B+=U[1]):(O=U[0],B=U[1]),U[0]=E(O),U[1]=D(B)}if(p&&s)for(let S=0,x=o.length;S<x;S++){const U=o[S];U[2]=p(U[2]),U[3]=s(U[3])}else if(p)for(let S=0,x=o.length;S<x;S++){const U=o[S];U[2]=p(U[2])}else if(s)for(let S=0,x=o.length;S<x;S++){const U=o[S];U[2]=s(U[2])}}:null}};(0,y._)([(0,P.MZ)({type:String,json:{write:!0}})],M.prototype,"displayFieldName",void 0),(0,y._)([(0,P.MZ)({type:Boolean,json:{write:{overridePolicy:n=>({enabled:n})}}})],M.prototype,"exceededTransferLimit",void 0),(0,y._)([(0,P.MZ)({type:[f.A],json:{write:!0}})],M.prototype,"features",void 0),(0,y._)([(0,T.w)("features")],M.prototype,"readFeatures",null),(0,y._)([(0,P.MZ)({type:[_.A],json:{write:!0}})],M.prototype,"fields",void 0),(0,y._)([(0,P.MZ)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:d.read}}})],M.prototype,"geometryType",void 0),(0,y._)([(0,l.K)("geometryType")],M.prototype,"writeGeometryType",null),(0,y._)([(0,P.MZ)({type:Boolean,json:{write:{overridePolicy:n=>({enabled:n})}}})],M.prototype,"hasM",void 0),(0,y._)([(0,P.MZ)({type:Boolean,json:{write:{overridePolicy:n=>({enabled:n})}}})],M.prototype,"hasZ",void 0),(0,y._)([(0,P.MZ)({types:h.yR,json:{write:!0}})],M.prototype,"queryGeometry",void 0),(0,y._)([(0,T.w)("queryGeometry")],M.prototype,"readQueryGeometry",null),(0,y._)([(0,P.MZ)({type:c.A,json:{write:!0}})],M.prototype,"spatialReference",void 0),(0,y._)([(0,l.K)("spatialReference")],M.prototype,"writeSpatialReference",null),(0,y._)([(0,P.MZ)({json:{write:!0}})],M.prototype,"transform",void 0),M=v=(0,y._)([(0,r.$)("esri.rest.support.FeatureSet")],M),M.prototype.toJSON.isDefaultToJSON=!0;const g=M},68470:(V,b,e)=>{e.d(b,{K:()=>c,Q:()=>T});var y=e(8189),f=e(49976),W=e(35150),a=e(85211),F=(e(3248),e(40707),e(15463)),z=e(76576);const T=(0,f.O)()({naturalLog:"natural-log",squareRoot:"square-root",percentOfTotal:"percent-of-total",log:"log",field:"field"}),r="percent-of-total",l="field",c=i=>{let h=class extends i{constructor(){super(...arguments),this.normalizationField=null,this.normalizationMaxValue=null,this.normalizationMinValue=null,this.normalizationTotal=null}get normalizationType(){let _=this._get("normalizationType");const v=!!this.normalizationField,d=null!=this.normalizationTotal;return v||d?(_=v&&l||d&&r||null,v&&d&&W.A.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):_!==l&&_!==r||(_=null),_}set normalizationType(_){this._set("normalizationType",_)}};return(0,y._)([(0,a.MZ)({type:String,json:{name:"parameters.normalizationField",write:!0}})],h.prototype,"normalizationField",void 0),(0,y._)([(0,a.MZ)({type:Number,json:{name:"parameters.normalizationMaxValue",write:!0}})],h.prototype,"normalizationMaxValue",void 0),(0,y._)([(0,a.MZ)({type:Number,json:{name:"parameters.normalizationMinValue",write:!0}})],h.prototype,"normalizationMinValue",void 0),(0,y._)([(0,a.MZ)({type:Number,json:{name:"parameters.normalizationTotal",write:!0}})],h.prototype,"normalizationTotal",void 0),(0,y._)([(0,F.e)(T,{name:"parameters.normalizationType"})],h.prototype,"normalizationType",null),h=(0,y._)([(0,z.$)("esri.rest.support.NormalizationBinParametersMixin")],h),h}},32117:(V,b,e)=>{e.d(b,{$w:()=>d,Bu:()=>x,DW:()=>o,FH:()=>me,FM:()=>z,G9:()=>a,GV:()=>g,Go:()=>r,K3:()=>ee,Kn:()=>s,MM:()=>i,MO:()=>R,Nl:()=>U,Ny:()=>n,O2:()=>K,UE:()=>$,YC:()=>Ce,YF:()=>X,ZO:()=>ye,_1:()=>B,_H:()=>D,_W:()=>M,_d:()=>u,bs:()=>Z,dI:()=>Y,e6:()=>l,gQ:()=>F,iA:()=>fe,jn:()=>_,lW:()=>c,mA:()=>h,n5:()=>J,pM:()=>O,pV:()=>p,pk:()=>I,rB:()=>N,s4:()=>W,xo:()=>S,yH:()=>E,yX:()=>te,zb:()=>_e,zr:()=>v});var y=e(46988);function W(t,m,C,L){return function f(t){return"function"==typeof t}(t)?t(m,C,L):t}function a(t){return[t.r,t.g,t.b,t.a]}const j=" /-,\n";function P(t){let m=t.length;for(;m--;)if(!j.includes(t.charAt(m)))return!1;return!0}function F(t,m){const C=[];let L=0,w=-1;do{if(w=t.indexOf("[",L),w>=L){if(w>L){const A=t.slice(L,w);C.push([A,null,P(A)])}if(L=w+1,w=t.indexOf("]",L),w>=L){if(w>L){const A=m[t.slice(L,w)];A&&C.push([null,A,!1])}L=w+1}}}while(-1!==w);if(L<t.length){const A=t.slice(L);C.push([A,null,P(A)])}return C}function z(t,m,C,L){let w="",A=null;for(const se of m){const[k,ne,ie]=se;if(k)ie?A=k:(A&&(w+=A,A=null),w+=k);else{let le=ne;null!=C&&(le=R(ne,C));const q=t.attributes[le];q&&(A&&(w+=A,A=null),w+=q)}}return function T(t,m){switch("string"!=typeof t&&(t=String(t)),m){case"LowerCase":return t.toLowerCase();case"Allcaps":return t.toUpperCase();default:return t}}(w,L)}function r(t,m,C,L,w,A,se=!0){const k=m/w,ne=C/A,ie=Math.ceil(k/2),le=Math.ceil(ne/2);for(let q=0;q<A;q++)for(let re=0;re<w;re++){const pe=4*(re+(se?A-q-1:q)*w);let oe=0,ce=0,he=0,Me=0,ge=0,Oe=0,Ee=0;const De=(q+.5)*ne;for(let de=Math.floor(q*ne);de<(q+1)*ne;de++){const Se=Math.abs(De-(de+.5))/le,Ie=(re+.5)*k,Ae=Se*Se;for(let Pe=Math.floor(re*k);Pe<(re+1)*k;Pe++){let ae=Math.abs(Ie-(Pe+.5))/ie;const ue=Math.sqrt(Ae+ae*ae);ue>=-1&&ue<=1&&(oe=2*ue*ue*ue-3*ue*ue+1,oe>0&&(ae=4*(Pe+de*m),Ee+=oe*t[ae+3],he+=oe,t[ae+3]<255&&(oe=oe*t[ae+3]/250),Me+=oe*t[ae],ge+=oe*t[ae+1],Oe+=oe*t[ae+2],ce+=oe))}}L[pe]=Me/ce,L[pe+1]=ge/ce,L[pe+2]=Oe/ce,L[pe+3]=Ee/he}}function l(t){return t?[t[0],t[1],t[2],t[3]/255]:[0,0,0,0]}function c(t){return t.data?.symbol??null}function i(t){return"CIMVectorMarker"===t.type||"CIMPictureMarker"===t.type||"CIMBarChartMarker"===t.type||"CIMCharacterMarker"===t.type||"CIMPieChartMarker"===t.type||"CIMStackedBarChartMarker"===t.type}function h(t){return"CIMGradientStroke"===t.type||"CIMPictureStroke"===t.type||"CIMSolidStroke"===t.type}function _(t){return null!=t&&("CIMGradientFill"===t.type||"CIMHatchFill"===t.type||"CIMPictureFill"===t.type||"CIMSolidFill"===t.type||"CIMWaterFill"===t.type)}function v(t){return null!=t&&("CIMMarkerPlacementAlongLineRandomSize"===t.type||"CIMMarkerPlacementAlongLineSameSize"===t.type||"CIMMarkerPlacementAlongLineVariableSize"===t.type||"CIMMarkerPlacementAtExtremities"===t.type||"CIMMarkerPlacementAtMeasuredUnits"===t.type||"CIMMarkerPlacementAtRatioPositions"===t.type||"CIMMarkerPlacementOnLine"===t.type||"CIMMarkerPlacementOnVertices"===t.type)}const d=(t,m=0)=>null==t||isNaN(t)?m:t,M=(t,m)=>t??m,g=(t,m)=>t??m,n=t=>t.tintColor?l(t.tintColor):[255,255,255,1],E=t=>{if(!t)return!1;for(const m of t)switch(m.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function D(){return Promise.all([e.e(3930),e.e(2076),e.e(4108)]).then(e.bind(e,27815))}function p(t){if(!t)return"normal";switch(t.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function s(t){if(!t)return"normal";switch(t.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function u(t){let m="normal",C="normal";if(t){const L=t.toLowerCase();L.includes("italic")?m="italic":L.includes("oblique")&&(m="oblique"),L.includes("bold")?C="bold":L.includes("light")&&(C="lighter")}return{style:m,weight:C}}function o(t){return t.underline?"underline":t.strikethrough?"line-through":"none"}function O(t){if(!t)return null;switch(t.type){case"CIMPolygonSymbol":if(t.symbolLayers)for(const m of t.symbolLayers){const C=O(m);if(null!=C)return C}break;case"CIMTextSymbol":return O(t.symbol);case"CIMSolidFill":return t.color}return null}function B(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const m=t.symbolLayers;if(m)for(const C of m){const L=B(C);if(null!=L)return L}break}case"CIMTextSymbol":return B(t.symbol);case"CIMSolidStroke":return t.color}}function S(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(t.symbolLayers)for(const m of t.symbolLayers){const C=S(m);if(void 0!==C)return C}break;case"CIMTextSymbol":return S(t.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return t.width}}function x(t){switch(t){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function U(t){switch(t){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function K(t){return(t?Object.keys(t):[]).map(m=>({name:m,alias:m,type:"string"==typeof t[m]?"esriFieldTypeString":"esriFieldTypeDouble"}))}const $=t=>t.includes("data:image/svg+xml");function J(t){if(!t)return null;switch(t.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function X(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}function _e(t,m,C,L,w,A,se=!0){const{infos:k}=A;let ne=1,ie=0,le=0,q=0,re=1;for(const{absoluteAnchorPoint:ce,offsetX:he,offsetY:Me,rotation:ge,size:Oe,frameHeight:Ee,rotateClockWise:De,scaleSymbolsProportionally:de}of k)re=ce?1:ne,le=H(he,Me,ie,re,le),q=G(he,Me,ie,re,q),Ee&&(de||se)&&(ne*=Oe/Ee),ie=Q(ge,De,ie);const pe=H(L,w,ie,re,le),oe=G(L,w,ie,re,q);return{size:t*ne,rotation:Q(m,C,ie),offsetX:pe,offsetY:oe}}function ye(t){if(null==t)return!1;if(Array.isArray(t))return t.every(m=>ye(m));switch(typeof t){case"string":return!!t;case"number":return!isNaN(t)}}function fe(t,m){if("color"===m||"outlinecolor"===m||"backgroundcolor"===m||"borderlinecolor"===m||"tintcolor"===m)return[...y.K[m]];const C=y.D[t];if(!C)throw new Error(`InternalError: default value for type ${t}.`);return C[m]}function ee(t){return"string"==typeof t?function ve(t){return t.split(" ").map(m=>Number(m))}(t):t}function me(t){return t?.dashTemplate&&(t.dashTemplate=ee(t.dashTemplate)),t}function Z(t){if(null==t)return"Normal";switch(t.type){case"CIMTextSymbol":return t.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const m=t.symbolLayers;if(!m)return"Normal";for(const C of m)if("CIMVectorMarker"===C.type)return Z(C)}break;case"CIMVectorMarker":{const m=t.markerGraphics;if(!m)return"Normal";for(const C of m)if(C.symbol)return Z(C.symbol)}}return"Normal"}function Ce(t){if(t)switch(t.type){case"CIMTextSymbol":return t.height;case"CIMPointSymbol":{let m=0;if(t.symbolLayers)for(const C of t.symbolLayers)if(C)switch(C.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const L=C.size??y.D.CIMVectorMarker.size;L>m&&(m=L);break}}return m}case"CIMLineSymbol":case"CIMPolygonSymbol":{let m=0;if(t.symbolLayers)for(const C of t.symbolLayers)if(C)switch(C.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const L=C.width;null!=L&&L>m&&(m=L);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(C.markerPlacement&&v(C.markerPlacement)){const L=C.size??y.D.CIMVectorMarker.size;L>m&&(m=L)}break;case"CIMPictureFill":{const L=C.height;null!=L&&L>m&&(m=L)}}return m}}}function R(t,m){if(null!==m){const C=m.get(t);return C?C.name:t}return t}function I(t){return t.map(m=>({...m,propertyName:X(m.propertyName)}))}function N(t){const m={};for(const C in t){const L=t[C];m[X(C)]=L}return m}function G(t,m,C,L,w){const A=C*Math.PI/180;if(A){const se=Math.cos(A);return(Math.sin(A)*t+se*m)*L+w}return m*L+w}function H(t,m,C,L,w){const A=C*Math.PI/180;return A?(Math.cos(A)*t-Math.sin(A)*m)*L+w:t*L+w}function Q(t,m,C){return m?C-t:C+t}function Y(t,m,C){const L="Color"===C||"TintColor"===C||"ToColor"===C,w="Rotation"===C||"Angle"===C||"ToRotation"===C;let A=m[X(C)];if(null!=A&&(L?A=[A[0]/255,A[1]/255,A[2]/255,A[3]/255]:w&&(A*=Math.PI/180)),null==A&&(A=fe(m.type,C.toLowerCase()),null!=A&&(L?A=[A[0]/255,A[1]/255,A[2]/255,A[3]]:w&&(A*=Math.PI/180))),null!=m.primitiveName){const se=t[m.primitiveName];if(null!=se){const k=se[C];null==k||("string"==typeof k||"number"==typeof k||Array.isArray(k)?(A=k,null!=A&&(L?A=[A[0]/255,A[1]/255,A[2]/255,A[3]/255]:w&&(A*=Math.PI/180))):(A={valueExpressionInfo:k,defaultValue:A},null!=A&&(L?A={type:"Process",op:"ArcadeColor",value:A}:w&&(A={type:"Process",op:"Divide",left:A,right:180/Math.PI}))))}}if(null==A)throw new Error(`Failed to derive a value or an expression for "${C}".`);return A}function te(t,m){return Math.max(Math.min((t??m)/100,1),0)}},91644:(V,b,e)=>{e.d(b,{A7:()=>z,Cx:()=>T,Hk:()=>r,JJ:()=>h,SF:()=>l,UK:()=>F,jM:()=>c,x3:()=>i}),e(3248);var f=e(88521),W=e(55417),a=e(46602),j=e(47705),P=e(48254);const F=a.A.fromJSON(P.Cb),z=W.A.fromJSON(P.yM),T=f.A.fromJSON(P.WR),r=j.A.fromJSON(P.JZ);function l(_){if(null==_)return null;switch(_.type){case"mesh":return null;case"point":case"multipoint":return F;case"polyline":return z;case"polygon":case"extent":return T}return null}const c=a.A.fromJSON(P.nC),i=W.A.fromJSON(P.HW),h=f.A.fromJSON(P.b6)},48254:(V,b,e)=>{e.d(b,{Cb:()=>W,HW:()=>z,JR:()=>f,JZ:()=>P,WR:()=>j,b6:()=>T,fT:()=>y,nC:()=>F,yM:()=>a});const y=[252,146,31,255],f=[153,153,153,255],W={type:"esriSMS",style:"esriSMSCircle",size:6,color:y,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},a={type:"esriSLS",style:"esriSLSSolid",width:.75,color:y},j={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},P={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},F={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},z={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},T={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},71655:(V,b,e)=>{var y,f;e.d(b,{X:()=>y}),(f=y||(y={}))[f.SAVE=0]="SAVE",f[f.SAVE_AS=1]="SAVE_AS"}}]);