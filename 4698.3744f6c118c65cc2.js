"use strict";(self.webpackChunkAngularClient=self.webpackChunkAngularClient||[]).push([[4698],{53781:(Se,ie,p)=>{p.d(ie,{a:()=>be,b:()=>w,c:()=>$,d:()=>y,e:()=>j,f:()=>c,g:()=>k,h:()=>_,j:()=>A,l:()=>se,n:()=>f,s:()=>N,t:()=>ue});var t=p(85952);function $(s,h){return s[0]=h[0],s[1]=h[1],s[2]=h[2],s[3]=h[3],s}function N(s,h,M,Z,z){return s[0]=h,s[1]=M,s[2]=Z,s[3]=z,s}function k(s,h,M){return s[0]=h[0]+M[0],s[1]=h[1]+M[1],s[2]=h[2]+M[2],s[3]=h[3]+M[3],s}function F(s,h,M){return s[0]=h[0]-M[0],s[1]=h[1]-M[1],s[2]=h[2]-M[2],s[3]=h[3]-M[3],s}function U(s,h,M){return s[0]=h[0]*M[0],s[1]=h[1]*M[1],s[2]=h[2]*M[2],s[3]=h[3]*M[3],s}function n(s,h,M){return s[0]=h[0]/M[0],s[1]=h[1]/M[1],s[2]=h[2]/M[2],s[3]=h[3]/M[3],s}function w(s,h,M){return s[0]=h[0]*M,s[1]=h[1]*M,s[2]=h[2]*M,s[3]=h[3]*M,s}function ye(s,h){const M=h[0]-s[0],Z=h[1]-s[1],z=h[2]-s[2],W=h[3]-s[3];return Math.sqrt(M*M+Z*Z+z*z+W*W)}function y(s,h){const M=h[0]-s[0],Z=h[1]-s[1],z=h[2]-s[2],W=h[3]-s[3];return M*M+Z*Z+z*z+W*W}function A(s){const h=s[0],M=s[1],Z=s[2],z=s[3];return Math.sqrt(h*h+M*M+Z*Z+z*z)}function c(s){const h=s[0],M=s[1],Z=s[2],z=s[3];return h*h+M*M+Z*Z+z*z}function f(s,h){const M=h[0],Z=h[1],z=h[2],W=h[3];let Y=M*M+Z*Z+z*z+W*W;return Y>0&&(Y=1/Math.sqrt(Y),s[0]=M*Y,s[1]=Z*Y,s[2]=z*Y,s[3]=W*Y),s}function _(s,h){return s[0]*h[0]+s[1]*h[1]+s[2]*h[2]+s[3]*h[3]}function se(s,h,M,Z){const z=h[0],W=h[1],Y=h[2],m=h[3];return s[0]=z+Z*(M[0]-z),s[1]=W+Z*(M[1]-W),s[2]=Y+Z*(M[2]-Y),s[3]=m+Z*(M[3]-m),s}function ue(s,h,M){const Z=h[0],z=h[1],W=h[2],Y=h[3];return s[0]=M[0]*Z+M[4]*z+M[8]*W+M[12]*Y,s[1]=M[1]*Z+M[5]*z+M[9]*W+M[13]*Y,s[2]=M[2]*Z+M[6]*z+M[10]*W+M[14]*Y,s[3]=M[3]*Z+M[7]*z+M[11]*W+M[15]*Y,s}function be(s,h){return s[0]===h[0]&&s[1]===h[1]&&s[2]===h[2]&&s[3]===h[3]}function j(s,h){const M=s[0],Z=s[1],z=s[2],W=s[3],Y=h[0],m=h[1],g=h[2],E=h[3],S=(0,t.FD)();return Math.abs(M-Y)<=S*Math.max(1,Math.abs(M),Math.abs(Y))&&Math.abs(Z-m)<=S*Math.max(1,Math.abs(Z),Math.abs(m))&&Math.abs(z-g)<=S*Math.max(1,Math.abs(z),Math.abs(g))&&Math.abs(W-E)<=S*Math.max(1,Math.abs(W),Math.abs(E))}Object.freeze(Object.defineProperty({__proto__:null,add:k,ceil:function I(s,h){return s[0]=Math.ceil(h[0]),s[1]=Math.ceil(h[1]),s[2]=Math.ceil(h[2]),s[3]=Math.ceil(h[3]),s},copy:$,copyVec3:function O(s,h){return s[0]=h[0],s[1]=h[1],s[2]=h[2],s},dist:ye,distance:ye,div:n,divide:n,dot:_,equals:j,exactEquals:be,floor:function J(s,h){return s[0]=Math.floor(h[0]),s[1]=Math.floor(h[1]),s[2]=Math.floor(h[2]),s[3]=Math.floor(h[3]),s},inverse:function d(s,h){return s[0]=1/h[0],s[1]=1/h[1],s[2]=1/h[2],s[3]=1/h[3],s},len:A,length:A,lerp:se,max:function B(s,h,M){return s[0]=Math.max(h[0],M[0]),s[1]=Math.max(h[1],M[1]),s[2]=Math.max(h[2],M[2]),s[3]=Math.max(h[3],M[3]),s},min:function X(s,h,M){return s[0]=Math.min(h[0],M[0]),s[1]=Math.min(h[1],M[1]),s[2]=Math.min(h[2],M[2]),s[3]=Math.min(h[3],M[3]),s},mul:U,multiply:U,negate:function o(s,h){return s[0]=-h[0],s[1]=-h[1],s[2]=-h[2],s[3]=-h[3],s},normalize:f,random:function ve(s,h=1){const M=t.Ov;let Z,z,W,Y,m,g;do{Z=2*M()-1,z=2*M()-1,m=Z*Z+z*z}while(m>=1);do{W=2*M()-1,Y=2*M()-1,g=W*W+Y*Y}while(g>=1);const E=Math.sqrt((1-m)/g);return s[0]=h*Z,s[1]=h*z,s[2]=h*W*E,s[3]=h*Y*E,s},round:function D(s,h){return s[0]=Math.round(h[0]),s[1]=Math.round(h[1]),s[2]=Math.round(h[2]),s[3]=Math.round(h[3]),s},scale:w,scaleAndAdd:function L(s,h,M,Z){return s[0]=h[0]+M[0]*Z,s[1]=h[1]+M[1]*Z,s[2]=h[2]+M[2]*Z,s[3]=h[3]+M[3]*Z,s},set:N,sqrDist:y,sqrLen:c,squaredDistance:y,squaredLength:c,str:function je(s){return"vec4("+s[0]+", "+s[1]+", "+s[2]+", "+s[3]+")"},sub:F,subtract:F,transformMat4:ue,transformQuat:function me(s,h,M){const Z=h[0],z=h[1],W=h[2],Y=M[0],m=M[1],g=M[2],E=M[3],S=E*Z+m*W-g*z,b=E*z+g*Z-Y*W,R=E*W+Y*z-m*Z,C=-Y*Z-m*z-g*W;return s[0]=S*E+C*-Y+b*-g-R*-m,s[1]=b*E+C*-m+R*-Y-S*-g,s[2]=R*E+C*-g+S*-m-b*-Y,s[3]=h[3],s}},Symbol.toStringTag,{value:"Module"}))},55144:(Se,ie,p)=>{p.d(ie,{T:()=>t,d:()=>ye});const t={Base64:0,Hex:1,String:2,Raw:3},$=8,O=(1<<$)-1;function N(y,A){const c=(65535&y)+(65535&A);return(y>>16)+(A>>16)+(c>>16)<<16|65535&c}function J(y,A,c,o,d,f){return N(function I(y,A){return y<<A|y>>>32-A}(N(N(A,y),N(o,f)),d),c)}function X(y,A,c,o,d,f,_){return J(A&c|~A&o,y,A,d,f,_)}function B(y,A,c,o,d,f,_){return J(A&o|c&~o,y,A,d,f,_)}function D(y,A,c,o,d,f,_){return J(A^c^o,y,A,d,f,_)}function w(y,A,c,o,d,f,_){return J(c^(A|~o),y,A,d,f,_)}function ye(y,A=t.Hex){const c=A||t.Base64,o=function L(y,A){y[A>>5]|=128<<A%32,y[14+(A+64>>>9<<4)]=A;let c=1732584193,o=-271733879,d=-1732584194,f=271733878;for(let _=0;_<y.length;_+=16){const se=c,ve=o,ue=d,me=f;c=X(c,o,d,f,y[_],7,-680876936),f=X(f,c,o,d,y[_+1],12,-389564586),d=X(d,f,c,o,y[_+2],17,606105819),o=X(o,d,f,c,y[_+3],22,-1044525330),c=X(c,o,d,f,y[_+4],7,-176418897),f=X(f,c,o,d,y[_+5],12,1200080426),d=X(d,f,c,o,y[_+6],17,-1473231341),o=X(o,d,f,c,y[_+7],22,-45705983),c=X(c,o,d,f,y[_+8],7,1770035416),f=X(f,c,o,d,y[_+9],12,-1958414417),d=X(d,f,c,o,y[_+10],17,-42063),o=X(o,d,f,c,y[_+11],22,-1990404162),c=X(c,o,d,f,y[_+12],7,1804603682),f=X(f,c,o,d,y[_+13],12,-40341101),d=X(d,f,c,o,y[_+14],17,-1502002290),o=X(o,d,f,c,y[_+15],22,1236535329),c=B(c,o,d,f,y[_+1],5,-165796510),f=B(f,c,o,d,y[_+6],9,-1069501632),d=B(d,f,c,o,y[_+11],14,643717713),o=B(o,d,f,c,y[_],20,-373897302),c=B(c,o,d,f,y[_+5],5,-701558691),f=B(f,c,o,d,y[_+10],9,38016083),d=B(d,f,c,o,y[_+15],14,-660478335),o=B(o,d,f,c,y[_+4],20,-405537848),c=B(c,o,d,f,y[_+9],5,568446438),f=B(f,c,o,d,y[_+14],9,-1019803690),d=B(d,f,c,o,y[_+3],14,-187363961),o=B(o,d,f,c,y[_+8],20,1163531501),c=B(c,o,d,f,y[_+13],5,-1444681467),f=B(f,c,o,d,y[_+2],9,-51403784),d=B(d,f,c,o,y[_+7],14,1735328473),o=B(o,d,f,c,y[_+12],20,-1926607734),c=D(c,o,d,f,y[_+5],4,-378558),f=D(f,c,o,d,y[_+8],11,-2022574463),d=D(d,f,c,o,y[_+11],16,1839030562),o=D(o,d,f,c,y[_+14],23,-35309556),c=D(c,o,d,f,y[_+1],4,-1530992060),f=D(f,c,o,d,y[_+4],11,1272893353),d=D(d,f,c,o,y[_+7],16,-155497632),o=D(o,d,f,c,y[_+10],23,-1094730640),c=D(c,o,d,f,y[_+13],4,681279174),f=D(f,c,o,d,y[_],11,-358537222),d=D(d,f,c,o,y[_+3],16,-722521979),o=D(o,d,f,c,y[_+6],23,76029189),c=D(c,o,d,f,y[_+9],4,-640364487),f=D(f,c,o,d,y[_+12],11,-421815835),d=D(d,f,c,o,y[_+15],16,530742520),o=D(o,d,f,c,y[_+2],23,-995338651),c=w(c,o,d,f,y[_],6,-198630844),f=w(f,c,o,d,y[_+7],10,1126891415),d=w(d,f,c,o,y[_+14],15,-1416354905),o=w(o,d,f,c,y[_+5],21,-57434055),c=w(c,o,d,f,y[_+12],6,1700485571),f=w(f,c,o,d,y[_+3],10,-1894986606),d=w(d,f,c,o,y[_+10],15,-1051523),o=w(o,d,f,c,y[_+1],21,-2054922799),c=w(c,o,d,f,y[_+8],6,1873313359),f=w(f,c,o,d,y[_+15],10,-30611744),d=w(d,f,c,o,y[_+6],15,-1560198380),o=w(o,d,f,c,y[_+13],21,1309151649),c=w(c,o,d,f,y[_+4],6,-145523070),f=w(f,c,o,d,y[_+11],10,-1120210379),d=w(d,f,c,o,y[_+2],15,718787259),o=w(o,d,f,c,y[_+9],21,-343485551),c=N(c,se),o=N(o,ve),d=N(d,ue),f=N(f,me)}return[c,o,d,f]}(function k(y){const A=[];for(let c=0,o=y.length*$;c<o;c+=$)A[c>>5]|=(y.charCodeAt(c/$)&O)<<c%32;return A}(y),y.length*$);switch(c){case t.Raw:return o;case t.Hex:return function U(y){const A="0123456789abcdef",c=[];for(let o=0,d=4*y.length;o<d;o++)c.push(A.charAt(y[o>>2]>>o%4*8+4&15)+A.charAt(y[o>>2]>>o%4*8&15));return c.join("")}(o);case t.String:return function F(y){const A=[];for(let c=0,o=32*y.length;c<o;c+=$)A.push(String.fromCharCode(y[c>>5]>>>c%32&O));return A.join("")}(o);case t.Base64:return function n(y){const o=[];for(let d=0,f=4*y.length;d<f;d+=3){const _=(y[d>>2]>>d%4*8&255)<<16|(y[d+1>>2]>>(d+1)%4*8&255)<<8|y[d+2>>2]>>(d+2)%4*8&255;for(let se=0;se<4;se++)o.push(8*d+6*se>32*y.length?"=":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(_>>6*(3-se)&63))}return o.join("")}(o)}}},32954:(Se,ie,p)=>{function t(){return[1,0,0,0,1,0,0,0,1]}function O(U,n,I,J,X,B,D,w,L){return[U,n,I,J,X,B,D,w,L]}p.d(ie,{fA:()=>O,vt:()=>t,zK:()=>k});const k=[1,0,0,0,1,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:k,clone:function $(U){return[U[0],U[1],U[2],U[3],U[4],U[5],U[6],U[7],U[8]]},create:t,createView:function N(U,n){return new Float64Array(U,n,9)},fromValues:O},Symbol.toStringTag,{value:"Module"}))},14214:(Se,ie,p)=>{function t(){return[0,0,0,1]}function $(F){return[F[0],F[1],F[2],F[3]]}p.d(ie,{o8:()=>$,vt:()=>t,zK:()=>N});const N=[0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:N,clone:$,create:t,fromValues:function O(F,U,n,I){return[F,U,n,I]}},Symbol.toStringTag,{value:"Module"}))},19890:(Se,ie,p)=>{p.d(ie,{A6:()=>o,B8:()=>y,Xd:()=>I,Xr:()=>A,Yc:()=>de,hZ:()=>_,lw:()=>J,t2:()=>le,x8:()=>n});var t=p(32954),$=p(14214),O=p(25866),N=p(85952),k=p(28714),F=p(53781);function n(m,g,E){E*=.5;const S=Math.sin(E);return m[0]=S*g[0],m[1]=S*g[1],m[2]=S*g[2],m[3]=Math.cos(E),m}function I(m,g){const E=2*Math.acos(g[3]),S=Math.sin(E/2);return S>(0,N.FD)()?(m[0]=g[0]/S,m[1]=g[1]/S,m[2]=g[2]/S):(m[0]=1,m[1]=0,m[2]=0),E}function J(m,g,E){const S=g[0],b=g[1],R=g[2],C=g[3],Q=E[0],K=E[1],he=E[2],oe=E[3];return m[0]=S*oe+C*Q+b*he-R*K,m[1]=b*oe+C*K+R*Q-S*he,m[2]=R*oe+C*he+S*K-b*Q,m[3]=C*oe-S*Q-b*K-R*he,m}function L(m,g,E,S){const b=g[0],R=g[1],C=g[2],Q=g[3];let K,he,oe,Ze,xe,Ae=E[0],_e=E[1],Fe=E[2],De=E[3];return he=b*Ae+R*_e+C*Fe+Q*De,he<0&&(he=-he,Ae=-Ae,_e=-_e,Fe=-Fe,De=-De),1-he>(0,N.FD)()?(K=Math.acos(he),oe=Math.sin(K),Ze=Math.sin((1-S)*K)/oe,xe=Math.sin(S*K)/oe):(Ze=1-S,xe=S),m[0]=Ze*b+xe*Ae,m[1]=Ze*R+xe*_e,m[2]=Ze*C+xe*Fe,m[3]=Ze*Q+xe*De,m}function y(m,g){const E=g[0],S=g[1],b=g[2],R=g[3],C=E*E+S*S+b*b+R*R,Q=C?1/C:0;return m[0]=-E*Q,m[1]=-S*Q,m[2]=-b*Q,m[3]=R*Q,m}function A(m,g){return m[0]=-g[0],m[1]=-g[1],m[2]=-g[2],m[3]=g[3],m}function c(m,g){const E=g[0]+g[4]+g[8];let S;if(E>0)S=Math.sqrt(E+1),m[3]=.5*S,S=.5/S,m[0]=(g[5]-g[7])*S,m[1]=(g[6]-g[2])*S,m[2]=(g[1]-g[3])*S;else{let b=0;g[4]>g[0]&&(b=1),g[8]>g[3*b+b]&&(b=2);const R=(b+1)%3,C=(b+2)%3;S=Math.sqrt(g[3*b+b]-g[3*R+R]-g[3*C+C]+1),m[b]=.5*S,S=.5/S,m[3]=(g[3*R+C]-g[3*C+R])*S,m[R]=(g[3*R+b]+g[3*b+R])*S,m[C]=(g[3*C+b]+g[3*b+C])*S}return m}function o(m,g,E,S){const b=.5*Math.PI/180;g*=b,E*=b,S*=b;const R=Math.sin(g),C=Math.cos(g),Q=Math.sin(E),K=Math.cos(E),he=Math.sin(S),oe=Math.cos(S);return m[0]=R*K*oe-C*Q*he,m[1]=C*Q*oe+R*K*he,m[2]=C*K*he-R*Q*oe,m[3]=C*K*oe+R*Q*he,m}const f=F.c,_=F.s,se=F.g,ve=J,ue=F.b,me=F.h,je=F.l,be=F.j,j=be,P=F.f,V=P,re=F.n,le=F.a,pe=F.e;function de(m,g,E){const S=(0,k.f)(g,E);return S<-.999999?((0,k.e)(q,Te,g),(0,k.H)(q)<1e-6&&(0,k.e)(q,s,g),(0,k.n)(q,q),n(m,q,Math.PI),m):S>.999999?(m[0]=0,m[1]=0,m[2]=0,m[3]=1,m):((0,k.e)(q,g,E),m[0]=q[0],m[1]=q[1],m[2]=q[2],m[3]=1+S,re(m,m))}const q=(0,O.vt)(),Te=(0,O.fA)(1,0,0),s=(0,O.fA)(0,1,0),M=(0,$.vt)(),Z=(0,$.vt)(),W=(0,t.vt)();Object.freeze(Object.defineProperty({__proto__:null,add:se,calculateW:function w(m,g){const E=g[0],S=g[1],b=g[2];return m[0]=E,m[1]=S,m[2]=b,m[3]=Math.sqrt(Math.abs(1-E*E-S*S-b*b)),m},conjugate:A,copy:f,dot:me,equals:pe,exactEquals:le,fromEuler:o,fromMat3:c,getAxisAngle:I,identity:function U(m){return m[0]=0,m[1]=0,m[2]=0,m[3]=1,m},invert:y,len:j,length:be,lerp:je,mul:ve,multiply:J,normalize:re,random:function ye(m){const g=N.Ov,E=g(),S=g(),b=g(),R=Math.sqrt(1-E),C=Math.sqrt(E);return m[0]=R*Math.sin(2*Math.PI*S),m[1]=R*Math.cos(2*Math.PI*S),m[2]=C*Math.sin(2*Math.PI*b),m[3]=C*Math.cos(2*Math.PI*b),m},rotateX:function X(m,g,E){E*=.5;const S=g[0],b=g[1],R=g[2],C=g[3],Q=Math.sin(E),K=Math.cos(E);return m[0]=S*K+C*Q,m[1]=b*K+R*Q,m[2]=R*K-b*Q,m[3]=C*K-S*Q,m},rotateY:function B(m,g,E){E*=.5;const S=g[0],b=g[1],R=g[2],C=g[3],Q=Math.sin(E),K=Math.cos(E);return m[0]=S*K-R*Q,m[1]=b*K+C*Q,m[2]=R*K+S*Q,m[3]=C*K-b*Q,m},rotateZ:function D(m,g,E){E*=.5;const S=g[0],b=g[1],R=g[2],C=g[3],Q=Math.sin(E),K=Math.cos(E);return m[0]=S*K+b*Q,m[1]=b*K-S*Q,m[2]=R*K+C*Q,m[3]=C*K-R*Q,m},rotationTo:de,scale:ue,set:_,setAxes:function z(m,g,E,S){const b=W;return b[0]=E[0],b[3]=E[1],b[6]=E[2],b[1]=S[0],b[4]=S[1],b[7]=S[2],b[2]=-g[0],b[5]=-g[1],b[8]=-g[2],re(m,c(m,b))},setAxisAngle:n,slerp:L,sqlerp:function h(m,g,E,S,b,R){return L(M,g,b,R),L(Z,E,S,R),L(m,M,Z,2*R*(1-R)),m},sqrLen:V,squaredLength:P,str:function d(m){return"quat("+m[0]+", "+m[1]+", "+m[2]+", "+m[3]+")"}},Symbol.toStringTag,{value:"Module"}))},18203:(Se,ie,p)=>{p.r(ie),p.d(ie,{default:()=>It});var t=p(8189),$=p(92165),O=p(31178),N=p(5922),k=p(35150),F=p(39693),U=p(56492),n=p(85211),I=p(55739),B=(p(3248),p(40707),p(17221)),D=p(76576),w=p(28714),L=p(25866),ye=p(28067),y=p(95478),A=p(94376),c=p(25936),o=p(23e3),d=p(17049),f=p(85551),_=p(33036),se=p(46406),ve=p(68438),ue=p(22329),me=p(29141),je=p(73258),be=p(38488),j=p(90660),P=p(73596),V=p(71065),re=p(25968),le=p(19890),pe=p(14214),de=p(85952);const q=(0,L.vt)(),Te=(0,pe.vt)(),s=(0,pe.vt)(),h=(0,pe.vt)(),M=(0,L.fA)(0,0,1),Z=(0,L.fA)(0,1,0),z=(0,L.fA)(1,0,0);function W(i){(0,w.c)(q,i),(0,w.n)(q,q);const u=Math.atan2(q[1],q[0]),v=(0,le.x8)((0,pe.vt)(),M,-u);(0,w.w)(q,q,v);const x=-1*Math.atan2(q[2],q[0]);return[(0,de.ct)(u)+270,(0,de.ct)(x)+90]}function Y(i,u){return(0,le.x8)(s,M,(0,de.DF)(i-270)),(0,le.x8)(h,Z,(0,de.DF)(u-90)),(0,le.lw)(Te,s,h),(0,w.c)(q,z),(0,w.w)(q,q,Te),(0,w.n)(q,q),[q[0],q[1],q[2]]}var m=p(48669);let g=class extends(j.A.ClonableMixin(V.A)){constructor(i){super(i),this.enabled=!0,this.label="",this.normal=null,this.point=null}get orientation(){if(!Array.isArray(this.normal)||3!==this.normal.length)return 0;const[i,u]=W(this.normal);return P.ie.normalize((0,I.GB)(i),0,!0)}set orientation(i){const u=Y(i,this.tilt);this._set("normal",u),this._set("orientation",i)}get tilt(){if(!Array.isArray(this.normal)||3!==this.normal.length)return 0;const[i,u]=W(this.normal);return P.ie.normalize((0,I.GB)(u),0,!0)}set tilt(i){const u=Y(this.orientation,i);this._set("normal",u),this._set("tilt",i)}};(0,t._)([(0,n.MZ)({type:Boolean,json:{write:!0}})],g.prototype,"enabled",void 0),(0,t._)([(0,n.MZ)({type:String,json:{write:!0}})],g.prototype,"label",void 0),(0,t._)([(0,n.MZ)({type:Number,json:{read:!1},clonable:!1,range:{min:0,max:360}}),(0,m.w)(i=>P.ie.normalize((0,I.GB)(i),0,!0))],g.prototype,"orientation",null),(0,t._)([(0,n.MZ)({type:Number,json:{read:!1},clonable:!1,range:{min:0,max:360}}),(0,m.w)(i=>P.ie.normalize((0,I.GB)(i),0,!0))],g.prototype,"tilt",null),(0,t._)([(0,n.MZ)({type:[Number],json:{write:{isRequired:!0}}})],g.prototype,"normal",void 0),(0,t._)([(0,n.MZ)({type:[Number],json:{write:{isRequired:!0}}})],g.prototype,"point",void 0),g=(0,t._)([(0,D.$)("esri.layers.voxel.VoxelSlice")],g);const E=g;var S=p(88135);let b=class extends(j.A.ClonableMixin(V.A)){constructor(){super(...arguments),this.enabled=!0,this.href=null,this.id=null,this.label="",this.normal=null,this.point=null,this.sizeInPixel=null,this.slices=null,this.timeId=0,this.variableId=null}get orientation(){if(!Array.isArray(this.normal)||3!==this.normal.length)return 0;const[i,u]=W(this.normal);return P.ie.normalize((0,I.GB)(i),0,!0)}get tilt(){if(!Array.isArray(this.normal)||3!==this.normal.length)return 0;const[i,u]=W(this.normal);return P.ie.normalize((0,I.GB)(u),0,!0)}};(0,t._)([(0,n.MZ)({type:Boolean,json:{default:!0,write:!0}})],b.prototype,"enabled",void 0),(0,t._)([(0,n.MZ)({type:String,json:{origins:{service:{read:S.r},"web-scene":{write:{isRequired:!0}}},write:!0}}),(0,re.P)({origins:["web-scene"],type:"resource",prefix:"sections",compress:!0})],b.prototype,"href",void 0),(0,t._)([(0,n.MZ)({type:I.jz,json:{write:{enabled:!0,isRequired:!0}}})],b.prototype,"id",void 0),(0,t._)([(0,n.MZ)({type:String,json:{write:!0}})],b.prototype,"label",void 0),(0,t._)([(0,n.MZ)({type:Number,clonable:!1,readOnly:!0,range:{min:0,max:360}})],b.prototype,"orientation",null),(0,t._)([(0,n.MZ)({type:Number,clonable:!1,readOnly:!0,range:{min:0,max:360}})],b.prototype,"tilt",null),(0,t._)([(0,n.MZ)({type:[Number],json:{write:{enabled:!0,isRequired:!0}}})],b.prototype,"normal",void 0),(0,t._)([(0,n.MZ)({type:[Number],json:{write:{enabled:!0,isRequired:!0}}})],b.prototype,"point",void 0),(0,t._)([(0,n.MZ)({type:[I.jz],json:{write:{enabled:!0,isRequired:!0}}})],b.prototype,"sizeInPixel",void 0),(0,t._)([(0,n.MZ)({type:[E],json:{write:!0}})],b.prototype,"slices",void 0),(0,t._)([(0,n.MZ)({type:I.jz,json:{default:0,write:!0}})],b.prototype,"timeId",void 0),(0,t._)([(0,n.MZ)({type:I.jz,json:{write:{enabled:!0,isRequired:!0}}})],b.prototype,"variableId",void 0),b=(0,t._)([(0,D.$)("esri.layers.voxel.VoxelSection")],b);const R=b;let C=class extends V.A{constructor(){super(...arguments),this.diffuseFactor=.5,this.specularFactor=.5}};(0,t._)([(0,n.MZ)({type:Number,range:{min:0,max:1},json:{default:.5,write:!0}})],C.prototype,"diffuseFactor",void 0),(0,t._)([(0,n.MZ)({type:Number,range:{min:0,max:1},json:{default:.5,write:!0}})],C.prototype,"specularFactor",void 0),C=(0,t._)([(0,D.$)("esri.layers.voxel.VoxelSimpleShading")],C);const Q=C;let K=class extends V.A{constructor(){super(...arguments),this.continuity=null,this.hasNoData=!1,this.noData=0,this.offset=0,this.scale=1,this.type=null}};(0,t._)([(0,n.MZ)({type:["discrete","continuous"],json:{write:!0}})],K.prototype,"continuity",void 0),(0,t._)([(0,n.MZ)({type:Boolean,json:{write:!0}})],K.prototype,"hasNoData",void 0),(0,t._)([(0,n.MZ)({type:Number,json:{write:!0}})],K.prototype,"noData",void 0),(0,t._)([(0,n.MZ)({type:Number,json:{write:!0}})],K.prototype,"offset",void 0),(0,t._)([(0,n.MZ)({type:Number,json:{write:!0}})],K.prototype,"scale",void 0),(0,t._)([(0,n.MZ)({type:String,json:{write:{enabled:!0,isRequired:!0}}})],K.prototype,"type",void 0),K=(0,t._)([(0,D.$)("esri.layers.voxel.VoxelFormat")],K);const he=K;let oe=class extends V.A{constructor(){super(...arguments),this.id=null,this.description="",this.name=null,this.originalFormat=null,this.renderingFormat=null,this.unit="",this.volumeId=0,this.type=null}};(0,t._)([(0,n.MZ)({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],oe.prototype,"id",void 0),(0,t._)([(0,n.MZ)({type:String,json:{write:!0}})],oe.prototype,"description",void 0),(0,t._)([(0,n.MZ)({type:String,json:{write:{enabled:!0,isRequired:!0}}})],oe.prototype,"name",void 0),(0,t._)([(0,n.MZ)({type:he,json:{write:!0}})],oe.prototype,"originalFormat",void 0),(0,t._)([(0,n.MZ)({type:he,json:{write:{enabled:!0,isRequired:!0}}})],oe.prototype,"renderingFormat",void 0),(0,t._)([(0,n.MZ)({type:String,json:{write:!0}})],oe.prototype,"unit",void 0),(0,t._)([(0,n.MZ)({type:Number,json:{write:!0}})],oe.prototype,"volumeId",void 0),(0,t._)([(0,n.MZ)({type:["stc-hot-spot-results","stc-cluster-outlier-results","stc-estimated-bin","generic-nearest-interpolated"],json:{write:!0}})],oe.prototype,"type",void 0),oe=(0,t._)([(0,D.$)("esri.layers.voxel.VoxelVariable")],oe);const Ze=oe;var xe=p(77806),Ae=p(68677);let _e=class extends(j.A.ClonableMixin(V.A)){constructor(){super(...arguments),this.color=Ae.A.fromArray([0,0,0,0]),this.value=0,this.enabled=!0,this.label="",this.colorLocked=!1}};(0,t._)([(0,n.MZ)({type:Ae.A,json:{type:[I.jz],write:{enabled:!0,isRequired:!0}}})],_e.prototype,"color",void 0),(0,t._)([(0,n.MZ)({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],_e.prototype,"value",void 0),(0,t._)([(0,n.MZ)({type:Boolean,json:{default:!0,write:!0}})],_e.prototype,"enabled",void 0),(0,t._)([(0,n.MZ)({type:String,json:{write:!0}})],_e.prototype,"label",void 0),(0,t._)([(0,n.MZ)({type:Boolean,json:{default:!1,write:!0}})],_e.prototype,"colorLocked",void 0),_e=(0,t._)([(0,D.$)("esri.layers.voxel.VoxelIsosurface")],_e);const Fe=_e;var De=p(5605),Re=p(69287);let Ke=class extends(j.A.ClonableMixin(V.A)){constructor(){super(...arguments),this.color=null,this.position=0}};(0,t._)([(0,n.MZ)({type:Ae.A,json:{type:[I.jz],write:{enabled:!0,isRequired:!0}}})],Ke.prototype,"color",void 0),(0,t._)([(0,n.MZ)({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],Ke.prototype,"position",void 0),Ke=(0,t._)([(0,D.$)("esri.layers.voxel.VoxelColorStop")],Ke);const ot=Ke;let $e=class extends(j.A.ClonableMixin(V.A)){constructor(){super(...arguments),this.opacity=1,this.position=0}};(0,t._)([(0,n.MZ)({type:Number,json:{name:"alpha",write:{enabled:!0,isRequired:!0}}})],$e.prototype,"opacity",void 0),(0,t._)([(0,n.MZ)({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],$e.prototype,"position",void 0),$e=(0,t._)([(0,D.$)("esri.layers.voxel.VoxelOpacityStop")],$e);const st=$e;let Je=class extends(j.A.ClonableMixin(V.A)){constructor(){super(...arguments),this.enabled=!1,this.range=null}};(0,t._)([(0,n.MZ)({type:Boolean,json:{default:!1,write:!0}})],Je.prototype,"enabled",void 0),(0,t._)([(0,n.MZ)({type:[Number],json:{write:{isRequired:!0}}})],Je.prototype,"range",void 0),Je=(0,t._)([(0,D.$)("esri.layers.voxel.VoxelRangeFilter")],Je);const Mt=Je;var Ee,i;(i=Ee||(Ee={}))[i.Color=1]="Color",i[i.Alpha=2]="Alpha",i[i.Both=3]="Both";let Ie=class extends(j.A.ClonableMixin(V.A)){constructor(i){super(i),this.interpolation=null,this.stretchRange=null,this.rangeFilter=null,this._colorMapSize=256,this.colorStops=new(O.A.ofType(ot)),this.opacityStops=new(O.A.ofType(st))}set colorStops(i){this._set("colorStops",(0,De.V)(i,this._get("colorStops"),O.A.ofType(ot)))}set opacityStops(i){this._set("opacityStops",(0,De.V)(i,this._get("opacityStops"),O.A.ofType(st)))}getPreviousNext(i,u,v){let x=i;for(;--x>0&&u[x].type!==v&&u[x].type!==Ee.Both;);let T=i;const H=u.length;for(;++T<H&&u[T].type!==v&&u[T].type!==Ee.Both;);return[x,T]}get rasterizedTransferFunction(){const i=[];if(this.colorStops.length<2)return i;const u=[],v=[];for(const ee of this.colorStops){if(!ee.color)return i;v.push({color:{r:ee.color.r,g:ee.color.g,b:ee.color.b,a:Math.round(255*(1-ee.color.a))},position:ee.position,type:Ee.Color})}if(0===this.opacityStops.length)for(const ee of v)u.push({color:ee.color,position:ee.position});else{for(const te of this.opacityStops){const ne=(0,Re.qE)(te.position,0,1),ce=Math.round(255*(0,Re.qE)(1-te.opacity,0,1));let fe=!1;for(const ae of v)if(ae.type===Ee.Color&&Math.abs(ae.position-ne)<1e-5){ae.color.a=ce,ae.type=Ee.Both,fe=!0;break}fe||v.push({color:{r:0,g:0,b:0,a:ce},position:te.position,type:Ee.Alpha})}v.sort((te,ne)=>te.position<ne.position?-1:1);const ee=v.length;for(let te=0;te<ee;++te){const ne=v[te];if(ne.type!==Ee.Both)if(ne.type===Ee.Color){const[ce,fe]=this.getPreviousNext(te,v,Ee.Alpha);ne.color.a=-1!==ce&&fe!==ee?Math.round((0,Re.Cc)(v[ce].color.a,v[fe].color.a,(ne.position-v[ce].position)/(v[fe].position-v[ce].position))):-1!==ce?v[ce].color.a:v[fe].color.a}else{const[ce,fe]=this.getPreviousNext(te,v,Ee.Color);if(-1!==ce&&fe!==ee){const ae=(ne.position-v[ce].position)/(v[fe].position-v[ce].position),Le=v[ce].color,ke=v[fe].color;Qe.forEach(Ce=>{ne.color[Ce]=Math.round((0,Re.Cc)(Le[Ce],ke[Ce],ae))})}else Qe.forEach(-1!==ce?ae=>{ne.color[ae]=v[ce].color[ae]}:ae=>{ne.color[ae]=v[fe].color[ae]})}}for(const te of v)u.push({color:te.color,position:te.position})}u[0].position=0,u[u.length-1].position=1;let T=0,H=1;for(let ee=0;ee<this._colorMapSize;++ee){const te=ee/this._colorMapSize;for(;te>u[H].position;)T=H++;const ne=(te-u[T].position)/(u[H].position-u[T].position),ce=u[T].color,fe=u[H].color,ae=new Ae.A;Qe.forEach(Le=>{ae[Le]=Math.round((0,Re.Cc)(ce[Le],fe[Le],ne))}),ae.a=(0,Re.qE)(1-(0,Re.Cc)(ce.a,fe.a,ne)/255,0,1),i.push(ae)}return i}getColorForContinuousDataValue(i,u){const v=this.rasterizedTransferFunction;if(this.colorStops.length<2||!Array.isArray(this.stretchRange)||this.stretchRange.length<2||v.length<256)return null;let x=this.stretchRange[0],T=this.stretchRange[1];if(x>T){const ee=x;x=T,T=ee}i=(0,Re.qE)(i,x,T);const H=v[Math.round((i-x)/(T-x)*(this._colorMapSize-1))].clone();return u||(H.a=1),H}};(0,t._)([(0,n.MZ)({type:["linear","nearest"],json:{write:!0}})],Ie.prototype,"interpolation",void 0),(0,t._)([(0,n.MZ)({type:[Number],json:{write:{enabled:!0,isRequired:!0}}})],Ie.prototype,"stretchRange",void 0),(0,t._)([(0,n.MZ)({type:O.A.ofType(ot),json:{write:{enabled:!0,overridePolicy(){return{enabled:!!this.colorStops&&this.colorStops.length>0}}}}})],Ie.prototype,"colorStops",null),(0,t._)([(0,n.MZ)({type:O.A.ofType(st),json:{read:{source:"alphaStops"},write:{enabled:!0,target:"alphaStops",overridePolicy(){return{enabled:!!this.opacityStops&&this.opacityStops.length>0}}}}})],Ie.prototype,"opacityStops",null),(0,t._)([(0,n.MZ)({type:Mt,json:{write:!0}})],Ie.prototype,"rangeFilter",void 0),(0,t._)([(0,n.MZ)({type:[Ae.A],clonable:!1,json:{read:!1}})],Ie.prototype,"rasterizedTransferFunction",null),Ie=(0,t._)([(0,D.$)("esri.layers.voxel.VoxelTransferFunctionStyle")],Ie);const St=Ie,Qe=["r","g","b"];let Ne=class extends(j.A.ClonableMixin(V.A)){constructor(){super(...arguments),this.color=Ae.A.fromArray([0,0,0,0]),this.value=0,this.enabled=!0,this.label=""}};(0,t._)([(0,n.MZ)({type:Ae.A,json:{type:[I.jz],write:{enabled:!0,isRequired:!0}}})],Ne.prototype,"color",void 0),(0,t._)([(0,n.MZ)({type:I.jz,json:{write:{enabled:!0,isRequired:!0}}})],Ne.prototype,"value",void 0),(0,t._)([(0,n.MZ)({type:Boolean,json:{default:!0,write:!0}})],Ne.prototype,"enabled",void 0),(0,t._)([(0,n.MZ)({type:String,json:{write:!0}})],Ne.prototype,"label",void 0),Ne=(0,t._)([(0,D.$)("esri.layers.voxel.VoxelUniqueValue")],Ne);const dt=Ne;var rt;let we=rt=class extends V.A{constructor(i){super(i),this.variableId=0,this.label="",this.transferFunction=null,this.uniqueValues=null,this.isosurfaces=null,this.uniqueValues=new(O.A.ofType(dt)),this.isosurfaces=new(O.A.ofType(Fe))}clone(){return new rt({variableId:this.variableId,label:this.label,transferFunction:(0,xe.o8)(this.transferFunction),uniqueValues:(0,xe.o8)(this.uniqueValues),isosurfaces:(0,xe.o8)(this.isosurfaces)})}};(0,t._)([(0,n.MZ)({type:I.jz,json:{write:{enabled:!0,isRequired:!0}}})],we.prototype,"variableId",void 0),(0,t._)([(0,n.MZ)({type:String,json:{write:!0}})],we.prototype,"label",void 0),(0,t._)([(0,n.MZ)({type:St,json:{write:{enabled:!0,overridePolicy(){return{enabled:!this.uniqueValues||this.uniqueValues.length<1}}}}})],we.prototype,"transferFunction",void 0),(0,t._)([(0,n.MZ)({type:O.A.ofType(dt),json:{write:{enabled:!0,overridePolicy(){return{enabled:!!this.uniqueValues&&this.uniqueValues.length>0}}}}})],we.prototype,"uniqueValues",void 0),(0,t._)([(0,n.MZ)({type:O.A.ofType(Fe),json:{write:{enabled:!0,overridePolicy(){return{enabled:(!this.uniqueValues||this.uniqueValues.length<1)&&!!this.isosurfaces&&this.isosurfaces.length>0}}}}})],we.prototype,"isosurfaces",void 0),we=rt=(0,t._)([(0,D.$)("esri.layers.voxel.VoxelVariableStyle")],we);const ht=we;var mt=p(97442),nt=p(1749),yt=p(32034),bt=p(58701);function ft(i){const u=/^(days?|hours?|minutes?|seconds?|d|h|m|s) since (\d{1,4})-(\d{1,2})-(\d{1,2})[ |T](\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[\s|Z]?(([+|\-|\s?])(\d{1,2}):(\d{1,2}))?$/i.exec(i);if(null==u)return{didParse:!1};const[,v,x,T,H,ee,te,ne,ce,fe,ae,Le,ke]=u;let Ce="seconds";const ct=v.charAt(0).toLowerCase();"d"===ct?Ce="days":"h"===ct?Ce="hours":"m"===ct&&(Ce="minutes");const He=parseInt(x,10);if(Number.isNaN(He))return{didParse:!1};const Ve=parseInt(T,10);if(Number.isNaN(Ve)||Ve<1||Ve>12)return{didParse:!1};const ze=parseInt(H,10);if(Number.isNaN(ze)||ze<1||ze>31)return{didParse:!1};if(2===Ve){const Ye=He%4==0&&(He%100!=0||He%400==0);if(Ye&&ze>29||!Ye&&ze>28)return{didParse:!1}}else if((4===Ve||6===Ve||9===Ve||11===Ve)&&ze>30)return{didParse:!1};const et=parseInt(ee,10);if(Number.isNaN(et)||et<0||et>23)return{didParse:!1};const tt=parseInt(te,10);if(Number.isNaN(tt)||tt<0||tt>59)return{didParse:!1};const it=parseInt(ne,10);if(Number.isNaN(it)||it<0||it>59)return{didParse:!1};let pt=1,Ue=0,We=0;if(ae&&(pt="-"===ae?-1:1),Le){if(Ue=parseInt(Le,10),Number.isNaN(Ue)||Ue<0)return{didParse:!1};if(0!==Ue){const Ye=pt*Ue;if(Ye<-12||Ye>14)return{didParse:!1}}}if(ke&&(We=parseInt(ke,10),Number.isNaN(We)||We<0||We>59))return{didParse:!1};const Pt=`${He}`.padStart(4,"0"),Ot=`${Ve}`.padStart(2,"0"),Vt=`${ze}`.padStart(2,"0"),Zt=`${et}`.padStart(2,"0"),Rt=`${tt}`.padStart(2,"0"),wt=`${it}`.padStart(2,"0");let Xe="Z";return 0===Ue&&0===We||(Xe=pt>0?"+":"-",Xe+=`${Ue}`.padStart(2,"0"),Xe+=":",Xe+=`${We}`.padStart(2,"0")),{didParse:!0,unit:Ce,reference:new Date(`${Pt}-${Ot}-${Vt}T${Zt}:${Rt}:${wt}.000${Xe}`)}}let qe=class extends V.A{constructor(){super(...arguments),this.values=null}};(0,t._)([(0,n.MZ)({type:[Number],json:{write:!0}})],qe.prototype,"values",void 0),qe=(0,t._)([(0,D.$)("esri.layers.voxel.VoxelIrregularSpacing")],qe);const xt=qe;let Ge=class extends V.A{constructor(){super(...arguments),this.scale=1,this.offset=0}};(0,t._)([(0,n.MZ)({type:Number,json:{write:!0}})],Ge.prototype,"scale",void 0),(0,t._)([(0,n.MZ)({type:Number,json:{write:!0}})],Ge.prototype,"offset",void 0),Ge=(0,t._)([(0,D.$)("esri.layers.voxel.VoxelRegularSpacing")],Ge);const At=Ge;let ge=class extends V.A{constructor(){super(...arguments),this.irregularSpacing=null,this.isPositiveUp=!0,this.isWrappedDateLine=!1,this.label=null,this.name=null,this.quantity=null,this.regularSpacing=null,this.size=0,this.unit=null}get isRegular(){return(null==this.irregularSpacing||void 0===this.irregularSpacing)&&null!==this.regularSpacing}getRange(){return this.isRegular?[this.regularSpacing.offset,this.regularSpacing.offset+this.regularSpacing.scale*(this.size-1)]:Array.isArray(this.irregularSpacing?.values)&&this.irregularSpacing.values.length>1?[this.irregularSpacing.values[0],this.irregularSpacing.values[this.irregularSpacing.values.length-1]]:[0,0]}};(0,t._)([(0,n.MZ)({type:xt,json:{write:!0}})],ge.prototype,"irregularSpacing",void 0),(0,t._)([(0,n.MZ)({type:Boolean,json:{write:!0}})],ge.prototype,"isPositiveUp",void 0),(0,t._)([(0,n.MZ)({type:Boolean,json:{write:!0}})],ge.prototype,"isWrappedDateLine",void 0),(0,t._)([(0,n.MZ)({type:String,json:{write:!0}})],ge.prototype,"label",void 0),(0,t._)([(0,n.MZ)({type:String,json:{write:!0}})],ge.prototype,"name",void 0),(0,t._)([(0,n.MZ)({type:String,json:{write:!0}})],ge.prototype,"quantity",void 0),(0,t._)([(0,n.MZ)({type:At,json:{write:!0}})],ge.prototype,"regularSpacing",void 0),(0,t._)([(0,n.MZ)({type:Number,json:{write:!0}})],ge.prototype,"size",void 0),(0,t._)([(0,n.MZ)({type:String,json:{write:!0}})],ge.prototype,"unit",void 0),(0,t._)([(0,n.MZ)({type:Boolean,json:{read:!1}})],ge.prototype,"isRegular",null),ge=(0,t._)([(0,D.$)("esri.layers.voxel.VoxelDimension")],ge);const Et=ge;let Me=class extends V.A{constructor(i){super(i),this.id=0,this.dimensions=null,this.spatialReference=yt.A.WGS84}get zDimension(){if(!this.dimensions||!Array.isArray(this.dimensions)||4!==this.dimensions.length)return-1;for(let i=2;i<4;++i)if(this.dimensions[i].size>0)return i;return-1}get isValid(){return!(!this.dimensions||!Array.isArray(this.dimensions)||4!==this.dimensions.length||this.dimensions[0].size<1||this.dimensions[1].size<1||-1===this.zDimension||this.dimensions[this.zDimension].size<1)}get originInLayerSpace3D(){if(!this.isValid||"xyt"===this.volumeType)return[0,0,0];const i=this.dimensions[0].getRange(),u=this.dimensions[1].getRange(),v=this.dimensions[2],x=v.isRegular?v.getRange():[0,v.size];return[i[0],u[0],x[0]]}get voxelSizeInLayerSpaceSigned(){if(!this.isValid||"xyt"===this.volumeType)return[0,0,0];const i=this.dimensions[0].getRange(),u=this.dimensions[1].getRange(),v=this.dimensions[2],x=v.isRegular?v.getRange():[0,v.size],T=[this.sizeInVoxels[0],this.sizeInVoxels[1],this.sizeInVoxels[2]];for(let H=0;H<3;++H)T[H]<2?T[H]=1:T[H]-=1;return v.isRegular&&!v.isPositiveUp&&(T[2]*=-1),[(i[1]-i[0])/T[0],(u[1]-u[0])/T[1],(x[1]-x[0])/T[2]]}get volumeType(){if(this.isValid){const i=this.dimensions[2].size>0;let u=this.dimensions[3].size>0;if(u){const v=this.dimensions[3];u="time"===v.quantity,u&&null!==v.unit&&(u=ft(v.unit).didParse)}if(!i&&u)return"xyt";if(i&&u)return"xyzt"}return"xyz"}get sizeInVoxels(){return this.isValid?[this.dimensions[0].size,this.dimensions[1].size,this.dimensions[this.zDimension].size]:[0,0,0]}get timeStops(){if("xyzt"!==this.volumeType)return[];const i=this.dimensions[3],u=[],v=ft(i.unit);if(v.didParse)if(i.isRegular){const x=i.regularSpacing?.offset??0,T=i.regularSpacing?.scale||1;for(let H=0;H<i.size;++H)u.push((0,mt.mi)(v.reference,x+T*H,v.unit))}else if(Array.isArray(i.irregularSpacing?.values)&&i.irregularSpacing.values.length>0)for(let x=0;x<i.irregularSpacing.values.length;++x)u.push((0,mt.mi)(v.reference,i.irregularSpacing.values[x],v.unit));return u}computeVoxelSpaceLocation(i){if(!this.isValid)return[0,0,0];if("xyt"===this.volumeType)return k.A.getLogger(this).error("computeVoxelSpacePosition cannot be used with XYT volumes."),[0,0,0];if(!(0,bt.aI)(this.spatialReference,i.spatialReference))return k.A.getLogger(this).error("pos argument should have the same spatial reference as the VoxelLayer."),[0,0,0];const u=(0,L.fA)(i.x,i.y,i.z??0);(0,w.d)(u,u,this.originInLayerSpace3D),(0,w.E)(u,u,this.voxelSizeInLayerSpaceSigned);const v=this.dimensions[this.zDimension];if(!v.isRegular&&Array.isArray(v.irregularSpacing?.values)&&v.irregularSpacing.values.length>1){const x=i.z??0,T=v.irregularSpacing.values,H=v.isPositiveUp?1:-1,ee=T.reduce((te,ne)=>Math.abs(H*ne-x)<Math.abs(H*te-x)?ne:te);for(let te=0;te<T.length;++te)if(T[te]===ee){u[2]=te;break}}return[u[0],u[1],u[2]]}computeLayerSpaceLocation(i){if(!this.isValid)return new nt.A({x:0,y:0,spatialReference:this.spatialReference});const u=(0,L.ci)(i);if((0,w.C)(u,u,this.voxelSizeInLayerSpaceSigned),(0,w.g)(u,u,this.originInLayerSpace3D),"xyt"===this.volumeType)return new nt.A({x:u[0],y:u[1],spatialReference:this.spatialReference});const v=this.dimensions[this.zDimension];return v.isRegular||Array.isArray(v.irregularSpacing?.values)&&(u[2]=i[2]<0?v.irregularSpacing.values[0]:i[2]<v.irregularSpacing.values.length?v.irregularSpacing.values[i[2]]:v.irregularSpacing.values[v.irregularSpacing.values.length-1],v.isPositiveUp||(u[2]*=-1)),new nt.A({x:u[0],y:u[1],z:u[2],spatialReference:this.spatialReference})}};(0,t._)([(0,n.MZ)({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],Me.prototype,"id",void 0),(0,t._)([(0,n.MZ)({type:[Et],json:{write:{enabled:!0,isRequired:!0}}})],Me.prototype,"dimensions",void 0),(0,t._)([(0,n.MZ)({type:yt.A,json:{read:{enabled:!1}}})],Me.prototype,"spatialReference",void 0),(0,t._)([(0,n.MZ)({type:Number,json:{read:!1}})],Me.prototype,"zDimension",null),(0,t._)([(0,n.MZ)({type:[Boolean],json:{read:!1}})],Me.prototype,"isValid",null),(0,t._)([(0,n.MZ)({type:[Number],json:{read:!1}})],Me.prototype,"originInLayerSpace3D",null),(0,t._)([(0,n.MZ)({type:[Number],json:{read:!1}})],Me.prototype,"voxelSizeInLayerSpaceSigned",null),(0,t._)([(0,n.MZ)({type:["xyz","xyzt","xyt"],json:{read:{enabled:!1}}})],Me.prototype,"volumeType",null),(0,t._)([(0,n.MZ)({type:[Number],json:{read:!1}})],Me.prototype,"sizeInVoxels",null),(0,t._)([(0,n.MZ)({type:[Date],json:{read:!1,write:!1}})],Me.prototype,"timeStops",null),Me=(0,t._)([(0,D.$)("esri.layers.voxel.VoxelVolume")],Me);const vt=Me;var lt;let Be=lt=class extends V.A{constructor(){super(...arguments),this.apronWidth=1,this.brickSize=[32,32,32],this.maxLodLevel=0,this.nodeSize=[4,4,4]}isValid(){const i=new lt;return i.apronWidth===this.apronWidth&&i.maxLodLevel===this.maxLodLevel&&!!this.brickSize&&!!this.nodeSize&&!(!Array.isArray(this.brickSize)||!Array.isArray(this.nodeSize))&&3===this.brickSize.length&&3===this.nodeSize.length&&32===this.brickSize[0]&&32===this.brickSize[1]&&32===this.brickSize[2]&&4===this.nodeSize[0]&&4===this.nodeSize[1]&&4===this.nodeSize[2]}};(0,t._)([(0,n.MZ)({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],Be.prototype,"apronWidth",void 0),(0,t._)([(0,n.MZ)({type:[Number],json:{write:{enabled:!0,isRequired:!0}}})],Be.prototype,"brickSize",void 0),(0,t._)([(0,n.MZ)({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],Be.prototype,"maxLodLevel",void 0),(0,t._)([(0,n.MZ)({type:[Number],json:{write:{enabled:!0,isRequired:!0}}})],Be.prototype,"nodeSize",void 0),Be=lt=(0,t._)([(0,D.$)("esri.layers.voxel.VoxelVolumeIndex")],Be);const jt=Be;let Pe=class extends(j.A.ClonableMixin(V.A)){constructor(i){super(i),this.enabled=!0,this.label="",this.normal=null,this.point=null}get orientation(){if(!Array.isArray(this.normal)||3!==this.normal.length)return 0;const[i,u]=W(this.normal);return P.ie.normalize((0,I.GB)(i),0,!0)}set orientation(i){const u=Y(i,this.tilt);this._set("normal",u),this._set("orientation",i)}get tilt(){if(!Array.isArray(this.normal)||3!==this.normal.length)return 0;const[i,u]=W(this.normal);return P.ie.normalize((0,I.GB)(u),0,!0)}set tilt(i){const u=Y(this.orientation,i);this._set("normal",u),this._set("tilt",i)}};(0,t._)([(0,n.MZ)({type:Boolean,json:{default:!0,write:!0}})],Pe.prototype,"enabled",void 0),(0,t._)([(0,n.MZ)({type:String,json:{write:!0}})],Pe.prototype,"label",void 0),(0,t._)([(0,n.MZ)({type:Number,json:{read:!1},clonable:!1,range:{min:0,max:360}}),(0,m.w)(i=>P.ie.normalize((0,I.GB)(i),0,!0))],Pe.prototype,"orientation",null),(0,t._)([(0,n.MZ)({type:Number,json:{read:!1},clonable:!1,range:{min:0,max:360}}),(0,m.w)(i=>P.ie.normalize((0,I.GB)(i),0,!0))],Pe.prototype,"tilt",null),(0,t._)([(0,n.MZ)({type:[Number],json:{write:{isRequired:!0}}})],Pe.prototype,"normal",void 0),(0,t._)([(0,n.MZ)({type:[Number],json:{write:{isRequired:!0}}})],Pe.prototype,"point",void 0),Pe=(0,t._)([(0,D.$)("esri.layers.voxel.VoxelDynamicSection")],Pe);const at=Pe;var ut;let Oe=ut=class extends V.A{constructor(i){super(i),this.volumeId=0,this.verticalExaggeration=1,this.exaggerationMode="scale-height",this.verticalOffset=0,this.slices=new(O.A.ofType(E)),this.dynamicSections=new(O.A.ofType(at))}set slices(i){this._set("slices",(0,De.V)(i,this._get("slices"),O.A.ofType(E)))}set dynamicSections(i){this._set("dynamicSections",(0,De.V)(i,this._get("dynamicSections"),O.A.ofType(at)))}clone(){return new ut({volumeId:this.volumeId,verticalExaggeration:this.verticalExaggeration,exaggerationMode:this.exaggerationMode,verticalOffset:this.verticalOffset,slices:(0,xe.o8)(this.slices),dynamicSections:(0,xe.o8)(this.dynamicSections)})}};(0,t._)([(0,n.MZ)({type:I.jz,json:{write:{enabled:!0,isRequired:!0}}})],Oe.prototype,"volumeId",void 0),(0,t._)([(0,n.MZ)({type:Number,json:{default:1,write:!0}})],Oe.prototype,"verticalExaggeration",void 0),(0,t._)([(0,n.MZ)({type:["scale-position","scale-height"],json:{default:"scale-height",write:!0}})],Oe.prototype,"exaggerationMode",void 0),(0,t._)([(0,n.MZ)({type:Number,json:{default:0,write:!0}})],Oe.prototype,"verticalOffset",void 0),(0,t._)([(0,n.MZ)({type:O.A.ofType(E),json:{write:{enabled:!0,overridePolicy(){return{enabled:!!this.slices&&this.slices.length>0}}}}})],Oe.prototype,"slices",null),(0,t._)([(0,n.MZ)({type:O.A.ofType(at),json:{write:{enabled:!0,overridePolicy(){return{enabled:!!this.dynamicSections&&this.dynamicSections.length>0}}}}})],Oe.prototype,"dynamicSections",null),Oe=ut=(0,t._)([(0,D.$)("esri.layers.voxel.VoxelVolumeStyle")],Oe);const _t=Oe;var Tt=p(41843),gt=p(17181),Dt=p(89352);let G=class extends((0,se.w6)((0,c.b)((0,d.q)((0,f.A)((0,_.j)((0,F.P)((0,o.d)((0,A.p)(y.A))))))))){constructor(i){super(i),this.serviceRoot="",this.operationalLayerType="Voxel",this.legendEnabled=!0,this.title=null,this.sections=null,this.currentVariableId=0,this.volumeStyles=null,this.renderMode="volume",this.variableStyles=null,this.enableSlices=!0,this.enableSections=!0,this.enableDynamicSections=!0,this.enableIsosurfaces=!0,this.shading=new Q,this.opacity=1,this.variables=new O.A,this.volumes=new O.A,this.index=null,this.minScale=0,this.maxScale=0,this.type="voxel",this.version={major:Number.NaN,minor:Number.NaN,versionString:""},this.fullExtent=null,this.popupEnabled=!1,this.popupTemplate=null,this.test=null,this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0,this.volumeStyles=new(O.A.ofType(_t)),this.variableStyles=new(O.A.ofType(ht)),this.sections=new(O.A.ofType(R))}normalizeCtorArgs(i){return i?.constantUpscaling&&(this.test={constantUpscaling:!0},delete i.constantUpscaling),i}set url(i){this._set("url",(0,ve.Jf)(i,k.A.getLogger(this)))}load(i){const u=null!=i?i.signal:null,v=this.loadFromPortal({supportedTypes:["Scene Service"]},i).catch(U.QP).then(()=>this._fetchService(u)).then(()=>this.serviceRoot=this.url);return this.addResolvingPromise(v),Promise.resolve(this)}read(i,u){super.read(i,u),"service"===u?.origin&&this.version.major<=3&&this.version.minor<=0&&!this.getAtOrigin("popupTemplate","service")&&this.setAtOrigin("popupTemplate",this.createPopupTemplate(),"service");for(const v of this.volumes)v.spatialReference=this.spatialReference}readVersion(i,u){return super.parseVersionString(i)}validateLayer(i){if(i.layerType&&i.layerType!==this.operationalLayerType)throw new N.A("voxel-layer:layer-type-not-supported","VoxelLayer does not support this layer type",{layerType:i.layerType});if(isNaN(this.version.major)||isNaN(this.version.minor)||this.version.major<3)throw new N.A("layer:service-version-not-supported","Service version is not supported.",{serviceVersion:this.version.versionString,supportedVersions:"3.x"});if(this.version.major>3)throw new N.A("layer:service-version-too-new","Service version is too new.",{serviceVersion:this.version.versionString,supportedVersions:"3.x"})}readFullExtent(i,u,v){if(null!=i&&"object"==typeof i){const x=ye.A.fromJSON(i,v);if(0===x.zmin&&0===x.zmax&&Array.isArray(u.volumes)){const T=vt.fromJSON(u.volumes[0]);if(T.isValid&&"xyt"!==T.volumeType){const H=T.dimensions[2];if(H.isRegular){let ee=H.regularSpacing.offset,te=H.regularSpacing.offset+H.regularSpacing.scale*(H.size-1);if(ee>te){const ne=ee;ee=te,te=ne}x.zmin=ee,x.zmax=te}}}return x}return null}get fields(){const i=[new me.A({name:"Voxel.Position",alias:"Voxel Position",domain:null,editable:!1,length:128,type:"string"}),new me.A({name:"Voxel.CurrentVariable",alias:"Current Variable",domain:null,editable:!1,length:128,type:"string"})];for(const v of this.variables){const x=new me.A({name:v.name,alias:v.description,domain:null,editable:!1,length:128,type:"discrete"===v.renderingFormat.continuity?"string":"double"});i.push(x)}const u=this.getVolume(null);if(null!=u){if("xyzt"===u.volumeType||"xyt"===u.volumeType){const v=new me.A({name:"Voxel.LocalTime",alias:"Local Time",domain:null,editable:!1,length:256,type:"date"});i.push(v);const x=new me.A({name:"Voxel.SourceTime",alias:"Source Time",domain:null,editable:!1,length:256,type:"string"});i.push(x)}if("xyt"!==u.volumeType){const v=new me.A({name:"Voxel.Depth",alias:"Depth",domain:null,editable:!1,length:128,type:"double"});i.push(v)}}return i}get fieldsIndex(){return this.loaded?new je.A(this.fields):null}getField(i){return this.fieldsIndex?.get(i)}get defaultPopupTemplate(){return this.createPopupTemplate()}createPopupTemplate(i){return(0,Tt.tn)({fields:this.fields,title:"{Voxel.Position}"},i)}getConfiguration(){const i={layerType:this.operationalLayerType,version:this.version.versionString,name:this.title,spatialReference:this.spatialReference,fullExtent:this.fullExtent,volumes:this.volumes.toJSON(),variables:this.variables.toJSON(),index:this.index?.toJSON(),sections:this.getSections(),style:{volumeStyles:this.getVolumeStyles(),currentVariableId:this.currentVariableId,renderMode:this.renderMode,variableStyles:this.getVariableStyles(),enableSections:this.enableSections,enableDynamicSections:this.enableDynamicSections,enableIsosurfaces:this.enableIsosurfaces,enableSlices:this.enableSlices,shading:this.shading}};return i.index&&this.index?.isValid()?JSON.stringify(i):""}getVariableStyle(i){let u=-1;if(u=i??this.currentVariableId,!this.variableStyles||-1===u)return null;const v=this.variableStyles.findIndex(x=>x.variableId===u);return v<0?null:this.variableStyles.at(v)}getVariable(i){let u=-1;if(u=i??this.currentVariableId,!this.variables||-1===u)return null;const v=this.variables.findIndex(x=>x.id===u);return v<0?null:this.variables.at(v)}getVolume(i){const u=this.getVariable(i);return null!=u?this.volumes.find(({id:v})=>v===u.volumeId):null}get timeInfo(){const i=this.getVolume(null);if("xyzt"!==i?.volumeType)return null;const u=i.timeStops;if(!u?.length)return null;const v=new gt.A({start:u[0],end:u.at(-1)});return new be.A({fullTimeExtent:v,stops:u})}getVolumeStyle(i){const u=this.getVariable(i);return null!=u?this.volumeStyles.find(({volumeId:v})=>v===u.volumeId):null}getColorForContinuousDataValue(i,u,v){const x=this.getVariable(i);if(null==x||"continuous"!==x.renderingFormat?.continuity||!this.variableStyles)return null;const T=this.variableStyles.findIndex(ee=>ee.variableId===i);if(T<0)return null;const H=this.variableStyles.at(T);return H?.transferFunction?H.transferFunction.getColorForContinuousDataValue(u,v):null}getSections(){const i=[];for(const u of this.sections)i.push(new R({enabled:u.enabled,href:u.href,id:u.id,label:u.label,normal:u.normal,point:u.point,sizeInPixel:u.sizeInPixel,slices:u.slices,timeId:u.timeId,variableId:u.variableId}));return i}getVariableStyles(){const i=[];for(const u of this.variableStyles){const v=this._getVariable(u);if(null!=v){const x=u.clone();x.isosurfaces.length>4&&(x.isosurfaces=x.isosurfaces.slice(0,3),k.A.getLogger(this).error("A maximum of 4 isosurfaces are supported for Voxel Layers."));for(const T of x.isosurfaces)if(!T.colorLocked){const H=this.getColorForContinuousDataValue(x.variableId,T.value,!1);null==H||H.equals(T.color)||(T.color=H)}if("continuous"===v.renderingFormat.continuity)(null===x.transferFunction||x.transferFunction.colorStops.length<2)&&k.A.getLogger(this).error(`VoxelVariableStyle for variable ${v.id} is invalid. At least 2 color stops are required in the transferFunction for continuous Voxel Layer variables.`),null!==x.transferFunction&&(Array.isArray(x.transferFunction.stretchRange)&&2===x.transferFunction.stretchRange.length||(k.A.getLogger(this).error(`VoxelVariableStyle for variable ${v.id} is invalid. The stretchRange of the transferFunction for continuous Voxel Layer variables must be of the form [minimumDataValue, maximumDataValue].`),x.transferFunction.stretchRange=[0,1],x.transferFunction.colorStops.removeAll()));else if("discrete"===v.renderingFormat.continuity)if(0===u.uniqueValues.length)k.A.getLogger(this).error(`VoxelVariableStyle for variable ${v.id} is invalid. Unique values are required for discrete Voxel Layer variables.`);else for(const T of u.uniqueValues)null!=T.label||null==T.value||(T.label=T.value.toString());i.push(x)}else k.A.getLogger(this).error(`VoxelVariable ID=${u.variableId} doesn't exist, VoxelVariableStyle for this VoxelVariable will be ignored.`)}return i}getVolumeStyles(){const i=[];for(const u of this.volumeStyles){const v=this._getVolumeFromVolumeId(u.volumeId);if(null!=v){const x=u.clone();for(const T of x.slices)this._isPlaneValid(T,[0,1,v.zDimension],v.dimensions)||(T.enabled=!1,T.label="invalid");for(const T of x.dynamicSections)this._isPlaneValid(T,[0,1,v.zDimension],v.dimensions)||(T.enabled=!1,T.label="invalid");i.push(x)}else k.A.getLogger(this).error(`VoxelVolume ID=${u.volumeId} doesn't exist, VoxelVolumeStyle for this VoxelVolume will be ignored.`)}return i}_getVariable(i){const u=i.variableId;for(const v of this.variables)if(v.id===u)return v;return null}_getVolumeFromVolumeId(i){for(const u of this.volumes)if(u.id===i)return u;return null}_isPlaneValid(i,u,v){if(!(i.point&&Array.isArray(i.point)&&3===i.point.length&&i.normal&&Array.isArray(i.normal)&&3===i.normal.length))return!1;const x=(0,L.fA)(i.normal[0],i.normal[1],i.normal[2]);return(0,w.n)(x,x),!(Math.abs(x[0])+Math.abs(x[1])+Math.abs(x[2])<1e-6||(i.normal[0]=x[0],i.normal[1]=x[1],i.normal[2]=x[2],0))}};(0,t._)([(0,n.MZ)({type:["Voxel"]})],G.prototype,"operationalLayerType",void 0),(0,t._)([(0,n.MZ)(ue.fV)],G.prototype,"legendEnabled",void 0),(0,t._)([(0,n.MZ)({json:{write:!0}})],G.prototype,"title",void 0),(0,t._)([(0,n.MZ)(ue.OZ)],G.prototype,"url",null),(0,t._)([(0,n.MZ)({type:O.A.ofType(R),json:{origins:{"web-scene":{name:"layerDefinition.sections",write:!0}}}})],G.prototype,"sections",void 0),(0,t._)([(0,n.MZ)({type:I.jz,json:{origins:{"web-scene":{name:"layerDefinition.style.currentVariableId",write:{enabled:!0,isRequired:!0,ignoreOrigin:!0}},service:{name:"style.currentVariableId"}}}})],G.prototype,"currentVariableId",void 0),(0,t._)([(0,n.MZ)({type:O.A.ofType(_t),json:{origins:{"web-scene":{name:"layerDefinition.style.volumeStyles",write:!0},service:{name:"style.volumeStyles"}}}})],G.prototype,"volumeStyles",void 0),(0,t._)([(0,n.MZ)({type:["volume","surfaces"],json:{origins:{"web-scene":{name:"layerDefinition.style.renderMode",write:!0},service:{name:"style.renderMode"}}}})],G.prototype,"renderMode",void 0),(0,t._)([(0,n.MZ)({type:O.A.ofType(ht),json:{origins:{"web-scene":{name:"layerDefinition.style.variableStyles",write:!0},service:{name:"style.variableStyles"}}}})],G.prototype,"variableStyles",void 0),(0,t._)([(0,n.MZ)({type:Boolean,json:{origins:{"web-scene":{name:"layerDefinition.style.enableSlices",write:!0},service:{name:"style.enableSlices"}}}})],G.prototype,"enableSlices",void 0),(0,t._)([(0,n.MZ)({type:Boolean,json:{origins:{"web-scene":{name:"layerDefinition.style.enableSections",write:!0},service:{name:"style.enableSections"}}}})],G.prototype,"enableSections",void 0),(0,t._)([(0,n.MZ)({type:Boolean,json:{origins:{"web-scene":{name:"layerDefinition.style.enableDynamicSections",write:!0},service:{name:"style.enableDynamicSections"}}}})],G.prototype,"enableDynamicSections",void 0),(0,t._)([(0,n.MZ)({type:Boolean,json:{origins:{"web-scene":{name:"layerDefinition.style.enableIsosurfaces",write:!0},service:{name:"style.enableIsosurfaces"}}}})],G.prototype,"enableIsosurfaces",void 0),(0,t._)([(0,n.MZ)({type:Q,json:{origins:{"web-scene":{name:"layerDefinition.style.shading",write:!0},service:{name:"style.shading"}}}})],G.prototype,"shading",void 0),(0,t._)([(0,n.MZ)({type:["show","hide"]})],G.prototype,"listMode",void 0),(0,t._)([(0,n.MZ)({type:Number,range:{min:0,max:1},nonNullable:!0,json:{read:!1,write:!1,origins:{"web-scene":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],G.prototype,"opacity",void 0),(0,t._)([(0,n.MZ)({type:O.A.ofType(Ze)})],G.prototype,"variables",void 0),(0,t._)([(0,n.MZ)({type:O.A.ofType(vt)})],G.prototype,"volumes",void 0),(0,t._)([(0,n.MZ)({type:jt})],G.prototype,"index",void 0),(0,t._)([(0,n.MZ)({type:Number,json:{name:"layerDefinition.minScale",write:!0,origins:{service:{read:!1,write:!1}}}})],G.prototype,"minScale",void 0),(0,t._)([(0,n.MZ)({type:Number,json:{name:"layerDefinition.maxScale",write:!0,origins:{service:{read:!1,write:!1}}}})],G.prototype,"maxScale",void 0),(0,t._)([(0,n.MZ)({json:{read:!1},readOnly:!0})],G.prototype,"type",void 0),(0,t._)([(0,n.MZ)({readOnly:!0,json:{name:"serviceVersion"}})],G.prototype,"version",void 0),(0,t._)([(0,B.w)("service","version")],G.prototype,"readVersion",null),(0,t._)([(0,n.MZ)({type:ye.A})],G.prototype,"fullExtent",void 0),(0,t._)([(0,B.w)("service","fullExtent",["fullExtent"])],G.prototype,"readFullExtent",null),(0,t._)([(0,n.MZ)({readOnly:!0,clonable:!1,json:{read:!1}})],G.prototype,"fields",null),(0,t._)([(0,n.MZ)({readOnly:!0})],G.prototype,"fieldsIndex",null),(0,t._)([(0,n.MZ)({type:Boolean,json:{name:"disablePopup",read:{reader:(i,u)=>!u.disablePopup},write:{enabled:!0,ignoreOrigin:!0,writer(i,u,v){u[v]=!i}},origins:{"portal-item":{default:!0},"web-scene":{default:!0}}}})],G.prototype,"popupEnabled",void 0),(0,t._)([(0,n.MZ)({type:$.A,json:{name:"popupInfo",write:!0}})],G.prototype,"popupTemplate",void 0),(0,t._)([(0,n.MZ)({readOnly:!0,json:{read:!1}})],G.prototype,"defaultPopupTemplate",null),(0,t._)([(0,n.MZ)({type:be.A,readOnly:!0,json:{read:!1}})],G.prototype,"timeInfo",null),(0,t._)([(0,n.MZ)({type:gt.A,json:{read:!1}})],G.prototype,"timeExtent",void 0),(0,t._)([(0,n.MZ)({type:Dt.A,json:{read:!1}})],G.prototype,"timeOffset",void 0),(0,t._)([(0,n.MZ)({type:Boolean,nonNullable:!0,json:{origins:{"web-scene":{name:"timeAnimation",write:!0},service:{read:!1}}}})],G.prototype,"useViewTime",void 0),G=(0,t._)([(0,D.$)("esri.layers.VoxelLayer")],G);const It=G},23e3:(Se,ie,p)=>{p.d(ie,{d:()=>U});var t=p(8189),$=p(85211),F=(p(3248),p(35150),p(40707),p(76576));const U=n=>{let I=class extends n{constructor(){super(...arguments),this.customParameters=null}};return(0,t._)([(0,$.MZ)({type:Object,json:{write:{overridePolicy:J=>({enabled:!!(J&&Object.keys(J).length>0)})}}})],I.prototype,"customParameters",void 0),I=(0,t._)([(0,F.$)("esri.layers.mixins.CustomParametersMixin")],I),I}},33036:(Se,ie,p)=>{p.d(ie,{j:()=>U});var t=p(8189),$=p(85211),F=(p(3248),p(35150),p(40707),p(76576));const U=I=>{let J=class extends I{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const X={minScale:this.minScale,maxScale:this.maxScale},B=this.parent;B&&"effectiveScaleRange"in B&&function n(I,J){I.minScale=I.minScale>0?J.minScale>0?Math.min(I.minScale,J.minScale):I.minScale:J.minScale,I.maxScale=I.maxScale>0?J.maxScale>0?Math.max(I.maxScale,J.maxScale):I.maxScale:J.maxScale}(X,B.effectiveScaleRange);const D=this._get("effectiveScaleRange");return D&&D.minScale===X.minScale&&D.maxScale===X.maxScale?D:X}};return(0,t._)([(0,$.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],J.prototype,"minScale",void 0),(0,t._)([(0,$.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],J.prototype,"maxScale",void 0),(0,t._)([(0,$.MZ)({readOnly:!0})],J.prototype,"effectiveScaleRange",null),J=(0,t._)([(0,F.$)("esri.layers.mixins.ScaleRangeLayer")],J),J}},73258:(Se,ie,p)=>{p.d(ie,{A:()=>w});var t=p(5922),$=p(71065),O=p(35150),N=p(60797),k=p(24098),F=p(86300),U=p(20543),n=p(22639),I=p(44549);const D=new Map;class w{static fromJSON(o){return new w(o.fields,o.timeZoneByFieldName)}static fromLayer(o){return new w(o.fields??[],A(o))}static fromLayerJSON(o){return new w(o.fields??[],A(o))}constructor(o=[],d){this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=o||[],this._timeZoneByFieldName=d?new Map(d):null;const f=[];for(const _ of this.fields){const se=_?.name,ve=ye(se);if(se&&ve){const ue=L(se);this._fieldsMap.set(se,_),this._fieldsMap.set(ue,_),this._normalizedFieldsMap.set(ve,_),f.push(`${ue}:${_.type}:${this._timeZoneByFieldName?.get(se)}`),(0,F.vE)(_)?(this.dateFields.push(_),this._dateFieldsSet.add(_)):(0,F.WA)(_)&&(this._numericFieldsSet.add(_),this.numericFields.push(_)),(0,F.te)(_)||(0,F.Xz)(_)||(_.editable=null==_.editable||!!_.editable,_.nullable=null==_.nullable||!!_.nullable)}}f.sort(),this.uid=f.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const o of this.fields)(0,F.te)(o)||(0,F.Xz)(o)||o.nullable||void 0!==(0,F.lD)(o)||this._requiredFields.push(o)}return this._requiredFields}equals(o){return this.uid===o?.uid}has(o){return null!=this.get(o)}get(o){if(!o)return;let d=this._fieldsMap.get(o);return d||(d=this._fieldsMap.get(L(o))??this._normalizedFieldsMap.get(ye(o)),d&&this._fieldsMap.set(o,d),d)}getTimeZone(o){const d=this.get(o&&"string"!=typeof o?o.name:o);return d?this._timeZoneByFieldName?this._timeZoneByFieldName.get(d.name):"date"===d.type||"esriFieldTypeDate"===d.type?(O.A.getLogger("esri.layers.support.FieldsIndex").errorOnce(new t.A("getTimeZone:no-timezone-information",`no time zone information for field '${d.name}'`)),U.n$):y.has(d.type)?U.L5:null:null}getLuxonTimeZone(o){const d=this.getTimeZone(o);return d?d===U.L5?k.GB.instance:d===U.n$?I.mQ.utcInstance:(0,N.tE)(D,d,()=>I.oh.create(d)):null}isDateField(o){return this._dateFieldsSet.has(this.get(o))}isTimeOnlyField(o){return(0,F.OH)(this.get(o))}isNumericField(o){return this._numericFieldsSet.has(this.get(o))}normalizeFieldName(o){return this.get(o)?.name??void 0}toJSON(){return{fields:this.fields.map(o=>$.A.isSerializable(o)?o.toJSON():o),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}function L(c){return c.trim().toLowerCase()}function ye(c){return(0,F.rS)(c)?.toLowerCase()??""}const y=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function A(c){const o=new Map;if(!c.fields)return o;const d=!0===c.datesInUnknownTimezone,{timeInfo:f,editFieldsInfo:_}=c,se=(f?"startField"in f?f.startField:f.startTimeField:"")??"",ve=(f?"endField"in f?f.endField:f.endTimeField:"")??"",ue=function B(c){return"dateFieldsTimeZone"in c}(c)?c.dateFieldsTimeZone??null:c.dateFieldsTimeReference?(0,n.ZS)(c.dateFieldsTimeReference):null,me=_?function J(c){return"timeZone"in c}(_)?_.timeZone??ue:_.dateFieldsTimeReference?(0,n.ZS)(_.dateFieldsTimeReference):ue??U.n$:null,je=f?function X(c){return"timeZone"in c}(f)?f.timeZone??ue:f.timeReference?(0,n.ZS)(f.timeReference):ue:null,be=new Map([[L(_?.creationDateField??""),me],[L(_?.editDateField??""),me],[L(se),je],[L(ve),je]]);for(const{name:j,type:P}of c.fields)if(y.has(P))o.set(j,U.L5);else if("date"!==P&&"esriFieldTypeDate"!==P)o.set(j,null);else if(d)o.set(j,U.L5);else{const V=be.get(L(j??""))??ue;o.set(j,V)}return o}},38488:(Se,ie,p)=>{p.d(ie,{A:()=>ye});var t=p(8189),$=p(90660),O=p(71065),N=p(85211),n=(p(3248),p(35150),p(40707),p(17221)),I=p(76576),J=p(50305),X=p(17181),B=p(89352),D=p(22639);function w(y,A){return B.A.fromJSON({value:y,unit:A})}let L=class extends($.A.ClonableMixin(O.A)){constructor(y){super(y),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(y,A){return A.timeExtent&&Array.isArray(A.timeExtent)&&2===A.timeExtent.length?X.A.fromArray(A.timeExtent):null}writeFullTimeExtent(y,A){A.timeExtent=null!=y?.start&&null!=y.end?y.toArray():null}readInterval(y,A){return A.timeInterval&&A.timeIntervalUnits?w(A.timeInterval,A.timeIntervalUnits):A.defaultTimeInterval&&A.defaultTimeIntervalUnits?w(A.defaultTimeInterval,A.defaultTimeIntervalUnits):null}writeInterval(y,A){A.timeInterval=y?.toJSON().value??null,A.timeIntervalUnits=y?.toJSON().unit??null}};(0,t._)([(0,N.MZ)({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],L.prototype,"cumulative",void 0),(0,t._)([(0,N.MZ)({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],L.prototype,"endField",void 0),(0,t._)([(0,N.MZ)({type:X.A,json:{write:{enabled:!0,allowNull:!0}}})],L.prototype,"fullTimeExtent",void 0),(0,t._)([(0,n.w)("fullTimeExtent",["timeExtent"])],L.prototype,"readFullTimeExtent",null),(0,t._)([(0,J.K)("fullTimeExtent")],L.prototype,"writeFullTimeExtent",null),(0,t._)([(0,N.MZ)({type:Boolean,json:{write:!0}})],L.prototype,"hasLiveData",void 0),(0,t._)([(0,N.MZ)({type:B.A,json:{write:{enabled:!0,allowNull:!0}}})],L.prototype,"interval",void 0),(0,t._)([(0,n.w)("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],L.prototype,"readInterval",null),(0,t._)([(0,J.K)("interval")],L.prototype,"writeInterval",null),(0,t._)([(0,N.MZ)({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],L.prototype,"startField",void 0),(0,t._)([(0,N.MZ)((0,D.P6)("timeReference",!0))],L.prototype,"timeZone",void 0),(0,t._)([(0,N.MZ)({type:String,json:{write:{enabled:!0,allowNull:!0}}})],L.prototype,"trackIdField",void 0),(0,t._)([(0,N.MZ)({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],L.prototype,"useTime",void 0),(0,t._)([(0,N.MZ)({type:[Date],json:{read:!1}})],L.prototype,"stops",void 0),L=(0,t._)([(0,I.$)("esri.layers.support.TimeInfo")],L);const ye=L},26957:(Se,ie,p)=>{p.d(ie,{j:()=>$});const $=(0,p(49976).O)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0})},41843:(Se,ie,p)=>{p.d(ie,{DQ:()=>ye,tn:()=>w});var t=p(92165),$=p(86300),O=p(54042),U=(p(75432),p(65121),p(558),p(8975)),B=(p(90792),p(83902),p(98089),p(62270),p(61099)),D=p(17580);function w({displayField:j,editFieldsInfo:P,fields:V,objectIdField:re,title:le},pe){if(!V)return null;const de=function d(j,P){const V=P?.visibleFieldNames;return function A({fields:j,ignoreFieldTypes:P,sortDisabled:V}){const re=j;return P&&(j=j.filter(le=>!P.includes(le.type))),j===re&&(j=j.slice()),!0!==V&&j.sort(c),j}({fields:j.fields??[],ignoreFieldTypes:P?.ignoreFieldTypes||be,sortDisabled:P?.sortDisabled}).map(re=>new B.A({fieldName:re.name,isEditable:(0,$.R$)(re,j),label:re.alias,format:se(re),visible:y(re,{...j,visibleFieldNames:V})}))}({editFieldsInfo:P,fields:V,objectIdField:re},pe);if(!de.length)return null;const q=function me(j){const P=(0,$.mB)(j),{titleBase:V}=j;return P?`${V}: {${P.trim()}}`:V??""}({titleBase:le,fields:V,displayField:j}),Te=function ve(){return[new U.A,new O.A]}();return new t.A({title:q,content:Te,fieldInfos:de})}function ye(j){const{title:P,graphic:V}=j??{},{attributes:re,sourceLayer:le}=V??{},pe=le&&"displayField"in le?le.displayField:null,de=pe?re?.[pe]:null,q=null!=de?JSON.stringify(de):null,Te=V?.getObjectId()?.toString();return P||q||Te||""}const y=(j,P)=>P.visibleFieldNames?P.visibleFieldNames.has(j.name):(0,$.Bz)(j,P);function c(j,P){return"oid"===j.type?-1:"oid"===P.type?1:je(j)?-1:je(P)?1:(j.alias||j.name).toLocaleLowerCase().localeCompare((P.alias||P.name).toLocaleLowerCase())}function se(j){switch(j.type){case"small-integer":case"integer":case"single":return new D.A({digitSeparator:!0,places:0});case"double":return new D.A({digitSeparator:!0,places:2});case"string":return(0,$.JL)(j.name)?new D.A({digitSeparator:!0,places:0}):void 0;default:return}}function je(j){return"name"===(j.name&&j.name.toLowerCase())||"name"===j.alias?.toLowerCase()}const be=["geometry","blob","raster","guid","xml"]},89352:(Se,ie,p)=>{p.d(ie,{A:()=>D});var t=p(8189),$=p(90660),O=p(71065),N=p(97442),k=p(85211),I=(p(3248),p(35150),p(40707),p(15463)),J=p(76576),X=p(26957);let B=class extends($.A.ClonableMixin(O.A)){constructor(w){super(w),this.unit="milliseconds",this.value=0}toMilliseconds(){return(0,N.t)(this.value,this.unit,"milliseconds")}};(0,t._)([(0,I.e)(X.j,{nonNullable:!0})],B.prototype,"unit",void 0),(0,t._)([(0,k.MZ)({type:Number,json:{write:!0},nonNullable:!0})],B.prototype,"value",void 0),B=(0,t._)([(0,J.$)("esri.time.TimeInterval")],B);const D=B}}]);