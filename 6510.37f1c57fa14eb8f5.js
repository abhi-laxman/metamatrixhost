"use strict";(self.webpackChunkAngularClient=self.webpackChunkAngularClient||[]).push([[6510],{15590:(J,R,m)=>{m.d(R,{A:()=>p});class p{constructor(t){this.size=0,this._start=0,this.maxSize=t,this._buffer=new Array(t)}get entries(){return this._buffer}enqueue(t){if(this.size===this.maxSize){const n=this._buffer[this._start];return this._buffer[this._start]=t,this._start=(this._start+1)%this.maxSize,n}return this._buffer[(this._start+this.size++)%this.maxSize]=t,null}dequeue(){if(0===this.size)return null;const t=this._buffer[this._start];return this._buffer[this._start]=null,this.size--,this._start=(this._start+1)%this.maxSize,t}peek(){return 0===this.size?null:this._buffer[this._start]}peekLast(){return 0===this.size?null:this._buffer[(this._start+(this.size-1))%this.maxSize]}find(t){if(0===this.size)return null;for(const n of this._buffer)if(null!=n&&t(n))return n;return null}clear(t){let n=this.dequeue();for(;null!=n;)t&&t(n),n=this.dequeue()}}},55912:(J,R,m)=>{m.d(R,{A:()=>I});var n,h,p=m(3248),o=m(11445),t=m(61591);(h=n||(n={}))[h.varint=0]="varint",h[h.fixed64=1]="fixed64",h[h.delimited=2]="delimited",h[h.fixed32=5]="fixed32",h[h.unknown=99]="unknown";const L=4294967296,w=new TextDecoder("utf-8"),x=(0,p.A)("safari")||(0,p.A)("ios")?6:(0,p.A)("ff")?12:32;class I{constructor(i,u,d=0,r=(i?i.byteLength:0)){this._tag=0,this._dataType=n.unknown,this._init(i,u,d,r)}_init(i,u,d,r){this._data=i,this._dataView=u,this._pos=d,this._end=r}get usedMemory(){return 64+(0,o.Qf)(this._data)}asUnsafe(){return this}clone(){return new I(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(i){this._pos=i}nextTag(i){for(;;){if(this._pos===this._end)return!1;const u=this._decodeVarint();if(this._tag=u>>3,this._dataType=7&u,!i||i===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const i=this._decodeVarint();return this._tag=i>>3,this._dataType=7&i,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let i=4294967295;if(i=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128||(i=(i|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128)||(i=(i|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128)||(i=(i|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128)||(i=(i|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128))return i;throw new Error("Varint overflow")}getUInt64(){return this._decodeVarint()}getSInt32(){const i=this.getUInt32();return i>>>1^-(1&i)}getSInt64(){return this._decodeSVarint()}getBool(){const i=0!==this._data[this._pos];return this._skip(1),i}getEnum(){return this._decodeVarint()}getFixed64(){const i=this._dataView,u=this._pos,d=i.getUint32(u,!0)+i.getUint32(u+4,!0)*L;return this._skip(8),d}getSFixed64(){const i=this._dataView,u=this._pos,d=i.getUint32(u,!0)+i.getInt32(u+4,!0)*L;return this._skip(8),d}getDouble(){const i=this._dataView.getFloat64(this._pos,!0);return this._skip(8),i}getFixed32(){const i=this._dataView.getUint32(this._pos,!0);return this._skip(4),i}getSFixed32(){const i=this._dataView.getInt32(this._pos,!0);return this._skip(4),i}getFloat(){const i=this._dataView.getFloat32(this._pos,!0);return this._skip(4),i}getString(){const i=this._getLength(),u=this._pos,d=this._toString(this._data,u,u+i);return this._skip(i),d}getBytes(){const i=this._getLength(),u=this._pos,d=this._toBytes(this._data,u,u+i);return this._skip(i),d}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(i,u,d,r){const D=this.getMessage(),O=i(D,u,d,r);return D.release(),O}processMessage(i){const u=this.getMessage(),d=i(u);return u.release(),d}getMessage(){const i=this._getLength(),u=I.pool.acquire();return u._init(this._data,this._dataView,this._pos,this._pos+i),this._skip(i),u}release(){I.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case n.varint:this._decodeVarint();break;case n.fixed64:this._skip(8);break;case n.delimited:this._skip(this._getLength());break;case n.fixed32:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(i){this._skip(i)}_skip(i){if(this._pos+i>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=i}_decodeVarint(){const i=this._data;let u=this._pos,d=0,r=0;if(this._end-u>=10)do{if(r=i[u++],d|=127&r,!(128&r&&(r=i[u++],d|=(127&r)<<7,128&r)&&(r=i[u++],d|=(127&r)<<14,128&r)&&(r=i[u++],d|=(127&r)<<21,128&r)&&(r=i[u++],d+=268435456*(127&r),128&r)&&(r=i[u++],d+=34359738368*(127&r),128&r)&&(r=i[u++],d+=4398046511104*(127&r),128&r)&&(r=i[u++],d+=562949953421312*(127&r),128&r)&&(r=i[u++],d+=72057594037927940*(127&r),128&r)&&(r=i[u++],d+=0x8000000000000000*(127&r),128&r)))break;throw new Error("Varint too long!")}while(0);else{let D=1;for(;u!==this._end&&(r=i[u],128&r);)++u,d+=(127&r)*D,D*=128;if(u===this._end)throw new Error("Varint overrun!");++u,d+=r*D}return this._pos=u,d}_decodeSVarint(){const i=this._data;let u,d=0,r=0;const D=1&i[this._pos];if(r=i[this._pos++],d|=127&r,!(128&r&&(r=i[this._pos++],d|=(127&r)<<7,128&r)&&(r=i[this._pos++],d|=(127&r)<<14,128&r)&&(r=i[this._pos++],d|=(127&r)<<21,128&r)&&(r=i[this._pos++],d+=268435456*(127&r),128&r)&&(r=i[this._pos++],d+=34359738368*(127&r),128&r)&&(r=i[this._pos++],d+=4398046511104*(127&r),128&r)))return D?-(d+1)/2:d/2;if(u=BigInt(d),r=i[this._pos++],u+=0x2000000000000n*BigInt(127&r),!(128&r&&(r=i[this._pos++],u+=0x100000000000000n*BigInt(127&r),128&r)&&(r=i[this._pos++],u+=0x8000000000000000n*BigInt(127&r),128&r)))return Number(D?-(u+1n)/2n:u/2n);throw new Error("Varint too long!")}_getLength(){if(this._dataType!==n.delimited)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(i,u,d){if((d=Math.min(this._end,d))-u>x){const O=i.subarray(u,d);return w.decode(O)}let r="",D="";for(let O=u;O<d;++O){const N=i[O];128&N?D+="%"+N.toString(16):(r+=decodeURIComponent(D)+String.fromCharCode(N),D="")}return D.length&&(r+=decodeURIComponent(D)),r}_toBytes(i,u,d){return d=Math.min(this._end,d),new Uint8Array(i.buffer,u,d-u)}}I.pool=new t.A(I,void 0,h=>{h._data=null,h._dataView=null})},67399:(J,R,m)=>{m.d(R,{C:()=>T});var p=m(8189),o=m(98877),n=(m(5922),m(3248)),w=(m(35150),m(85211)),I=(m(40707),m(76576)),h=m(47669),i=m(69473),u=m(69287),d=m(42178);class H{constructor(v,E,c){this._width=v*c,this._height=E*c,this._pixelRatio=c;const _=Math.ceil(this._width/1),y=Math.ceil(this._height/1);this._cols=_,this._rows=y,this._cells=d.y.create(_*y)}insertMetrics(v){this._markMetrics(v)}hasCollision(v){let E=0;for(const{transformedX:c,transformedY:_,width:y,height:g}of v.bounds)switch(this._collide(c*this._pixelRatio,_*this._pixelRatio,y*this._pixelRatio,g*this._pixelRatio)){case 2:return 2;case 1:E++}return E===v.bounds.length?1:0}getCellId(v,E){return v+E*this._cols}has(v){return this._cells.has(v)}hasRange(v,E){return this._cells.hasRange(v,E)}set(v){this._cells.set(v)}setRange(v,E){this._cells.setRange(v,E)}_collide(v,E,c,_){const y=v-c/2,g=E-_/2,A=y+c,P=g+_;if(A<0||P<0||y>this._width||g>this._height)return 1;const Z=(0,u.qE)(Math.floor(y/1),0,this._cols),k=(0,u.qE)(Math.floor(g/1),0,this._rows),V=(0,u.qE)(Math.ceil(A/1),0,this._cols),W=(0,u.qE)(Math.ceil(P/1),0,this._rows);for(let U=k;U<=W;U++)for(let z=Z;z<=V;z++){const K=this.getCellId(z,U);if(this.has(K))return 2}return 0}_mark(v,E,c,_){const y=v-c/2,g=E-_/2,A=y+c,P=g+_,Z=(0,u.qE)(Math.floor(y/1),0,this._cols),k=(0,u.qE)(Math.floor(g/1),0,this._rows),V=(0,u.qE)(Math.ceil(A/1),0,this._cols),W=(0,u.qE)(Math.ceil(P/1),0,this._rows);for(let U=k;U<=W;U++)for(let z=Z;z<=V;z++){const K=this.getCellId(z,U);this.set(K)}return!1}_markMetrics(v){for(const{transformedX:E,transformedY:c,width:_,height:y}of v.bounds)this._mark(E*this._pixelRatio,c*this._pixelRatio,_*this._pixelRatio,y*this._pixelRatio)}}const j=254,F=255;function X(b,v){const E=b.children.slice();E.sort((c,_)=>c.tileAge-_.tileAge),E.forEach(c=>{null!=c.labelMetrics&&c.isReady&&v(c,c.labelMetrics)})}function et(b,v){return(!b.minScale||b.minScale>=v)&&(!b.maxScale||b.maxScale<=v)}class it{run(v,E,c,_){const y=[];for(let g=v.length-1;g>=0;g--){const A=v[g];A.labelingCollisionInfos?.length&&y.push(...A.labelingCollisionInfos)}(0,n.A)("esri-2d-update-debug")&&y.length&&console.debug("CollisionEngine.run"),this._transformMetrics(y),this._runCollision(y,E,c,_);for(const g of y)g.container.requestRender()}_runCollision(v,E,c,_){const[y,g]=E.state.size,A=new H(y,g,E.pixelRatio);for(const{container:P,deconflictionEnabled:Z,visible:k}of v){const V=P.attributeView;Z?k?(this._prepare(P),this._collideVisible(A,P,c,_),this._collideInvisible(A,P)):X(P,(W,U)=>{for(const z of U)V.setLabelMinZoom(z.entityTexel,F)}):X(P,(W,U)=>{for(const z of U)et(z,c)?(V.setLabelMinZoom(z.entityTexel,0),k&&A.insertMetrics(z)):V.setLabelMinZoom(z.entityTexel,j)})}}_isFiltered(v,E,c){const _=E.getFilterFlags(v);return!(_&h.LY&&(null==c.featureEffect||c.featureEffect.excludedLabelsVisible||_&h.g0))}_prepare(v){const E=v.attributeView,c=new Set;X(v,(_,y)=>{for(const g of y){const A=g.entityTexel;if(!c.has(A)){if(c.add(A),this._isFiltered(A,E,v.layerView)){E.setLabelMinZoom(A,j);continue}0!==E.getLabelMinZoom(A)?E.setLabelMinZoom(A,F):E.setLabelMinZoom(A,0)}}})}_collideVisible(v,E,c,_){const y=E.attributeView,g=new Set;X(E,(A,P)=>{for(let Z=0;Z<P.length;Z++){const k=P[Z].entityTexel;if(g.has(k))continue;if(A.key.level!==_){y.setLabelMinZoom(k,j),g.add(k);continue}if(!et(P[Z],c)){y.setLabelMinZoom(k,j),g.add(k);continue}if(0!==y.getLabelMinZoom(k)){g.add(k);continue}let V=!1,W=!0;const U=Z;let z=Z;for(;z<P.length;z++){const K=P[z];if(K.entityTexel!==k)break;if(!V)switch(v.hasCollision(K)){case 1:break;case 2:V=!0,W=!1;break;case 0:W=!1}}if(!V)for(let K=U;K<z;K++)v.insertMetrics(P[K]);Z=z-1,W||(g.add(k),y.setLabelMinZoom(k,V?j:0))}})}_collideInvisible(v,E){const c=E.attributeView,_=new Set;X(E,(y,g)=>{for(let A=0;A<g.length;A++){const P=g[A].entityTexel;if(_.has(P))continue;if(c.getLabelMinZoom(P)!==F){_.add(P);continue}let Z=!1,k=!0;const V=A;let W=A;for(;W<g.length;W++){const U=g[W];if(U.entityTexel!==P)break;if(!Z)switch(v.hasCollision(U)){case 1:break;case 2:Z=!0,k=!1;break;case 0:k=!1}}if(!Z)for(let U=V;U<W;U++)v.insertMetrics(g[U]);A=W-1,k||(_.add(P),c.setLabelMinZoom(P,Z?F:0))}})}_transformMetrics(v){for(const{container:E,geometryType:c,vvEvaluators:_}of v)X(E,(y,g)=>{const A=E.attributeView,P=y.transforms.labelMat2d;P[4]=Math.round(P[4]),P[5]=Math.round(P[5]);const Z="polyline"===c;for(const k of g){const{entityTexel:V,anchorX:W,anchorY:U}=k;let z=k.referenceBounds?.size??0;const K=_[0];if(null!=K){const $=K(A.getVisualVariableData(V,i.Gn.SIZE));z=isNaN($)||null==$||$===1/0?z:$}const at=h.C2+z/2,st=k.directionX*at,lt=k.directionY*at;for(const $ of k.bounds){let nt=W,ot=U;if(Z){const a=W+$.x+st,S=U+$.y+lt;nt=P[0]*a+P[2]*S+P[4],ot=P[1]*a+P[3]*S+P[5];const e=ot;$.transformedX=Math.floor(nt),$.transformedY=Math.floor(e)}else{nt=P[0]*W+P[2]*U+P[4],ot=P[1]*W+P[3]*U+P[5];const S=ot+$.y+lt;$.transformedX=nt+$.x+st,$.transformedY=S}}}})}}let T=class extends o.A{constructor(b){super(b),this._lastUpdate=0,this.collisionEngine=new it,this.lastUpdateId=-1,this.updateRequested=!1,this.view=null}get updating(){return(0,n.A)("esri-2d-log-updating")&&console.log(`Updating LabelManager ${this.updateRequested}:\n-> updateRequested: ${this.updateRequested}`),this.updateRequested}update(b){const v=performance.now();v-this._lastUpdate>=32?(this._lastUpdate=v,this.doUpdate(b)):this.requestUpdate()}viewChange(){this.requestUpdate()}requestUpdate(){this.updateRequested||(this.updateRequested=!0,this.view?.requestUpdate())}processUpdate(b){this.updateRequested&&(this.updateRequested=!1,this.update(b))}doUpdate(b){const v=this.view;if(v)try{const E=b.state.scale,c=v.featuresTilingScheme.getClosestInfoForScale(E).level;this.collisionEngine.run(v.allLayerViews.items,b,E,c)}catch{}}};(0,p._)([(0,w.MZ)()],T.prototype,"updateRequested",void 0),(0,p._)([(0,w.MZ)()],T.prototype,"updating",null),(0,p._)([(0,w.MZ)()],T.prototype,"view",void 0),T=(0,p._)([(0,I.$)("esri.views.2d.LabelManager")],T)},20904:(J,R,m)=>{var p,o,t,n;m.d(R,{$q:()=>t,NP:()=>p,kh:()=>o}),(n=p||(p={}))[n.FILL=1]="FILL",n[n.LINE=2]="LINE",n[n.SYMBOL=3]="SYMBOL",n[n.CIRCLE=4]="CIRCLE",function(n){n[n.BACKGROUND=0]="BACKGROUND",n[n.FILL=1]="FILL",n[n.OUTLINE=2]="OUTLINE",n[n.LINE=3]="LINE",n[n.ICON=4]="ICON",n[n.CIRCLE=5]="CIRCLE",n[n.TEXT=6]="TEXT",n[n.TILEINFO=7]="TILEINFO"}(o||(o={})),function(n){n[n.PAINTER_CHANGED=0]="PAINTER_CHANGED",n[n.LAYOUT_CHANGED=1]="LAYOUT_CHANGED",n[n.LAYER_CHANGED=2]="LAYER_CHANGED",n[n.LAYER_REMOVED=3]="LAYER_REMOVED",n[n.SPRITES_CHANGED=4]="SPRITES_CHANGED"}(t||(t={}))},38730:(J,R,m)=>{m.d(R,{U:()=>w});var p=m(15590),o=m(42425),t=m(3248),n=m(54949);const L=!!(0,t.A)("esri-2d-profiler");class w{constructor(I,h){if(this._events=new o.A,this._entries=new Map,this._timings=new p.A(10),this._currentContainer=null,this._currentPass=null,this._currentBrush=null,this._currentSummary=null,!L)return;this._ext=(0,n._R)(I.gl,{}),this._debugOutput=h;const i=I.gl;if(!this.enableCommandLogging)return;let u;for(u in i)if("function"==typeof i[u]){const d=i[u],r=u.includes("draw");i[u]=(...D)=>(this._events.emit("command",{container:this._currentContainer,pass:this._currentPass,brush:this._currentBrush,method:u,args:D,isDrawCommand:r}),this._currentSummary&&(this._currentSummary.commands++,r&&this._currentSummary.drawCommands++),d.apply(i,D))}}get enableCommandLogging(){return!("object"==typeof L&&L.disableCommands)}recordContainerStart(I){L&&(this._currentContainer=I)}recordContainerEnd(){L&&(this._currentContainer=null)}recordPassStart(I){L&&(this._currentPass=I,this._initSummary())}recordPassEnd(){L&&(this._currentPass=null,this._emitSummary())}recordBrushStart(I){L&&(this._currentBrush=I)}recordBrushEnd(){L&&(this._currentBrush=null)}recordStart(I){if(L&&null!=this._ext){if(this._entries.has(I)){const i=this._entries.get(I),u=this._ext.resultAvailable(i.query),d=this._ext.disjoint();if(u&&!d){const r=this._ext.getResult(i.query)/1e6;let D=0;if(null!=this._timings.enqueue(r)){const H=this._timings.entries,j=H.length;let F=0;for(const q of H)F+=q;D=F/j}const O=r.toFixed(2),N=D?D.toFixed(2):"--";this.enableCommandLogging?(console.groupCollapsed(`Frame report for ${I}, ${O} ms (${N} last 10 avg)\n${i.commandsLen} Commands (${i.drawCommands} draw)`),console.log("RenderPass breakdown: "),console.table(i.summaries),console.log("Commands: ",i.commands),console.groupEnd()):console.log(`Frame report for ${I}, ${O} ms (${N} last 10 avg)`),this._debugOutput.innerHTML=`${O} (${N})`}for(const r of i.handles)r.remove();this._ext.deleteQuery(i.query),this._entries.delete(I)}const h={name:I,query:this._ext.createQuery(),commands:[],commandsLen:0,drawCommands:0,summaries:[],handles:[]};this.enableCommandLogging&&(h.handles.push(this._events.on("command",i=>{h.commandsLen++,h.commands.push(i),i.isDrawCommand&&h.drawCommands++})),h.handles.push(this._events.on("summary",i=>{h.summaries.push(i)}))),this._ext.beginTimeElapsed(h.query),this._entries.set(I,h)}}recordEnd(I){L&&null!=this._ext&&this._entries.has(I)&&this._ext.endTimeElapsed()}_initSummary(){this.enableCommandLogging&&(this._currentSummary={container:this._currentContainer,pass:this._currentPass,drawCommands:0,commands:0})}_emitSummary(){this.enableCommandLogging&&this._currentSummary&&this._events.emit("summary",this._currentSummary)}}},62416:(J,R,m)=>{m.d(R,{L:()=>I});var p=m(8189),o=m(84035),t=m(3902),n=m(875);class L extends o.ZA{}(0,p._)([(0,o.C5)(0,t.ZY)],L.prototype,"position",void 0);class x extends o.k2{}(0,p._)([(0,o.Pi)(t.z7)],x.prototype,"layerTexture",void 0),(0,p._)([(0,o.Pi)(t.z7)],x.prototype,"backbufferTexture",void 0),(0,p._)([(0,o.Pi)(t.nt)],x.prototype,"opacity",void 0),(0,p._)([(0,o.Pi)(t.nt)],x.prototype,"inFadeOpacity",void 0);class I extends o.A{constructor(){super(...arguments),this.type="BlendShader"}vertex(T){return{uv:T.position,glPosition:new t.Zb((0,n.nb)(T.position),0,1)}}fragment(T){const b=new o.mm,v=(0,t.US)(this.config.layerTexture,T.uv),E=(0,t.US)(this.config.backbufferTexture,T.uv),c=(0,t.Tk)((0,t.LC)(v.a,new t.nt(0)),v.rgb,v.rgb.divide(v.a)),_=(0,t.Tk)((0,t.LC)(E.a,new t.nt(0)),E.rgb,E.rgb.divide(E.a)),y=this.config.opacity.multiply(v.a),g=E.a;switch(this.blendMode){case"destination-over":b.fragColor=new t.Zb(c.multiply(y).multiply((0,n.zb)(g)).add(_.multiply(g)),y.add(g).subtract(y.multiply(g)));break;case"source-in":{const A=new t.Zb(c.multiply(y).multiply(g),y.multiply(g)),P=new t.Zb(_.multiply(g),g).multiply((0,n.zb)(this.config.opacity)).multiply(this.config.inFadeOpacity);b.fragColor=A.add(P)}break;case"destination-in":{const A=new t.Zb(_.multiply(g).multiply(y),g.multiply(y)),P=new t.Zb(_.multiply(g),g).multiply(new t.Zb((0,n.zb)(this.config.opacity).multiply(this.config.inFadeOpacity)));b.fragColor=A.add(P)}break;case"source-out":b.fragColor=new t.Zb(c.multiply(y).multiply((0,n.zb)(g)),y.multiply((0,n.zb)(g)));break;case"destination-out":b.fragColor=new t.Zb(_.multiply(g).multiply((0,n.zb)(y)),g.multiply((0,n.zb)(y)));break;case"source-atop":b.fragColor=new t.Zb(c.multiply(y).multiply(g).add(_.multiply(g.multiply((0,n.zb)(y)))),g);break;case"destination-atop":b.fragColor=new t.Zb(c.multiply(y.multiply((0,n.zb)(g))).add(_.multiply(g).multiply(y)),y);break;case"xor":b.fragColor=new t.Zb(c.multiply(y.multiply((0,n.zb)(g))).add(_.multiply(g.multiply((0,n.zb)(y)))),y.multiply((0,n.zb)(g)).add(g.multiply((0,n.zb)(y))));break;case"multiply":b.fragColor=new t.Zb(c.multiply(y).multiply(_.multiply(g)).add(c.multiply(y).multiply((0,n.zb)(g))).add(_.multiply(g).multiply((0,n.zb)(y))),y.add(g.multiply((0,n.zb)(y))));break;case"screen":b.fragColor=new t.Zb(c.add(_).subtract(c.multiply(_)).multiply(y.multiply(g)).add(c.multiply(y).multiply((0,n.zb)(g))).add(_.multiply(g).multiply((0,n.zb)(y))),y.add(g.multiply((0,n.zb)(y))));break;case"overlay":{const A=new t.eB(i(_.r,c.r),i(_.g,c.g),i(_.b,c.b));b.fragColor=h(A,c,_,y,g)}break;case"darken":{const A=(0,t.jk)(c,_);b.fragColor=h(A,c,_,y,g)}break;case"lighter":b.fragColor=new t.Zb(c.multiply(y).add(_.multiply(g)),y.add(g));break;case"lighten":{const A=(0,t.T9)(c,_);b.fragColor=h(A,c,_,y,g)}break;case"color-dodge":{const A=(0,t.qE)(new t.eB(u(_.r,c.r),u(_.g,c.g),u(_.b,c.b)),new t.eB(0),new t.eB(1));b.fragColor=h(A,c,_,y,g)}break;case"color-burn":{const A=new t.eB(d(_.r,c.r),d(_.g,c.g),d(_.b,c.b));b.fragColor=h(A,c,_,y,g)}break;case"hard-light":{const A=new t.eB(r(_.r,c.r),r(_.g,c.g),r(_.b,c.b));b.fragColor=h(A,c,_,y,g)}break;case"soft-light":{const A=new t.eB(D(_.r,c.r),D(_.g,c.g),D(_.b,c.b));b.fragColor=h(A,c,_,y,g)}break;case"difference":{const A=(0,t.tn)(_.subtract(c));b.fragColor=h(A,c,_,y,g)}break;case"exclusion":{const A=c.add(_).subtract(new t.nt(2).multiply(c).multiply(_));b.fragColor=h(A,c,_,y,g)}break;case"invert":b.fragColor=new t.Zb(new t.eB(1).subtract(_).multiply(y).multiply(g).add(_.multiply(g).multiply((0,n.zb)(y))),g);break;case"vivid-light":{const A=new t.eB((0,t.qE)(O(_.r,c.r),new t.nt(0),new t.nt(1)),(0,t.qE)(O(_.g,c.g),new t.nt(0),new t.nt(1)),(0,t.qE)(O(_.b,c.b),new t.nt(0),new t.nt(1)));b.fragColor=h(A,c,_,y,g)}break;case"hue":{const A=et(c,_,_);b.fragColor=h(A,c,_,y,g)}break;case"saturation":{const A=et(_,c,_);b.fragColor=h(A,c,_,y,g)}break;case"color":{const A=X(c,_);b.fragColor=h(A,c,_,y,g)}break;case"luminosity":{const A=X(_,c);b.fragColor=h(A,c,_,y,g)}break;case"plus":b.fragColor=(0,t.qE)(new t.Zb(v.r.add(_.r),v.g.add(_.g),v.b.add(_.b),y.add(g)),new t.Zb(0),new t.Zb(1));break;case"minus":b.fragColor=new t.Zb((0,t.qE)(new t.eB(_.r.subtract(v.r),_.g.subtract(v.g),_.b.subtract(v.b)),new t.eB(0),new t.eB(1)),g.multiply(y));break;case"average":{const A=_.add(c).divide(2);b.fragColor=h(A,c,_,y,g)}break;case"reflect":{const A=(0,t.qE)(new t.eB(it(_.r,c.r),it(_.g,c.g),it(_.b,c.b)),new t.eB(0),new t.eB(1));b.fragColor=h(A,c,_,y,g)}break;default:b.fragColor=v.multiply(this.config.opacity)}return b}}function h(M,T,b,v,E){return new t.Zb(M.multiply(v).multiply(E).add(T.multiply(v).multiply((0,n.zb)(E))).add(b.multiply(E).multiply((0,n.zb)(v))),v.add(E.multiply((0,n.zb)(v))))}function i(M,T){return new t.nt(1).subtract((0,t.PM)(new t.nt(.5),T)).multiply((0,n.zb)(new t.nt(2).multiply((0,n.zb)(T).multiply((0,n.zb)(M))))).add((0,t.PM)(new t.nt(.5),T).multiply(new t.nt(2).multiply(T).multiply(M)))}function u(M,T){return(0,t.Tk)((0,t.LC)(M,new t.nt(0)),new t.nt(0),(0,t.Tk)((0,t.LC)(T,new t.nt(1)),new t.nt(1),(0,t.jk)(new t.nt(1),M.divide(new t.nt(1).subtract(T)))))}function d(M,T){return(0,t.Tk)((0,t.LC)(M,new t.nt(1)),new t.nt(1),(0,t.Tk)((0,t.LC)(T,new t.nt(0)),new t.nt(0),(0,n.zb)((0,t.jk)(new t.nt(1),(0,n.zb)(M).divide(T)))))}function r(M,T){return new t.nt(1).subtract((0,t.PM)(new t.nt(.5),T)).multiply(new t.nt(2).multiply(T).multiply(M)).add((0,t.PM)(new t.nt(.5),T).multiply((0,n.zb)(new t.nt(2).multiply((0,n.zb)(T).multiply((0,n.zb)(M))))))}function D(M,T){return(0,t.j1)([(0,t.$5)(T,new t.nt(.5)),()=>{const b=new t.nt(2).multiply(T),v=(0,n.zb)(b),E=(0,n.zb)(M);return M.subtract(v.multiply(M).multiply(E))}],[(0,t.$5)(M,new t.nt(.25)),()=>{const b=new t.nt(2).multiply(T),v=(0,n.p8)(b).multiply(M),E=new t.nt(16).multiply(M).subtract(new t.nt(12)).multiply(M).add(new t.nt(3));return M.add(v.multiply(E))}],[!0,()=>{const b=new t.nt(2).multiply(T),v=(0,n.p8)(b),E=(0,t.RZ)(M).subtract(M);return M.add(v.multiply(E))}])}function O(M,T){const b=(0,n.zb)((0,t.PM)(new t.nt(.5),T)).multiply(d(M,new t.nt(2).multiply(T))),v=(0,t.PM)(new t.nt(.5),T).multiply(u(M,new t.nt(2).multiply((0,n.zy)(T,.5))));return b.add(v)}function N(M){return(0,t.jk)((0,t.jk)(M.r,M.g),M.b)}function H(M){return(0,t.T9)((0,t.T9)(M.r,M.g),M.b)}function j(M){return(0,t.Om)(M,new t.eB(.3,.59,.11))}function F(M){return H(M).subtract(N(M))}function X(M,T){const b=j(M),v=j(T).subtract(b);return function q(M){const T=j(M),b=N(M),v=H(M);return(0,t.j1)([(0,t.Xe)(b,new t.nt(0)),()=>{const E=M.subtract(T).multiply(T),c=T.subtract(b);return T.add(E.divide(c))}],[(0,t.MM)(v,new t.nt(1)),()=>{const E=M.subtract(T),c=(0,n.zb)(T),_=E.multiply(c),y=v.subtract(T);return T.add(_.divide(y))}],[!0,M])}(M.add(new t.eB(v)))}function et(M,T,b){const v=N(M),E=F(M),c=F(T);return X((0,t.Tk)((0,t.MM)(E,new t.nt(0)),()=>M.subtract(v).multiply(c).divide(E),new t.eB(0)),b)}function it(M,T){return(0,t.Tk)((0,t.LC)(T,new t.nt(1)),T,()=>{const b=(0,n.zb)(T),v=M.multiply(M).divide(b);return(0,t.jk)(v,new t.nt(1))})}(0,p._)([o.E8],I.prototype,"blendMode",void 0),(0,p._)([(0,o.Pi)(x)],I.prototype,"config",void 0),(0,p._)([(0,p.a)(0,(0,o.hF)(L))],I.prototype,"vertex",null),(0,p._)([(0,p.a)(0,(0,o.hF)(class w extends o.HS{}))],I.prototype,"fragment",null)},9661:(J,R,m)=>{m.d(R,{K:()=>I});var p=m(8189),o=m(84035),t=m(3902);class n extends o.ZA{}(0,p._)([(0,o.C5)(0,t.ZY)],n.prototype,"position",void 0);class w extends o.k2{}(0,p._)([(0,o.Pi)(t.U)],w.prototype,"dvs",void 0);class x extends o.k2{}(0,p._)([(0,o.Pi)(t.nt)],x.prototype,"halfWidth",void 0),(0,p._)([(0,o.Pi)(t.nt)],x.prototype,"aaWidth",void 0),(0,p._)([(0,o.Pi)(t.nt)],x.prototype,"pxPerCell",void 0),(0,p._)([(0,o.Pi)(t.Zb)],x.prototype,"minorLineColor",void 0),(0,p._)([(0,o.Pi)(t.Zb)],x.prototype,"majorLineColor",void 0),(0,p._)([(0,o.Pi)(t.Ai)],x.prototype,"majorLineInterval",void 0);class I extends o.A{constructor(){super(...arguments),this.type="GridShader"}vertex(i){const u=i.position.multiply(2).subtract(1);return{gridPos:this.transform.dvs.multiply(new t.eB(u,1)).xy,glPosition:new t.Zb(u,0,1)}}fragment(i){const u=(0,t.tn)(i.gridPos),d=(0,t.jc)(u),r=(0,t.jk)(d.x,new t.nt(1).subtract(d.x)),D=(0,t.jk)(d.y,new t.nt(1).subtract(d.y)),O=new t.ZY(r,D).multiply(this.config.pxPerCell).subtract(this.config.halfWidth),N=(0,t.jk)(O.x,O.y),H=new t.nt(1).subtract((0,t.TF)(new t.nt(0),this.config.aaWidth,N)),j=new t.Ai((0,t.LI)(u.x)),F=new t.Ai((0,t.LI)(u.y)),q=new t.nt((0,t.Gb)(j,this.config.majorLineInterval)),X=new t.nt((0,t.Gb)(F,this.config.majorLineInterval)),et=(0,t.Tk)((0,t.Xe)(O.x,O.y),q,X),it=(0,t.MM)((0,t.lw)((0,t.PM)(O.x,this.config.aaWidth),(0,t.PM)(O.y,this.config.aaWidth)),new t.nt(.5)),M=(0,t.jk)(q,X),T=(0,t.Tk)(it,M,et),b=(0,t.jh)(this.config.majorLineColor,this.config.minorLineColor,(0,t.jk)(T,new t.nt(1))),v=new o.mm;return v.fragColor=b.multiply(H),v}}(0,p._)([(0,o.Pi)(w)],I.prototype,"transform",void 0),(0,p._)([(0,o.Pi)(x)],I.prototype,"config",void 0),(0,p._)([(0,p.a)(0,(0,o.hF)(n))],I.prototype,"vertex",null),(0,p._)([(0,p.a)(0,(0,o.hF)(class L extends o.HS{}))],I.prototype,"fragment",null)},48875:(J,R,m)=>{m.d(R,{u:()=>I});var p=m(8189),o=m(84035),t=m(3902),n=m(90731);class L extends o.ZA{}(0,p._)([(0,o.C5)(0,t.ZY)],L.prototype,"position",void 0);class x extends o.k2{}(0,p._)([(0,o.Pi)(t.z7)],x.prototype,"readbackTexture",void 0),(0,p._)([(0,o.Pi)(t.z7)],x.prototype,"maskTexture",void 0),(0,p._)([(0,o.Pi)(t.z7)],x.prototype,"overlayTexture",void 0),(0,p._)([(0,o.Pi)(t.Zb)],x.prototype,"background",void 0),(0,p._)([(0,o.Pi)(t.Zb)],x.prototype,"drawPos",void 0),(0,p._)([(0,o.Pi)(t.nt)],x.prototype,"maskEnabled",void 0),(0,p._)([(0,o.Pi)(t.nt)],x.prototype,"overlayEnabled",void 0);class I extends o.A{constructor(){super(...arguments),this.type="MagnifierShader"}vertex(u){const d=u.position,r=u.position.subtract(new t.ZY(.5)).multiply(this.config.drawPos.zw),D=this.config.drawPos.xy.add(r);return{glPosition:new t.Zb(D,0,1),texCoord:d}}fragment(u){let d=(0,t.US)(this.config.readbackTexture,function h(i){const u=i.multiply(new t.ZY(2)).subtract(1);return(0,t.Tk)((0,t.LC)(u.x,new t.nt(0)).and((0,t.LC)(u.y,new t.nt(0))),new t.ZY(.5),()=>{const d=(0,t.rY)(u.y,u.x),r=(0,t.n7)((0,t.Bw)(u),new t.nt(n.eo)),D=new t.ZY((0,t.gn)(d),(0,t.F8)(d));return r.multiply(D).multiply(new t.ZY(.5)).add(new t.nt(.5))})}(u.texCoord));d=d.add(new t.nt(1).subtract(d.a)).multiply(this.config.background);const r=(0,t.Tk)((0,t.LC)(this.config.maskEnabled,new t.nt(1)),(0,t.US)(this.config.maskTexture,u.texCoord).a,new t.nt(1));d=d.multiply(r);const D=(0,t.Tk)((0,t.LC)(this.config.overlayEnabled,new t.nt(1)),(0,t.US)(this.config.overlayTexture,u.texCoord),new t.Zb(0)),O=new o.mm;return O.fragColor=D.add(new t.nt(1).subtract(D.a).multiply(d)),O}}(0,p._)([(0,o.Pi)(x)],I.prototype,"config",void 0),(0,p._)([(0,p.a)(0,(0,o.hF)(L))],I.prototype,"vertex",null),(0,p._)([(0,p.a)(0,(0,o.hF)(class w extends o.HS{}))],I.prototype,"fragment",null)},88690:(J,R,m)=>{m.d(R,{x:()=>x});var p=m(8189),o=m(84035),t=m(3902);class n extends o.ZA{}(0,p._)([(0,o.C5)(0,t.ZY)],n.prototype,"position",void 0);class w extends o.k2{}(0,p._)([(0,o.Pi)(t.z7)],w.prototype,"layerTexture",void 0),(0,p._)([(0,o.Pi)(t.nt)],w.prototype,"opacity",void 0);class x extends o.A{constructor(){super(...arguments),this.type="OpacityShader"}vertex(h){return{uv:h.position,glPosition:new t.Zb(h.position.subtract(new t.ZY(.5)).multiply(2),0,1)}}fragment(h){const i=new o.mm;return i.fragColor=(0,t.US)(this.config.layerTexture,h.uv).multiply(this.config.opacity),i}}(0,p._)([(0,o.Pi)(w)],x.prototype,"config",void 0),(0,p._)([(0,p.a)(0,(0,o.hF)(n))],x.prototype,"vertex",null),(0,p._)([(0,p.a)(0,(0,o.hF)(class L extends o.HS{}))],x.prototype,"fragment",null)},6115:(J,R,m)=>{m.d(R,{J:()=>o});var p=m(73539);const o={shaders:{vertexShader:(0,p.Q)("bitBlit/bitBlit.vert"),fragmentShader:(0,p.Q)("bitBlit/bitBlit.frag")},attributes:new Map([["a_pos",0],["a_tex",1]])}},63367:(J,R,m)=>{m.d(R,{G:()=>t,Z:()=>o});var p=m(73539);const o={shaders:{vertexShader:(0,p.Q)("highlight/textured.vert"),fragmentShader:(0,p.Q)("highlight/highlight.frag")},attributes:new Map([["a_position",0],["a_texcoord",1]])},t={shaders:{vertexShader:(0,p.Q)("highlight/textured.vert"),fragmentShader:(0,p.Q)("highlight/blur.frag")},attributes:new Map([["a_position",0],["a_texcoord",1]])}},64559:(J,R,m)=>{m.d(R,{P:()=>o});var p=m(73539);const o={shaders:{vertexShader:(0,p.Q)("stencil/stencil.vert"),fragmentShader:(0,p.Q)("stencil/stencil.frag")},attributes:new Map([["a_pos",0]])}},18800:(J,R,m)=>{m.d(R,{A:()=>S});var p=m(10467),o=m(8189),t=m(20351),n=m(98877),L=m(11432),w=m(85211),i=(m(3248),m(35150),m(40707),m(76576)),u=m(1749),d=m(6126),r=m(11757),D=m(67685),O=m(19824);const N="esri-zoom-box",H={container:`${N}__container`,overlay:`${N}__overlay`,background:`${N}__overlay-background`,box:`${N}__outline`};let F=class extends n.A{constructor(s){super(s),this._container=null,this._overlay=null,this._backgroundShape=null,this._boxShape=null,this._box={x:0,y:0,width:0,height:0},this._rafId=null,this._redraw=this._redraw.bind(this)}destroy(){this.view=null}set view(s){this.removeAllHandles(),this._destroyOverlay(),this._set("view",s),s&&this.addHandles([s.on("drag",["Shift"],e=>this._handleDrag(e,1),O.o.INTERNAL),s.on("drag",["Shift","Control"],e=>this._handleDrag(e,-1),O.o.INTERNAL)])}_start(){this._createContainer(),this._createOverlay(),this.navigation.begin()}_update(s,e,l,f){this._box.x=s,this._box.y=e,this._box.width=l,this._box.height=f,this._rafId||(this._rafId=requestAnimationFrame(this._redraw))}_end(s,e,l,f,C){const B=this.view,G=B.toMap((0,D.tc)(s+.5*l,e+.5*f));let Q=Math.max(l/B.width,f/B.height);-1===C&&(Q=1/Q),this._destroyOverlay(),this.navigation.end(),B.goTo({center:G,scale:B.scale*Q},{animationMode:"always",duration:(0,r.s)()})}_updateBox(s,e,l,f){const C=this._boxShape;C.setAttributeNS(null,"x",""+s),C.setAttributeNS(null,"y",""+e),C.setAttributeNS(null,"width",""+l),C.setAttributeNS(null,"height",""+f),C.setAttributeNS(null,"class",H.box)}_updateBackground(s,e,l,f){this._backgroundShape.setAttributeNS(null,"d",this._toSVGPath(s,e,l,f,this.view.width,this.view.height))}_createContainer(){const s=document.createElement("div");s.className=H.container,this.view.root.appendChild(s),this._container=s}_createOverlay(){const s=this.view.width,e=this.view.height,l=document.createElementNS("http://www.w3.org/2000/svg","path");l.setAttributeNS(null,"d","M 0 0 L "+s+" 0 L "+s+" "+e+" L 0 "+e+" Z"),l.setAttributeNS(null,"class",H.background);const f=document.createElementNS("http://www.w3.org/2000/svg","rect"),C=document.createElementNS("http://www.w3.org/2000/svg","svg");C.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),C.setAttributeNS(null,"class",H.overlay),C.appendChild(l),C.appendChild(f),this._container.appendChild(C),this._backgroundShape=l,this._boxShape=f,this._overlay=C}_destroyOverlay(){this._container&&this._container.parentNode&&this._container.parentNode.removeChild(this._container),this._container=this._backgroundShape=this._boxShape=this._overlay=null}_toSVGPath(s,e,l,f,C,B){const G=s+l,Q=e+f;return"M 0 0 L "+C+" 0 L "+C+" "+B+" L 0 "+B+" ZM "+s+" "+e+" L "+s+" "+Q+" L "+G+" "+Q+" L "+G+" "+e+" Z"}_handleDrag(s,e){const l=s.x,f=s.y,C=s.origin.x,B=s.origin.y;let G,Q,Y,tt;switch(l>C?(G=C,Y=l-C):(G=l,Y=C-l),f>B?(Q=B,tt=f-B):(Q=f,tt=B-f),s.action){case"start":this._start();break;case"update":this._update(G,Q,Y,tt);break;case"end":this._end(G,Q,Y,tt,e)}s.stopPropagation()}_redraw(){if(!this._rafId||(this._rafId=null,!this._overlay))return;const{x:s,y:e,width:l,height:f}=this._box;this._updateBox(s,e,l,f),this._updateBackground(s,e,l,f),this._rafId=requestAnimationFrame(this._redraw)}};(0,o._)([(0,w.MZ)()],F.prototype,"navigation",void 0),(0,o._)([(0,w.MZ)()],F.prototype,"view",null),F=(0,o._)([(0,i.$)("esri.views.2d.navigation.ZoomBox")],F);const q=F;var X=m(48900),et=m(28714),it=m(25866);class M{constructor(e){this._gain=e,this.lastValue=void 0,this.filteredDelta=void 0}update(e){if(this.hasLastValue()){const l=this.computeDelta(e);this._updateDelta(l)}this.lastValue=e}reset(){this.lastValue=void 0,this.filteredDelta=void 0}hasLastValue(){return void 0!==this.lastValue}hasFilteredDelta(){return void 0!==this.filteredDelta}computeDelta(e){return void 0===this.lastValue?NaN:e-this.lastValue}_updateDelta(e){this.filteredDelta=void 0!==this.filteredDelta?(1-this._gain)*this.filteredDelta+this._gain*e:e}}class T{constructor(e,l,f){this._initialVelocity=e,this._stopVelocity=l,this._friction=f,this._duration=Math.abs(Math.log(Math.abs(this._initialVelocity)/this._stopVelocity)/Math.log(1-this._friction))}get duration(){return this._duration}isFinished(e){return e>this.duration}get friction(){return this._friction}value(e){return this.valueFromInitialVelocity(this._initialVelocity,e)}valueDelta(e,l){const f=this.value(e);return this.value(e+l)-f}valueFromInitialVelocity(e,l){l=Math.min(l,this.duration);const f=1-this.friction;return e*(f**l-1)/Math.log(f)}}class b extends T{constructor(e,l,f,C,B){super(e,l,f),this._sceneVelocity=C,this.direction=B}value(e){return super.valueFromInitialVelocity(this._sceneVelocity,e)}}class v{constructor(e=300,l=12,f=.84){this._minimumInitialVelocity=e,this._stopVelocity=l,this._friction=f,this.enabled=!0,this._time=new M(.6),this._screen=[new M(.4),new M(.4)],this._scene=[new M(.6),new M(.6),new M(.6)],this._tmpDirection=(0,it.vt)()}add(e,l,f){if(this.enabled){if(this._time.hasLastValue()&&this._time.computeDelta(f)<.015)return;this._screen[0].update(e[0]),this._screen[1].update(e[1]),this._scene[0].update(l[0]),this._scene[1].update(l[1]),this._scene[2].update(l[2]),this._time.update(f)}}reset(){this._screen[0].reset(),this._screen[1].reset(),this._scene[0].reset(),this._scene[1].reset(),this._scene[2].reset(),this._time.reset()}evaluateMomentum(){if(!this.enabled||!this._screen[0].hasFilteredDelta()||!this._time.hasFilteredDelta())return null;const e=this._screen[0].filteredDelta,l=this._screen[1].filteredDelta,f=null==e||null==l?0:Math.sqrt(e*e+l*l),C=this._time.filteredDelta,B=null==C||null==f?0:f/C;return Math.abs(B)<this._minimumInitialVelocity?null:this.createMomentum(B,this._stopVelocity,this._friction)}createMomentum(e,l,f){(0,et.i)(this._tmpDirection,this._scene[0].filteredDelta??0,this._scene[1].filteredDelta??0,this._scene[2].filteredDelta??0);const C=(0,et.l)(this._tmpDirection);C>0&&(0,et.h)(this._tmpDirection,this._tmpDirection,1/C);const B=this._time.filteredDelta;return new b(e,l,f,null==B?0:C/B,this._tmpDirection)}}let E=class extends n.A{constructor(s){super(s),this.animationTime=0,this.momentumEstimator=new v(500,6,.92),this.momentum=null,this.tmpMomentum=(0,it.vt)(),this.momentumFinished=!1,this.viewpoint=new t.A({targetGeometry:new u.A,scale:0,rotation:0}),this._previousDrag=null,(0,X.z7)(()=>this.momentumFinished,()=>this.navigation.stop())}begin(s,e){this.navigation.begin(),this.momentumEstimator.reset(),this.addToEstimator(e),this._previousDrag=e}update(s,e){this.addToEstimator(e);let l=e.center.x,f=e.center.y;const C=this._previousDrag;l=C?C.center.x-l:-l,f=C?f-C.center.y:f,s.viewpoint=(0,d.aA)(this.viewpoint,s.viewpoint,[l||0,f||0]),this._previousDrag=e}end(s,e){this.addToEstimator(e),this.momentum=s.navigation.effectiveMomentumEnabled?this.momentumEstimator.evaluateMomentum():null,this.animationTime=0,this.momentum&&this.onAnimationUpdate(s),this._previousDrag=null,this.navigation.end()}addToEstimator(s){const e=s.center.x,l=s.center.y,f=(0,D.gs)(-e,l),C=(0,it.fA)(-e,l,0);this.momentumEstimator.add(f,C,.001*s.timestamp)}onAnimationUpdate(s){this.navigation.animationManager?.animateContinuous(s.viewpoint,(e,l)=>{const{momentum:f,animationTime:C,tmpMomentum:B}=this,G=.001*l;if(!(this.momentumFinished=!f||f.isFinished(C))){const Q=f.valueDelta(C,G);(0,et.h)(B,f.direction,Q),(0,d.aA)(e,e,B),s.constraints.constrainByGeometry(e)}this.animationTime+=G})}stopMomentumNavigation(){this.momentum&&(this.momentumEstimator.reset(),this.momentum=null,this.navigation.stop())}};(0,o._)([(0,w.MZ)()],E.prototype,"momentumFinished",void 0),(0,o._)([(0,w.MZ)()],E.prototype,"viewpoint",void 0),(0,o._)([(0,w.MZ)()],E.prototype,"navigation",void 0),E=(0,o._)([(0,i.$)("esri.views.2d.navigation.actions.Pan")],E);const c=E;var _=m(83953),y=m(45475),g=m(69287);class A{constructor(e=2.5,l=.01,f=.95,C=12){this._minimumInitialVelocity=e,this._stopVelocity=l,this._friction=f,this._maxVelocity=C,this.enabled=!0,this.value=new M(.8),this.time=new M(.3)}add(e,l){if(this.enabled&&null!=l){if(this.time.hasLastValue()){if(this.time.computeDelta(l)<.01)return;if(this.value.hasFilteredDelta()){const f=this.value.computeDelta(e);this.value.filteredDelta*f<0&&this.value.reset()}}this.time.update(l),this.value.update(e)}}reset(){this.value.reset(),this.time.reset()}evaluateMomentum(){if(!this.enabled||!this.value.hasFilteredDelta()||!this.time.hasFilteredDelta())return null;let e=this.value.filteredDelta/this.time.filteredDelta;return e=(0,g.qE)(e,-this._maxVelocity,this._maxVelocity),Math.abs(e)<this._minimumInitialVelocity?null:this.createMomentum(e,this._stopVelocity,this._friction)}createMomentum(e,l,f){return new T(e,l,f)}}class P extends A{constructor(e=3,l=.01,f=.95,C=12){super(e,l,f,C)}add(e,l){const f=this.value.lastValue;if(null!=f){let C=e-f;for(;C>Math.PI;)C-=2*Math.PI;for(;C<-Math.PI;)C+=2*Math.PI;e=f+C}super.add(e,l)}}class Z extends T{constructor(e,l,f){super(e,l,f)}value(e){const l=super.value(e);return Math.exp(l)}valueDelta(e,l){const f=super.value(e),C=super.value(e+l)-f;return Math.exp(C)}}class k extends A{constructor(e=2.5,l=.01,f=.95,C=12){super(e,l,f,C)}add(e,l){super.add(Math.log(e),l)}createMomentum(e,l,f){return new Z(e,l,f)}}let V=class extends n.A{constructor(s){super(s),this._animationTime=0,this._momentumFinished=!1,this._previousAngle=0,this._previousRadius=0,this._previousCenter=null,this._rotationMomentumEstimator=new P(.6,.15,.95),this._rotationDirection=1,this._startAngle=0,this._startRadius=0,this._updateTimestamp=null,this._zoomDirection=1,this._zoomMomentumEstimator=new k,this._zoomOnly=null,this.viewpoint=new t.A({targetGeometry:new u.A,scale:0,rotation:0}),this.zoomMomentum=null,this.rotateMomentum=null,this.addHandles((0,X.z7)(()=>this._momentumFinished,()=>this.navigation.stop()))}begin(s,e){this.navigation.begin(),this._rotationMomentumEstimator.reset(),this._zoomMomentumEstimator.reset(),this._zoomOnly=null,this._previousAngle=this._startAngle=e.angle,this._previousRadius=this._startRadius=e.radius,this._previousCenter=e.center,this._updateTimestamp=null,s.constraints.rotationEnabled&&this.addToRotateEstimator(0,e.timestamp),this.addToZoomEstimator(e,1)}update(s,e){null===this._updateTimestamp&&(this._updateTimestamp=e.timestamp);const l=e.angle,f=e.radius,C=e.center,B=Math.abs(180*(l-this._startAngle)/Math.PI),G=Math.abs(f-this._startRadius),Q=this._startRadius/f;if(this._previousRadius&&this._previousCenter){const Y=f/this._previousRadius;let tt=180*(l-this._previousAngle)/Math.PI;this._rotationDirection=tt>=0?1:-1,this._zoomDirection=Y>=1?1:-1,s.constraints.rotationEnabled?(null===this._zoomOnly&&e.timestamp-this._updateTimestamp>200&&(this._zoomOnly=G-B>0),null===this._zoomOnly||this._zoomOnly?tt=0:this.addToRotateEstimator(l-this._startAngle,e.timestamp)):tt=0,this.addToZoomEstimator(e,Q),this.navigation.setViewpoint([C.x,C.y],1/Y,tt,[this._previousCenter.x-C.x,C.y-this._previousCenter.y])}this._previousAngle=l,this._previousRadius=f,this._previousCenter=C}end(s){this.rotateMomentum=this._rotationMomentumEstimator.evaluateMomentum(),this.zoomMomentum=this._zoomMomentumEstimator.evaluateMomentum(),this._animationTime=0,(this.rotateMomentum||this.zoomMomentum)&&this.onAnimationUpdate(s),this.navigation.end()}addToRotateEstimator(s,e){this._rotationMomentumEstimator.add(s,.001*e)}addToZoomEstimator(s,e){this._zoomMomentumEstimator.add(e,.001*s.timestamp)}canZoomIn(s){const l=s.constraints.effectiveMaxScale;return 0===l||s.scale>l}canZoomOut(s){const l=s.constraints.effectiveMinScale;return 0===l||s.scale<l}onAnimationUpdate(s){this.navigation.animationManager?.animateContinuous(s.viewpoint,(e,l)=>{const f=!this.canZoomIn(s)&&this._zoomDirection>1||!this.canZoomOut(s)&&this._zoomDirection<1,C=!this.rotateMomentum||this.rotateMomentum.isFinished(this._animationTime),B=f||!this.zoomMomentum||this.zoomMomentum.isFinished(this._animationTime),G=.001*l;if(this._momentumFinished=C&&B,!this._momentumFinished){const Q=this.rotateMomentum?Math.abs(this.rotateMomentum.valueDelta(this._animationTime,G))*this._rotationDirection*180/Math.PI:0;let Y=this.zoomMomentum?Math.abs(this.zoomMomentum.valueDelta(this._animationTime,G)):1;const tt=(0,y.vt)(),rt=(0,y.vt)();if(this._previousCenter){(0,_.hZ)(tt,this._previousCenter.x,this._previousCenter.y),(0,d.b8)(rt,s.size,s.padding),(0,_.WQ)(tt,tt,rt);const{constraints:ht,scale:ut}=s,dt=ut*Y;Y<1&&!ht.canZoomInTo(dt)?(Y=ut/ht.effectiveMaxScale,this.zoomMomentum=null,this.rotateMomentum=null):Y>1&&!ht.canZoomOutTo(dt)&&(Y=ut/ht.effectiveMinScale,this.zoomMomentum=null,this.rotateMomentum=null),(0,d.WK)(e,s.viewpoint,Y,Q,tt,s.size),s.constraints.constrainByGeometry(e)}}this._animationTime+=G})}stopMomentumNavigation(){(this.rotateMomentum||this.zoomMomentum)&&(this.rotateMomentum&&(this._rotationMomentumEstimator.reset(),this.rotateMomentum=null),this.zoomMomentum&&(this._zoomMomentumEstimator.reset(),this.zoomMomentum=null),this.navigation.stop())}};(0,o._)([(0,w.MZ)()],V.prototype,"_momentumFinished",void 0),(0,o._)([(0,w.MZ)()],V.prototype,"viewpoint",void 0),(0,o._)([(0,w.MZ)()],V.prototype,"navigation",void 0),V=(0,o._)([(0,i.$)("esri.views.2d.navigation.actions.Pinch")],V);const W=V,U=(0,y.vt)(),z=(0,y.vt)();let K=class extends n.A{constructor(s){super(s),this._previousCenter=(0,y.vt)(),this.viewpoint=new t.A({targetGeometry:new u.A,scale:0,rotation:0})}begin(s,e){this.navigation.begin(),(0,_.hZ)(this._previousCenter,e.center.x,e.center.y)}update(s,e){const{state:{size:l,padding:f}}=s;(0,_.hZ)(U,e.center.x,e.center.y),(0,d.iB)(z,l,f),s.viewpoint=(0,d.tj)(this.viewpoint,s.state.paddedViewState.viewpoint,(0,d.s5)(z,this._previousCenter,U)),(0,_.C)(this._previousCenter,U)}end(){this.navigation.end()}};(0,o._)([(0,w.MZ)()],K.prototype,"viewpoint",void 0),(0,o._)([(0,w.MZ)()],K.prototype,"navigation",void 0),K=(0,o._)([(0,i.$)("esri.views.2d.navigation.actions.Rotate")],K);const at=K,$=new t.A({targetGeometry:new u.A}),nt=[0,0];let a=class extends n.A{constructor(s){super(s),this._endTimer=null,this._lastEventTimestamp=null,this.animationManager=null,this.interacting=!1}initialize(){this.pan=new c({navigation:this}),this.rotate=new at({navigation:this}),this.pinch=new W({navigation:this}),this.zoomBox=new q({view:this.view,navigation:this})}destroy(){this.pan=(0,L.pR)(this.pan),this.rotate=(0,L.pR)(this.rotate),this.pinch=(0,L.pR)(this.pinch),this.zoomBox=(0,L.pR)(this.zoomBox),this.animationManager=null}begin(){this.stop(),this._set("interacting",!0)}end(){this._lastEventTimestamp=performance.now(),this._startTimer(250)}zoom(s,e=this._getDefaultAnchor()){var l=this;return(0,p.A)(function*(){if(l.begin(),l.view.constraints.snapToZoom&&l.view.constraints.effectiveLODs)return s<1?l.zoomIn(e):l.zoomOut(e);l.setViewpoint(e,s,0,[0,0])})()}zoomIn(s){var e=this;return(0,p.A)(function*(){const l=e.view,f=l.constraints.snapToNextScale(l.scale);return e._zoomToScale(f,s)})()}zoomOut(s){var e=this;return(0,p.A)(function*(){const l=e.view,f=l.constraints.snapToPreviousScale(l.scale);return e._zoomToScale(f,s)})()}setViewpoint(s,e,l,f){this.begin(),this.view.stateManager.state.viewpoint=this._scaleRotateTranslateViewpoint(this.view.viewpoint,s,e,l,f),this.end()}setViewpointImmediate(s,e=0,l=[0,0],f=this._getDefaultAnchor()){this.view.stateManager.state.viewpoint=this._scaleRotateTranslateViewpoint(this.view.viewpoint,f,s,e,l)}continuousRotateClockwise(){const s=this.view.viewpoint;this.animationManager?.animateContinuous(s,e=>{(0,d.tj)(e,e,-1)})}continuousRotateCounterclockwise(){const s=this.view.viewpoint;this.animationManager?.animateContinuous(s,e=>{(0,d.tj)(e,e,1)})}resetRotation(){this.view.constraints.rotationEnabled&&(this.view.rotation=0)}continuousPanLeft(){this._continuousPan([-10,0])}continuousPanRight(){this._continuousPan([10,0])}continuousPanUp(){this._continuousPan([0,10])}continuousPanDown(){this._continuousPan([0,-10])}continuousPanVector({x:s,y:e}){this._continuousPan([10*s,10*e])}stop(){this.pan.stopMomentumNavigation(),this.animationManager?.stop(),this.end(),null!==this._endTimer&&(clearTimeout(this._endTimer),this._endTimer=null,this._set("interacting",!1))}_continuousPan(s){const e=this.view.viewpoint;this.animationManager?.animateContinuous(e,l=>{(0,d.aA)(l,l,s),this.view.constraints.constrainByGeometry(l)})}_startTimer(s){return null!==this._endTimer||(this._endTimer=setTimeout(()=>{this._endTimer=null;const e=performance.now()-(this._lastEventTimestamp??0);e<250?this._endTimer=this._startTimer(e):this._set("interacting",!1)},s)),this._endTimer}_getDefaultAnchor(){const{size:s,padding:{left:e,right:l,top:f,bottom:C}}=this.view;return nt[0]=.5*(s[0]-l+e),nt[1]=.5*(s[1]-C+f),nt}_zoomToScale(s,e=this._getDefaultAnchor()){var l=this;return(0,p.A)(function*(){const{view:f}=l,{constraints:C,scale:B,viewpoint:G,size:Q,padding:Y}=f,tt=C.canZoomInTo(s),rt=C.canZoomOutTo(s);if(!(s<B&&!tt||s>B&&!rt))return(0,d.qV)($,G,s/B,0,e,Q,Y),C.constrainByGeometry($),f.goTo($,{animate:!0,animationMode:"always",duration:(0,r.s)(),pickClosestTarget:!1})})()}_scaleRotateTranslateViewpoint(s,e,l,f,C){const{view:B}=this,{size:G,padding:Q,constraints:Y,scale:tt,viewpoint:rt}=B,ht=tt*l,ut=Y.canZoomInTo(ht),dt=Y.canZoomOutTo(ht);return(l<1&&!ut||l>1&&!dt)&&(l=1),(0,d.aA)(rt,rt,C),(0,d.qV)(s,rt,l,f,e,G,Q),Y.constrainByGeometry(s)}};(0,o._)([(0,w.MZ)()],a.prototype,"animationManager",void 0),(0,o._)([(0,w.MZ)({type:Boolean,readOnly:!0})],a.prototype,"interacting",void 0),(0,o._)([(0,w.MZ)()],a.prototype,"pan",void 0),(0,o._)([(0,w.MZ)()],a.prototype,"pinch",void 0),(0,o._)([(0,w.MZ)()],a.prototype,"rotate",void 0),(0,o._)([(0,w.MZ)()],a.prototype,"view",void 0),(0,o._)([(0,w.MZ)()],a.prototype,"zoomBox",void 0),a=(0,o._)([(0,i.$)("esri.views.2d.navigation.MapViewNavigation")],a);const S=a},24493:(J,R,m)=>{function p(t,...n){let L="";for(let w=0;w<n.length;w++)L+=t[w]+n[w];return L+=t[t.length-1],L}function o(t,n,L=""){return t?n:L}var t;m.d(R,{H:()=>p,If:()=>o}),(t=p).int=function n(w){return Math.round(w).toString()},t.float=function L(w){return w.toPrecision(8)}},67496:(J,R,m)=>{var p,o,t,n,L,w,x,I,h;m.d(R,{Am:()=>n,C7:()=>t,JS:()=>I,Mg:()=>w,dd:()=>L,it:()=>o,s2:()=>p,sf:()=>x}),(h=p||(p={}))[h.None=0]="None",h[h.Front=1]="Front",h[h.Back=2]="Back",h[h.COUNT=3]="COUNT",function(h){h[h.Less=0]="Less",h[h.Lequal=1]="Lequal",h[h.COUNT=2]="COUNT"}(o||(o={})),function(h){h[h.BACKGROUND=0]="BACKGROUND",h[h.UPDATE=1]="UPDATE"}(t||(t={})),function(h){h[h.NOT_LOADED=0]="NOT_LOADED",h[h.LOADING=1]="LOADING",h[h.LOADED=2]="LOADED"}(n||(n={})),function(h){h[h.IntegratedMeshMaskExcluded=1]="IntegratedMeshMaskExcluded",h[h.OutlineVisualElementMask=2]="OutlineVisualElementMask"}(L||(L={})),function(h){h[h.Highlight=0]="Highlight",h[h.MaskOccludee=1]="MaskOccludee"}(w||(w={})),function(h){h[h.Blend=0]="Blend",h[h.Opaque=1]="Opaque",h[h.Mask=2]="Mask",h[h.MaskBlend=3]="MaskBlend",h[h.COUNT=4]="COUNT"}(x||(x={})),function(h){h.DDS_ENCODING="image/vnd-ms.dds",h.KTX2_ENCODING="image/ktx2",h.BASIS_ENCODING="image/x.basis"}(I||(I={}))},52274:(J,R,m)=>{m.d(R,{_:()=>o});var p=m(11432);class o{constructor(){this._result=!1}dispose(){this._program=(0,p.WD)(this._program)}get result(){return null!=this._program&&(this._result=this._test(this._program),this.dispose()),this._result}}},54949:(J,R,m)=>{m.d(R,{_R:()=>t});class p{constructor(L,w,x,I,h,i,u,d,r){this.createQuery=L,this.deleteQuery=w,this.resultAvailable=x,this.getResult=I,this.disjoint=h,this.beginTimeElapsed=i,this.endTimeElapsed=u,this.createTimestamp=d,this.timestampBits=r}}let o=!1;function t(n,L){if(L.disjointTimerQuery)return null;let w=n.getExtension("EXT_disjoint_timer_query_webgl2");return w?new p(()=>n.createQuery(),x=>{n.deleteQuery(x),o=!1},x=>n.getQueryParameter(x,n.QUERY_RESULT_AVAILABLE),x=>n.getQueryParameter(x,n.QUERY_RESULT),()=>n.getParameter(w.GPU_DISJOINT_EXT),x=>{o||(o=!0,n.beginQuery(w.TIME_ELAPSED_EXT,x))},()=>{n.endQuery(w.TIME_ELAPSED_EXT),o=!1},x=>w.queryCounterEXT(x,w.TIMESTAMP_EXT),()=>n.getQuery(w.TIMESTAMP_EXT,w.QUERY_COUNTER_BITS_EXT)):(w=n.getExtension("EXT_disjoint_timer_query"),w?new p(()=>w.createQueryEXT(),x=>{w.deleteQueryEXT(x),o=!1},x=>w.getQueryObjectEXT(x,w.QUERY_RESULT_AVAILABLE_EXT),x=>w.getQueryObjectEXT(x,w.QUERY_RESULT_EXT),()=>n.getParameter(w.GPU_DISJOINT_EXT),x=>{o||(o=!0,w.beginQueryEXT(w.TIME_ELAPSED_EXT,x))},()=>{w.endQueryEXT(w.TIME_ELAPSED_EXT),o=!1},x=>w.queryCounterEXT(x,w.TIMESTAMP_EXT),()=>w.getQueryEXT(w.TIMESTAMP_EXT,w.QUERY_COUNTER_BITS_EXT)):null)}},41396:(J,R,m)=>{m.d(R,{Ey:()=>M,Ky:()=>h,Ms:()=>ot,Os:()=>I,Uy:()=>r,Xt:()=>d,gh:()=>L,hG:()=>u,kn:()=>D,p3:()=>n});var p=m(67496),o=m(50915);function t(a,S,s=o.Tb.ADD,e=[0,0,0,0]){return{srcRgb:a,srcAlpha:a,dstRgb:S,dstAlpha:S,opRgb:s,opAlpha:s,color:{r:e[0],g:e[1],b:e[2],a:e[3]}}}function n(a,S,s,e,l=o.Tb.ADD,f=o.Tb.ADD,C=[0,0,0,0]){return{srcRgb:a,srcAlpha:S,dstRgb:s,dstAlpha:e,opRgb:l,opAlpha:f,color:{r:C[0],g:C[1],b:C[2],a:C[3]}}}const L=t(o.dn.ZERO,o.dn.ONE_MINUS_SRC_ALPHA),I=(t(o.dn.ONE,o.dn.ZERO),t(o.dn.ONE,o.dn.ONE),t(o.dn.ONE,o.dn.ONE_MINUS_SRC_ALPHA)),h=n(o.dn.SRC_ALPHA,o.dn.ONE,o.dn.ONE_MINUS_SRC_ALPHA,o.dn.ONE_MINUS_SRC_ALPHA),i={face:o.Y7.BACK,mode:o.Ac.CCW},u={face:o.Y7.FRONT,mode:o.Ac.CCW},d=a=>a===p.s2.Back?i:a===p.s2.Front?u:null,r={zNear:0,zFar:1},D={r:!0,g:!0,b:!0,a:!0};function O(a){return v.intern(a)}function N(a){return c.intern(a)}function H(a){return y.intern(a)}function j(a){return A.intern(a)}function F(a){return Z.intern(a)}function q(a){return V.intern(a)}function X(a){return U.intern(a)}function et(a){return K.intern(a)}function it(a){return st.intern(a)}function M(a){return $.intern(a)}class T{constructor(S,s){this._makeKey=S,this._makeRef=s,this._interns=new Map}intern(S){if(!S)return null;const s=this._makeKey(S),e=this._interns;return e.has(s)||e.set(s,this._makeRef(S)),e.get(s)??null}}function b(a){return"["+a.join(",")+"]"}const v=new T(E,a=>({__tag:"Blending",...a}));function E(a){return a?b([a.srcRgb,a.srcAlpha,a.dstRgb,a.dstAlpha,a.opRgb,a.opAlpha,a.color.r,a.color.g,a.color.b,a.color.a]):null}const c=new T(_,a=>({__tag:"Culling",...a}));function _(a){return a?b([a.face,a.mode]):null}const y=new T(g,a=>({__tag:"PolygonOffset",...a}));function g(a){return a?b([a.factor,a.units]):null}const A=new T(P,a=>({__tag:"DepthTest",...a}));function P(a){return a?b([a.func]):null}const Z=new T(k,a=>({__tag:"StencilTest",...a}));function k(a){return a?b([a.function.func,a.function.ref,a.function.mask,a.operation.fail,a.operation.zFail,a.operation.zPass]):null}const V=new T(W,a=>({__tag:"DepthWrite",...a}));function W(a){return a?b([a.zNear,a.zFar]):null}const U=new T(z,a=>({__tag:"ColorWrite",...a}));function z(a){return a?b([a.r,a.g,a.b,a.a]):null}const K=new T(at,a=>({__tag:"StencilWrite",...a}));function at(a){return a?b([a.mask]):null}const st=new T(lt,a=>({__tag:"DrawBuffers",...a}));function lt(a){return a?b(a.buffers):null}const $=new T(function nt(a){return a?b([E(a.blending),_(a.culling),g(a.polygonOffset),P(a.depthTest),k(a.stencilTest),W(a.depthWrite),z(a.colorWrite),at(a.stencilWrite),lt(a.drawBuffers)]):null},a=>({blending:O(a.blending),culling:N(a.culling),polygonOffset:H(a.polygonOffset),depthTest:j(a.depthTest),stencilTest:F(a.stencilTest),depthWrite:q(a.depthWrite),colorWrite:X(a.colorWrite),stencilWrite:et(a.stencilWrite),drawBuffers:it(a.drawBuffers)}));class ot{constructor(S){this._pipelineInvalid=!0,this._blendingInvalid=!0,this._cullingInvalid=!0,this._polygonOffsetInvalid=!0,this._depthTestInvalid=!0,this._stencilTestInvalid=!0,this._depthWriteInvalid=!0,this._colorWriteInvalid=!0,this._stencilWriteInvalid=!0,this._drawBuffersInvalid=!0,this._stateSetters=S}setPipeline(S){(this._pipelineInvalid||S!==this._pipeline)&&(this._setBlending(S.blending),this._setCulling(S.culling),this._setPolygonOffset(S.polygonOffset),this._setDepthTest(S.depthTest),this._setStencilTest(S.stencilTest),this._setDepthWrite(S.depthWrite),this._setColorWrite(S.colorWrite),this._setStencilWrite(S.stencilWrite),this._setDrawBuffers(S.drawBuffers),this._pipeline=S),this._pipelineInvalid=!1}invalidateBlending(){this._blendingInvalid=!0,this._pipelineInvalid=!0}invalidateCulling(){this._cullingInvalid=!0,this._pipelineInvalid=!0}invalidatePolygonOffset(){this._polygonOffsetInvalid=!0,this._pipelineInvalid=!0}invalidateDepthTest(){this._depthTestInvalid=!0,this._pipelineInvalid=!0}invalidateStencilTest(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}invalidateDepthWrite(){this._depthWriteInvalid=!0,this._pipelineInvalid=!0}invalidateColorWrite(){this._colorWriteInvalid=!0,this._pipelineInvalid=!0}invalidateStencilWrite(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}invalidateDrawBuffers(){this._drawBuffersInvalid=!0,this._pipelineInvalid=!0}_setBlending(S){this._blending=this._setSubState(S,this._blending,this._blendingInvalid,this._stateSetters.setBlending),this._blendingInvalid=!1}_setCulling(S){this._culling=this._setSubState(S,this._culling,this._cullingInvalid,this._stateSetters.setCulling),this._cullingInvalid=!1}_setPolygonOffset(S){this._polygonOffset=this._setSubState(S,this._polygonOffset,this._polygonOffsetInvalid,this._stateSetters.setPolygonOffset),this._polygonOffsetInvalid=!1}_setDepthTest(S){this._depthTest=this._setSubState(S,this._depthTest,this._depthTestInvalid,this._stateSetters.setDepthTest),this._depthTestInvalid=!1}_setStencilTest(S){this._stencilTest=this._setSubState(S,this._stencilTest,this._stencilTestInvalid,this._stateSetters.setStencilTest),this._stencilTestInvalid=!1}_setDepthWrite(S){this._depthWrite=this._setSubState(S,this._depthWrite,this._depthWriteInvalid,this._stateSetters.setDepthWrite),this._depthWriteInvalid=!1}_setColorWrite(S){this._colorWrite=this._setSubState(S,this._colorWrite,this._colorWriteInvalid,this._stateSetters.setColorWrite),this._colorWriteInvalid=!1}_setStencilWrite(S){this._stencilWrite=this._setSubState(S,this._stencilWrite,this._stencilWriteInvalid,this._stateSetters.setStencilWrite),this._stencilTestInvalid=!1}_setDrawBuffers(S){this._drawBuffers=this._setSubState(S,this._drawBuffers,this._drawBuffersInvalid,this._stateSetters.setDrawBuffers),this._drawBuffersInvalid=!1}_setSubState(S,s,e,l){return(e||S!==s)&&(l(S),this._pipelineInvalid=!0),S}}},20047:(J,R,m)=>{m.d(R,{H:()=>h});var p=m(9599),o=m(32788),t=m(50915),n=m(79061),L=m(76169),w=m(4931),x=m(45513),I=m(52274);class h extends I._{constructor(d){super(),this._rctx=d,this._program=d.programCache.acquire("\n    precision highp float;\n\n    attribute vec2 a_pos;\n    varying vec2 v_uv;\n\n    void main() {\n      v_uv = a_pos;\n      gl_Position = vec4(a_pos * 2.0 - 1.0, 0.0, 1.0);\n    }\n    ","\n    precision highp float;\n\n    varying vec2 v_uv;\n\n    uniform sampler2D u_texture;\n\n    void main() {\n      gl_FragColor = texture2D(u_texture, v_uv);\n    }\n    ",new Map([["a_pos",0]]))}dispose(){super.dispose()}_test(d){const r=this._rctx;if(!r.gl)return d.dispose(),!0;const D=new w.R(1);D.wrapMode=t.pF.CLAMP_TO_EDGE,D.samplingMode=t.Cj.NEAREST;const O=new n.H(r,D),N=o.g.createVertex(r,t._U.STATIC_DRAW,new Uint16Array([0,0,1,0,0,1,1,1])),H=new x.Z(r,new Map([["a_pos",0]]),p.VS,new Map([["geometry",N]])),j=new w.R;j.samplingMode=t.Cj.LINEAR,j.wrapMode=t.pF.CLAMP_TO_EDGE;const F=new L.g(r,j,i);r.useProgram(d),r.bindTexture(F,0),d.setUniform1i("u_texture",0);const q=r.getBoundFramebufferObject(),{x:X,y:et,width:it,height:M}=r.getViewport();r.bindFramebuffer(O),r.setViewport(0,0,1,1),r.setClearColor(0,0,0,0),r.setBlendingEnabled(!1),r.clear(t.NV.COLOR),r.bindVAO(H),r.drawArrays(t.WR.TRIANGLE_STRIP,0,4);const T=new Uint8Array(4);return O.readPixels(0,0,1,1,t.Ab.RGBA,t.ld.UNSIGNED_BYTE,T),H.dispose(),O.dispose(),F.dispose(),r.setViewport(X,et,it,M),r.bindFramebuffer(q),255!==T[0]}}const i=new Image;i.src="data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='5' height='5' version='1.1' viewBox='0 0 5 5' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='5' height='5' fill='%23f00' fill-opacity='.5'/%3E%3C/svg%3E%0A",i.width=5,i.height=5,i.decode()}}]);