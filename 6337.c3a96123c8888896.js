"use strict";(self.webpackChunkAngularClient=self.webpackChunkAngularClient||[]).push([[6337],{66337:(x,T,e)=>{e.r(T),e.d(T,{default:()=>W});var _=e(10467),i=e(8189),B=e(23098),L=e(89563),U=e(39693),A=e(56492),D=e(45272),u=e(85211),S=(e(3248),e(35150),e(40707),e(17221)),c=e(76576),o=e(28067),n=e(58701),l=e(95478),d=e(93410),m=e(17049),O=e(85551),C=e(1151),j=e(33036),R=e(22329),P=e(65824),v=e(88521),E=e(55417),f=e(46602),t=e(84986);const r=["atom","xml"],s={base:t.A,key:"type",typeMap:{"simple-line":E.A},errorContext:"symbol"},a={base:t.A,key:"type",typeMap:{"picture-marker":P.A,"simple-marker":f.A},errorContext:"symbol"},G={base:t.A,key:"type",typeMap:{"simple-fill":v.A},errorContext:"symbol"};let M=class extends((0,d.dM)((0,C.J)((0,m.q)((0,O.A)((0,j.j)((0,U.P)(l.A))))))){constructor(...h){super(...h),this.description=null,this.fullExtent=null,this.legendEnabled=!0,this.lineSymbol=null,this.pointSymbol=null,this.polygonSymbol=null,this.operationalLayerType="GeoRSS",this.url=null,this.type="geo-rss"}normalizeCtorArgs(h,I){return"string"==typeof h?{url:h,...I}:h}readFeatureCollections(h,I){return I.featureCollection.layers.forEach(K=>{const b=K.layerDefinition.drawingInfo.renderer.symbol;b&&"esriSFS"===b.type&&b.outline?.style.includes("esriSFS")&&(b.outline.style="esriSLSSolid")}),I.featureCollection.layers}get hasPoints(){return this._hasGeometry("esriGeometryPoint")}get hasPolylines(){return this._hasGeometry("esriGeometryPolyline")}get hasPolygons(){return this._hasGeometry("esriGeometryPolygon")}get title(){const h=this._get("title");return h&&"defaults"!==this.originOf("title")?h:this.url?(0,D.e7)(this.url,r)||"GeoRSS":h}set title(h){this._set("title",h)}load(h){const I=null!=h?h.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service","Feature Service","Feature Collection","Scene Service"]},h).catch(A.QP).then(()=>this._fetchService(I)).then(K=>{this.read(K,{origin:"service"})})),Promise.resolve(this)}hasDataChanged(){var h=this;return(0,_.A)(function*(){const I=yield h._fetchService();return h.read(I,{origin:"service",ignoreDefaults:!0}),!0})()}_fetchService(h){var I=this;return(0,_.A)(function*(){const K=I.spatialReference,{data:b}=yield(0,L.A)(B.A.geoRSSServiceUrl,{query:{url:I.url,refresh:!!I.loaded||void 0,outSR:(0,n.oT)(K)?void 0:K.wkid??JSON.stringify(K)},signal:h});return b})()}_hasGeometry(h){return this.featureCollections?.some(I=>I.featureSet?.geometryType===h&&I.featureSet.features?.length>0)??!1}};(0,i._)([(0,u.MZ)()],M.prototype,"description",void 0),(0,i._)([(0,u.MZ)()],M.prototype,"featureCollections",void 0),(0,i._)([(0,S.w)("service","featureCollections",["featureCollection.layers"])],M.prototype,"readFeatureCollections",null),(0,i._)([(0,u.MZ)({type:o.A,json:{name:"lookAtExtent"}})],M.prototype,"fullExtent",void 0),(0,i._)([(0,u.MZ)(R.id)],M.prototype,"id",void 0),(0,i._)([(0,u.MZ)(R.fV)],M.prototype,"legendEnabled",void 0),(0,i._)([(0,u.MZ)({types:s,json:{write:!0}})],M.prototype,"lineSymbol",void 0),(0,i._)([(0,u.MZ)({type:["show","hide"]})],M.prototype,"listMode",void 0),(0,i._)([(0,u.MZ)({types:a,json:{write:!0}})],M.prototype,"pointSymbol",void 0),(0,i._)([(0,u.MZ)({types:G,json:{write:!0}})],M.prototype,"polygonSymbol",void 0),(0,i._)([(0,u.MZ)({type:["GeoRSS"]})],M.prototype,"operationalLayerType",void 0),(0,i._)([(0,u.MZ)(R.OZ)],M.prototype,"url",void 0),(0,i._)([(0,u.MZ)({json:{origins:{service:{read:{source:"name",reader:h=>h||void 0}}}}})],M.prototype,"title",null),(0,i._)([(0,u.MZ)({readOnly:!0,json:{read:!1},value:"geo-rss"})],M.prototype,"type",void 0),M=(0,i._)([(0,c.$)("esri.layers.GeoRSSLayer")],M);const W=M},72211:(x,T,e)=>{e.d(T,{LF:()=>U,M9:()=>A,zu:()=>y});var _=e(5922),i=e(89221),B=e(79845),L=e(26073);function U(c,o,n){try{return function u(c){if(!c||0===c.length)return null;if(function g(c){const o=c[0];return!!o&&"scale"in o}(c)){const o=[];for(const n of c)o.push({scale:n.scale,value:y(n.value)});return o}return y(c)}(c)}catch(l){n?.messages?.push(l)}return null}function A(c,o,n,l){try{const d=function D(c){const o=(0,B.q)(c);return o?(0,L.dw)(o)?o.map(n=>n.toJSON()):o.map(({scale:n,effects:l})=>({scale:n,value:l.map(d=>d.toJSON())})):null}(c);(0,i.sM)(n,d,o)}catch(d){l.messages&&l.messages.push(d)}}function y(c){if(!c?.length)return"";const o=[];for(const n of c){let l=[];switch(n.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":l=[p(n,"amount")];break;case"blur":l=[p(n,"radius","pt")];break;case"hue-rotate":l=[p(n,"angle","deg")];break;case"drop-shadow":l=[p(n,"xoffset","pt"),p(n,"yoffset","pt"),p(n,"blurRadius","pt"),S(n,"color")];break;case"bloom":l=[p(n,"strength"),p(n,"radius","pt"),p(n,"threshold")]}const d=`${n.type}(${l.filter(Boolean).join(" ")})`;(0,B.q)(d),o.push(d)}return o.join(" ")}function p(c,o,n){if(null==c[o])throw new _.A("effect:missing-parameter",`Missing parameter '${o}' in ${c.type} effect`,{effect:c});return n?c[o]+n:""+c[o]}function S(c,o){if(null==c[o])throw new _.A("effect:missing-parameter",`Missing parameter '${o}' in ${c.type} effect`,{effect:c});const n=c[o];return`rgba(${n[0]||0}, ${n[1]||0}, ${n[2]||0}, ${n[3]/255||0})`}},93410:(x,T,e)=>{e.d(T,{LF:()=>p,dM:()=>S,sU:()=>g});var _=e(8189),i=e(85211),A=(e(3248),e(35150),e(40707),e(76576)),D=e(50501),u=e(72211);const g={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:{layerContainerTypes:D.K}},"portal-item":{read:!0,write:{layerContainerTypes:D.K}}}}},y={read:{reader:u.LF},write:{allowNull:!0,writer:u.M9,layerContainerTypes:D.K}},p={json:{read:!1,write:!1,origins:{"web-map":y,"portal-item":y}}},S=c=>{let o=class extends c{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return(0,_._)([(0,i.MZ)(g)],o.prototype,"blendMode",void 0),(0,_._)([(0,i.MZ)(p)],o.prototype,"effect",void 0),o=(0,_._)([(0,A.$)("esri.layers.mixins.BlendLayer")],o),o}},17049:(x,T,e)=>{e.d(T,{q:()=>C});var _=e(8189),i=e(5922),B=e(45272),L=e(85211),U=e(55739),u=(e(3248),e(40707),e(17221)),g=e(76576),y=e(50305),p=e(50501),S=e(34813),c=e(56558);const o={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},n={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},l={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},d={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,Object3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":o,"web-map/basemap":n,"web-map/tables":l,"link-chart/operational-layers":{...o,LinkChartLayer:!0},"link-chart/basemap":n,"link-chart/tables":l,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0,WCS:!0},"portal-item/tables":{ArcGISFeatureLayer:!0,SubtypeGroupTable:!0}};var m=e(22329),O=e(17181);const C=R=>{let P=class extends R{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(v,E,f){return"Group Layer"===f?.portalItem?.type?void 0:v}writeListMode(v,E,f,t){(t&&"ground"===t.layerContainerType||v&&(0,c.R)(this,f,{},t))&&(E[f]=v)}writeOperationalLayerType(v,E,f){v&&(E[f]=v)}writeTitle(v,E){E.title=v??"Layer"}readVisibilityTimeExtent(v){return v?O.A.fromArray(v):null}writeVisibilityTimeExtent(v,E,f,t){v&&"tables"!==t.layerContainerType&&(v.isEmpty?t?.messages&&t.messages.push(new i.A("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):E[f]=v.toArray())}read(v,E){E&&(E.layer=this),(0,S.t)(this,v,f=>super.read(v,f),E)}write(v,E){if(!this.persistenceEnabled&&!E?.ignorePersistenceEnabled)return null;if(E?.origin){const r=`${E.origin}/${E.layerContainerType||"operational-layers"}`;let a=!!d[r]?.[this.operationalLayerType];if("ArcGISTiledElevationServiceLayer"===this.operationalLayerType&&"web-scene/operational-layers"===r&&(a=!1),"ArcGISDimensionLayer"===this.operationalLayerType&&"web-map/operational-layers"===r&&(a=!1),!a)return E.messages?.push(new i.A("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${r}'`,{layer:this})),null}const f=super.write(v,{...E,layer:this}),t=!!E&&!!E.messages&&!!E.messages.filter(r=>r instanceof i.A&&"web-document-write:property-required"===r.name).length;return(0,B.w8)(f?.url)?(E?.messages?.push(new i.A("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&t?null:f}beforeSave(){}};return(0,_._)([(0,L.MZ)({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],P.prototype,"id",void 0),(0,_._)([(0,u.w)("id",["id"])],P.prototype,"readId",null),(0,_._)([(0,L.MZ)(m.C1)],P.prototype,"listMode",void 0),(0,_._)([(0,y.K)("listMode")],P.prototype,"writeListMode",null),(0,_._)([(0,L.MZ)({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:p.K,isRequired:!0}}}}})],P.prototype,"operationalLayerType",void 0),(0,_._)([(0,y.K)("operationalLayerType")],P.prototype,"writeOperationalLayerType",null),(0,_._)([(0,L.MZ)(m.ke)],P.prototype,"opacity",void 0),(0,_._)([(0,L.MZ)({type:Boolean,readOnly:!1})],P.prototype,"persistenceEnabled",void 0),(0,_._)([(0,L.MZ)({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],P.prototype,"title",void 0),(0,_._)([(0,y.K)("title"),(0,y.K)(["web-scene"],"title")],P.prototype,"writeTitle",null),(0,_._)([(0,L.MZ)({type:O.A,json:{origins:{"web-scene":{write:{layerContainerTypes:p.K}}}}})],P.prototype,"visibilityTimeExtent",void 0),(0,_._)([(0,u.w)("visibilityTimeExtent")],P.prototype,"readVisibilityTimeExtent",null),(0,_._)([(0,y.K)(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[U.jz,U.Uv]]}})],P.prototype,"writeVisibilityTimeExtent",null),(0,_._)([(0,L.MZ)({type:Boolean,json:{name:"visibility",write:{layerContainerTypes:p.K}}})],P.prototype,"visible",void 0),P=(0,_._)([(0,g.$)("esri.layers.mixins.OperationalLayer")],P),P}},85551:(x,T,e)=>{e.d(T,{A:()=>P});var _=e(10467),i=e(8189),B=e(23098),L=e(77469),U=e(89563),A=e(89447),D=e(5922),u=e(35150),g=e(11432),y=e(56492),p=e(45272),S=e(85211),n=(e(3248),e(40707),e(17221)),l=e(76576),d=e(50305),m=e(58443),O=e(73874),C=e(46577),j=e(52606),R=e(69927);const P=E=>{let f=class extends E{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=(0,g.pR)(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(t){t!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",t))}readPortalItem(t,r,s){if(r.itemId)return new C.default({id:r.itemId,portal:s?.portal})}writePortalItem(t,r){t?.id&&(r.itemId=t.id)}loadFromPortal(t,r){var s=this;return(0,_.A)(function*(){if(s.portalItem?.id)try{const{load:a}=yield Promise.all([e.e(2076),e.e(6180)]).then(e.bind(e,56180));return(0,y.Te)(r),yield a({instance:s,supportedTypes:t.supportedTypes,validateItem:t.validateItem,supportsData:t.supportsData,layerModuleTypeMap:t.layerModuleTypeMap,populateGroupLayer:t.populateGroupLayer},r)}catch(a){throw(0,y.zf)(a)||u.A.getLogger(s).warn(`Failed to load layer (${s.title}, ${s.id}) portal item (${s.portalItem.id})\n  ${a}`),a}})()}finishLoadEditablePortalLayer(t){var r=this;return(0,_.A)(function*(){r._set("userHasEditingPrivileges",yield r._fetchUserHasEditingPrivileges(t).catch(s=>((0,y.QP)(s),!0)))})()}setUserPrivileges(t,r){var s=this;return(0,_.A)(function*(){if(!B.A.userPrivilegesApplied)return s.finishLoadEditablePortalLayer(r);if(s.url)try{const{features:{edit:a,fullEdit:G},content:{updateItem:M}}=yield s._fetchUserPrivileges(t,r);s._set("userHasEditingPrivileges",a),s._set("userHasFullEditingPrivileges",G),s._set("userHasUpdateItemPrivileges",M)}catch(a){(0,y.QP)(a)}})()}_fetchUserPrivileges(t,r){var s=this;return(0,_.A)(function*(){let a=s.portalItem;if(!t||!a||!a.loaded||a.sourceUrl)return s._fetchFallbackUserPrivileges(r);const G=!L.id?.findCredential(s.url),M=t===a.id;if(M&&a.portal.user)return s._getUserPrivileges(a,G);let W,h;if(M)W=a.portal.url;else try{W=yield(0,m.wI)(s.url,r)}catch(Z){(0,y.QP)(Z)}if(!W||!(0,p.b8)(W,a.portal.url))return s._fetchFallbackUserPrivileges(r);try{const Z=null!=r?r.signal:null;h=yield L.id?.getCredential(`${W}/sharing`,{prompt:!1,signal:Z})}catch(Z){(0,y.QP)(Z)}if(!h)return{features:{edit:!0,fullEdit:!1},content:{updateItem:!1}};try{if(M?yield a.reload():(a=new C.default({id:t,portal:{url:W}}),yield a.load(r)),a.portal.user)return s._getUserPrivileges(a,G)}catch(Z){(0,y.QP)(Z)}return{features:{edit:!0,fullEdit:!1},content:{updateItem:!1}}})()}_getUserPrivileges(t,r){const s=(0,R.It)(t);return r&&(s.features.edit=!0),s}_fetchFallbackUserPrivileges(t){var r=this;return(0,_.A)(function*(){let s=!0;try{s=yield r._fetchUserHasEditingPrivileges(t)}catch(a){(0,y.QP)(a)}return{features:{edit:s,fullEdit:!1},content:{updateItem:!1}}})()}_fetchUserHasEditingPrivileges(t){var r=this;return(0,_.A)(function*(){const s=r.url?L.id?.findCredential(r.url):null;if(!s)return!0;const a=v.credential===s?v.user:yield r._fetchEditingUser(t);return v.credential=s,v.user=a,null==a?.privileges||a.privileges.includes("features:user:edit")})()}_fetchEditingUser(t){var r=this;return(0,_.A)(function*(){const s=r.portalItem?.portal?.user;if(s)return s;const a=L.id?.findServerInfo(r.url??"");if(!a?.owningSystemUrl)return null;const G=`${a.owningSystemUrl}/sharing/rest`,M=O.A.getDefault();if(M&&M.loaded&&(0,p.S8)(M.restUrl)===(0,p.S8)(G))return M.user;const W=`${G}/community/self`,h=null!=t?t.signal:null,I=yield(0,A.Ke)((0,U.A)(W,{authMode:"no-prompt",query:{f:"json"},signal:h}));return I.ok?j.A.fromJSON(I.value.data):null})()}read(t,r){r&&(r.layer=this),super.read(t,r)}write(t,r){const s=r?.portal,a=this.portalItem?.id&&(this.portalItem.portal||O.A.getDefault());return s&&a&&!(0,p.ut)(a.restUrl,s.restUrl)?(r.messages&&r.messages.push(new D.A("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(t,{...r,layer:this})}};return(0,i._)([(0,S.MZ)({type:C.default})],f.prototype,"portalItem",null),(0,i._)([(0,n.w)("web-document","portalItem",["itemId"])],f.prototype,"readPortalItem",null),(0,i._)([(0,d.K)("web-document","portalItem",{itemId:{type:String}})],f.prototype,"writePortalItem",null),(0,i._)([(0,S.MZ)({clonable:!1})],f.prototype,"resourceReferences",void 0),(0,i._)([(0,S.MZ)({type:Boolean,readOnly:!0})],f.prototype,"userHasEditingPrivileges",void 0),(0,i._)([(0,S.MZ)({type:Boolean,readOnly:!0})],f.prototype,"userHasFullEditingPrivileges",void 0),(0,i._)([(0,S.MZ)({type:Boolean,readOnly:!0})],f.prototype,"userHasUpdateItemPrivileges",void 0),f=(0,i._)([(0,l.$)("esri.layers.mixins.PortalLayer")],f),f},v={credential:null,user:null}},1151:(x,T,e)=>{e.d(T,{J:()=>f});var _=e(10467),i=e(8189),L=(e(3248),e(35150)),U=e(56492),A=e(85211),D=e(48669),g=(e(40707),e(76576)),y=e(50501),p=e(31178),S=e(48900),c=e(34703);const o=new p.A,n=new WeakMap;function O(t,r){return Number.isFinite(t)&&Number.isFinite(r)?r<=0?t:O(r,t%r):0}let C=0,j=0;function R(){const t=Date.now();let r=!1;for(const s of o){const a=s.deref();a?a.refreshInterval&&t-(n.get(a)??0)+5>=6e4*a.refreshInterval&&(n.set(a,t),a.refresh(t)):r=!0}if(r)for(let s=o.length-1;s>=0;s--)o.at(s).deref()||o.removeAt(s)}(0,c.fm)(()=>{const t=Date.now();let r=0;for(const s of o){const a=s.deref();a&&(r=O(Math.round(6e4*a.refreshInterval),r),a.refreshInterval?n.get(a)||n.set(a,t):n.delete(a))}if(r!==j){if(j=r,clearInterval(C),0===j)return void(C=0);C=setInterval(R,j)}},S.OH);const f=t=>{let r=class extends t{constructor(...s){super(...s),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=(0,U.sg)(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||function l(t){(function m(t){return null!=t&&"object"==typeof t&&"refreshInterval"in t&&"refresh"in t})(t)&&o.push(new WeakRef(t))}(this)},()=>{})}destroy(){!function d(t){const r=o.find(s=>s.deref()===t);r&&o.remove(r)}(this)}castRefreshInterval(s){return s>=.1?s:s<=0?0:.1}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(s=Date.now()){(0,U.QZ)(this._debounceHasDataChanged()).then(a=>{a&&this._set("refreshTimestamp",s),this.emit("refresh",{dataChanged:a})},a=>{L.A.getLogger(this).error(a),this.emit("refresh",{dataChanged:!1,error:a})})}hasDataChanged(){return(0,_.A)(function*(){return!0})()}get test(){}};return(0,i._)([(0,A.MZ)({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:y.K}}}}})],r.prototype,"refreshInterval",void 0),(0,i._)([(0,D.w)("refreshInterval")],r.prototype,"castRefreshInterval",null),(0,i._)([(0,A.MZ)({readOnly:!0})],r.prototype,"refreshTimestamp",void 0),(0,i._)([(0,A.MZ)({readOnly:!0})],r.prototype,"refreshParameters",null),r=(0,i._)([(0,g.$)("esri.layers.mixins.RefreshableLayer")],r),r}},33036:(x,T,e)=>{e.d(T,{j:()=>D});var _=e(8189),i=e(85211),A=(e(3248),e(35150),e(40707),e(76576));const D=g=>{let y=class extends g{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const p={minScale:this.minScale,maxScale:this.maxScale},S=this.parent;S&&"effectiveScaleRange"in S&&function u(g,y){g.minScale=g.minScale>0?y.minScale>0?Math.min(g.minScale,y.minScale):g.minScale:y.minScale,g.maxScale=g.maxScale>0?y.maxScale>0?Math.max(g.maxScale,y.maxScale):g.maxScale:y.maxScale}(p,S.effectiveScaleRange);const c=this._get("effectiveScaleRange");return c&&c.minScale===p.minScale&&c.maxScale===p.maxScale?c:p}};return(0,_._)([(0,i.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],y.prototype,"minScale",void 0),(0,_._)([(0,i.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],y.prototype,"maxScale",void 0),(0,_._)([(0,i.MZ)({readOnly:!0})],y.prototype,"effectiveScaleRange",null),y=(0,_._)([(0,A.$)("esri.layers.mixins.ScaleRangeLayer")],y),y}},69927:(x,T,e)=>{e.d(T,{It:()=>n,LG:()=>D,OM:()=>y,Sm:()=>p,Y:()=>u,bK:()=>g,mm:()=>o,sQ:()=>S});var _=e(10467),i=e(13970),B=e(32034),L=e(55039);function A(){return(A=(0,_.A)(function*(l){const d=l.spatialReference;if(d.isWGS84)return l.clone();if(d.isWebMercator)return(0,L.ci)(l);const m=B.A.WGS84;return yield(0,i.initializeProjection)(d,m),(0,i.project)(l,m)})).apply(this,arguments)}function D(l,d){if(!u(l,d)){const m=l.typeKeywords;m?m.push(d):l.typeKeywords=[d]}}function u(l,d){return!!l.typeKeywords?.includes(d)}function g(l){return u(l,o.HOSTED_SERVICE)}function y(l,d){const m=l.typeKeywords;if(m){const O=m.indexOf(d);O>-1&&m.splice(O,1)}}function p(l,d,m){m?D(l,d):y(l,d)}function S(l){return c.apply(this,arguments)}function c(){return c=(0,_.A)(function*(l){const d=l.clone().normalize();let m;if(d.length>1)for(const O of d)m?O.width>m.width&&(m=O):m=O;else m=d[0];return function U(l){return A.apply(this,arguments)}(m)}),c.apply(this,arguments)}const o={DEVELOPER_BASEMAP:"DeveloperBasemap",GROUP_LAYER_MAP:"Map",HOSTED_SERVICE:"Hosted Service",JSAPI:"ArcGIS API for JavaScript",LOCAL_SCENE:"ViewingMode-Local",METADATA:"Metadata",MULTI_LAYER:"Multilayer",ORIENTED_IMAGERY_LAYER:"OrientedImageryLayer",SINGLE_LAYER:"Singlelayer",SUBTYPE_GROUP_LAYER:"SubtypeGroupLayer",SUBTYPE_GROUP_TABLE:"SubtypeGroupTable",TABLE:"Table",TILED_IMAGERY:"Tiled Imagery"};function n(l){const{portal:d,isOrgItem:m,itemControl:O}=l,C=d.user?.privileges;let j=!C||C.includes("features:user:edit"),R=!!m&&!!C?.includes("features:user:fullEdit");const P="update"===O||"admin"===O;return P?R=j=!0:R&&(j=!0),{features:{edit:j,fullEdit:R},content:{updateItem:P}}}}}]);