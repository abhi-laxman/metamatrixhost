"use strict";(self.webpackChunkAngularClient=self.webpackChunkAngularClient||[]).push([[3558],{62257:(jt,_t,ct)=>{function B(h,F){try{if(!h)throw new Error(F)}catch(Y){throw Y}}ct.d(_t,{A:()=>i,B:()=>$,C:()=>mt,D:()=>J,G:()=>rt,a:()=>z,b:()=>Z,c:()=>W,d:()=>Mt,e:()=>o,f:()=>c,g:()=>B,h:()=>w,i:()=>v,j:()=>q,k:()=>M,l:()=>ot,m:()=>D,n:()=>U,o:()=>x,p:()=>l,q:()=>a,r:()=>p,s:()=>X,t:()=>S,u:()=>I,v:()=>_,w:()=>b,x:()=>T,y:()=>d,z:()=>P});class L extends Error{constructor(F,Y){super(Y),this.m_AdditionalMessage=Y,this.m_ErrorType=F,this.name="GeometryError"}what(){return function g(h){switch(h){case 1:return"Unknown error";case 2:return"Corrupted geometry";case 3:return"Empty geometry";case 4:return"Math singularity";case 5:return"Buffer is too small";case 6:return"Invalid shape type";case 7:return"Projection out of supported range";case 8:return"Non simple geometry";case 9:return"Cannot calculate geodesic";case 10:return"Notation conversion";case 11:return"Missing grid file";case 12:return"Invalid call";case 13:return"Internal error";case 14:return"Not implemented";case 15:return"IO error";case 16:return"Invalid 3D";case 17:return"An ambiguous geography edge with antipodal points";case 18:return"Geocentric coordinates require ellipsoidal height";case 19:return"Geography cannot be projected into a gnomonic plane or a result of an operation cannot fit into a gnomonic plane";case 20:return"Geometry is too large to be exported in to a given format";case 22:return"Operation is canceled by the user";case 21:return"The operation, such as projection or geodetic computation, cannot be performed without pe-wasm loaded";default:return"unknown error"}}(this.m_ErrorType)}additionalMessage(){return this.m_AdditionalMessage?this.m_AdditionalMessage:""}code(){return this.m_ErrorType}}class et extends L{constructor(F){super(2,F),this.name="CorruptedGeometryError"}}class it extends L{constructor(F){super(3,F),this.name="EmptyGeometryError"}}class lt extends L{constructor(F){super(4,F),this.name="MathSingularityError"}}class dt extends L{constructor(F){super(21,F),this.name="ProjectionEngineNotLoadedError"}}class gt extends L{constructor(F){super(8,F),this.name="NonSimpleGeometryError"}}var rt,h;(h=rt||(rt={}))[h.enumUnknown=0]="enumUnknown",h[h.enumPoint=513]="enumPoint",h[h.enumLine=5122]="enumLine",h[h.enumBezier=5123]="enumBezier",h[h.enumEllipticArc=5124]="enumEllipticArc",h[h.enumEnvelope=3077]="enumEnvelope",h[h.enumMultiPoint=8710]="enumMultiPoint",h[h.enumPolyline=25607]="enumPolyline",h[h.enumPolygon=27656]="enumPolygon",h[h.enumMultipatch=40969]="enumMultipatch",h[h.enumGeometryCollection=3594]="enumGeometryCollection",h[h.enumRationalBezier2=5134]="enumRationalBezier2",h[h.enumBezier2=5135]="enumBezier2",h[h.enumRationalBezier23d=5392]="enumRationalBezier23d",h[h.enumGreatArc3d=5393]="enumGreatArc3d";const V=[0,0,1,1,1,2,0,1,2,3,-1,-1,-1,-1,1,1];function i(h){return V[15&h]}function o(h){return!!(512&h)}function a(h){return!!(1024&h)}function l(h){return!!(2048&h)}function c(h){return!!(4096&h)}function v(h){return!!(8192&h)}function w(h){return!!(16384&h)}function x(h){return!!(32768&h)}function _(h){const F=h.getGeometryType();return v(F)?h.getPointCount():h.isEmpty()?0:F===rt.enumEnvelope?4:F===rt.enumPoint?1:c(F)?2:void W("missing type")}function q(h){const F=h.getGeometryType();if(w(F))return h.hasNonLinearSegments();if(F===rt.enumGeometryCollection){const Y=h;for(let bt=0,qt=Y.getGeometryCount();bt<qt;bt++)if(q(Y.getGeometry(bt)))return!0;return!1}return!!c(F)&&F!==rt.enumLine}function p(h){throw new dt(h)}function M(h){throw new et(h)}function S(h){throw new Error(h)}function z(h){throw new lt(h)}function T(){S("Geometry type is not supported for 3D operations.")}function D(h){throw new L(12,h)}function I(h){throw new it(h)}function Z(h){throw new L(14,h)}function U(h){throw new Error(h)}function W(h){throw new L(13,h)}function X(h){throw new Error(h)}function J(h){throw new gt(h)}function ot(h){h&&q(h)&&function G(){Z("Operation does not support curves.")}()}function Mt(h){h&&x(h.getGeometryType())&&Z("Unsupported geometry type.")}function mt(h){h===rt.enumGeometryCollection&&S("Geometry_collection instances are not supported in this operation")}function $(h){mt(h.getGeometryType())}function d(h){S(`bad wkid: ${h}`)}function P(h){let F="bad wkt: ";F+=h,F+="...",S(F)}function b(h,F){h||S(F)}},33165:(jt,_t,ct)=>{ct.d(_t,{$:()=>Z,A:()=>Zi,B:()=>Xs,C:()=>Hs,D:()=>Bi,E:()=>v,F:()=>x,G:()=>T,H:()=>z,I:()=>vi,J:()=>Li,K:()=>B,L:()=>ui,M:()=>R,N:()=>pt,O:()=>ci,P:()=>A,Q:()=>F,R:()=>Y,S:()=>mi,T:()=>Ks,U:()=>Js,V:()=>mt,W:()=>$,X:()=>ti,Y:()=>wi,Z:()=>bt,_:()=>I,a:()=>vt,a0:()=>d,a1:()=>P,a2:()=>b,a3:()=>Gt,a4:()=>ns,a5:()=>Vt,a6:()=>Vi,a7:()=>ht,a8:()=>Ui,a9:()=>$t,aA:()=>ei,aB:()=>Ji,aC:()=>G,aD:()=>Pi,aE:()=>Mi,aF:()=>di,aG:()=>Di,aH:()=>ms,aa:()=>Ws,ab:()=>oi,ac:()=>D,ad:()=>Wi,ae:()=>ji,af:()=>Bs,ag:()=>Oi,ah:()=>Bt,ai:()=>yi,aj:()=>Qs,ak:()=>Ls,al:()=>fs,am:()=>si,an:()=>ki,ao:()=>_i,ap:()=>$s,aq:()=>At,ar:()=>Ai,as:()=>ai,at:()=>zi,au:()=>hi,av:()=>Mt,aw:()=>Ii,ax:()=>Gi,ay:()=>$i,az:()=>Xi,b:()=>Tt,c:()=>Qt,d:()=>es,e:()=>Gs,f:()=>ot,g:()=>Ut,h:()=>ni,i:()=>Ot,j:()=>pi,k:()=>rs,l:()=>os,m:()=>is,n:()=>Lt,o:()=>js,p:()=>li,q:()=>h,r:()=>Ni,s:()=>zt,t:()=>Os,u:()=>ii,v:()=>ss,w:()=>ri,x:()=>qt,y:()=>W,z:()=>J});var g=ct(62257);class B{constructor(t){this.sum=t,this.compensation=0}assign(t){return this.compensation=t.compensation,this.sum=t.sum,this}reset(){this.sum=this.compensation=0}resetToStart(t){this.sum=t,this.compensation=0}normalize(){const t=[Number.NaN];this.sum=Ct(this.sum,this.compensation,t),this.compensation=t[0]}add(t){const s=this.sum+t;let e;e=Math.abs(this.sum)>=Math.abs(t)?this.compensation+(this.sum-s+t):this.compensation+(t-s+this.sum),this.sum=s,this.compensation=e}sub(t){this.add(-t)}addProduct(t,s){const e=[0],r=It(t,s,e);this.add(r),this.add(e[0])}mul(t){const s=new B(0);s.addProduct(this.sum,t),s.addProduct(this.compensation,t),this.assign(s)}getResult(){return this.sum+this.compensation}pe(t){return this.add(t),this}me(t){return this.add(-t),this}}const L=0x00000000ffffffffn,et=0x0000ffffn,it=0x000000ffn,lt=0x0fn,dt=0xffff0000n,gt=0xff00n,rt=0xf0n,V=[5,1,2,1,3,1,2,1,4,1,2,1,3,1,2,1],i=[-1,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3];function o(n){let t=0;return n&et||(t+=16,n>>=16n),n&it||(t+=8,n>>=8n),n&lt||(t+=4,n>>=4n),t+V[Number(BigInt.asUintN(4,n))]}function l(n){let t=0;return n&L||(t=32,n>>=32n),t+o(BigInt.asUintN(32,n))}class v{constructor(t,s){if(this.m_EnvelopeType=1,void 0!==t){if(t instanceof v)return this.vmin=t.vmin,void(this.vmax=t.vmax);this.vmin=t,this.vmax=s,this.normalize()}else this.setEmpty()}static construct(t,s){return new v(t,s)}static constructEmpty(){return new v}setCoords(t,s){this.vmin=t,this.vmax=s,this.normalize()}setCoordsFromEnvelope(t){this.vmin=t.vmin,this.vmax=t.vmax}setEmpty(){this.vmin=Number.NaN,this.vmax=Number.NaN}getCenter(){return.5*(this.vmin+this.vmax)}equalsRange(t,s){return Gt(this.vmin,t)&&Gt(this.vmax,s)}equals(t,s){return!(!this.isEmpty()||!t.isEmpty())||(void 0!==s?Math.abs(this.vmin-t.vmin)<=s&&Math.abs(this.vmax-t.vmax)<=s:this.vmin===t.vmin&&this.vmax===t.vmax)}width(){return this.vmax-this.vmin}isEmpty(){return Number.isNaN(this.vmin)||Number.isNaN(this.vmax)}isZero(){return this.vmin===this.vmax}setInfinite(){this.vmin=Number.NEGATIVE_INFINITY,this.vmax=Number.POSITIVE_INFINITY}move(t){this.isEmpty()||(this.vmin+=t,this.vmax+=t)}contains(t){return t.vmin>=this.vmin&&t.vmax<=this.vmax}containsCoordinate(t){return t>=this.vmin&&t<=this.vmax}containsRightExclusive(t){return t>=this.vmin&&t<this.vmax}containsExclusiveCoordinate(t){return t>this.vmin&&t<this.vmax}containsExclusive(t){return t.vmin>this.vmin&&t.vmax<this.vmax}isIntersecting(t){return this.vmin<=t.vmin?this.vmax>=t.vmin:t.vmax>=this.vmin}mergeCoordinate(t){if(this.isEmpty())return this.vmin=t,void(this.vmax=t);this.mergeNeCoordinate(t)}merge(t){if(t.isEmpty())return;const e=t.vmax;this.mergeCoordinate(t.vmin),this.mergeCoordinate(e)}mergeNe(t){const e=t.vmax;this.mergeNeCoordinate(t.vmin),this.mergeNeCoordinate(e)}mergeNeCoordinate(t){t<this.vmin?this.vmin=t:t>this.vmax&&(this.vmax=t)}intersect(t){this.isEmpty()||t.isEmpty()?this.setEmpty():(this.vmin<t.vmin&&(this.vmin=t.vmin),this.vmax>t.vmax&&(this.vmax=t.vmax),this.vmin>this.vmax&&this.setEmpty())}inflate(t){this.isEmpty()||(this.vmin-=t,this.vmax+=t,this.vmax<this.vmin&&this.setEmpty())}normalize(){this.vmin<=this.vmax||(this.vmin>this.vmax?this.vmax=Tt(this.vmin,this.vmin=this.vmax):this.setEmpty())}isValid(){return this.isEmpty()||this.vmin<=this.vmax}snapClip(t){return Qt(t,this.vmin,this.vmax)}calculateToleranceFromEnvelope(){return this.isEmpty()?Ut():(Math.abs(this.vmin)+Math.abs(this.vmax)+1)*Ut()}static unit(){return w}normalizeNoNAN(){this.vmin>this.vmax&&(this.vmax=Tt(this.vmin,this.vmin=this.vmax))}setCoordsNoNAN(t,s){this.vmin=t,this.vmax=s,this.normalizeNoNAN()}clone(){return new v(this.vmin,this.vmax)}}const w=new v(0,1);class x{static getNAN(){return new x(Number.NaN)}constructor(t,s){this.m_value=t??0,this.m_eps=s??0}[Symbol.toPrimitive](t){return this}clone(){return new x(this.m_value,this.m_eps)}assign(t){return this.m_value=t.m_value,this.m_eps=t.m_eps,this}scaleError(t){this.m_eps*=t}setError(t){this.m_eps=t}set(t,s){return this.m_value=t,this.m_eps=s??0,this}setWithEps(t,s){return void 0===s&&(s=1),this.m_value=t,this.m_eps=x.ulp(t)*s,this}setE(t){return this.m_value=t.m_value,this.m_eps=t.m_eps,this}precise(){return new x(this.m_value)}value(){return this.m_value}toDouble(){return this.m_value}eps(){return this.m_eps}resetError(){return this.m_eps=0,this}absThis(){return this.m_value=Math.abs(this.m_value),this}add(t){return this.clone().addThis(t)}addE(t){return this.clone().addThisE(t)}addThisE(t){const s=this.m_value+t.m_value,e=this.m_eps+t.m_eps+x.ulp(s);return this.m_value=s,this.m_eps=e,this}addThis(t){const s=this.m_value+t,e=this.m_eps+x.ulp(s);return this.m_value=s,this.m_eps=e,this}subE(t){return this.clone().subThisE(t)}sub(t){return this.clone().subThis(t)}subThisE(t){const s=this.m_value-t.m_value,e=this.m_eps+t.m_eps+x.ulp(s);return this.m_value=s,this.m_eps=e,this}subThis(t){const s=this.m_value-t,e=this.m_eps+x.ulp(s);return this.m_value=s,this.m_eps=e,this}setAddE(t,s){return this.m_value=t.m_value+s.m_value,this.m_eps=t.m_eps+s.m_eps+x.ulp(this.m_value),this}setAdd(t,s){return this.m_value=t+s,this.m_eps=x.ulp(this.m_value),this}setAddEN(t,s){return this.m_value=t.m_value+s,this.m_eps=t.m_eps+x.ulp(this.m_value),this}setAddNE(t,s){return this.m_value=t+s.m_value,this.m_eps=s.m_eps+x.ulp(this.m_value),this}setSubE(t,s){return this.m_value=t.m_value-s.m_value,this.m_eps=t.m_eps+s.m_eps+x.ulp(this.m_value),this}setSub(t,s){return this.m_value=t-s,this.m_eps=x.ulp(this.m_value),this}setSubEN(t,s){return this.m_value=t.m_value-s,this.m_eps=t.m_eps+x.ulp(this.m_value),this}setSubNE(t,s){return this.m_value=t-s.m_value,this.m_eps=s.m_eps+x.ulp(this.m_value),this}mulThisE(t){const s=this.m_value*t.m_value;return this.m_eps=this.m_eps*Math.abs(t.m_value)+t.m_eps*Math.abs(this.m_value)+this.m_eps*t.m_eps+x.ulp(s),this.m_value=s,this}mulThis(t){const s=this.m_value*t;return this.m_eps=this.m_eps*Math.abs(t)+x.ulp(s),this.m_value=s,this}mul(t){return this.clone().mulThis(t)}mulE(t){return this.clone().mulThisE(t)}setMulE(t,s){const e=t.m_value*s.m_value;return this.m_eps=t.m_eps*Math.abs(s.m_value)+s.m_eps*Math.abs(t.m_value)+t.m_eps*s.m_eps+x.ulp(e),this.m_value=e,this}setMul(t,s){return this.m_value=t*s,this.m_eps=x.ulp(this.m_value),this}setMulEN(t,s){return this.setE(t),this.mulThis(s)}setMulNE(t,s){return this.setE(s),this.mulThis(t)}mulThisByPower2(t){return this.m_value*=t,this.m_eps*=Math.abs(t),this}static st_mulByPower2(t,s){return new x(t.m_value,t.m_eps).mulThisByPower2(s)}divE(t){return this.clone().divThisE(t)}divThisE(t){const s=Math.abs(t.m_value),e=this.m_value/t.m_value;let r=(this.m_eps+Math.abs(e)*t.m_eps)/s;if(t.m_eps>.01*s){const u=t.m_eps/s;r*=1+(1+u)*u}return this.m_value=e,this.m_eps=r+x.ulp(e),this}divThis(t){const s=Math.abs(t);return this.m_value/=t,this.m_eps=this.m_eps/s+x.ulp(this.m_value),this}setDivE(t,s){return this.setE(t),this.divThisE(s)}setDiv(t,s){return this.m_value=t/s,this.m_eps=x.ulp(this.m_value),this}setDivEN(t,s){return this.setE(t),this.divThis(s)}setDivNE(t,s){return this.set(t),this.divThisE(s)}divThisByPower2(t){return this.m_value/=t,this.m_eps/=Math.abs(t),this}invThis(){return this.setE(T.clone().divThisE(this)),this}sqrt(){return this.clone().sqrtThis()}sqrtThis(){let t,s;return this.m_value>=0?(t=Math.sqrt(this.m_value),s=this.m_value>10*this.m_eps?.5*this.m_eps/t:this.m_value>this.m_eps?t-Math.sqrt(this.m_value-this.m_eps):Math.max(t,Math.sqrt(this.m_value+this.m_eps)-t),s+=x.ulp(t)):this.m_value<-this.m_eps?(t=Number.NaN,s=Number.NaN):(t=0,s=Math.sqrt(this.m_eps)),this.m_value=t,this.m_eps=s,this}sqr(){return this.clone().sqrThis()}sqrThis(){const t=this.m_value*this.m_value;return this.m_eps=2*this.m_eps*Math.abs(this.m_value)+this.m_eps*this.m_eps+x.ulp(t),this.m_value=t,this}setSin(t){const s=Math.sin(t.m_value),e=Math.cos(t.m_value);this.m_value=s;const r=Math.abs(s),u=Math.abs(t.value());return this.m_eps=(Math.abs(e)+.5*r*t.m_eps)*t.m_eps+x.ulp(r+u),this}static ulp(t){let s=Rt(t);const e=((0x7ff0000000000000n&s)>>52n)-1075n;return e>-1023n?(s=e+0x3ffn<<52n,function bi(n){return as[0]=n,us[0]}(s)):0===t?0:Number.MIN_VALUE}setCos(t){const s=Math.sin(t.m_value),e=Math.cos(t.m_value);this.m_value=e;const r=Math.abs(e),u=Math.abs(t.value());return this.m_eps=(Math.abs(s)+.5*r*t.m_eps)*t.m_eps+x.ulp(r+u),this}static st_cosAndSin(t,s,e){const r=Math.sin(t.m_value),u=Math.cos(t.m_value);e.m_value=r,s.m_value=u;const m=Math.abs(r),f=Math.abs(u),y=Math.abs(t.value());e.m_eps=(Math.abs(u)+.5*m*t.m_eps)*t.m_eps+x.ulp(m+y),s.m_eps=(Math.abs(r)+.5*f*t.m_eps)*t.m_eps+x.ulp(f+y)}negate(){return this.clone().negateThis()}negateThis(){return this.m_value=-this.m_value,this}setAbs(){return this.m_value=Math.abs(this.m_value),this}isInInterval(t){return v.construct(this.m_value-this.m_eps,this.m_value+this.m_eps).isIntersecting(t)}eq(t){return Math.abs(this.m_value-t.m_value)<=this.m_eps+t.m_eps}ne(t){return!this.eq(t)}gt(t){return this.m_value-t.m_value>this.m_eps+t.m_eps}lt(t){return t.m_value-this.m_value>this.m_eps+t.m_eps}ge(t){return!this.lt(t)}le(t){return!this.gt(t)}tolEQ(t,s){return Math.abs(this.m_value-t.m_value)<=s||this.eq(t)}tolNE(t,s){return!this.tolEQ(t,s)}tolGT(t,s){return this.m_value-t.m_value>s&&this.gt(t)}tolLT(t,s){return t.m_value-this.m_value>s&&this.lt(t)}tolGE(t,s){return!this.tolLT(t,s)}tolLE(t,s){return!this.tolGT(t,s)}isZero(){return Math.abs(this.m_value)<=this.m_eps}isFuzzyZero(){return this.isZero()&&0!==this.m_eps}tolIsZero(t){return Math.abs(this.m_value)<=Math.max(this.m_eps,t)}setPi(){this.setE(S)}setEuler(){this.set(2.718281828459045,M())}static size(){return 1}}function _(n,t){const s=Pt(n),e=Pt(t),r=53-l(s),u=53-l(e);return(r>=0?r:0)+(u>=0?u:0)<=52}function q(n,t){const s=n+t;return s-n===t&&s-t===n}function p(n,t){const s=n-t;return n-s===t&&t+s===n}function M(){return pt()}x.dimensions=1;const S=new x(Math.PI,.5*M()),z=new x(0,0),T=new x(1,0),D=new x(4,0);function I(n,t,s){return n.addE(t.subE(n).mulE(s))}function Z(n,t,s){return t.subE(t.subE(n).mulE(T.subE(s)))}function W(n){let t;if(0===n)t=1;else if(Math.abs(n)>.01)t=function U(n){return Math.atanh(n)}(n)/n;else{let s;t=0;const r=n*n;for(let u=2*Math.trunc(-36.841361487904734/Math.log(r)+2.5)-1;u>1;u-=2)s=1/u,t=(t+s)*r;t+=1}return t}function X(n){const t=Math.PI*Math.PI/6;let s;if(1===n)s=t;else if(n>1)s=t;else if(0===n)s=n;else if(n<0){const e=1+(n=Math.abs(n)),r=Math.log(e);s=r*r/-2-X(n/e)}else if(n>.5){const e=1-n,r=Math.log(n)*Math.log(e);s=t-X(e)-r}else{s=0;const e=1+Math.trunc(-16*Math.log(10)/Math.log(n)+1.5);let r=e;for(let u=e;u>0;u--,r-=1)s*=n,s+=1/(r*r);s*=n}return s}function J(n,t){const s=t*n;if(Math.abs(t)<.1){let e=0;for(let r=60;r>=1;r--)e*=s,e+=1/r/r;return e*=n,e}return X(s)/t}function G(n,t){return n<t?Lt(n,t):Lt(t,n)}function ot(n,t){const s=Math.abs(n);return t>=0?s:-s}function Mt(n){return Math.round(n)}function mt(n,t,s,e,r){r[0]=t[0]+(s[0]-t[0])*e,r[1]=t[1]+(s[1]-t[1])*e,3===n&&(r[2]=t[2]+(s[2]-t[2])*e)}function $(n,t,s,e,r){r[0]=s[0]-(s[0]-t[0])*(1-e),r[1]=s[1]-(s[1]-t[1])*(1-e),3===n&&(r[2]=s[2]-(s[2]-t[2])*(1-e))}function d(n,t,s,e,r){e<=.5?mt(n,t,s,e,r):$(n,t,s,e,r)}function P(n,t,s,e,r){r[0]=t[0].addE(s[0].subE(t[0]).mulE(e)),r[1]=t[1].addE(s[1].subE(t[1]).mulE(e))}function b(n,t,s,e,r){r[0]=s[0].subE(s[0].subE(t[0]).mulE(T.subE(e))),r[1]=s[1].subE(s[1].subE(t[1]).mulE(T.subE(e)))}function h(n,t,s){let e;return e=s<=.5?n+(t-n)*s:t-(t-n)*(1-s),e}function F(n,t,s){return n+(t-n)*s}function Y(n,t,s){return t-(t-n)*(1-s)}function bt(n,t,s,e){s<=.5?(e.x=n.x+(t.x-n.x)*s,e.y=n.y+(t.y-n.y)*s):(e.x=t.x-(t.x-n.x)*(1-s),e.y=t.y-(t.y-n.y)*(1-s))}function qt(n,t,s,e){s<=.5?(e.x=n.x+(t.x-n.x)*s,e.y=n.y+(t.y-n.y)*s,e.z=n.z+(t.z-n.z)*s):(e.x=t.x-(t.x-n.x)*(1-s),e.y=t.y-(t.y-n.y)*(1-s),e.z=t.z-(t.z-n.z)*(1-s))}function zt(n){return n*n}function Bs(n){return n*n*n}function Ls(n){return 1/Math.sqrt(n)}function Gs(n){return n<0?-1:n>0?1:0}function Os(n,t,s,e){const r=[0],u=[0],m=[0];return Ct(It(n,s,r),It(t,e,u),m)+(r[0]+u[0]+m[0])}const Wt=[0],Us=[0];function Qs(n,t,s){return function Vs(n,t,s,e){const r=Ct(n,t,Kt),u=Ct(r,s,Xt);return Ct(u,Kt[0]+Xt[0],e)}(It(n,t,Wt),s,Wt[0],Us)}const Zt=[0],St=[0],Ft=[0],kt=[0];function It(n,t,s){const e=n*t;return Yt(n,Zt,St),Yt(t,Ft,kt),s[0]=St[0]*kt[0]-(e-Zt[0]*Ft[0]-St[0]*Ft[0]-Zt[0]*kt[0]),e}function Yt(n,t,s){const e=134217729*n;t[0]=e-(e-n),s[0]=n-t[0]}const Kt=[0],Xt=[0];function Ct(n,t,s){const e=n+t;return s[0]=Math.abs(n)>Math.abs(t)?n-e+t:t-e+n,e}function js(n,t){return n%t}function Bt(n){const t=1-n;if(0===t)return 1;let s;if(t<=.01){const e=t,r=Math.log(e);s=1+e*(.4431471805599453-.25*r+e*(.05680519270997949-.09375*r+e*(.02183137044373718-.05859375*r+e*(.011544521417308362-.042724609375*r+e*(.00714200031339596-.0336456298828125*r+e*(.004854743337164948-.027757644653320312*r+e*(.003514687963781376-.023627042770385742*r)))))))}else{if(n<.016){const e=n,r=.25,u=.046875,m=.01953125,f=.01068115234375,y=.0067291259765625,N=.004626274108886719,C=.0033752918243408203,E=.0025710230693221092;return ht()*(1-e*(r+e*(u+e*(m+e*(f+e*(y+e*(N+e*(C+e*E))))))))}s=Jt(0,t,1)-n*Ht(0,t,1)/3}return Qt(s,1,ht())}function $t(n,t,s=Number.NaN){if((0,g.g)(t>=0&&t<=1),0===t)return n;let e=1,r=n;if(r<0&&(r=-r,e=-1),1===t){const C=Math.round(r/Vt()),E=r-C*Vt();return e*(2*C+Math.sin(E))}const u=ht(),m=Math.floor(r/u);1&m?r=(m+1)*u-r:r-=m*u;const f=Math.sin(r),y=Number.isNaN(s)?Bt(t):s;let N;if(1===f)N=y+Math.sqrt(1-t)*(r-u);else{const C=r*r;if(.01424*Math.pow(C,4)<=2*pt())N=r*(1+C*t*(-1/6+C*((4-3*t)/120-(16+(45*t-60)*t)/5040*C)));else if(t<=.01){const E=Math.sin(2*r),k=Math.sin(4*r),O=Math.sin(6*r),j=Math.sin(8*r),Q=Math.sin(10*r);N=r+t*((2*-r+E)/8+t*((-3*r+2*E-.25*k)/64+t*((-20*r+15*E-3*k+O/3)/1024+t*(5*(-140*r+112*E-28*k+16/3*O-.5*j)/65536+7*t*((-63*r+52.5*E-15*k+3.75*O-.625*j+.05*Q)/65536+t*(-693*r+594*E-185.625*k+1.375*O-12.375*j+1.8*Q-.125*Math.sin(12*r))/1048576)))))}else{const E=f*f,k=Math.cos(r),O=k*k,j=ts(f,k,t);N=f*(Jt(O,j,1)-t*E*Ht(O,j,1)/3)}}return 1&m?N=y*(m+1)-N:N+=y*m,e*N}function Ws(n,t,s=Number.NaN){if(0===n)return 0;let e=1,r=n;n<0&&(r=-r,e=-1);const u=Number.isNaN(s)?Bt(t):s,m=Math.floor(r/u);1&m?r=(m+1)*u-r:r-=m*u;let f=r<=0?0:r>=u?ht():function Ys(n,t,s){if(0===t)return n;if(1===t)return Math.asin(n);let e=0,r=!0;if(n<.2){const m=n*n,f=n*(1+m*t*(1/6+m*((13*t-4)/120+(16-284*t+493*t*t)/5040*m))),y=Math.abs(t*(4944*t-64-31224*t*t+37369*t*t*t)/362880*Math.pow(n,9));if(y<Math.abs(f)*pt())return f;e=f,r=y>.1*f}if(r){const m=1-t,f=1-n/s,y=Math.sqrt(f*f+m*m),N=Math.atan2(m,n+pt());e=ht()+Math.sqrt(y)*(N-ht())}let u=0;for(let m=0;m<7;m++){u=$t(e,t,s);const f=ts(Math.sin(e),Math.cos(e),t);if(e-=(u-n)/Math.sqrt(f),m>0&&Math.abs(u-n)<=4*pt()*n)break}return e}(r,t,u);return 1&m?f=ht()*(m+1)-f:f+=ht()*m,e*f}function Jt(n,t,s){(0,g.g)((0!==n?1:0)+(0!==t?1:0)+1>1);let e=n,r=t,u=s;for(;;){const m=Math.sqrt(e*r)+Math.sqrt(r*u)+Math.sqrt(u*e);e=.25*(e+m),r=.25*(r+m),u=.25*(u+m);const f=(e+r+u)/3,y=(f-e)/f,N=(f-r)/f,C=(f-u)/f;if(Math.abs(y)<=.0024&&Math.abs(N)<=.0024&&Math.abs(C)<=.0024){const E=y*N-C*C,k=y*N*C;return(1+(1/24*E-.1-3/44*k-5*E*E/208+E*k/16)*E+(1/14+3*k/104)*k)/Math.sqrt(f)}}}function Ht(n,t,s){(0,g.g)(0!==n||0!==t);let e=n,r=t,u=s;const m=new B(0);let f=1;for(;;){const y=.2*(e+r+3*u),N=(y-e)/y,C=(y-r)/y,E=(y-u)/y;if(Math.abs(N)<=.0015&&Math.abs(C)<=.0015&&Math.abs(E)<=.0015){const K=N*C,H=E*E,st=K-H,yt=K-6*H,nt=yt+st+st,tt=3/26,ut=yt*(9/22*.25*yt-.21428571428571427-1.5*tt*E*nt),at=E*(1/6*nt+E*(-.4090909090909091*st+E*tt*K));return 3*m.getResult()+f*(1+ut+at)/(y*Math.sqrt(y))}const k=Math.sqrt(e),O=Math.sqrt(r),j=Math.sqrt(u),Q=k*(O+j)+O*j;m.add(f/(j*(u+Q))),f*=.25,e=.25*(e+Q),r=.25*(r+Q),u=.25*(u+Q)}}function ts(n,t,s){return n<.999?1-s*zt(n):1-s+s*zt(t)}function Ks(n,t,s,e,r){return 0===n?0===e?t:1===e?s:r:1===n?0===e?t:1===e?s:h(t,s,e):(2===n&&(0,g.b)("angular interpolation"),void(0,g.b)(""))}function Xs(n,t,s,e,r,u,m,f){if(0===n)for(let y=0;y<u;++y)e[y+r]=0===m?t[y]:1===m?s[y]:f;else if(1===n)if(0===m)vt(e,t,r,0,u);else if(1===m)vt(e,s,r,0,u);else for(let y=0;y<u;++y)e[y+r]=h(t[y],s[y],m);else if(2===n)if(0===m)vt(e,t,r,0,u);else if(1===m)vt(e,s,r,0,u);else{let y=0;for(let N=0,C=r;N<u;++N,++C)e[C]=h(t[N],s[N],m),y+=e[C]*e[C];if(y>0){y=Math.sqrt(y);for(let N=r;N<r+u;++N)e[N]/=y}else{for(let N=r;N<r+u;++N)e[N]=0;e[r]=1}}else(0,g.b)("")}function vt(n,t,s,e,r){if(0===r)return;let u=0,m=s,f=e;for(;u++<r;)n[m++]=t[f++]}function $s(n,t,s){let e=0;for(let r=0;!e&&r<s;++r)e=n[r]-t[r];return e}function Tt(n,t){return n}function ss(n){n.sort((t,s)=>t<s?-1:t>s?1:0)}function Js(n,t){const s=n.slice(0,t);ss(s),vt(n,s,0,0,t)}function Hs(n,t,s,e){const r=n.slice(t,t+s);r.sort(e),vt(n,r,t,0,s)}function ti(n,t){return n<t?-1:n>t?1:0}function si(n,t,s,e){return n<s?-1:n>s?1:t<e?-1:t>e?1:0}function ii(n,t){if(n.length<2)return n.length;let s=0;for(let e=1;e<n.length;++e)t(n[e],n[s])||(s++,n[e]=Tt(n[s],n[s]=n[e]));return 1+s}function ei(n,t){n[t]=n.at(-1),n.pop()}function ni(n,t=!1){return{[Symbol.dispose](){this.bForget||n()},bForget:t}}function ri(n,t,s){n.length=t,n.fill(s)}function oi(n,t,s){n.length=s;for(let e=0;e<s;++e)n[e]=new t}function is(n,t){const s=new Array(t);for(let e=0;e<t;++e)s[e]=new n;return s}function hi(n,t,s){for(let e=0;e<s;++e)n[e].assign(t[e]);return s}function ui(n,t){const s=n.slice(0,t);for(let e=0;e<t;++e)s[e]=s[e].clone();return s}function ai(n){return Array.from({length:n},()=>null)}function li(n,t){return Array.from({length:t},()=>n())}function es(n,t){const s=new Array(n);return s.fill(t),s}function ci(n,t){return t in n&&1===Object.getOwnPropertyNames(n).length}class mi{constructor(...t){this.m_elts=t}get length(){return this.m_elts.length}at(t){return this.m_elts[t]}[Symbol.dispose](){for(const t of this.m_elts)t[Symbol.dispose]()}}function Lt(n,t){return{first:n,second:t}}const ns=Math.PI,rs=2*Math.PI,os=.5*Math.PI;class yi{constructor(t,s){this.m_cr=t,this.m_cc=s,this.m_v=es(t*s,0)}get(t,s){return this.m_v[t*this.m_cc+s]}set(t,s,e){this.m_v[t*this.m_cc+s]=e}inc(t,s){return++this.m_v[t*this.m_cc+s]}}const hs=new ArrayBuffer(8),us=new Float64Array(hs),as=new BigUint64Array(hs),fi=0x0fffffffffffffn,xi=0x7ff0000000000000n;function di(){return Number.EPSILON*Fi}function Rt(n){return us[0]=n,as[0]}function Pt(n){return Rt(n)&fi}function ls(n){return Number((Rt(n)&xi)>>52n)}function wt(n){if(0n===n)return-1n;if(1n===n||-1n===n)return 0n;n<0n&&(n=-n);let t=0n,s=512n,e=1n<<t+s;for(;n>=e;)t+=s,s<<=1n,e<<=s;let r=t;s>>=1n;let u=r+s;for(;s>0n;)n<1n<<u||(r=u),s>>=1n,u=r+s;return r}function Gt(n,t){return n===t||Number.isNaN(n)&&Number.isNaN(t)}function vi(n,t,s){return n===t||Math.abs(n-t)<=s||Number.isNaN(n)&&Number.isNaN(t)}function wi(n,t){return n<t?-1:n>t?1:0}function Ni(n,t){if(n<t)return-1;if(n>t)return 1;if(n===t)return 0;{const s=Number.isNaN(n),e=Number.isNaN(t);return s<e?-1:s>e?1:0}}function pi(){return 2147483647}function Mi(){return 32767}function Ot(){return 2147483647}function _i(){return-2147483648}const Dt=2147483647,gi=BigInt(Dt),cs=2166136261,Et=16777619,Ti=14695981039346656037n,Nt=1099511628211n;function Ii(n){let t=cs;for(let s=0,e=n.length;s<e;++s)t=(t^n.charCodeAt(s))*Et;return t&Dt}function At(n,t){return t+2654435769+(n<<6)+(n>>2)&Dt}function Pi(n,t){return At(n,ys(t))}function ms(n){return At(3735928559,n)}function Di(n,t){return At(n,ms(t))}function Ai(n){return function Ci(n){let t=cs,s=n;return t=(t^255&s)*Et,s>>=8,t=(t^255&s)*Et,s>>=8,t=(t^255&s)*Et,s>>=8,t=(t^255&s)*Et,t&Dt}(n)}function ys(n){return Number(function Ri(n){let t=Ti,s=n;return t=(t^0xffn&s)*Nt,s>>=8n,t=(t^0xffn&s)*Nt,s>>=8n,t=(t^0xffn&s)*Nt,s>>=8n,t=(t^0xffn&s)*Nt,s>>=8n,t=(t^0xffn&s)*Nt,s>>=8n,t=(t^0xffn&s)*Nt,s>>=8n,t=(t^0xffn&s)*Nt,t&gi}(n))}function zi(n){return ys(Rt(function qi(n){return fs(n)}(n)))}function Zi(n){return function Ei(n){return 1103515245*n+12345&2147483647}(n)}const Si=100,Fi=100;function Ut(){return Number.EPSILON*Si}function ki(){return.38196601125010515}function Bi(){return 1.4142135623730951}function pt(){return Number.EPSILON}function Li(n,t,s){return n===t||n===s}function Qt(n,t,s){return n>=t?n<=s?n:s:t}function Gi(n,t,s){const e=n[0];if(e>=t){if(e<=s)return!1;n[0]=s}else n[0]=t;return!0}function Oi(n,t){return n>=t?t:n<-t?-t:n}function Vt(){return ns}function Ui(){return rs}function ht(){return os}const Qi=3*ht();function Vi(){return Qi}function fs(n){return n+0}function xs(n){return{v:n}}class R{constructor(){this.m_rn=xs(0n),this.m_rd=xs(1n),this.m_bNaN=!1,this.m_bNormalized=!1,this.m_power=0,this.m_sign=0}static constructAssign(t,s){const e=t.clone();return void 0!==s&&e.limitPrecisionThis(s),e}static constructDouble(t){return(new R).setDouble(t)}static constructInt64(t){return(new R).setInt64(t)}static constructRational(t,s){return(new R).setRational(t,s)}static constructInt32(t){return this.constructInt64(BigInt(Math.trunc(t)))}[Symbol.toPrimitive](t){return this}compare(t){return this.lt(t)?-1:this.gt(t)?1:0}assignCopy(t){return this.setThis(t)}abs(){return this.clone().absThis()}absThis(){return this.isNAN()||(this.m_sign*=this.m_sign),this}clone(){return(new R).setThis(this)}setThis(t){return this.m_bNaN=t.m_bNaN,this.m_bNormalized=t.m_bNormalized,this.m_rn.v=t.m_rn.v,this.m_rd.v=t.m_rd.v,this.m_power=t.m_power,this.m_sign=t.m_sign,this}setZero(){return this.m_rn.v=0n,this.m_rd.v=1n,this.m_bNaN=!1,this.m_power=0,this.m_bNormalized=!0,this.m_sign=0,this}setDouble(t){if(this.setZero(),0===t)return this;if(Number.isInteger(t)&&Math.abs(t)<2147483647)return this.setInt32(t);const s=Rt(t),e=(s&R.s_em)>>52n,r=!!(s&R.s_sm),u=s&R.s_fm;if(e===R.s_emax)return u?(this.m_rn.v=this.m_rd.v=0n,this.m_bNaN=!0,this):(this.m_rn.v=r?-1n:1n,this.m_rd.v=0n,this);0n===e&&(0,g.b)("denormalized numbers not yet implemented");const m=e-1023n,y=m<0n?-m:0n;return this.m_rn.v=(1n<<52n|u)<<(m>=0n?m:0n),this.m_rd.v=1n<<52n+y,this.m_sign=r?-1:1,this.m_bNormalized=!1,this.normalizeThis()}setInt64(t){return 0n===t?this.setZero():(this.m_bNaN=!1,this.m_sign=t>0n?1:-1,this.m_rn.v=t>0n?t:-t,this.m_rd.v=1n,this.m_power=0,this.m_bNormalized=!1,this.normalizeThis())}setRational(t,s){return 0n===t?0n===s?this.setNAN():this.setZero():0n===s?t>0n?this.setPositiveInf():this.setNegativeInf():(this.m_sign=(t>0n?1:-1)*(s>0n?1:-1),this.m_rn.v=t>0n?t:-t,this.m_rd.v=s>0n?s:-s,this.m_power=0,this.m_bNormalized=!1,this.normalizeThis())}setInt32(t){return this.setInt64(BigInt(Math.trunc(t)))}getDouble(){return this.convertToDouble()}toDouble(){return this.convertToDouble()}value(){return this.convertToDouble()}isNAN(){return this.m_bNaN}isPositiveInf(){return!this.isNAN()&&0n===this.m_rd.v&&1===this.m_sign}isNegativeInf(){return!this.isNAN()&&0n===this.m_rd.v&&-1===this.m_sign}isFinite(){return!this.isNAN()&&0n!==this.m_rd.v}setNAN(){return this.m_bNaN=!0,this.m_rn.v=0n,this.m_rd.v=0n,this.m_power=0,this.m_bNormalized=!0,this}setPositiveInf(){return this.m_rn.v=1n,this.m_rd.v=0n,this.m_bNaN=!1,this.m_bNormalized=!0,this.m_sign=1,this.m_power=0,this}setNegativeInf(){return this.m_rn.v=1n,this.m_rd.v=0n,this.m_bNaN=!1,this.m_bNormalized=!0,this.m_sign=-1,this.m_power=0,this}subThis(t){if(t.isNAN()&&this.setNAN(),this.isPositiveInf()&&t.isPositiveInf())this.setNAN();else{if(this.isPositiveInf()&&t.isNegativeInf())return this.setPositiveInf(),this;if(this.isNegativeInf()&&t.isNegativeInf())this.setNAN();else if(this.isNegativeInf()&&t.isPositiveInf())return this.setNegativeInf(),this}return this.isNAN()?this:this.opPlusMinus(t,!1)}thisSubAbs(t){return(0,g.g)(0),this}mulThis(t){return t.isNAN()&&this.setNAN(),this.isNAN()?this:(this.m_sign*=t.m_sign,0===this.m_sign?this.setZero():(this.m_rn.v*=t.m_rn.v,this.m_rd.v*=t.m_rd.v,this.m_power+=t.m_power,this.m_bNormalized=!1,this.normalizeThis(),this))}mulDoubleThis(t){return this.mulThis(R.constructDouble(t))}thisMulInt64(t){return(0,g.g)(0),this}thisMulInt32(t){return(0,g.g)(0),this}divThis(t){return this.mulThis(t.clone().invertThis())}divDoubleThis(t){return this.divThis(R.constructDouble(t))}addDoubleThis(t){return this.addThis(R.constructDouble(t))}subDoubleThis(t){return this.subThis(R.constructDouble(t))}mul(t){return this.clone().mulThis(t)}mulBigIntThis(t){return this.mulThis(R.constructInt64(t))}mulDouble(t){return this.clone().mulThis(R.constructDouble(t))}div(t){return this.clone().divThis(t)}divDouble(t){return this.clone().divDoubleThis(t)}add(t){return this.clone().addThis(t)}fmSubThis(t,s){return this.subThis(t.clone().mulThis(s))}fmAddThis(t,s){return this.addThis(t.clone().mulThis(s))}addThis(t){if(t.isNAN()&&this.setNAN(),this.isPositiveInf()&&t.isPositiveInf())return this.setPositiveInf(),this;if(this.isPositiveInf()&&t.isNegativeInf())this.setNAN();else{if(this.isNegativeInf()&&t.isNegativeInf())return this.setNegativeInf(),this;this.isNegativeInf()&&t.isPositiveInf()&&this.setNAN()}return this.isNAN()?this:this.opPlusMinus(t,!0)}addDouble(t){return this.clone().addThis(R.constructDouble(t))}sub(t){return this.clone().subThis(t)}subDouble(t){return this.clone().subThis(R.constructDouble(t))}isZero(){return 0===this.m_sign}equals(t){return this.clone().subThis(t).isZero()}lt(t){return!this.isNAN()&&!t.isNAN()&&!(this.isPositiveInf()&&t.isPositiveInf()||this.isNegativeInf()&&t.isNegativeInf())&&!this.isPositiveInf()&&(!!t.isPositiveInf()||this.clone().sub(t).LZ())}absLessAbs(t){return this.abs().lt(t.abs())}gt(t){return this.clone().sub(t).GZ()}lte(t){return this.sub(t).LEZ()}gte(t){return this.sub(t).GEZ()}normalizeThis(){if(this.m_bNormalized)return this;if(0n===this.m_rn.v)return this.setZero();let t=0,s=0xffffffffn;for(;0n===(this.m_rn.v&s)&&s<=this.m_rn.v;)s<<=32n,t+=32;s&=this.m_rn.v,s>>=BigInt(t),t+=o(BigInt.asUintN(32,s))-1;let e=0;for(s=0xffffffffn;0n===(this.m_rd.v&s)&&s<=this.m_rd.v;)s<<=32n,e+=32;return s&=this.m_rd.v,s>>=BigInt(e),e+=o(BigInt.asUintN(32,s))-1,this.m_rn.v>>=BigInt(t),this.m_rd.v>>=BigInt(e),this.m_power+=t-e,this.m_rn.v>1n&&this.m_rd.v>1n&&(this.m_rn.v%this.m_rd.v===0n?(this.m_rn.v/=this.m_rd.v,this.m_rd.v=1n):this.m_rd.v%this.m_rn.v===0n&&(this.m_rd.v/=this.m_rn.v,this.m_rn.v=1n)),this.m_bNormalized=!0,this}negateThis(){return this.isNAN()||(this.m_sign*=-1),this}negate(){return this.clone().negateThis()}invertThis(){return this.isNAN()?this:this.isPositiveInf()||this.isNegativeInf()?(this.setZero(),this):0n===this.m_rn.v?(this.setPositiveInf(),this):(this.m_rd=Tt(this.m_rn,this.m_rn=this.m_rd),this.m_power=-this.m_power,this)}limitPrecisionThis(t){if(0===t)return this;if(this.isZero())return this.setZero();if(!this.isFinite())return this;this.normalizeThis();let s=Number(wt(this.m_rn.v));if(s>t){const e=s-t;this.m_rn.v>>=BigInt(s-t),this.m_power+=e}if(s=Number(wt(this.m_rd.v)),s>t){const e=s-t;this.m_rd.v>>=BigInt(s-t),this.m_power-=e}return this}hiBitIndex(){return Math.max(Number(wt(this.m_rn.v)),Number(wt(this.m_rd.v)))}ldexp(t){return this.clone().ldexpThis(t)}ldexpThis(t){return t&&(this.m_bNormalized=!1,this.m_power+=t,this.normalizeThis()),this}LZ(){return!this.isNAN()&&-1===this.m_sign}GZ(){return!this.isNAN()&&1===this.m_sign}LEZ(){return!this.isNAN()&&this.m_sign<=0}GEZ(){return!this.isNAN()&&this.m_sign>=0}toString(){return this.toDouble().toString()}sqr(){return this.clone().sqrThis()}sqrThis(){return this.mulThis(this.clone())}static sqrt(t,s){if(t.m_sign<0n&&(0,g.n)("MP_value: sqrt(-1)"),t.isZero())return t.clone();let e=52,r=2220446049250313e-31;for(;e<s;)2*e<=s?(r*=r,e*=2):(r*=2220446049250313e-31,e+=52);e+=52;const u=wt(t.m_rn.v),m=wt(t.m_rd.v);let f,y=t.m_power+Number(u-m);const N=new R;Math.abs(y)>200?(1&Math.abs(y)&&(y+=1),f=R.constructAssign(t,53).ldexpThis(-y).value(),N.setThis(t).ldexpThis(-y),(0,g.g)(Number.isFinite(f))):(N.setThis(t),f=N.value(),(0,g.g)(Number.isFinite(f)),y=0),f=Math.sqrt(f);const C=R.constructDouble(f),E=R.constructDouble(r);E.mulThis(C).ldexpThis(1);const k=r*f*2,O=C.clone(),j=new R;let Q;for(let K=0;K<10;++K){O.mulThis(C),j.setThis(N).subThis(O).absThis();let H=j.value();if(Q=1,H<.9)for(;H>k;)H*=H,++Q;else Q=4;if(j.lte(E))break;for(let st=0;st<Q;st++)O.setThis(C).divThis(N).invertThis().addThis(C).ldexpThis(-1).limitPrecisionThis(e),C.setThis(O)}return C.ldexpThis(y/2)}static cubicRoot(t,s){if(t.isZero())return t.clone();let e=52,r=2220446049250313e-31;for(;e<s;)2*e<=s?(r*=r,e*=2):(r*=2220446049250313e-31,e+=52);e+=52;const u=Math.pow(Math.abs(t.value()),1/3),m=R.constructDouble(u),f=m.clone();f.sqrThis().mulDoubleThis(3).mulDoubleThis(r),f.limitPrecisionThis(32),t.LZ()&&m.negateThis();for(let y=0;y<10;++y){const N=m.clone();N.sqrThis().mulThis(m);const C=N.clone();if(C.subThis(t),C.absThis().limitPrecisionThis(32),C.lte(f))break;C.setThis(t),C.ldexpThis(1),C.addThis(N);const E=N.clone();E.ldexpThis(1),E.addThis(t),C.divThis(E),m.mulThis(C),m.limitPrecisionThis(e)}return m}isInTheRangeOfDouble(){return(0,g.g)(0),!1}sign(){return this.m_sign}cosAndSin(t,s){(0,g.g)(0)}static nan(){return(0,g.g)(0),new R}convertToDouble(){if(this.m_bNaN)return Number.NaN;if(this.isZero())return 0;if(0n===this.m_rd.v)return 1===this.m_sign?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY;const t=-1===this.m_sign,s=this.m_rn.v<<(this.m_power>=0?BigInt(this.m_power):0n);let e=this.m_rd.v<<(this.m_power<0?BigInt(-this.m_power):0n);const r=s/e;let u=Number(r);if(BigInt(u)!==r)return t?-u:u;let m=s-r*e;if(m){let f=wt(e)-1023n;f>0n&&(e>>=f,m<<=52n,m>>=f);let y=Number(m);Number.isFinite(y)||(m>>=52n,y=Number(m),f=0n),f>0n&&(y/=Math.pow(2,52)),u+=y/Number(e)}return t?-u:u}signVal(){return 1===this.m_sign?1n:-1===this.m_sign?-1n:0n}opPlusMinus(t,s){const e=Math.min(this.m_power,t.m_power);let r,u;this.m_power>e?(r=BigInt(this.m_power-e),u=0n):(r=0n,u=BigInt(t.m_power-e));const m=this.signVal()*this.m_rn.v*t.m_rd.v<<r,f=t.signVal()*t.m_rn.v*this.m_rd.v<<u;return this.m_rn.v=s?m+f:m-f,this.m_rd.v*=t.m_rd.v,this.m_power=e,this.m_sign=1,this.m_rn.v<0n&&(this.m_sign=-1,this.m_rn.v=-this.m_rn.v),this.m_bNormalized=!1,this.normalizeThis(),this}}R.s_sm=0x8000000000000000n,R.s_em=0x7ff0000000000000n,R.s_fm=0x000fffffffffffffn,R.s_emax=0x7ffn;const ji=R.constructInt32(1),Wi=R.constructInt32(0);function Ki(n,t){let s=ls(n);const e=ls(t);return s===e?(s-=53-function Yi(n,t){return function c(n){let t=0;return 0xffffffff00000000n&n&&(t=32,n>>=32n),t+function a(n){let t=0;return n&dt&&(t+=16,n>>=16n),n&gt&&(t+=8,n>>=8n),n&rt&&(t+=4,n>>=4n),t+i[Number(BigInt.asUintN(4,n))]+1}(n)}(n^t)}(Pt(n),Pt(t)),s):s>e?s:e}function Xi(n,t){for(let s=0,e=0,r=n.length;s<r;s+=2,e++)t[e].x=n[s],t[e].y=n[s+1]}function $i(n){const t=new Float64Array(2*n.length);for(let s=0,e=n.length;s<e;++s){const r=s<<1;t[r]=n[s].x,t[r+1]=n[s].y}return t}function Ji(n){const t=is(A,n.length);for(let s=0,e=n.length;s<e;++s)t[s].setCoords(n[s][0],n[s][1]);return t}class A{static construct(t,s){return new A(t,s)}constructor(t,s){void 0!==t?(this.x=t,this.y=s):this.x=this.y=Number.NaN}clone(){return new A(this.x,this.y)}assign(t){this.setCoordsPoint2D(t)}setCoords(t,s){return this.x=t,this.y=s,this}setCoordsPoint2D(t){this.x=t.x,this.y=t.y}isEqualPoint2D(t,s){return void 0!==s?Math.abs(this.x-t.x)<=s&&Math.abs(this.y-t.y)<=s:this.x===t.x&&this.y===t.y}isEqual(t,s,e){return void 0!==e?Math.abs(this.x-t)<=e&&Math.abs(this.y-s)<=e:this.x===t&&this.y===s}equalsPoint2D(t,s){return this.isEqualPoint2D(t,s)}setSub(t,s){this.x=t.x-s.x,this.y=t.y-s.y}addThis(t){return this.x+=t.x,this.y+=t.y,this}setAdd(t,s){return this.x=t.x+s.x,this.y=t.y+s.y,this}absoluteOther(t){}absolute(){return(0,g.g)(0),this}setNegate(){this.x=-this.x,this.y=-this.y}setNegateOther(t){this.x=-t.x,this.y=-t.y}interpolateThis(t,s){}interpolate(t,s,e){(0,g.g)(0)}scaleAddThis(t,s){this.x=this.x*t+s.x,this.y=this.y*t+s.y}setScaleAdd(t,s,e){this.x=s.x*t+e.x,this.y=s.y*t+e.y}scaleOther(t,s){(0,g.g)(0)}scale(t){this.x*=t,this.y*=t}compare(t){return this.y<t.y?-1:this.y>t.y?1:this.x<t.x?-1:this.x>t.x?1:0}compareX(t){return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0}normalizeOther(t){(0,g.g)(0)}normalize(){const t=this.length();return t?(this.x/=t,this.y/=t):(this.x=1,this.y=0),this}getUnitVector(){return this.clone().normalize()}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}sqrLength(){return this.x*this.x+this.y*this.y}static averageFast(t,s){return(0,g.g)(0),{}}static average(t,s){const e=new A;if(0===s)return e.setNAN(),e;if(1===s)return e.assign(t[0]),e;const r=new B(t[0].x),u=new B(t[0].y);for(let m=1;m<s;m++)r.add(t[m].x),u.add(t[m].y),255&m||(r.normalize(),u.normalize());return e.x=r.getResult()/s,e.y=u.getResult()/s,e}offset(t,s){const e=A.distance(t,s),r=A.construct(this.x,this.y);if(0===e)return A.distance(r,t);const u=s.clone();return u.subThis(t),r.subThis(t),r.crossProduct(u)/e}side(t,s){return t.equals(s)?this.equals(t)?0:1:A.orientationRobust(s,t,this)}static sqrDistance(t,s){const e=t.x-s.x,r=t.y-s.y;return e*e+r*r}static sqrDistanceCoords(t,s,e,r){const u=e-t,m=r-s;return u*u+m*m}static distance(t,s){return Math.sqrt(A.sqrDistance(t,s))}dotProduct(t){return this.x*t.x+this.y*t.y}dotProductAbs(t){return Math.abs(this.x*t.x)+Math.abs(this.y*t.y)}crossProduct(t){return this.x*t.y-this.y*t.x}crossProductAbs(t){return(0,g.g)(0),0}rotateDirect(t,s){const r=this.x*s+this.y*t;this.x=this.x*t-this.y*s,this.y=r}rotateReverse(t,s){const r=-this.x*s+this.y*t;this.x=this.x*t+this.y*s,this.y=r}leftPerpendicularThis(){const t=this.x;this.x=-this.y,this.y=t}leftPerpendicularOther(t){const s=t.x;this.x=-t.y,this.y=s}rightPerpendicularThis(){const t=this.x;this.x=this.y,this.y=-t}rightPerpendicularOther(t){const s=t.x;this.x=t.y,this.y=-s}equals(t){return this.x===t.x&&this.y===t.y}notequals(t){return this.x!==t.x||this.y!==t.y}not(){return!this.x&&!this.y}gt(t){return this.y>t.y||this.y===t.y&&this.x>t.x}gte(t){return!this.lt(t)}lt(t){return this.y<t.y||this.y===t.y&&this.x<t.x}lte(t){return!this.gt(t)}subThis(t){return this.x-=t.x,this.y-=t.y,this}divThis(t){return this.x/=t,this.y/=t,this}add(t){return new A(this.x+t.x,this.y+t.y)}sub(t){return new A(this.x-t.x,this.y-t.y)}negateThis(){return this.x=-this.x,this.y=-this.y,this}negate(){return new A(-this.x,-this.y)}mul(t){return new A(this.x*t,this.y*t)}mulThis(t){return this.x*=t,this.y*=t,this}divide(t){return new A(this.x/t,this.y/t)}setNAN(){this.x=this.y=Number.NaN}isNAN(){return Number.isNaN(this.x)||Number.isNaN(this.y)}static getNAN(){return new A(Number.NaN,Number.NaN)}isFinite(){return Number.isFinite(this.x)&&Number.isFinite(this.y)}isZero(){return 0===this.x&&0===this.y}norm(t){switch(t){case 0:{const s=Math.abs(this.x),e=Math.abs(this.y),r=s-e;return r>=0?s:r<=0?e:Number.NaN}case 1:return Math.abs(this.x)+Math.abs(this.y);case 2:return Math.sqrt(this.x*this.x+this.y*this.y);default:(0,g.t)("norm")}}getQuarter(){return A.getQuarterCoords(this.x,this.y)}static getQuarterCoords(t,s){return t>0?s>=0?1:4:s>0?2:0===t?4:3}static compareVectors(t,s){const e=t.getQuarter(),r=s.getQuarter();return r===e?A.orientationRobustImpl(A.construct(0,0),s,t,!0):e<r?-1:1}static compareVectorsOrigin(t,s,e){const r=s.sub(t),u=e.sub(t),m=r.getQuarter(),f=u.getQuarter();return f===m?A.orientationRobustImpl(t,e,s,!0):m<f?-1:1}static orientationRobust(t,s,e){return A.orientationRobustImpl(t,s,e,!1)}static orientationRobustEx(t,s,e,r){if(t.equals(s)||e.equals(r))return 0;const u=s.x-t.x,m=s.y-t.y,f=r.x-e.x,y=r.y-e.y;{const O=A.getQuarterCoords(u,m)-1,j=A.getQuarterCoords(f,y)-1,Q=A.d[O][j];if(0!==Q)return Q}const N=u*y,C=m*f,E=4*pt()*(Math.abs(N)+Math.abs(C)),k=N-C;return Math.abs(k)>=E?k<0?-1:k>0?1:0:A.orientationRobustExMp(t,s,e,r)}static orientationRobustExMp(t,s,e,r){const u=R.constructDouble(s.x),m=R.constructDouble(r.x);u.subThis(R.constructDouble(t.x)),m.subThis(R.constructDouble(e.x));const f=R.constructDouble(s.y),y=R.constructDouble(r.y);return f.subThis(R.constructDouble(t.y)),y.subThis(R.constructDouble(e.y)),u.mulThis(y),f.mulThis(m),u.subThis(f),u.LZ()?-1:u.GZ()?1:0}static orientationNonRobust(t,s,e){const r=s.sub(t).crossProduct(e.sub(t));return r<0?-1:r>0?1:0}static orientationRobustImpl(t,s,e,r){if(s.isEqualPoint2D(t)||e.isEqualPoint2D(t)||s.isEqualPoint2D(e))return 0;const u=s.x-t.x,m=s.y-t.y,f=e.x-t.x,y=e.y-t.y;if(!r){const E=A.getQuarterCoords(u,m)-1,k=A.getQuarterCoords(f,y)-1,O=A.d[E][k];if(0!==O)return O}const N=(Math.abs(u)+Math.abs(m)+Math.abs(f)+Math.abs(y))*(Math.abs(s.x)+Math.abs(s.y)+Math.abs(e.x)+Math.abs(e.y))*8*M(),C=u*y-m*f;if(Math.abs(C)>N)return C<0?-1:1;if(p(s.x,t.x)&&p(e.y,t.y)&&p(s.y,t.y)&&p(e.x,t.x)&&_(u,y)&&_(m,f)){const E=u*y,k=m*f;if(p(E,k)){const O=E-k;return O<0?-1:O>0?1:0}}return A.orientationRobustMp(t,s,e)}static orientationRobustMp(t,s,e){const r=R.constructDouble(s.x),u=R.constructDouble(e.x);{const y=R.constructDouble(t.x);r.subThis(y),u.subThis(y)}const m=R.constructDouble(e.y),f=R.constructDouble(s.y);{const y=R.constructDouble(t.y);m.subThis(y),f.subThis(y)}return r.mulThis(m),f.mulThis(u),r.subThis(f),r.LZ()?-1:r.GZ()?1:0}static inCircleRobust(t,s,e,r){const u=new x,m=new x;u.set(t.x),u.subThis(r.x),m.set(t.y),m.subThis(r.y);const f=new x,y=new x;f.set(s.x),f.subThis(r.x),y.set(s.y),y.subThis(r.y);const N=new x,C=new x;N.set(e.x),N.subThis(r.x),C.set(e.y),C.subThis(r.y);const E=u.mulE(y).subE(m.mulE(f)),k=f.mulE(C).subE(y.mulE(N)),O=u.mulE(C).subE(m.mulE(N)),j=u.mulE(u).addE(m.mulE(m)),Q=f.mulE(f).addE(y.mulE(y)),K=N.mulE(N).addE(C.mulE(C)),H=j.mulE(k).subE(Q.mulE(O)).addE(K.mulE(E));if(!H.isFuzzyZero()){const st=H.value();return st<0?-1:st>0?1:0}return A.inCircleRobustMp(t,s,e,r)}static inCircleRobustMp(t,s,e,r){do{if(!(p(t.x,r.x)&&p(t.y,r.y)&&p(s.x,r.x)&&p(s.y,r.y)&&p(e.x,r.x)&&p(e.y,r.y)))break;const nt=t.x-r.x,tt=t.y-r.y,ut=s.x-r.x,at=s.y-r.y,ft=e.x-r.x,xt=e.y-r.y;if(!(_(nt,at)&&_(tt,ut)&&_(ut,xt)&&_(at,ft)&&_(nt,xt)&&_(tt,ft)&&_(nt,nt)&&_(tt,tt)&&_(ut,ut)&&_(at,at)&&_(ft,ft)&&_(xt,xt)))break;const ds=nt*at,bs=tt*ut,vs=ut*xt,ws=at*ft,Ns=nt*xt,ps=tt*ft,Ms=nt*nt,_s=tt*tt,gs=ut*ut,Cs=at*at,Ts=ft*ft,Rs=xt*xt;if(!(p(ds,bs)&&p(vs,ws)&&p(Ns,ps)&&q(Ms,_s)&&q(gs,Cs)&&q(Ts,Rs)))break;const Es=ds-bs,Is=vs-ws,Ps=Ns-ps,Ds=Ms+_s,As=gs+Cs,qs=Ts+Rs;if(!_(Ds,Is)||!_(As,Ps)||!_(qs,Es))break;const zs=Ds*Is,Zs=As*Ps,Ss=qs*Es;if(!p(zs,Zs))break;const Fs=zs-Zs;if(!q(Fs,Ss))break;const ks=Fs+Ss;return ks<0?-1:ks>0?1:0}while(0);const u=R.constructDouble(r.x),m=R.constructDouble(r.y),f=R.constructDouble(t.x),y=R.constructDouble(t.y);f.subThis(u),y.subThis(m);const N=R.constructDouble(s.x),C=R.constructDouble(s.y);N.subThis(u),C.subThis(m);const E=R.constructDouble(e.x),k=R.constructDouble(e.y);E.subThis(u),k.subThis(m);const O=f.mul(C).sub(y.mul(N)),j=N.mul(k).sub(C.mul(E)),Q=f.mul(k).sub(y.mul(E)),K=f.mul(f).add(y.mul(y)),H=N.mul(N).add(C.mul(C)),st=E.mul(E).add(k.mul(k)),yt=K.mul(j).sub(H.mul(Q)).add(st.mul(O));return yt.LZ()?-1:yt.GZ()?1:0}static inCircleRobustMp3Point(t,s,e){const r=R.constructDouble(t.x),u=R.constructDouble(t.y),m=R.constructDouble(s.x),f=R.constructDouble(s.y),y=R.constructDouble(e.x),N=R.constructDouble(e.y),C=y.mul(y).add(N.mul(N)).sub(y.mul(r).add(N.mul(u)).add(y.mul(m)).add(N.mul(f))).add(r.mul(m).add(u.mul(f)));return C.LZ()?-1:C.GZ()?1:0}static inCircleRobust3Point(t,s,e){const r=new x(t.x),u=new x(t.y),m=new x(s.x),f=new x(s.y),y=new x(e.x),N=new x(e.y),C=y.mulE(y).addE(N.mulE(N)).subE(y.mulE(r).addE(N.mulE(u)).addE(y.mulE(m)).addE(N.mulE(f))).addE(r.mulE(m).addE(u.mulE(f)));if(!C.isFuzzyZero()){const E=C.value();return E<0?-1:E>0?1:0}return A.inCircleRobustMp3Point(t,s,e)}static calculateCircleCenterFromThreePoints(t,s,e){if(t.equals(e)||t.equals(s)||e.equals(s))return A.getNAN();const r=function Hi(n,t,s){const e=new x(t.x);e.subThis(n.x);const r=new x(t.y);r.subThis(n.y);const u=new x(s.x);u.subThis(n.x);const m=new x(s.y);m.subThis(n.y);const f=e.clone();f.mulThisE(m);let y=r.clone();if(y.mulThisE(u),f.subThisE(y),0===f.value())return A.getNAN();f.mulThis(2);const N=e.clone();N.mulThisE(e);const C=r.clone();C.mulThisE(r);const E=N.clone();E.addThisE(C);const k=u.clone();k.mulThisE(u);const O=m.clone();O.mulThisE(m);const j=k.clone();j.addThisE(O);const Q=r.clone();Q.mulThisE(j),y=m.clone(),y.mulThisE(E),Q.subThisE(y),Q.divThisE(f);const K=e.clone();K.mulThisE(j),y=u.clone(),y.mulThisE(E),K.subThisE(y),K.divThisE(f);const H=A.construct(n.x-Q.value(),n.y+K.value()),st=n.sub(H).length(),yt=t.sub(H).length(),nt=s.sub(H).length(),tt=1e-15*(st+Math.abs(n.x)+Math.abs(t.x)+Math.abs(s.x)+Math.abs(n.y)+Math.abs(t.y)+Math.abs(s.y));return Math.abs(st-yt)<=tt&&Math.abs(st-nt)<=tt&&Q.eps()<tt&&K.eps()<tt?H:A.getNAN()}(t,s,e);return r.isNAN()?function te(n,t,s){const e=R.constructDouble(t.x);e.subDoubleThis(n.x);const r=R.constructDouble(t.y);r.subDoubleThis(n.y);const u=R.constructDouble(s.x);u.subDoubleThis(n.x);const m=R.constructDouble(s.y);m.subDoubleThis(n.y);const f=e.clone();f.mulThis(m);let y=r.clone();if(y.mulThis(u),f.subThis(y),f.isZero())return A.getNAN();f.mulDoubleThis(2);const N=e.clone();N.mulThis(e);const C=r.clone();C.mulThis(r);const E=N.clone();E.addThis(C);const k=u.clone();k.mulThis(u);const O=m.clone();O.mulThis(m);const j=k.clone();j.addThis(O);const Q=r.clone();Q.mulThis(j),y=m.clone(),y.mulThis(E),Q.subThis(y),Q.divThis(f);const K=e.clone();return K.mulThis(j),y=u.clone(),y.mulThis(E),K.subThis(y),K.divThis(f),A.construct(n.x-Q.value(),n.y+K.value())}(t,s,e):r}static calculateAngle(t,s){return Math.atan2(t.crossProduct(s),t.dotProduct(s))}static isBisectorRobust(t,s,e){return(0,g.g)(0),!1}static size(){return 2}get 0(){return this.x}get 1(){return this.y}set 0(t){this.x=t}set 1(t){this.y=t}static compareZorder(t,s){const e=A.c_compare_zorder_xx[t.x<0?1:0]|A.c_compare_zorder_yy[t.y<0?1:0],r=A.c_compare_zorder_xx[s.x<0?1:0]|A.c_compare_zorder_yy[s.y<0?1:0];if(e===r){let u=0,m=0;for(let f=0;f<2;++f){const y=Ki(t[f],s[f]);y>u&&(u=y,m=f)}return t[m]<s[m]}return e<r}static lerp(t,s,e){const r=new A;return bt(t,s,e,r),r}static getClosestCoordinate(t,s,e,r=!1){const u=A.getNAN();u.setSub(s,t);const m=u.sqrLength();if(0===m)return.5;if(s.isEqualPoint2D(e))return 1;const f=A.getNAN();f.setSub(e,t);let y=f.dotProduct(u)/m;return r||(y<0?y=0:y>1&&(y=1)),y}static intersectLinesAtOnePoint(t,s,e,r){if(t.equals(s)||e.equals(r))return A.getNAN();const m=e.x-r.x,y=e.y-r.y,N=(s.x-t.x)*y-m*(s.y-t.y);if(!N)return A.getNAN();const C=N;if(0===C)return A.getNAN();let E=(e.x-t.x)*y-(e.y-t.y)*m;E/=C;const k=new A;return bt(t,s,E,k),k.isFinite()?k:A.getNAN()}toString(){return`[${this.x},${this.y}]`}}A.dimensions=2,A.d=[[0,1,0,-1],[-1,0,1,0],[0,-1,0,1],[1,0,-1,0]],A.c_compare_zorder_xx=[2,0],A.c_compare_zorder_yy=[1,0]},23558:(jt,_t,ct)=>{ct.d(_t,{T:()=>it});var g=ct(62257),B=ct(33165);class L{constructor(i,o,a){if(i instanceof L)return this.data=i.data,this.N=i.N,this.M=i.M,i.data=null,i.N=0,void(i.M=0);this.data=i,this.N=o,this.M=a}assignCopy(i){return this===i||((0,g.g)(this.N*this.M==i.N*i.M),this.data.set(i.data),this.N=i.N,this.M=i.M),this}setZero(){return this.data?.fill(0),this}setIdentity(){for(let a=0;a<this.N;a++)for(let l=0;l<this.M;l++)this.setRowCol(a,l,a===l?1:0);return this}rows(){return this.N}cols(){return this.M}row(i){return(0,g.g)(0),{}}set(i,o){return this.data[i]=o,this}setRowCol(i,o,a){return this.data[i*this.M+o]=a,this}at(i){return this.data[i]}atRowCol(i,o){return this.data[i*this.M+o]}mulScalar(i,o){(0,g.g)(0)}mul(i,o){if((0,g.g)(this.M===i.rows()),(0,g.g)(this.N===o.rows()),(0,g.g)(i.cols()===o.cols()),o===this){const l=new Float64Array(this.N*this.M),c=new L(l,this.N,this.M);return this.mul(i,c),void o.assignCopy(c)}if(o===i){const l=new Float64Array(i.N*i.M),c=new L(l,i.N,i.M);return this.mul(i,c),void o.assignCopy(c)}const a=i.cols();for(let l=0;l<this.N;l++)for(let c=0;c<a;c++){let v=0;for(let w=0;w<this.M;w++)v+=this.atRowCol(l,w)*i.atRowCol(w,c);o.setRowCol(l,c,v)}}mulTranspose(i,o){if((0,g.g)(this.M===i.cols()),(0,g.g)(this.N===o.rows()),(0,g.g)(i.rows()===o.cols()),o===this){const l=new Float64Array(this.N*this.M),c=new L(l,this.N,this.M);return this.mulTranspose(i,c),void o.assignCopy(c)}if(o===i){const l=new Float64Array(i.N*i.M),c=new L(l,i.N,i.M);return this.mulTranspose(i,c),void o.assignCopy(c)}const a=i.rows();for(let l=0;l<this.N;l++)for(let c=0;c<a;c++){let v=0;for(let w=0;w<this.M;w++)v+=this.atRowCol(l,w)*i.atRowCol(c,w);o.setRowCol(l,c,v)}}mulLeft(i,o){(0,g.g)(0)}mulLeftTranspose(i,o){(0,g.g)(0)}mulDiag(i,o){if((0,g.g)(this.M===i.N*i.M),(0,g.g)(this.N===o.rows()),(0,g.g)(this.M===o.cols()),o===this){const l=new Float64Array(this.N*this.M),c=new L(l,this.N,this.M);return this.mulDiag(i,c),void o.assignCopy(c)}const a=this.M;for(let l=0;l<this.N;l++)for(let c=0;c<a;c++)o.setRowCol(l,c,this.atRowCol(l,c)*i.at(c))}transposeInPlace(){if(this.N===this.M){for(let a=0;a<this.N;a++)for(let l=a+1;l<this.M;l++){const c=this.atRowCol(a,l);this.setRowCol(a,l,this.atRowCol(l,a)),this.setRowCol(l,a,c)}return this}const i=new Float64Array(this.N*this.M),o=new L(i,this.N,this.M);return o.assignCopy(this),this.M=(0,B.b)(this.N,this.N=this.M),o.transpose(this),this}transpose(i){if(this!==i){L.checkDims(i,this.M,this.N);for(let o=0;o<this.N;o++)for(let a=0;a<this.M;a++)i.setRowCol(a,o,this.atRowCol(o,a))}else i.transposeInPlace()}add(i,o){}svd(i,o,a,l=!1){if(L.checkDims(i,this.N,this.M),L.checkDims(o,this.M,1),L.checkDims(a,this.M,this.M),l){if((0,g.g)(this.N===this.M),!this.symmetricEigen(o,a))return!1;for(let d=0;d<this.M;++d)o.at(d)<0&&o.set(d,0);return i.assignCopy(a),!0}let c,v,w,x,_,q,p,M=0,S=0,z=0,T=0,D=0;const I=this.M,Z=this.N;i.assignCopy(this);const U=new Float64Array(I),W=new L(U,I,1),X=(d,P)=>P>=0?Math.abs(d):-Math.abs(d),J=(d,P)=>{if((d=Math.abs(d))>(P=Math.abs(P))){const b=P/d;return d*Math.sqrt(b*b+1)}if(P>0){const b=d/P;return P*Math.sqrt(b*b+1)}return 0};for(let d=0;d<I;d++){if(M=d+1,W.set(d,T*z),z=x=T=0,d<Z){for(let b=d;b<Z;b++)T+=Math.abs(i.atRowCol(b,d));if(T){for(let b=d;b<Z;b++)i.setRowCol(b,d,i.atRowCol(b,d)/T),x+=i.atRowCol(b,d)*i.atRowCol(b,d);v=i.atRowCol(d,d),z=-X(Math.sqrt(x),v),w=v*z-x,i.setRowCol(d,d,v-z);for(let b=M;b<I;b++){x=0;for(let h=d;h<Z;h++)x+=i.atRowCol(h,d)*i.atRowCol(h,b);v=x/w;for(let h=d;h<Z;h++)i.setRowCol(h,b,i.atRowCol(h,b)+v*i.atRowCol(h,d))}for(let b=d;b<Z;b++)i.setRowCol(b,d,i.atRowCol(b,d)*T)}}if(o.set(d,T*z),z=x=T=0,d<Z&&d!==I-1){for(let b=M;b<I;b++)T+=Math.abs(i.atRowCol(d,b));if(T){for(let b=M;b<I;b++)i.setRowCol(d,b,i.atRowCol(d,b)/T),x+=i.atRowCol(d,b)*i.atRowCol(d,b);v=i.atRowCol(d,M),z=-X(Math.sqrt(x),v),w=v*z-x,i.setRowCol(d,M,v-z);for(let b=M;b<I;b++)W.set(b,i.atRowCol(d,b)/w);for(let b=M;b<Z;b++){x=0;for(let h=M;h<I;h++)x+=i.atRowCol(b,h)*i.atRowCol(d,h);for(let h=M;h<I;h++)i.setRowCol(b,h,i.atRowCol(b,h)+x*W.at(h))}for(let b=M;b<I;b++)i.setRowCol(d,b,i.atRowCol(d,b)*T)}}const P=Math.abs(o.at(d))+Math.abs(W.at(d));D=P>D?P:D}for(let d=I-1;d>=0;d--){if(d<I-1){if(z){for(let P=M;P<I;P++)a.setRowCol(P,d,i.atRowCol(d,P)/i.atRowCol(d,M)/z);for(let P=M;P<I;P++){x=0;for(let b=M;b<I;b++)x+=i.atRowCol(d,b)*a.atRowCol(b,P);for(let b=M;b<I;b++)a.setRowCol(b,P,a.atRowCol(b,P)+x*a.atRowCol(b,d))}}for(let P=M;P<I;P++)a.setRowCol(d,P,0),a.setRowCol(P,d,0)}a.setRowCol(d,d,1),z=W.at(d),M=d}for(let d=(Z<I?Z:I)-1;d>=0;d--){M=d+1,z=o.at(d);for(let P=M;P<I;P++)i.setRowCol(d,P,0);if(z){z=1/z;for(let P=M;P<I;P++){x=0;for(let b=M;b<Z;b++)x+=i.atRowCol(b,d)*i.atRowCol(b,P);v=x/i.atRowCol(d,d)*z;for(let b=d;b<Z;b++)i.setRowCol(b,P,i.atRowCol(b,P)+v*i.atRowCol(b,d))}for(let P=d;P<Z;P++)i.setRowCol(P,d,i.atRowCol(P,d)*z)}else for(let P=d;P<Z;P++)i.setRowCol(P,d,0);i.setRowCol(d,d,i.atRowCol(d,d)+1)}for(let d=I-1;d>=0;d--)for(let P=1;;P++){let b=1;for(M=d;M>=0;M--){if(S=M-1,Math.abs(W.at(M))+D===D){b=0;break}if(Math.abs(o.at(S))+D===D)break}if(b){c=0,x=1;for(let h=M;h<=d&&(v=x*W.at(h),W.set(h,W.at(h)*c),Math.abs(v)+D!==D);h++){z=o.at(h),w=J(v,z),o.set(h,w),w=1/w,c=z*w,x=-v*w;for(let F=0;F<Z;F++)q=i.atRowCol(F,S),p=i.atRowCol(F,h),i.setRowCol(F,S,q*c+p*x),i.setRowCol(F,h,p*c-q*x)}}if(p=o.at(d),M===d){if(p<0){o.set(d,-p);for(let h=0;h<I;h++)a.setRowCol(h,d,-a.atRowCol(h,d))}break}if(100===P)return!1;_=o.at(M),S=d-1,q=o.at(S),z=W.at(S),w=W.at(d),v=((q-p)*(q+p)+(z-w)*(z+w))/(2*w*q),z=J(v,1),v=((_-p)*(_+p)+w*(q/(v+X(z,v))-w))/_,c=x=1;for(let h=M;h<=S;h++){const F=h+1;z=W.at(F),q=o.at(F),w=x*z,z*=c,p=J(v,w),W.set(h,p),c=v/p,x=w/p,v=_*c+z*x,z=z*c-_*x,w=q*x,q*=c;for(let Y=0;Y<I;Y++)_=a.atRowCol(Y,h),p=a.atRowCol(Y,F),a.setRowCol(Y,h,_*c+p*x),a.setRowCol(Y,F,p*c-_*x);p=J(v,w),o.set(h,p),p&&(p=1/p,c=v*p,x=w*p),v=c*z+x*q,_=c*q-x*z;for(let Y=0;Y<Z;Y++)q=i.atRowCol(Y,h),p=i.atRowCol(Y,F),i.setRowCol(Y,h,q*c+p*x),i.setRowCol(Y,F,p*c-q*x)}W.set(M,0),W.set(d,v),o.set(d,_)}const G=new Float64Array(this.N),ot=new Float64Array(this.M),Mt=new L(G,this.N,1),mt=new L(ot,this.M,1);let $=1;do{$*=3,$++}while($<=this.M);do{$/=3,$=Math.trunc($);for(let d=$;d<this.M;d++){const P=o.at(d);for(let h=0;h<this.N;h++)Mt.set(h,i.atRowCol(h,d));for(let h=0;h<this.M;h++)mt.set(h,a.atRowCol(h,d));let b=d;for(;o.at(b-$)<P;){o.set(b,o.at(b-$));for(let h=0;h<this.N;h++)i.setRowCol(h,b,i.atRowCol(h,b-$));for(let h=0;h<this.M;h++)a.setRowCol(h,b,a.atRowCol(h,b-$));if(b-=$,b<$)break}o.set(b,P);for(let h=0;h<this.N;h++)i.setRowCol(h,b,Mt.at(h));for(let h=0;h<this.M;h++)a.setRowCol(h,b,mt.at(h))}}while($>1);for(let d=0;d<this.M;d++){let P=0;for(let b=0;b<this.N;b++)i.atRowCol(b,d)<0&&P++;for(let b=0;b<this.M;b++)a.atRowCol(b,d)<0&&P++;if(P>Math.trunc((this.N+this.M)/2)){for(let b=0;b<this.N;b++)i.setRowCol(b,d,-i.atRowCol(b,d));for(let b=0;b<this.M;b++)a.setRowCol(b,d,-a.atRowCol(b,d))}}return!0}isSymmetric(){if(this.N!==this.M)return!1;for(let i=0;i<this.N;i++)for(let o=i+1;o<this.M;o++)if(this.atRowCol(i,o)!==this.atRowCol(o,i))return!1;return!0}isZero(){return(0,g.g)(0),!1}isIdentity(){return(0,g.g)(0),!1}equals(i,o){if(void 0!==o&&(0,g.g)(0),this.N!==i.N||this.M!==i.M)return!1;for(let a=0;a<this.N*this.M;a++)if(this.data[a]!==i.data[a])return!1;return!0}maxElement(){return(0,g.g)(0),0}minElement(){return(0,g.g)(0),0}determinant(){if((0,g.g)(this.N===this.M),1===this.N)return this.data[0];if(2===this.N)return this.data[0]*this.data[3]-this.data[1]*this.data[2];if(3===this.N){const c=this;return c.atRowCol(0,0)*(c.atRowCol(1,1)*c.atRowCol(2,2)-c.atRowCol(1,2)*c.atRowCol(2,1))-c.atRowCol(0,1)*(c.atRowCol(1,0)*c.atRowCol(2,2)-c.atRowCol(2,0)*c.atRowCol(1,2))+c.atRowCol(0,2)*(c.atRowCol(1,0)*c.atRowCol(2,1)-c.atRowCol(1,1)*c.atRowCol(2,0))}const i=new Float64Array(this.N*this.N),o=new L(i,this.N,this.N),a=new Float64Array(this.N);if(!this.luDecomposition(o,a))return 0;let l=1;for(let c=0;c<this.N;c++)l*=o.atRowCol(c,c),a[c]!==c&&(l=-l);return l}submatrix(i,o,a){(0,g.g)(0)}inverse(i){(0,g.g)(0)}pseudoInverse(i,o=!1,a=2220446049250313e-31){if(i.setZero(),1===this.N&&1===this.M)return 0!==this.atRowCol(0,0)?i.setRowCol(0,0,1/this.atRowCol(0,0)):i.setRowCol(0,0,0),!0;if(2===this.N&&2===this.M){const M=this.atRowCol(0,0)*this.atRowCol(1,1)-this.atRowCol(0,1)*this.atRowCol(1,0),S=1e-5*(Math.abs(this.atRowCol(0,0)*this.atRowCol(1,1))+Math.abs(this.atRowCol(0,1)*this.atRowCol(1,0)));if(Math.abs(M)>S)return i.setRowCol(0,0,this.atRowCol(1,1)/M),i.setRowCol(0,1,-this.atRowCol(0,1)/M),i.setRowCol(1,0,-this.atRowCol(1,0)/M),i.setRowCol(1,1,this.atRowCol(0,0)/M),!0}const l=new Float64Array(this.N*this.M),c=new L(l,this.N,this.M),v=new Float64Array(this.M),w=new L(v,this.M,1),x=new Float64Array(this.M*this.M),_=new L(x,this.M,this.M);if(!this.svd(c,w,_,o))return!1;const q=Math.max(this.N,this.M),p=a*Math.abs(w.at(0))*q;for(let M=0;M<this.M;M++)w.at(M)>p?w.set(M,1/w.at(M)):w.set(M,0);return _.mulDiag(w,i),i.mulTranspose(c,i),!0}luDecomposition(i,o){return(0,g.g)(0),!1}symmetricEigen(i,o){(0,g.g)(this.rows()===this.cols()),(0,g.g)(this.rows()===i.rows()),(0,g.g)(o.rows()===o.cols()&&o.rows()===this.rows()),(0,g.g)(this.isSymmetric());const a=new Float64Array(this.N*this.M),l=new L(a,this.N,this.M);l.assignCopy(this);const c=100/Number.EPSILON,v=this.rows(),w=new Float64Array(v),x=new Float64Array(v),_=new L(w,v,1),q=new L(x,v,1);for(let M=0;M<v;M++)_.set(M,l.atRowCol(M,M)),i.set(M,l.atRowCol(M,M)),q.set(M,0);o.setIdentity();const p=()=>{const M=_;o.transposeInPlace();let S=1;do{S*=3,S++}while(S<=v);do{S/=3,S=Math.trunc(S);for(let z=S;z<v;z++){const T=i.at(z),D=Math.abs(T);for(let Z=0;Z<this.M;Z++)M.set(Z,o.atRowCol(Z,z));let I=z;for(;Math.abs(i.at(I-S))<D;){i.set(I,i.at(I-S));for(let Z=0;Z<this.M;Z++)o.setRowCol(Z,I,o.atRowCol(Z,I-S));if(I-=S,I<S)break}if(I!==z){i.set(I,T);for(let Z=0;Z<this.M;Z++)o.setRowCol(Z,I,M.at(Z))}}}while(S>1)};for(let M=1;;M++){let S=0;for(let T=1;T<v;T++)for(let D=0;D<T;D++)S+=Math.abs(l.atRowCol(T,D));if(0===S)return p(),!0;const z=M<4?.2*S/(v*v):0;for(let T=0;T<v;T++)for(let D=T+1;D<v;D++){let I=c*Math.abs(l.atRowCol(D,T));if(M>4&&I<=Math.abs(i.at(T))&&I<=Math.abs(i.at(D)))l.setRowCol(D,T,0);else if(Math.abs(l.atRowCol(D,T))>z){let Z,U=i.at(D)-i.at(T);if(I<Math.abs(U))Z=l.atRowCol(D,T)/U;else{const ot=.5*U/l.atRowCol(D,T);Z=1/(Math.abs(ot)+Math.sqrt(1+ot*ot)),ot<0&&(Z=-Z)}const W=1/Math.sqrt(1+Z*Z),X=Z*W,J=X/(1+W);U=Z*l.atRowCol(D,T),q.set(T,q.at(T)-U),q.set(D,q.at(D)+U),i.set(T,i.at(T)-U),i.set(D,i.at(D)+U),l.setRowCol(D,T,0);let G=0;for(;G<T;G++)I=l.atRowCol(T,G),U=l.atRowCol(D,G),l.setRowCol(T,G,I-X*(U+I*J)),l.setRowCol(D,G,U+X*(I-U*J));for(G++;G<D;G++)I=l.atRowCol(G,T),U=l.atRowCol(D,G),l.setRowCol(G,T,I-X*(U+I*J)),l.setRowCol(D,G,U+X*(I-U*J));for(G++;G<v;G++)I=l.atRowCol(G,T),U=l.atRowCol(G,D),l.setRowCol(G,T,I-X*(U+I*J)),l.setRowCol(G,D,U+X*(I-U*J));for(G=0;G<v;G++)I=o.atRowCol(T,G),U=o.atRowCol(D,G),o.setRowCol(T,G,I-X*(U+I*J)),o.setRowCol(D,G,U+X*(I-U*J))}}for(let T=0;T<v;T++)_.set(T,_.at(T)+q.at(T)),i.set(T,_.at(T)),q.set(T,0)}}static checkDims(i,o,a){(0,g.g)(i.rows()===o&&i.cols()===a)}}class et extends L{constructor(i){if(i.copy){const a=new Float64Array(i.copy.N*i.copy.M);return super(a,i.copy.N,i.copy.M),this.buffer=a,void this.assignCopy(i.copy)}const o=new Float64Array(i.NN*i.MM);super(o,i.NN,i.MM),this.buffer=o,i.initializerList&&(0,B.a)(this.buffer,i.initializerList,0,0,i.initializerList.length)}assignCopy(i){return this===i||super.assignCopy(i),this}}class it{constructor(i){this.m_TransformationType=1,void 0===i?this.setIdentity():i instanceof it?this.set(i):this.setScale(i)}set(i){return this.xx=i.xx,this.xy=i.xy,this.xd=i.xd,this.yx=i.yx,this.yy=i.yy,this.yd=i.yd,this}clone(){return(new it).set(this)}setZero(){this.xx=0,this.yy=0,this.xy=0,this.yx=0,this.xd=0,this.yd=0}isEqual(i){return this===i||this.xx===i.xx&&this.xy===i.xy&&this.xd===i.xd&&this.yx===i.yx&&this.yy===i.yy&&this.yd===i.yd}transformInPlace(i){const a=this.yx*i.x+this.yy*i.y+this.yd;i.x=this.xx*i.x+this.xy*i.y+this.xd,i.y=a}transform(i){const o=i.clone();return this.transformInPlace(o),o}queryTransform(i,o){o.setCoords(this.xx*i.x+this.xy*i.y+this.xd,this.yx*i.x+this.yy*i.y+this.yd)}transformEnvInPlace(i){if(i.isEmpty())return;const o=(0,B.m)(B.P,4);i.queryCorners(o),this.transformPoints2D(o,4,o),i.setFromPoints(o,4)}queryTransformEnv(i,o){(0,g.g)(0)}transformPoints2D(i,o,a){for(let l=0;l<o;++l)this.queryTransform(i[l],a[l])}transformInterleavedPoints(i,o,a){o*=2;const l=B.P.getNAN();for(let c=0;c<o;c+=2)l.x=i[c],l.y=i[c+1],this.transformInPlace(l),a[c]=l.x,a[c+1]=l.y}multiply(i){return it.st_multiply(this,i,this),this}mulLeft(i){return(0,g.g)(0),this}static st_multiply(i,o,a){const c=i.xy*o.xx+i.yy*o.xy,v=i.xd*o.xx+i.yd*o.xy+o.xd,w=i.xx*o.yx+i.yx*o.yy,x=i.xy*o.yx+i.yy*o.yy,_=i.xd*o.yx+i.yd*o.yy+o.yd;a.xx=i.xx*o.xx+i.yx*o.xy,a.xy=c,a.xd=v,a.yx=w,a.yy=x,a.yd=_}getCoefficients(i){(0,g.g)(i.length>=6),i[0]=this.xx,i[1]=this.xy,i[2]=this.xd,i[3]=this.yx,i[4]=this.yy,i[5]=this.yd}setCoefficients(i){(0,g.g)(i.length>=6),this.xx=i[0],this.xy=i[1],this.xd=i[2],this.yx=i[3],this.yy=i[4],this.yd=i[5]}copyTo(i){(0,g.g)(0)}initializeFromRect(i,o){i.isEmpty()||o.isEmpty()||!i.width()||!i.height()?this.setZero():(this.xy=this.yx=0,this.xx=o.width()/i.width(),this.yy=o.height()/i.height(),this.xd=o.xmin-i.xmin*this.xx,this.yd=o.ymin-i.ymin*this.yy)}initializeFromRectIsotropic(i,o){if(i.isEmpty()||!i.width()||!i.height()||o.isEmpty())this.setZero();else{this.yx=0,this.xy=0,this.xx=o.width()/i.width(),this.yy=o.height()/i.height(),this.xx>this.yy?this.xx=this.yy:this.yy=this.xx;const a=o.getCenter(),l=i.getCenter();this.xd=a.x-l.x*this.xx,this.yd=a.y-l.y*this.yy}}initializeFromTwoPointsArray(i,o){if(i[0].equals(o[0])&&i[1].equals(o[1]))return void this.setIdentity();if(i[0].equals(i[1])){if(o[0].equals(o[1]))return void this.setShift(o[0].sub(i[0]));(0,g.t)("")}if(!i[0].equals(i[1])&&o[0].equals(o[1]))return this.setZero(),void this.shift(o[0]);this.setShiftCoords(-i[0].x,-i[0].y);const a=B.P.distance(i[0],i[1]),l=B.P.distance(o[0],o[1]),c=l/a;this.scale(c,c);const v=i[1].sub(i[0]);v.divThis(a);const w=o[1].sub(o[0]);w.divThis(l);const x=v.crossProduct(w),_=v.dotProduct(w);this.rotate(_,x),this.shiftCoords(o[0].x,o[0].y)}initializeFromTwoPoints(i,o,a,l){this.initializeFromTwoPointsArray([i,o],[a,l])}transformSizeInPlace(i){(0,g.g)(0)}transformSize(i,o){(0,g.g)(0)}transformTol(i){return(0,g.g)(0),0}transformWithoutTranslateArray(i,o,a){for(let l=0;l<o;++l)this.transformWithoutTranslate(i[l],a[l])}transformWithoutTranslateInPlace(i){i.setCoords(this.xx*i.x+this.xy*i.y,this.yx*i.x+this.yy*i.y)}transformWithoutTranslate(i,o){o.setCoords(this.xx*i.x+this.xy*i.y,this.yx*i.x+this.yy*i.y)}setIdentity(){this.xx=1,this.xy=0,this.xd=0,this.yx=0,this.yy=1,this.yd=0}isIdentity(){return!(1!==this.xx||1!==this.yy||this.xy||this.xd||this.yx||this.yd)}isIdentityTol(i){const o=i*i;return!((0,B.s)(this.xd)+(0,B.s)(this.yd)>o||(0,B.s)(this.xy+this.xd)+(0,B.s)(this.yy+this.yd-1)>o||(0,B.s)(this.xx+this.xd-1)+(0,B.s)(this.yx+this.yd)>o)}isReflective(){return this.xx*this.yy-this.yx*this.xy<0}isUniform(i){const o=this.xx*this.xx+this.yx*this.yx,a=this.xy*this.xy+this.yy*this.yy,l=(o+a)*i;return Math.abs(o-a)<=l&&Math.abs(this.xx*this.xy+this.yx*this.yy)<=l}isUniformNoRotation(){return 0!==this.xx&&Math.abs(this.xx)===Math.abs(this.yy)&&0===this.xy&&0===this.yx}isTranslate(){return 1===this.xx&&1===this.yy&&!this.xy&&!this.yx}isTranslateTol(i){const o=new B.P;return o.setCoords(0,1),this.transformWithoutTranslateInPlace(o),o.y-=1,!(o.sqrLength()>i*i)&&(o.setCoords(1,0),this.transformWithoutTranslateInPlace(o),o.x-=1,o.sqrLength()<=i*i)}isOrthonormal(i){const o=new it;return o.xx=this.xx*this.xx+this.xy*this.xy,o.xy=this.xx*this.yx+this.xy*this.yy,o.yx=this.yx*this.xx+this.yy*this.xy,o.yy=this.yx*this.yx+this.yy*this.yy,o.xd=0,o.yd=0,o.isIdentityTol(i)}isDegenerate(i){return Math.abs(this.xx*this.yy-this.yx*this.xy)<=2*i*(Math.abs(this.xx*this.yy)+Math.abs(this.yx*this.xy))}isZero(){return 0===this.xx&&0===this.yy&&0===this.xy&&0===this.yx&&0===this.xd&&0===this.yd}isScaleAndTranslateTol(i){return this.xy*this.xy+this.yx*this.yx<=(this.xx*this.xx+this.yy*this.yy)*i}setTranslate(i,o){return this.xx=1,this.xy=0,this.xd=i,this.yx=0,this.yy=1,this.yd=o,this}setShiftCoords(i,o){return this.xx=1,this.xy=0,this.xd=i,this.yx=0,this.yy=1,this.yd=o,this}setShift(i){return this.xx=1,this.xy=0,this.xd=i.x,this.yx=0,this.yy=1,this.yd=i.y,this}setScaleCoords(i,o){return this.xx=i,this.xy=0,this.xd=0,this.yx=0,this.yy=o,this.yd=0,this}setScale(i){return this.setScaleCoords(i,i),this}setFlipX(i,o){return this.xx=-1,this.xy=0,this.xd=i+o,this.yx=0,this.yy=1,this.yd=0,this}setFlipY(i,o){return this.xx=1,this.xy=0,this.xd=0,this.yx=0,this.yy=-1,this.yd=i+o,this}setShear(i,o){return this.xx=1,this.xy=i,this.xd=0,this.yx=o,this.yy=1,this.yd=0,this}scale(i,o){return this.xx*=i,this.xy*=i,this.xd*=i,this.yx*=o,this.yy*=o,this.yd*=o,this}setRotateAngle(i){return this.setRotate(Math.cos(i),Math.sin(i))}setRotate(i,o){return this.xx=i,this.xy=-o,this.xd=0,this.yx=o,this.yy=i,this.yd=0,this}setRotateAngleAbout(i,o){return this.setRotateAbout(Math.cos(i),Math.sin(i),o)}setRotateAbout(i,o,a){return this.setTranslate(-a.x,-a.y),this.rotate(i,o),this.translate(a.x,a.y)}setSwapCoordinates(){return this.xx=0,this.xy=1,this.xd=0,this.yx=1,this.yy=0,this.yd=0,this}setRotateCw90(){return this.xx=0,this.xy=1,this.xd=0,this.yx=-1,this.yy=0,this.yd=0,this}setRotateCcw90(){return this.xx=0,this.xy=-1,this.xd=0,this.yx=1,this.yy=0,this.yd=0,this}shiftCoords(i,o){return this.xd+=i,this.yd+=o,this}shift(i){return this.xd+=i.x,this.yd+=i.y,this}translate(i,o){return this.xd+=i,this.yd+=o,this}flipX(i,o){return this.xx=-this.xx,this.xy=-this.xy,this.xd=i+o-this.xd,this}flipY(i,o){return this.yx=-this.yx,this.yy=-this.yy,this.yd=i+o-this.yd,this}shear(i,o){const a=new it;return a.setShear(i,o),this.multiply(a)}rotateAngle(i){const o=new it;return o.setRotateAngle(i),this.multiply(o)}rotate(i,o){const a=new it;return a.setRotate(i,o),this.multiply(a)}rotateAbout(i,o,a){return this.translate(-a.x,-a.y),this.rotate(i,o),this.translate(a.x,a.y)}rotateAngleAbout(i,o){return this.rotateAbout(Math.cos(i),Math.sin(i),o)}setInvert(i){return this.set(i),this.invertThis()}invertThis(){let i=this.xx*this.yy-this.xy*this.yx;if(0===i)return this.setZero(),this;i=1/i;const a=(this.xd*this.yx-this.xx*this.yd)*i,l=this.yy*i,c=-this.xy*i,v=-this.yx*i,w=this.xx*i;return this.xd=(this.xy*this.yd-this.xd*this.yy)*i,this.yd=a,this.xx=l,this.yy=w,this.xy=c,this.yx=v,this}invertPrecise(i){return this.set(i),this.invertPreciseThis()}invertPreciseThis(){const i=B.M.constructDouble(this.xy),o=B.M.constructDouble(this.xx),a=o.mulDouble(this.yy).sub(i.mulDouble(this.yx));if(a.isZero())return this.setZero(),this;const l=a.clone();l.invertThis();const c=B.M.constructDouble(this.xd),v=i.mulDouble(this.yd).sub(c.mulDouble(this.yy)).mul(l).toDouble(),w=c.mulDouble(this.yx).sub(o.mulDouble(this.yd)).mul(l).toDouble(),x=l.mulDouble(this.yy).toDouble(),_=l.mulDouble(-this.xy).toDouble(),q=l.mulDouble(-this.yx).toDouble(),p=l.mulDouble(this.xx).toDouble();return this.xd=v,this.yd=w,this.xx=x,this.yy=p,this.xy=_,this.yx=q,this}extractScaleTransform(i,o){const a=Math.sqrt(this.xx*this.xx+this.xy*this.xy),l=Math.sqrt(this.yx*this.yx+this.yy*this.yy);o.setScaleCoords(1/a,1/l),o.multiply(this),i.setScaleCoords(a,l)}setFromTwoTriangles(i,o){let a=!0;for(let q=0;q<3;++q)a=a&&i[q].equals(o[q]);if(a)return this.setIdentity(),!0;const l=new B.P;l.setSub(i[0],i[1]);const c=new B.P;c.setSub(i[0],i[2]);const v=new B.P;v.setSub(o[0],o[1]);const w=new B.P;w.setSub(o[0],o[2]);const x=4*Number.EPSILON*(Math.abs(l.x*c.y)+Math.abs(c.x*l.y));let _=l.x*c.y-l.y*c.x;return Math.abs(_)>x?(_=1/_,this.xx=(v.x*c.y-l.y*w.x)*_,this.xy=(l.x*w.x-v.x*c.x)*_,this.yx=(v.y*c.y-l.y*w.y)*_,this.yy=(l.x*w.y-v.y*c.x)*_,this.xd=o[0].x-(this.xx*i[0].x+this.xy*i[0].y),this.yd=o[0].y-(this.yx*i[0].x+this.yy*i[0].y),!0):(this.setZero(),!1)}initializeFromControlPoints(i,o,a,l,c=null){return 0===o?(this.setIdentity(),void(c&&c.setIdentity())):1===o?(this.setShift(l[0].sub(a[0])),void(c&&c.setShift(a[0].sub(l[0])))):(o<3&&(i=1),void(4===i&&o>2?function gt(V,i,o,a,l){const c=B.P.average(o,i),v=B.P.average(a,i),w=new et({NN:2,MM:2});w.setZero();const x=new et({NN:2,MM:2});x.setZero();for(let p=0;p<i;++p)w.setRowCol(0,0,w.atRowCol(0,0)+(o[p].x-c.x)*(o[p].x-c.x)),w.setRowCol(0,1,w.atRowCol(0,1)+(o[p].x-c.x)*(o[p].y-c.y)),w.setRowCol(1,1,w.atRowCol(1,1)+(o[p].y-c.y)*(o[p].y-c.y)),x.setRowCol(0,0,x.atRowCol(0,0)+(a[p].x-v.x)*(o[p].x-c.x)),x.setRowCol(0,1,x.atRowCol(0,1)+(a[p].x-v.x)*(o[p].y-c.y)),x.setRowCol(1,0,x.atRowCol(1,0)+(a[p].y-v.y)*(o[p].x-c.x)),x.setRowCol(1,1,x.atRowCol(1,1)+(a[p].y-v.y)*(o[p].y-c.y));w.setRowCol(1,0,w.atRowCol(0,1));const _=new et({NN:2,MM:2});w.pseudoInverse(_,!0)||(0,g.a)("Failed to compute pseudo inverse"),x.mul(_,x),dt(V,x);const q=c.clone();V.transformInPlace(q),V.xd=v.x-q.x,V.yd=v.y-q.y,l&&(x.pseudoInverse(_,!1)||(0,g.a)("Failed to compute pseudo inverse"),dt(l,_),l.transformInPlace(v),l.xd=c.x-v.x,l.yd=c.y-v.y)}(this,o,a,l,c):function rt(V,i,o,a,l,c){(0,g.g)(1===V||0===V||2===V||3===V),i.setIdentity();const v=B.P.average(a,o),w=B.P.average(l,o);if((0,g.g)(V<lt.length&&V>0),8&lt[V]){const _=new et({NN:2,MM:2});_.setZero();for(let D=0;D<o;++D)_.setRowCol(0,0,_.atRowCol(0,0)+(l[D].x-w.x)*(a[D].x-v.x)),_.setRowCol(1,0,_.atRowCol(1,0)+(l[D].x-w.x)*(a[D].y-v.y)),_.setRowCol(0,1,_.atRowCol(0,1)+(l[D].y-w.y)*(a[D].x-v.x)),_.setRowCol(1,1,_.atRowCol(1,1)+(l[D].y-w.y)*(a[D].y-v.y));const q=new et({NN:2,MM:2}),p=new et({NN:2,MM:1}),M=new et({NN:2,MM:2});_.svd(q,p,M)||(0,g.a)("Failed to compute svd");const S=new et({NN:2,MM:2});q.transpose(S);const z=new et({NN:2,MM:2});M.mul(S,z),!(32&lt[V])&&z.determinant()<0&&(S.setRowCol(1,0,-S.atRowCol(1,0)),S.setRowCol(1,1,-S.atRowCol(1,1)),M.mul(S,z));const T=new it;dt(T,z),i.set(T)}if(2&lt[V]){let _=0,q=0;for(let p=0;p<o;++p){const M=a[p].sub(v);_+=M.sqrLength(),i.transformInPlace(M),q+=M.dotProduct(l[p].sub(w))}if(0===_)0===q?i.setIdentity():i.setZero();else{const p=q/_;i.scale(p,p)}}else(0,g.g)(!(4&lt[V]));const x=v.clone();i.transformInPlace(x),i.xd=w.x-x.x,i.yd=w.y-x.y,c&&(c.set(i),c.invertThis(),c.isZero()&&(c.xd=v.x,c.yd=v.y))}(i,this,o,a,l,c)))}calculateErrors(i,o,a,l){(0,g.g)(i>0&&null!==o&&null!==a);let c=0;for(let v=0;v<i;++v){const w=this.transform(o[v]),x=B.P.sqrDistance(a[v],w);c+=x,l&&(l[v]=Math.sqrt(x))}return Math.sqrt(c/i)}}const lt=[43,11,41,9,61];function dt(V,i){(0,g.g)(!(2!==i.rows()&&3!==i.rows()||2!==i.cols()&&3!==i.rows())),V.xx=i.atRowCol(0,0),V.xy=i.atRowCol(0,1),V.yx=i.atRowCol(1,0),V.yy=i.atRowCol(1,1),3===i.cols()?(V.xd=i.atRowCol(0,2),V.yd=i.atRowCol(1,2)):(V.xd=0,V.yd=0)}}}]);