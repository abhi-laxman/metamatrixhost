"use strict";(self.webpackChunkAngularClient=self.webpackChunkAngularClient||[]).push([[1520],{50501:(G,g,e)=>{e.d(g,{K:()=>r});const r=["operational-layers","basemap","ground"]},36819:(G,g,e)=>{e.d(g,{A:()=>i});var r=e(8189),o=e(85211),l=(e(3248),e(35150),e(40707),e(76576)),h=e(88494),j=e(95478),y=e(93410),d=e(33036),p=e(27641),A=e(88485);let s=class extends((0,y.dM)((0,d.j)(j.A))){constructor(t){super(t),this.elevationInfo=null,this.graphics=new p.Y,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(t){return this.graphics.add(t),this}addMany(t){return this.graphics.addMany(t),this}removeAll(){return this.graphics.removeAll(),this}remove(t){this.graphics.remove(t)}removeMany(t){this.graphics.removeMany(t)}on(t,u){return super.on(t,u)}graphicChanged(t){this.emit("graphic-update",t)}};(0,r._)([(0,o.MZ)({type:A.A})],s.prototype,"elevationInfo",void 0),(0,r._)([(0,o.MZ)((0,h.C)(p.Y,"graphics"))],s.prototype,"graphics",void 0),(0,r._)([(0,o.MZ)({type:["show","hide"]})],s.prototype,"listMode",void 0),(0,r._)([(0,o.MZ)()],s.prototype,"screenSizePerspectiveEnabled",void 0),(0,r._)([(0,o.MZ)({readOnly:!0})],s.prototype,"type",void 0),(0,r._)([(0,o.MZ)({constructOnly:!0})],s.prototype,"internal",void 0),s=(0,r._)([(0,l.$)("esri.layers.GraphicsLayer")],s);const i=s},72211:(G,g,e)=>{e.d(g,{LF:()=>E,M9:()=>l,zu:()=>d});var r=e(5922),o=e(89221),D=e(79845),C=e(26073);function E(s,i,t){try{return function j(s){if(!s||0===s.length)return null;if(function y(s){const i=s[0];return!!i&&"scale"in i}(s)){const i=[];for(const t of s)i.push({scale:t.scale,value:d(t.value)});return i}return d(s)}(s)}catch(u){t?.messages?.push(u)}return null}function l(s,i,t,u){try{const L=function h(s){const i=(0,D.q)(s);return i?(0,C.dw)(i)?i.map(t=>t.toJSON()):i.map(({scale:t,effects:u})=>({scale:t,value:u.map(L=>L.toJSON())})):null}(s);(0,o.sM)(t,L,i)}catch(L){u.messages&&u.messages.push(L)}}function d(s){if(!s?.length)return"";const i=[];for(const t of s){let u=[];switch(t.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":u=[p(t,"amount")];break;case"blur":u=[p(t,"radius","pt")];break;case"hue-rotate":u=[p(t,"angle","deg")];break;case"drop-shadow":u=[p(t,"xoffset","pt"),p(t,"yoffset","pt"),p(t,"blurRadius","pt"),A(t,"color")];break;case"bloom":u=[p(t,"strength"),p(t,"radius","pt"),p(t,"threshold")]}const L=`${t.type}(${u.filter(Boolean).join(" ")})`;(0,D.q)(L),i.push(L)}return i.join(" ")}function p(s,i,t){if(null==s[i])throw new r.A("effect:missing-parameter",`Missing parameter '${i}' in ${s.type} effect`,{effect:s});return t?s[i]+t:""+s[i]}function A(s,i){if(null==s[i])throw new r.A("effect:missing-parameter",`Missing parameter '${i}' in ${s.type} effect`,{effect:s});const t=s[i];return`rgba(${t[0]||0}, ${t[1]||0}, ${t[2]||0}, ${t[3]/255||0})`}},93410:(G,g,e)=>{e.d(g,{LF:()=>p,dM:()=>A,sU:()=>y});var r=e(8189),o=e(85211),l=(e(3248),e(35150),e(40707),e(76576)),h=e(50501),j=e(72211);const y={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:{layerContainerTypes:h.K}},"portal-item":{read:!0,write:{layerContainerTypes:h.K}}}}},d={read:{reader:j.LF},write:{allowNull:!0,writer:j.M9,layerContainerTypes:h.K}},p={json:{read:!1,write:!1,origins:{"web-map":d,"portal-item":d}}},A=s=>{let i=class extends s{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return(0,r._)([(0,o.MZ)(y)],i.prototype,"blendMode",void 0),(0,r._)([(0,o.MZ)(p)],i.prototype,"effect",void 0),i=(0,r._)([(0,l.$)("esri.layers.mixins.BlendLayer")],i),i}},33036:(G,g,e)=>{e.d(g,{j:()=>h});var r=e(8189),o=e(85211),l=(e(3248),e(35150),e(40707),e(76576));const h=y=>{let d=class extends y{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const p={minScale:this.minScale,maxScale:this.maxScale},A=this.parent;A&&"effectiveScaleRange"in A&&function j(y,d){y.minScale=y.minScale>0?d.minScale>0?Math.min(y.minScale,d.minScale):y.minScale:d.minScale,y.maxScale=y.maxScale>0?d.maxScale>0?Math.max(y.maxScale,d.maxScale):y.maxScale:d.maxScale}(p,A.effectiveScaleRange);const s=this._get("effectiveScaleRange");return s&&s.minScale===p.minScale&&s.maxScale===p.maxScale?s:p}};return(0,r._)([(0,o.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],d.prototype,"minScale",void 0),(0,r._)([(0,o.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],d.prototype,"maxScale",void 0),(0,r._)([(0,o.MZ)({readOnly:!0})],d.prototype,"effectiveScaleRange",null),d=(0,r._)([(0,l.$)("esri.layers.mixins.ScaleRangeLayer")],d),d}},88485:(G,g,e)=>{e.d(g,{A:()=>F});var i,r=e(8189),o=e(49976),D=e(71065),C=e(11432),E=e(85211),y=(e(3248),e(35150),e(40707),e(17221)),d=e(76576),p=e(50305),A=e(10467),s=e(86300);let t=i=class extends D.A{constructor(c){super(c)}collectRequiredFields(c,_){var z=this;return(0,A.A)(function*(){return(0,s.Dx)(c,_,z.expression)})()}clone(){return new i({expression:this.expression,title:this.title})}equals(c){return this.expression===c.expression&&this.title===c.title}};(0,r._)([(0,E.MZ)({type:String,json:{write:{isRequired:!0}}})],t.prototype,"expression",void 0),(0,r._)([(0,E.MZ)({type:String,json:{write:!0}})],t.prototype,"title",void 0),t=i=(0,r._)([(0,d.$)("esri.symbols.support.FeatureExpressionInfo")],t);const u=t;var H,L=e(82575);const W=(0,o.O)()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),K=new o.J({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let S=H=class extends D.A{constructor(c){super(c),this.featureExpressionInfo=void 0,this.offset=null}readFeatureExpressionInfo(c,_){return c??(_.featureExpression&&0===_.featureExpression.value?{expression:"0"}:void 0)}writeFeatureExpressionInfo(c,_,z,re){_[z]=c.write({},re),"0"===c.expression&&(_.featureExpression={value:0})}get mode(){const{offset:c,featureExpressionInfo:_}=this;return this._isOverridden("mode")?this._get("mode"):null!=c||_?"relative-to-ground":"on-the-ground"}set mode(c){this._override("mode",c)}set unit(c){this._set("unit",c)}write(c,_){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(c,_):null}clone(){return new H({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(c){return this.mode===c.mode&&this.offset===c.offset&&this.unit===c.unit&&(0,C.CM)(this.featureExpressionInfo,c.featureExpressionInfo)}};(0,r._)([(0,E.MZ)({type:u,json:{write:!0}})],S.prototype,"featureExpressionInfo",void 0),(0,r._)([(0,y.w)("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],S.prototype,"readFeatureExpressionInfo",null),(0,r._)([(0,p.K)("featureExpressionInfo",{featureExpressionInfo:{type:u},"featureExpression.value":{type:[0]}})],S.prototype,"writeFeatureExpressionInfo",null),(0,r._)([(0,E.MZ)({type:W.apiValues,nonNullable:!0,json:{type:W.jsonValues,read:W.read,write:{writer:W.write,isRequired:!0}}})],S.prototype,"mode",null),(0,r._)([(0,E.MZ)({type:Number,json:{write:!0}})],S.prototype,"offset",void 0),(0,r._)([(0,E.MZ)({type:L.KQ,json:{type:String,read:K.read,write:K.write}})],S.prototype,"unit",null),S=H=(0,r._)([(0,d.$)("esri.symbols.support.ElevationInfo")],S);const F=S},82575:(G,g,e)=>{e.d(g,{Ao:()=>C,KQ:()=>l,Tg:()=>D});var r=e(89952),o=e(48716);function D(h){return!!h&&null!=o.j[h]}function C(h){return 1/(o.j[h]||1)}const l=function E(){const h=Object.keys(o.j);return(0,r.TF)(h,"decimal-degrees"),h.sort(),h}()},81520:(G,g,e)=>{e.r(g),e.d(g,{default:()=>me});var r=e(10467),o=e(8189),D=e(68677),C=e(81098),E=e(11432),l=e(48900),h=e(85211),p=(e(3248),e(35150),e(40707),e(76576)),A=e(36819),s=e(43470),i=e(88521),t=e(55417),u=e(46602),L=e(63021),H=e(40611),W=e(86807),K=e(67685),S=e(45475),F=e(1749),c=e(55861),_=e(13970),z=e(63888),re=e(75644),ne=e(50915),oe=e(76169),ae=e(4931);class le extends z.q{constructor(n){super(),this.element=n,this._handles=new W.A,this.isWrapAround=!1,this.perspectiveTransform=(0,S.vt)(),this.wrapAroundShift=0,this.clipGeometry=null,this._handles.add((0,l.z7)(()=>this.element,()=>{const a=this.element;this.ready(),a&&this._handles.add((0,H.on)(a,"play",()=>this.requestRender()))},l.Vh))}getMesh(n){throw new Error("Method not implemented.")}destroy(){this._handles.destroy(),this.texture=(0,E.WD)(this.texture)}get textureSize(){if(!this.texture)return[1,1];const n=this.texture.descriptor;return[n.width,n.height]}get dvsMat3(){return this.parent.dvsMat3}beforeRender(n){const a=this.element;if(null==a)return;const{context:M}=n,{videoWidth:P,videoHeight:v}=a;if(0!==P&&0!==v){if(this.texture)a.paused||this.texture.setData(a);else{const m=new ae.R;m.wrapMode=ne.pF.CLAMP_TO_EDGE,m.preMultiplyAlpha=!0,m.width=P,m.height=v,this.texture=new oe.g(M,m,a)}a.paused||(this.texture.generateMipmap(),this.requestRender()),super.beforeRender(n)}}_createTransforms(){return null}updateDrawCoords(n,a,M,P){const v=this.element,m=this._getFrameInfo();if(!v||!m)return;this._initializeData(n,m,M);const{controlPoints:x,horizon:R}=m,T=Math.sqrt(x.length),I=T,{x:O,y:U}=n,V=this._vertices,Y=x[T-1],ye=x[(I-1)*T],ue=x[(I-1)*T+T-1],Q=(0,_.project)(R?R[0].mapPoint:x[0].mapPoint,M),X=(0,_.project)(R?R[1].mapPoint:Y.mapPoint,M),Z=(0,_.project)(ye.mapPoint,M),k=(0,_.project)(ue.mapPoint,M);this.clipGeometry=R?new re.A({geometry:c.A.fromJSON({rings:[[[Z.x,Z.y],[k.x,k.y],[X.x,X.y],[Q.x,Q.y],[Z.x,Z.y]]],spatialReference:M})}):null;for(let w=0;w<x.length;w++){const ee=x[w],{sourcePoint:te,mapPoint:se}=ee;if(null==te||null==se)continue;const N=(0,_.project)(se,M);V[2*w+0]=N.x-O,V[2*w+1]=N.y-U}let q=a;if(P){const w=Math.min(Q.x,X.x,Z.x,k.x),ee=Math.max(Q.x,X.x,Z.x,k.x),{worldWidth:te,xBounds:se}=P,[N,ie]=se;w<N&&ee>N?q=te:ee>ie&&w<ie&&(q=-te)}this.wrapAroundShift=q,this.isWrapAround=0!==q}draw(n,a){this.isReady&&this._vertices&&this._indices&&this._texCoords?a.render(n,{transform:{dvs:this.dvsMat3},config:{perspective:this.perspectiveTransform,texSize:this.textureSize,wrapAroundShift:this.wrapAroundShift,isWrapAround:this.isWrapAround,opacity:this.opacity,texture:{texture:this.texture,unit:0}},position:this._vertices,tex:this._texCoords,index:this._indices}):this.requestRender()}_initializeData(n,a,M){if(null!=this._vertices&&null!=this._indices)return;const{controlPoints:P}=a,v=Math.sqrt(P.length),m=v,x=new Float32Array(2*P.length),R=new Uint16Array(2*P.length);for(let O=0;O<P.length;O++){const U=P[O],{sourcePoint:V,mapPoint:J}=U;if(null==V||null==J)continue;const Y=(0,_.project)(J,M);x[2*O+0]=Y.x-n.x,x[2*O+1]=Y.y-n.y,R[2*O+0]=V.x,R[2*O+1]=V.y}const T=new Uint16Array(m*v+(m-2)*(v+2));let I=0;for(let O=0;O<m;O++){for(let U=0;U<v;U++)T[I++]=O*v+U,T[I++]=(O+1)*v+U;O<m-2&&(T[I++]=(O+1)*v+(v-1),T[I++]=(O+1)*v)}this._vertices=x,this._texCoords=R,this._indices=T}_getFrameInfo(){if(!this.groundControlPoints)return null;const n=this._getFrameControlPoints(),a=this.frameHorizonPoints;let M=null;if(a){const m=a.endX,x=a.endY;M=[{sourcePoint:(0,K.tc)(a.startX,a.startY),mapPoint:new F.A(a.startLongitude,a.startLatitude)},{sourcePoint:(0,K.tc)(m,x),mapPoint:new F.A(a.endLongitude,a.endLatitude)}]}return{controlPoints:n,horizon:M}}_getFrameControlPoints(){const n=this.groundControlPoints,a=n?.length;if(!a)return[];const M=new Array(a),P=Math.max(...n.map(({x:m})=>m)),v=this.element.videoWidth/P;for(let m=0;m<a;m++){const{x,y:R,lat:T,lon:I}=n[m];M[m]={sourcePoint:(0,K.tc)(x*v,-R*v),mapPoint:new F.A(I,T)}}return M}}var he=e(88219),ce=e(57052),de=e(57141),pe=e(41474);const b=new D.A([255,127,0]);let B=class extends((0,he.e)(pe.A)){constructor(){super(...arguments),this._graphicsLayer=new A.A,this._frameOutlineGraphic=new C.A({symbol:new i.A({outline:{type:"simple-line",color:b}})}),this._sensorTrailGraphic=new C.A({symbol:new t.A({color:b})}),this._lineOfSightGraphic=new C.A({symbol:new t.A({color:b})}),this._sensorLocationGraphic=new C.A({symbol:new u.A({color:b})}),this._frameCenterGraphic=new C.A({symbol:new u.A({color:b,style:"cross"})}),this._overlayContainer=null,this.layer=null,this.symbolColor=b,this.visibleTelemetryElements=null}destroy(){this._graphicsLayer=(0,E.pR)(this._graphicsLayer)}initialize(){this.addHandles((0,l.wB)(()=>this.symbolColor,()=>{this._frameOutlineGraphic.symbol.outline.color=this.symbolColor,this._sensorTrailGraphic.symbol.color=this.symbolColor,this._lineOfSightGraphic.symbol.color=this.symbolColor,this._sensorLocationGraphic.symbol.color=this.symbolColor,this._frameCenterGraphic.symbol.color=this.symbolColor},l.Vh)),this._graphicsLayer.graphics.addMany([this._frameOutlineGraphic,this._sensorTrailGraphic,this._lineOfSightGraphic,this._sensorLocationGraphic,this._frameCenterGraphic]),this.visibleTelemetryElements=new s.A({frame:this.layer.telemetryDisplay?.frame??!1,frameCenter:this.layer.telemetryDisplay?.frameCenter??!0,frameOutline:this.layer.telemetryDisplay?.frameOutline??!0,lineOfSight:this.layer.telemetryDisplay?.lineOfSight??!0,sensorLocation:this.layer.telemetryDisplay?.sensorLocation??!0,sensorTrail:this.layer.telemetryDisplay?.sensorTrail??!0})}attach(){this._overlayContainer=new L.A,this.container.addChild(this._overlayContainer),this._addOverlayMultipoint(),this.graphicsView=new de.A({requestUpdateCallback:()=>this.requestUpdate(),view:this.view,graphics:this._graphicsLayer.graphics,container:new ce.A(this.view.featuresTilingScheme)}),this.container.addChild(this.graphicsView.container),this.addAttachHandles(this._graphicsLayer.on("graphic-update",this.graphicsView.graphicUpdateHandler)),this.addAttachHandles([(0,l.wB)(()=>[this.layer.telemetryDisplay?.frame,this.layer.telemetryDisplay?.frameCenter,this.layer.telemetryDisplay?.frameOutline,this.layer.telemetryDisplay?.sensorLocation,this.layer.telemetryDisplay?.sensorTrail,this.layer.telemetryDisplay?.lineOfSight],()=>this._updateVisibleTelemetryElements(),l.Vh),(0,l.wB)(()=>[this.layer.telemetry,this.visibleTelemetryElements?.frameCenter,this.visibleTelemetryElements?.frameOutline,this.visibleTelemetryElements?.sensorLocation,this.visibleTelemetryElements?.sensorTrail,this.visibleTelemetryElements?.lineOfSight],()=>this._updateGraphicGeometries(),l.Vh)])}detach(){this._overlayContainer.removeAllChildren(),this.container.removeAllChildren(),this.graphicsView=(0,E.pR)(this.graphicsView)}supportsSpatialReference(f){return!0}moveEnd(){}viewChange(){this.graphicsView.viewChange()}update(f){this.graphicsView.processUpdate(f)}isUpdating(){return!this.graphicsView||this.graphicsView.updating}_updateVisibleTelemetryElements(){this.visibleTelemetryElements&&this.layer.telemetryDisplay&&(this.visibleTelemetryElements.frame=this.layer.telemetryDisplay.frame,this.visibleTelemetryElements.frameCenter=this.layer.telemetryDisplay.frameCenter,this.visibleTelemetryElements.frameOutline=this.layer.telemetryDisplay.frameOutline,this.visibleTelemetryElements.lineOfSight=this.layer.telemetryDisplay.lineOfSight,this.visibleTelemetryElements.sensorLocation=this.layer.telemetryDisplay.sensorLocation,this.visibleTelemetryElements.sensorTrail=this.layer.telemetryDisplay.sensorTrail)}_updateGraphicGeometries(){const{telemetry:f}=this.layer,{visibleTelemetryElements:n}=this;f&&n&&(this._frameOutlineGraphic.geometry=n.frameOutline&&f.frameOutline?this.layer.telemetry.frameOutline:null,this._sensorTrailGraphic.geometry=n.sensorTrail&&f.sensorTrail?this.layer.telemetry.sensorTrail:null,this._lineOfSightGraphic.geometry=n.lineOfSight&&f.lineOfSight?this.layer.telemetry.lineOfSight:null,this._sensorLocationGraphic.geometry=n.sensorLocation&&f.sensorLocation?this.layer.telemetry.sensorLocation:null,this._frameCenterGraphic.geometry=n.frameCenter&&f.frameCenter?this.layer.telemetry.frameCenter:null)}_addOverlayMultipoint(){var f=this;return(0,r.A)(function*(){if(!f.layer.videoElement)return;const n=new le(f.layer.videoElement);f.addAttachHandles([(0,l.wB)(()=>[f.layer.frameHorizonPoints,f.layer.groundControlPoints],()=>{const{visibleTelemetryElements:a}=f;a?.frame?(n.frameHorizonPoints=f.layer.frameHorizonPoints,n.groundControlPoints=f.layer.groundControlPoints,n.opacity=1):n.opacity=0},l.Vh)]),f._overlayContainer.addChild(n),f.view.stage.requestRender()})()}};(0,o._)([(0,h.MZ)()],B.prototype,"graphicsView",void 0),(0,o._)([(0,h.MZ)()],B.prototype,"layer",void 0),(0,o._)([(0,h.MZ)()],B.prototype,"symbolColor",void 0),(0,o._)([(0,h.MZ)({type:s.A})],B.prototype,"visibleTelemetryElements",void 0),B=(0,o._)([(0,p.$)("esri.views.2d.layers.VideoLayerView2D")],B);const me=B},57052:(G,g,e)=>{e.d(g,{A:()=>C});var r=e(69473),o=e(57641),D=e(62931);class C extends o.f{renderChildren(l){for(const h of this.children)h.setTransform(l.state);if(super.renderChildren(l),this._updateAttributeView(),this.children.some(h=>h.hasData)){switch(l.drawPhase){case r.S5.MAP:this._renderChildren(l,r.RI.All);break;case r.S5.HIGHLIGHT:this.hasHighlight&&this._renderHighlight(l)}this._boundsRenderer&&this._boundsRenderer.doRender(l)}}_renderHighlight(l){(0,D.lB)(l,!1,h=>{this._renderChildren(h,r.RI.Highlight)})}}}}]);