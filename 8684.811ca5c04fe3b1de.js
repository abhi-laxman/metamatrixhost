"use strict";(self.webpackChunkAngularClient=self.webpackChunkAngularClient||[]).push([[8684],{19890:(_t,ot,m)=>{m.d(ot,{A6:()=>_,B8:()=>u,Xd:()=>rt,Xr:()=>S,Yc:()=>it,hZ:()=>C,lw:()=>et,t2:()=>q,x8:()=>at});var E=m(32954),Z=m(14214),V=m(25866),$=m(85952),B=m(28714),w=m(53781);function at(o,r,p){p*=.5;const c=Math.sin(p);return o[0]=c*r[0],o[1]=c*r[1],o[2]=c*r[2],o[3]=Math.cos(p),o}function rt(o,r){const p=2*Math.acos(r[3]),c=Math.sin(p/2);return c>(0,$.FD)()?(o[0]=r[0]/c,o[1]=r[1]/c,o[2]=r[2]/c):(o[0]=1,o[1]=0,o[2]=0),p}function et(o,r,p){const c=r[0],t=r[1],e=r[2],i=r[3],s=p[0],a=p[1],n=p[2],d=p[3];return o[0]=c*d+i*s+t*n-e*a,o[1]=t*d+i*a+e*s-c*n,o[2]=e*d+i*n+c*a-t*s,o[3]=i*d-c*s-t*a-e*n,o}function l(o,r,p,c){const t=r[0],e=r[1],i=r[2],s=r[3];let a,n,d,x,v,G=p[0],b=p[1],J=p[2],L=p[3];return n=t*G+e*b+i*J+s*L,n<0&&(n=-n,G=-G,b=-b,J=-J,L=-L),1-n>(0,$.FD)()?(a=Math.acos(n),d=Math.sin(a),x=Math.sin((1-c)*a)/d,v=Math.sin(c*a)/d):(x=1-c,v=c),o[0]=x*t+v*G,o[1]=x*e+v*b,o[2]=x*i+v*J,o[3]=x*s+v*L,o}function u(o,r){const p=r[0],c=r[1],t=r[2],e=r[3],i=p*p+c*c+t*t+e*e,s=i?1/i:0;return o[0]=-p*s,o[1]=-c*s,o[2]=-t*s,o[3]=e*s,o}function S(o,r){return o[0]=-r[0],o[1]=-r[1],o[2]=-r[2],o[3]=r[3],o}function g(o,r){const p=r[0]+r[4]+r[8];let c;if(p>0)c=Math.sqrt(p+1),o[3]=.5*c,c=.5/c,o[0]=(r[5]-r[7])*c,o[1]=(r[6]-r[2])*c,o[2]=(r[1]-r[3])*c;else{let t=0;r[4]>r[0]&&(t=1),r[8]>r[3*t+t]&&(t=2);const e=(t+1)%3,i=(t+2)%3;c=Math.sqrt(r[3*t+t]-r[3*e+e]-r[3*i+i]+1),o[t]=.5*c,c=.5/c,o[3]=(r[3*e+i]-r[3*i+e])*c,o[e]=(r[3*e+t]+r[3*t+e])*c,o[i]=(r[3*i+t]+r[3*t+i])*c}return o}function _(o,r,p,c){const t=.5*Math.PI/180;r*=t,p*=t,c*=t;const e=Math.sin(r),i=Math.cos(r),s=Math.sin(p),a=Math.cos(p),n=Math.sin(c),d=Math.cos(c);return o[0]=e*a*d-i*s*n,o[1]=i*s*d+e*a*n,o[2]=i*a*n-e*s*d,o[3]=i*a*d+e*s*n,o}const I=w.c,C=w.s,M=w.g,K=et,T=w.b,U=w.h,D=w.l,z=w.j,Y=z,j=w.f,A=j,N=w.n,q=w.a,nt=w.e;function it(o,r,p){const c=(0,B.f)(r,p);return c<-.999999?((0,B.e)(W,ut,r),(0,B.H)(W)<1e-6&&(0,B.e)(W,dt,r),(0,B.n)(W,W),at(o,W,Math.PI),o):c>.999999?(o[0]=0,o[1]=0,o[2]=0,o[3]=1,o):((0,B.e)(W,r,p),o[0]=W[0],o[1]=W[1],o[2]=W[2],o[3]=1+c,N(o,o))}const W=(0,V.vt)(),ut=(0,V.fA)(1,0,0),dt=(0,V.fA)(0,1,0),ct=(0,Z.vt)(),yt=(0,Z.vt)(),gt=(0,E.vt)();Object.freeze(Object.defineProperty({__proto__:null,add:M,calculateW:function f(o,r){const p=r[0],c=r[1],t=r[2];return o[0]=p,o[1]=c,o[2]=t,o[3]=Math.sqrt(Math.abs(1-p*p-c*c-t*t)),o},conjugate:S,copy:I,dot:U,equals:nt,exactEquals:q,fromEuler:_,fromMat3:g,getAxisAngle:rt,identity:function k(o){return o[0]=0,o[1]=0,o[2]=0,o[3]=1,o},invert:u,len:Y,length:z,lerp:D,mul:K,multiply:et,normalize:N,random:function R(o){const r=$.Ov,p=r(),c=r(),t=r(),e=Math.sqrt(1-p),i=Math.sqrt(p);return o[0]=e*Math.sin(2*Math.PI*c),o[1]=e*Math.cos(2*Math.PI*c),o[2]=i*Math.sin(2*Math.PI*t),o[3]=i*Math.cos(2*Math.PI*t),o},rotateX:function Q(o,r,p){p*=.5;const c=r[0],t=r[1],e=r[2],i=r[3],s=Math.sin(p),a=Math.cos(p);return o[0]=c*a+i*s,o[1]=t*a+e*s,o[2]=e*a-t*s,o[3]=i*a-c*s,o},rotateY:function h(o,r,p){p*=.5;const c=r[0],t=r[1],e=r[2],i=r[3],s=Math.sin(p),a=Math.cos(p);return o[0]=c*a-e*s,o[1]=t*a+i*s,o[2]=e*a+c*s,o[3]=i*a-t*s,o},rotateZ:function y(o,r,p){p*=.5;const c=r[0],t=r[1],e=r[2],i=r[3],s=Math.sin(p),a=Math.cos(p);return o[0]=c*a+t*s,o[1]=t*a-c*s,o[2]=e*a+i*s,o[3]=i*a-e*s,o},rotationTo:it,scale:T,set:C,setAxes:function xt(o,r,p,c){const t=gt;return t[0]=p[0],t[3]=p[1],t[6]=p[2],t[1]=c[0],t[4]=c[1],t[7]=c[2],t[2]=-r[0],t[5]=-r[1],t[8]=-r[2],N(o,g(o,t))},setAxisAngle:at,slerp:l,sqlerp:function vt(o,r,p,c,t,e){return l(ct,r,t,e),l(yt,p,c,e),l(o,ct,yt,2*e*(1-e)),o},sqrLen:A,squaredLength:j,str:function O(o){return"quat("+o[0]+", "+o[1]+", "+o[2]+", "+o[3]+")"}},Symbol.toStringTag,{value:"Module"}))},65580:(_t,ot,m)=>{m.d(ot,{Y0:()=>k,lO:()=>at});var E=m(87477),Z=m(32034),V=m(58701);const $=new Z.A(E.fv),B=new Z.A(E.FY),w=new Z.A(E.LJ),k=new Z.A(E.Ro);function at(h){const y=rt.get(h);if(y)return y;let f=$;if(h)if(h===B)f=B;else if(h===w)f=w;else{const l=h.wkid,R=h.latestWkid;if(null!=l||null!=R)(0,V.tl)(l)||(0,V.tl)(R)?f=B:((0,V.ZL)(l)||(0,V.ZL)(R))&&(f=w);else{const u=h.wkt2??h.wkt;if(u){const S=u.toUpperCase();S===et?f=B:S===Q&&(f=w)}}}return rt.set(h,f),f}const rt=new Map,et=B.wkt.toUpperCase(),Q=w.wkt.toUpperCase()},16352:(_t,ot,m)=>{m.r(ot),m.d(ot,{default:()=>c});var E=m(8189),Z=m(81098),V=m(42425),$=m(11432),B=m(81142),w=m(48900),k=m(85211),Q=(m(3248),m(35150),m(40707),m(76576)),h=m(1749),y=m(55861),f=m(93615),l=m(51995),R=m(83065),u=m(15268),S=m(21870);function g(t,e,i,s){const a=[];for(const n of t){const d=n.slice();a.push(d);const v=i*(n[0]-s.x)+e*(n[1]-s.y)+s.y;d[0]=e*(n[0]-s.x)-i*(n[1]-s.y)+s.x,d[1]=v}return a}function _(t,e,i){const{hasM:s,hasZ:a,spatialReference:n}=t,d=e*Math.PI/180,x=Math.cos(d),v=Math.sin(d);if("xmin"in t&&(i=i??t.center,t=new y.A({spatialReference:n,rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]})),"paths"in t){i=i??t.extent.center;const G=[];for(const b of t.paths)G.push(g(b,x,v,i));return new f.A({hasM:s,hasZ:a,spatialReference:n,paths:G})}if("rings"in t){i=i??t.extent.center;const G=[];for(const b of t.rings){const J=(0,u.$3)(b),L=g(b,x,v,i);(0,u.$3)(L)!==J&&L.reverse(),G.push(L)}return new y.A({hasM:s,hasZ:a,spatialReference:n,rings:G})}if("x"in t){const G=new h.A({x:x*(t.x-(i=i??t).x)-v*(t.y-i.y)+i.x,y:v*(t.x-i.x)+x*(t.y-i.y)+i.y,spatialReference:n});return null!=t.z&&(G.z=t.z),null!=t.m&&(G.m=t.m),G}return"points"in t?new S.A({hasM:s,hasZ:a,points:g(t.points,x,v,i=i??t.extent.center),spatialReference:n}):null}var O=m(88521),I=m(55417),C=m(46602),M=m(94137),K=m(772),T=m(82862),U=m(4398),D=m(56565),z=m(56023),Y=m(64015),j=m(41740),A=m(20029),N=m(90941),q=m(69441),nt=m(70830);class it{constructor(e,i,s,a){this.graphics=e,this.mover=i,this.dx=s,this.dy=a,this.type="move-start"}}class W{constructor(e,i,s,a){this.graphics=e,this.mover=i,this.dx=s,this.dy=a,this.type="move"}}class ut{constructor(e,i,s,a){this.graphics=e,this.mover=i,this.dx=s,this.dy=a,this.type="move-stop"}}class dt{constructor(e,i,s){this.graphics=e,this.mover=i,this.angle=s,this.type="rotate-start"}}class vt{constructor(e,i,s){this.graphics=e,this.mover=i,this.angle=s,this.type="rotate"}}class ct{constructor(e,i,s){this.graphics=e,this.mover=i,this.angle=s,this.type="rotate-stop"}}class yt{constructor(e,i,s,a){this.graphics=e,this.mover=i,this.xScale=s,this.yScale=a,this.type="scale-start"}}class xt{constructor(e,i,s,a){this.graphics=e,this.mover=i,this.xScale=s,this.yScale=a,this.type="scale"}}class gt{constructor(e,i,s,a){this.graphics=e,this.mover=i,this.xScale=s,this.yScale=a,this.type="scale-stop"}}const P=D.W.transformGraphics,o={centerIndicator:new C.A({style:"cross",size:P.center.size,color:P.center.color}),fill:{default:new O.A({color:P.fill.color,outline:{color:P.fill.outlineColor,join:"round",width:1}}),active:new O.A({color:P.fill.stagedColor,outline:{color:P.fill.outlineColor,join:"round",style:"dash",width:1}})},handles:{default:new C.A({style:"square",size:P.vertex.size,color:P.vertex.color,outline:{color:P.vertex.outlineColor,width:1}}),hover:new C.A({style:"square",size:P.vertex.hoverSize,color:P.vertex.hoverColor,outline:{color:P.vertex.hoverOutlineColor,width:1}})},rotator:{default:new C.A({style:"circle",size:P.vertex.size,color:P.vertex.color,outline:{color:P.vertex.outlineColor,width:1}}),hover:new C.A({style:"circle",size:P.vertex.hoverSize,color:P.vertex.hoverColor,outline:{color:P.vertex.hoverOutlineColor,width:1}})},rotatorLine:new I.A({color:P.line.color,width:1})};let r=class extends V.A.EventedAccessor{constructor(t){super(t),this._activeHandleGraphic=null,this._graphicAttributes={esriSketchTool:"box"},this._mover=null,this._centerGraphic=null,this._backgroundGraphic=null,this._vertexGraphics=[],this._rotateHandleGraphic=null,this._rotateGraphicOffset=20,this._angleOfRotation=0,this._rotateLineGraphic=null,this._startInfo=null,this._totalDx=0,this._totalDy=0,this._xScale=1,this._yScale=1,this.tooltip=null,this.type="box",this.callbacks={onMoveStart(){},onMove(){},onMoveStop(){},onScaleStart(){},onScale(){},onScaleStop(){},onRotateStart(){},onRotate(){},onRotateStop(){},onGraphicClick(){}},this.enableMovement=!0,this.enableRotation=!0,this.enableScaling=!0,this.graphics=[],this.highlightsEnabled=!0,this.layer=null,this.preserveAspectRatio=!1,this.showCenterGraphic=!0,this.symbols=o,this.sketchOptions=new z.A,this.view=null,this._getBounds=(()=>{const e=(0,l.vt)();return(i,s)=>{i[0]=Number.POSITIVE_INFINITY,i[1]=Number.POSITIVE_INFINITY,i[2]=Number.NEGATIVE_INFINITY,i[3]=Number.NEGATIVE_INFINITY;for(const a of s){if(!a)continue;let n,d,x,v;if("point"===a.type)n=x=a.x,d=v=a.y;else if("multipoint"===a.type){const G=(0,u.$K)(a);[n,d,x,v]=(0,R.Yz)(e,[G])}else if("extent"===a.type)[n,d,x,v]=[a.xmin,a.ymin,a.xmax,a.ymax];else{const G=(0,u.$K)(a);[n,d,x,v]=(0,R.Yz)(e,G)}i[0]=Math.min(n,i[0]),i[1]=Math.min(d,i[1]),i[2]=Math.max(x,i[2]),i[3]=Math.max(v,i[3])}return i}})()}initialize(){const t=this.view;this._highlightHelper=new T.A({view:t}),this._setup(),this.addHandles([(0,w.z7)(()=>t?.ready,()=>{const{layer:e,view:i}=this;(0,U.Y)(i,e)},{once:!0,initial:!0}),(0,w.wB)(()=>this.preserveAspectRatio,()=>{this._activeHandleGraphic&&(this._scaleGraphic(this._activeHandleGraphic),this._updateGraphics(),this._updateTooltip(this._activeHandleGraphic))}),(0,w.wB)(()=>t?.scale,()=>{this._updateRotateGraphic(),this._updateRotateLineGraphic()}),(0,w.wB)(()=>this.graphics,()=>this.refresh()),(0,w.wB)(()=>this.layer,(e,i)=>{i&&this._resetGraphics(i),this.refresh()}),(0,w.wB)(()=>this.highlightsEnabled,()=>{this._highlightHelper?.removeAll(),this._setUpHighlights()}),(0,w.wB)(()=>this.sketchOptions.tooltips.effectiveEnabled,e=>{this.tooltip=e?(0,Y.A)(()=>({view:t,options:this.sketchOptions.tooltips})):(0,$.pR)(this.tooltip)},w.pc),(0,w.wB)(()=>this.view.effectiveTheme.accentColor,()=>this._updateSymbolsForTheme(),w.Vh),this.on("move-start",e=>this.callbacks?.onMoveStart?.(e)),this.on("move",e=>this.callbacks?.onMove?.(e)),this.on("move-stop",e=>this.callbacks?.onMoveStop?.(e)),this.on("rotate-start",e=>this.callbacks?.onRotateStart?.(e)),this.on("rotate",e=>this.callbacks?.onRotate?.(e)),this.on("rotate-stop",e=>this.callbacks?.onRotateStop?.(e)),this.on("scale-start",e=>this.callbacks?.onScaleStart?.(e)),this.on("scale",e=>this.callbacks?.onScale?.(e)),this.on("scale-stop",e=>this.callbacks?.onScaleStop?.(e))])}destroy(){this._reset(),this.tooltip=(0,$.pR)(this.tooltip)}get state(){const t=this.view?.ready??!1;return t&&this.graphics.length&&this.layer?"active":t?"ready":"disabled"}isUIGraphic(t){return this._vertexGraphics.includes(t)||t===this._backgroundGraphic||t===this._centerGraphic||t===this._rotateHandleGraphic||t===this._rotateLineGraphic}move(t,e){if(this._mover&&this.graphics.length){for(const i of this.graphics){const a=(0,M.lR)(i.geometry,t,e,this.view);i.geometry=a}this.refresh(),this.emit("move-stop",new ut(this.graphics,null,t,e))}}scale(t,e){if(this._mover&&this.graphics.length){for(const i of this.graphics){const a=(0,M.hs)(i.geometry,t,e);i.geometry=a}this.refresh(),this.emit("scale-stop",new gt(this.graphics,null,t,e))}}rotate(t,e){if(this._mover&&this.graphics.length){e||(e=new h.A(this._vertexGraphics[1].geometry.x,this._vertexGraphics[3].geometry.y,this.view.spatialReference));for(const i of this.graphics){const a=_(i.geometry,t,e);i.geometry=a}this.refresh(),this.emit("rotate-stop",new ct(this.graphics,null,t))}}refresh(){this._reset(),this._setup()}reset(){this.graphics=[]}_setup(){"active"===this.state&&(this._setUpHighlights(),this._setupGraphics(),this._setupMover(),this._updateGraphics())}_reset(){this._highlightHelper?.removeAll(),this._resetGraphicStateVars(),this._resetGraphics(),this._updateTooltip(),this._mover&&this._mover.destroy(),this._mover=null,this.view.cursor="default"}_resetGraphicStateVars(){this._startInfo=null,this._activeHandleGraphic=null,this._totalDx=0,this._totalDy=0,this._xScale=1,this._yScale=1,this._angleOfRotation=0}_resetGraphics(t){(t=t||this.layer)&&(t.removeMany(this._vertexGraphics),t.remove(this._backgroundGraphic),t.remove(this._centerGraphic),t.remove(this._rotateHandleGraphic),t.remove(this._rotateLineGraphic)),this._vertexGraphics.forEach(e=>!e.destroyed&&e.destroy()),!this._backgroundGraphic.destroyed&&this._backgroundGraphic.destroy(),!this._centerGraphic.destroyed&&this._centerGraphic.destroy(),!this._rotateHandleGraphic.destroyed&&this._rotateHandleGraphic.destroy(),!this._rotateLineGraphic.destroyed&&this._rotateLineGraphic.destroy(),this._vertexGraphics=[],this._backgroundGraphic=null,this._centerGraphic=null,this._rotateHandleGraphic=null,this._rotateLineGraphic=null}_setupMover(){let t=[];this.enableScaling&&(t=t.concat(this._vertexGraphics)),this.enableRotation&&t.push(this._rotateHandleGraphic),this.enableMovement&&(t=t.concat(this.graphics,this._backgroundGraphic)),this.showCenterGraphic&&t.push(this._centerGraphic),this._mover=new K.default({enableMoveAllGraphics:!1,highlightsEnabled:!1,indicatorsEnabled:!1,view:this.view,graphics:t,callbacks:{onGraphicClick:e=>this._onGraphicClickCallback(e),onGraphicMoveStart:e=>this._onGraphicMoveStartCallback(e),onGraphicMove:e=>this._onGraphicMoveCallback(e),onGraphicMoveStop:e=>this._onGraphicMoveStopCallback(e),onGraphicPointerOver:e=>this._onGraphicPointerOverCallback(e),onGraphicPointerOut:e=>this._onGraphicPointerOutCallback(e)}})}_getStartInfo(t){const[e,i,s,a]=this._getBoxBounds((0,l.vt)()),n=Math.abs(s-e),d=Math.abs(a-i),x=(s+e)/2,v=(a+i)/2,{x:G,y:b}=t.geometry;return{width:n,height:d,centerX:x,centerY:v,startX:G,startY:b,graphicInfos:this._getGraphicInfos(),box:this._backgroundGraphic.geometry,rotate:this._rotateHandleGraphic.geometry}}_getGraphicInfos(){return this.graphics.map(t=>this._getGraphicInfo(t))}_getGraphicInfo(t){const e=t.geometry,[i,s,a,n]=this._getBounds((0,l.vt)(),[e]);return{width:Math.abs(a-i),height:Math.abs(n-s),centerX:(a+i)/2,centerY:(n+s)/2,geometry:e}}_onGraphicClickCallback(t){t.viewEvent.stopPropagation(),this.emit("graphic-click",t),this.callbacks.onGraphicClick&&this.callbacks.onGraphicClick(t)}_onGraphicMoveStartCallback(t){const{_angleOfRotation:e,_xScale:i,_yScale:s,_backgroundGraphic:a,_vertexGraphics:n,_rotateHandleGraphic:d,symbols:x}=this,v=t.graphic;this._resetGraphicStateVars(),this._hideGraphicsBeforeUpdate(),a.symbol=x.fill.active,this._startInfo=this._getStartInfo(v),this._updateTooltip(v,t.viewEvent),v===d?(this.view.cursor="grabbing",this.emit("rotate-start",new dt(this.graphics,v,e))):n.includes(v)?(this._activeHandleGraphic=v,this.emit("scale-start",new yt(this.graphics,v,i,s))):this.emit("move-start",new it(this.graphics,v,t.dx,t.dy))}_onGraphicMoveCallback(t){const e=t.graphic;if(this._startInfo)if(this._vertexGraphics.includes(e))this._scaleGraphic(e),this._updateTooltip(e,t.viewEvent),this.emit("scale",new xt(this.graphics,e,this._xScale,this._yScale));else if(e===this._rotateHandleGraphic)this._rotateGraphic(e),this._updateTooltip(e,t.viewEvent),this.emit("rotate",new vt(this.graphics,e,this._angleOfRotation));else{const{dx:i,dy:s}=t;this._totalDx+=i,this._totalDy+=s,this._moveGraphic(e,i,s),this._updateTooltip(e,t.viewEvent),this.emit("move",new W(this.graphics,e,i,s))}}_onGraphicMoveStopCallback(t){const e=t.graphic;if(!this._startInfo)return void this.refresh();const{_angleOfRotation:i,_totalDx:s,_totalDy:a,_xScale:n,_yScale:d,_vertexGraphics:x,_rotateHandleGraphic:v}=this;this.refresh(),e===v?(this.view.cursor="pointer",this.emit("rotate-stop",new ct(this.graphics,e,i))):x.includes(e)?this.emit("scale-stop",new gt(this.graphics,e,n,d)):this.emit("move-stop",new ut(this.graphics,e,s,a))}_onGraphicPointerOverCallback(t){const{_backgroundGraphic:e,_vertexGraphics:i,graphics:s,_rotateHandleGraphic:a,symbols:n,view:d}=this,x=t.graphic;if(this._hoveredGraphic=x,x===a)return a.symbol=n.rotator.hover,d.cursor="pointer",void this._updateTooltip(x);if(s.includes(x)||x===e)return void(d.cursor="move");if(!i.includes(x))return void(d.cursor="pointer");this._updateTooltip(x),t.graphic.symbol=n.handles.hover;const v=d.rotation;let G,b=t.index;switch(b<8&&(v>=0&&v<45?b%=8:b=v>=45&&v<90?(b+1)%8:v>=90&&v<135?(b+2)%8:v>=135&&v<180?(b+3)%8:v>=180&&v<225?(b+4)%8:v>=225&&v<270?(b+5)%8:v>=270&&v<315?(b+6)%8:(b+7)%8),b){case 0:case 4:G="nwse-resize";break;case 1:case 5:G="ns-resize";break;case 2:case 6:G="nesw-resize";break;case 3:case 7:G="ew-resize";break;default:G="pointer"}d.cursor=G}_onGraphicPointerOutCallback(t){const{_vertexGraphics:e,_rotateHandleGraphic:i,symbols:s,view:a}=this;this._hoveredGraphic=null,t.graphic===i?i.symbol=s.rotator.default:e.includes(t.graphic)&&(t.graphic.symbol=s.handles.default),a.cursor="default",this._updateTooltip()}_scaleGraphic(t){const{_startInfo:e,_vertexGraphics:i,preserveAspectRatio:s,view:a}=this,{centerX:n,centerY:d,graphicInfos:x,height:v,startX:G,startY:b,width:J}=e,{resolution:L,transform:H}=a.state,X=i.indexOf(t);1!==X&&5!==X||this._updateX(t,n),3!==X&&7!==X||this._updateY(t,d);const{x:mt,y:ft}=t.geometry,St=H[0]*mt+H[2]*ft+H[4],At=H[1]*mt+H[3]*ft+H[5],lt=x?.map(F=>F.geometry)??[],Ot=lt.every(F=>"point"===F.type);if((0===J||0===v)&&Ot){const F=p((mt-G)/L),tt=p((b-ft)/L);for(let ht=0;ht<lt.length;ht++)this.graphics[ht].geometry=(0,M.lR)(lt[ht],F,tt,a,!0);return this._centerGraphic.geometry=new h.A(mt,ft,a.spatialReference),void(this._backgroundGraphic.geometry=(0,M.lR)(e.box,F,tt,a,!0))}if(s){const F=p(H[0]*n+H[2]*d+H[4],2),tt=p(H[1]*n+H[3]*d+H[5],2),ht=p(H[0]*G+H[2]*b+H[4],2),Gt=p(H[1]*G+H[3]*b+H[5],2);let st=(0,M.wW)(F,tt,ht,Gt,St,At);0!==st&&Math.abs(st)!==1/0||(st=1),this._xScale=this._yScale=st;for(const pt of lt){const Mt=lt.indexOf(pt);this.graphics[Mt].geometry=(0,M.hs)(pt,this._xScale,this._yScale,[n,d])}this._updateBackgroundGraphic()}else{let F=mt-G,tt=b-ft;if(1===X||5===X?F=0:3!==X&&7!==X||(tt=0),0===F&&0===tt)return;const ht=n+F/2,Gt=d+tt/2;let st=(J+(G>n?F:-1*F))/J,pt=(v+(b<d?tt:-1*tt))/v;1!==X&&5!==X&&0!==st&&Math.abs(st)!==1/0||(st=1),3!==X&&7!==X&&0!==pt&&Math.abs(pt)!==1/0||(pt=1),this._xScale=st,this._yScale=pt;const Mt=(ht-n)/L,Et=(Gt-d)/L,It=(0,M.hs)(e.box,this._xScale,this._yScale);this._backgroundGraphic.geometry=(0,M.lR)(It,Mt,Et,a,!0);const{centerX:bt,centerY:wt}=this._getGraphicInfo(this._backgroundGraphic),Ct=(bt-n)/L,Tt=-1*(wt-d)/L;for(const Rt of lt){const kt=lt.indexOf(Rt),Pt=(0,M.hs)(Rt,this._xScale,this._yScale,[n,d]);this.graphics[kt].geometry=(0,M.lR)(Pt,Ct,Tt,a,!0)}this._centerGraphic.geometry=new h.A(bt,wt,a.spatialReference)}}_rotateGraphic(t){const{centerX:e,centerY:i,startX:s,startY:a,box:n,rotate:d}=this._startInfo,x=this.view.spatialReference,v=new h.A(s,a,x),G=new h.A(e,i,x);this._angleOfRotation=(0,M.UT)(v,t.geometry,G);const J=this._startInfo.graphicInfos?.map(L=>L.geometry)??[];for(const L of J){const H=J.indexOf(L),X=_(L,this._angleOfRotation,G);this.graphics[H].geometry=X}this._backgroundGraphic.geometry=_(n,this._angleOfRotation,G),this._rotateHandleGraphic.geometry=_(d,this._angleOfRotation,G)}_moveGraphic(t,e,i){if(this.graphics.includes(t)){this._backgroundGraphic.geometry=(0,M.lR)(this._backgroundGraphic.geometry,e,i,this.view);for(const a of this.graphics)a!==t&&(a.geometry=(0,M.lR)(a.geometry,e,i,this.view))}else t===this._centerGraphic&&(this._backgroundGraphic.geometry=(0,M.lR)(this._backgroundGraphic.geometry,e,i,this.view));if(t===this._backgroundGraphic||t===this._centerGraphic)for(const s of this.graphics)s.geometry=(0,M.lR)(s.geometry,e,i,this.view)}_setUpHighlights(){this.highlightsEnabled&&this.graphics.length&&this._highlightHelper?.add(this.graphics)}_setupGraphics(){const{_graphicAttributes:t,symbols:e}=this;this._centerGraphic=new Z.A({symbol:e.centerIndicator,attributes:t}),this.showCenterGraphic&&this.layer.add(this._centerGraphic),this._backgroundGraphic=new Z.A({symbol:e.fill.default,attributes:t}),this.layer.add(this._backgroundGraphic),this._rotateLineGraphic=new Z.A({symbol:e.rotatorLine,attributes:t}),this._rotateHandleGraphic=new Z.A({symbol:e.rotator.default,attributes:t}),this.enableRotation&&!this._hasExtentGraphic()&&this.layer.addMany([this._rotateLineGraphic,this._rotateHandleGraphic]);for(let i=0;i<8;i++)this._vertexGraphics.push(new Z.A({symbol:e.handles.default,attributes:t}));this.enableScaling&&this.layer.addMany(this._vertexGraphics)}_updateSymbolsForTheme(){const t=this.view.effectiveTheme.accentColor;this.symbols={...this.symbols,fill:{active:this.symbols.fill.active?.clone().set("outline.color",t),default:this.symbols.fill.default?.clone().set("outline.color",t)},handles:{...this.symbols.handles,default:this.symbols.handles.default.clone().set("outline.color",t)},rotator:{...this.symbols.rotator,default:this.symbols.rotator.default.clone().set("outline.color",t)},rotatorLine:this.symbols.rotatorLine.clone().set("color",t)};for(const e of this._vertexGraphics)e.symbol=e===this._hoveredGraphic?this.symbols.handles.hover:this.symbols.handles.default;this._backgroundGraphic.symbol=this.symbols.fill.default,this._rotateHandleGraphic.symbol=this._rotateHandleGraphic===this._hoveredGraphic?this.symbols.rotator.hover:this.symbols.rotator.default,this._rotateLineGraphic.symbol=this.symbols.rotatorLine}_updateGraphics(){this._updateBackgroundGraphic(),this._updateHandleGraphics(),this._updateCenterGraphic(),this._updateRotateGraphic(),this._updateRotateLineGraphic()}_hideGraphicsBeforeUpdate(){this._centerGraphic.visible=!1,this._rotateHandleGraphic.visible=!1,this._rotateLineGraphic.visible=!1,this._vertexGraphics.forEach(t=>t.visible=!1)}_updateHandleGraphics(){const t=this._getCoordinates(!0);this._vertexGraphics.forEach((e,i)=>{const[s,a]=t[i];this._updateXY(e,s,a)})}_updateBackgroundGraphic(){const t=this._getCoordinates().map(([e,i])=>[e,i]);this._backgroundGraphic.geometry=new y.A({rings:[t],spatialReference:this.view.spatialReference})}_updateCenterGraphic(){const[t,e,i,s]=this._getBoxBounds((0,l.vt)());this._centerGraphic.geometry=new h.A((i+t)/2,(s+e)/2,this.view.spatialReference)}_updateRotateGraphic(){if(!this._vertexGraphics.length)return;const{x:t,y:e}=this._vertexGraphics[1].geometry;this._rotateHandleGraphic.geometry=new h.A(t,e+this.view.state.resolution*this._rotateGraphicOffset,this.view.spatialReference)}_updateRotateLineGraphic(){if(!this._vertexGraphics.length||!this._rotateHandleGraphic?.geometry)return;const t=this._vertexGraphics[1].geometry,e=this._rotateHandleGraphic.geometry;this._rotateLineGraphic.geometry=new f.A({paths:[[[t.x,t.y],[e.x,e.y]]],spatialReference:this.view.spatialReference})}_updateXY(t,e,i){t.geometry=new h.A(e,i,this.view.spatialReference)}_updateX(t,e){t.geometry=new h.A(e,t.geometry.y,this.view.spatialReference)}_updateY(t,e){t.geometry=new h.A(t.geometry.x,e,this.view.spatialReference)}_hasExtentGraphic(){return this.graphics.some(t=>null!=t?.geometry&&"extent"===t.geometry.type)}_getBoxBounds(t){const e=this.graphics.map(i=>i.geometry);return this._getBounds(t,e)}_getCoordinates(t){const[e,i,s,a]=this._getBoxBounds((0,l.vt)());if(t){const n=(e+s)/2,d=(a+i)/2;return[[e,a],[n,a],[s,a],[s,d],[s,i],[n,i],[e,i],[e,d]]}return[[e,a],[s,a],[s,i],[e,i]]}_updateTooltip(t,e){if(null==this.tooltip)return;if(!t)return void this.tooltip.clear();const{_backgroundGraphic:i,graphics:s,_vertexGraphics:a,_rotateHandleGraphic:n}=this;t===n?this._updateRotateTooltip():a.includes(t)?this._updateScaleTooltip():(s.includes(t)||t===i)&&this._updateMoveTooltip(e)}_updateRotateTooltip(){null!=this.tooltip&&(this.tooltip.info=new j.d({sketchOptions:this.sketchOptions,angle:-this._angleOfRotation}))}_updateScaleTooltip(){const{tooltip:t,_xScale:e,_yScale:i,sketchOptions:s,view:a}=this;if(null==t)return;const n=this._getCoordinates(),d=(0,nt.b)({topLeft:n[0],topRight:n[1],bottomRight:n[2],bottomLeft:n[3],spatialReference:a.spatialReference});if(null==d)return;const{xSize:x,ySize:v}=d,G=Math.abs(e),b=Math.abs(i);t.info=new A.c({sketchOptions:s,xScale:G,yScale:b,xSize:x,ySize:v})}_updateMoveTooltip(t){const{tooltip:e,sketchOptions:i,view:s}=this;if(null==e)return;const a=new N.M({sketchOptions:i});if(t){const{x:n,y:d}=t.origin,x=s.toMap(t),v=s.toMap({x:n,y:d}),G=(0,q.Kt)(v,x);a.distance=G??B.r7}e.info=a}};function p(t,e=2){return Number.parseFloat(t.toFixed(e))}(0,E._)([(0,k.MZ)()],r.prototype,"tooltip",void 0),(0,E._)([(0,k.MZ)({readOnly:!0})],r.prototype,"type",void 0),(0,E._)([(0,k.MZ)()],r.prototype,"callbacks",void 0),(0,E._)([(0,k.MZ)()],r.prototype,"enableMovement",void 0),(0,E._)([(0,k.MZ)()],r.prototype,"enableRotation",void 0),(0,E._)([(0,k.MZ)()],r.prototype,"enableScaling",void 0),(0,E._)([(0,k.MZ)()],r.prototype,"graphics",void 0),(0,E._)([(0,k.MZ)()],r.prototype,"highlightsEnabled",void 0),(0,E._)([(0,k.MZ)()],r.prototype,"layer",void 0),(0,E._)([(0,k.MZ)()],r.prototype,"preserveAspectRatio",void 0),(0,E._)([(0,k.MZ)()],r.prototype,"showCenterGraphic",void 0),(0,E._)([(0,k.MZ)({readOnly:!0})],r.prototype,"state",null),(0,E._)([(0,k.MZ)()],r.prototype,"symbols",void 0),(0,E._)([(0,k.MZ)({type:z.A})],r.prototype,"sketchOptions",void 0),(0,E._)([(0,k.MZ)({constructOnly:!0})],r.prototype,"view",void 0),r=(0,E._)([(0,Q.$)("esri.views.draw.support.Box")],r);const c=r},94137:(_t,ot,m)=>{m.d(ot,{UT:()=>rt,hs:()=>k,lR:()=>w,wW:()=>at});var E=m(69287),Z=m(51995),V=m(83065),$=m(15268);function B(h,y,f,l){if(null==l||h.hasZ||(l=void 0),"point"===h.type)return h.x+=y,h.y+=f,h.hasZ&&null!=l&&(h.z+=l),h;if("multipoint"===h.type){const S=h.points;for(let g=0;g<S.length;g++)S[g]=et(S[g],y,f,l);return h}if("extent"===h.type)return h.xmin+=y,h.xmax+=y,h.ymin+=f,h.ymax+=f,null!=l&&(h.zmin??=0,h.zmin+=l,h.zmax??=0,h.zmax+=l),h;const R=(0,$.$K)(h),u="polyline"===h.type?h.paths:h.rings;for(let S=0;S<R.length;S++){const g=R[S];for(let _=0;_<g.length;_++)g[_]=et(g[_],y,f,l)}return"paths"in h?h.paths=u:h.rings=u,h}function w(h,y,f,l,R){const u=h.clone(),S=l.resolution;if("point"===u.type){if(R)B(u,y*S,-f*S);else{const g=l.state.transform,_=l.state.inverseTransform,O=g[0]*u.x+g[2]*u.y+g[4],I=g[1]*u.x+g[3]*u.y+g[5];u.x=_[0]*(O+y)+_[2]*(I+f)+_[4],u.y=_[1]*(O+y)+_[3]*(I+f)+_[5]}return u}if("multipoint"===u.type){if(R)B(u,y*S,-f*S);else{const g=u.points,_=l.state.transform,O=l.state.inverseTransform;for(let I=0;I<g.length;I++){const C=g[I],M=_[0]*C[0]+_[2]*C[1]+_[4],K=_[1]*C[0]+_[3]*C[1]+_[5];g[I]=Q(C,O[0]*(M+y)+O[2]*(K+f)+O[4],O[1]*(M+y)+O[3]*(K+f)+O[5],void 0)}}return u}if("extent"===u.type){if(R)B(u,y*S,-f*S);else{const g=l.state.transform,_=l.state.inverseTransform,O=g[0]*u.xmin+g[2]*u.ymin+g[4],I=g[1]*u.xmin+g[3]*u.ymin+g[5],C=g[0]*u.xmax+g[2]*u.ymax+g[4],M=g[1]*u.xmax+g[3]*u.ymax+g[5];u.xmin=_[0]*(O+y)+_[2]*(I+f)+_[4],u.ymin=_[1]*(O+y)+_[3]*(I+f)+_[5],u.xmax=_[0]*(C+y)+_[2]*(M+f)+_[4],u.ymax=_[1]*(C+y)+_[3]*(M+f)+_[5]}return u}if(R)B(u,y*S,-f*S);else{const g=(0,$.$K)(u),_="polyline"===u.type?u.paths:u.rings,O=l.state.transform,I=l.state.inverseTransform;for(let C=0;C<g.length;C++){const M=g[C];for(let K=0;K<M.length;K++){const T=M[K],U=O[0]*T[0]+O[2]*T[1]+O[4],D=O[1]*T[0]+O[3]*T[1]+O[5];M[K]=Q(T,I[0]*(U+y)+I[2]*(D+f)+I[4],I[1]*(U+y)+I[3]*(D+f)+I[5],void 0)}}"paths"in u?u.paths=_:u.rings=_}return u}function k(h,y,f,l){if("point"===h.type){const{x:T,y:U}=h,D=l?l[0]:T,z=l?l[1]:U,Y=h.clone(),A=(U-z)*f+z;return Y.x=(T-D)*y+D,Y.y=A,Y}if("multipoint"===h.type){const T=(0,$.$K)(h),U=(0,Z.vt)(),[D,z,Y,j]=(0,V.Yz)(U,[T]),A=l?l[0]:(D+Y)/2,N=l?l[1]:(j+z)/2,q=h.clone(),nt=q.points;for(let it=0;it<nt.length;it++){const W=nt[it],[ut,dt]=W;nt[it]=Q(W,(ut-A)*y+A,(dt-N)*f+N,void 0)}return q}if("extent"===h.type){const{xmin:T,xmax:U,ymin:D,ymax:z}=h,Y=l?l[0]:(T+U)/2,j=l?l[1]:(z+D)/2,A=h.clone();if(A.xmin=(T-Y)*y+Y,A.ymax=(z-j)*f+j,A.xmax=(U-Y)*y+Y,A.ymin=(D-j)*f+j,A.xmin>A.xmax){const N=A.xmin;A.xmin=A.xmax,A.xmax=N}if(A.ymin>A.ymax){const N=A.ymin;A.ymin=A.ymax,A.ymax=N}return A}const R=(0,$.$K)(h),u=(0,Z.vt)(),[S,g,_,O]=(0,V.Yz)(u,R),I=l?l[0]:(S+_)/2,C=l?l[1]:(O+g)/2,M=h.clone(),K="polyline"===M.type?M.paths:M.rings;for(let T=0;T<R.length;T++){const U=R[T];for(let D=0;D<U.length;D++){const z=U[D],[Y,j]=z;K[T][D]=Q(z,(Y-I)*y+I,(j-C)*f+C,void 0)}}return"paths"in M?M.paths=K:M.rings=K,M}function at(h,y,f,l,R,u){const S=Math.sqrt((f-h)*(f-h)+(l-y)*(l-y));return Math.sqrt((R-h)*(R-h)+(u-y)*(u-y))/S}function rt(h,y,f,l=!1){const R=Math.atan2(y.y-f.y,y.x-f.x)-Math.atan2(h.y-f.y,h.x-f.x),u=Math.atan2(Math.sin(R),Math.cos(R));return l?u:(0,E.KJ)(u)}function et(h,y,f,l){return Q(h,h[0]+y,h[1]+f,null!=h[2]&&null!=l?h[2]+l:void 0)}function Q(h,y,f,l){const R=[y,f];return h.length>2&&R.push(l??h[2]),h.length>3&&R.push(h[3]),R}}}]);