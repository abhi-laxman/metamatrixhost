"use strict";(self.webpackChunkAngularClient=self.webpackChunkAngularClient||[]).push([[1039,9557],{11445:(b,K,e)=>{e.d(K,{Qf:()=>P,Qh:()=>E,RS:()=>A,ez:()=>v,i5:()=>D,lM:()=>R,qK:()=>c});var o=e(79139);const A=16;function R(s){if(!s)return 0;let l=c;for(const u in s)s.hasOwnProperty(u)&&(l+=C(s[u],!1));return l}function E(s){if(!s)return 0;if("number"==typeof s[0])return P(s);if(Array.isArray(s))return function L(s){const l=s.length;if(0===l||"number"==typeof s[0])return a(s,8);let u=v;for(let d=0;d<l;d++)u+=C(s[d]);return u}(s);let l=c;for(const u in s)s.hasOwnProperty(u)&&(l+=C(s[u]));return l}function C(s,l=!0){switch(typeof s){case"object":return l?E(s):c;case"string":return function i(s){return 32+s.length}(s);case"number":return A;case"boolean":return 4;default:return 8}}function P(...s){return s.reduce((l,u)=>l+(u?(0,o.iu)(u)?u.byteLength+D:Array.isArray(u)?a(u,A):0:0),0)}function a(s,l){return v+s.length*l}const c=32,v=16,D=145},40856:(b,K,e)=>{e.d(K,{X_:()=>R,i1:()=>E,oW:()=>D,zx:()=>a});var o=e(69287),i=e(82663);const A=96;function R(s,l){const u=l||s.extent,d=s.width,p=(0,i.GA)(u?.spatialReference);return u&&d?u.width/d*p*i.dy*A:0}function E(s,l){return s/((0,i.GA)(l)*i.dy*A)}function a(s,l,u){return function c(s,l){return 0===l||(0,o.Sp)(s,l)||s<l}(s,l)&&function v(s,l){return 0===l||(0,o.Sp)(s,l)||s>l}(s,u)}function D(s,l){return(0,o.Sp)(s,l)?0:(s||Number.POSITIVE_INFINITY)>(l||Number.POSITIVE_INFINITY)?1:-1}},64368:(b,K,e)=>{e.r(K),e.d(K,{default:()=>ce});var o=e(10467),i=e(8189),A=e(92165),R=e(39693),E=e(85211),a=(e(3248),e(35150),e(40707),e(76576)),c=e(28067),v=e(32034),D=e(6434),s=e(95478),l=e(5922),u=e(55098),d=e(1119),p=e(55225),_=e(75783),x=e(93327);let h=class extends u.A{constructor(){super(...arguments),this.featureDefinition=null,this.type="ogc-feature"}load(U){return this.addResolvingPromise(this._loadOGCServices(this.layer,U)),this.when()}getSource(){const{featureDefinition:{collection:U,layerDefinition:F,spatialReference:G,supportedCrs:w},layer:{apiKey:H,customParameters:$,effectiveMaxRecordCount:V}}=this;return{type:"ogc-source",collection:U,layerDefinition:F,maxRecordCount:V,queryParameters:{apiKey:H,customParameters:$},spatialReference:G,supportedCrs:w}}queryExtent(U,F={}){return null}queryFeatureCount(U,F={}){return null}queryFeatures(U,F={}){return this.queryFeaturesJSON(U,F).then(G=>x.A.fromJSON(G))}queryFeaturesJSON(U,F={}){const G=this.getSource();return this.load(F).then(()=>(0,p.bW)(G,U,F))}queryObjectIds(U,F={}){return null}serviceSupportsSpatialReference(U){return!(!U.isWGS84&&!U.isWebMercator&&!this.featureDefinition.supportedCrs[U.wkid])}_conformsToType(U,F){const G=new RegExp(`^${(0,d.Cj)(F)}$`,"i");return U.conformsTo.some(w=>G.test(w))??!1}_getCapabilities(U,F){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,isBranchVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:U},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!1,supportsDelete:!1,supportsEditing:!1,supportsChangeTracking:!1,supportsQuery:!1,supportsQueryBins:!1,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:!1,supportsExceedsLimitStatistics:!1,supportsAsyncConvert3D:!1},query:{maxRecordCount:F,maxRecordCountFactor:void 0,standardMaxRecordCount:void 0,supportsCacheHint:!1,supportsCentroid:!1,supportsCurrentUser:!1,supportsDisjointSpatialRelationship:!1,supportsDistance:!1,supportsDistinct:!1,supportsExtent:!1,supportsFormatPBF:!1,supportsGeometryProperties:!1,supportsHavingClause:!1,supportsHistoricMoment:!1,supportsMaxRecordCountFactor:!1,supportsOrderBy:!1,supportsPagination:!1,supportsPercentileStatistics:!1,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryByAnonymous:!1,supportsQueryByOthers:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsReturnMesh:!1,supportsStandardizedQueriesOnly:!1,supportsTopFeaturesQuery:!1,supportsStatistics:!1,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,supportsSqlExpression:!1,supportsTrueCurve:!1,tileMaxRecordCount:void 0},queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},queryAttributeBins:_.$,editing:{supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsGeometryUpdate:!1,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsUploadWithItemId:!1,supportsUpdateWithoutM:!1,supportsAsyncApplyEdits:!1,zDefault:void 0}}}_getMaxRecordCount(U){const F=U?.components?.parameters;return F?.limit?.schema?.maximum??F?.limitFeatures?.schema?.maximum}_getStorageSpatialReference(U){const G=(0,p.J0)(U.storageCrs??p.QE);return null==G?v.A.WGS84:new v.A({wkid:G})}_getSupportedSpatialReferences(U,F){const G="#/crs",w=U.crs??[p.QE],H=w.includes(G)?w.filter(V=>V!==G).concat(F.crs??[]):w,$=/^http:\/\/www\.opengis.net\/def\/crs\/epsg\/.*\/3785$/i;return H.filter(V=>!$.test(V))}_loadOGCServices(U,F){var G=this;return(0,o.A)(function*(){const w=null!=F?F.signal:null,{apiKey:H,collectionId:$,customParameters:V,fields:ye,geometryType:_e,hasZ:me,objectIdField:he,timeInfo:fe,url:ve}=U,Ee={fields:ye?.map(z=>z.toJSON()),geometryType:D.Ye.toJSON(_e),hasZ:me??!1,objectIdField:he,timeInfo:fe?.toJSON()},Y={apiKey:H,customParameters:V,signal:w},ee=yield(0,p.Ki)(ve,Y),[ie,ne]=yield Promise.all([(0,p.Px)(ee,Y),(0,p.bV)(ee,Y)]);if(!G._conformsToType(ie,"http://www.opengis.net/spec/ogcapi-features-1/1.0/conf/geojson"))throw new l.A("ogc-feature-layer:no-geojson-support","Server does not support geojson");const X=ne.collections.find(({id:z})=>z===$);if(!X)throw new l.A("ogc-feature-layer:collection-not-found","Server does not contain the named collection");const ge=G._conformsToType(ie,"http://www.opengis.net/spec/ogcapi-features-1/1.0/conf/oas30")?yield(0,p.GA)(ee,Y):null,ae=yield(0,p.GL)(X,Ee,Y),Me=G._getMaxRecordCount(ge),Ie=G._getCapabilities(ae.hasZ,Me),Oe=G._getStorageSpatialReference(X).toJSON(),Pe=G._getSupportedSpatialReferences(X,ne),Te=new RegExp(`^${(0,d.Cj)(p.vJ)}`,"i"),te={};for(const z of Pe){const re=(0,p.J0)(z);null!=re&&(te[re]||(te[re]=z.replace(Te,"")))}G.featureDefinition={capabilities:Ie,collection:X,layerDefinition:ae,spatialReference:Oe,supportedCrs:te}})()}};(0,i._)([(0,E.MZ)()],h.prototype,"featureDefinition",void 0),(0,i._)([(0,E.MZ)({constructOnly:!0})],h.prototype,"layer",void 0),(0,i._)([(0,E.MZ)()],h.prototype,"type",void 0),h=(0,i._)([(0,a.$)("esri.layers.graphics.sources.OGCFeatureSource")],h);var T=e(94376),S=e(93410),m=e(23e3),f=e(73955),y=e(31446),M=e(25263),I=e(17049),g=e(43124),n=e(85551),O=e(1151),B=e(33036),j=e(84311),Z=e(77486),W=e(22329),Q=e(47063),k=e(29141),q=e(3404),J=e(86300),le=e(54947),pe=e(73975),se=e(31595),oe=e(87086),ue=e(41843);const de=(0,q.p)();let N=class extends((0,f.FJ)((0,T.p)((0,m.d)((0,M.J)((0,y.F)((0,S.dM)((0,g.fY)((0,j.e)((0,Z.d)((0,B.j)((0,I.q)((0,n.A)((0,O.J)((0,R.P)(s.A))))))))))))))){constructor(U){super(U),this.capabilities=null,this.collectionId=null,this.copyright=null,this.description=null,this.displayField=null,this.elevationInfo=null,this.fields=null,this.fieldsIndex=null,this.fullExtent=null,this.geometryType=null,this.hasZ=void 0,this.labelingInfo=null,this.labelsVisible=!0,this.legendEnabled=!0,this.maxRecordCount=null,this.objectIdField=null,this.operationalLayerType="OGCFeatureLayer",this.popupEnabled=!0,this.popupTemplate=null,this.screenSizePerspectiveEnabled=!0,this.source=new h({layer:this}),this.spatialReference=null,this.title=null,this.type="ogc-feature",this.typeIdField=null,this.types=null,this.url=null}destroy(){this.source?.destroy()}load(U){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["OGCFeatureServer"]},U).then(()=>this._fetchService(U))),this.when()}get defaultPopupTemplate(){return this.createPopupTemplate()}get effectiveMaxRecordCount(){return this.maxRecordCount??this.capabilities?.query.maxRecordCount??5e3}get isTable(){return this.loaded&&null==this.geometryType}set renderer(U){(0,J.yp)(U,this.fieldsIndex),this._set("renderer",U)}on(U,F){return super.on(U,F)}createPopupTemplate(U){return(0,ue.tn)(this,U)}createQuery(){return new oe.A}getField(U){return this.fieldsIndex.get(U)}getFieldDomain(U,F){let G,w=!1;const H=F?.feature?.attributes,$=this.typeIdField&&H?.[this.typeIdField];return null!=$&&this.types&&(w=this.types.some(V=>V.id==$&&(G=V.domains?.[U],"inherited"===G?.type&&(G=this._getLayerDomain(U)),!0))),w||G||(G=this._getLayerDomain(U)),G}queryFeatures(U,F){return this.load().then(()=>this.source.queryFeatures(oe.A.from(U)||this.createQuery(),F)).then(G=>(G?.features?.forEach(w=>{w.layer=w.sourceLayer=this}),G))}serviceSupportsSpatialReference(U){return this.source?.serviceSupportsSpatialReference(U)??!1}_fetchService(U){var F=this;return(0,o.A)(function*(){yield F.source.load(U),F.read(F.source.featureDefinition,{origin:"service"}),(0,J.yp)(F.renderer,F.fieldsIndex),(0,J.sv)(F.timeInfo,F.fieldsIndex)})()}_getLayerDomain(U){if(!this.fields)return null;for(const F of this.fields)if(F.name===U&&F.domain)return F.domain;return null}};(0,i._)([(0,E.MZ)({readOnly:!0,json:{origins:{service:{read:!0}}}})],N.prototype,"capabilities",void 0),(0,i._)([(0,E.MZ)({type:String,json:{write:!0}})],N.prototype,"collectionId",void 0),(0,i._)([(0,E.MZ)({type:String})],N.prototype,"copyright",void 0),(0,i._)([(0,E.MZ)({readOnly:!0})],N.prototype,"defaultPopupTemplate",null),(0,i._)([(0,E.MZ)({readOnly:!0,type:String,json:{origins:{service:{name:"collection.description"}}}})],N.prototype,"description",void 0),(0,i._)([(0,E.MZ)({type:String})],N.prototype,"displayField",void 0),(0,i._)([(0,E.MZ)({type:Number})],N.prototype,"effectiveMaxRecordCount",null),(0,i._)([(0,E.MZ)(W.Yj)],N.prototype,"elevationInfo",void 0),(0,i._)([(0,E.MZ)({type:[k.A],json:{origins:{service:{name:"layerDefinition.fields"}}}})],N.prototype,"fields",void 0),(0,i._)([(0,E.MZ)(de.fieldsIndex)],N.prototype,"fieldsIndex",void 0),(0,i._)([(0,E.MZ)({readOnly:!0,type:c.A,json:{origins:{service:{name:"layerDefinition.extent"}}}})],N.prototype,"fullExtent",void 0),(0,i._)([(0,E.MZ)({type:D.gy.apiValues,json:{origins:{service:{name:"layerDefinition.geometryType",read:{reader:D.gy.read}}}}})],N.prototype,"geometryType",void 0),(0,i._)([(0,E.MZ)({type:Boolean,json:{origins:{service:{name:"layerDefinition.hasZ"}}}})],N.prototype,"hasZ",void 0),(0,i._)([(0,E.MZ)({type:Boolean,readOnly:!0})],N.prototype,"isTable",null),(0,i._)([(0,E.MZ)({type:[le.A],json:{origins:{"web-document":{name:"layerDefinition.drawingInfo.labelingInfo",read:{reader:pe.w},write:!0}}}})],N.prototype,"labelingInfo",void 0),(0,i._)([(0,E.MZ)(W.kF)],N.prototype,"labelsVisible",void 0),(0,i._)([(0,E.MZ)(W.fV)],N.prototype,"legendEnabled",void 0),(0,i._)([(0,E.MZ)({type:Number})],N.prototype,"maxRecordCount",void 0),(0,i._)([(0,E.MZ)({type:String,json:{origins:{service:{name:"layerDefinition.objectIdField"}}}})],N.prototype,"objectIdField",void 0),(0,i._)([(0,E.MZ)({type:["OGCFeatureLayer"]})],N.prototype,"operationalLayerType",void 0),(0,i._)([(0,E.MZ)(W.M6)],N.prototype,"popupEnabled",void 0),(0,i._)([(0,E.MZ)({type:A.A,json:{name:"popupInfo",write:!0}})],N.prototype,"popupTemplate",void 0),(0,i._)([(0,E.MZ)({types:se.Hg,json:{origins:{service:{name:"layerDefinition.drawingInfo.renderer",write:!1},"web-scene":{types:se.XJ,name:"layerDefinition.drawingInfo.renderer",write:!0}},name:"layerDefinition.drawingInfo.renderer",write:!0}})],N.prototype,"renderer",null),(0,i._)([(0,E.MZ)(W.PY)],N.prototype,"screenSizePerspectiveEnabled",void 0),(0,i._)([(0,E.MZ)({readOnly:!0})],N.prototype,"source",void 0),(0,i._)([(0,E.MZ)({readOnly:!0,type:v.A,json:{origins:{service:{read:!0}}}})],N.prototype,"spatialReference",void 0),(0,i._)([(0,E.MZ)({type:String,json:{write:{enabled:!0,ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"collection.title"}}}})],N.prototype,"title",void 0),(0,i._)([(0,E.MZ)({readOnly:!0,json:{read:!1}})],N.prototype,"type",void 0),(0,i._)([(0,E.MZ)({type:String,readOnly:!0})],N.prototype,"typeIdField",void 0),(0,i._)([(0,E.MZ)({type:[Q.A]})],N.prototype,"types",void 0),(0,i._)([(0,E.MZ)(W.OZ)],N.prototype,"url",void 0),N=(0,i._)([(0,a.$)("esri.layers.OGCFeatureLayer")],N);const ce=N},42086:(b,K,e)=>{e.d(K,{N3:()=>E,Om:()=>R});var o=e(11445),i=e(27999),A=e(13682);class R{constructor(P=null,a={},c,v,D=0){this.geometry=P,this.attributes=a,this.centroid=c,this.objectId=v,this.displayId=D}static fromJSON(P){const a=P.geometry?A.A.fromJSON(P.geometry):null,c=P.centroid?A.A.fromJSON(P.centroid):null;return new R(a,P.attributes,c,P.objectId)}weakClone(){const P=new R(this.geometry,this.attributes,this.centroid,this.objectId);return P.displayId=this.displayId,P}clone(){const P=this.geometry?.clone(),a=new R(P,{...this.attributes},this.centroid?.clone(),this.objectId);return a.displayId=this.displayId,a}ensureCentroid(P){return this.centroid??=(0,i.Q)(new A.A,this.geometry,P.hasZ,P.hasM),this.centroid}get usedMemory(){return 128+(0,o.lM)(this.attributes)+(this.geometry?.usedMemory??0)}}function E(C){return!!C.geometry?.coords?.length}},61808:(b,K,e)=>{e.d(K,{A:()=>o});class o{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const A=new o;return A.objectIdFieldName=this.objectIdFieldName,A.globalIdFieldName=this.globalIdFieldName,A.geohashFieldName=this.geohashFieldName,A.geometryProperties=this.geometryProperties,A.geometryType=this.geometryType,A.spatialReference=this.spatialReference,A.hasZ=this.hasZ,A.hasM=this.hasM,A.features=this.features,A.fields=this.fields,A.transform=this.transform,A.exceededTransferLimit=this.exceededTransferLimit,A.uniqueIdField=this.uniqueIdField,A.queryGeometry=this.queryGeometry,A.queryGeometryType=this.queryGeometryType,A}}},13682:(b,K,e)=>{e.d(K,{A:()=>A});var o=e(11445);class A{constructor(E=[],L=[]){this.lengths=E??[],this.coords=L??[]}static fromJSON(E){return new A(E.lengths,E.coords)}static fromRect(E){const[L,C,P,a]=E,c=P-L,v=a-C;return new A([5],[L,C,c,0,0,v,-c,0,0,-v])}get isPoint(){return 0===this.lengths.length&&this.coords.length>=2}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((E,L)=>E+L)}get usedMemory(){return 64+(0,o.Qf)(this.lengths,this.coords)}area(){let E=0,L=0;if(!this.lengths.length)return 0;for(let C=0;C<this.lengths.length;C++){const P=this.lengths[C];if(P<3)continue;let a=this.coords[2*L],c=this.coords[2*L+1];for(let v=1;v<P;v+=1){const D=this.coords[2*(v+L)],s=this.coords[2*(v+L)+1];E+=-.5*(D-a)*(s+c),a=D,c=s}L+=P}return E}forEachVertex(E){let L=0;this.lengths.length||E(this.coords[0],this.coords[1]);for(let C=0;C<this.lengths.length;C++){const P=this.lengths[C];for(let a=0;a<P;a++)E(this.coords[2*(a+L)],this.coords[2*(a+L)+1]);L+=P}}deltaDecode(){const E=this.clone(),{coords:L,lengths:C}=E;let P=0;for(const a of C){for(let c=1;c<a;c++)L[2*(P+c)]+=L[2*(P+c)-2],L[2*(P+c)+1]+=L[2*(P+c)-1];P+=a}return E}clone(E){if(0===this.lengths.length)return new A([],[this.coords[0],this.coords[1]]);const L=2*(0===this.lengths.length?1:this.lengths.reduce((P,a)=>P+a)),C=this.coords.slice(0,L);return E?(E.set(C),new A(this.lengths,E)):new A(Array.from(this.lengths),Array.from(C))}}},27999:(b,K,e)=>{function o(a,c){return a?c?4:3:c?3:2}function i(a,c,v,D){if(!c?.lengths.length)return null;a.lengths.length&&(a.lengths.length=0),a.coords.length&&(a.coords.length=0);const s=a.coords,l=[],u=v?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:d,coords:p}=c,_=o(v,D);let x=0;for(const h of d){const T=A(u,p,x,h,v,D);T&&l.push(T),x+=h*_}if(l.sort((h,T)=>{let S=h[2]-T[2];return 0===S&&v&&(S=h[4]-T[4]),S}),l.length){let h=6*l[0][2];s[0]=l[0][0]/h,s[1]=l[0][1]/h,v&&(h=6*l[0][4],s[2]=0!==h?l[0][3]/h:0),(s[0]<u[0]||s[0]>u[1]||s[1]<u[2]||s[1]>u[3]||v&&(s[2]<u[4]||s[2]>u[5]))&&(s.length=0)}if(!s.length){const h=c.lengths[0]?function R(a,c,v,D,s){const l=o(D,s);let u=c,d=c+l,p=0,_=0,x=0,h=0;for(let T=0,S=v-1;T<S;T++,u+=l,d+=l){const m=a[u],f=a[u+1],y=a[u+2],M=a[d],I=a[d+1],g=a[d+2],n=D?L(m,f,y,M,I,g):E(m,f,M,I);if(n)if(p+=n,D){const O=P(m,f,y,M,I,g);_+=n*O[0],x+=n*O[1],h+=n*O[2]}else{const O=C(m,f,M,I);_+=n*O[0],x+=n*O[1]}}return p>0?D?[_/p,x/p,h/p]:[_/p,x/p]:v>0?D?[a[c],a[c+1],a[c+2]]:[a[c],a[c+1]]:null}(p,0,d[0],v,D):null;if(!h)return null;s[0]=h[0],s[1]=h[1],v&&h.length>2&&(s[2]=h[2])}return a}function A(a,c,v,D,s,l){const u=o(s,l);let d=v,p=v+u,_=0,x=0,h=0,T=0,S=0;for(let f=0,y=D-1;f<y;f++,d+=u,p+=u){const M=c[d],I=c[d+1],g=c[d+2],n=c[p],O=c[p+1],B=c[p+2];let j=M*O-n*I;T+=j,_+=(M+n)*j,x+=(I+O)*j,s&&(j=M*B-n*g,h+=(g+B)*j,S+=j),M<a[0]&&(a[0]=M),M>a[1]&&(a[1]=M),I<a[2]&&(a[2]=I),I>a[3]&&(a[3]=I),s&&(g<a[4]&&(a[4]=g),g>a[5]&&(a[5]=g))}if(T>0&&(T*=-1),S>0&&(S*=-1),!T)return null;const m=[_,x,.5*T];return s&&(m[3]=h,m[4]=.5*S),m}function E(a,c,v,D){const s=v-a,l=D-c;return Math.sqrt(s*s+l*l)}function L(a,c,v,D,s,l){const u=D-a,d=s-c,p=l-v;return Math.sqrt(u*u+d*d+p*p)}function C(a,c,v,D){return[a+.5*(v-a),c+.5*(D-c)]}function P(a,c,v,D,s,l){return[a+.5*(D-a),c+.5*(s-c),v+.5*(l-v)]}e.d(K,{Q:()=>i})},78200:(b,K,e)=>{e.d(K,{F:()=>o,P:()=>i});const o={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!0,supportsCurrentUser:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!0,supportsReturnMesh:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByAnonymous:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0,supportsTrueCurve:!1},i={supportsDate:!0,supportsFixedInterval:!0,supportsAutoInterval:!0,supportsFixedBoundaries:!0,supportsStackBy:!0,supportsSplitBy:!0,supportsSnapToData:!1,supportsReturnFullIntervalBin:!1,supportsFirstDayOfWeek:!1,supportsNormalization:!0,supportedStatistics:{count:!0,sum:!0,avg:!0,var:!0,stddev:!0,min:!0,max:!0,percentileContinuous:!0,percentileDiscrete:!0,envelope:!0,centroid:!0,convexHull:!0},supportedNormalizationTypes:{field:!0,log:!0,naturalLog:!0,percentOfTotal:!0,squareRoot:!0}}},94376:(b,K,e)=>{e.d(K,{p:()=>P});var o=e(8189),i=e(85211),L=(e(3248),e(35150),e(40707),e(76576));const P=a=>{let c=class extends a{get apiKey(){return this._isOverridden("apiKey")?this._get("apiKey"):function C(a){return"portalItem"in a}(this)?this.portalItem?.apiKey:null}set apiKey(v){null!=v?this._override("apiKey",v):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return(0,o._)([(0,i.MZ)({type:String})],c.prototype,"apiKey",null),c=(0,o._)([(0,L.$)("esri.layers.mixins.APIKeyMixin")],c),c}},73955:(b,K,e)=>{e.d(K,{FJ:()=>T,Dp:()=>S,KV:()=>m});var o=e(8189),i=e(89221),A=e(85211),C=(e(3248),e(35150),e(40707),e(76576)),P=e(50501),a=e(90660),c=e(31178),v=e(71065),D=e(50305),s=e(40856),l=e(43085);const u={write:{overridePolicy:(f,y,M)=>({enabled:!M||"scale"===M.filterMode})}};let d=class extends(a.A.ClonableMixin(v.A)){constructor(f){super(f),this.id=(0,l.lk)(),this.maxScale=0,this.minScale=0,this.title="",this.where=null}};(0,o._)([(0,A.MZ)({type:String,json:{write:!0}})],d.prototype,"id",void 0),(0,o._)([(0,A.MZ)({type:Number,json:u})],d.prototype,"maxScale",void 0),(0,o._)([(0,A.MZ)({type:Number,json:u})],d.prototype,"minScale",void 0),(0,o._)([(0,A.MZ)({type:String,json:{write:!0}})],d.prototype,"title",void 0),(0,o._)([(0,A.MZ)({type:String,json:{write:!0}})],d.prototype,"where",void 0),d=(0,o._)([(0,C.$)("esri.layers.support.DisplayFilter")],d);const p=d;var _=e(27960);let x=class extends(a.A.ClonableMixin(v.A)){constructor(f){super(f),this.activeFilterId=null,this.filters=new(c.A.ofType(p)),this.mode="manual"}writeFilters(f,y,M,I){const g=f.toArray();"scale"===this.mode&&g.sort((n,O)=>{const B=(0,s.oW)(O.minScale,n.minScale);return 0===B?n.maxScale-O.maxScale:B}),y[M]=g.map(n=>n.toJSON(I))}write(f,y){return super.write(f,(0,_.mW)(this,y))}};(0,o._)([(0,A.MZ)({type:String,json:{write:{overridePolicy:(f,y,M)=>({enabled:"manual"===M.filterMode,isRequired:!0})}}})],x.prototype,"activeFilterId",void 0),(0,o._)([(0,A.MZ)({type:c.A.ofType(p),nonNullable:!0,json:{write:!0}})],x.prototype,"filters",void 0),(0,o._)([(0,D.K)("filters")],x.prototype,"writeFilters",null),(0,o._)([(0,A.MZ)({type:["manual","scale"],nonNullable:!0,json:{name:"filterMode",write:!0}})],x.prototype,"mode",void 0),x=(0,o._)([(0,C.$)("esri.layers.support.DisplayFilterInfo")],x);const T=f=>{let y=class extends f{constructor(){super(...arguments),this.displayFilterEnabled=!0,this.displayFilterInfo=null}};return(0,o._)([(0,A.MZ)(S)],y.prototype,"displayFilterEnabled",void 0),(0,o._)([(0,A.MZ)(m)],y.prototype,"displayFilterInfo",void 0),y=(0,o._)([(0,C.$)("esri.layers.mixins.DisplayFilteredLayer")],y),y},S={type:Boolean,json:{name:"layerDefinition.disableDisplayFilter",read:{reader:f=>!f},write:{layerContainerTypes:P.K,writer(f,y,M){(0,i.sM)(M,!f,y)}},origins:{"web-scene":{write:!1,read:!1}}}},m={type:x,json:{name:"layerDefinition.displayFilterInfo",write:{enabled:!0,allowNull:!0,layerContainerTypes:P.K},origins:{"web-scene":{write:!1,read:!1}}}}},17049:(b,K,e)=>{e.d(K,{q:()=>h});var o=e(8189),i=e(5922),A=e(45272),R=e(85211),E=e(55739),P=(e(3248),e(40707),e(17221)),a=e(76576),c=e(50305),v=e(50501),D=e(34813),s=e(56558);const l={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},u={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},d={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},p={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,Object3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":l,"web-map/basemap":u,"web-map/tables":d,"link-chart/operational-layers":{...l,LinkChartLayer:!0},"link-chart/basemap":u,"link-chart/tables":d,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0,WCS:!0},"portal-item/tables":{ArcGISFeatureLayer:!0,SubtypeGroupTable:!0}};var _=e(22329),x=e(17181);const h=S=>{let m=class extends S{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(f,y,M){return"Group Layer"===M?.portalItem?.type?void 0:f}writeListMode(f,y,M,I){(I&&"ground"===I.layerContainerType||f&&(0,s.R)(this,M,{},I))&&(y[M]=f)}writeOperationalLayerType(f,y,M){f&&(y[M]=f)}writeTitle(f,y){y.title=f??"Layer"}readVisibilityTimeExtent(f){return f?x.A.fromArray(f):null}writeVisibilityTimeExtent(f,y,M,I){f&&"tables"!==I.layerContainerType&&(f.isEmpty?I?.messages&&I.messages.push(new i.A("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):y[M]=f.toArray())}read(f,y){y&&(y.layer=this),(0,D.t)(this,f,M=>super.read(f,M),y)}write(f,y){if(!this.persistenceEnabled&&!y?.ignorePersistenceEnabled)return null;if(y?.origin){const g=`${y.origin}/${y.layerContainerType||"operational-layers"}`;let O=!!p[g]?.[this.operationalLayerType];if("ArcGISTiledElevationServiceLayer"===this.operationalLayerType&&"web-scene/operational-layers"===g&&(O=!1),"ArcGISDimensionLayer"===this.operationalLayerType&&"web-map/operational-layers"===g&&(O=!1),!O)return y.messages?.push(new i.A("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${g}'`,{layer:this})),null}const M=super.write(f,{...y,layer:this}),I=!!y&&!!y.messages&&!!y.messages.filter(g=>g instanceof i.A&&"web-document-write:property-required"===g.name).length;return(0,A.w8)(M?.url)?(y?.messages?.push(new i.A("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&I?null:M}beforeSave(){}};return(0,o._)([(0,R.MZ)({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],m.prototype,"id",void 0),(0,o._)([(0,P.w)("id",["id"])],m.prototype,"readId",null),(0,o._)([(0,R.MZ)(_.C1)],m.prototype,"listMode",void 0),(0,o._)([(0,c.K)("listMode")],m.prototype,"writeListMode",null),(0,o._)([(0,R.MZ)({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:v.K,isRequired:!0}}}}})],m.prototype,"operationalLayerType",void 0),(0,o._)([(0,c.K)("operationalLayerType")],m.prototype,"writeOperationalLayerType",null),(0,o._)([(0,R.MZ)(_.ke)],m.prototype,"opacity",void 0),(0,o._)([(0,R.MZ)({type:Boolean,readOnly:!1})],m.prototype,"persistenceEnabled",void 0),(0,o._)([(0,R.MZ)({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],m.prototype,"title",void 0),(0,o._)([(0,c.K)("title"),(0,c.K)(["web-scene"],"title")],m.prototype,"writeTitle",null),(0,o._)([(0,R.MZ)({type:x.A,json:{origins:{"web-scene":{write:{layerContainerTypes:v.K}}}}})],m.prototype,"visibilityTimeExtent",void 0),(0,o._)([(0,P.w)("visibilityTimeExtent")],m.prototype,"readVisibilityTimeExtent",null),(0,o._)([(0,c.K)(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[E.jz,E.Uv]]}})],m.prototype,"writeVisibilityTimeExtent",null),(0,o._)([(0,R.MZ)({type:Boolean,json:{name:"visibility",write:{layerContainerTypes:v.K}}})],m.prototype,"visible",void 0),m=(0,o._)([(0,a.$)("esri.layers.mixins.OperationalLayer")],m),m}},43124:(b,K,e)=>{e.d(K,{Rr:()=>a,fY:()=>D,ne:()=>v});var o=e(8189),i=e(89221),A=e(85211),C=(e(3248),e(35150),e(40707),e(76576)),P=e(15848);function a(s,l,u){if(!s)return null;const d=s.find(_=>!!_.field);if(!d)return null;const p=new P.A;return p.read(d,u),[p]}const v={type:[P.A],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:a},write:{writer:function c(s,l,u,d){const p=s.find(_=>!!_.field);p&&(0,i.sM)(u,[p.toJSON()],l)}}}},D=s=>{let l=class extends s{constructor(){super(...arguments),this.orderBy=null}};return(0,o._)([(0,A.MZ)(v)],l.prototype,"orderBy",void 0),l=(0,o._)([(0,C.$)("esri.layers.mixins.OrderedLayer")],l),l}},85551:(b,K,e)=>{e.d(K,{A:()=>m});var o=e(10467),i=e(8189),A=e(23098),R=e(77469),E=e(89563),L=e(89447),C=e(5922),P=e(35150),a=e(11432),c=e(56492),v=e(45272),D=e(85211),u=(e(3248),e(40707),e(17221)),d=e(76576),p=e(50305),_=e(58443),x=e(73874),h=e(46577),T=e(52606),S=e(69927);const m=y=>{let M=class extends y{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=(0,a.pR)(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(I){I!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",I))}readPortalItem(I,g,n){if(g.itemId)return new h.default({id:g.itemId,portal:n?.portal})}writePortalItem(I,g){I?.id&&(g.itemId=I.id)}loadFromPortal(I,g){var n=this;return(0,o.A)(function*(){if(n.portalItem?.id)try{const{load:O}=yield Promise.all([e.e(2076),e.e(6180)]).then(e.bind(e,56180));return(0,c.Te)(g),yield O({instance:n,supportedTypes:I.supportedTypes,validateItem:I.validateItem,supportsData:I.supportsData,layerModuleTypeMap:I.layerModuleTypeMap,populateGroupLayer:I.populateGroupLayer},g)}catch(O){throw(0,c.zf)(O)||P.A.getLogger(n).warn(`Failed to load layer (${n.title}, ${n.id}) portal item (${n.portalItem.id})\n  ${O}`),O}})()}finishLoadEditablePortalLayer(I){var g=this;return(0,o.A)(function*(){g._set("userHasEditingPrivileges",yield g._fetchUserHasEditingPrivileges(I).catch(n=>((0,c.QP)(n),!0)))})()}setUserPrivileges(I,g){var n=this;return(0,o.A)(function*(){if(!A.A.userPrivilegesApplied)return n.finishLoadEditablePortalLayer(g);if(n.url)try{const{features:{edit:O,fullEdit:B},content:{updateItem:j}}=yield n._fetchUserPrivileges(I,g);n._set("userHasEditingPrivileges",O),n._set("userHasFullEditingPrivileges",B),n._set("userHasUpdateItemPrivileges",j)}catch(O){(0,c.QP)(O)}})()}_fetchUserPrivileges(I,g){var n=this;return(0,o.A)(function*(){let O=n.portalItem;if(!I||!O||!O.loaded||O.sourceUrl)return n._fetchFallbackUserPrivileges(g);const B=!R.id?.findCredential(n.url),j=I===O.id;if(j&&O.portal.user)return n._getUserPrivileges(O,B);let Z,W;if(j)Z=O.portal.url;else try{Z=yield(0,_.wI)(n.url,g)}catch(J){(0,c.QP)(J)}if(!Z||!(0,v.b8)(Z,O.portal.url))return n._fetchFallbackUserPrivileges(g);try{const J=null!=g?g.signal:null;W=yield R.id?.getCredential(`${Z}/sharing`,{prompt:!1,signal:J})}catch(J){(0,c.QP)(J)}if(!W)return{features:{edit:!0,fullEdit:!1},content:{updateItem:!1}};try{if(j?yield O.reload():(O=new h.default({id:I,portal:{url:Z}}),yield O.load(g)),O.portal.user)return n._getUserPrivileges(O,B)}catch(J){(0,c.QP)(J)}return{features:{edit:!0,fullEdit:!1},content:{updateItem:!1}}})()}_getUserPrivileges(I,g){const n=(0,S.It)(I);return g&&(n.features.edit=!0),n}_fetchFallbackUserPrivileges(I){var g=this;return(0,o.A)(function*(){let n=!0;try{n=yield g._fetchUserHasEditingPrivileges(I)}catch(O){(0,c.QP)(O)}return{features:{edit:n,fullEdit:!1},content:{updateItem:!1}}})()}_fetchUserHasEditingPrivileges(I){var g=this;return(0,o.A)(function*(){const n=g.url?R.id?.findCredential(g.url):null;if(!n)return!0;const O=f.credential===n?f.user:yield g._fetchEditingUser(I);return f.credential=n,f.user=O,null==O?.privileges||O.privileges.includes("features:user:edit")})()}_fetchEditingUser(I){var g=this;return(0,o.A)(function*(){const n=g.portalItem?.portal?.user;if(n)return n;const O=R.id?.findServerInfo(g.url??"");if(!O?.owningSystemUrl)return null;const B=`${O.owningSystemUrl}/sharing/rest`,j=x.A.getDefault();if(j&&j.loaded&&(0,v.S8)(j.restUrl)===(0,v.S8)(B))return j.user;const Z=`${B}/community/self`,W=null!=I?I.signal:null,Q=yield(0,L.Ke)((0,E.A)(Z,{authMode:"no-prompt",query:{f:"json"},signal:W}));return Q.ok?T.A.fromJSON(Q.value.data):null})()}read(I,g){g&&(g.layer=this),super.read(I,g)}write(I,g){const n=g?.portal,O=this.portalItem?.id&&(this.portalItem.portal||x.A.getDefault());return n&&O&&!(0,v.ut)(O.restUrl,n.restUrl)?(g.messages&&g.messages.push(new C.A("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(I,{...g,layer:this})}};return(0,i._)([(0,D.MZ)({type:h.default})],M.prototype,"portalItem",null),(0,i._)([(0,u.w)("web-document","portalItem",["itemId"])],M.prototype,"readPortalItem",null),(0,i._)([(0,p.K)("web-document","portalItem",{itemId:{type:String}})],M.prototype,"writePortalItem",null),(0,i._)([(0,D.MZ)({clonable:!1})],M.prototype,"resourceReferences",void 0),(0,i._)([(0,D.MZ)({type:Boolean,readOnly:!0})],M.prototype,"userHasEditingPrivileges",void 0),(0,i._)([(0,D.MZ)({type:Boolean,readOnly:!0})],M.prototype,"userHasFullEditingPrivileges",void 0),(0,i._)([(0,D.MZ)({type:Boolean,readOnly:!0})],M.prototype,"userHasUpdateItemPrivileges",void 0),M=(0,i._)([(0,d.$)("esri.layers.mixins.PortalLayer")],M),M},f={credential:null,user:null}},84311:(b,K,e)=>{e.d(K,{B:()=>l,e:()=>u});var o=e(8189),i=e(85211),L=(e(3248),e(35150),e(40707),e(17221)),C=e(76576),P=e(50501),a=e(86300),c=e(38488),v=e(26957),D=e(17181),s=e(89352);const l={type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation",layerContainerTypes:P.K}}},u=d=>{let p=class extends d{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(_,x){const h=x.timeInfo.exportOptions;if(!h)return null;const T=h.timeOffset,S=v.j.fromJSON(h.timeOffsetUnits);return T&&S?new s.A({value:T,unit:S}):null}set timeInfo(_){(0,a.sv)(_,this.fieldsIndex),this._set("timeInfo",_)}};return(0,o._)([(0,i.MZ)({type:D.A,json:{write:!1}})],p.prototype,"timeExtent",void 0),(0,o._)([(0,i.MZ)({type:s.A})],p.prototype,"timeOffset",void 0),(0,o._)([(0,L.w)("service","timeOffset",["timeInfo.exportOptions"])],p.prototype,"readOffset",null),(0,o._)([(0,i.MZ)({value:null,type:c.A,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],p.prototype,"timeInfo",null),(0,o._)([(0,i.MZ)(l)],p.prototype,"useViewTime",void 0),p=(0,o._)([(0,C.$)("esri.layers.mixins.TemporalLayer")],p),p}},77486:(b,K,e)=>{e.d(K,{d:()=>m});var o=e(8189),i=e(85211),L=(e(3248),e(35150),e(40707),e(76576)),C=e(92165),P=e(90660),a=e(71065),c=e(89221),v=e(50305),D=e(2052),s=e(22329),l=e(54947),u=e(31595);let d=class extends(P.A.ClonableMixin(a.A)){constructor(f){super(f),this.labelingInfo=null,this.labelsVisible=!0,this.renderer=null,this.visible=!0}};(0,o._)([(0,i.MZ)({type:[l.A],json:{write:!0}})],d.prototype,"labelingInfo",void 0),(0,o._)([(0,i.MZ)(s.kF)],d.prototype,"labelsVisible",void 0),(0,o._)([(0,i.MZ)({types:u.Hg,json:{write:!0}})],d.prototype,"renderer",void 0),(0,o._)([(0,i.MZ)({type:Boolean,json:{write:!0}})],d.prototype,"visible",void 0),d=(0,o._)([(0,L.$)("esri.layers.support.TrackPartInfo")],d);const p=d;var _=e(73747),x=e(91644),h=e(89352);let T=class extends(P.A.ClonableMixin(a.A)){constructor(f){super(f),this.enabled=!0,this.fields=[],this.latestObservations=new p({renderer:new _.A({symbol:x.UK.clone()})}),this.maxDisplayDuration=null,this.maxDisplayObservationsPerTrack=0,this.popupEnabled=!0,this.popupTemplate=null,this.previousObservations=new p({renderer:new _.A({symbol:x.UK.clone()})}),this.trackLines=new p({renderer:new _.A({symbol:x.A7.clone()})}),this.timeField="startTimeField"}writeFields(f,y,M){const I=f.filter(g=>"avg_angle"!==g.statisticType).map(g=>g.toJSON());(0,c.sM)(M,I,y)}};(0,o._)([(0,i.MZ)({type:Boolean,json:{write:!0}})],T.prototype,"enabled",void 0),(0,o._)([(0,i.MZ)({type:[D.A],json:{write:!0}})],T.prototype,"fields",void 0),(0,o._)([(0,v.K)("fields")],T.prototype,"writeFields",null),(0,o._)([(0,i.MZ)({type:p,json:{write:!0}})],T.prototype,"latestObservations",void 0),(0,o._)([(0,i.MZ)({type:h.A,json:{write:!0}})],T.prototype,"maxDisplayDuration",void 0),(0,o._)([(0,i.MZ)({type:Number,json:{write:!0}})],T.prototype,"maxDisplayObservationsPerTrack",void 0),(0,o._)([(0,i.MZ)(s.M6)],T.prototype,"popupEnabled",void 0),(0,o._)([(0,i.MZ)({type:C.A,json:{name:"popupInfo",write:!0}})],T.prototype,"popupTemplate",void 0),(0,o._)([(0,i.MZ)({type:p,json:{write:!0}})],T.prototype,"previousObservations",void 0),(0,o._)([(0,i.MZ)({type:p,json:{write:!0}})],T.prototype,"trackLines",void 0),(0,o._)([(0,i.MZ)({type:["timeReceived","startTimeField","endTimeField"],json:{read:!0,write:!0}})],T.prototype,"timeField",void 0),T=(0,o._)([(0,L.$)("esri.layers.support.TrackInfo")],T);const S=T,m=f=>{let y=class extends f{constructor(){super(...arguments),this.trackInfo=null}};return(0,o._)([(0,i.MZ)({type:S})],y.prototype,"trackInfo",void 0),y=(0,o._)([(0,L.$)("esri.layers.mixins.TrackableLayer")],y),y}},47063:(b,K,e)=>{e.d(K,{A:()=>l});var o=e(8189),i=e(90660),A=e(71065),R=e(85211),P=(e(3248),e(35150),e(40707),e(17221)),a=e(76576),c=e(50305),v=e(39664),D=e(69741);let s=class extends(i.A.ClonableMixin(A.A)){constructor(u){super(u),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(u){const d={};for(const p of Object.keys(u))d[p]=(0,v.rS)(u[p]);return d}writeDomains(u,d){const p={};for(const _ of Object.keys(u))u[_]&&(p[_]=u[_]?.toJSON());d.domains=p}};(0,o._)([(0,R.MZ)({json:{write:!0}})],s.prototype,"id",void 0),(0,o._)([(0,R.MZ)({json:{write:!0}})],s.prototype,"name",void 0),(0,o._)([(0,R.MZ)({json:{write:!0}})],s.prototype,"domains",void 0),(0,o._)([(0,P.w)("domains")],s.prototype,"readDomains",null),(0,o._)([(0,c.K)("domains")],s.prototype,"writeDomains",null),(0,o._)([(0,R.MZ)({type:[D.A],json:{write:!0}})],s.prototype,"templates",void 0),s=(0,o._)([(0,a.$)("esri.layers.support.FeatureType")],s);const l=s},15848:(b,K,e)=>{e.d(K,{A:()=>D});var a,o=e(8189),i=e(49976),A=e(71065),R=e(85211),P=(e(3248),e(35150),e(40707),e(76576));const c=new i.J({asc:"ascending",desc:"descending"});let v=a=class extends A.A{constructor(s){super(s),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new a({field:this.field,valueExpression:this.valueExpression,order:this.order})}};(0,o._)([(0,R.MZ)({type:String,json:{write:!0}})],v.prototype,"field",void 0),(0,o._)([(0,R.MZ)({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],v.prototype,"valueExpression",void 0),(0,o._)([(0,R.MZ)({type:c.apiValues,json:{type:c.jsonValues,read:c.read,write:c.write}})],v.prototype,"order",void 0),v=a=(0,o._)([(0,P.$)("esri.layers.support.OrderByInfo")],v);const D=v},38488:(b,K,e)=>{e.d(K,{A:()=>d});var o=e(8189),i=e(90660),A=e(71065),R=e(85211),P=(e(3248),e(35150),e(40707),e(17221)),a=e(76576),c=e(50305),v=e(17181),D=e(89352),s=e(22639);function l(p,_){return D.A.fromJSON({value:p,unit:_})}let u=class extends(i.A.ClonableMixin(A.A)){constructor(p){super(p),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(p,_){return _.timeExtent&&Array.isArray(_.timeExtent)&&2===_.timeExtent.length?v.A.fromArray(_.timeExtent):null}writeFullTimeExtent(p,_){_.timeExtent=null!=p?.start&&null!=p.end?p.toArray():null}readInterval(p,_){return _.timeInterval&&_.timeIntervalUnits?l(_.timeInterval,_.timeIntervalUnits):_.defaultTimeInterval&&_.defaultTimeIntervalUnits?l(_.defaultTimeInterval,_.defaultTimeIntervalUnits):null}writeInterval(p,_){_.timeInterval=p?.toJSON().value??null,_.timeIntervalUnits=p?.toJSON().unit??null}};(0,o._)([(0,R.MZ)({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],u.prototype,"cumulative",void 0),(0,o._)([(0,R.MZ)({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],u.prototype,"endField",void 0),(0,o._)([(0,R.MZ)({type:v.A,json:{write:{enabled:!0,allowNull:!0}}})],u.prototype,"fullTimeExtent",void 0),(0,o._)([(0,P.w)("fullTimeExtent",["timeExtent"])],u.prototype,"readFullTimeExtent",null),(0,o._)([(0,c.K)("fullTimeExtent")],u.prototype,"writeFullTimeExtent",null),(0,o._)([(0,R.MZ)({type:Boolean,json:{write:!0}})],u.prototype,"hasLiveData",void 0),(0,o._)([(0,R.MZ)({type:D.A,json:{write:{enabled:!0,allowNull:!0}}})],u.prototype,"interval",void 0),(0,o._)([(0,P.w)("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],u.prototype,"readInterval",null),(0,o._)([(0,c.K)("interval")],u.prototype,"writeInterval",null),(0,o._)([(0,R.MZ)({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],u.prototype,"startField",void 0),(0,o._)([(0,R.MZ)((0,s.P6)("timeReference",!0))],u.prototype,"timeZone",void 0),(0,o._)([(0,R.MZ)({type:String,json:{write:{enabled:!0,allowNull:!0}}})],u.prototype,"trackIdField",void 0),(0,o._)([(0,R.MZ)({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],u.prototype,"useTime",void 0),(0,o._)([(0,R.MZ)({type:[Date],json:{read:!1}})],u.prototype,"stops",void 0),u=(0,o._)([(0,a.$)("esri.layers.support.TimeInfo")],u);const d=u},27960:(b,K,e)=>{e.d(K,{Ch:()=>E,mW:()=>A,u2:()=>R});var o=e(69287),i=e(63484);function A(s,l){return{...l,filterMode:s.mode}}function R(s,l){return C(s,l).next().value??null}function E(s,l,u){const d=function L(s){if("manual"===c(s))return null;const l=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:u,maxScale:d}of s.filters)l[0]=Math.max(l[0],v(u)),l[1]=Math.min(l[1],D(d));return l}(s);if(d&&((0,o.gg)(l,d[0])||(0,o.ZH)(u,d[1])))return"";const p=Array.from(C(s,l,u)),_=function P(s,l,u){if(0===s.length)return!0;const d=v(s.at(0)?.minScale),p=D(s.at(-1)?.maxScale);if((0,o.ZH)(d,l)||(0,o.gg)(p,u))return!0;for(let _=0;_<s.length-1;_++){const x=s[_];if((0,o.ZH)(v(s[_+1].minScale),D(x.maxScale)))return!0}return!1}(p,l,u)?"1=1":p.map(x=>x.where||"1=1").reduce((x,h)=>(0,i.IW)(x,h),"");return _&&"1=1"!==_?_:""}function*C(s,l,u){if("manual"===c(s)){const d=s.filters.find(p=>p.id===s.activeFilterId);d&&(yield d)}else{"object"==typeof l&&(l=l.scale);for(const d of s.filters)a(d.minScale,d.maxScale,l,u)&&(yield d)}}function a(s,l,u,d){return s=v(s),u=v(u),l=D(l),!(!(0,o.Sp)(u,s)&&(d??u)>s||(0,o.Hx)(l,u)||void 0!==d&&(0,o.Sp)(d,s))}function c(s){return"mode"in s?s.mode:s.filterMode}function v(s){return s||Number.POSITIVE_INFINITY}function D(s){return s||0}},3404:(b,K,e)=>{e.d(K,{p:()=>L});var o=e(3248),i=e(35150),A=e(29141),R=e(73258),E=e(86300);function L(){return{fields:{type:[A.A],value:null,set:function(C){if(C&&(0,o.A)("big-integer-warning-enabled")){const P=C.filter(a=>"big-integer"===a.type||"oid"===a.type&&(a.length||0)>=8);if(P.length){const a=P.map(c=>`'${c.name}'`).join(", ");i.A.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${a}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",C)}},fieldsIndex:{readOnly:!0,get(){return R.A.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(C){this._userOutFields=C,this.notifyChange("outFields")},get:function(){const C=this._userOutFields;if(!C?.length)return null;if(C.includes("*"))return["*"];if(!this.fields)return C;for(const P of C)this.fieldsIndex?.has(P)||i.A.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${P} found in outFields`,{layer:this,outFields:C});return(0,E.DB)(this.fieldsIndex,C)}}}}},69927:(b,K,e)=>{e.d(K,{It:()=>u,LG:()=>C,OM:()=>c,Sm:()=>v,Y:()=>P,bK:()=>a,mm:()=>l,sQ:()=>D});var o=e(10467),i=e(13970),A=e(32034),R=e(55039);function L(){return(L=(0,o.A)(function*(d){const p=d.spatialReference;if(p.isWGS84)return d.clone();if(p.isWebMercator)return(0,R.ci)(d);const _=A.A.WGS84;return yield(0,i.initializeProjection)(p,_),(0,i.project)(d,_)})).apply(this,arguments)}function C(d,p){if(!P(d,p)){const _=d.typeKeywords;_?_.push(p):d.typeKeywords=[p]}}function P(d,p){return!!d.typeKeywords?.includes(p)}function a(d){return P(d,l.HOSTED_SERVICE)}function c(d,p){const _=d.typeKeywords;if(_){const x=_.indexOf(p);x>-1&&_.splice(x,1)}}function v(d,p,_){_?C(d,p):c(d,p)}function D(d){return s.apply(this,arguments)}function s(){return s=(0,o.A)(function*(d){const p=d.clone().normalize();let _;if(p.length>1)for(const x of p)_?x.width>_.width&&(_=x):_=x;else _=p[0];return function E(d){return L.apply(this,arguments)}(_)}),s.apply(this,arguments)}const l={DEVELOPER_BASEMAP:"DeveloperBasemap",GROUP_LAYER_MAP:"Map",HOSTED_SERVICE:"Hosted Service",JSAPI:"ArcGIS API for JavaScript",LOCAL_SCENE:"ViewingMode-Local",METADATA:"Metadata",MULTI_LAYER:"Multilayer",ORIENTED_IMAGERY_LAYER:"OrientedImageryLayer",SINGLE_LAYER:"Singlelayer",SUBTYPE_GROUP_LAYER:"SubtypeGroupLayer",SUBTYPE_GROUP_TABLE:"SubtypeGroupTable",TABLE:"Table",TILED_IMAGERY:"Tiled Imagery"};function u(d){const{portal:p,isOrgItem:_,itemControl:x}=d,h=p.user?.privileges;let T=!h||h.includes("features:user:edit"),S=!!_&&!!h?.includes("features:user:fullEdit");const m="update"===x||"admin"===x;return m?S=T=!0:S&&(T=!0),{features:{edit:T,fullEdit:S},content:{updateItem:m}}}},26957:(b,K,e)=>{e.d(K,{j:()=>i});const i=(0,e(49976).O)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0})},93327:(b,K,e)=>{e.d(K,{A:()=>x});var d,o=e(8189),i=e(81098),A=e(49976),R=e(71065),E=e(77806),L=e(85211),a=(e(3248),e(35150),e(17221)),c=e(76576),v=e(50305),D=e(32034),s=e(61320),l=e(6434),u=e(29141);const p=new A.J({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let _=d=class extends R.A{constructor(h){super(h),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(h,T){return this.readFeaturesWithClass(h,T,i.A)}writeGeometryType(h,T,S,m){if(h)return void p.write(h,T,S,m);const{features:f}=this;if(f)for(const y of f)if(null!=y?.geometry)return void p.write(y.geometry.type,T,S,m)}readQueryGeometry(h,T){if(!h)return null;const S=!!h.spatialReference,m=(0,s.rS)(h);return m&&!S&&T.spatialReference&&(m.spatialReference=D.A.fromJSON(T.spatialReference)),m}writeSpatialReference(h,T){if(h)return void(T.spatialReference=h.toJSON());const{features:S}=this;if(S)for(const m of S)if(m&&null!=m.geometry&&m.geometry.spatialReference)return void(T.spatialReference=m.geometry.spatialReference.toJSON())}clone(){return new d(this.cloneProperties())}cloneProperties(){return(0,E.o8)({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(h){const T=this.write();if(T.features&&Array.isArray(h)&&h.length>0)for(let S=0;S<T.features.length;S++){const m=T.features[S];if(m.geometry){const f=h?.[S];m.geometry=f?.toJSON()||m.geometry}}return T}quantize(h){const{scale:[T,S],translate:[m,f]}=h,I=this.features,g=this._getQuantizationFunction(this.geometryType,n=>Math.round((n-m)/T),n=>Math.round((f-n)/S));for(let n=0,O=I.length;n<O;n++)g?.(I[n].geometry)||(I.splice(n,1),n--,O--);return this.transform=h,this}unquantize(){const{geometryType:h,features:T,transform:S}=this;if(!S)return this;const{translate:[m,f],scale:[y,M]}=S;let n=null,O=null;if(this.hasZ&&null!=S?.scale?.[2]){const{translate:[,,j],scale:[,,Z]}=S;n=W=>W*Z+j}if(this.hasM&&null!=S?.scale?.[3]){const{translate:[,,,j],scale:[,,,Z]}=S;O=W=>null==W?W:W*Z+j}const B=this._getHydrationFunction(h,j=>j*y+m,j=>f-j*M,n,O);for(const{geometry:j}of T)null!=j&&B&&B(j);return this.transform=null,this}readFeaturesWithClass(h,T,S){const m=D.A.fromJSON(T.spatialReference),f=[];for(let y=0;y<h.length;y++){const M=h[y],I=S.fromJSON(M),g=M.geometry?.spatialReference;null==I.geometry||g||(I.geometry.spatialReference=m);const n=M.aggregateGeometries,O=I.aggregateGeometries;if(n&&null!=O)for(const B in O){const j=O[B],Z=n[B],W=Z?.spatialReference;null==j||W||(j.spatialReference=m)}f.push(I)}return f}_quantizePoints(h,T,S){let m,f;const y=[];for(let M=0,I=h.length;M<I;M++){const g=h[M];if(M>0){const n=T(g[0]),O=S(g[1]);n===m&&O===f||(y.push([n-m,O-f]),m=n,f=O)}else m=T(g[0]),f=S(g[1]),y.push([m,f])}return y.length>0?y:null}_getQuantizationFunction(h,T,S){return"point"===h?m=>(m.x=T(m.x),m.y=S(m.y),m):"polyline"===h||"polygon"===h?m=>{const f=(0,s.Bi)(m)?m.rings:m.paths,y=[];for(let M=0,I=f.length;M<I;M++){const n=this._quantizePoints(f[M],T,S);n&&y.push(n)}return y.length>0?((0,s.Bi)(m)?m.rings=y:m.paths=y,m):null}:"multipoint"===h?m=>{const f=this._quantizePoints(m.points,T,S);return f&&f.length>0?(m.points=f,m):null}:"extent"===h?m=>m:null}_getHydrationFunction(h,T,S,m,f){return"point"===h?y=>{y.x=T(y.x),y.y=S(y.y),m&&(y.z=m(y.z))}:"polyline"===h||"polygon"===h?y=>{const M=(0,s.Bi)(y)?y.rings:y.paths;let I,g;for(let n=0,O=M.length;n<O;n++){const B=M[n];for(let j=0,Z=B.length;j<Z;j++){const W=B[j];j>0?(I+=W[0],g+=W[1]):(I=W[0],g=W[1]),W[0]=T(I),W[1]=S(g)}}if(m&&f)for(let n=0,O=M.length;n<O;n++){const B=M[n];for(let j=0,Z=B.length;j<Z;j++){const W=B[j];W[2]=m(W[2]),W[3]=f(W[3])}}else if(m)for(let n=0,O=M.length;n<O;n++){const B=M[n];for(let j=0,Z=B.length;j<Z;j++){const W=B[j];W[2]=m(W[2])}}else if(f)for(let n=0,O=M.length;n<O;n++){const B=M[n];for(let j=0,Z=B.length;j<Z;j++){const W=B[j];W[2]=f(W[2])}}}:"extent"===h?y=>{y.xmin=T(y.xmin),y.ymin=S(y.ymin),y.xmax=T(y.xmax),y.ymax=S(y.ymax),m&&null!=y.zmax&&null!=y.zmin&&(y.zmax=m(y.zmax),y.zmin=m(y.zmin)),f&&null!=y.mmax&&null!=y.mmin&&(y.mmax=f(y.mmax),y.mmin=f(y.mmin))}:"multipoint"===h?y=>{const M=y.points;let I,g;for(let n=0,O=M.length;n<O;n++){const B=M[n];n>0?(I+=B[0],g+=B[1]):(I=B[0],g=B[1]),B[0]=T(I),B[1]=S(g)}if(m&&f)for(let n=0,O=M.length;n<O;n++){const B=M[n];B[2]=m(B[2]),B[3]=f(B[3])}else if(m)for(let n=0,O=M.length;n<O;n++){const B=M[n];B[2]=m(B[2])}else if(f)for(let n=0,O=M.length;n<O;n++){const B=M[n];B[2]=f(B[2])}}:null}};(0,o._)([(0,L.MZ)({type:String,json:{write:!0}})],_.prototype,"displayFieldName",void 0),(0,o._)([(0,L.MZ)({type:Boolean,json:{write:{overridePolicy:h=>({enabled:h})}}})],_.prototype,"exceededTransferLimit",void 0),(0,o._)([(0,L.MZ)({type:[i.A],json:{write:!0}})],_.prototype,"features",void 0),(0,o._)([(0,a.w)("features")],_.prototype,"readFeatures",null),(0,o._)([(0,L.MZ)({type:[u.A],json:{write:!0}})],_.prototype,"fields",void 0),(0,o._)([(0,L.MZ)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:p.read}}})],_.prototype,"geometryType",void 0),(0,o._)([(0,v.K)("geometryType")],_.prototype,"writeGeometryType",null),(0,o._)([(0,L.MZ)({type:Boolean,json:{write:{overridePolicy:h=>({enabled:h})}}})],_.prototype,"hasM",void 0),(0,o._)([(0,L.MZ)({type:Boolean,json:{write:{overridePolicy:h=>({enabled:h})}}})],_.prototype,"hasZ",void 0),(0,o._)([(0,L.MZ)({types:l.yR,json:{write:!0}})],_.prototype,"queryGeometry",void 0),(0,o._)([(0,a.w)("queryGeometry")],_.prototype,"readQueryGeometry",null),(0,o._)([(0,L.MZ)({type:D.A,json:{write:!0}})],_.prototype,"spatialReference",void 0),(0,o._)([(0,v.K)("spatialReference")],_.prototype,"writeSpatialReference",null),(0,o._)([(0,L.MZ)({json:{write:!0}})],_.prototype,"transform",void 0),_=d=(0,o._)([(0,c.$)("esri.rest.support.FeatureSet")],_),_.prototype.toJSON.isDefaultToJSON=!0;const x=_},89352:(b,K,e)=>{e.d(K,{A:()=>s});var o=e(8189),i=e(90660),A=e(71065),R=e(97442),E=e(85211),a=(e(3248),e(35150),e(40707),e(15463)),c=e(76576),v=e(26957);let D=class extends(i.A.ClonableMixin(A.A)){constructor(l){super(l),this.unit="milliseconds",this.value=0}toMilliseconds(){return(0,R.t)(this.value,this.unit,"milliseconds")}};(0,o._)([(0,a.e)(v.j,{nonNullable:!0})],D.prototype,"unit",void 0),(0,o._)([(0,E.MZ)({type:Number,json:{write:!0},nonNullable:!0})],D.prototype,"value",void 0),D=(0,o._)([(0,c.$)("esri.time.TimeInterval")],D);const s=D}}]);