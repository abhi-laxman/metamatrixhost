"use strict";(self.webpackChunkAngularClient=self.webpackChunkAngularClient||[]).push([[9729],{33087:(he,Y,o)=>{o.d(Y,{q:()=>e});var f=o(60611);class e{constructor(E,k){this._storage=new f.F,this.id="",this.name="",this.size=0,this._storage.maxSize=E,this._storage.register(this),k&&this._storage.registerRemoveFunc("",k)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(E,k,M=1){this._storage.put(this,E,k,M,1)}pop(E){return this._storage.pop(this,E)}get(E){return this._storage.get(this,E)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(E){this._storage.maxSize=E}resetHitRate(){}}},60611:(he,Y,o)=>{o.d(Y,{F:()=>M,Ti:()=>e});var f=o(12438);const e=-3,K=e-1;var E,x;(x=E||(E={}))[x.ALL=0]="ALL",x[x.SOME=1]="SOME";class M{get size(){return this._size}constructor(l=10485760){this._maxSize=l,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new f.A,this._users=new f.A}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear()}register(l){this._users.push(l)}deregister(l){this._users.removeUnordered(l)}registerRemoveFunc(l,u){this._removeFuncs.push([l,u])}deregisterRemoveFunc(l){this._removeFuncs.filterInPlace(u=>u[0]!==l)}get maxSize(){return this._maxSize}set maxSize(l){this._maxSize=Math.max(l,-1),this._checkSize()}getSize(l,u){return this._db.get(l.id+u)?.size??0}put(l,u,p,d,g){const r=this._db.get(u=l.id+u);if(r&&(this._size-=r.size,l.size-=r.size,this._db.delete(u),r.entry!==p&&this._notifyRemove(u,r.entry,r.size,E.ALL)),d>this._maxSize)return void this._notifyRemove(u,p,d,E.ALL);if(void 0===p)return void console.warn("Refusing to cache undefined entry ");if(!d||d<0)return console.warn(`Refusing to cache entry with size ${d} for key ${u}`),void this._notifyRemove(u,p,0,E.ALL);const _=1+Math.max(g,K)-e;this._db.set(u,new V(p,d,_)),this._size+=d,l.size+=d,this._checkSize()}updateSize(l,u,p,d){const g=this._db.get(u=l.id+u);if(g&&g.entry===p){for(this._size-=g.size,l.size-=g.size;d>this._maxSize;){const r=this._notifyRemove(u,p,d,E.SOME);if(!(null!=r&&r>0))return void this._db.delete(u);d=r}g.size=d,this._size+=d,l.size+=d,this._checkSize()}}pop(l,u){const p=this._db.get(u=l.id+u);if(p)return this._size-=p.size,l.size-=p.size,this._db.delete(u),++this._hit,p.entry;++this._miss}get(l,u){const p=this._db.get(u=l.id+u);if(void 0!==p)return this._db.delete(u),p.lives=p.lifetime,this._db.set(u,p),++this._hit,p.entry;++this._miss}peek(l,u){const p=this._db.get(l.id+u);return p?++this._hit:++this._miss,p?.entry}get performanceInfo(){const l={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},u={},p=new Array;this._db.forEach((r,_)=>{const w=r.lifetime;p[w]=(p[w]||0)+r.size,this._users.forAll(O=>{const{id:A,name:v}=O;_.startsWith(A)&&(u[v]=(u[v]||0)+r.size)})});const d={};this._users.forAll(r=>{const _=r.name;"hitRate"in r&&"number"==typeof r.hitRate&&!isNaN(r.hitRate)&&r.hitRate>0?(u[_]=u[_]||0,d[_]=Math.round(100*r.hitRate)+"%"):d[_]="0%"});const g=Object.keys(u);g.sort((r,_)=>u[_]-u[r]),g.forEach(r=>l[r]=Math.round(u[r]/2**20)+"MB / "+d[r]);for(let r=p.length-1;r>=0;--r){const _=p[r];_&&(l["Priority "+(r+e-1)]=Math.round(_/this._size*100)+"%")}return l}resetStats(){this._hit=this._miss=0,this._users.forAll(l=>l.resetHitRate())}clear(l){const u=l.id;this._db.forEach((p,d)=>{d.startsWith(u)&&(this._size-=p.size,this._db.delete(d),this._notifyRemove(d,p.entry,p.size,E.ALL))}),l.size=0}clearAll(){this._db.forEach((l,u)=>this._notifyRemove(u,l.entry,l.size,E.ALL)),this._users.forAll(l=>l.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(l,u,p,d){let g;return this._removeFuncs.some(r=>{if(l.startsWith(r[0])){const _=r[1](u,d,p);return"number"==typeof _&&(g=_),!0}return!1}),g}_checkSize(){this._users.forAll(l=>this._checkSizeLimits(l)),this._checkSizeLimits()}_checkSizeLimits(l){const u=l??this;if(u.maxSize<0||u.size<=u.maxSize)return;const p=l?.id;let d=!0;for(;d;){d=!1;for(const[g,r]of this._db)if(0===r.lifetime&&(!p||g.startsWith(p))){if(this._purgeItem(g,r,l),u.size<=.9*u.maxSize)return;d||=this._db.has(g)}}for(const[g,r]of this._db)if((!p||g.startsWith(p))&&(this._purgeItem(g,r,l),u.size<=.9*u.maxSize))return}_purgeItem(l,u,p=this._users.find(d=>l.startsWith(d.id))){if(this._db.delete(l),u.lives<=1){this._size-=u.size,p&&(p.size-=u.size);const d=this._notifyRemove(l,u.entry,u.size,E.SOME);null!=d&&d>0&&(this._size+=d,p&&(p.size+=d),u.lives=u.lifetime,u.size=d,this._db.set(l,u))}else--u.lives,this._db.set(l,u)}}class V{constructor(l,u,p){this.entry=l,this.size=u,this.lifetime=p,this.lives=p}}},23506:(he,Y,o)=>{o.d(Y,{v:()=>e});var f=o(99305);function e(K){K?.writtenProperties&&K.writtenProperties.forEach(({target:E,propName:k,newOrigin:M})=>{(0,f.H)(E)&&M&&E.originOf(k)!==M&&E.updateOrigin(k,M)})}},99305:(he,Y,o)=>{function f(e){return e&&"getAtOrigin"in e&&"originOf"in e}o.d(Y,{H:()=>f})},99488:(he,Y,o)=>{o.r(Y),o.d(Y,{default:()=>gr});var f=o(10467),e=o(8189),K=o(23098),E=o(81098),k=o(92165),M=o(31178),L=o(5922),V=o(35150),x=o(39693),l=o(89221),u=o(56492),p=o(48900),d=o(82663),g=o(45272),r=o(85211),O=(o(3248),o(40707),o(17221)),A=o(76576),v=o(50305),$=o(23506),ie=o(28067),D=o(21870),G=o(13970),z=o(32034),Q=o(58701),P=o(95478),R=o(93410),c=o(17049),y=o(85551),T=o(33036),U=o(68438),F=o(71065),q=o(46602),ne=o(94048);let _e=class extends F.A{constructor(t){super(t),this.break=new q.A({color:[255,255,255],size:12,outline:{color:[0,122,194],width:3}}),this.first=new q.A({color:[0,255,0],size:20,outline:{color:[255,255,255],width:4}}),this.unlocated=new q.A({color:[255,0,0],size:12,outline:{color:[255,255,255],width:3}}),this.last=new q.A({color:[255,0,0],size:20,outline:{color:[255,255,255],width:4}}),this.middle=new q.A({color:[51,51,51],size:12,outline:{color:[0,122,194],width:3}}),this.waypoint=new q.A({color:[255,255,255],size:12,outline:{color:[0,122,194],width:3}})}};(0,e._)([(0,r.MZ)({types:ne.wC})],_e.prototype,"break",void 0),(0,e._)([(0,r.MZ)({types:ne.wC})],_e.prototype,"first",void 0),(0,e._)([(0,r.MZ)({types:ne.wC})],_e.prototype,"unlocated",void 0),(0,e._)([(0,r.MZ)({types:ne.wC})],_e.prototype,"last",void 0),(0,e._)([(0,r.MZ)({types:ne.wC})],_e.prototype,"middle",void 0),(0,e._)([(0,r.MZ)({types:ne.wC})],_e.prototype,"waypoint",void 0),_e=(0,e._)([(0,A.$)("esri.layers.support.RouteStopSymbols")],_e);const Le=_e;var ve=o(88521),Ve=o(55417);let Ae=class extends F.A{constructor(t){super(t),this.directionLines=new Ve.A({color:[0,122,194],width:6}),this.directionPoints=new q.A({color:[255,255,255],size:6,outline:{color:[0,122,194],width:2}}),this.pointBarriers=new q.A({style:"x",size:10,outline:{color:[255,0,0],width:3}}),this.polygonBarriers=new ve.A({color:[255,170,0,.6],outline:{width:7.5,color:[255,0,0,.6]}}),this.polylineBarriers=new Ve.A({width:7.5,color:[255,85,0,.7]}),this.routeInfo=new Ve.A({width:8,color:[20,89,127]}),this.stops=new Le}};(0,e._)([(0,r.MZ)({types:ne.Y7})],Ae.prototype,"directionLines",void 0),(0,e._)([(0,r.MZ)({types:ne.wC})],Ae.prototype,"directionPoints",void 0),(0,e._)([(0,r.MZ)({types:ne.wC})],Ae.prototype,"pointBarriers",void 0),(0,e._)([(0,r.MZ)({types:ne.Ac})],Ae.prototype,"polygonBarriers",void 0),(0,e._)([(0,r.MZ)({types:ne.Y7})],Ae.prototype,"polylineBarriers",void 0),(0,e._)([(0,r.MZ)({types:ne.Y7})],Ae.prototype,"routeInfo",void 0),(0,e._)([(0,r.MZ)({type:Le})],Ae.prototype,"stops",void 0),Ae=(0,e._)([(0,A.$)("esri.layers.support.RouteSymbols")],Ae);const at=Ae;var et=o(73874),_t=o(46577),lt=o(69927),vt=o(85718),We=o(89563),xe=o(68800),me=o(15463),ue=o(81401);let we=class extends F.A{constructor(t){super(t),this.dataType=null,this.name=null,this.parameterNames=null,this.restrictionUsageParameterName=null,this.timeNeutralAttributeName=null,this.trafficSupport=null,this.units=null,this.usageType=null}};(0,e._)([(0,r.MZ)({type:String})],we.prototype,"dataType",void 0),(0,e._)([(0,me.e)(ue.et,{ignoreUnknown:!1})],we.prototype,"name",void 0),(0,e._)([(0,r.MZ)({type:[String]})],we.prototype,"parameterNames",void 0),(0,e._)([(0,r.MZ)({type:String})],we.prototype,"restrictionUsageParameterName",void 0),(0,e._)([(0,me.e)(ue.Mm,{ignoreUnknown:!1})],we.prototype,"timeNeutralAttributeName",void 0),(0,e._)([(0,r.MZ)({type:String})],we.prototype,"trafficSupport",void 0),(0,e._)([(0,me.e)(ue.dn)],we.prototype,"units",void 0),(0,e._)([(0,me.e)(ue.WU)],we.prototype,"usageType",void 0),we=(0,e._)([(0,A.$)("esri.rest.support.NetworkAttribute")],we);const gt=we;let i=class extends F.A{constructor(t){super(t),this.buildTime=null,this.name=null,this.networkAttributes=null,this.networkSources=null,this.state=null}};(0,e._)([(0,r.MZ)({type:Number})],i.prototype,"buildTime",void 0),(0,e._)([(0,r.MZ)({type:String})],i.prototype,"name",void 0),(0,e._)([(0,r.MZ)({type:[gt]})],i.prototype,"networkAttributes",void 0),(0,e._)([(0,r.MZ)()],i.prototype,"networkSources",void 0),(0,e._)([(0,r.MZ)({type:String})],i.prototype,"state",void 0),i=(0,e._)([(0,A.$)("esri.rest.support.NetworkDataset")],i);const h=i;var I=o(36938);let S=class extends F.A{constructor(t){super(t),this.accumulateAttributeNames=null,this.attributeParameterValues=null,this.currentVersion=null,this.defaultTravelMode=null,this.directionsLanguage=null,this.directionsLengthUnits=null,this.directionsSupportedLanguages=null,this.directionsTimeAttribute=null,this.hasZ=null,this.impedance=null,this.networkDataset=null,this.supportedTravelModes=null}readAccumulateAttributes(t){return null==t?null:t.map(n=>ue.et.fromJSON(n))}writeAccumulateAttributes(t,n,s){t?.length&&(n[s]=t.map(a=>ue.et.toJSON(a)))}get capabilities(){return{supportsNow:(this.currentVersion??10)>=10.81}}readDefaultTravelMode(t,n){const s=n.supportedTravelModes?.find(({id:a})=>a===n.defaultTravelMode)??n.supportedTravelModes?.find(({itemId:a})=>a===n.defaultTravelMode);return s?I.A.fromJSON(s):null}};(0,e._)([(0,r.MZ)()],S.prototype,"accumulateAttributeNames",void 0),(0,e._)([(0,O.w)("accumulateAttributeNames")],S.prototype,"readAccumulateAttributes",null),(0,e._)([(0,v.K)("accumulateAttributeNames")],S.prototype,"writeAccumulateAttributes",null),(0,e._)([(0,r.MZ)()],S.prototype,"attributeParameterValues",void 0),(0,e._)([(0,r.MZ)()],S.prototype,"capabilities",null),(0,e._)([(0,r.MZ)()],S.prototype,"currentVersion",void 0),(0,e._)([(0,r.MZ)()],S.prototype,"defaultTravelMode",void 0),(0,e._)([(0,O.w)("defaultTravelMode",["defaultTravelMode","supportedTravelModes"])],S.prototype,"readDefaultTravelMode",null),(0,e._)([(0,r.MZ)()],S.prototype,"directionsLanguage",void 0),(0,e._)([(0,me.e)(ue.Z7)],S.prototype,"directionsLengthUnits",void 0),(0,e._)([(0,r.MZ)()],S.prototype,"directionsSupportedLanguages",void 0),(0,e._)([(0,me.e)(ue.Mm,{ignoreUnknown:!1})],S.prototype,"directionsTimeAttribute",void 0),(0,e._)([(0,r.MZ)()],S.prototype,"hasZ",void 0),(0,e._)([(0,me.e)(ue.et,{ignoreUnknown:!1})],S.prototype,"impedance",void 0),(0,e._)([(0,r.MZ)({type:h})],S.prototype,"networkDataset",void 0),(0,e._)([(0,r.MZ)({type:[I.A]})],S.prototype,"supportedTravelModes",void 0),S=(0,e._)([(0,A.$)("esri.rest.support.NetworkServiceDescription")],S);const ee=S;function Ee(t,n,s,a){a[s]=[n.length,n.length+t.length],t.forEach(m=>{n.push(m.geometry)})}function be(t,n,s){return Be.apply(this,arguments)}function Be(){return Be=(0,f.A)(function*(t,n,s){if(!t)throw new L.A("network-service:missing-url","Url to Network service is missing");const a=(0,xe.jV)({f:"json",token:n},s),{data:m}=yield(0,We.A)(t,a),N=m.currentVersion>=10.4?function ze(t,n,s){return Se.apply(this,arguments)}(t,n,s):function ge(t,n){return Me.apply(this,arguments)}(t,s),{defaultTravelMode:C,supportedTravelModes:W}=yield N;return m.defaultTravelMode=C,m.supportedTravelModes=W,ee.fromJSON(m)}),Be.apply(this,arguments)}function Me(){return(Me=(0,f.A)(function*(t,n){const s=(0,xe.jV)({f:"json"},n),{data:a}=yield(0,We.A)(t.replace(/\/rest\/.*$/i,"/info"),s);if(!a?.owningSystemUrl)return{supportedTravelModes:[],defaultTravelMode:null};const{owningSystemUrl:m}=a,N=(0,g.UC)(m)+"/sharing/rest/portals/self",{data:C}=yield(0,We.A)(N,s),W=(0,l.wc)("helperServices.routingUtilities.url",C);if(!W)return{supportedTravelModes:[],defaultTravelMode:null};const ae=(0,xe.Dl)(m),pe=/\/solve$/i.test(ae.path)?"Route":/\/solveclosestfacility$/i.test(ae.path)?"ClosestFacility":"ServiceAreas",B=(0,xe.jV)({f:"json",serviceName:pe},n),H=(0,g.UC)(W)+"/GetTravelModes/execute",oe=yield(0,We.A)(H,B),de=[];let se=null;if(oe?.data?.results?.length){const le=oe.data.results;for(const J of le)if("supportedTravelModes"===J.paramName){if(J.value?.features)for(const{attributes:te}of J.value.features)if(te){const X=JSON.parse(te.TravelMode);de.push(X)}}else"defaultTravelMode"===J.paramName&&(se=J.value)}return{supportedTravelModes:de,defaultTravelMode:se}})).apply(this,arguments)}function Se(){return(Se=(0,f.A)(function*(t,n,s){try{const a=(0,xe.jV)({f:"json",token:n},s),m=(0,g.UC)(t)+"/retrieveTravelModes",{data:{supportedTravelModes:N,defaultTravelMode:C}}=yield(0,We.A)(m,a);return{supportedTravelModes:N,defaultTravelMode:C}}catch(a){throw new L.A("network-service:retrieveTravelModes","Could not get to the NAServer's retrieveTravelModes.",{error:a})}})).apply(this,arguments)}var Ke=o(92073),Je=o(77098),Ge=o(50254),Ie=o(93327),ke=o(89952),$e=o(49976),tt=o(55151);const Ue=new $e.J({0:"informative",1:"process-definition",2:"process-start",3:"process-stop",50:"warning",100:"error",101:"empty",200:"abort"});let He=class extends tt.A{constructor(t){super(t),this.type=null}};(0,e._)([(0,r.MZ)({type:String,json:{read:Ue.read,write:Ue.write}})],He.prototype,"type",void 0),He=(0,e._)([(0,A.$)("esri.rest.support.NAMessage")],He);const Mt=He;var qe=o(93615),Ye=o(1749);let Pe=class extends F.A{constructor(t){super(t)}};(0,e._)([(0,r.MZ)({json:{read:{source:"string"}}})],Pe.prototype,"text",void 0),(0,e._)([(0,me.e)(ue.Ec,{name:"stringType"})],Pe.prototype,"type",void 0),Pe=(0,e._)([(0,A.$)("esri.rest.support.DirectionsString")],Pe);const je=Pe;let Ze=class extends F.A{constructor(t){super(t),this.arriveTime=null,this.arriveTimeOffset=null,this.geometry=null,this.strings=null}readArriveTimeOffset(t,n){return(0,Ge.Zn)(n.ETA,n.arriveTimeUTC)}readGeometry(t,n){return Ye.A.fromJSON(n.point)}};(0,e._)([(0,r.MZ)({type:Date,json:{read:{source:"arriveTimeUTC"}}})],Ze.prototype,"arriveTime",void 0),(0,e._)([(0,r.MZ)()],Ze.prototype,"arriveTimeOffset",void 0),(0,e._)([(0,O.w)("arriveTimeOffset",["arriveTimeUTC","ETA"])],Ze.prototype,"readArriveTimeOffset",null),(0,e._)([(0,r.MZ)({type:Ye.A})],Ze.prototype,"geometry",void 0),(0,e._)([(0,O.w)("geometry",["point"])],Ze.prototype,"readGeometry",null),(0,e._)([(0,r.MZ)({type:[je]})],Ze.prototype,"strings",void 0),Ze=(0,e._)([(0,A.$)("esri.rest.support.DirectionsEvent")],Ze);const Ft=Ze;let Qe=class extends E.A{constructor(t){super(t),this.events=null,this.geometry=null,this.strings=null}readGeometry(t,n){const s=function Wt(t){if(null==t||""===t)return null;let n=0,s=0,a=0,m=0;const N=[];let C,W,ae,pe,B,H,oe,de,se=0,le=0,J=0;if(B=t.match(/((\+|-)[^+\-|]+|\|)/g),B||(B=[]),0===parseInt(B[se],32)){se=2;const te=parseInt(B[se],32);se++,H=parseInt(B[se],32),se++,1&te&&(le=B.indexOf("|")+1,oe=parseInt(B[le],32),le++),2&te&&(J=B.indexOf("|",le)+1,de=parseInt(B[J],32),J++)}else H=parseInt(B[se],32),se++;for(;se<B.length&&"|"!==B[se];){C=parseInt(B[se],32)+n,se++,n=C,W=parseInt(B[se],32)+s,se++,s=W;const te=[C/H,W/H];le&&(pe=parseInt(B[le],32)+a,le++,a=pe,te.push(pe/oe)),J&&(ae=parseInt(B[J],32)+m,J++,m=ae,te.push(ae/de)),N.push(te)}return{paths:[N],hasZ:le>0,hasM:J>0}}(n.compressedGeometry);return null!=s?qe.A.fromJSON(s):null}};(0,e._)([(0,r.MZ)({type:[Ft]})],Qe.prototype,"events",void 0),(0,e._)([(0,r.MZ)({type:qe.A})],Qe.prototype,"geometry",void 0),(0,e._)([(0,O.w)("geometry",["compressedGeometry"])],Qe.prototype,"readGeometry",null),(0,e._)([(0,r.MZ)({type:[je]})],Qe.prototype,"strings",void 0),Qe=(0,e._)([(0,A.$)("esri.rest.support.DirectionsFeature")],Qe);const zt=Qe;let Oe=class extends Ie.A{constructor(t){super(t),this.extent=null,this.features=[],this.geometryType="polyline",this.routeId=null,this.routeName=null,this.totalDriveTime=null,this.totalLength=null,this.totalTime=null}readFeatures(t,n){if(!t)return[];const s=n.summary.envelope.spatialReference??n.spatialReference,a=s&&z.A.fromJSON(s);return t.map(m=>{const N=zt.fromJSON(m);if(null!=N.geometry&&(N.geometry.spatialReference=a),null!=N.events)for(const C of N.events)null!=C.geometry&&(C.geometry.spatialReference=a);return N})}get mergedGeometry(){return this.features?function Kt(t,n){if(0===t.length)return new qe.A({spatialReference:n});const s=[];for(const C of t)for(const W of C.paths)s.push(...W);const a=[];s.forEach((C,W)=>{0!==W&&C[0]===s[W-1][0]&&C[1]===s[W-1][1]||a.push(C)});const{hasM:m,hasZ:N}=t[0];return new qe.A({hasM:m,hasZ:N,paths:[a],spatialReference:n})}(this.features.map(({geometry:t})=>t),this.extent.spatialReference):null}get strings(){return this.features.flatMap(({strings:t})=>t).filter(ke.Ru)}};(0,e._)([(0,r.MZ)({type:ie.A,json:{read:{source:"summary.envelope"}}})],Oe.prototype,"extent",void 0),(0,e._)([(0,r.MZ)({nonNullable:!0})],Oe.prototype,"features",void 0),(0,e._)([(0,O.w)("features")],Oe.prototype,"readFeatures",null),(0,e._)([(0,r.MZ)()],Oe.prototype,"geometryType",void 0),(0,e._)([(0,r.MZ)({readOnly:!0})],Oe.prototype,"mergedGeometry",null),(0,e._)([(0,r.MZ)()],Oe.prototype,"routeId",void 0),(0,e._)([(0,r.MZ)()],Oe.prototype,"routeName",void 0),(0,e._)([(0,r.MZ)({value:null,readOnly:!0})],Oe.prototype,"strings",null),(0,e._)([(0,r.MZ)({json:{read:{source:"summary.totalDriveTime"}}})],Oe.prototype,"totalDriveTime",void 0),(0,e._)([(0,r.MZ)({json:{read:{source:"summary.totalLength"}}})],Oe.prototype,"totalLength",void 0),(0,e._)([(0,r.MZ)({json:{read:{source:"summary.totalTime"}}})],Oe.prototype,"totalTime",void 0),Oe=(0,e._)([(0,A.$)("esri.rest.support.DirectionsFeatureSet")],Oe);const Gt=Oe;let De=class extends F.A{constructor(t){super(t),this.directionLines=null,this.directionPoints=null,this.directions=null,this.route=null,this.routeName=null,this.stops=null,this.traversedEdges=null,this.traversedJunctions=null,this.traversedTurns=null}};(0,e._)([(0,r.MZ)({type:Ie.A,json:{write:!0}})],De.prototype,"directionLines",void 0),(0,e._)([(0,r.MZ)({type:Ie.A,json:{write:!0}})],De.prototype,"directionPoints",void 0),(0,e._)([(0,r.MZ)({type:Gt,json:{write:!0}})],De.prototype,"directions",void 0),(0,e._)([(0,r.MZ)({type:E.A,json:{write:!0}})],De.prototype,"route",void 0),(0,e._)([(0,r.MZ)({type:String,json:{write:!0}})],De.prototype,"routeName",void 0),(0,e._)([(0,r.MZ)({type:[E.A],json:{write:!0}})],De.prototype,"stops",void 0),(0,e._)([(0,r.MZ)({type:Ie.A,json:{write:!0}})],De.prototype,"traversedEdges",void 0),(0,e._)([(0,r.MZ)({type:Ie.A,json:{write:!0}})],De.prototype,"traversedJunctions",void 0),(0,e._)([(0,r.MZ)({type:Ie.A,json:{write:!0}})],De.prototype,"traversedTurns",void 0),De=(0,e._)([(0,A.$)("esri.rest.support.RouteResult")],De);const Vt=De;function St(t){return t?Ie.A.fromJSON(t).features.filter(ke.Ru):[]}let Re=class extends F.A{constructor(t){super(t),this.checksum=null,this.messages=null,this.pointBarriers=null,this.polylineBarriers=null,this.polygonBarriers=null,this.routeResults=null}readPointBarriers(t,n){return St(n.barriers)}readPolylineBarriers(t){return St(t)}readPolygonBarriers(t){return St(t)}};(0,e._)([(0,r.MZ)({type:String})],Re.prototype,"checksum",void 0),(0,e._)([(0,r.MZ)({type:[Mt]})],Re.prototype,"messages",void 0),(0,e._)([(0,r.MZ)({type:[E.A]})],Re.prototype,"pointBarriers",void 0),(0,e._)([(0,O.w)("pointBarriers",["barriers"])],Re.prototype,"readPointBarriers",null),(0,e._)([(0,r.MZ)({type:[E.A]})],Re.prototype,"polylineBarriers",void 0),(0,e._)([(0,O.w)("polylineBarriers")],Re.prototype,"readPolylineBarriers",null),(0,e._)([(0,r.MZ)({type:[E.A]})],Re.prototype,"polygonBarriers",void 0),(0,e._)([(0,O.w)("polygonBarriers")],Re.prototype,"readPolygonBarriers",null),(0,e._)([(0,r.MZ)({type:[Vt]})],Re.prototype,"routeResults",void 0),Re=(0,e._)([(0,A.$)("esri.rest.support.RouteSolveResult")],Re);const Jt=Re;function ut(t){return t instanceof Ie.A}function At(){return(At=(0,f.A)(function*(t,n,s){const a=[],m=[],N={},C={},W=(0,xe.Dl)(t),{path:ae}=W;ut(n.stops)&&Ee(n.stops.features,m,"stops.features",N),ut(n.pointBarriers)&&Ee(n.pointBarriers.features,m,"pointBarriers.features",N),ut(n.polylineBarriers)&&Ee(n.polylineBarriers.features,m,"polylineBarriers.features",N),ut(n.polygonBarriers)&&Ee(n.polygonBarriers.features,m,"polygonBarriers.features",N);const pe=yield(0,Je.el)(m);for(const de in N){const se=N[de];a.push(de),C[de]=pe.slice(se[0],se[1])}if(function Ce(t,n){for(let s=0;s<n.length;s++){const a=t[n[s]];if(a&&a.length)for(const m of a)if(null!=m&&m.hasZ)return!0}return!1}(C,a)){let de=null;try{de=yield be(ae,n.apiKey,s)}catch{}de&&!de.hasZ&&function fe(t,n){for(let s=0;s<n.length;s++){const a=t[n[s]];if(a&&a.length)for(const m of a)m.z=void 0}V.A.getLogger("esri.rest.networkService").warnOnce("The remote Network Analysis service is powered by a network dataset which is not Z-aware.\nZ-coordinates of the input geometry are ignored.")}(C,a)}for(const de in C)C[de].forEach((se,le)=>{(0,Ke.Jt)(n,de)[le].geometry=se});const B={...s,query:{...W.query,...(0,Ge.r9)(n),f:"json"}},H=ae.endsWith("/solve")?ae:`${ae}/solve`,{data:oe}=yield(0,We.A)(H,B);return function $t(t){const{barriers:n,checksum:s,directionLines:a,directionPoints:m,directions:N,messages:C,polygonBarriers:W,polylineBarriers:ae,routes:pe,stops:B,traversedEdges:H,traversedJunctions:oe,traversedTurns:de}=t,se=X=>{const ye=J.find(Te=>Te.routeName===X);if(null!=ye)return ye;const ce={routeId:J.length+1,routeName:X};return J.push(ce),ce},le=X=>{const ye=J.find(Te=>Te.routeId===X);if(null!=ye)return ye;const ce={routeId:X,routeName:null};return J.push(ce),ce},J=[];pe?.features.forEach((X,ye)=>{X.geometry.spatialReference=pe.spatialReference??void 0,J.push({routeId:ye+1,routeName:X.attributes.Name,route:X})}),N?.forEach(X=>{const{routeName:ye}=X;se(ye).directions=X});const te=B?.features.every(X=>null==X.attributes.RouteName)&&J.length>0?J[0].routeName:null;return B?.features.forEach(X=>{X.geometry&&(X.geometry.spatialReference??=B.spatialReference??void 0);const ce=se(te??X.attributes.RouteName);ce.stops??=[],ce.stops.push(X)}),a?.features.forEach(X=>{const ce=le(X.attributes.RouteID),{geometryType:Te,spatialReference:Fe}=a;ce.directionLines??={features:[],geometryType:Te,spatialReference:Fe},ce.directionLines.features.push(X)}),m?.features.forEach(X=>{const ce=le(X.attributes.RouteID),{geometryType:Te,spatialReference:Fe}=m;ce.directionPoints??={features:[],geometryType:Te,spatialReference:Fe},ce.directionPoints.features.push(X)}),H?.features.forEach(X=>{const ce=le(X.attributes.RouteID),{geometryType:Te,spatialReference:Fe}=H;ce.traversedEdges??={features:[],geometryType:Te,spatialReference:Fe},ce.traversedEdges.features.push(X)}),oe?.features.forEach(X=>{const ce=le(X.attributes.RouteID),{geometryType:Te,spatialReference:Fe}=oe;ce.traversedJunctions??={features:[],geometryType:Te,spatialReference:Fe},ce.traversedJunctions.features.push(X)}),de?.features.forEach(X=>{const ce=le(X.attributes.RouteID);ce.traversedTurns??={features:[]},ce.traversedTurns.features.push(X)}),Jt.fromJSON({barriers:n,checksum:s,messages:C,polygonBarriers:W,polylineBarriers:ae,routeResults:J})}(oe)})).apply(this,arguments)}var ct=o(58226),pt=o(37304),rt=o(23632),ot=o(34720),st=o(51882),Et=o(22560),It=o(90660),Ht=o(55739);const Yt={type:String,json:{read:{source:"token"},write:{target:"token"}}};var Qt=o(61320),Xt=o(6434);let Ne=class extends(It.A.ClonableMixin(F.A)){constructor(t){super(t),this.doNotLocateOnRestrictedElements=null,this.geometry=null,this.geometryType=null,this.name=null,this.spatialRelationship=null,this.type="layer",this.where=null}};(0,e._)([(0,r.MZ)({type:Boolean,json:{write:!0}})],Ne.prototype,"doNotLocateOnRestrictedElements",void 0),(0,e._)([(0,r.MZ)({types:Xt.yR,json:{read:Qt.rS,write:!0}})],Ne.prototype,"geometry",void 0),(0,e._)([(0,me.e)(ue.Vj)],Ne.prototype,"geometryType",void 0),(0,e._)([(0,r.MZ)({type:String,json:{name:"layerName",write:!0}})],Ne.prototype,"name",void 0),(0,e._)([(0,me.e)(ue.vS,{name:"spatialRel"})],Ne.prototype,"spatialRelationship",void 0),(0,e._)([(0,r.MZ)({type:String,json:{write:!0}})],Ne.prototype,"type",void 0),(0,e._)([(0,r.MZ)({type:String,json:{write:!0}})],Ne.prototype,"where",void 0),Ne=(0,e._)([(0,A.$)("esri.rest.support.DataLayer")],Ne);const qt=Ne;var Pt;let dt=Pt=class extends Ie.A{constructor(t){super(t),this.doNotLocateOnRestrictedElements=null}clone(){return new Pt({doNotLocateOnRestrictedElements:this.doNotLocateOnRestrictedElements,...this.cloneProperties()})}};(0,e._)([(0,r.MZ)({type:Boolean,json:{write:!0}})],dt.prototype,"doNotLocateOnRestrictedElements",void 0),dt=Pt=(0,e._)([(0,A.$)("esri.rest.support.NetworkFeatureSet")],dt);const er=dt;let it=class extends(It.A.ClonableMixin(F.A)){constructor(t){super(t),this.doNotLocateOnRestrictedElements=null,this.url=null}};(0,e._)([(0,r.MZ)({type:Boolean,json:{write:!0}})],it.prototype,"doNotLocateOnRestrictedElements",void 0),(0,e._)([(0,r.MZ)({type:String,json:{write:!0}})],it.prototype,"url",void 0),it=(0,e._)([(0,A.$)("esri.rest.support.NetworkUrl")],it);const tr=it;var Tt;let j=Tt=class extends(It.A.ClonableMixin(F.A)){constructor(t){super(t),this.accumulateAttributes=null,this.apiKey=null,this.attributeParameterValues=null,this.checksum=null,this.directionsLanguage=null,this.directionsLengthUnits=null,this.directionsOutputType=null,this.directionsStyleName=null,this.directionsTimeAttribute=null,this.findBestSequence=null,this.geometryPrecision=null,this.geometryPrecisionM=null,this.geometryPrecisionZ=null,this.ignoreInvalidLocations=null,this.impedanceAttribute=null,this.outputGeometryPrecision=null,this.outputGeometryPrecisionUnits=null,this.outputLines="true-shape",this.outSpatialReference=null,this.overrides=null,this.pointBarriers=null,this.polygonBarriers=null,this.polylineBarriers=null,this.preserveFirstStop=null,this.preserveLastStop=null,this.preserveObjectID=null,this.restrictionAttributes=null,this.restrictUTurns=null,this.returnBarriers=!1,this.returnDirections=!1,this.returnPolygonBarriers=!1,this.returnPolylineBarriers=!1,this.returnRoutes=!0,this.returnStops=!1,this.returnTraversedEdges=null,this.returnTraversedJunctions=null,this.returnTraversedTurns=null,this.returnZ=!0,this.startTime=null,this.startTimeIsUTC=!0,this.stops=null,this.timeWindowsAreUTC=null,this.travelMode=null,this.useHierarchy=null,this.useTimeWindows=null}static from(t){return(0,Ht.PZ)(Tt,t)}readAccumulateAttributes(t){return null==t?null:t.map(n=>ue.et.fromJSON(n))}writeAccumulateAttributes(t,n,s){t?.length&&(n[s]=t.map(a=>ue.et.toJSON(a)))}writePointBarriers(t,n,s){yt(t,n,s)}writePolygonBarrier(t,n,s){yt(t,n,s)}writePolylineBarrier(t,n,s){yt(t,n,s)}readRestrictionAttributes(t){return null==t?null:t.map(n=>ue.OC.fromJSON(n))}writeRestrictionAttributes(t,n,s){t?.length&&(n[s]=t.map(a=>ue.OC.toJSON(a)))}readStartTime(t,n){const{startTime:s}=n;return null==s?null:"now"===s?"now":new Date(s)}writeStartTime(t,n){null!=t&&(n.startTime="now"===t?"now":t.getTime())}readStops(t,n){return function ar(t){return function or(t){return t&&"type"in t}(t)?qt.fromJSON(t):function ir(t){return t&&"url"in t}(t)?tr.fromJSON(t):function sr(t){return t&&"features"in t&&"doNotLocateOnRestrictedElements"in t}(t)?er.fromJSON(t):function nr(t){return t&&"features"in t}(t)?Ie.A.fromJSON(t):null}(n.stops)}writeStops(t,n,s){yt(t,n,s)}};(0,e._)([(0,r.MZ)({type:[String],json:{name:"accumulateAttributeNames",write:!0}})],j.prototype,"accumulateAttributes",void 0),(0,e._)([(0,O.w)("accumulateAttributes")],j.prototype,"readAccumulateAttributes",null),(0,e._)([(0,v.K)("accumulateAttributes")],j.prototype,"writeAccumulateAttributes",null),(0,e._)([(0,r.MZ)(Yt)],j.prototype,"apiKey",void 0),(0,e._)([(0,r.MZ)({json:{write:!0}})],j.prototype,"attributeParameterValues",void 0),(0,e._)([(0,r.MZ)({type:String,json:{write:!0}})],j.prototype,"checksum",void 0),(0,e._)([(0,r.MZ)({type:String,json:{write:!0}})],j.prototype,"directionsLanguage",void 0),(0,e._)([(0,me.e)(ue.Z7)],j.prototype,"directionsLengthUnits",void 0),(0,e._)([(0,me.e)(ue.aJ)],j.prototype,"directionsOutputType",void 0),(0,e._)([(0,me.e)(ue.$n)],j.prototype,"directionsStyleName",void 0),(0,e._)([(0,me.e)(ue.Mm,{name:"directionsTimeAttributeName",ignoreUnknown:!1})],j.prototype,"directionsTimeAttribute",void 0),(0,e._)([(0,r.MZ)({type:Boolean,json:{write:!0}})],j.prototype,"findBestSequence",void 0),(0,e._)([(0,r.MZ)({type:Number,json:{write:!0}})],j.prototype,"geometryPrecision",void 0),(0,e._)([(0,r.MZ)({type:Number,json:{write:!0}})],j.prototype,"geometryPrecisionM",void 0),(0,e._)([(0,r.MZ)({type:Number,json:{write:!0}})],j.prototype,"geometryPrecisionZ",void 0),(0,e._)([(0,r.MZ)({type:Boolean,json:{write:!0}})],j.prototype,"ignoreInvalidLocations",void 0),(0,e._)([(0,me.e)(ue.et,{name:"impedanceAttributeName",ignoreUnknown:!1})],j.prototype,"impedanceAttribute",void 0),(0,e._)([(0,r.MZ)({type:Number,json:{write:!0}})],j.prototype,"outputGeometryPrecision",void 0),(0,e._)([(0,me.e)(ue.hY)],j.prototype,"outputGeometryPrecisionUnits",void 0),(0,e._)([(0,me.e)(ue.Sr)],j.prototype,"outputLines",void 0),(0,e._)([(0,r.MZ)({type:z.A,json:{name:"outSR",write:!0}})],j.prototype,"outSpatialReference",void 0),(0,e._)([(0,r.MZ)({json:{write:!0}})],j.prototype,"overrides",void 0),(0,e._)([(0,r.MZ)({json:{name:"barriers",write:!0}})],j.prototype,"pointBarriers",void 0),(0,e._)([(0,v.K)("pointBarriers")],j.prototype,"writePointBarriers",null),(0,e._)([(0,r.MZ)({json:{write:!0}})],j.prototype,"polygonBarriers",void 0),(0,e._)([(0,v.K)("polygonBarriers")],j.prototype,"writePolygonBarrier",null),(0,e._)([(0,r.MZ)({json:{write:!0}})],j.prototype,"polylineBarriers",void 0),(0,e._)([(0,v.K)("polylineBarriers")],j.prototype,"writePolylineBarrier",null),(0,e._)([(0,r.MZ)({type:Boolean,json:{write:!0}})],j.prototype,"preserveFirstStop",void 0),(0,e._)([(0,r.MZ)({type:Boolean,json:{write:!0}})],j.prototype,"preserveLastStop",void 0),(0,e._)([(0,r.MZ)({type:Boolean,json:{write:!0}})],j.prototype,"preserveObjectID",void 0),(0,e._)([(0,r.MZ)({type:[String],json:{name:"restrictionAttributeNames",write:!0}})],j.prototype,"restrictionAttributes",void 0),(0,e._)([(0,O.w)("restrictionAttributes")],j.prototype,"readRestrictionAttributes",null),(0,e._)([(0,v.K)("restrictionAttributes")],j.prototype,"writeRestrictionAttributes",null),(0,e._)([(0,me.e)(ue.hE)],j.prototype,"restrictUTurns",void 0),(0,e._)([(0,r.MZ)({type:Boolean,json:{write:!0}})],j.prototype,"returnBarriers",void 0),(0,e._)([(0,r.MZ)({type:Boolean,json:{write:!0}})],j.prototype,"returnDirections",void 0),(0,e._)([(0,r.MZ)({type:Boolean,json:{write:!0}})],j.prototype,"returnPolygonBarriers",void 0),(0,e._)([(0,r.MZ)({type:Boolean,json:{write:!0}})],j.prototype,"returnPolylineBarriers",void 0),(0,e._)([(0,r.MZ)({type:Boolean,json:{write:!0}})],j.prototype,"returnRoutes",void 0),(0,e._)([(0,r.MZ)({type:Boolean,json:{write:!0}})],j.prototype,"returnStops",void 0),(0,e._)([(0,r.MZ)({type:Boolean,json:{write:!0}})],j.prototype,"returnTraversedEdges",void 0),(0,e._)([(0,r.MZ)({type:Boolean,json:{write:!0}})],j.prototype,"returnTraversedJunctions",void 0),(0,e._)([(0,r.MZ)({type:Boolean,json:{write:!0}})],j.prototype,"returnTraversedTurns",void 0),(0,e._)([(0,r.MZ)({type:Boolean,json:{write:!0}})],j.prototype,"returnZ",void 0),(0,e._)([(0,r.MZ)({json:{write:!0}})],j.prototype,"startTime",void 0),(0,e._)([(0,O.w)("startTime")],j.prototype,"readStartTime",null),(0,e._)([(0,v.K)("startTime")],j.prototype,"writeStartTime",null),(0,e._)([(0,r.MZ)({type:Boolean,json:{write:!0}})],j.prototype,"startTimeIsUTC",void 0),(0,e._)([(0,r.MZ)({json:{write:!0}})],j.prototype,"stops",void 0),(0,e._)([(0,O.w)("stops")],j.prototype,"readStops",null),(0,e._)([(0,v.K)("stops")],j.prototype,"writeStops",null),(0,e._)([(0,r.MZ)({type:Boolean,json:{write:!0}})],j.prototype,"timeWindowsAreUTC",void 0),(0,e._)([(0,r.MZ)({type:I.A,json:{write:!0}})],j.prototype,"travelMode",void 0),(0,e._)([(0,r.MZ)({type:Boolean,json:{write:!0}})],j.prototype,"useHierarchy",void 0),(0,e._)([(0,r.MZ)({type:Boolean,json:{write:!0}})],j.prototype,"useTimeWindows",void 0),j=Tt=(0,e._)([(0,A.$)("esri.rest.support.RouteParameters")],j);const rr=j;function yt(t,n,s){null!=t&&(n[s]=M.A.isCollection(t)?{features:t.toArray().map(a=>a.toJSON())}:t.toJSON())}var lr=o(20677),nt=o(48393);function mt(t){if(!t.length)return;const n=t.toArray(),s=n.map(({objectId:m})=>m).filter(m=>null!=m);let a=Math.max(...s,0);for(const m of n)null==m.objectId&&(m.objectId=++a)}function ht(t,n){return!!t.length&&t.length===n.length&&Ct(t)&&Ct(n)}function Ct(t){return t.every(({objectId:n})=>null!=n)}function bt(t){return t.length?t:null}function Ot(t){switch(t){case"esriGeometryPoint":return{type:"esriSMS",style:"esriSMSCircle",size:12,color:[0,0,0,0],outline:Ot("esriGeometryPolyline")};case"esriGeometryPolyline":return{type:"esriSLS",style:"esriSLSSolid",width:1,color:[0,0,0,0]};case"esriGeometryPolygon":return{type:"esriSFS",style:"esriSFSNull",outline:Ot("esriGeometryPolyline")}}}function ft(t){return"layers"in t}function Bt(t){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,f.A)(function*(t){const n=z.A.WGS84;return yield(0,G.initializeProjection)(t.spatialReference,n),(0,G.project)(t,n)})).apply(this,arguments)}function Xe(t,n){switch(n){case"seconds":return t/60;case"hours":return 60*t;case"days":return 60*t*24;default:return t}}function wt(t,n){return"decimal-degrees"===n||"points"===n||"unknown"===n?t:(0,d.oU)(t,n,"meters")}const _r=M.A.ofType(ct.A),vr=M.A.ofType(pt.A),Dt=M.A.ofType(rt.A),Rt=M.A.ofType(ot.A),jt=M.A.ofType(st.A),Nt=M.A.ofType(nt.A),xt="esri.layers.RouteLayer",Ut=()=>V.A.getLogger(xt);let re=class extends((0,R.dM)((0,T.j)((0,c.q)((0,y.A)((0,x.P)(P.A)))))){constructor(t){super(t),this._cachedServiceDescription=null,this._featureCollection=null,this._type="Feature Collection",this.checksum=null,this.defaultSymbols=new at,this.directionLines=null,this.directionPoints=null,this.featureCollectionType="route",this.legendEnabled=!1,this.maxScale=0,this.minScale=0,this.pointBarriers=new Dt,this.polygonBarriers=new Rt,this.polylineBarriers=new jt,this.routeInfo=null,this.spatialReference=z.A.WGS84,this.stops=new Nt,this.type="route";const n=()=>{this._setStopSymbol(this.stops)};this.addHandles((0,p.on)(()=>this.stops,"change",n,{sync:!0,onListenerAdd:n}))}writeFeatureCollectionWebmap(t,n,s,a){const m=[this._writePolygonBarriers(),this._writePolylineBarriers(),this._writePointBarriers(),this._writeRouteInfo(),this._writeDirectionLines(),this._writeDirectionPoints(),this._writeStops()].filter(W=>!!W),N=m.map((W,ae)=>ae);(0,l.sM)("web-map"===a.origin?"featureCollection.layers":"layers",m,n),n.opacity=this.opacity,n.visibility=this.visible,n.visibleLayers=N}readDirectionLines(t,n){return this._getNetworkFeatures(n,"DirectionLines",s=>ct.A.fromGraphic(s))}readDirectionPoints(t,n){return this._getNetworkFeatures(n,"DirectionPoints",s=>pt.A.fromGraphic(s))}get fullExtent(){const t=new ie.A({xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:z.A.WGS84});if(null!=this.routeInfo?.geometry)return this.routeInfo.geometry.extent??t;if(null==this.stops)return t;const n=this.stops.filter(m=>null!=m.geometry);if(n.length<2)return t;const{spatialReference:s}=n.at(0).geometry;if(null==s)return t;const a=n.toArray().map(m=>{const N=m.geometry;return[N.x,N.y]});return new D.A({points:a,spatialReference:s}).extent}readMaxScale(t,n){return(ft(n)?n.layers:n.featureCollection?.layers)?.find(m=>null!=m.layerDefinition.maxScale)?.layerDefinition.maxScale??0}readMinScale(t,n){return(ft(n)?n.layers:n.featureCollection?.layers)?.find(m=>null!=m.layerDefinition.minScale)?.layerDefinition.minScale??0}readPointBarriers(t,n){return this._getNetworkFeatures(n,"Barriers",s=>rt.A.fromGraphic(s))}readPolygonBarriers(t,n){return this._getNetworkFeatures(n,"PolygonBarriers",s=>ot.A.fromGraphic(s))}readPolylineBarriers(t,n){return this._getNetworkFeatures(n,"PolylineBarriers",s=>st.A.fromGraphic(s))}readRouteInfo(t,n){return this._getNetworkFeatures(n,"RouteInfo",s=>Et.A.fromGraphic(s)).at(0)??null}readSpatialReference(t,n){const s=ft(n)?n.layers:n.featureCollection?.layers;if(!s?.length)return z.A.WGS84;const{layerDefinition:a,featureSet:m}=s[0],N=m.features[0];return z.A.fromJSON(N?.geometry?.spatialReference??m.spatialReference??a.spatialReference??a.extent.spatialReference??Q.KK)}readStops(t,n){return this._getNetworkFeatures(n,"Stops",s=>nt.A.fromGraphic(s),s=>this._setStopSymbol(s))}get title(){return this.routeInfo?.name??"Route"}set title(t){this._overrideIfSome("title",t)}get url(){return K.A.routeServiceUrl}set url(t){this._set("url",null!=t?(0,U.Jf)(t,Ut()):K.A.routeServiceUrl)}load(t){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Feature Collection"]},t)),Promise.resolve(this)}removeAll(){this.removeResult(),this.pointBarriers.removeAll(),this.polygonBarriers.removeAll(),this.polylineBarriers.removeAll(),this.stops.removeAll()}removeResult(){null!=this.directionLines&&(this.directionLines.removeAll(),this._set("directionLines",null)),null!=this.directionPoints&&(this.directionPoints.removeAll(),this._set("directionPoints",null)),null!=this.routeInfo&&this._set("routeInfo",null)}save(){var t=this;return(0,f.A)(function*(){yield t.load();const{fullExtent:n,portalItem:s}=t;if(!s)throw new L.A("routelayer:portal-item-not-set","save() requires to the layer to have a portal item");if(!s.id)throw new L.A("routelayer:portal-item-not-saved","Please use saveAs() first to save the routelayer");if("Feature Collection"!==s.type)throw new L.A("routelayer:portal-item-wrong-type",'Portal item needs to have type "Feature Collection"');if(null==t.routeInfo)throw new L.A("routelayer:route-unsolved","save() requires a solved route");const{portal:a}=s;yield a.signIn(),a.user||(yield s.reload());const{itemUrl:m,itemControl:N}=s;if("admin"!==N&&"update"!==N)throw new L.A("routelayer:insufficient-permissions","To save this layer, you need to be the owner or an administrator of your organization");const C={messages:[],origin:"portal-item",portal:a,url:m?(0,g.An)(m):void 0,writtenProperties:[]},W=t.write(void 0,C);return s.extent=yield Bt(n),s.title=t.title,yield s.update({data:W}),s})()}saveAs(t,n={}){var s=this;return(0,f.A)(function*(){if(yield s.load(),null==s.routeInfo)throw new L.A("routelayer:route-unsolved","saveAs() requires a solved route");const a=_t.default.from(t).clone();a.extent??=(yield Bt(s.fullExtent)),a.id=null,a.portal??=et.A.getDefault(),a.title??=s.title,a.type="Feature Collection",a.typeKeywords=["Data","Feature Collection",lt.mm.MULTI_LAYER,"Route Layer"];const{portal:m}=a,N={messages:[],origin:"portal-item",portal:m,url:null,writtenProperties:[]};yield m.signIn();const C=n?.folder,W=s.write(void 0,N);return yield m.user.addItem({item:a,folder:C,data:W}),s.portalItem=a,(0,$.v)(N),N.portalItem=a,a})()}solve(t,n){var s=this;return(0,f.A)(function*(){mt(s.stops),mt(s.pointBarriers),mt(s.polylineBarriers),mt(s.polygonBarriers);const a=t?.stops??s.stops,m=t?.pointBarriers??bt(s.pointBarriers),N=t?.polylineBarriers??bt(s.polylineBarriers),C=t?.polygonBarriers??bt(s.polygonBarriers);if(null==a)throw new L.A("routelayer:undefined-stops","the route layer must have stops defined in the route parameters.");if((function ur(t){return"esri.rest.support.FeatureSet"===t.declaredClass}(a)||function cr(t){return"esri.rest.support.NetworkFeatureSet"===t.declaredClass}(a))&&a.features.length<2||M.A.isCollection(a)&&a.length<2)throw new L.A("routelayer:insufficent-stops","the route layer must have two or more stops to solve a route.");if(M.A.isCollection(a))for(const te of a)te.routeName=null;const W=t?.apiKey,{checksum:ae,url:pe}=s,B=yield s._getServiceDescription(pe,W,n),H=t?.travelMode??B.defaultTravelMode,oe=t?.accumulateAttributes??[];H&&(oe.push(H.distanceAttributeName),H.timeAttributeName&&oe.push(H.timeAttributeName));const de={accumulateAttributes:oe,checksum:ae,directionsOutputType:"featuresets",ignoreInvalidLocations:!0,pointBarriers:m,polylineBarriers:N,polygonBarriers:C,preserveObjectID:!0,returnBarriers:!!m,returnDirections:!0,returnPolygonBarriers:!!C,returnPolylineBarriers:!!N,returnRoutes:!0,returnStops:!0,stops:a},se=rr.from(t??{});let le;se.set(de);try{le=yield function kt(t,n,s){return At.apply(this,arguments)}(pe,se,n)}catch(te){throw(0,u.zf)(te)?te:new L.A("routelayer:failed-route-request","the routing request failed",{error:te})}const J=s._toRouteLayerSolution(le);return s._isOverridden("title")||(s.title=J.routeInfo.name??"Route"),function pr(t,n,s){const a=n.networkDataset?.networkAttributes,m=a?.filter(({usageType:Z})=>"cost"===Z)??[],N=s.travelMode??n.defaultTravelMode;if(null==N)return void Ut().warn("route-layer:missing-travel-mode","The routing service must have a default travel mode or one must be specified in the route parameter.");const{timeAttributeName:C,distanceAttributeName:W}=N,ae=m.find(({name:Z})=>Z===C),pe=m.find(({name:Z})=>Z===W),B=s.travelMode?.impedanceAttributeName??s.impedanceAttribute??n.impedance,H=ae?.units,oe=pe?.units;if(!H||!oe)throw new L.A("routelayer:unknown-impedance-units","the units of either the distance or time impedance are unknown");const de=s.directionsLanguage??n.directionsLanguage,se=s.accumulateAttributes??n.accumulateAttributeNames??[],le=new Set(m.filter(({name:Z})=>Z===C||Z===W||Z===B||null!=Z&&se.includes(Z)).map(({name:Z})=>Z)),J=Z=>{for(const Zt in Z)le.has(Zt)||delete Z[Zt]};for(const Z of t.pointBarriers)null!=Z.costs&&(Z.addedCost=Z.costs[B]??0,J(Z.costs));for(const Z of t.polygonBarriers)null!=Z.costs&&(Z.scaleFactor=Z.costs[B]??1,J(Z.costs));for(const Z of t.polylineBarriers)null!=Z.costs&&(Z.scaleFactor=Z.costs[B]??1,J(Z.costs));const{routeInfo:te}=t,{findBestSequence:X,preserveFirstStop:ye,preserveLastStop:ce,startTimeIsUTC:Te,timeWindowsAreUTC:Fe}=s;te.analysisSettings=new lr.A({accumulateAttributes:se,directionsLanguage:de,findBestSequence:X,preserveFirstStop:ye,preserveLastStop:ce,startTimeIsUTC:Te,timeWindowsAreUTC:Fe,travelMode:N}),te.totalDuration=Xe(te.totalCosts?.[C]??0,H),te.totalDistance=wt(te.totalCosts?.[W]??0,oe),te.totalLateDuration=Xe(te.totalViolations?.[C]??0,H),te.totalWaitDuration=Xe(te.totalWait?.[C]??0,H),null!=te.totalCosts&&J(te.totalCosts),null!=te.totalViolations&&J(te.totalViolations),null!=te.totalWait&&J(te.totalWait);for(const Z of t.stops)null!=Z.serviceCosts&&(Z.serviceDuration=Xe(Z.serviceCosts[C]??0,H),Z.serviceDistance=wt(Z.serviceCosts[W]??0,oe),J(Z.serviceCosts)),null!=Z.cumulativeCosts&&(Z.cumulativeDuration=Xe(Z.cumulativeCosts[C]??0,H),Z.cumulativeDistance=wt(Z.cumulativeCosts[W]??0,oe),J(Z.cumulativeCosts)),null!=Z.violations&&(Z.lateDuration=Xe(Z.violations[C]??0,H),J(Z.violations)),null!=Z.wait&&(Z.waitDuration=Xe(Z.wait[C]??0,H),J(Z.wait))}(J,B,se),J})()}update(t){const{checksum:n,directionLines:s,directionPoints:a,pointBarriers:m,polygonBarriers:N,polylineBarriers:C,routeInfo:W,stops:ae}=t;ht(ae,this.stops)?function hr(t,n){for(const s of t){const a=n.find(m=>m.objectId===s.objectId);a&&(a.arriveCurbApproach=s.arriveCurbApproach,a.arriveTime=s.arriveTime,a.arriveTimeOffset=s.arriveTimeOffset,a.cumulativeCosts=s.cumulativeCosts,a.cumulativeDistance=s.cumulativeDistance,a.cumulativeDuration=s.cumulativeDuration,a.curbApproach=s.curbApproach,a.departCurbApproach=s.departCurbApproach,a.departTime=s.departTime,a.departTimeOffset=s.departTimeOffset,a.distanceToNetworkInMeters=s.distanceToNetworkInMeters,a.geometry=s.geometry,a.lateDuration=s.lateDuration,a.name=s.name,a.navLatency=s.navLatency,a.posAlong=s.posAlong,a.routeName=s.routeName,a.serviceCosts=s.serviceCosts,a.serviceDistance=s.serviceDistance,a.serviceDuration=s.serviceDuration,a.sequence=s.sequence,a.sideOfEdge=s.sideOfEdge,a.snapX=s.snapX,a.snapY=s.snapY,a.snapZ=s.snapZ,a.sourceId=s.sourceId,a.sourceOid=s.sourceOid,a.status=s.status,a.symbol=s.symbol,a.timeWindowEnd=s.timeWindowEnd,a.timeWindowStart=s.timeWindowStart,a.violations=s.violations,a.waitDuration=s.waitDuration,a.wait=s.wait)}}(ae,this.stops):this.set({stops:ae}),ht(m,this.pointBarriers)?function dr(t,n){for(const s of t){const a=n.find(m=>m.objectId===s.objectId);a&&(a.addedCost=s.addedCost,a.barrierType=s.barrierType,a.costs=s.costs,a.curbApproach=s.curbApproach,a.fullEdge=s.fullEdge,a.geometry=s.geometry,a.name=s.name,a.sideOfEdge=s.sideOfEdge,a.sourceId=s.sourceId,a.sourceOid=s.sourceOid,a.status=s.status,a.symbol=s.symbol)}}(m,this.pointBarriers):this.set({pointBarriers:m}),ht(C,this.polylineBarriers)?function yr(t,n){for(const s of t){const a=n.find(m=>m.objectId===s.objectId);a&&(a.barrierType=s.barrierType,a.costs=s.costs,a.geometry=s.geometry,a.name=s.name,a.scaleFactor=s.scaleFactor,a.symbol=s.symbol)}}(C,this.polylineBarriers):this.set({polylineBarriers:C}),ht(N,this.polygonBarriers)?function mr(t,n){for(const s of t){const a=n.find(m=>m.objectId===s.objectId);a&&(a.barrierType=s.barrierType,a.costs=s.costs,a.geometry=s.geometry,a.name=s.name,a.scaleFactor=s.scaleFactor,a.symbol=s.symbol)}}(N,this.polygonBarriers):this.set({polygonBarriers:N}),this.set({checksum:n}),this._set("directionLines",s),this._set("directionPoints",a),this._set("routeInfo",W),null!=W.geometry&&(this.spatialReference=W.geometry.spatialReference)}_getNetworkFeatures(t,n,s,a){const m=ft(t)?t.layers:t.featureCollection?.layers,N=m?.find(le=>le.layerDefinition.name===n);if(null==N)return new M.A;const{layerDefinition:C,popupInfo:W,featureSet:ae}=N,pe=C.drawingInfo.renderer,{features:B}=ae,H=ae.spatialReference??C.spatialReference??C.extent.spatialReference??Q.KK,oe=pe&&(0,vt.L)(pe),de=z.A.fromJSON(H),se=B.map(le=>{const J=E.A.fromJSON(le);null!=J.geometry&&null!=le.geometry&&null==le.geometry.spatialReference&&(J.geometry.spatialReference=de);const te=s(J);return te.symbol??=oe?.getSymbol(J)??this._getNetworkSymbol(n),te.popupTemplate??=W&&k.A.fromJSON(W),te});return a&&se.some(({symbol:le})=>!le)&&a(se),new M.A(se)}_getNetworkSymbol(t){switch(t){case"Barriers":return this.defaultSymbols.pointBarriers;case"DirectionPoints":return this.defaultSymbols.directionPoints;case"DirectionLines":return this.defaultSymbols.directionLines;case"PolylineBarriers":return this.defaultSymbols.polylineBarriers;case"PolygonBarriers":return this.defaultSymbols.polygonBarriers;case"RouteInfo":return this.defaultSymbols.routeInfo;case"Stops":return null}}_getServiceDescription(t,n,s){var a=this;return(0,f.A)(function*(){if(null!=a._cachedServiceDescription&&a._cachedServiceDescription.url===t)return a._cachedServiceDescription.serviceDescription;const m=yield be(t,n,s);return a._cachedServiceDescription={serviceDescription:m,url:t},m})()}_setStopSymbol(t){if(!t||!t.length||!this.defaultSymbols.stops||t.every(({symbol:B})=>!!B))return;const{first:n,last:s,middle:a,unlocated:m,waypoint:N,break:C}=this.defaultSymbols.stops;if(null==this.routeInfo||1===t.length)return void t.forEach((B,H)=>{switch(H){case 0:B.symbol=n;break;case t.length-1:B.symbol=s;break;default:B.symbol=a}});const W=t.map(({sequence:B})=>B).filter(B=>null!=B),ae=Math.min(...W),pe=Math.max(...W);for(const B of t)B.symbol=B.sequence!==ae?B.sequence!==pe?"ok"===B.status||"not-located-on-closest"===B.status?"waypoint"!==B.locationType?"break"!==B.locationType?a:C:N:m:s:n}_toRouteLayerSolution(t){const{checksum:n,routeResults:s}=t,a=s[0].stops?.map(H=>nt.A.fromJSON(H.toJSON()));this._setStopSymbol(a);const m=new Nt(a),N=new Rt(t.polygonBarriers?.map(H=>{const oe=ot.A.fromJSON(H.toJSON());return oe.symbol=this.defaultSymbols.polygonBarriers,oe})),C=new jt(t.polylineBarriers?.map(H=>{const oe=st.A.fromJSON(H.toJSON());return oe.symbol=this.defaultSymbols.polylineBarriers,oe})),W=new Dt(t.pointBarriers?.map(H=>{const oe=rt.A.fromJSON(H.toJSON());return oe.symbol=this.defaultSymbols.pointBarriers,oe})),ae=s[0].route?.toJSON(),pe=Et.A.fromJSON(ae);pe.symbol=this.defaultSymbols.routeInfo;const B=new vr(s[0].directionPoints?.features.map(H=>{const oe=pt.A.fromJSON(H.toJSON());return oe.symbol=this.defaultSymbols.directionPoints,oe}));return{checksum:n,directionLines:new _r(s[0].directionLines?.features.map(H=>{const oe=ct.A.fromJSON(H.toJSON());return oe.symbol=this.defaultSymbols.directionLines,oe})),directionPoints:B,pointBarriers:W,polygonBarriers:N,polylineBarriers:C,routeInfo:pe,stops:m}}_writeDirectionLines(){return this._writeNetworkFeatures(this.directionLines,this.defaultSymbols.directionLines,"esriGeometryPolyline",ct.A.fields,"DirectionLines","Direction Lines")}_writeDirectionPoints(){return this._writeNetworkFeatures(this.directionPoints,this.defaultSymbols.directionPoints,"esriGeometryPoint",pt.A.fields,"DirectionPoints","Direction Points")}_writeNetworkFeatures(t,n,s,a,m,N){if(!t?.length)return null;const C=this.spatialReference.toJSON(),{fullExtent:W,maxScale:ae,minScale:pe}=this;return{featureSet:{features:t.toArray().map(B=>function fr(t){const{attributes:n,geometry:s,popupTemplate:a,symbol:m}=t.toGraphic().toJSON();return{attributes:n,geometry:s,popupInfo:a,symbol:m}}(B)),geometryType:s,spatialReference:C},layerDefinition:{capabilities:"Query,Update,Editing",drawingInfo:{renderer:{type:"simple",symbol:null!=n?n.toJSON():Ot(s)}},extent:W.toJSON(),fields:a,geometryType:s,hasM:!1,hasZ:!1,maxScale:ae,minScale:pe,name:m,objectIdField:"ObjectID",spatialReference:C,title:N,type:"Feature Layer",typeIdField:""}}}_writePointBarriers(){return this._writeNetworkFeatures(this.pointBarriers,this.defaultSymbols.pointBarriers,"esriGeometryPoint",rt.A.fields,"Barriers","Point Barriers")}_writePolygonBarriers(){return this._writeNetworkFeatures(this.polygonBarriers,this.defaultSymbols.polygonBarriers,"esriGeometryPolygon",ot.A.fields,"PolygonBarriers","Polygon Barriers")}_writePolylineBarriers(){return this._writeNetworkFeatures(this.polylineBarriers,this.defaultSymbols.polylineBarriers,"esriGeometryPolyline",st.A.fields,"PolylineBarriers","Line Barriers")}_writeRouteInfo(){return this._writeNetworkFeatures(null!=this.routeInfo?new M.A([this.routeInfo]):null,this.defaultSymbols.routeInfo,"esriGeometryPolyline",Et.A.fields,"RouteInfo","Route Details")}_writeStops(){const t=this._writeNetworkFeatures(this.stops,null,"esriGeometryPoint",nt.A.fields,"Stops","Stops");if(null==t)return null;const{stops:n}=this.defaultSymbols,s=n?.first?.toJSON(),a=n?.middle?.toJSON(),m=n?.last?.toJSON();return t.layerDefinition.drawingInfo.renderer={type:"uniqueValue",field1:"Sequence",defaultSymbol:a,uniqueValueInfos:[{value:"1",symbol:s,label:"First Stop"},{value:`${this.stops.length}`,symbol:m,label:"Last Stop"}]},t}};(0,e._)([(0,r.MZ)({readOnly:!0,json:{read:!1,origins:{"portal-item":{write:{allowNull:!0,ignoreOrigin:!0}},"web-map":{write:{overridePolicy(){return{allowNull:!0,ignoreOrigin:null==this.portalItem}}}}}}})],re.prototype,"_featureCollection",void 0),(0,e._)([(0,v.K)(["web-map","portal-item"],"_featureCollection")],re.prototype,"writeFeatureCollectionWebmap",null),(0,e._)([(0,r.MZ)({readOnly:!0,json:{read:!1,origins:{"web-map":{write:{target:"type",overridePolicy(){return{ignoreOrigin:null!=this.portalItem}}}}}}})],re.prototype,"_type",void 0),(0,e._)([(0,r.MZ)({type:String})],re.prototype,"checksum",void 0),(0,e._)([(0,r.MZ)({nonNullable:!0,type:at})],re.prototype,"defaultSymbols",void 0),(0,e._)([(0,r.MZ)({readOnly:!0})],re.prototype,"directionLines",void 0),(0,e._)([(0,O.w)(["web-map","portal-item"],"directionLines",["layers","featureCollection.layers"])],re.prototype,"readDirectionLines",null),(0,e._)([(0,r.MZ)({readOnly:!0})],re.prototype,"directionPoints",void 0),(0,e._)([(0,O.w)(["web-map","portal-item"],"directionPoints",["layers","featureCollection.layers"])],re.prototype,"readDirectionPoints",null),(0,e._)([(0,r.MZ)({readOnly:!0,json:{read:!1,origins:{"web-map":{write:{ignoreOrigin:!0}}}}})],re.prototype,"featureCollectionType",void 0),(0,e._)([(0,r.MZ)({readOnly:!0})],re.prototype,"fullExtent",null),(0,e._)([(0,r.MZ)({json:{origins:{"web-map":{name:"featureCollection.showLegend"}},write:!0}})],re.prototype,"legendEnabled",void 0),(0,e._)([(0,r.MZ)({type:["show","hide"]})],re.prototype,"listMode",void 0),(0,e._)([(0,r.MZ)({type:Number,nonNullable:!0,json:{write:!1}})],re.prototype,"maxScale",void 0),(0,e._)([(0,O.w)(["web-map","portal-item"],"maxScale",["layers","featureCollection.layers"])],re.prototype,"readMaxScale",null),(0,e._)([(0,r.MZ)({type:Number,nonNullable:!0,json:{write:!1}})],re.prototype,"minScale",void 0),(0,e._)([(0,O.w)(["web-map","portal-item"],"minScale",["layers","featureCollection.layers"])],re.prototype,"readMinScale",null),(0,e._)([(0,r.MZ)({type:["ArcGISFeatureLayer"],value:"ArcGISFeatureLayer"})],re.prototype,"operationalLayerType",void 0),(0,e._)([(0,r.MZ)({nonNullable:!0,type:M.A.ofType(rt.A)})],re.prototype,"pointBarriers",void 0),(0,e._)([(0,O.w)(["web-map","portal-item"],"pointBarriers",["layers","featureCollection.layers"])],re.prototype,"readPointBarriers",null),(0,e._)([(0,r.MZ)({nonNullable:!0,type:M.A.ofType(ot.A)})],re.prototype,"polygonBarriers",void 0),(0,e._)([(0,O.w)(["web-map","portal-item"],"polygonBarriers",["layers","featureCollection.layers"])],re.prototype,"readPolygonBarriers",null),(0,e._)([(0,r.MZ)({nonNullable:!0,type:M.A.ofType(st.A)})],re.prototype,"polylineBarriers",void 0),(0,e._)([(0,O.w)(["web-map","portal-item"],"polylineBarriers",["layers","featureCollection.layers"])],re.prototype,"readPolylineBarriers",null),(0,e._)([(0,r.MZ)({readOnly:!0})],re.prototype,"routeInfo",void 0),(0,e._)([(0,O.w)(["web-map","portal-item"],"routeInfo",["layers","featureCollection.layers"])],re.prototype,"readRouteInfo",null),(0,e._)([(0,r.MZ)({type:z.A})],re.prototype,"spatialReference",void 0),(0,e._)([(0,O.w)(["web-map","portal-item"],"spatialReference",["layers","featureCollection.layers"])],re.prototype,"readSpatialReference",null),(0,e._)([(0,r.MZ)({nonNullable:!0,type:M.A.ofType(nt.A)})],re.prototype,"stops",void 0),(0,e._)([(0,O.w)(["web-map","portal-item"],"stops",["layers","featureCollection.layers"])],re.prototype,"readStops",null),(0,e._)([(0,r.MZ)()],re.prototype,"title",null),(0,e._)([(0,r.MZ)({readOnly:!0,json:{read:!1}})],re.prototype,"type",void 0),(0,e._)([(0,r.MZ)()],re.prototype,"url",null),re=(0,e._)([(0,A.$)(xt)],re);const gr=re},72211:(he,Y,o)=>{o.d(Y,{LF:()=>k,M9:()=>M,zu:()=>l});var f=o(5922),e=o(89221),K=o(79845),E=o(26073);function k(d,g,r){try{return function V(d){if(!d||0===d.length)return null;if(function x(d){const g=d[0];return!!g&&"scale"in g}(d)){const g=[];for(const r of d)g.push({scale:r.scale,value:l(r.value)});return g}return l(d)}(d)}catch(_){r?.messages?.push(_)}return null}function M(d,g,r,_){try{const w=function L(d){const g=(0,K.q)(d);return g?(0,E.dw)(g)?g.map(r=>r.toJSON()):g.map(({scale:r,effects:_})=>({scale:r,value:_.map(w=>w.toJSON())})):null}(d);(0,e.sM)(r,w,g)}catch(w){_.messages&&_.messages.push(w)}}function l(d){if(!d?.length)return"";const g=[];for(const r of d){let _=[];switch(r.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":_=[u(r,"amount")];break;case"blur":_=[u(r,"radius","pt")];break;case"hue-rotate":_=[u(r,"angle","deg")];break;case"drop-shadow":_=[u(r,"xoffset","pt"),u(r,"yoffset","pt"),u(r,"blurRadius","pt"),p(r,"color")];break;case"bloom":_=[u(r,"strength"),u(r,"radius","pt"),u(r,"threshold")]}const w=`${r.type}(${_.filter(Boolean).join(" ")})`;(0,K.q)(w),g.push(w)}return g.join(" ")}function u(d,g,r){if(null==d[g])throw new f.A("effect:missing-parameter",`Missing parameter '${g}' in ${d.type} effect`,{effect:d});return r?d[g]+r:""+d[g]}function p(d,g){if(null==d[g])throw new f.A("effect:missing-parameter",`Missing parameter '${g}' in ${d.type} effect`,{effect:d});const r=d[g];return`rgba(${r[0]||0}, ${r[1]||0}, ${r[2]||0}, ${r[3]/255||0})`}},93410:(he,Y,o)=>{o.d(Y,{LF:()=>u,dM:()=>p,sU:()=>x});var f=o(8189),e=o(85211),M=(o(3248),o(35150),o(40707),o(76576)),L=o(50501),V=o(72211);const x={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:{layerContainerTypes:L.K}},"portal-item":{read:!0,write:{layerContainerTypes:L.K}}}}},l={read:{reader:V.LF},write:{allowNull:!0,writer:V.M9,layerContainerTypes:L.K}},u={json:{read:!1,write:!1,origins:{"web-map":l,"portal-item":l}}},p=d=>{let g=class extends d{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return(0,f._)([(0,e.MZ)(x)],g.prototype,"blendMode",void 0),(0,f._)([(0,e.MZ)(u)],g.prototype,"effect",void 0),g=(0,f._)([(0,M.$)("esri.layers.mixins.BlendLayer")],g),g}},17049:(he,Y,o)=>{o.d(Y,{q:()=>v});var f=o(8189),e=o(5922),K=o(45272),E=o(85211),k=o(55739),V=(o(3248),o(40707),o(17221)),x=o(76576),l=o(50305),u=o(50501),p=o(34813),d=o(56558);const g={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},r={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},_={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},w={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,Object3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":g,"web-map/basemap":r,"web-map/tables":_,"link-chart/operational-layers":{...g,LinkChartLayer:!0},"link-chart/basemap":r,"link-chart/tables":_,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0,WCS:!0},"portal-item/tables":{ArcGISFeatureLayer:!0,SubtypeGroupTable:!0}};var O=o(22329),A=o(17181);const v=ie=>{let D=class extends ie{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(G,z,Q){return"Group Layer"===Q?.portalItem?.type?void 0:G}writeListMode(G,z,Q,P){(P&&"ground"===P.layerContainerType||G&&(0,d.R)(this,Q,{},P))&&(z[Q]=G)}writeOperationalLayerType(G,z,Q){G&&(z[Q]=G)}writeTitle(G,z){z.title=G??"Layer"}readVisibilityTimeExtent(G){return G?A.A.fromArray(G):null}writeVisibilityTimeExtent(G,z,Q,P){G&&"tables"!==P.layerContainerType&&(G.isEmpty?P?.messages&&P.messages.push(new e.A("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):z[Q]=G.toArray())}read(G,z){z&&(z.layer=this),(0,p.t)(this,G,Q=>super.read(G,Q),z)}write(G,z){if(!this.persistenceEnabled&&!z?.ignorePersistenceEnabled)return null;if(z?.origin){const R=`${z.origin}/${z.layerContainerType||"operational-layers"}`;let y=!!w[R]?.[this.operationalLayerType];if("ArcGISTiledElevationServiceLayer"===this.operationalLayerType&&"web-scene/operational-layers"===R&&(y=!1),"ArcGISDimensionLayer"===this.operationalLayerType&&"web-map/operational-layers"===R&&(y=!1),!y)return z.messages?.push(new e.A("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${R}'`,{layer:this})),null}const Q=super.write(G,{...z,layer:this}),P=!!z&&!!z.messages&&!!z.messages.filter(R=>R instanceof e.A&&"web-document-write:property-required"===R.name).length;return(0,K.w8)(Q?.url)?(z?.messages?.push(new e.A("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&P?null:Q}beforeSave(){}};return(0,f._)([(0,E.MZ)({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],D.prototype,"id",void 0),(0,f._)([(0,V.w)("id",["id"])],D.prototype,"readId",null),(0,f._)([(0,E.MZ)(O.C1)],D.prototype,"listMode",void 0),(0,f._)([(0,l.K)("listMode")],D.prototype,"writeListMode",null),(0,f._)([(0,E.MZ)({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:u.K,isRequired:!0}}}}})],D.prototype,"operationalLayerType",void 0),(0,f._)([(0,l.K)("operationalLayerType")],D.prototype,"writeOperationalLayerType",null),(0,f._)([(0,E.MZ)(O.ke)],D.prototype,"opacity",void 0),(0,f._)([(0,E.MZ)({type:Boolean,readOnly:!1})],D.prototype,"persistenceEnabled",void 0),(0,f._)([(0,E.MZ)({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],D.prototype,"title",void 0),(0,f._)([(0,l.K)("title"),(0,l.K)(["web-scene"],"title")],D.prototype,"writeTitle",null),(0,f._)([(0,E.MZ)({type:A.A,json:{origins:{"web-scene":{write:{layerContainerTypes:u.K}}}}})],D.prototype,"visibilityTimeExtent",void 0),(0,f._)([(0,V.w)("visibilityTimeExtent")],D.prototype,"readVisibilityTimeExtent",null),(0,f._)([(0,l.K)(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[k.jz,k.Uv]]}})],D.prototype,"writeVisibilityTimeExtent",null),(0,f._)([(0,E.MZ)({type:Boolean,json:{name:"visibility",write:{layerContainerTypes:u.K}}})],D.prototype,"visible",void 0),D=(0,f._)([(0,x.$)("esri.layers.mixins.OperationalLayer")],D),D}},85551:(he,Y,o)=>{o.d(Y,{A:()=>D});var f=o(10467),e=o(8189),K=o(23098),E=o(77469),k=o(89563),M=o(89447),L=o(5922),V=o(35150),x=o(11432),l=o(56492),u=o(45272),p=o(85211),r=(o(3248),o(40707),o(17221)),_=o(76576),w=o(50305),O=o(58443),A=o(73874),v=o(46577),$=o(52606),ie=o(69927);const D=z=>{let Q=class extends z{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=(0,x.pR)(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(P){P!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",P))}readPortalItem(P,R,c){if(R.itemId)return new v.default({id:R.itemId,portal:c?.portal})}writePortalItem(P,R){P?.id&&(R.itemId=P.id)}loadFromPortal(P,R){var c=this;return(0,f.A)(function*(){if(c.portalItem?.id)try{const{load:y}=yield Promise.all([o.e(2076),o.e(6180)]).then(o.bind(o,56180));return(0,l.Te)(R),yield y({instance:c,supportedTypes:P.supportedTypes,validateItem:P.validateItem,supportsData:P.supportsData,layerModuleTypeMap:P.layerModuleTypeMap,populateGroupLayer:P.populateGroupLayer},R)}catch(y){throw(0,l.zf)(y)||V.A.getLogger(c).warn(`Failed to load layer (${c.title}, ${c.id}) portal item (${c.portalItem.id})\n  ${y}`),y}})()}finishLoadEditablePortalLayer(P){var R=this;return(0,f.A)(function*(){R._set("userHasEditingPrivileges",yield R._fetchUserHasEditingPrivileges(P).catch(c=>((0,l.QP)(c),!0)))})()}setUserPrivileges(P,R){var c=this;return(0,f.A)(function*(){if(!K.A.userPrivilegesApplied)return c.finishLoadEditablePortalLayer(R);if(c.url)try{const{features:{edit:y,fullEdit:T},content:{updateItem:U}}=yield c._fetchUserPrivileges(P,R);c._set("userHasEditingPrivileges",y),c._set("userHasFullEditingPrivileges",T),c._set("userHasUpdateItemPrivileges",U)}catch(y){(0,l.QP)(y)}})()}_fetchUserPrivileges(P,R){var c=this;return(0,f.A)(function*(){let y=c.portalItem;if(!P||!y||!y.loaded||y.sourceUrl)return c._fetchFallbackUserPrivileges(R);const T=!E.id?.findCredential(c.url),U=P===y.id;if(U&&y.portal.user)return c._getUserPrivileges(y,T);let F,q;if(U)F=y.portal.url;else try{F=yield(0,O.wI)(c.url,R)}catch(ve){(0,l.QP)(ve)}if(!F||!(0,u.b8)(F,y.portal.url))return c._fetchFallbackUserPrivileges(R);try{const ve=null!=R?R.signal:null;q=yield E.id?.getCredential(`${F}/sharing`,{prompt:!1,signal:ve})}catch(ve){(0,l.QP)(ve)}if(!q)return{features:{edit:!0,fullEdit:!1},content:{updateItem:!1}};try{if(U?yield y.reload():(y=new v.default({id:P,portal:{url:F}}),yield y.load(R)),y.portal.user)return c._getUserPrivileges(y,T)}catch(ve){(0,l.QP)(ve)}return{features:{edit:!0,fullEdit:!1},content:{updateItem:!1}}})()}_getUserPrivileges(P,R){const c=(0,ie.It)(P);return R&&(c.features.edit=!0),c}_fetchFallbackUserPrivileges(P){var R=this;return(0,f.A)(function*(){let c=!0;try{c=yield R._fetchUserHasEditingPrivileges(P)}catch(y){(0,l.QP)(y)}return{features:{edit:c,fullEdit:!1},content:{updateItem:!1}}})()}_fetchUserHasEditingPrivileges(P){var R=this;return(0,f.A)(function*(){const c=R.url?E.id?.findCredential(R.url):null;if(!c)return!0;const y=G.credential===c?G.user:yield R._fetchEditingUser(P);return G.credential=c,G.user=y,null==y?.privileges||y.privileges.includes("features:user:edit")})()}_fetchEditingUser(P){var R=this;return(0,f.A)(function*(){const c=R.portalItem?.portal?.user;if(c)return c;const y=E.id?.findServerInfo(R.url??"");if(!y?.owningSystemUrl)return null;const T=`${y.owningSystemUrl}/sharing/rest`,U=A.A.getDefault();if(U&&U.loaded&&(0,u.S8)(U.restUrl)===(0,u.S8)(T))return U.user;const F=`${T}/community/self`,q=null!=P?P.signal:null,ne=yield(0,M.Ke)((0,k.A)(F,{authMode:"no-prompt",query:{f:"json"},signal:q}));return ne.ok?$.A.fromJSON(ne.value.data):null})()}read(P,R){R&&(R.layer=this),super.read(P,R)}write(P,R){const c=R?.portal,y=this.portalItem?.id&&(this.portalItem.portal||A.A.getDefault());return c&&y&&!(0,u.ut)(y.restUrl,c.restUrl)?(R.messages&&R.messages.push(new L.A("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(P,{...R,layer:this})}};return(0,e._)([(0,p.MZ)({type:v.default})],Q.prototype,"portalItem",null),(0,e._)([(0,r.w)("web-document","portalItem",["itemId"])],Q.prototype,"readPortalItem",null),(0,e._)([(0,w.K)("web-document","portalItem",{itemId:{type:String}})],Q.prototype,"writePortalItem",null),(0,e._)([(0,p.MZ)({clonable:!1})],Q.prototype,"resourceReferences",void 0),(0,e._)([(0,p.MZ)({type:Boolean,readOnly:!0})],Q.prototype,"userHasEditingPrivileges",void 0),(0,e._)([(0,p.MZ)({type:Boolean,readOnly:!0})],Q.prototype,"userHasFullEditingPrivileges",void 0),(0,e._)([(0,p.MZ)({type:Boolean,readOnly:!0})],Q.prototype,"userHasUpdateItemPrivileges",void 0),Q=(0,e._)([(0,_.$)("esri.layers.mixins.PortalLayer")],Q),Q},G={credential:null,user:null}},33036:(he,Y,o)=>{o.d(Y,{j:()=>L});var f=o(8189),e=o(85211),M=(o(3248),o(35150),o(40707),o(76576));const L=x=>{let l=class extends x{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const u={minScale:this.minScale,maxScale:this.maxScale},p=this.parent;p&&"effectiveScaleRange"in p&&function V(x,l){x.minScale=x.minScale>0?l.minScale>0?Math.min(x.minScale,l.minScale):x.minScale:l.minScale,x.maxScale=x.maxScale>0?l.maxScale>0?Math.max(x.maxScale,l.maxScale):x.maxScale:l.maxScale}(u,p.effectiveScaleRange);const d=this._get("effectiveScaleRange");return d&&d.minScale===u.minScale&&d.maxScale===u.maxScale?d:u}};return(0,f._)([(0,e.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],l.prototype,"minScale",void 0),(0,f._)([(0,e.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],l.prototype,"maxScale",void 0),(0,f._)([(0,e.MZ)({readOnly:!0})],l.prototype,"effectiveScaleRange",null),l=(0,f._)([(0,M.$)("esri.layers.mixins.ScaleRangeLayer")],l),l}},73258:(he,Y,o)=>{o.d(Y,{A:()=>g});var f=o(5922),e=o(71065),K=o(35150),E=o(60797),k=o(24098),M=o(86300),L=o(20543),V=o(22639),x=o(44549);const d=new Map;class g{static fromJSON(v){return new g(v.fields,v.timeZoneByFieldName)}static fromLayer(v){return new g(v.fields??[],O(v))}static fromLayerJSON(v){return new g(v.fields??[],O(v))}constructor(v=[],$){this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=v||[],this._timeZoneByFieldName=$?new Map($):null;const ie=[];for(const D of this.fields){const G=D?.name,z=_(G);if(G&&z){const Q=r(G);this._fieldsMap.set(G,D),this._fieldsMap.set(Q,D),this._normalizedFieldsMap.set(z,D),ie.push(`${Q}:${D.type}:${this._timeZoneByFieldName?.get(G)}`),(0,M.vE)(D)?(this.dateFields.push(D),this._dateFieldsSet.add(D)):(0,M.WA)(D)&&(this._numericFieldsSet.add(D),this.numericFields.push(D)),(0,M.te)(D)||(0,M.Xz)(D)||(D.editable=null==D.editable||!!D.editable,D.nullable=null==D.nullable||!!D.nullable)}}ie.sort(),this.uid=ie.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const v of this.fields)(0,M.te)(v)||(0,M.Xz)(v)||v.nullable||void 0!==(0,M.lD)(v)||this._requiredFields.push(v)}return this._requiredFields}equals(v){return this.uid===v?.uid}has(v){return null!=this.get(v)}get(v){if(!v)return;let $=this._fieldsMap.get(v);return $||($=this._fieldsMap.get(r(v))??this._normalizedFieldsMap.get(_(v)),$&&this._fieldsMap.set(v,$),$)}getTimeZone(v){const $=this.get(v&&"string"!=typeof v?v.name:v);return $?this._timeZoneByFieldName?this._timeZoneByFieldName.get($.name):"date"===$.type||"esriFieldTypeDate"===$.type?(K.A.getLogger("esri.layers.support.FieldsIndex").errorOnce(new f.A("getTimeZone:no-timezone-information",`no time zone information for field '${$.name}'`)),L.n$):w.has($.type)?L.L5:null:null}getLuxonTimeZone(v){const $=this.getTimeZone(v);return $?$===L.L5?k.GB.instance:$===L.n$?x.mQ.utcInstance:(0,E.tE)(d,$,()=>x.oh.create($)):null}isDateField(v){return this._dateFieldsSet.has(this.get(v))}isTimeOnlyField(v){return(0,M.OH)(this.get(v))}isNumericField(v){return this._numericFieldsSet.has(this.get(v))}normalizeFieldName(v){return this.get(v)?.name??void 0}toJSON(){return{fields:this.fields.map(v=>e.A.isSerializable(v)?v.toJSON():v),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}function r(A){return A.trim().toLowerCase()}function _(A){return(0,M.rS)(A)?.toLowerCase()??""}const w=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function O(A){const v=new Map;if(!A.fields)return v;const $=!0===A.datesInUnknownTimezone,{timeInfo:ie,editFieldsInfo:D}=A,G=(ie?"startField"in ie?ie.startField:ie.startTimeField:"")??"",z=(ie?"endField"in ie?ie.endField:ie.endTimeField:"")??"",Q=function p(A){return"dateFieldsTimeZone"in A}(A)?A.dateFieldsTimeZone??null:A.dateFieldsTimeReference?(0,V.ZS)(A.dateFieldsTimeReference):null,P=D?function l(A){return"timeZone"in A}(D)?D.timeZone??Q:D.dateFieldsTimeReference?(0,V.ZS)(D.dateFieldsTimeReference):Q??L.n$:null,R=ie?function u(A){return"timeZone"in A}(ie)?ie.timeZone??Q:ie.timeReference?(0,V.ZS)(ie.timeReference):Q:null,c=new Map([[r(D?.creationDateField??""),P],[r(D?.editDateField??""),P],[r(G),R],[r(z),R]]);for(const{name:y,type:T}of A.fields)if(w.has(T))v.set(y,L.L5);else if("date"!==T&&"esriFieldTypeDate"!==T)v.set(y,null);else if($)v.set(y,L.L5);else{const U=c.get(r(y??""))??Q;v.set(y,U)}return v}},69927:(he,Y,o)=>{o.d(Y,{It:()=>r,LG:()=>L,OM:()=>l,Sm:()=>u,Y:()=>V,bK:()=>x,mm:()=>g,sQ:()=>p});var f=o(10467),e=o(13970),K=o(32034),E=o(55039);function M(){return(M=(0,f.A)(function*(_){const w=_.spatialReference;if(w.isWGS84)return _.clone();if(w.isWebMercator)return(0,E.ci)(_);const O=K.A.WGS84;return yield(0,e.initializeProjection)(w,O),(0,e.project)(_,O)})).apply(this,arguments)}function L(_,w){if(!V(_,w)){const O=_.typeKeywords;O?O.push(w):_.typeKeywords=[w]}}function V(_,w){return!!_.typeKeywords?.includes(w)}function x(_){return V(_,g.HOSTED_SERVICE)}function l(_,w){const O=_.typeKeywords;if(O){const A=O.indexOf(w);A>-1&&O.splice(A,1)}}function u(_,w,O){O?L(_,w):l(_,w)}function p(_){return d.apply(this,arguments)}function d(){return d=(0,f.A)(function*(_){const w=_.clone().normalize();let O;if(w.length>1)for(const A of w)O?A.width>O.width&&(O=A):O=A;else O=w[0];return function k(_){return M.apply(this,arguments)}(O)}),d.apply(this,arguments)}const g={DEVELOPER_BASEMAP:"DeveloperBasemap",GROUP_LAYER_MAP:"Map",HOSTED_SERVICE:"Hosted Service",JSAPI:"ArcGIS API for JavaScript",LOCAL_SCENE:"ViewingMode-Local",METADATA:"Metadata",MULTI_LAYER:"Multilayer",ORIENTED_IMAGERY_LAYER:"OrientedImageryLayer",SINGLE_LAYER:"Singlelayer",SUBTYPE_GROUP_LAYER:"SubtypeGroupLayer",SUBTYPE_GROUP_TABLE:"SubtypeGroupTable",TABLE:"Table",TILED_IMAGERY:"Tiled Imagery"};function r(_){const{portal:w,isOrgItem:O,itemControl:A}=_,v=w.user?.privileges;let $=!v||v.includes("features:user:edit"),ie=!!O&&!!v?.includes("features:user:fullEdit");const D="update"===A||"admin"===A;return D?ie=$=!0:ie&&($=!0),{features:{edit:$,fullEdit:ie},content:{updateItem:D}}}},79122:(he,Y,o)=>{o.d(Y,{A:()=>R});var $,f=o(10467),e=o(8189),K=o(49976),E=o(77806),k=o(35150),M=o(85211),L=o(48669),V=o(15463),x=o(17221),l=o(76576),u=o(50305),p=o(55739),d=o(86300),g=o(38582),r=o(18550),_=o(19390),w=o(36345),O=o(23005),A=o(48218),v=o(94048);const D="percent-of-total",G="field",z=new K.J({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:D,esriNormalizeByField:G}),Q=(0,p.dp)(_.A);let P=$=class extends((0,r.h)(g.A)){constructor(c){super(c),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(c,y,T){if(!Array.isArray(c))return;let U=y.minValue;return c.map(F=>{const q=new _.A;return q.read(F,T),null==q.minValue&&(q.minValue=U),null==q.maxValue&&(q.maxValue=q.minValue),U=q.maxValue,q})}writeClassBreakInfos(c,y,T,U){const F=c.map(q=>q.write({},U));this._areClassBreaksConsecutive()&&F.forEach(q=>delete q.classMinValue),y[T]=F}castField(c){return null==c?c:"function"==typeof c?(k.A.getLogger(this).error(".field: field must be a string value"),null):(0,p.GX)(c)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let c=this._get("normalizationType");const y=!!this.normalizationField,T=null!=this.normalizationTotal;return y||T?(c=y&&G||T&&D||null,y&&T&&k.A.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):c!==G&&c!==D||(c=null),c}set normalizationType(c){this._set("normalizationType",c)}addClassBreakInfo(c,y,T){let U=null;U="number"==typeof c?new _.A({minValue:c,maxValue:y,symbol:(0,v.dp)(T)}):Q((0,E.o8)(c)),this.classBreakInfos.push(U),1===this.classBreakInfos.length&&this.notifyChange("minValue")}removeClassBreakInfo(c,y){const T=this.classBreakInfos.length;for(let U=0;U<T;U++){const F=[this.classBreakInfos[U].minValue,this.classBreakInfos[U].maxValue];if(F[0]===c&&F[1]===y){this.classBreakInfos.splice(U,1);break}}}getBreakIndex(c,y){return this.valueExpression&&null==y?.arcade&&k.A.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(c,y):this._getBreakIndexForField(c)}getClassBreakInfo(c,y){var T=this;return(0,f.A)(function*(){let U=y;T.valueExpression&&null==y?.arcade&&(U={...U,arcade:yield(0,A.lw)()});const F=T.getBreakIndex(c,U);return-1!==F?T.classBreakInfos[F]:null})()}getSymbol(c,y){if(this.valueExpression&&null==y?.arcade)return void k.A.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const T=this.getBreakIndex(c,y);return T>-1?this.classBreakInfos[T].symbol:this.defaultSymbol}getSymbolAsync(c,y){var T=this;return(0,f.A)(function*(){let U=y;if(T.valueExpression&&null==y?.arcade){const q=yield(0,A.lw)(),{arcadeUtils:ne}=q;ne.hasGeometryOperations(T.valueExpression)&&(yield ne.enableGeometryOperations()),U={...U,arcade:q}}const F=T.getBreakIndex(c,U);return F>-1?T.classBreakInfos[F].symbol:T.defaultSymbol})()}get symbols(){const c=[];return this.classBreakInfos.forEach(y=>{y.symbol&&c.push(y.symbol)}),this.defaultSymbol&&c.push(this.defaultSymbol),c}getAttributeHash(){return this.visualVariables?.reduce((c,y)=>c+y.getAttributeHash(),"")??""}getMeshHash(){const c=JSON.stringify(this.backgroundFillSymbol),y=JSON.stringify(this.defaultSymbol),T=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${c}.${y}.${this.classBreakInfos.reduce((U,F)=>U+F.getMeshHash(),"")}.${T}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new $({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol?.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol?.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:(0,E.o8)(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:(0,E.o8)(this.visualVariables),legendOptions:(0,E.o8)(this.legendOptions),authoringInfo:(0,E.o8)(this.authoringInfo)})}collectRequiredFields(c,y){var T=this;return(0,f.A)(function*(){const U=[T.collectVVRequiredFields(c,y),T.collectSymbolFields(c,y)];yield Promise.all(U)})()}collectSymbolFields(c,y){var T=this;return(0,f.A)(function*(){const U=[...T.symbols.map(F=>F.collectRequiredFields(c,y)),(0,d.Dx)(c,y,T.valueExpression)];(0,d.rq)(c,y,T.field),(0,d.rq)(c,y,T.normalizationField),yield Promise.all(U)})()}_getBreakIndexForExpression(c,y){const{viewingMode:T,scale:U,spatialReference:F,arcade:q,timeZone:ne}=y??{},{valueExpression:_e}=this;let Le=this._compiledValueExpression.valueExpression===_e?this._compiledValueExpression.compiledFunction:null;const ve=q.arcadeUtils;if(!Le){const Ae=ve.createSyntaxTree(_e);Le=ve.createFunction(Ae),this._compiledValueExpression.compiledFunction=Le}this._compiledValueExpression.valueExpression=_e;const Ve=ve.executeFunction(Le,ve.createExecContext(c,ve.getViewInfo({viewingMode:T,scale:U,spatialReference:F}),ne));return this._getBreakIndexfromInfos(Ve)}_getBreakIndexForField(c){const T=c.attributes,U=this.normalizationType;let F=parseFloat(T[this.field]);if(U){const q=this.normalizationTotal,ne=parseFloat(this.normalizationField?T[this.normalizationField]:void 0);if("log"===U)F=Math.log(F)*Math.LOG10E;else if(U!==D||null==q||isNaN(q)){if(U===G&&!isNaN(ne)){if(isNaN(F)||isNaN(ne))return-1;F/=ne}}else F=F/q*100}return this._getBreakIndexfromInfos(F)}_getBreakIndexfromInfos(c){const y=this.isMaxInclusive;if(null!=c&&"number"==typeof c&&!isNaN(c))for(let T=0;T<this.classBreakInfos.length;T++){const U=[this.classBreakInfos[T].minValue,this.classBreakInfos[T].maxValue];if(U[0]<=c&&(y?c<=U[1]:c<U[1]))return T}return-1}_areClassBreaksConsecutive(){const c=this.classBreakInfos,y=c.length;for(let T=1;T<y;T++)if(c[T-1].maxValue!==c[T].minValue)return!1;return!0}};(0,e._)([(0,M.MZ)(w.As)],P.prototype,"backgroundFillSymbol",void 0),(0,e._)([(0,M.MZ)({type:[_.A],json:{write:{isRequired:!0}}})],P.prototype,"classBreakInfos",void 0),(0,e._)([(0,x.w)("classBreakInfos")],P.prototype,"readClassBreakInfos",null),(0,e._)([(0,u.K)("classBreakInfos")],P.prototype,"writeClassBreakInfos",null),(0,e._)([(0,M.MZ)({type:String,json:{write:!0}})],P.prototype,"defaultLabel",void 0),(0,e._)([(0,M.MZ)(w.z4)],P.prototype,"defaultSymbol",void 0),(0,e._)([(0,M.MZ)({type:String,json:{write:!0}})],P.prototype,"field",void 0),(0,e._)([(0,L.w)("field")],P.prototype,"castField",null),(0,e._)([(0,M.MZ)({type:Boolean})],P.prototype,"isMaxInclusive",void 0),(0,e._)([(0,M.MZ)({type:O.A,json:{write:!0}})],P.prototype,"legendOptions",void 0),(0,e._)([(0,M.MZ)({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],P.prototype,"minValue",null),(0,e._)([(0,M.MZ)({type:String,json:{write:!0}})],P.prototype,"normalizationField",void 0),(0,e._)([(0,M.MZ)({type:Number,json:{write:!0}})],P.prototype,"normalizationTotal",void 0),(0,e._)([(0,M.MZ)({type:z.apiValues,value:null,json:{type:z.jsonValues,read:z.read,write:z.write}})],P.prototype,"normalizationType",null),(0,e._)([(0,V.e)({classBreaks:"class-breaks"})],P.prototype,"type",void 0),(0,e._)([(0,M.MZ)({type:String,json:{write:!0}})],P.prototype,"valueExpression",void 0),(0,e._)([(0,M.MZ)({type:String,json:{write:!0}})],P.prototype,"valueExpressionTitle",void 0),P=$=(0,e._)([(0,l.$)("esri.renderers.ClassBreaksRenderer")],P);const R=P},73747:(he,Y,o)=>{o.d(Y,{A:()=>g});var p,f=o(10467),e=o(8189),K=o(77806),E=o(85211),L=(o(3248),o(35150),o(15463)),V=o(76576),x=o(38582),l=o(18550),u=o(36345);let d=p=class extends((0,l.h)(x.A)){constructor(r){super(r),this.description=null,this.label=null,this.symbol=null,this.type="simple"}collectRequiredFields(r,_){var w=this;return(0,f.A)(function*(){yield Promise.all([w.collectSymbolFields(r,_),w.collectVVRequiredFields(r,_)])})()}collectSymbolFields(r,_){var w=this;return(0,f.A)(function*(){yield Promise.all(w.symbols.map(O=>O.collectRequiredFields(r,_)))})()}getSymbol(r,_){return this.symbol}getSymbolAsync(r,_){var w=this;return(0,f.A)(function*(){return w.symbol})()}get symbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables?.reduce((r,_)=>r+_.getAttributeHash(),"")??""}getMeshHash(){return this.symbols.reduce((r,_)=>r+JSON.stringify(_),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new p({description:this.description,label:this.label,symbol:(0,K.o8)(this.symbol),visualVariables:(0,K.o8)(this.visualVariables),authoringInfo:(0,K.o8)(this.authoringInfo)})}};(0,e._)([(0,E.MZ)({type:String,json:{write:!0}})],d.prototype,"description",void 0),(0,e._)([(0,E.MZ)({type:String,json:{write:!0}})],d.prototype,"label",void 0),(0,e._)([(0,E.MZ)(u.Wp)],d.prototype,"symbol",void 0),(0,e._)([(0,L.e)({simple:"simple"})],d.prototype,"type",void 0),d=p=(0,e._)([(0,V.$)("esri.renderers.SimpleRenderer")],d);const g=d},19390:(he,Y,o)=>{o.d(Y,{A:()=>u});var x,f=o(8189),e=o(71065),K=o(85211),L=(o(3248),o(35150),o(40707),o(76576)),V=o(36345);let l=x=class extends e.A{constructor(p){super(p),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new x({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?.clone()??null})}getMeshHash(){const p=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${p}`}};(0,f._)([(0,K.MZ)({type:String,json:{write:!0}})],l.prototype,"description",void 0),(0,f._)([(0,K.MZ)({type:String,json:{write:!0}})],l.prototype,"label",void 0),(0,f._)([(0,K.MZ)({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],l.prototype,"minValue",void 0),(0,f._)([(0,K.MZ)({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],l.prototype,"maxValue",void 0),(0,f._)([(0,K.MZ)(V.Wp)],l.prototype,"symbol",void 0),l=x=(0,f._)([(0,L.$)("esri.renderers.support.ClassBreakInfo")],l);const u=l},78592:(he,Y,o)=>{o.d(Y,{O3:()=>x,PU:()=>L,YW:()=>u,ex:()=>k,hv:()=>l,zp:()=>M});var f=o(69287),e=o(67685),K=o(53781),E=o(89141);const k=2.4;function M(p){return(0,e.PN)(p*k)}function L(p){return(0,e.Lz)(p)/k}function V(p,d,g,r){let{color:_,ratio:w}=d,{color:O,ratio:A}=g;A===w&&(1===A?w-=1e-6:A+=1e-6);const v=(0,f.qE)((r-w)/(A-w),0,1);(0,K.l)(p,_.toArray(),O.toArray(),v)}function x(p){const g=new Uint8ClampedArray(2048);if((p=p.filter(({ratio:A})=>A>=0&&A<=1).sort((A,v)=>A.ratio-v.ratio).map(({color:A,ratio:v})=>({color:A,ratio:Math.max(v,.001)}))).length<1)return g;let r=p[0],_=p[0],w=1;const O=(0,E.vt)();for(let A=0;A<512;A++){const v=(A+.5)/512;for(;v>_.ratio&&w<p.length;)r=_,_=p[w++];V(O,r,_,v),g.set(O,4*A)}return g}function l(p,d,g){const r=Math.sqrt(p**2+d**2)/g;return r>1?0:3/(Math.PI*g**2)*(1-r**2)**2}function u(p){return"function"==typeof p?p:p?d=>+d[p]:()=>1}},85718:(he,Y,o)=>{o.d(Y,{L:()=>M,r:()=>E});var f=o(96996),e=o(71224),K=o(31595);function E(L,V){return M(L,null,V)}const k=(0,e.C)({types:K.Hg});function M(L,V,x){return L?L&&(L.styleName||L.styleUrl)&&"uniqueValue"!==L.type?(x?.messages&&x.messages.push(new f.A("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+L.type+"'",{definition:L,context:x})),null):k(L,V,x):null}},32117:(he,Y,o)=>{o.d(Y,{$w:()=>w,Bu:()=>y,DW:()=>Q,FH:()=>at,FM:()=>V,G9:()=>E,GV:()=>A,Go:()=>l,K3:()=>Ae,Kn:()=>G,MM:()=>d,MO:()=>lt,Nl:()=>T,Ny:()=>v,O2:()=>U,UE:()=>F,YC:()=>_t,YF:()=>ne,ZO:()=>Le,_1:()=>R,_H:()=>ie,_W:()=>O,_d:()=>z,bs:()=>et,dI:()=>we,e6:()=>u,gQ:()=>L,iA:()=>ve,jn:()=>r,lW:()=>p,mA:()=>g,n5:()=>q,pM:()=>P,pV:()=>D,pk:()=>vt,rB:()=>We,s4:()=>K,xo:()=>c,yH:()=>$,yX:()=>gt,zb:()=>_e,zr:()=>_});var f=o(46988);function K(i,h,I,S){return function e(i){return"function"==typeof i}(i)?i(h,I,S):i}function E(i){return[i.r,i.g,i.b,i.a]}const k=" /-,\n";function M(i){let h=i.length;for(;h--;)if(!k.includes(i.charAt(h)))return!1;return!0}function L(i,h){const I=[];let S=0,ee=-1;do{if(ee=i.indexOf("[",S),ee>=S){if(ee>S){const b=i.slice(S,ee);I.push([b,null,M(b)])}if(S=ee+1,ee=i.indexOf("]",S),ee>=S){if(ee>S){const b=h[i.slice(S,ee)];b&&I.push([null,b,!1])}S=ee+1}}}while(-1!==ee);if(S<i.length){const b=i.slice(S);I.push([b,null,M(b)])}return I}function V(i,h,I,S){let ee="",b=null;for(const Ee of h){const[fe,Ce,be]=Ee;if(fe)be?b=fe:(b&&(ee+=b,b=null),ee+=fe);else{let Be=Ce;null!=I&&(Be=lt(Ce,I));const ge=i.attributes[Be];ge&&(b&&(ee+=b,b=null),ee+=ge)}}return function x(i,h){switch("string"!=typeof i&&(i=String(i)),h){case"LowerCase":return i.toLowerCase();case"Allcaps":return i.toUpperCase();default:return i}}(ee,S)}function l(i,h,I,S,ee,b,Ee=!0){const fe=h/ee,Ce=I/b,be=Math.ceil(fe/2),Be=Math.ceil(Ce/2);for(let ge=0;ge<b;ge++)for(let Me=0;Me<ee;Me++){const ze=4*(Me+(Ee?b-ge-1:ge)*ee);let Se=0,Ke=0,Je=0,Ge=0,Ie=0,ke=0,$e=0;const tt=(ge+.5)*Ce;for(let Ue=Math.floor(ge*Ce);Ue<(ge+1)*Ce;Ue++){const He=Math.abs(tt-(Ue+.5))/Be,Mt=(Me+.5)*fe,qe=He*He;for(let Ye=Math.floor(Me*fe);Ye<(Me+1)*fe;Ye++){let Pe=Math.abs(Mt-(Ye+.5))/be;const je=Math.sqrt(qe+Pe*Pe);je>=-1&&je<=1&&(Se=2*je*je*je-3*je*je+1,Se>0&&(Pe=4*(Ye+Ue*h),$e+=Se*i[Pe+3],Je+=Se,i[Pe+3]<255&&(Se=Se*i[Pe+3]/250),Ge+=Se*i[Pe],Ie+=Se*i[Pe+1],ke+=Se*i[Pe+2],Ke+=Se))}}S[ze]=Ge/Ke,S[ze+1]=Ie/Ke,S[ze+2]=ke/Ke,S[ze+3]=$e/Je}}function u(i){return i?[i[0],i[1],i[2],i[3]/255]:[0,0,0,0]}function p(i){return i.data?.symbol??null}function d(i){return"CIMVectorMarker"===i.type||"CIMPictureMarker"===i.type||"CIMBarChartMarker"===i.type||"CIMCharacterMarker"===i.type||"CIMPieChartMarker"===i.type||"CIMStackedBarChartMarker"===i.type}function g(i){return"CIMGradientStroke"===i.type||"CIMPictureStroke"===i.type||"CIMSolidStroke"===i.type}function r(i){return null!=i&&("CIMGradientFill"===i.type||"CIMHatchFill"===i.type||"CIMPictureFill"===i.type||"CIMSolidFill"===i.type||"CIMWaterFill"===i.type)}function _(i){return null!=i&&("CIMMarkerPlacementAlongLineRandomSize"===i.type||"CIMMarkerPlacementAlongLineSameSize"===i.type||"CIMMarkerPlacementAlongLineVariableSize"===i.type||"CIMMarkerPlacementAtExtremities"===i.type||"CIMMarkerPlacementAtMeasuredUnits"===i.type||"CIMMarkerPlacementAtRatioPositions"===i.type||"CIMMarkerPlacementOnLine"===i.type||"CIMMarkerPlacementOnVertices"===i.type)}const w=(i,h=0)=>null==i||isNaN(i)?h:i,O=(i,h)=>i??h,A=(i,h)=>i??h,v=i=>i.tintColor?u(i.tintColor):[255,255,255,1],$=i=>{if(!i)return!1;for(const h of i)switch(h.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function ie(){return Promise.all([o.e(3930),o.e(2076),o.e(4108)]).then(o.bind(o,27815))}function D(i){if(!i)return"normal";switch(i.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function G(i){if(!i)return"normal";switch(i.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function z(i){let h="normal",I="normal";if(i){const S=i.toLowerCase();S.includes("italic")?h="italic":S.includes("oblique")&&(h="oblique"),S.includes("bold")?I="bold":S.includes("light")&&(I="lighter")}return{style:h,weight:I}}function Q(i){return i.underline?"underline":i.strikethrough?"line-through":"none"}function P(i){if(!i)return null;switch(i.type){case"CIMPolygonSymbol":if(i.symbolLayers)for(const h of i.symbolLayers){const I=P(h);if(null!=I)return I}break;case"CIMTextSymbol":return P(i.symbol);case"CIMSolidFill":return i.color}return null}function R(i){if(i)switch(i.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const h=i.symbolLayers;if(h)for(const I of h){const S=R(I);if(null!=S)return S}break}case"CIMTextSymbol":return R(i.symbol);case"CIMSolidStroke":return i.color}}function c(i){if(i)switch(i.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(i.symbolLayers)for(const h of i.symbolLayers){const I=c(h);if(void 0!==I)return I}break;case"CIMTextSymbol":return c(i.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return i.width}}function y(i){switch(i){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function T(i){switch(i){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function U(i){return(i?Object.keys(i):[]).map(h=>({name:h,alias:h,type:"string"==typeof i[h]?"esriFieldTypeString":"esriFieldTypeDouble"}))}const F=i=>i.includes("data:image/svg+xml");function q(i){if(!i)return null;switch(i.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function ne(i){return i&&i.charAt(0).toLowerCase()+i.slice(1)}function _e(i,h,I,S,ee,b,Ee=!0){const{infos:fe}=b;let Ce=1,be=0,Be=0,ge=0,Me=1;for(const{absoluteAnchorPoint:Ke,offsetX:Je,offsetY:Ge,rotation:Ie,size:ke,frameHeight:$e,rotateClockWise:tt,scaleSymbolsProportionally:Ue}of fe)Me=Ke?1:Ce,Be=me(Je,Ge,be,Me,Be),ge=xe(Je,Ge,be,Me,ge),$e&&(Ue||Ee)&&(Ce*=ke/$e),be=ue(Ie,tt,be);const ze=me(S,ee,be,Me,Be),Se=xe(S,ee,be,Me,ge);return{size:i*Ce,rotation:ue(h,I,be),offsetX:ze,offsetY:Se}}function Le(i){if(null==i)return!1;if(Array.isArray(i))return i.every(h=>Le(h));switch(typeof i){case"string":return!!i;case"number":return!isNaN(i)}}function ve(i,h){if("color"===h||"outlinecolor"===h||"backgroundcolor"===h||"borderlinecolor"===h||"tintcolor"===h)return[...f.K[h]];const I=f.D[i];if(!I)throw new Error(`InternalError: default value for type ${i}.`);return I[h]}function Ae(i){return"string"==typeof i?function Ve(i){return i.split(" ").map(h=>Number(h))}(i):i}function at(i){return i?.dashTemplate&&(i.dashTemplate=Ae(i.dashTemplate)),i}function et(i){if(null==i)return"Normal";switch(i.type){case"CIMTextSymbol":return i.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const h=i.symbolLayers;if(!h)return"Normal";for(const I of h)if("CIMVectorMarker"===I.type)return et(I)}break;case"CIMVectorMarker":{const h=i.markerGraphics;if(!h)return"Normal";for(const I of h)if(I.symbol)return et(I.symbol)}}return"Normal"}function _t(i){if(i)switch(i.type){case"CIMTextSymbol":return i.height;case"CIMPointSymbol":{let h=0;if(i.symbolLayers)for(const I of i.symbolLayers)if(I)switch(I.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const S=I.size??f.D.CIMVectorMarker.size;S>h&&(h=S);break}}return h}case"CIMLineSymbol":case"CIMPolygonSymbol":{let h=0;if(i.symbolLayers)for(const I of i.symbolLayers)if(I)switch(I.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const S=I.width;null!=S&&S>h&&(h=S);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(I.markerPlacement&&_(I.markerPlacement)){const S=I.size??f.D.CIMVectorMarker.size;S>h&&(h=S)}break;case"CIMPictureFill":{const S=I.height;null!=S&&S>h&&(h=S)}}return h}}}function lt(i,h){if(null!==h){const I=h.get(i);return I?I.name:i}return i}function vt(i){return i.map(h=>({...h,propertyName:ne(h.propertyName)}))}function We(i){const h={};for(const I in i){const S=i[I];h[ne(I)]=S}return h}function xe(i,h,I,S,ee){const b=I*Math.PI/180;if(b){const Ee=Math.cos(b);return(Math.sin(b)*i+Ee*h)*S+ee}return h*S+ee}function me(i,h,I,S,ee){const b=I*Math.PI/180;return b?(Math.cos(b)*i-Math.sin(b)*h)*S+ee:i*S+ee}function ue(i,h,I){return h?I-i:I+i}function we(i,h,I){const S="Color"===I||"TintColor"===I||"ToColor"===I,ee="Rotation"===I||"Angle"===I||"ToRotation"===I;let b=h[ne(I)];if(null!=b&&(S?b=[b[0]/255,b[1]/255,b[2]/255,b[3]/255]:ee&&(b*=Math.PI/180)),null==b&&(b=ve(h.type,I.toLowerCase()),null!=b&&(S?b=[b[0]/255,b[1]/255,b[2]/255,b[3]]:ee&&(b*=Math.PI/180))),null!=h.primitiveName){const Ee=i[h.primitiveName];if(null!=Ee){const fe=Ee[I];null==fe||("string"==typeof fe||"number"==typeof fe||Array.isArray(fe)?(b=fe,null!=b&&(S?b=[b[0]/255,b[1]/255,b[2]/255,b[3]/255]:ee&&(b*=Math.PI/180))):(b={valueExpressionInfo:fe,defaultValue:b},null!=b&&(S?b={type:"Process",op:"ArcadeColor",value:b}:ee&&(b={type:"Process",op:"Divide",left:b,right:180/Math.PI}))))}}if(null==b)throw new Error(`Failed to derive a value or an expression for "${I}".`);return b}function gt(i,h){return Math.max(Math.min((i??h)/100,1),0)}},91644:(he,Y,o)=>{o.d(Y,{A7:()=>V,Cx:()=>x,Hk:()=>l,JJ:()=>g,SF:()=>u,UK:()=>L,jM:()=>p,x3:()=>d}),o(3248);var e=o(88521),K=o(55417),E=o(46602),k=o(47705),M=o(48254);const L=E.A.fromJSON(M.Cb),V=K.A.fromJSON(M.yM),x=e.A.fromJSON(M.WR),l=k.A.fromJSON(M.JZ);function u(r){if(null==r)return null;switch(r.type){case"mesh":return null;case"point":case"multipoint":return L;case"polyline":return V;case"polygon":case"extent":return x}return null}const p=E.A.fromJSON(M.nC),d=K.A.fromJSON(M.HW),g=e.A.fromJSON(M.b6)},48254:(he,Y,o)=>{o.d(Y,{Cb:()=>K,HW:()=>V,JR:()=>e,JZ:()=>M,WR:()=>k,b6:()=>x,fT:()=>f,nC:()=>L,yM:()=>E});const f=[252,146,31,255],e=[153,153,153,255],K={type:"esriSMS",style:"esriSMSCircle",size:6,color:f,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},E={type:"esriSLS",style:"esriSLSSolid",width:.75,color:f},k={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},M={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},L={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},V={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},x={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}}}]);