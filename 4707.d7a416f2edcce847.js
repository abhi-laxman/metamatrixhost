"use strict";(self.webpackChunkAngularClient=self.webpackChunkAngularClient||[]).push([[4707],{33087:(H,z,s)=>{s.d(z,{q:()=>d});var p=s(60611);class d{constructor(T,K){this._storage=new p.F,this.id="",this.name="",this.size=0,this._storage.maxSize=T,this._storage.register(this),K&&this._storage.registerRemoveFunc("",K)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(T,K,O=1){this._storage.put(this,T,K,O,1)}pop(T){return this._storage.pop(this,T)}get(T){return this._storage.get(this,T)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(T){this._storage.maxSize=T}resetHitRate(){}}},60611:(H,z,s)=>{s.d(z,{F:()=>O,Ti:()=>d});var p=s(12438);const d=-3,b=d-1;var T,D;(D=T||(T={}))[D.ALL=0]="ALL",D[D.SOME=1]="SOME";class O{get size(){return this._size}constructor(_=10485760){this._maxSize=_,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new p.A,this._users=new p.A}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear()}register(_){this._users.push(_)}deregister(_){this._users.removeUnordered(_)}registerRemoveFunc(_,m){this._removeFuncs.push([_,m])}deregisterRemoveFunc(_){this._removeFuncs.filterInPlace(m=>m[0]!==_)}get maxSize(){return this._maxSize}set maxSize(_){this._maxSize=Math.max(_,-1),this._checkSize()}getSize(_,m){return this._db.get(_.id+m)?.size??0}put(_,m,c,i,u){const o=this._db.get(m=_.id+m);if(o&&(this._size-=o.size,_.size-=o.size,this._db.delete(m),o.entry!==c&&this._notifyRemove(m,o.entry,o.size,T.ALL)),i>this._maxSize)return void this._notifyRemove(m,c,i,T.ALL);if(void 0===c)return void console.warn("Refusing to cache undefined entry ");if(!i||i<0)return console.warn(`Refusing to cache entry with size ${i} for key ${m}`),void this._notifyRemove(m,c,0,T.ALL);const y=1+Math.max(u,b)-d;this._db.set(m,new B(c,i,y)),this._size+=i,_.size+=i,this._checkSize()}updateSize(_,m,c,i){const u=this._db.get(m=_.id+m);if(u&&u.entry===c){for(this._size-=u.size,_.size-=u.size;i>this._maxSize;){const o=this._notifyRemove(m,c,i,T.SOME);if(!(null!=o&&o>0))return void this._db.delete(m);i=o}u.size=i,this._size+=i,_.size+=i,this._checkSize()}}pop(_,m){const c=this._db.get(m=_.id+m);if(c)return this._size-=c.size,_.size-=c.size,this._db.delete(m),++this._hit,c.entry;++this._miss}get(_,m){const c=this._db.get(m=_.id+m);if(void 0!==c)return this._db.delete(m),c.lives=c.lifetime,this._db.set(m,c),++this._hit,c.entry;++this._miss}peek(_,m){const c=this._db.get(_.id+m);return c?++this._hit:++this._miss,c?.entry}get performanceInfo(){const _={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},m={},c=new Array;this._db.forEach((o,y)=>{const P=o.lifetime;c[P]=(c[P]||0)+o.size,this._users.forAll(U=>{const{id:R,name:I}=U;y.startsWith(R)&&(m[I]=(m[I]||0)+o.size)})});const i={};this._users.forAll(o=>{const y=o.name;"hitRate"in o&&"number"==typeof o.hitRate&&!isNaN(o.hitRate)&&o.hitRate>0?(m[y]=m[y]||0,i[y]=Math.round(100*o.hitRate)+"%"):i[y]="0%"});const u=Object.keys(m);u.sort((o,y)=>m[y]-m[o]),u.forEach(o=>_[o]=Math.round(m[o]/2**20)+"MB / "+i[o]);for(let o=c.length-1;o>=0;--o){const y=c[o];y&&(_["Priority "+(o+d-1)]=Math.round(y/this._size*100)+"%")}return _}resetStats(){this._hit=this._miss=0,this._users.forAll(_=>_.resetHitRate())}clear(_){const m=_.id;this._db.forEach((c,i)=>{i.startsWith(m)&&(this._size-=c.size,this._db.delete(i),this._notifyRemove(i,c.entry,c.size,T.ALL))}),_.size=0}clearAll(){this._db.forEach((_,m)=>this._notifyRemove(m,_.entry,_.size,T.ALL)),this._users.forAll(_=>_.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(_,m,c,i){let u;return this._removeFuncs.some(o=>{if(_.startsWith(o[0])){const y=o[1](m,i,c);return"number"==typeof y&&(u=y),!0}return!1}),u}_checkSize(){this._users.forAll(_=>this._checkSizeLimits(_)),this._checkSizeLimits()}_checkSizeLimits(_){const m=_??this;if(m.maxSize<0||m.size<=m.maxSize)return;const c=_?.id;let i=!0;for(;i;){i=!1;for(const[u,o]of this._db)if(0===o.lifetime&&(!c||u.startsWith(c))){if(this._purgeItem(u,o,_),m.size<=.9*m.maxSize)return;i||=this._db.has(u)}}for(const[u,o]of this._db)if((!c||u.startsWith(c))&&(this._purgeItem(u,o,_),m.size<=.9*m.maxSize))return}_purgeItem(_,m,c=this._users.find(i=>_.startsWith(i.id))){if(this._db.delete(_),m.lives<=1){this._size-=m.size,c&&(c.size-=m.size);const i=this._notifyRemove(_,m.entry,m.size,T.SOME);null!=i&&i>0&&(this._size+=i,c&&(c.size+=i),m.lives=m.lifetime,m.size=i,this._db.set(_,m))}else--m.lives,this._db.set(_,m)}}class B{constructor(_,m,c){this.entry=_,this.size=m,this.lifetime=c,this.lives=c}}},40856:(H,z,s)=>{s.d(z,{X_:()=>T,i1:()=>K,oW:()=>c,zx:()=>D});var p=s(69287),d=s(82663);const b=96;function T(i,u){const o=u||i.extent,y=i.width,P=(0,d.GA)(o?.spatialReference);return o&&y?o.width/y*P*d.dy*b:0}function K(i,u){return i/((0,d.GA)(u)*d.dy*b)}function D(i,u,o){return function _(i,u){return 0===u||(0,p.Sp)(i,u)||i<u}(i,u)&&function m(i,u){return 0===u||(0,p.Sp)(i,u)||i>u}(i,o)}function c(i,u){return(0,p.Sp)(i,u)?0:(i||Number.POSITIVE_INFINITY)>(u||Number.POSITIVE_INFINITY)?1:-1}},19373:(H,z,s)=>{s.r(z),s.d(z,{default:()=>G});var de,p=s(10467),d=s(8189),b=s(92165),T=s(89563),K=s(90660),O=s(5922),S=s(17715),B=s(77806),D=s(35150),_=s(39693),m=s(56492),c=s(85211),i=s(55739),u=s(17221),o=s(76576),y=s(28067),P=s(32034),U=s(6434),R=s(95478),I=s(25936),W=s(93410),$=s(23e3),j=s(73955),A=s(31446),w=s(25263),X=s(17049),F=s(85551),N=s(1151),M=s(33036),f=s(84311),g=s(77486),L=s(22329),Z=s(47516),J=s(29141),Y=s(3404),q=s(86300),ne=s(54947),se=s(73975),fe=s(71065);s(3248),s(40707);let ae=de=class extends fe.A{constructor(){super(...arguments),this.age=null,this.ageReceived=null,this.displayCount=null,this.maxObservations=1}clone(){return new de({age:this.age,ageReceived:this.ageReceived,displayCount:this.displayCount,maxObservations:this.maxObservations})}};(0,d._)([(0,c.MZ)({type:Number,json:{write:!0}})],ae.prototype,"age",void 0),(0,d._)([(0,c.MZ)({type:Number,json:{write:!0}})],ae.prototype,"ageReceived",void 0),(0,d._)([(0,c.MZ)({type:Number,json:{write:!0}})],ae.prototype,"displayCount",void 0),(0,d._)([(0,c.MZ)({type:Number,json:{write:!0}})],ae.prototype,"maxObservations",void 0),ae=de=(0,d._)([(0,o.$)("esri.layers.support.PurgeOptions")],ae);const ye=ae;var Se=s(93171),De=s(85718),Ee=s(8691),Me=s(31595),ge=s(87086),Ae=s(41843),Ce=s(88485),n=s(71655);const E=(0,Y.p)();function x(h,C){return new O.A("layer:unsupported",`Layer (${h.title}, ${h.id}) of type '${h.declaredClass}' ${C}`,{layer:h})}let v=class extends((0,j.FJ)((0,w.J)((0,A.F)((0,W.dM)((0,f.e)((0,g.d)((0,M.j)((0,N.J)((0,I.b)((0,X.q)((0,F.A)((0,_.P)((0,$.d)(K.A.ClonableMixin(R.A))))))))))))))){constructor(...h){var C;super(...h),C=this,this.copyright=null,this.definitionExpression=null,this.displayField=null,this.elevationInfo=null,this.fields=null,this.fieldsIndex=null,this.geometryDefinition=null,this.geometryType=null,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.maxReconnectionAttempts=0,this.maxReconnectionInterval=20,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.operationalLayerType="ArcGISStreamLayer",this.outFields=["*"],this.popupEnabled=!0,this.popupTemplate=null,this.purgeOptions=new ye,this.refreshInterval=0,this.screenSizePerspectiveEnabled=!0,this.sourceJSON=null,this.spatialReference=P.A.WGS84,this.type="stream",this.url=null,this.updateInterval=300,this.useViewTime=!0,this.webSocketUrl=null,this._debouncedSaveOperations=(0,m.sg)(function(){var V=(0,p.A)(function*(Q,k,ie){const{save:ee,saveAs:te}=yield s.e(4069).then(s.bind(s,4069));switch(Q){case n.X.SAVE:return ee(C,k);case n.X.SAVE_AS:return te(C,ie,k)}});return function(Q,k,ie){return V.apply(this,arguments)}}())}normalizeCtorArgs(h,C){return"string"==typeof h?{url:h,...C}:h}load(h){if(!("WebSocket"in globalThis))return this.addResolvingPromise(Promise.reject(new O.A("stream-layer:websocket-unsupported","WebSocket is not supported in this browser. StreamLayer will not have real-time connection with the stream service."))),Promise.resolve(this);const C=null!=h?h.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Stream Service","Feed"]},h).catch(m.QP).then(()=>this._fetchService(C))),Promise.resolve(this)}get defaultPopupTemplate(){return this.createPopupTemplate()}set featureReduction(h){const C=this._normalizeFeatureReduction(h);this._set("featureReduction",C)}set renderer(h){(0,q.yp)(h,this.fieldsIndex),this._set("renderer",h)}readRenderer(h,C,V){C=C.layerDefinition||C;const Q=C.drawingInfo?.renderer;if(Q){const k=(0,De.L)(Q,C,V)||void 0;return k||D.A.getLogger(this).error("Failed to create renderer",{rendererDefinition:C.drawingInfo.renderer,layer:this,context:V}),k}return(0,Z.PD)(C,V)}connect(h){var C=this;return(0,p.A)(function*(){const[{createConnection:V}]=yield Promise.all([Promise.all([s.e(8304),s.e(2190),s.e(9557)]).then(s.bind(s,69809)),C.load()]),Q=C.geometryType?U.gy.toJSON(C.geometryType):null,{customParameters:k=null,definitionExpression:ie=null,geometryDefinition:ee=null,maxReconnectionAttempts:te=0,maxReconnectionInterval:ue=20,spatialReference:re=C.spatialReference}=h||C.createConnectionParameters(),oe=V(C.parsedUrl,C.spatialReference,re,Q,ie,ee,te,ue,k??void 0),pe=(0,S.vE)([C.on("send-message-to-socket",le=>oe.sendMessageToSocket(le)),C.on("send-message-to-client",le=>oe.sendMessageToClient(le))]);return oe.once("destroy",pe.remove),oe})()}createConnectionParameters(){return{spatialReference:this.spatialReference,customParameters:this.customParameters,definitionExpression:this.definitionExpression,geometryDefinition:this.geometryDefinition,maxReconnectionAttempts:this.maxReconnectionAttempts,maxReconnectionInterval:this.maxReconnectionInterval}}createPopupTemplate(h){return(0,Ae.tn)(this,h)}createQuery(){const h=new ge.A;return h.returnGeometry=!0,h.outFields=["*"],h.where=this.definitionExpression||"1=1",h}getFieldDomain(h,C){if(!this.fields)return null;let V=null;return this.fields.some(Q=>(Q.name===h&&(V=Q.domain),!!V)),V}getField(h){return this.fieldsIndex.get(h)}serviceSupportsSpatialReference(h){return!0}sendMessageToSocket(h){this.emit("send-message-to-socket",h)}sendMessageToClient(h){this.emit("send-message-to-client",h)}save(h){var C=this;return(0,p.A)(function*(){return C._debouncedSaveOperations(n.X.SAVE,h)})()}saveAs(h,C){var V=this;return(0,p.A)(function*(){return V._debouncedSaveOperations(n.X.SAVE_AS,C,h)})()}write(h,C){const V=C?.messages;return this.webSocketUrl?(V?.push(x(this,"using a custom websocket connection cannot be written to web scenes and web maps")),null):this.parsedUrl?super.write(h,C):(V?.push(x(this,"using a client-side only connection without a url cannot be written to web scenes and web maps")),null)}_fetchService(h){var C=this;return(0,p.A)(function*(){if(!C.webSocketUrl&&C.parsedUrl){if(!C.sourceJSON){const{data:V}=yield(0,T.A)(C.parsedUrl.path,{query:{f:"json",...C.customParameters,...C.parsedUrl.query},responseType:"json",signal:h});C.sourceJSON=V}}else{if(!C.timeInfo?.trackIdField)throw new O.A("stream-layer:missing-metadata","The stream layer trackIdField must be specified.");if(!C.objectIdField){const V=C.fields.find(Q=>"oid"===Q.type)?.name;if(!V)throw new O.A("stream-layer:missing-metadata","The stream layer objectIdField must be specified.");C.objectIdField=V}if(!C.fields)throw new O.A("stream-layer:missing-metadata","The stream layer fields must be specified.");if(C.fields.some(V=>V.name===C.objectIdField)||C.fields.push(new J.A({name:C.objectIdField,alias:C.objectIdField,type:"oid"})),!C.geometryType)throw new O.A("stream-layer:missing-metadata","The stream layer geometryType must be specified.");C.webSocketUrl&&(C.url=C.webSocketUrl)}return C.read(C.sourceJSON,{origin:"service",portalItem:C.portalItem,portal:C.portalItem?.portal,url:C.parsedUrl}),(0,q.yp)(C.renderer,C.fieldsIndex),(0,q.sv)(C.timeInfo,C.fieldsIndex),C.objectIdField||(C.objectIdField=Se.DN),(0,Ee.L)(C,{origin:"service"})})()}};(0,d._)([(0,c.MZ)({type:String})],v.prototype,"copyright",void 0),(0,d._)([(0,c.MZ)({readOnly:!0})],v.prototype,"defaultPopupTemplate",null),(0,d._)([(0,c.MZ)({type:String,json:{name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],v.prototype,"definitionExpression",void 0),(0,d._)([(0,c.MZ)({type:String})],v.prototype,"displayField",void 0),(0,d._)([(0,c.MZ)({type:Ce.A})],v.prototype,"elevationInfo",void 0),(0,d._)([(0,c.MZ)({json:{origins:{"web-map":{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-scene":{read:!1,write:!1}}}})],v.prototype,"featureReduction",null),(0,d._)([(0,c.MZ)(E.fields)],v.prototype,"fields",void 0),(0,d._)([(0,c.MZ)(E.fieldsIndex)],v.prototype,"fieldsIndex",void 0),(0,d._)([(0,c.MZ)({type:y.A,json:{name:"layerDefinition.definitionGeometry",write:!0}})],v.prototype,"geometryDefinition",void 0),(0,d._)([(0,c.MZ)({type:U.gy.apiValues,json:{read:{reader:U.gy.read}}})],v.prototype,"geometryType",void 0),(0,d._)([(0,c.MZ)(L.kF)],v.prototype,"labelsVisible",void 0),(0,d._)([(0,c.MZ)({type:[ne.A],json:{name:"layerDefinition.drawingInfo.labelingInfo",read:{reader:se.w},write:!0}})],v.prototype,"labelingInfo",void 0),(0,d._)([(0,c.MZ)(L.fV)],v.prototype,"legendEnabled",void 0),(0,d._)([(0,c.MZ)({type:["show","hide"],json:{origins:{"portal-item":{read:!1,write:!1}}}})],v.prototype,"listMode",void 0),(0,d._)([(0,c.MZ)({type:i.jz})],v.prototype,"maxReconnectionAttempts",void 0),(0,d._)([(0,c.MZ)({type:i.jz})],v.prototype,"maxReconnectionInterval",void 0),(0,d._)([(0,c.MZ)(L.hG)],v.prototype,"maxScale",void 0),(0,d._)([(0,c.MZ)(L.hn)],v.prototype,"minScale",void 0),(0,d._)([(0,c.MZ)({type:String})],v.prototype,"objectIdField",void 0),(0,d._)([(0,c.MZ)({value:"ArcGISStreamLayer",type:["ArcGISStreamLayer"]})],v.prototype,"operationalLayerType",void 0),(0,d._)([(0,c.MZ)({readOnly:!0})],v.prototype,"outFields",void 0),(0,d._)([(0,c.MZ)(L.M6)],v.prototype,"popupEnabled",void 0),(0,d._)([(0,c.MZ)({type:b.A,json:{name:"popupInfo",write:!0}})],v.prototype,"popupTemplate",void 0),(0,d._)([(0,c.MZ)({type:ye})],v.prototype,"purgeOptions",void 0),(0,d._)([(0,c.MZ)({json:{read:!1,write:!1}})],v.prototype,"refreshInterval",void 0),(0,d._)([(0,c.MZ)({types:Me.Hg,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{name:"layerDefinition.drawingInfo.renderer",types:Me.XJ,write:!0}},write:{target:"layerDefinition.drawingInfo.renderer"}}})],v.prototype,"renderer",null),(0,d._)([(0,u.w)("service","renderer",["drawingInfo.renderer","defaultSymbol"]),(0,u.w)("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],v.prototype,"readRenderer",null),(0,d._)([(0,c.MZ)((()=>{const h=(0,B.o8)(L.PY);return h.json.origins["portal-item"]={read:!1,write:!1},h})())],v.prototype,"screenSizePerspectiveEnabled",void 0),(0,d._)([(0,c.MZ)()],v.prototype,"sourceJSON",void 0),(0,d._)([(0,c.MZ)({type:P.A,json:{origins:{service:{read:{source:"spatialReference"}}}}})],v.prototype,"spatialReference",void 0),(0,d._)([(0,c.MZ)({json:{read:!1}})],v.prototype,"type",void 0),(0,d._)([(0,c.MZ)(L.OZ)],v.prototype,"url",void 0),(0,d._)([(0,c.MZ)({type:Number})],v.prototype,"updateInterval",void 0),(0,d._)([(0,c.MZ)({json:{read:!1,write:!1}})],v.prototype,"useViewTime",void 0),(0,d._)([(0,c.MZ)({type:String})],v.prototype,"webSocketUrl",void 0),v=(0,d._)([(0,o.$)("esri.layers.StreamLayer")],v);const G=v},72211:(H,z,s)=>{s.d(z,{LF:()=>K,M9:()=>O,zu:()=>_});var p=s(5922),d=s(89221),b=s(79845),T=s(26073);function K(i,u,o){try{return function B(i){if(!i||0===i.length)return null;if(function D(i){const u=i[0];return!!u&&"scale"in u}(i)){const u=[];for(const o of i)u.push({scale:o.scale,value:_(o.value)});return u}return _(i)}(i)}catch(y){o?.messages?.push(y)}return null}function O(i,u,o,y){try{const P=function S(i){const u=(0,b.q)(i);return u?(0,T.dw)(u)?u.map(o=>o.toJSON()):u.map(({scale:o,effects:y})=>({scale:o,value:y.map(P=>P.toJSON())})):null}(i);(0,d.sM)(o,P,u)}catch(P){y.messages&&y.messages.push(P)}}function _(i){if(!i?.length)return"";const u=[];for(const o of i){let y=[];switch(o.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":y=[m(o,"amount")];break;case"blur":y=[m(o,"radius","pt")];break;case"hue-rotate":y=[m(o,"angle","deg")];break;case"drop-shadow":y=[m(o,"xoffset","pt"),m(o,"yoffset","pt"),m(o,"blurRadius","pt"),c(o,"color")];break;case"bloom":y=[m(o,"strength"),m(o,"radius","pt"),m(o,"threshold")]}const P=`${o.type}(${y.filter(Boolean).join(" ")})`;(0,b.q)(P),u.push(P)}return u.join(" ")}function m(i,u,o){if(null==i[u])throw new p.A("effect:missing-parameter",`Missing parameter '${u}' in ${i.type} effect`,{effect:i});return o?i[u]+o:""+i[u]}function c(i,u){if(null==i[u])throw new p.A("effect:missing-parameter",`Missing parameter '${u}' in ${i.type} effect`,{effect:i});const o=i[u];return`rgba(${o[0]||0}, ${o[1]||0}, ${o[2]||0}, ${o[3]/255||0})`}},93410:(H,z,s)=>{s.d(z,{LF:()=>m,dM:()=>c,sU:()=>D});var p=s(8189),d=s(85211),O=(s(3248),s(35150),s(40707),s(76576)),S=s(50501),B=s(72211);const D={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:{layerContainerTypes:S.K}},"portal-item":{read:!0,write:{layerContainerTypes:S.K}}}}},_={read:{reader:B.LF},write:{allowNull:!0,writer:B.M9,layerContainerTypes:S.K}},m={json:{read:!1,write:!1,origins:{"web-map":_,"portal-item":_}}},c=i=>{let u=class extends i{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return(0,p._)([(0,d.MZ)(D)],u.prototype,"blendMode",void 0),(0,p._)([(0,d.MZ)(m)],u.prototype,"effect",void 0),u=(0,p._)([(0,O.$)("esri.layers.mixins.BlendLayer")],u),u}},23e3:(H,z,s)=>{s.d(z,{d:()=>S});var p=s(8189),d=s(85211),O=(s(3248),s(35150),s(40707),s(76576));const S=B=>{let D=class extends B{constructor(){super(...arguments),this.customParameters=null}};return(0,p._)([(0,d.MZ)({type:Object,json:{write:{overridePolicy:_=>({enabled:!!(_&&Object.keys(_).length>0)})}}})],D.prototype,"customParameters",void 0),D=(0,p._)([(0,O.$)("esri.layers.mixins.CustomParametersMixin")],D),D}},73955:(H,z,s)=>{s.d(z,{FJ:()=>W,Dp:()=>$,KV:()=>j});var p=s(8189),d=s(89221),b=s(85211),S=(s(3248),s(35150),s(40707),s(76576)),B=s(50501),D=s(90660),_=s(31178),m=s(71065),c=s(50305),i=s(40856),u=s(43085);const o={write:{overridePolicy:(A,w,X)=>({enabled:!X||"scale"===X.filterMode})}};let y=class extends(D.A.ClonableMixin(m.A)){constructor(A){super(A),this.id=(0,u.lk)(),this.maxScale=0,this.minScale=0,this.title="",this.where=null}};(0,p._)([(0,b.MZ)({type:String,json:{write:!0}})],y.prototype,"id",void 0),(0,p._)([(0,b.MZ)({type:Number,json:o})],y.prototype,"maxScale",void 0),(0,p._)([(0,b.MZ)({type:Number,json:o})],y.prototype,"minScale",void 0),(0,p._)([(0,b.MZ)({type:String,json:{write:!0}})],y.prototype,"title",void 0),(0,p._)([(0,b.MZ)({type:String,json:{write:!0}})],y.prototype,"where",void 0),y=(0,p._)([(0,S.$)("esri.layers.support.DisplayFilter")],y);const P=y;var U=s(27960);let R=class extends(D.A.ClonableMixin(m.A)){constructor(A){super(A),this.activeFilterId=null,this.filters=new(_.A.ofType(P)),this.mode="manual"}writeFilters(A,w,X,F){const N=A.toArray();"scale"===this.mode&&N.sort((M,f)=>{const g=(0,i.oW)(f.minScale,M.minScale);return 0===g?M.maxScale-f.maxScale:g}),w[X]=N.map(M=>M.toJSON(F))}write(A,w){return super.write(A,(0,U.mW)(this,w))}};(0,p._)([(0,b.MZ)({type:String,json:{write:{overridePolicy:(A,w,X)=>({enabled:"manual"===X.filterMode,isRequired:!0})}}})],R.prototype,"activeFilterId",void 0),(0,p._)([(0,b.MZ)({type:_.A.ofType(P),nonNullable:!0,json:{write:!0}})],R.prototype,"filters",void 0),(0,p._)([(0,c.K)("filters")],R.prototype,"writeFilters",null),(0,p._)([(0,b.MZ)({type:["manual","scale"],nonNullable:!0,json:{name:"filterMode",write:!0}})],R.prototype,"mode",void 0),R=(0,p._)([(0,S.$)("esri.layers.support.DisplayFilterInfo")],R);const W=A=>{let w=class extends A{constructor(){super(...arguments),this.displayFilterEnabled=!0,this.displayFilterInfo=null}};return(0,p._)([(0,b.MZ)($)],w.prototype,"displayFilterEnabled",void 0),(0,p._)([(0,b.MZ)(j)],w.prototype,"displayFilterInfo",void 0),w=(0,p._)([(0,S.$)("esri.layers.mixins.DisplayFilteredLayer")],w),w},$={type:Boolean,json:{name:"layerDefinition.disableDisplayFilter",read:{reader:A=>!A},write:{layerContainerTypes:B.K,writer(A,w,X){(0,d.sM)(X,!A,w)}},origins:{"web-scene":{write:!1,read:!1}}}},j={type:R,json:{name:"layerDefinition.displayFilterInfo",write:{enabled:!0,allowNull:!0,layerContainerTypes:B.K},origins:{"web-scene":{write:!1,read:!1}}}}},1151:(H,z,s)=>{s.d(z,{J:()=>X});var p=s(10467),d=s(8189),T=(s(3248),s(35150)),K=s(56492),O=s(85211),S=s(48669),D=(s(40707),s(76576)),_=s(50501),m=s(31178),c=s(48900),i=s(34703);const u=new m.A,o=new WeakMap;function R(F,N){return Number.isFinite(F)&&Number.isFinite(N)?N<=0?F:R(N,F%N):0}let I=0,W=0;function $(){const F=Date.now();let N=!1;for(const M of u){const f=M.deref();f?f.refreshInterval&&F-(o.get(f)??0)+5>=6e4*f.refreshInterval&&(o.set(f,F),f.refresh(F)):N=!0}if(N)for(let M=u.length-1;M>=0;M--)u.at(M).deref()||u.removeAt(M)}(0,i.fm)(()=>{const F=Date.now();let N=0;for(const M of u){const f=M.deref();f&&(N=R(Math.round(6e4*f.refreshInterval),N),f.refreshInterval?o.get(f)||o.set(f,F):o.delete(f))}if(N!==W){if(W=N,clearInterval(I),0===W)return void(I=0);I=setInterval($,W)}},c.OH);const X=F=>{let N=class extends F{constructor(...M){super(...M),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=(0,K.sg)(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||function y(F){(function U(F){return null!=F&&"object"==typeof F&&"refreshInterval"in F&&"refresh"in F})(F)&&u.push(new WeakRef(F))}(this)},()=>{})}destroy(){!function P(F){const N=u.find(M=>M.deref()===F);N&&u.remove(N)}(this)}castRefreshInterval(M){return M>=.1?M:M<=0?0:.1}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(M=Date.now()){(0,K.QZ)(this._debounceHasDataChanged()).then(f=>{f&&this._set("refreshTimestamp",M),this.emit("refresh",{dataChanged:f})},f=>{T.A.getLogger(this).error(f),this.emit("refresh",{dataChanged:!1,error:f})})}hasDataChanged(){return(0,p.A)(function*(){return!0})()}get test(){}};return(0,d._)([(0,O.MZ)({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:_.K}}}}})],N.prototype,"refreshInterval",void 0),(0,d._)([(0,S.w)("refreshInterval")],N.prototype,"castRefreshInterval",null),(0,d._)([(0,O.MZ)({readOnly:!0})],N.prototype,"refreshTimestamp",void 0),(0,d._)([(0,O.MZ)({readOnly:!0})],N.prototype,"refreshParameters",null),N=(0,d._)([(0,D.$)("esri.layers.mixins.RefreshableLayer")],N),N}},33036:(H,z,s)=>{s.d(z,{j:()=>S});var p=s(8189),d=s(85211),O=(s(3248),s(35150),s(40707),s(76576));const S=D=>{let _=class extends D{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const m={minScale:this.minScale,maxScale:this.maxScale},c=this.parent;c&&"effectiveScaleRange"in c&&function B(D,_){D.minScale=D.minScale>0?_.minScale>0?Math.min(D.minScale,_.minScale):D.minScale:_.minScale,D.maxScale=D.maxScale>0?_.maxScale>0?Math.max(D.maxScale,_.maxScale):D.maxScale:_.maxScale}(m,c.effectiveScaleRange);const i=this._get("effectiveScaleRange");return i&&i.minScale===m.minScale&&i.maxScale===m.maxScale?i:m}};return(0,p._)([(0,d.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],_.prototype,"minScale",void 0),(0,p._)([(0,d.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],_.prototype,"maxScale",void 0),(0,p._)([(0,d.MZ)({readOnly:!0})],_.prototype,"effectiveScaleRange",null),_=(0,p._)([(0,O.$)("esri.layers.mixins.ScaleRangeLayer")],_),_}},84311:(H,z,s)=>{s.d(z,{B:()=>u,e:()=>o});var p=s(8189),d=s(85211),O=(s(3248),s(35150),s(40707),s(17221)),S=s(76576),B=s(50501),D=s(86300),_=s(38488),m=s(26957),c=s(17181),i=s(89352);const u={type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation",layerContainerTypes:B.K}}},o=y=>{let P=class extends y{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(U,R){const I=R.timeInfo.exportOptions;if(!I)return null;const W=I.timeOffset,$=m.j.fromJSON(I.timeOffsetUnits);return W&&$?new i.A({value:W,unit:$}):null}set timeInfo(U){(0,D.sv)(U,this.fieldsIndex),this._set("timeInfo",U)}};return(0,p._)([(0,d.MZ)({type:c.A,json:{write:!1}})],P.prototype,"timeExtent",void 0),(0,p._)([(0,d.MZ)({type:i.A})],P.prototype,"timeOffset",void 0),(0,p._)([(0,O.w)("service","timeOffset",["timeInfo.exportOptions"])],P.prototype,"readOffset",null),(0,p._)([(0,d.MZ)({value:null,type:_.A,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],P.prototype,"timeInfo",null),(0,p._)([(0,d.MZ)(u)],P.prototype,"useViewTime",void 0),P=(0,p._)([(0,S.$)("esri.layers.mixins.TemporalLayer")],P),P}},77486:(H,z,s)=>{s.d(z,{d:()=>j});var p=s(8189),d=s(85211),O=(s(3248),s(35150),s(40707),s(76576)),S=s(92165),B=s(90660),D=s(71065),_=s(89221),m=s(50305),c=s(2052),i=s(22329),u=s(54947),o=s(31595);let y=class extends(B.A.ClonableMixin(D.A)){constructor(A){super(A),this.labelingInfo=null,this.labelsVisible=!0,this.renderer=null,this.visible=!0}};(0,p._)([(0,d.MZ)({type:[u.A],json:{write:!0}})],y.prototype,"labelingInfo",void 0),(0,p._)([(0,d.MZ)(i.kF)],y.prototype,"labelsVisible",void 0),(0,p._)([(0,d.MZ)({types:o.Hg,json:{write:!0}})],y.prototype,"renderer",void 0),(0,p._)([(0,d.MZ)({type:Boolean,json:{write:!0}})],y.prototype,"visible",void 0),y=(0,p._)([(0,O.$)("esri.layers.support.TrackPartInfo")],y);const P=y;var U=s(73747),R=s(91644),I=s(89352);let W=class extends(B.A.ClonableMixin(D.A)){constructor(A){super(A),this.enabled=!0,this.fields=[],this.latestObservations=new P({renderer:new U.A({symbol:R.UK.clone()})}),this.maxDisplayDuration=null,this.maxDisplayObservationsPerTrack=0,this.popupEnabled=!0,this.popupTemplate=null,this.previousObservations=new P({renderer:new U.A({symbol:R.UK.clone()})}),this.trackLines=new P({renderer:new U.A({symbol:R.A7.clone()})}),this.timeField="startTimeField"}writeFields(A,w,X){const F=A.filter(N=>"avg_angle"!==N.statisticType).map(N=>N.toJSON());(0,_.sM)(X,F,w)}};(0,p._)([(0,d.MZ)({type:Boolean,json:{write:!0}})],W.prototype,"enabled",void 0),(0,p._)([(0,d.MZ)({type:[c.A],json:{write:!0}})],W.prototype,"fields",void 0),(0,p._)([(0,m.K)("fields")],W.prototype,"writeFields",null),(0,p._)([(0,d.MZ)({type:P,json:{write:!0}})],W.prototype,"latestObservations",void 0),(0,p._)([(0,d.MZ)({type:I.A,json:{write:!0}})],W.prototype,"maxDisplayDuration",void 0),(0,p._)([(0,d.MZ)({type:Number,json:{write:!0}})],W.prototype,"maxDisplayObservationsPerTrack",void 0),(0,p._)([(0,d.MZ)(i.M6)],W.prototype,"popupEnabled",void 0),(0,p._)([(0,d.MZ)({type:S.A,json:{name:"popupInfo",write:!0}})],W.prototype,"popupTemplate",void 0),(0,p._)([(0,d.MZ)({type:P,json:{write:!0}})],W.prototype,"previousObservations",void 0),(0,p._)([(0,d.MZ)({type:P,json:{write:!0}})],W.prototype,"trackLines",void 0),(0,p._)([(0,d.MZ)({type:["timeReceived","startTimeField","endTimeField"],json:{read:!0,write:!0}})],W.prototype,"timeField",void 0),W=(0,p._)([(0,O.$)("esri.layers.support.TrackInfo")],W);const $=W,j=A=>{let w=class extends A{constructor(){super(...arguments),this.trackInfo=null}};return(0,p._)([(0,d.MZ)({type:$})],w.prototype,"trackInfo",void 0),w=(0,p._)([(0,O.$)("esri.layers.mixins.TrackableLayer")],w),w}},73258:(H,z,s)=>{s.d(z,{A:()=>u});var p=s(5922),d=s(71065),b=s(35150),T=s(60797),K=s(24098),O=s(86300),S=s(20543),B=s(22639),D=s(44549);const i=new Map;class u{static fromJSON(I){return new u(I.fields,I.timeZoneByFieldName)}static fromLayer(I){return new u(I.fields??[],U(I))}static fromLayerJSON(I){return new u(I.fields??[],U(I))}constructor(I=[],W){this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=I||[],this._timeZoneByFieldName=W?new Map(W):null;const $=[];for(const j of this.fields){const A=j?.name,w=y(A);if(A&&w){const X=o(A);this._fieldsMap.set(A,j),this._fieldsMap.set(X,j),this._normalizedFieldsMap.set(w,j),$.push(`${X}:${j.type}:${this._timeZoneByFieldName?.get(A)}`),(0,O.vE)(j)?(this.dateFields.push(j),this._dateFieldsSet.add(j)):(0,O.WA)(j)&&(this._numericFieldsSet.add(j),this.numericFields.push(j)),(0,O.te)(j)||(0,O.Xz)(j)||(j.editable=null==j.editable||!!j.editable,j.nullable=null==j.nullable||!!j.nullable)}}$.sort(),this.uid=$.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const I of this.fields)(0,O.te)(I)||(0,O.Xz)(I)||I.nullable||void 0!==(0,O.lD)(I)||this._requiredFields.push(I)}return this._requiredFields}equals(I){return this.uid===I?.uid}has(I){return null!=this.get(I)}get(I){if(!I)return;let W=this._fieldsMap.get(I);return W||(W=this._fieldsMap.get(o(I))??this._normalizedFieldsMap.get(y(I)),W&&this._fieldsMap.set(I,W),W)}getTimeZone(I){const W=this.get(I&&"string"!=typeof I?I.name:I);return W?this._timeZoneByFieldName?this._timeZoneByFieldName.get(W.name):"date"===W.type||"esriFieldTypeDate"===W.type?(b.A.getLogger("esri.layers.support.FieldsIndex").errorOnce(new p.A("getTimeZone:no-timezone-information",`no time zone information for field '${W.name}'`)),S.n$):P.has(W.type)?S.L5:null:null}getLuxonTimeZone(I){const W=this.getTimeZone(I);return W?W===S.L5?K.GB.instance:W===S.n$?D.mQ.utcInstance:(0,T.tE)(i,W,()=>D.oh.create(W)):null}isDateField(I){return this._dateFieldsSet.has(this.get(I))}isTimeOnlyField(I){return(0,O.OH)(this.get(I))}isNumericField(I){return this._numericFieldsSet.has(this.get(I))}normalizeFieldName(I){return this.get(I)?.name??void 0}toJSON(){return{fields:this.fields.map(I=>d.A.isSerializable(I)?I.toJSON():I),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}function o(R){return R.trim().toLowerCase()}function y(R){return(0,O.rS)(R)?.toLowerCase()??""}const P=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function U(R){const I=new Map;if(!R.fields)return I;const W=!0===R.datesInUnknownTimezone,{timeInfo:$,editFieldsInfo:j}=R,A=($?"startField"in $?$.startField:$.startTimeField:"")??"",w=($?"endField"in $?$.endField:$.endTimeField:"")??"",X=function c(R){return"dateFieldsTimeZone"in R}(R)?R.dateFieldsTimeZone??null:R.dateFieldsTimeReference?(0,B.ZS)(R.dateFieldsTimeReference):null,F=j?function _(R){return"timeZone"in R}(j)?j.timeZone??X:j.dateFieldsTimeReference?(0,B.ZS)(j.dateFieldsTimeReference):X??S.n$:null,N=$?function m(R){return"timeZone"in R}($)?$.timeZone??X:$.timeReference?(0,B.ZS)($.timeReference):X:null,M=new Map([[o(j?.creationDateField??""),F],[o(j?.editDateField??""),F],[o(A),N],[o(w),N]]);for(const{name:f,type:g}of R.fields)if(P.has(g))I.set(f,S.L5);else if("date"!==g&&"esriFieldTypeDate"!==g)I.set(f,null);else if(W)I.set(f,S.L5);else{const L=M.get(o(f??""))??X;I.set(f,L)}return I}},38488:(H,z,s)=>{s.d(z,{A:()=>y});var p=s(8189),d=s(90660),b=s(71065),T=s(85211),B=(s(3248),s(35150),s(40707),s(17221)),D=s(76576),_=s(50305),m=s(17181),c=s(89352),i=s(22639);function u(P,U){return c.A.fromJSON({value:P,unit:U})}let o=class extends(d.A.ClonableMixin(b.A)){constructor(P){super(P),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(P,U){return U.timeExtent&&Array.isArray(U.timeExtent)&&2===U.timeExtent.length?m.A.fromArray(U.timeExtent):null}writeFullTimeExtent(P,U){U.timeExtent=null!=P?.start&&null!=P.end?P.toArray():null}readInterval(P,U){return U.timeInterval&&U.timeIntervalUnits?u(U.timeInterval,U.timeIntervalUnits):U.defaultTimeInterval&&U.defaultTimeIntervalUnits?u(U.defaultTimeInterval,U.defaultTimeIntervalUnits):null}writeInterval(P,U){U.timeInterval=P?.toJSON().value??null,U.timeIntervalUnits=P?.toJSON().unit??null}};(0,p._)([(0,T.MZ)({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],o.prototype,"cumulative",void 0),(0,p._)([(0,T.MZ)({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],o.prototype,"endField",void 0),(0,p._)([(0,T.MZ)({type:m.A,json:{write:{enabled:!0,allowNull:!0}}})],o.prototype,"fullTimeExtent",void 0),(0,p._)([(0,B.w)("fullTimeExtent",["timeExtent"])],o.prototype,"readFullTimeExtent",null),(0,p._)([(0,_.K)("fullTimeExtent")],o.prototype,"writeFullTimeExtent",null),(0,p._)([(0,T.MZ)({type:Boolean,json:{write:!0}})],o.prototype,"hasLiveData",void 0),(0,p._)([(0,T.MZ)({type:c.A,json:{write:{enabled:!0,allowNull:!0}}})],o.prototype,"interval",void 0),(0,p._)([(0,B.w)("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],o.prototype,"readInterval",null),(0,p._)([(0,_.K)("interval")],o.prototype,"writeInterval",null),(0,p._)([(0,T.MZ)({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],o.prototype,"startField",void 0),(0,p._)([(0,T.MZ)((0,i.P6)("timeReference",!0))],o.prototype,"timeZone",void 0),(0,p._)([(0,T.MZ)({type:String,json:{write:{enabled:!0,allowNull:!0}}})],o.prototype,"trackIdField",void 0),(0,p._)([(0,T.MZ)({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],o.prototype,"useTime",void 0),(0,p._)([(0,T.MZ)({type:[Date],json:{read:!1}})],o.prototype,"stops",void 0),o=(0,p._)([(0,D.$)("esri.layers.support.TimeInfo")],o);const y=o},27960:(H,z,s)=>{s.d(z,{Ch:()=>K,mW:()=>b,u2:()=>T});var p=s(69287),d=s(63484);function b(i,u){return{...u,filterMode:i.mode}}function T(i,u){return S(i,u).next().value??null}function K(i,u,o){const y=function O(i){if("manual"===_(i))return null;const u=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:o,maxScale:y}of i.filters)u[0]=Math.max(u[0],m(o)),u[1]=Math.min(u[1],c(y));return u}(i);if(y&&((0,p.gg)(u,y[0])||(0,p.ZH)(o,y[1])))return"";const P=Array.from(S(i,u,o)),U=function B(i,u,o){if(0===i.length)return!0;const y=m(i.at(0)?.minScale),P=c(i.at(-1)?.maxScale);if((0,p.ZH)(y,u)||(0,p.gg)(P,o))return!0;for(let U=0;U<i.length-1;U++){const R=i[U];if((0,p.ZH)(m(i[U+1].minScale),c(R.maxScale)))return!0}return!1}(P,u,o)?"1=1":P.map(R=>R.where||"1=1").reduce((R,I)=>(0,d.IW)(R,I),"");return U&&"1=1"!==U?U:""}function*S(i,u,o){if("manual"===_(i)){const y=i.filters.find(P=>P.id===i.activeFilterId);y&&(yield y)}else{"object"==typeof u&&(u=u.scale);for(const y of i.filters)D(y.minScale,y.maxScale,u,o)&&(yield y)}}function D(i,u,o,y){return i=m(i),o=m(o),u=c(u),!(!(0,p.Sp)(o,i)&&(y??o)>i||(0,p.Hx)(u,o)||void 0!==y&&(0,p.Sp)(y,i))}function _(i){return"mode"in i?i.mode:i.filterMode}function m(i){return i||Number.POSITIVE_INFINITY}function c(i){return i||0}},3404:(H,z,s)=>{s.d(z,{p:()=>O});var p=s(3248),d=s(35150),b=s(29141),T=s(73258),K=s(86300);function O(){return{fields:{type:[b.A],value:null,set:function(S){if(S&&(0,p.A)("big-integer-warning-enabled")){const B=S.filter(D=>"big-integer"===D.type||"oid"===D.type&&(D.length||0)>=8);if(B.length){const D=B.map(_=>`'${_.name}'`).join(", ");d.A.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${D}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",S)}},fieldsIndex:{readOnly:!0,get(){return T.A.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(S){this._userOutFields=S,this.notifyChange("outFields")},get:function(){const S=this._userOutFields;if(!S?.length)return null;if(S.includes("*"))return["*"];if(!this.fields)return S;for(const B of S)this.fieldsIndex?.has(B)||d.A.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${B} found in outFields`,{layer:this,outFields:S});return(0,K.DB)(this.fieldsIndex,S)}}}}},4858:(H,z,s)=>{s.d(z,{BI:()=>u,D3:()=>c,XJ:()=>i,lc:()=>m,mX:()=>y,rU:()=>o,tH:()=>$});var p=s(1119);const d="__begin__",b="__end__",T=new RegExp(d,"ig"),K=new RegExp(b,"ig"),O=new RegExp("^"+d,"i"),S=new RegExp(b+"$","i"),B='"',D=B+" + ",_=" + "+B;function m(j){return j.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function c(j){return j.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function i(j){const A={expression:"",type:"none"};return j.labelExpressionInfo?j.labelExpressionInfo.value?(A.expression=j.labelExpressionInfo.value,A.type="conventional"):j.labelExpressionInfo.expression&&(A.expression=j.labelExpressionInfo.expression,A.type="arcade"):null!=j.labelExpression&&(A.expression=m(j.labelExpression),A.type="conventional"),A}function u(j){const A=i(j);switch(A.type){case"conventional":return y(A.expression);case"arcade":return A.expression}return null}function o(j){const A=i(j);switch(A.type){case"conventional":return function U(j){return j?.match(P)?.[1].trim()||null}(A.expression);case"arcade":return $(A.expression)}return null}function y(j){let A;return j?(A=(0,p.HC)(j,w=>d+'$feature["'+w+'"]'+b),A=O.test(A)?A.replace(O,""):B+A,A=S.test(A)?A.replace(S,""):A+B,A=A.replaceAll(T,D).replaceAll(K,_)):A='""',A}const P=/^\s*\{([^}]+)\}\s*$/i,R=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,I=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,W=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function $(j){if(!j)return null;let A=R.exec(j)||I.exec(j);return A?A[1]||A[3]:(A=W.exec(j),A?A[2]:null)}},93171:(H,z,s)=>{s.d(z,{Aw:()=>T,DN:()=>p,EA:()=>b,Gm:()=>d,t0:()=>O,xq:()=>K});const p="__esri_stream_id__",d="__esri_timestamp__",b="__esri_track_part__",T="__esri_time_received__",K="__esri_track_line__";var O,S;(S=O||(O={}))[S.TrackLine=0]="TrackLine",S[S.LatestObservation=1]="LatestObservation",S[S.PreviousObservation=2]="PreviousObservation"},26957:(H,z,s)=>{s.d(z,{j:()=>d});const d=(0,s(49976).O)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0})},79122:(H,z,s)=>{s.d(z,{A:()=>N});var W,p=s(10467),d=s(8189),b=s(49976),T=s(77806),K=s(35150),O=s(85211),S=s(48669),B=s(15463),D=s(17221),_=s(76576),m=s(50305),c=s(55739),i=s(86300),u=s(38582),o=s(18550),y=s(19390),P=s(36345),U=s(23005),R=s(48218),I=s(94048);const j="percent-of-total",A="field",w=new b.J({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:j,esriNormalizeByField:A}),X=(0,c.dp)(y.A);let F=W=class extends((0,o.h)(u.A)){constructor(M){super(M),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(M,f,g){if(!Array.isArray(M))return;let L=f.minValue;return M.map(Z=>{const J=new y.A;return J.read(Z,g),null==J.minValue&&(J.minValue=L),null==J.maxValue&&(J.maxValue=J.minValue),L=J.maxValue,J})}writeClassBreakInfos(M,f,g,L){const Z=M.map(J=>J.write({},L));this._areClassBreaksConsecutive()&&Z.forEach(J=>delete J.classMinValue),f[g]=Z}castField(M){return null==M?M:"function"==typeof M?(K.A.getLogger(this).error(".field: field must be a string value"),null):(0,c.GX)(M)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let M=this._get("normalizationType");const f=!!this.normalizationField,g=null!=this.normalizationTotal;return f||g?(M=f&&A||g&&j||null,f&&g&&K.A.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):M!==A&&M!==j||(M=null),M}set normalizationType(M){this._set("normalizationType",M)}addClassBreakInfo(M,f,g){let L=null;L="number"==typeof M?new y.A({minValue:M,maxValue:f,symbol:(0,I.dp)(g)}):X((0,T.o8)(M)),this.classBreakInfos.push(L),1===this.classBreakInfos.length&&this.notifyChange("minValue")}removeClassBreakInfo(M,f){const g=this.classBreakInfos.length;for(let L=0;L<g;L++){const Z=[this.classBreakInfos[L].minValue,this.classBreakInfos[L].maxValue];if(Z[0]===M&&Z[1]===f){this.classBreakInfos.splice(L,1);break}}}getBreakIndex(M,f){return this.valueExpression&&null==f?.arcade&&K.A.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(M,f):this._getBreakIndexForField(M)}getClassBreakInfo(M,f){var g=this;return(0,p.A)(function*(){let L=f;g.valueExpression&&null==f?.arcade&&(L={...L,arcade:yield(0,R.lw)()});const Z=g.getBreakIndex(M,L);return-1!==Z?g.classBreakInfos[Z]:null})()}getSymbol(M,f){if(this.valueExpression&&null==f?.arcade)return void K.A.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const g=this.getBreakIndex(M,f);return g>-1?this.classBreakInfos[g].symbol:this.defaultSymbol}getSymbolAsync(M,f){var g=this;return(0,p.A)(function*(){let L=f;if(g.valueExpression&&null==f?.arcade){const J=yield(0,R.lw)(),{arcadeUtils:Y}=J;Y.hasGeometryOperations(g.valueExpression)&&(yield Y.enableGeometryOperations()),L={...L,arcade:J}}const Z=g.getBreakIndex(M,L);return Z>-1?g.classBreakInfos[Z].symbol:g.defaultSymbol})()}get symbols(){const M=[];return this.classBreakInfos.forEach(f=>{f.symbol&&M.push(f.symbol)}),this.defaultSymbol&&M.push(this.defaultSymbol),M}getAttributeHash(){return this.visualVariables?.reduce((M,f)=>M+f.getAttributeHash(),"")??""}getMeshHash(){const M=JSON.stringify(this.backgroundFillSymbol),f=JSON.stringify(this.defaultSymbol),g=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${M}.${f}.${this.classBreakInfos.reduce((L,Z)=>L+Z.getMeshHash(),"")}.${g}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new W({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol?.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol?.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:(0,T.o8)(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:(0,T.o8)(this.visualVariables),legendOptions:(0,T.o8)(this.legendOptions),authoringInfo:(0,T.o8)(this.authoringInfo)})}collectRequiredFields(M,f){var g=this;return(0,p.A)(function*(){const L=[g.collectVVRequiredFields(M,f),g.collectSymbolFields(M,f)];yield Promise.all(L)})()}collectSymbolFields(M,f){var g=this;return(0,p.A)(function*(){const L=[...g.symbols.map(Z=>Z.collectRequiredFields(M,f)),(0,i.Dx)(M,f,g.valueExpression)];(0,i.rq)(M,f,g.field),(0,i.rq)(M,f,g.normalizationField),yield Promise.all(L)})()}_getBreakIndexForExpression(M,f){const{viewingMode:g,scale:L,spatialReference:Z,arcade:J,timeZone:Y}=f??{},{valueExpression:q}=this;let ne=this._compiledValueExpression.valueExpression===q?this._compiledValueExpression.compiledFunction:null;const se=J.arcadeUtils;if(!ne){const he=se.createSyntaxTree(q);ne=se.createFunction(he),this._compiledValueExpression.compiledFunction=ne}this._compiledValueExpression.valueExpression=q;const fe=se.executeFunction(ne,se.createExecContext(M,se.getViewInfo({viewingMode:g,scale:L,spatialReference:Z}),Y));return this._getBreakIndexfromInfos(fe)}_getBreakIndexForField(M){const g=M.attributes,L=this.normalizationType;let Z=parseFloat(g[this.field]);if(L){const J=this.normalizationTotal,Y=parseFloat(this.normalizationField?g[this.normalizationField]:void 0);if("log"===L)Z=Math.log(Z)*Math.LOG10E;else if(L!==j||null==J||isNaN(J)){if(L===A&&!isNaN(Y)){if(isNaN(Z)||isNaN(Y))return-1;Z/=Y}}else Z=Z/J*100}return this._getBreakIndexfromInfos(Z)}_getBreakIndexfromInfos(M){const f=this.isMaxInclusive;if(null!=M&&"number"==typeof M&&!isNaN(M))for(let g=0;g<this.classBreakInfos.length;g++){const L=[this.classBreakInfos[g].minValue,this.classBreakInfos[g].maxValue];if(L[0]<=M&&(f?M<=L[1]:M<L[1]))return g}return-1}_areClassBreaksConsecutive(){const M=this.classBreakInfos,f=M.length;for(let g=1;g<f;g++)if(M[g-1].maxValue!==M[g].minValue)return!1;return!0}};(0,d._)([(0,O.MZ)(P.As)],F.prototype,"backgroundFillSymbol",void 0),(0,d._)([(0,O.MZ)({type:[y.A],json:{write:{isRequired:!0}}})],F.prototype,"classBreakInfos",void 0),(0,d._)([(0,D.w)("classBreakInfos")],F.prototype,"readClassBreakInfos",null),(0,d._)([(0,m.K)("classBreakInfos")],F.prototype,"writeClassBreakInfos",null),(0,d._)([(0,O.MZ)({type:String,json:{write:!0}})],F.prototype,"defaultLabel",void 0),(0,d._)([(0,O.MZ)(P.z4)],F.prototype,"defaultSymbol",void 0),(0,d._)([(0,O.MZ)({type:String,json:{write:!0}})],F.prototype,"field",void 0),(0,d._)([(0,S.w)("field")],F.prototype,"castField",null),(0,d._)([(0,O.MZ)({type:Boolean})],F.prototype,"isMaxInclusive",void 0),(0,d._)([(0,O.MZ)({type:U.A,json:{write:!0}})],F.prototype,"legendOptions",void 0),(0,d._)([(0,O.MZ)({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],F.prototype,"minValue",null),(0,d._)([(0,O.MZ)({type:String,json:{write:!0}})],F.prototype,"normalizationField",void 0),(0,d._)([(0,O.MZ)({type:Number,json:{write:!0}})],F.prototype,"normalizationTotal",void 0),(0,d._)([(0,O.MZ)({type:w.apiValues,value:null,json:{type:w.jsonValues,read:w.read,write:w.write}})],F.prototype,"normalizationType",null),(0,d._)([(0,B.e)({classBreaks:"class-breaks"})],F.prototype,"type",void 0),(0,d._)([(0,O.MZ)({type:String,json:{write:!0}})],F.prototype,"valueExpression",void 0),(0,d._)([(0,O.MZ)({type:String,json:{write:!0}})],F.prototype,"valueExpressionTitle",void 0),F=W=(0,d._)([(0,_.$)("esri.renderers.ClassBreaksRenderer")],F);const N=F},19390:(H,z,s)=>{s.d(z,{A:()=>m});var D,p=s(8189),d=s(71065),b=s(85211),S=(s(3248),s(35150),s(40707),s(76576)),B=s(36345);let _=D=class extends d.A{constructor(c){super(c),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new D({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?.clone()??null})}getMeshHash(){const c=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${c}`}};(0,p._)([(0,b.MZ)({type:String,json:{write:!0}})],_.prototype,"description",void 0),(0,p._)([(0,b.MZ)({type:String,json:{write:!0}})],_.prototype,"label",void 0),(0,p._)([(0,b.MZ)({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],_.prototype,"minValue",void 0),(0,p._)([(0,b.MZ)({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],_.prototype,"maxValue",void 0),(0,p._)([(0,b.MZ)(B.Wp)],_.prototype,"symbol",void 0),_=D=(0,p._)([(0,S.$)("esri.renderers.support.ClassBreakInfo")],_);const m=_},78592:(H,z,s)=>{s.d(z,{O3:()=>D,PU:()=>S,YW:()=>m,ex:()=>K,hv:()=>_,zp:()=>O});var p=s(69287),d=s(67685),b=s(53781),T=s(89141);const K=2.4;function O(c){return(0,d.PN)(c*K)}function S(c){return(0,d.Lz)(c)/K}function B(c,i,u,o){let{color:y,ratio:P}=i,{color:U,ratio:R}=u;R===P&&(1===R?P-=1e-6:R+=1e-6);const I=(0,p.qE)((o-P)/(R-P),0,1);(0,b.l)(c,y.toArray(),U.toArray(),I)}function D(c){const u=new Uint8ClampedArray(2048);if((c=c.filter(({ratio:R})=>R>=0&&R<=1).sort((R,I)=>R.ratio-I.ratio).map(({color:R,ratio:I})=>({color:R,ratio:Math.max(I,.001)}))).length<1)return u;let o=c[0],y=c[0],P=1;const U=(0,T.vt)();for(let R=0;R<512;R++){const I=(R+.5)/512;for(;I>y.ratio&&P<c.length;)o=y,y=c[P++];B(U,o,y,I),u.set(U,4*R)}return u}function _(c,i,u){const o=Math.sqrt(c**2+i**2)/u;return o>1?0:3/(Math.PI*u**2)*(1-o**2)**2}function m(c){return"function"==typeof c?c:c?i=>+i[c]:()=>1}},8691:(H,z,s)=>{s.d(z,{L:()=>K});var p=s(10467),d=s(89447),b=s(56492),T=s(96996);function K(S,B,D){return O.apply(this,arguments)}function O(){return(O=(0,p.A)(function*(S,B,D){const _=S&&S.getAtOrigin&&S.getAtOrigin("renderer",B.origin);if(_&&"unique-value"===_.type&&_.styleOrigin){const m=yield(0,d.Ke)(_.populateFromStyle());if((0,b.Te)(D),!1===m.ok){const c=m.error;B?.messages&&B.messages.push(new T.A("renderer:style-reference",`Failed to create unique value renderer from style reference: ${c.message}`,{error:c,context:B})),S.clear("renderer",B?.origin)}}})).apply(this,arguments)}},68470:(H,z,s)=>{s.d(z,{K:()=>c,Q:()=>D});var p=s(8189),d=s(49976),b=s(35150),T=s(85211),S=(s(3248),s(40707),s(15463)),B=s(76576);const D=(0,d.O)()({naturalLog:"natural-log",squareRoot:"square-root",percentOfTotal:"percent-of-total",log:"log",field:"field"}),_="percent-of-total",m="field",c=i=>{let u=class extends i{constructor(){super(...arguments),this.normalizationField=null,this.normalizationMaxValue=null,this.normalizationMinValue=null,this.normalizationTotal=null}get normalizationType(){let o=this._get("normalizationType");const y=!!this.normalizationField,P=null!=this.normalizationTotal;return y||P?(o=y&&m||P&&_||null,y&&P&&b.A.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):o!==m&&o!==_||(o=null),o}set normalizationType(o){this._set("normalizationType",o)}};return(0,p._)([(0,T.MZ)({type:String,json:{name:"parameters.normalizationField",write:!0}})],u.prototype,"normalizationField",void 0),(0,p._)([(0,T.MZ)({type:Number,json:{name:"parameters.normalizationMaxValue",write:!0}})],u.prototype,"normalizationMaxValue",void 0),(0,p._)([(0,T.MZ)({type:Number,json:{name:"parameters.normalizationMinValue",write:!0}})],u.prototype,"normalizationMinValue",void 0),(0,p._)([(0,T.MZ)({type:Number,json:{name:"parameters.normalizationTotal",write:!0}})],u.prototype,"normalizationTotal",void 0),(0,p._)([(0,S.e)(D,{name:"parameters.normalizationType"})],u.prototype,"normalizationType",null),u=(0,p._)([(0,B.$)("esri.rest.support.NormalizationBinParametersMixin")],u),u}},41843:(H,z,s)=>{s.d(z,{DQ:()=>y,tn:()=>u});var p=s(92165),d=s(86300),b=s(54042),S=(s(75432),s(65121),s(558),s(8975)),c=(s(90792),s(83902),s(98089),s(62270),s(61099)),i=s(17580);function u({displayField:f,editFieldsInfo:g,fields:L,objectIdField:Z,title:J},Y){if(!L)return null;const q=function W(f,g){const L=g?.visibleFieldNames;return function U({fields:f,ignoreFieldTypes:g,sortDisabled:L}){const Z=f;return g&&(f=f.filter(J=>!g.includes(J.type))),f===Z&&(f=f.slice()),!0!==L&&f.sort(R),f}({fields:f.fields??[],ignoreFieldTypes:g?.ignoreFieldTypes||M,sortDisabled:g?.sortDisabled}).map(Z=>new c.A({fieldName:Z.name,isEditable:(0,d.R$)(Z,f),label:Z.alias,format:A(Z),visible:P(Z,{...f,visibleFieldNames:L})}))}({editFieldsInfo:g,fields:L,objectIdField:Z},Y);if(!q.length)return null;const ne=function F(f){const g=(0,d.mB)(f),{titleBase:L}=f;return g?`${L}: {${g.trim()}}`:L??""}({titleBase:J,fields:L,displayField:f}),se=function w(){return[new S.A,new b.A]}();return new p.A({title:ne,content:se,fieldInfos:q})}function y(f){const{title:g,graphic:L}=f??{},{attributes:Z,sourceLayer:J}=L??{},Y=J&&"displayField"in J?J.displayField:null,q=Y?Z?.[Y]:null,ne=null!=q?JSON.stringify(q):null,se=L?.getObjectId()?.toString();return g||ne||se||""}const P=(f,g)=>g.visibleFieldNames?g.visibleFieldNames.has(f.name):(0,d.Bz)(f,g);function R(f,g){return"oid"===f.type?-1:"oid"===g.type?1:N(f)?-1:N(g)?1:(f.alias||f.name).toLocaleLowerCase().localeCompare((g.alias||g.name).toLocaleLowerCase())}function A(f){switch(f.type){case"small-integer":case"integer":case"single":return new i.A({digitSeparator:!0,places:0});case"double":return new i.A({digitSeparator:!0,places:2});case"string":return(0,d.JL)(f.name)?new i.A({digitSeparator:!0,places:0}):void 0;default:return}}function N(f){return"name"===(f.name&&f.name.toLowerCase())||"name"===f.alias?.toLowerCase()}const M=["geometry","blob","raster","guid","xml"]},32117:(H,z,s)=>{s.d(z,{$w:()=>P,Bu:()=>f,DW:()=>X,FH:()=>Le,FM:()=>B,G9:()=>T,GV:()=>R,Go:()=>_,K3:()=>he,Kn:()=>A,MM:()=>i,MO:()=>ye,Nl:()=>g,Ny:()=>I,O2:()=>L,UE:()=>Z,YC:()=>ae,YF:()=>Y,ZO:()=>ne,_1:()=>N,_H:()=>$,_W:()=>U,_d:()=>w,bs:()=>de,dI:()=>Ae,e6:()=>m,gQ:()=>S,iA:()=>se,jn:()=>o,lW:()=>c,mA:()=>u,n5:()=>J,pM:()=>F,pV:()=>j,pk:()=>Se,rB:()=>De,s4:()=>b,xo:()=>M,yH:()=>W,yX:()=>Ce,zb:()=>q,zr:()=>y});var p=s(46988);function b(n,E,x,v){return function d(n){return"function"==typeof n}(n)?n(E,x,v):n}function T(n){return[n.r,n.g,n.b,n.a]}const K=" /-,\n";function O(n){let E=n.length;for(;E--;)if(!K.includes(n.charAt(E)))return!1;return!0}function S(n,E){const x=[];let v=0,G=-1;do{if(G=n.indexOf("[",v),G>=v){if(G>v){const h=n.slice(v,G);x.push([h,null,O(h)])}if(v=G+1,G=n.indexOf("]",v),G>=v){if(G>v){const h=E[n.slice(v,G)];h&&x.push([null,h,!1])}v=G+1}}}while(-1!==G);if(v<n.length){const h=n.slice(v);x.push([h,null,O(h)])}return x}function B(n,E,x,v){let G="",h=null;for(const C of E){const[V,Q,k]=C;if(V)k?h=V:(h&&(G+=h,h=null),G+=V);else{let ie=Q;null!=x&&(ie=ye(Q,x));const ee=n.attributes[ie];ee&&(h&&(G+=h,h=null),G+=ee)}}return function D(n,E){switch("string"!=typeof n&&(n=String(n)),E){case"LowerCase":return n.toLowerCase();case"Allcaps":return n.toUpperCase();default:return n}}(G,v)}function _(n,E,x,v,G,h,C=!0){const V=E/G,Q=x/h,k=Math.ceil(V/2),ie=Math.ceil(Q/2);for(let ee=0;ee<h;ee++)for(let te=0;te<G;te++){const ue=4*(te+(C?h-ee-1:ee)*G);let re=0,oe=0,pe=0,le=0,Ie=0,Oe=0,ve=0;const Te=(ee+.5)*Q;for(let _e=Math.floor(ee*Q);_e<(ee+1)*Q;_e++){const xe=Math.abs(Te-(_e+.5))/ie,Re=(te+.5)*V,je=xe*xe;for(let Pe=Math.floor(te*V);Pe<(te+1)*V;Pe++){let ce=Math.abs(Re-(Pe+.5))/k;const me=Math.sqrt(je+ce*ce);me>=-1&&me<=1&&(re=2*me*me*me-3*me*me+1,re>0&&(ce=4*(Pe+_e*E),ve+=re*n[ce+3],pe+=re,n[ce+3]<255&&(re=re*n[ce+3]/250),le+=re*n[ce],Ie+=re*n[ce+1],Oe+=re*n[ce+2],oe+=re))}}v[ue]=le/oe,v[ue+1]=Ie/oe,v[ue+2]=Oe/oe,v[ue+3]=ve/pe}}function m(n){return n?[n[0],n[1],n[2],n[3]/255]:[0,0,0,0]}function c(n){return n.data?.symbol??null}function i(n){return"CIMVectorMarker"===n.type||"CIMPictureMarker"===n.type||"CIMBarChartMarker"===n.type||"CIMCharacterMarker"===n.type||"CIMPieChartMarker"===n.type||"CIMStackedBarChartMarker"===n.type}function u(n){return"CIMGradientStroke"===n.type||"CIMPictureStroke"===n.type||"CIMSolidStroke"===n.type}function o(n){return null!=n&&("CIMGradientFill"===n.type||"CIMHatchFill"===n.type||"CIMPictureFill"===n.type||"CIMSolidFill"===n.type||"CIMWaterFill"===n.type)}function y(n){return null!=n&&("CIMMarkerPlacementAlongLineRandomSize"===n.type||"CIMMarkerPlacementAlongLineSameSize"===n.type||"CIMMarkerPlacementAlongLineVariableSize"===n.type||"CIMMarkerPlacementAtExtremities"===n.type||"CIMMarkerPlacementAtMeasuredUnits"===n.type||"CIMMarkerPlacementAtRatioPositions"===n.type||"CIMMarkerPlacementOnLine"===n.type||"CIMMarkerPlacementOnVertices"===n.type)}const P=(n,E=0)=>null==n||isNaN(n)?E:n,U=(n,E)=>n??E,R=(n,E)=>n??E,I=n=>n.tintColor?m(n.tintColor):[255,255,255,1],W=n=>{if(!n)return!1;for(const E of n)switch(E.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function $(){return Promise.all([s.e(3930),s.e(2076),s.e(4108)]).then(s.bind(s,27815))}function j(n){if(!n)return"normal";switch(n.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function A(n){if(!n)return"normal";switch(n.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function w(n){let E="normal",x="normal";if(n){const v=n.toLowerCase();v.includes("italic")?E="italic":v.includes("oblique")&&(E="oblique"),v.includes("bold")?x="bold":v.includes("light")&&(x="lighter")}return{style:E,weight:x}}function X(n){return n.underline?"underline":n.strikethrough?"line-through":"none"}function F(n){if(!n)return null;switch(n.type){case"CIMPolygonSymbol":if(n.symbolLayers)for(const E of n.symbolLayers){const x=F(E);if(null!=x)return x}break;case"CIMTextSymbol":return F(n.symbol);case"CIMSolidFill":return n.color}return null}function N(n){if(n)switch(n.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const E=n.symbolLayers;if(E)for(const x of E){const v=N(x);if(null!=v)return v}break}case"CIMTextSymbol":return N(n.symbol);case"CIMSolidStroke":return n.color}}function M(n){if(n)switch(n.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(n.symbolLayers)for(const E of n.symbolLayers){const x=M(E);if(void 0!==x)return x}break;case"CIMTextSymbol":return M(n.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return n.width}}function f(n){switch(n){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function g(n){switch(n){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function L(n){return(n?Object.keys(n):[]).map(E=>({name:E,alias:E,type:"string"==typeof n[E]?"esriFieldTypeString":"esriFieldTypeDouble"}))}const Z=n=>n.includes("data:image/svg+xml");function J(n){if(!n)return null;switch(n.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function Y(n){return n&&n.charAt(0).toLowerCase()+n.slice(1)}function q(n,E,x,v,G,h,C=!0){const{infos:V}=h;let Q=1,k=0,ie=0,ee=0,te=1;for(const{absoluteAnchorPoint:oe,offsetX:pe,offsetY:le,rotation:Ie,size:Oe,frameHeight:ve,rotateClockWise:Te,scaleSymbolsProportionally:_e}of V)te=oe?1:Q,ie=Me(pe,le,k,te,ie),ee=Ee(pe,le,k,te,ee),ve&&(_e||C)&&(Q*=Oe/ve),k=ge(Ie,Te,k);const ue=Me(v,G,k,te,ie),re=Ee(v,G,k,te,ee);return{size:n*Q,rotation:ge(E,x,k),offsetX:ue,offsetY:re}}function ne(n){if(null==n)return!1;if(Array.isArray(n))return n.every(E=>ne(E));switch(typeof n){case"string":return!!n;case"number":return!isNaN(n)}}function se(n,E){if("color"===E||"outlinecolor"===E||"backgroundcolor"===E||"borderlinecolor"===E||"tintcolor"===E)return[...p.K[E]];const x=p.D[n];if(!x)throw new Error(`InternalError: default value for type ${n}.`);return x[E]}function he(n){return"string"==typeof n?function fe(n){return n.split(" ").map(E=>Number(E))}(n):n}function Le(n){return n?.dashTemplate&&(n.dashTemplate=he(n.dashTemplate)),n}function de(n){if(null==n)return"Normal";switch(n.type){case"CIMTextSymbol":return n.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const E=n.symbolLayers;if(!E)return"Normal";for(const x of E)if("CIMVectorMarker"===x.type)return de(x)}break;case"CIMVectorMarker":{const E=n.markerGraphics;if(!E)return"Normal";for(const x of E)if(x.symbol)return de(x.symbol)}}return"Normal"}function ae(n){if(n)switch(n.type){case"CIMTextSymbol":return n.height;case"CIMPointSymbol":{let E=0;if(n.symbolLayers)for(const x of n.symbolLayers)if(x)switch(x.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const v=x.size??p.D.CIMVectorMarker.size;v>E&&(E=v);break}}return E}case"CIMLineSymbol":case"CIMPolygonSymbol":{let E=0;if(n.symbolLayers)for(const x of n.symbolLayers)if(x)switch(x.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const v=x.width;null!=v&&v>E&&(E=v);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(x.markerPlacement&&y(x.markerPlacement)){const v=x.size??p.D.CIMVectorMarker.size;v>E&&(E=v)}break;case"CIMPictureFill":{const v=x.height;null!=v&&v>E&&(E=v)}}return E}}}function ye(n,E){if(null!==E){const x=E.get(n);return x?x.name:n}return n}function Se(n){return n.map(E=>({...E,propertyName:Y(E.propertyName)}))}function De(n){const E={};for(const x in n){const v=n[x];E[Y(x)]=v}return E}function Ee(n,E,x,v,G){const h=x*Math.PI/180;if(h){const C=Math.cos(h);return(Math.sin(h)*n+C*E)*v+G}return E*v+G}function Me(n,E,x,v,G){const h=x*Math.PI/180;return h?(Math.cos(h)*n-Math.sin(h)*E)*v+G:n*v+G}function ge(n,E,x){return E?x-n:x+n}function Ae(n,E,x){const v="Color"===x||"TintColor"===x||"ToColor"===x,G="Rotation"===x||"Angle"===x||"ToRotation"===x;let h=E[Y(x)];if(null!=h&&(v?h=[h[0]/255,h[1]/255,h[2]/255,h[3]/255]:G&&(h*=Math.PI/180)),null==h&&(h=se(E.type,x.toLowerCase()),null!=h&&(v?h=[h[0]/255,h[1]/255,h[2]/255,h[3]]:G&&(h*=Math.PI/180))),null!=E.primitiveName){const C=n[E.primitiveName];if(null!=C){const V=C[x];null==V||("string"==typeof V||"number"==typeof V||Array.isArray(V)?(h=V,null!=h&&(v?h=[h[0]/255,h[1]/255,h[2]/255,h[3]/255]:G&&(h*=Math.PI/180))):(h={valueExpressionInfo:V,defaultValue:h},null!=h&&(v?h={type:"Process",op:"ArcadeColor",value:h}:G&&(h={type:"Process",op:"Divide",left:h,right:180/Math.PI}))))}}if(null==h)throw new Error(`Failed to derive a value or an expression for "${x}".`);return h}function Ce(n,E){return Math.max(Math.min((n??E)/100,1),0)}},91644:(H,z,s)=>{s.d(z,{A7:()=>B,Cx:()=>D,Hk:()=>_,JJ:()=>u,SF:()=>m,UK:()=>S,jM:()=>c,x3:()=>i}),s(3248);var d=s(88521),b=s(55417),T=s(46602),K=s(47705),O=s(48254);const S=T.A.fromJSON(O.Cb),B=b.A.fromJSON(O.yM),D=d.A.fromJSON(O.WR),_=K.A.fromJSON(O.JZ);function m(o){if(null==o)return null;switch(o.type){case"mesh":return null;case"point":case"multipoint":return S;case"polyline":return B;case"polygon":case"extent":return D}return null}const c=T.A.fromJSON(O.nC),i=b.A.fromJSON(O.HW),u=d.A.fromJSON(O.b6)},48254:(H,z,s)=>{s.d(z,{Cb:()=>b,HW:()=>B,JR:()=>d,JZ:()=>O,WR:()=>K,b6:()=>D,fT:()=>p,nC:()=>S,yM:()=>T});const p=[252,146,31,255],d=[153,153,153,255],b={type:"esriSMS",style:"esriSMSCircle",size:6,color:p,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},T={type:"esriSLS",style:"esriSLSSolid",width:.75,color:p},K={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},O={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},S={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},B={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},D={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},89352:(H,z,s)=>{s.d(z,{A:()=>i});var p=s(8189),d=s(90660),b=s(71065),T=s(97442),K=s(85211),D=(s(3248),s(35150),s(40707),s(15463)),_=s(76576),m=s(26957);let c=class extends(d.A.ClonableMixin(b.A)){constructor(u){super(u),this.unit="milliseconds",this.value=0}toMilliseconds(){return(0,T.t)(this.value,this.unit,"milliseconds")}};(0,p._)([(0,D.e)(m.j,{nonNullable:!0})],c.prototype,"unit",void 0),(0,p._)([(0,K.MZ)({type:Number,json:{write:!0},nonNullable:!0})],c.prototype,"value",void 0),c=(0,p._)([(0,_.$)("esri.time.TimeInterval")],c);const i=c},71655:(H,z,s)=>{var p,d;s.d(z,{X:()=>p}),(d=p||(p={}))[d.SAVE=0]="SAVE",d[d.SAVE_AS=1]="SAVE_AS"}}]);