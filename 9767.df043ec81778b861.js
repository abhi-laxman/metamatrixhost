"use strict";(self.webpackChunkAngularClient=self.webpackChunkAngularClient||[]).push([[9767],{33087:(V,K,e)=>{e.d(K,{q:()=>y});var i=e(60611);class y{constructor(S,N){this._storage=new i.F,this.id="",this.name="",this.size=0,this._storage.maxSize=S,this._storage.register(this),N&&this._storage.registerRemoveFunc("",N)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(S,N,j=1){this._storage.put(this,S,N,j,1)}pop(S){return this._storage.pop(this,S)}get(S){return this._storage.get(this,S)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(S){this._storage.maxSize=S}resetHitRate(){}}},60611:(V,K,e)=>{e.d(K,{F:()=>j,Ti:()=>y});var i=e(12438);const y=-3,b=y-1;var S,F;(F=S||(S={}))[F.ALL=0]="ALL",F[F.SOME=1]="SOME";class j{get size(){return this._size}constructor(c=10485760){this._maxSize=c,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new i.A,this._users=new i.A}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear()}register(c){this._users.push(c)}deregister(c){this._users.removeUnordered(c)}registerRemoveFunc(c,n){this._removeFuncs.push([c,n])}deregisterRemoveFunc(c){this._removeFuncs.filterInPlace(n=>n[0]!==c)}get maxSize(){return this._maxSize}set maxSize(c){this._maxSize=Math.max(c,-1),this._checkSize()}getSize(c,n){return this._db.get(c.id+n)?.size??0}put(c,n,l,o,m){const u=this._db.get(n=c.id+n);if(u&&(this._size-=u.size,c.size-=u.size,this._db.delete(n),u.entry!==l&&this._notifyRemove(n,u.entry,u.size,S.ALL)),o>this._maxSize)return void this._notifyRemove(n,l,o,S.ALL);if(void 0===l)return void console.warn("Refusing to cache undefined entry ");if(!o||o<0)return console.warn(`Refusing to cache entry with size ${o} for key ${n}`),void this._notifyRemove(n,l,0,S.ALL);const _=1+Math.max(m,b)-y;this._db.set(n,new W(l,o,_)),this._size+=o,c.size+=o,this._checkSize()}updateSize(c,n,l,o){const m=this._db.get(n=c.id+n);if(m&&m.entry===l){for(this._size-=m.size,c.size-=m.size;o>this._maxSize;){const u=this._notifyRemove(n,l,o,S.SOME);if(!(null!=u&&u>0))return void this._db.delete(n);o=u}m.size=o,this._size+=o,c.size+=o,this._checkSize()}}pop(c,n){const l=this._db.get(n=c.id+n);if(l)return this._size-=l.size,c.size-=l.size,this._db.delete(n),++this._hit,l.entry;++this._miss}get(c,n){const l=this._db.get(n=c.id+n);if(void 0!==l)return this._db.delete(n),l.lives=l.lifetime,this._db.set(n,l),++this._hit,l.entry;++this._miss}peek(c,n){const l=this._db.get(c.id+n);return l?++this._hit:++this._miss,l?.entry}get performanceInfo(){const c={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},n={},l=new Array;this._db.forEach((u,_)=>{const v=u.lifetime;l[v]=(l[v]||0)+u.size,this._users.forAll(M=>{const{id:C,name:d}=M;_.startsWith(C)&&(n[d]=(n[d]||0)+u.size)})});const o={};this._users.forAll(u=>{const _=u.name;"hitRate"in u&&"number"==typeof u.hitRate&&!isNaN(u.hitRate)&&u.hitRate>0?(n[_]=n[_]||0,o[_]=Math.round(100*u.hitRate)+"%"):o[_]="0%"});const m=Object.keys(n);m.sort((u,_)=>n[_]-n[u]),m.forEach(u=>c[u]=Math.round(n[u]/2**20)+"MB / "+o[u]);for(let u=l.length-1;u>=0;--u){const _=l[u];_&&(c["Priority "+(u+y-1)]=Math.round(_/this._size*100)+"%")}return c}resetStats(){this._hit=this._miss=0,this._users.forAll(c=>c.resetHitRate())}clear(c){const n=c.id;this._db.forEach((l,o)=>{o.startsWith(n)&&(this._size-=l.size,this._db.delete(o),this._notifyRemove(o,l.entry,l.size,S.ALL))}),c.size=0}clearAll(){this._db.forEach((c,n)=>this._notifyRemove(n,c.entry,c.size,S.ALL)),this._users.forAll(c=>c.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(c,n,l,o){let m;return this._removeFuncs.some(u=>{if(c.startsWith(u[0])){const _=u[1](n,o,l);return"number"==typeof _&&(m=_),!0}return!1}),m}_checkSize(){this._users.forAll(c=>this._checkSizeLimits(c)),this._checkSizeLimits()}_checkSizeLimits(c){const n=c??this;if(n.maxSize<0||n.size<=n.maxSize)return;const l=c?.id;let o=!0;for(;o;){o=!1;for(const[m,u]of this._db)if(0===u.lifetime&&(!l||m.startsWith(l))){if(this._purgeItem(m,u,c),n.size<=.9*n.maxSize)return;o||=this._db.has(m)}}for(const[m,u]of this._db)if((!l||m.startsWith(l))&&(this._purgeItem(m,u,c),n.size<=.9*n.maxSize))return}_purgeItem(c,n,l=this._users.find(o=>c.startsWith(o.id))){if(this._db.delete(c),n.lives<=1){this._size-=n.size,l&&(l.size-=n.size);const o=this._notifyRemove(c,n.entry,n.size,S.SOME);null!=o&&o>0&&(this._size+=o,l&&(l.size+=o),n.lives=n.lifetime,n.size=o,this._db.set(c,n))}else--n.lives,this._db.set(c,n)}}class W{constructor(c,n,l){this.entry=c,this.size=n,this.lifetime=l,this.lives=l}}},40856:(V,K,e)=>{e.d(K,{X_:()=>S,i1:()=>N,oW:()=>l,zx:()=>F});var i=e(69287),y=e(82663);const b=96;function S(o,m){const u=m||o.extent,_=o.width,v=(0,y.GA)(u?.spatialReference);return u&&_?u.width/_*v*y.dy*b:0}function N(o,m){return o/((0,y.GA)(m)*y.dy*b)}function F(o,m,u){return function c(o,m){return 0===m||(0,i.Sp)(o,m)||o<m}(o,m)&&function n(o,m){return 0===m||(0,i.Sp)(o,m)||o>m}(o,u)}function l(o,m){return(0,i.Sp)(o,m)?0:(o||Number.POSITIVE_INFINITY)>(m||Number.POSITIVE_INFINITY)?1:-1}},88474:(V,K,e)=>{e.r(K),e.d(K,{default:()=>ge});var i=e(10467),y=e(8189),b=e(92165),S=e(39693),N=e(56492),j=e(45272),E=e(85211),W=e(3248),F=e(35150),n=(e(40707),e(76576)),l=e(28067),o=e(32034),m=e(6434),u=e(95478),_=e(5922),v=e(55098),M=e(19284),C=e(55861),d=e(89962),O=e(93327);let P=class extends v.A{constructor(){var g;super(...arguments),g=this,this.type="geojson",this.refresh=(0,N.sg)(function(){var R=(0,i.A)(function*(w){yield g.load();const{extent:s,timeExtent:I}=yield g._connection.invoke("refresh",w);return g.sourceJSON.extent=s,I&&(g.sourceJSON.timeInfo.timeExtent=[I.start,I.end]),{dataChanged:!0,updates:{extent:g.sourceJSON.extent,timeInfo:g.sourceJSON.timeInfo}}});return function(w){return R.apply(this,arguments)}}())}load(g){return this.addResolvingPromise(this._startWorker(null!=g?g.signal:null)),Promise.resolve(this)}destroy(){this._connection?.close(),this._connection=null}applyEdits(g){return this.load().then(()=>this._applyEdits(g))}openPorts(){return this.load().then(()=>this._connection.openPorts())}queryFeatures(g,R={}){return this.load(R).then(()=>this._connection.invoke("queryFeatures",g?g.toJSON():null,R)).then(w=>O.A.fromJSON(w))}queryFeaturesJSON(g,R={}){return this.load(R).then(()=>this._connection.invoke("queryFeatures",g?g.toJSON():null,R))}queryFeatureCount(g,R={}){return this.load(R).then(()=>this._connection.invoke("queryFeatureCount",g?g.toJSON():null,R))}queryObjectIds(g,R={}){return this.load(R).then(()=>this._connection.invoke("queryObjectIds",g?g.toJSON():null,R))}queryExtent(g,R={}){return this.load(R).then(()=>this._connection.invoke("queryExtent",g?g.toJSON():null,R)).then(w=>({count:w.count,extent:l.A.fromJSON(w.extent)}))}querySnapping(g,R={}){return this.load(R).then(()=>this._connection.invoke("querySnapping",g,R))}queryAttributeBins(g,R={}){var w=this;return(0,i.A)(function*(){return yield w.load(),w._connection.invoke("queryAttributeBins",g?.toJSON(),R)})()}_applyEdits(g){if(!this._connection)throw new _.A("geojson-layer-source:edit-failure","Memory source not loaded");const R=this.layer.objectIdField,w=[],s=[],I=[];if(g.addFeatures)for(const T of g.addFeatures)w.push(this._serializeFeature(T));if(g.deleteFeatures)for(const T of g.deleteFeatures)"objectId"in T&&null!=T.objectId?s.push(T.objectId):"attributes"in T&&null!=T.attributes[R]&&s.push(T.attributes[R]);if(g.updateFeatures)for(const T of g.updateFeatures)I.push(this._serializeFeature(T));return this._connection.invoke("applyEdits",{adds:w,updates:I,deletes:s}).then(({extent:T,timeExtent:B,featureEditResults:J})=>(this.sourceJSON.extent=T,B&&(this.sourceJSON.timeInfo.timeExtent=[B.start,B.end]),this._createEditsResult(J)))}_createEditsResult(g){return{addFeatureResults:g.addResults?g.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:g.updateResults?g.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:g.deleteResults?g.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(g){const R=!0===g.success?null:g.error||{code:void 0,description:void 0};return{objectId:g.objectId,globalId:g.globalId,error:R?new _.A("geojson-layer-source:edit-failure",R.description,{code:R.code}):null}}_serializeFeature(g){const{attributes:R}=g,w=this._geometryForSerialization(g);return w?{geometry:w.toJSON(),attributes:R}:{attributes:R}}_geometryForSerialization(g){const{geometry:R}=g;return null==R?null:"mesh"===R.type||"extent"===R.type?C.A.fromExtent(R.extent):R}_startWorker(g){var R=this;return(0,i.A)(function*(){R._connection=yield(0,M.ho)("GeoJSONSourceWorker",{strategy:(0,W.A)("feature-layers-workers")?"dedicated":"local",signal:g,registryTarget:R});const{fields:w,spatialReference:s,hasZ:I,geometryType:T,objectIdField:B,url:J,timeInfo:U,customParameters:re}=R.layer,Y="defaults"===R.layer.originOf("spatialReference"),q={url:J,customParameters:re,fields:w&&w.map(ee=>ee.toJSON()),geometryType:m.gy.toJSON(T),hasZ:I,objectIdField:B,timeInfo:U?U.toJSON():null,spatialReference:Y?null:s&&s.toJSON()},X=yield R._connection.invoke("load",q,{signal:g});for(const ee of X.warnings)F.A.getLogger(R.layer).warn("#load()",`${ee.message} (title: '${R.layer.title||"no title"}', id: '${R.layer.id??"no id"}')`,{warning:ee});X.featureErrors.length&&F.A.getLogger(R.layer).warn("#load()",`Encountered ${X.featureErrors.length} validation errors while loading features. (title: '${R.layer.title||"no title"}', id: '${R.layer.id??"no id"}')`,{errors:X.featureErrors}),R.sourceJSON=X.layerDefinition,R.capabilities=(0,d.f)(R.sourceJSON.hasZ,!0)})()}};(0,y._)([(0,E.MZ)()],P.prototype,"capabilities",void 0),(0,y._)([(0,E.MZ)()],P.prototype,"type",void 0),(0,y._)([(0,E.MZ)({constructOnly:!0})],P.prototype,"layer",void 0),(0,y._)([(0,E.MZ)()],P.prototype,"sourceJSON",void 0),P=(0,y._)([(0,n.$)("esri.layers.graphics.sources.GeoJSONSource")],P);var a=e(93410),p=e(23e3),h=e(73955),L=e(31446),x=e(25263),A=e(17049),f=e(43124),D=e(85551),z=e(1151),Z=e(33036),H=e(84311),$=e(77486),Q=e(22329),ue=e(69741),ne=e(29141),te=e(3404),me=e(86300),Me=e(54947),Pe=e(73975),de=e(31595),ae=e(87086),Ee=e(41843),Ae=e(22639);const ve=(0,te.p)();let G=class extends((0,f.fY)((0,h.FJ)((0,p.d)((0,x.J)((0,L.F)((0,a.dM)((0,H.e)((0,$.d)((0,Z.j)((0,z.J)((0,A.q)((0,D.A)((0,S.P)(u.A)))))))))))))){constructor(g){super(g),this.attributeTableTemplate=null,this.copyright=null,this.dateFieldsTimeZone=null,this.definitionExpression=null,this.displayField=null,this.editingEnabled=!1,this.elevationInfo=null,this.fields=null,this.fieldsIndex=null,this.fullExtent=null,this.geometryType=null,this.hasZ=void 0,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.operationalLayerType="GeoJSON",this.outFields=null,this.popupEnabled=!0,this.popupTemplate=null,this.screenSizePerspectiveEnabled=!0,this.source=new P({layer:this}),this.spatialReference=o.A.WGS84,this.templates=null,this.title="GeoJSON",this.type="geojson"}destroy(){this.source?.destroy()}load(g){const R=this.loadFromPortal({supportedTypes:["GeoJson"],supportsData:!1},g).catch(N.QP).then(()=>this.source.load(g)).then(()=>{this.read(this.source.sourceJSON,{origin:"service",url:this.parsedUrl}),this.revert(["objectIdField","fields","timeInfo"],"service"),(0,me.yp)(this.renderer,this.fieldsIndex),(0,me.sv)(this.timeInfo,this.fieldsIndex)});return this.addResolvingPromise(R),Promise.resolve(this)}get capabilities(){return this.source?this.source.capabilities:null}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("capabilities"),(this._get("createQueryVersion")||0)+1}get defaultPopupTemplate(){return this.createPopupTemplate()}get isTable(){return this.loaded&&null==this.geometryType}get parsedUrl(){return this.url?(0,j.An)(this.url):null}set renderer(g){(0,me.yp)(g,this.fieldsIndex),this._set("renderer",g)}set url(g){if(!g)return void this._set("url",g);const R=(0,j.An)(g);this._set("url",R.path),R.query&&(this.customParameters={...this.customParameters,...R.query})}applyEdits(g,R){var w=this;return(0,i.A)(function*(){const{applyEdits:s}=yield e.e(3828).then(e.bind(e,13828));yield w.load();const I=yield s(w,w.source,g,R);return w.read({extent:w.source.sourceJSON.extent,timeInfo:w.source.sourceJSON.timeInfo},{origin:"service",ignoreDefaults:!0}),I})()}on(g,R){return super.on(g,R)}createPopupTemplate(g){return(0,Ee.tn)(this,g)}createQuery(){const g=new ae.A,R=this.capabilities?.data;g.returnGeometry=!0,R&&R.supportsZ&&(g.returnZ=!0),g.outFields=["*"],g.where=this.definitionExpression||"1=1";const{timeOffset:w,timeExtent:s}=this;return g.timeExtent=null!=w&&null!=s?s.offset(-w.value,w.unit):s||null,g}getFieldDomain(g,R){return this.getField(g)?.domain}getField(g){return this.fieldsIndex.get(g)}queryFeatures(g,R){return this.load().then(()=>this.source.queryFeatures(ae.A.from(g)||this.createQuery(),R)).then(w=>{if(w?.features)for(const s of w.features)s.layer=s.sourceLayer=this;return w})}queryObjectIds(g,R){return this.load().then(()=>this.source.queryObjectIds(ae.A.from(g)||this.createQuery(),R))}queryFeatureCount(g,R){return this.load().then(()=>this.source.queryFeatureCount(ae.A.from(g)||this.createQuery(),R))}queryExtent(g,R){return this.load().then(()=>this.source.queryExtent(ae.A.from(g)||this.createQuery(),R))}hasDataChanged(){var g=this;return(0,i.A)(function*(){try{const{dataChanged:R,updates:w}=yield g.source.refresh(g.customParameters);return null!=w&&g.read(w,{origin:"service",url:g.parsedUrl,ignoreDefaults:!0}),R}catch{}return!1})()}};(0,y._)([(0,E.MZ)(Q.zQ)],G.prototype,"attributeTableTemplate",void 0),(0,y._)([(0,E.MZ)({readOnly:!0,json:{read:!1,write:!1}})],G.prototype,"capabilities",null),(0,y._)([(0,E.MZ)({type:String})],G.prototype,"copyright",void 0),(0,y._)([(0,E.MZ)({readOnly:!0})],G.prototype,"createQueryVersion",null),(0,y._)([(0,E.MZ)((0,Ae.P6)("dateFieldsTimeReference"))],G.prototype,"dateFieldsTimeZone",void 0),(0,y._)([(0,E.MZ)({readOnly:!0})],G.prototype,"defaultPopupTemplate",null),(0,y._)([(0,E.MZ)({type:String,json:{name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],G.prototype,"definitionExpression",void 0),(0,y._)([(0,E.MZ)({type:String})],G.prototype,"displayField",void 0),(0,y._)([(0,E.MZ)({type:Boolean})],G.prototype,"editingEnabled",void 0),(0,y._)([(0,E.MZ)(Q.Yj)],G.prototype,"elevationInfo",void 0),(0,y._)([(0,E.MZ)({type:[ne.A],json:{name:"layerDefinition.fields",write:{ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"fields"}}}})],G.prototype,"fields",void 0),(0,y._)([(0,E.MZ)(ve.fieldsIndex)],G.prototype,"fieldsIndex",void 0),(0,y._)([(0,E.MZ)({type:l.A,json:{name:"extent"}})],G.prototype,"fullExtent",void 0),(0,y._)([(0,E.MZ)({type:["point","polygon","polyline","multipoint"],json:{read:{reader:m.gy.read}}})],G.prototype,"geometryType",void 0),(0,y._)([(0,E.MZ)({type:Boolean})],G.prototype,"hasZ",void 0),(0,y._)([(0,E.MZ)(Q.id)],G.prototype,"id",void 0),(0,y._)([(0,E.MZ)({type:Boolean,readOnly:!0})],G.prototype,"isTable",null),(0,y._)([(0,E.MZ)(Q.kF)],G.prototype,"labelsVisible",void 0),(0,y._)([(0,E.MZ)({type:[Me.A],json:{name:"layerDefinition.drawingInfo.labelingInfo",read:{reader:Pe.w},write:!0}})],G.prototype,"labelingInfo",void 0),(0,y._)([(0,E.MZ)(Q.fV)],G.prototype,"legendEnabled",void 0),(0,y._)([(0,E.MZ)({type:["show","hide"]})],G.prototype,"listMode",void 0),(0,y._)([(0,E.MZ)({type:String,json:{name:"layerDefinition.objectIdField",write:{ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"objectIdField"}}}})],G.prototype,"objectIdField",void 0),(0,y._)([(0,E.MZ)(Q.ke)],G.prototype,"opacity",void 0),(0,y._)([(0,E.MZ)({type:["GeoJSON"]})],G.prototype,"operationalLayerType",void 0),(0,y._)([(0,E.MZ)(ve.outFields)],G.prototype,"outFields",void 0),(0,y._)([(0,E.MZ)({readOnly:!0})],G.prototype,"parsedUrl",null),(0,y._)([(0,E.MZ)(Q.M6)],G.prototype,"popupEnabled",void 0),(0,y._)([(0,E.MZ)({type:b.A,json:{name:"popupInfo",write:!0}})],G.prototype,"popupTemplate",void 0),(0,y._)([(0,E.MZ)({types:de.Hg,json:{name:"layerDefinition.drawingInfo.renderer",write:!0,origins:{service:{name:"drawingInfo.renderer"},"web-scene":{types:de.XJ}}}})],G.prototype,"renderer",null),(0,y._)([(0,E.MZ)(Q.PY)],G.prototype,"screenSizePerspectiveEnabled",void 0),(0,y._)([(0,E.MZ)({readOnly:!0})],G.prototype,"source",void 0),(0,y._)([(0,E.MZ)({type:o.A})],G.prototype,"spatialReference",void 0),(0,y._)([(0,E.MZ)({type:[ue.A]})],G.prototype,"templates",void 0),(0,y._)([(0,E.MZ)()],G.prototype,"title",void 0),(0,y._)([(0,E.MZ)({json:{read:!1},readOnly:!0})],G.prototype,"type",void 0),(0,y._)([(0,E.MZ)(Q.OZ)],G.prototype,"url",null),G=(0,y._)([(0,n.$)("esri.layers.GeoJSONLayer")],G);const ge=G},78200:(V,K,e)=>{e.d(K,{F:()=>i,P:()=>y});const i={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!0,supportsCurrentUser:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!0,supportsReturnMesh:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByAnonymous:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0,supportsTrueCurve:!1},y={supportsDate:!0,supportsFixedInterval:!0,supportsAutoInterval:!0,supportsFixedBoundaries:!0,supportsStackBy:!0,supportsSplitBy:!0,supportsSnapToData:!1,supportsReturnFullIntervalBin:!1,supportsFirstDayOfWeek:!1,supportsNormalization:!0,supportedStatistics:{count:!0,sum:!0,avg:!0,var:!0,stddev:!0,min:!0,max:!0,percentileContinuous:!0,percentileDiscrete:!0,envelope:!0,centroid:!0,convexHull:!0},supportedNormalizationTypes:{field:!0,log:!0,naturalLog:!0,percentOfTotal:!0,squareRoot:!0}}},89962:(V,K,e)=>{e.d(K,{F0:()=>N,Vx:()=>W,e2:()=>c,f:()=>n});var i=e(3248),y=e(77806),b=e(78200),S=e(48254);function N(l){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===l||"esriGeometryMultipoint"===l?S.Cb:"esriGeometryPolyline"===l?S.yM:S.WR}}}const j=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let E=1;function W(l,o){if((0,i.A)("esri-csp-restrictions"))return()=>({[o]:null,...l});try{let m=`this${F(o)} = null;`;for(const _ in l)m+=`this${F(_)} = ${JSON.stringify(l[_])};`;const u=new Function(`\n      return class AttributesClass$${E++} {\n        constructor() {\n          ${m};\n        }\n      }\n    `)();return()=>new u}catch{return()=>({[o]:null,...l})}}function F(l){return j.test(l)?`.${l}`:`["${l}"]`}function c(l={}){return[{name:"New Feature",description:"",prototype:{attributes:(0,y.o8)(l)}}]}function n(l,o){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,isBranchVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:l},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:o,supportsDelete:o,supportsEditing:o,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryBins:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:o,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:b.F,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},queryAttributeBins:b.P,editing:{supportsGeometryUpdate:o,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1,zDefault:void 0}}}},73955:(V,K,e)=>{e.d(K,{FJ:()=>O,Dp:()=>P,KV:()=>a});var i=e(8189),y=e(89221),b=e(85211),E=(e(3248),e(35150),e(40707),e(76576)),W=e(50501),F=e(90660),c=e(31178),n=e(71065),l=e(50305),o=e(40856),m=e(43085);const u={write:{overridePolicy:(p,h,L)=>({enabled:!L||"scale"===L.filterMode})}};let _=class extends(F.A.ClonableMixin(n.A)){constructor(p){super(p),this.id=(0,m.lk)(),this.maxScale=0,this.minScale=0,this.title="",this.where=null}};(0,i._)([(0,b.MZ)({type:String,json:{write:!0}})],_.prototype,"id",void 0),(0,i._)([(0,b.MZ)({type:Number,json:u})],_.prototype,"maxScale",void 0),(0,i._)([(0,b.MZ)({type:Number,json:u})],_.prototype,"minScale",void 0),(0,i._)([(0,b.MZ)({type:String,json:{write:!0}})],_.prototype,"title",void 0),(0,i._)([(0,b.MZ)({type:String,json:{write:!0}})],_.prototype,"where",void 0),_=(0,i._)([(0,E.$)("esri.layers.support.DisplayFilter")],_);const v=_;var M=e(27960);let C=class extends(F.A.ClonableMixin(n.A)){constructor(p){super(p),this.activeFilterId=null,this.filters=new(c.A.ofType(v)),this.mode="manual"}writeFilters(p,h,L,x){const A=p.toArray();"scale"===this.mode&&A.sort((f,D)=>{const z=(0,o.oW)(D.minScale,f.minScale);return 0===z?f.maxScale-D.maxScale:z}),h[L]=A.map(f=>f.toJSON(x))}write(p,h){return super.write(p,(0,M.mW)(this,h))}};(0,i._)([(0,b.MZ)({type:String,json:{write:{overridePolicy:(p,h,L)=>({enabled:"manual"===L.filterMode,isRequired:!0})}}})],C.prototype,"activeFilterId",void 0),(0,i._)([(0,b.MZ)({type:c.A.ofType(v),nonNullable:!0,json:{write:!0}})],C.prototype,"filters",void 0),(0,i._)([(0,l.K)("filters")],C.prototype,"writeFilters",null),(0,i._)([(0,b.MZ)({type:["manual","scale"],nonNullable:!0,json:{name:"filterMode",write:!0}})],C.prototype,"mode",void 0),C=(0,i._)([(0,E.$)("esri.layers.support.DisplayFilterInfo")],C);const O=p=>{let h=class extends p{constructor(){super(...arguments),this.displayFilterEnabled=!0,this.displayFilterInfo=null}};return(0,i._)([(0,b.MZ)(P)],h.prototype,"displayFilterEnabled",void 0),(0,i._)([(0,b.MZ)(a)],h.prototype,"displayFilterInfo",void 0),h=(0,i._)([(0,E.$)("esri.layers.mixins.DisplayFilteredLayer")],h),h},P={type:Boolean,json:{name:"layerDefinition.disableDisplayFilter",read:{reader:p=>!p},write:{layerContainerTypes:W.K,writer(p,h,L){(0,y.sM)(L,!p,h)}},origins:{"web-scene":{write:!1,read:!1}}}},a={type:C,json:{name:"layerDefinition.displayFilterInfo",write:{enabled:!0,allowNull:!0,layerContainerTypes:W.K},origins:{"web-scene":{write:!1,read:!1}}}}},17049:(V,K,e)=>{e.d(K,{q:()=>d});var i=e(8189),y=e(5922),b=e(45272),S=e(85211),N=e(55739),W=(e(3248),e(40707),e(17221)),F=e(76576),c=e(50305),n=e(50501),l=e(34813),o=e(56558);const m={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},u={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},_={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},v={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,Object3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":m,"web-map/basemap":u,"web-map/tables":_,"link-chart/operational-layers":{...m,LinkChartLayer:!0},"link-chart/basemap":u,"link-chart/tables":_,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0,WCS:!0},"portal-item/tables":{ArcGISFeatureLayer:!0,SubtypeGroupTable:!0}};var M=e(22329),C=e(17181);const d=P=>{let a=class extends P{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(p,h,L){return"Group Layer"===L?.portalItem?.type?void 0:p}writeListMode(p,h,L,x){(x&&"ground"===x.layerContainerType||p&&(0,o.R)(this,L,{},x))&&(h[L]=p)}writeOperationalLayerType(p,h,L){p&&(h[L]=p)}writeTitle(p,h){h.title=p??"Layer"}readVisibilityTimeExtent(p){return p?C.A.fromArray(p):null}writeVisibilityTimeExtent(p,h,L,x){p&&"tables"!==x.layerContainerType&&(p.isEmpty?x?.messages&&x.messages.push(new y.A("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):h[L]=p.toArray())}read(p,h){h&&(h.layer=this),(0,l.t)(this,p,L=>super.read(p,L),h)}write(p,h){if(!this.persistenceEnabled&&!h?.ignorePersistenceEnabled)return null;if(h?.origin){const A=`${h.origin}/${h.layerContainerType||"operational-layers"}`;let D=!!v[A]?.[this.operationalLayerType];if("ArcGISTiledElevationServiceLayer"===this.operationalLayerType&&"web-scene/operational-layers"===A&&(D=!1),"ArcGISDimensionLayer"===this.operationalLayerType&&"web-map/operational-layers"===A&&(D=!1),!D)return h.messages?.push(new y.A("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${A}'`,{layer:this})),null}const L=super.write(p,{...h,layer:this}),x=!!h&&!!h.messages&&!!h.messages.filter(A=>A instanceof y.A&&"web-document-write:property-required"===A.name).length;return(0,b.w8)(L?.url)?(h?.messages?.push(new y.A("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&x?null:L}beforeSave(){}};return(0,i._)([(0,S.MZ)({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],a.prototype,"id",void 0),(0,i._)([(0,W.w)("id",["id"])],a.prototype,"readId",null),(0,i._)([(0,S.MZ)(M.C1)],a.prototype,"listMode",void 0),(0,i._)([(0,c.K)("listMode")],a.prototype,"writeListMode",null),(0,i._)([(0,S.MZ)({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:n.K,isRequired:!0}}}}})],a.prototype,"operationalLayerType",void 0),(0,i._)([(0,c.K)("operationalLayerType")],a.prototype,"writeOperationalLayerType",null),(0,i._)([(0,S.MZ)(M.ke)],a.prototype,"opacity",void 0),(0,i._)([(0,S.MZ)({type:Boolean,readOnly:!1})],a.prototype,"persistenceEnabled",void 0),(0,i._)([(0,S.MZ)({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],a.prototype,"title",void 0),(0,i._)([(0,c.K)("title"),(0,c.K)(["web-scene"],"title")],a.prototype,"writeTitle",null),(0,i._)([(0,S.MZ)({type:C.A,json:{origins:{"web-scene":{write:{layerContainerTypes:n.K}}}}})],a.prototype,"visibilityTimeExtent",void 0),(0,i._)([(0,W.w)("visibilityTimeExtent")],a.prototype,"readVisibilityTimeExtent",null),(0,i._)([(0,c.K)(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[N.jz,N.Uv]]}})],a.prototype,"writeVisibilityTimeExtent",null),(0,i._)([(0,S.MZ)({type:Boolean,json:{name:"visibility",write:{layerContainerTypes:n.K}}})],a.prototype,"visible",void 0),a=(0,i._)([(0,F.$)("esri.layers.mixins.OperationalLayer")],a),a}},43124:(V,K,e)=>{e.d(K,{Rr:()=>F,fY:()=>l,ne:()=>n});var i=e(8189),y=e(89221),b=e(85211),E=(e(3248),e(35150),e(40707),e(76576)),W=e(15848);function F(o,m,u){if(!o)return null;const _=o.find(M=>!!M.field);if(!_)return null;const v=new W.A;return v.read(_,u),[v]}const n={type:[W.A],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:F},write:{writer:function c(o,m,u,_){const v=o.find(M=>!!M.field);v&&(0,y.sM)(u,[v.toJSON()],m)}}}},l=o=>{let m=class extends o{constructor(){super(...arguments),this.orderBy=null}};return(0,i._)([(0,b.MZ)(n)],m.prototype,"orderBy",void 0),m=(0,i._)([(0,E.$)("esri.layers.mixins.OrderedLayer")],m),m}},85551:(V,K,e)=>{e.d(K,{A:()=>a});var i=e(10467),y=e(8189),b=e(23098),S=e(77469),N=e(89563),j=e(89447),E=e(5922),W=e(35150),F=e(11432),c=e(56492),n=e(45272),l=e(85211),u=(e(3248),e(40707),e(17221)),_=e(76576),v=e(50305),M=e(58443),C=e(73874),d=e(46577),O=e(52606),P=e(69927);const a=h=>{let L=class extends h{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=(0,F.pR)(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(x){x!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",x))}readPortalItem(x,A,f){if(A.itemId)return new d.default({id:A.itemId,portal:f?.portal})}writePortalItem(x,A){x?.id&&(A.itemId=x.id)}loadFromPortal(x,A){var f=this;return(0,i.A)(function*(){if(f.portalItem?.id)try{const{load:D}=yield Promise.all([e.e(2076),e.e(6180)]).then(e.bind(e,56180));return(0,c.Te)(A),yield D({instance:f,supportedTypes:x.supportedTypes,validateItem:x.validateItem,supportsData:x.supportsData,layerModuleTypeMap:x.layerModuleTypeMap,populateGroupLayer:x.populateGroupLayer},A)}catch(D){throw(0,c.zf)(D)||W.A.getLogger(f).warn(`Failed to load layer (${f.title}, ${f.id}) portal item (${f.portalItem.id})\n  ${D}`),D}})()}finishLoadEditablePortalLayer(x){var A=this;return(0,i.A)(function*(){A._set("userHasEditingPrivileges",yield A._fetchUserHasEditingPrivileges(x).catch(f=>((0,c.QP)(f),!0)))})()}setUserPrivileges(x,A){var f=this;return(0,i.A)(function*(){if(!b.A.userPrivilegesApplied)return f.finishLoadEditablePortalLayer(A);if(f.url)try{const{features:{edit:D,fullEdit:z},content:{updateItem:Z}}=yield f._fetchUserPrivileges(x,A);f._set("userHasEditingPrivileges",D),f._set("userHasFullEditingPrivileges",z),f._set("userHasUpdateItemPrivileges",Z)}catch(D){(0,c.QP)(D)}})()}_fetchUserPrivileges(x,A){var f=this;return(0,i.A)(function*(){let D=f.portalItem;if(!x||!D||!D.loaded||D.sourceUrl)return f._fetchFallbackUserPrivileges(A);const z=!S.id?.findCredential(f.url),Z=x===D.id;if(Z&&D.portal.user)return f._getUserPrivileges(D,z);let H,$;if(Z)H=D.portal.url;else try{H=yield(0,M.wI)(f.url,A)}catch(te){(0,c.QP)(te)}if(!H||!(0,n.b8)(H,D.portal.url))return f._fetchFallbackUserPrivileges(A);try{const te=null!=A?A.signal:null;$=yield S.id?.getCredential(`${H}/sharing`,{prompt:!1,signal:te})}catch(te){(0,c.QP)(te)}if(!$)return{features:{edit:!0,fullEdit:!1},content:{updateItem:!1}};try{if(Z?yield D.reload():(D=new d.default({id:x,portal:{url:H}}),yield D.load(A)),D.portal.user)return f._getUserPrivileges(D,z)}catch(te){(0,c.QP)(te)}return{features:{edit:!0,fullEdit:!1},content:{updateItem:!1}}})()}_getUserPrivileges(x,A){const f=(0,P.It)(x);return A&&(f.features.edit=!0),f}_fetchFallbackUserPrivileges(x){var A=this;return(0,i.A)(function*(){let f=!0;try{f=yield A._fetchUserHasEditingPrivileges(x)}catch(D){(0,c.QP)(D)}return{features:{edit:f,fullEdit:!1},content:{updateItem:!1}}})()}_fetchUserHasEditingPrivileges(x){var A=this;return(0,i.A)(function*(){const f=A.url?S.id?.findCredential(A.url):null;if(!f)return!0;const D=p.credential===f?p.user:yield A._fetchEditingUser(x);return p.credential=f,p.user=D,null==D?.privileges||D.privileges.includes("features:user:edit")})()}_fetchEditingUser(x){var A=this;return(0,i.A)(function*(){const f=A.portalItem?.portal?.user;if(f)return f;const D=S.id?.findServerInfo(A.url??"");if(!D?.owningSystemUrl)return null;const z=`${D.owningSystemUrl}/sharing/rest`,Z=C.A.getDefault();if(Z&&Z.loaded&&(0,n.S8)(Z.restUrl)===(0,n.S8)(z))return Z.user;const H=`${z}/community/self`,$=null!=x?x.signal:null,Q=yield(0,j.Ke)((0,N.A)(H,{authMode:"no-prompt",query:{f:"json"},signal:$}));return Q.ok?O.A.fromJSON(Q.value.data):null})()}read(x,A){A&&(A.layer=this),super.read(x,A)}write(x,A){const f=A?.portal,D=this.portalItem?.id&&(this.portalItem.portal||C.A.getDefault());return f&&D&&!(0,n.ut)(D.restUrl,f.restUrl)?(A.messages&&A.messages.push(new E.A("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(x,{...A,layer:this})}};return(0,y._)([(0,l.MZ)({type:d.default})],L.prototype,"portalItem",null),(0,y._)([(0,u.w)("web-document","portalItem",["itemId"])],L.prototype,"readPortalItem",null),(0,y._)([(0,v.K)("web-document","portalItem",{itemId:{type:String}})],L.prototype,"writePortalItem",null),(0,y._)([(0,l.MZ)({clonable:!1})],L.prototype,"resourceReferences",void 0),(0,y._)([(0,l.MZ)({type:Boolean,readOnly:!0})],L.prototype,"userHasEditingPrivileges",void 0),(0,y._)([(0,l.MZ)({type:Boolean,readOnly:!0})],L.prototype,"userHasFullEditingPrivileges",void 0),(0,y._)([(0,l.MZ)({type:Boolean,readOnly:!0})],L.prototype,"userHasUpdateItemPrivileges",void 0),L=(0,y._)([(0,_.$)("esri.layers.mixins.PortalLayer")],L),L},p={credential:null,user:null}},84311:(V,K,e)=>{e.d(K,{B:()=>m,e:()=>u});var i=e(8189),y=e(85211),j=(e(3248),e(35150),e(40707),e(17221)),E=e(76576),W=e(50501),F=e(86300),c=e(38488),n=e(26957),l=e(17181),o=e(89352);const m={type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation",layerContainerTypes:W.K}}},u=_=>{let v=class extends _{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(M,C){const d=C.timeInfo.exportOptions;if(!d)return null;const O=d.timeOffset,P=n.j.fromJSON(d.timeOffsetUnits);return O&&P?new o.A({value:O,unit:P}):null}set timeInfo(M){(0,F.sv)(M,this.fieldsIndex),this._set("timeInfo",M)}};return(0,i._)([(0,y.MZ)({type:l.A,json:{write:!1}})],v.prototype,"timeExtent",void 0),(0,i._)([(0,y.MZ)({type:o.A})],v.prototype,"timeOffset",void 0),(0,i._)([(0,j.w)("service","timeOffset",["timeInfo.exportOptions"])],v.prototype,"readOffset",null),(0,i._)([(0,y.MZ)({value:null,type:c.A,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],v.prototype,"timeInfo",null),(0,i._)([(0,y.MZ)(m)],v.prototype,"useViewTime",void 0),v=(0,i._)([(0,E.$)("esri.layers.mixins.TemporalLayer")],v),v}},77486:(V,K,e)=>{e.d(K,{d:()=>a});var i=e(8189),y=e(85211),j=(e(3248),e(35150),e(40707),e(76576)),E=e(92165),W=e(90660),F=e(71065),c=e(89221),n=e(50305),l=e(2052),o=e(22329),m=e(54947),u=e(31595);let _=class extends(W.A.ClonableMixin(F.A)){constructor(p){super(p),this.labelingInfo=null,this.labelsVisible=!0,this.renderer=null,this.visible=!0}};(0,i._)([(0,y.MZ)({type:[m.A],json:{write:!0}})],_.prototype,"labelingInfo",void 0),(0,i._)([(0,y.MZ)(o.kF)],_.prototype,"labelsVisible",void 0),(0,i._)([(0,y.MZ)({types:u.Hg,json:{write:!0}})],_.prototype,"renderer",void 0),(0,i._)([(0,y.MZ)({type:Boolean,json:{write:!0}})],_.prototype,"visible",void 0),_=(0,i._)([(0,j.$)("esri.layers.support.TrackPartInfo")],_);const v=_;var M=e(73747),C=e(91644),d=e(89352);let O=class extends(W.A.ClonableMixin(F.A)){constructor(p){super(p),this.enabled=!0,this.fields=[],this.latestObservations=new v({renderer:new M.A({symbol:C.UK.clone()})}),this.maxDisplayDuration=null,this.maxDisplayObservationsPerTrack=0,this.popupEnabled=!0,this.popupTemplate=null,this.previousObservations=new v({renderer:new M.A({symbol:C.UK.clone()})}),this.trackLines=new v({renderer:new M.A({symbol:C.A7.clone()})}),this.timeField="startTimeField"}writeFields(p,h,L){const x=p.filter(A=>"avg_angle"!==A.statisticType).map(A=>A.toJSON());(0,c.sM)(L,x,h)}};(0,i._)([(0,y.MZ)({type:Boolean,json:{write:!0}})],O.prototype,"enabled",void 0),(0,i._)([(0,y.MZ)({type:[l.A],json:{write:!0}})],O.prototype,"fields",void 0),(0,i._)([(0,n.K)("fields")],O.prototype,"writeFields",null),(0,i._)([(0,y.MZ)({type:v,json:{write:!0}})],O.prototype,"latestObservations",void 0),(0,i._)([(0,y.MZ)({type:d.A,json:{write:!0}})],O.prototype,"maxDisplayDuration",void 0),(0,i._)([(0,y.MZ)({type:Number,json:{write:!0}})],O.prototype,"maxDisplayObservationsPerTrack",void 0),(0,i._)([(0,y.MZ)(o.M6)],O.prototype,"popupEnabled",void 0),(0,i._)([(0,y.MZ)({type:E.A,json:{name:"popupInfo",write:!0}})],O.prototype,"popupTemplate",void 0),(0,i._)([(0,y.MZ)({type:v,json:{write:!0}})],O.prototype,"previousObservations",void 0),(0,i._)([(0,y.MZ)({type:v,json:{write:!0}})],O.prototype,"trackLines",void 0),(0,i._)([(0,y.MZ)({type:["timeReceived","startTimeField","endTimeField"],json:{read:!0,write:!0}})],O.prototype,"timeField",void 0),O=(0,i._)([(0,j.$)("esri.layers.support.TrackInfo")],O);const P=O,a=p=>{let h=class extends p{constructor(){super(...arguments),this.trackInfo=null}};return(0,i._)([(0,y.MZ)({type:P})],h.prototype,"trackInfo",void 0),h=(0,i._)([(0,j.$)("esri.layers.mixins.TrackableLayer")],h),h}},73258:(V,K,e)=>{e.d(K,{A:()=>m});var i=e(5922),y=e(71065),b=e(35150),S=e(60797),N=e(24098),j=e(86300),E=e(20543),W=e(22639),F=e(44549);const o=new Map;class m{static fromJSON(d){return new m(d.fields,d.timeZoneByFieldName)}static fromLayer(d){return new m(d.fields??[],M(d))}static fromLayerJSON(d){return new m(d.fields??[],M(d))}constructor(d=[],O){this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=d||[],this._timeZoneByFieldName=O?new Map(O):null;const P=[];for(const a of this.fields){const p=a?.name,h=_(p);if(p&&h){const L=u(p);this._fieldsMap.set(p,a),this._fieldsMap.set(L,a),this._normalizedFieldsMap.set(h,a),P.push(`${L}:${a.type}:${this._timeZoneByFieldName?.get(p)}`),(0,j.vE)(a)?(this.dateFields.push(a),this._dateFieldsSet.add(a)):(0,j.WA)(a)&&(this._numericFieldsSet.add(a),this.numericFields.push(a)),(0,j.te)(a)||(0,j.Xz)(a)||(a.editable=null==a.editable||!!a.editable,a.nullable=null==a.nullable||!!a.nullable)}}P.sort(),this.uid=P.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const d of this.fields)(0,j.te)(d)||(0,j.Xz)(d)||d.nullable||void 0!==(0,j.lD)(d)||this._requiredFields.push(d)}return this._requiredFields}equals(d){return this.uid===d?.uid}has(d){return null!=this.get(d)}get(d){if(!d)return;let O=this._fieldsMap.get(d);return O||(O=this._fieldsMap.get(u(d))??this._normalizedFieldsMap.get(_(d)),O&&this._fieldsMap.set(d,O),O)}getTimeZone(d){const O=this.get(d&&"string"!=typeof d?d.name:d);return O?this._timeZoneByFieldName?this._timeZoneByFieldName.get(O.name):"date"===O.type||"esriFieldTypeDate"===O.type?(b.A.getLogger("esri.layers.support.FieldsIndex").errorOnce(new i.A("getTimeZone:no-timezone-information",`no time zone information for field '${O.name}'`)),E.n$):v.has(O.type)?E.L5:null:null}getLuxonTimeZone(d){const O=this.getTimeZone(d);return O?O===E.L5?N.GB.instance:O===E.n$?F.mQ.utcInstance:(0,S.tE)(o,O,()=>F.oh.create(O)):null}isDateField(d){return this._dateFieldsSet.has(this.get(d))}isTimeOnlyField(d){return(0,j.OH)(this.get(d))}isNumericField(d){return this._numericFieldsSet.has(this.get(d))}normalizeFieldName(d){return this.get(d)?.name??void 0}toJSON(){return{fields:this.fields.map(d=>y.A.isSerializable(d)?d.toJSON():d),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}function u(C){return C.trim().toLowerCase()}function _(C){return(0,j.rS)(C)?.toLowerCase()??""}const v=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function M(C){const d=new Map;if(!C.fields)return d;const O=!0===C.datesInUnknownTimezone,{timeInfo:P,editFieldsInfo:a}=C,p=(P?"startField"in P?P.startField:P.startTimeField:"")??"",h=(P?"endField"in P?P.endField:P.endTimeField:"")??"",L=function l(C){return"dateFieldsTimeZone"in C}(C)?C.dateFieldsTimeZone??null:C.dateFieldsTimeReference?(0,W.ZS)(C.dateFieldsTimeReference):null,x=a?function c(C){return"timeZone"in C}(a)?a.timeZone??L:a.dateFieldsTimeReference?(0,W.ZS)(a.dateFieldsTimeReference):L??E.n$:null,A=P?function n(C){return"timeZone"in C}(P)?P.timeZone??L:P.timeReference?(0,W.ZS)(P.timeReference):L:null,f=new Map([[u(a?.creationDateField??""),x],[u(a?.editDateField??""),x],[u(p),A],[u(h),A]]);for(const{name:D,type:z}of C.fields)if(v.has(z))d.set(D,E.L5);else if("date"!==z&&"esriFieldTypeDate"!==z)d.set(D,null);else if(O)d.set(D,E.L5);else{const Z=f.get(u(D??""))??L;d.set(D,Z)}return d}},15848:(V,K,e)=>{e.d(K,{A:()=>l});var F,i=e(8189),y=e(49976),b=e(71065),S=e(85211),W=(e(3248),e(35150),e(40707),e(76576));const c=new y.J({asc:"ascending",desc:"descending"});let n=F=class extends b.A{constructor(o){super(o),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new F({field:this.field,valueExpression:this.valueExpression,order:this.order})}};(0,i._)([(0,S.MZ)({type:String,json:{write:!0}})],n.prototype,"field",void 0),(0,i._)([(0,S.MZ)({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],n.prototype,"valueExpression",void 0),(0,i._)([(0,S.MZ)({type:c.apiValues,json:{type:c.jsonValues,read:c.read,write:c.write}})],n.prototype,"order",void 0),n=F=(0,i._)([(0,W.$)("esri.layers.support.OrderByInfo")],n);const l=n},38488:(V,K,e)=>{e.d(K,{A:()=>_});var i=e(8189),y=e(90660),b=e(71065),S=e(85211),W=(e(3248),e(35150),e(40707),e(17221)),F=e(76576),c=e(50305),n=e(17181),l=e(89352),o=e(22639);function m(v,M){return l.A.fromJSON({value:v,unit:M})}let u=class extends(y.A.ClonableMixin(b.A)){constructor(v){super(v),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(v,M){return M.timeExtent&&Array.isArray(M.timeExtent)&&2===M.timeExtent.length?n.A.fromArray(M.timeExtent):null}writeFullTimeExtent(v,M){M.timeExtent=null!=v?.start&&null!=v.end?v.toArray():null}readInterval(v,M){return M.timeInterval&&M.timeIntervalUnits?m(M.timeInterval,M.timeIntervalUnits):M.defaultTimeInterval&&M.defaultTimeIntervalUnits?m(M.defaultTimeInterval,M.defaultTimeIntervalUnits):null}writeInterval(v,M){M.timeInterval=v?.toJSON().value??null,M.timeIntervalUnits=v?.toJSON().unit??null}};(0,i._)([(0,S.MZ)({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],u.prototype,"cumulative",void 0),(0,i._)([(0,S.MZ)({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],u.prototype,"endField",void 0),(0,i._)([(0,S.MZ)({type:n.A,json:{write:{enabled:!0,allowNull:!0}}})],u.prototype,"fullTimeExtent",void 0),(0,i._)([(0,W.w)("fullTimeExtent",["timeExtent"])],u.prototype,"readFullTimeExtent",null),(0,i._)([(0,c.K)("fullTimeExtent")],u.prototype,"writeFullTimeExtent",null),(0,i._)([(0,S.MZ)({type:Boolean,json:{write:!0}})],u.prototype,"hasLiveData",void 0),(0,i._)([(0,S.MZ)({type:l.A,json:{write:{enabled:!0,allowNull:!0}}})],u.prototype,"interval",void 0),(0,i._)([(0,W.w)("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],u.prototype,"readInterval",null),(0,i._)([(0,c.K)("interval")],u.prototype,"writeInterval",null),(0,i._)([(0,S.MZ)({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],u.prototype,"startField",void 0),(0,i._)([(0,S.MZ)((0,o.P6)("timeReference",!0))],u.prototype,"timeZone",void 0),(0,i._)([(0,S.MZ)({type:String,json:{write:{enabled:!0,allowNull:!0}}})],u.prototype,"trackIdField",void 0),(0,i._)([(0,S.MZ)({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],u.prototype,"useTime",void 0),(0,i._)([(0,S.MZ)({type:[Date],json:{read:!1}})],u.prototype,"stops",void 0),u=(0,i._)([(0,F.$)("esri.layers.support.TimeInfo")],u);const _=u},27960:(V,K,e)=>{e.d(K,{Ch:()=>N,mW:()=>b,u2:()=>S});var i=e(69287),y=e(63484);function b(o,m){return{...m,filterMode:o.mode}}function S(o,m){return E(o,m).next().value??null}function N(o,m,u){const _=function j(o){if("manual"===c(o))return null;const m=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:u,maxScale:_}of o.filters)m[0]=Math.max(m[0],n(u)),m[1]=Math.min(m[1],l(_));return m}(o);if(_&&((0,i.gg)(m,_[0])||(0,i.ZH)(u,_[1])))return"";const v=Array.from(E(o,m,u)),M=function W(o,m,u){if(0===o.length)return!0;const _=n(o.at(0)?.minScale),v=l(o.at(-1)?.maxScale);if((0,i.ZH)(_,m)||(0,i.gg)(v,u))return!0;for(let M=0;M<o.length-1;M++){const C=o[M];if((0,i.ZH)(n(o[M+1].minScale),l(C.maxScale)))return!0}return!1}(v,m,u)?"1=1":v.map(C=>C.where||"1=1").reduce((C,d)=>(0,y.IW)(C,d),"");return M&&"1=1"!==M?M:""}function*E(o,m,u){if("manual"===c(o)){const _=o.filters.find(v=>v.id===o.activeFilterId);_&&(yield _)}else{"object"==typeof m&&(m=m.scale);for(const _ of o.filters)F(_.minScale,_.maxScale,m,u)&&(yield _)}}function F(o,m,u,_){return o=n(o),u=n(u),m=l(m),!(!(0,i.Sp)(u,o)&&(_??u)>o||(0,i.Hx)(m,u)||void 0!==_&&(0,i.Sp)(_,o))}function c(o){return"mode"in o?o.mode:o.filterMode}function n(o){return o||Number.POSITIVE_INFINITY}function l(o){return o||0}},3404:(V,K,e)=>{e.d(K,{p:()=>j});var i=e(3248),y=e(35150),b=e(29141),S=e(73258),N=e(86300);function j(){return{fields:{type:[b.A],value:null,set:function(E){if(E&&(0,i.A)("big-integer-warning-enabled")){const W=E.filter(F=>"big-integer"===F.type||"oid"===F.type&&(F.length||0)>=8);if(W.length){const F=W.map(c=>`'${c.name}'`).join(", ");y.A.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${F}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",E)}},fieldsIndex:{readOnly:!0,get(){return S.A.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(E){this._userOutFields=E,this.notifyChange("outFields")},get:function(){const E=this._userOutFields;if(!E?.length)return null;if(E.includes("*"))return["*"];if(!this.fields)return E;for(const W of E)this.fieldsIndex?.has(W)||y.A.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${W} found in outFields`,{layer:this,outFields:E});return(0,N.DB)(this.fieldsIndex,E)}}}}},4858:(V,K,e)=>{e.d(K,{BI:()=>m,D3:()=>l,XJ:()=>o,lc:()=>n,mX:()=>_,rU:()=>u,tH:()=>P});var i=e(1119);const y="__begin__",b="__end__",S=new RegExp(y,"ig"),N=new RegExp(b,"ig"),j=new RegExp("^"+y,"i"),E=new RegExp(b+"$","i"),W='"',F=W+" + ",c=" + "+W;function n(a){return a.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function l(a){return a.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function o(a){const p={expression:"",type:"none"};return a.labelExpressionInfo?a.labelExpressionInfo.value?(p.expression=a.labelExpressionInfo.value,p.type="conventional"):a.labelExpressionInfo.expression&&(p.expression=a.labelExpressionInfo.expression,p.type="arcade"):null!=a.labelExpression&&(p.expression=n(a.labelExpression),p.type="conventional"),p}function m(a){const p=o(a);switch(p.type){case"conventional":return _(p.expression);case"arcade":return p.expression}return null}function u(a){const p=o(a);switch(p.type){case"conventional":return function M(a){return a?.match(v)?.[1].trim()||null}(p.expression);case"arcade":return P(p.expression)}return null}function _(a){let p;return a?(p=(0,i.HC)(a,h=>y+'$feature["'+h+'"]'+b),p=j.test(p)?p.replace(j,""):W+p,p=E.test(p)?p.replace(E,""):p+W,p=p.replaceAll(S,F).replaceAll(N,c)):p='""',p}const v=/^\s*\{([^}]+)\}\s*$/i,C=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,d=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,O=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function P(a){if(!a)return null;let p=C.exec(a)||d.exec(a);return p?p[1]||p[3]:(p=O.exec(a),p?p[2]:null)}},69927:(V,K,e)=>{e.d(K,{It:()=>u,LG:()=>E,OM:()=>c,Sm:()=>n,Y:()=>W,bK:()=>F,mm:()=>m,sQ:()=>l});var i=e(10467),y=e(13970),b=e(32034),S=e(55039);function j(){return(j=(0,i.A)(function*(_){const v=_.spatialReference;if(v.isWGS84)return _.clone();if(v.isWebMercator)return(0,S.ci)(_);const M=b.A.WGS84;return yield(0,y.initializeProjection)(v,M),(0,y.project)(_,M)})).apply(this,arguments)}function E(_,v){if(!W(_,v)){const M=_.typeKeywords;M?M.push(v):_.typeKeywords=[v]}}function W(_,v){return!!_.typeKeywords?.includes(v)}function F(_){return W(_,m.HOSTED_SERVICE)}function c(_,v){const M=_.typeKeywords;if(M){const C=M.indexOf(v);C>-1&&M.splice(C,1)}}function n(_,v,M){M?E(_,v):c(_,v)}function l(_){return o.apply(this,arguments)}function o(){return o=(0,i.A)(function*(_){const v=_.clone().normalize();let M;if(v.length>1)for(const C of v)M?C.width>M.width&&(M=C):M=C;else M=v[0];return function N(_){return j.apply(this,arguments)}(M)}),o.apply(this,arguments)}const m={DEVELOPER_BASEMAP:"DeveloperBasemap",GROUP_LAYER_MAP:"Map",HOSTED_SERVICE:"Hosted Service",JSAPI:"ArcGIS API for JavaScript",LOCAL_SCENE:"ViewingMode-Local",METADATA:"Metadata",MULTI_LAYER:"Multilayer",ORIENTED_IMAGERY_LAYER:"OrientedImageryLayer",SINGLE_LAYER:"Singlelayer",SUBTYPE_GROUP_LAYER:"SubtypeGroupLayer",SUBTYPE_GROUP_TABLE:"SubtypeGroupTable",TABLE:"Table",TILED_IMAGERY:"Tiled Imagery"};function u(_){const{portal:v,isOrgItem:M,itemControl:C}=_,d=v.user?.privileges;let O=!d||d.includes("features:user:edit"),P=!!M&&!!d?.includes("features:user:fullEdit");const a="update"===C||"admin"===C;return a?P=O=!0:P&&(O=!0),{features:{edit:O,fullEdit:P},content:{updateItem:a}}}},26957:(V,K,e)=>{e.d(K,{j:()=>y});const y=(0,e(49976).O)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0})},78592:(V,K,e)=>{e.d(K,{O3:()=>F,PU:()=>E,YW:()=>n,ex:()=>N,hv:()=>c,zp:()=>j});var i=e(69287),y=e(67685),b=e(53781),S=e(89141);const N=2.4;function j(l){return(0,y.PN)(l*N)}function E(l){return(0,y.Lz)(l)/N}function W(l,o,m,u){let{color:_,ratio:v}=o,{color:M,ratio:C}=m;C===v&&(1===C?v-=1e-6:C+=1e-6);const d=(0,i.qE)((u-v)/(C-v),0,1);(0,b.l)(l,_.toArray(),M.toArray(),d)}function F(l){const m=new Uint8ClampedArray(2048);if((l=l.filter(({ratio:C})=>C>=0&&C<=1).sort((C,d)=>C.ratio-d.ratio).map(({color:C,ratio:d})=>({color:C,ratio:Math.max(d,.001)}))).length<1)return m;let u=l[0],_=l[0],v=1;const M=(0,S.vt)();for(let C=0;C<512;C++){const d=(C+.5)/512;for(;d>_.ratio&&v<l.length;)u=_,_=l[v++];W(M,u,_,d),m.set(M,4*C)}return m}function c(l,o,m){const u=Math.sqrt(l**2+o**2)/m;return u>1?0:3/(Math.PI*m**2)*(1-u**2)**2}function n(l){return"function"==typeof l?l:l?o=>+o[l]:()=>1}},93327:(V,K,e)=>{e.d(K,{A:()=>C});var _,i=e(8189),y=e(81098),b=e(49976),S=e(71065),N=e(77806),j=e(85211),F=(e(3248),e(35150),e(17221)),c=e(76576),n=e(50305),l=e(32034),o=e(61320),m=e(6434),u=e(29141);const v=new b.J({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let M=_=class extends S.A{constructor(d){super(d),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(d,O){return this.readFeaturesWithClass(d,O,y.A)}writeGeometryType(d,O,P,a){if(d)return void v.write(d,O,P,a);const{features:p}=this;if(p)for(const h of p)if(null!=h?.geometry)return void v.write(h.geometry.type,O,P,a)}readQueryGeometry(d,O){if(!d)return null;const P=!!d.spatialReference,a=(0,o.rS)(d);return a&&!P&&O.spatialReference&&(a.spatialReference=l.A.fromJSON(O.spatialReference)),a}writeSpatialReference(d,O){if(d)return void(O.spatialReference=d.toJSON());const{features:P}=this;if(P)for(const a of P)if(a&&null!=a.geometry&&a.geometry.spatialReference)return void(O.spatialReference=a.geometry.spatialReference.toJSON())}clone(){return new _(this.cloneProperties())}cloneProperties(){return(0,N.o8)({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(d){const O=this.write();if(O.features&&Array.isArray(d)&&d.length>0)for(let P=0;P<O.features.length;P++){const a=O.features[P];if(a.geometry){const p=d?.[P];a.geometry=p?.toJSON()||a.geometry}}return O}quantize(d){const{scale:[O,P],translate:[a,p]}=d,x=this.features,A=this._getQuantizationFunction(this.geometryType,f=>Math.round((f-a)/O),f=>Math.round((p-f)/P));for(let f=0,D=x.length;f<D;f++)A?.(x[f].geometry)||(x.splice(f,1),f--,D--);return this.transform=d,this}unquantize(){const{geometryType:d,features:O,transform:P}=this;if(!P)return this;const{translate:[a,p],scale:[h,L]}=P;let f=null,D=null;if(this.hasZ&&null!=P?.scale?.[2]){const{translate:[,,Z],scale:[,,H]}=P;f=$=>$*H+Z}if(this.hasM&&null!=P?.scale?.[3]){const{translate:[,,,Z],scale:[,,,H]}=P;D=$=>null==$?$:$*H+Z}const z=this._getHydrationFunction(d,Z=>Z*h+a,Z=>p-Z*L,f,D);for(const{geometry:Z}of O)null!=Z&&z&&z(Z);return this.transform=null,this}readFeaturesWithClass(d,O,P){const a=l.A.fromJSON(O.spatialReference),p=[];for(let h=0;h<d.length;h++){const L=d[h],x=P.fromJSON(L),A=L.geometry?.spatialReference;null==x.geometry||A||(x.geometry.spatialReference=a);const f=L.aggregateGeometries,D=x.aggregateGeometries;if(f&&null!=D)for(const z in D){const Z=D[z],H=f[z],$=H?.spatialReference;null==Z||$||(Z.spatialReference=a)}p.push(x)}return p}_quantizePoints(d,O,P){let a,p;const h=[];for(let L=0,x=d.length;L<x;L++){const A=d[L];if(L>0){const f=O(A[0]),D=P(A[1]);f===a&&D===p||(h.push([f-a,D-p]),a=f,p=D)}else a=O(A[0]),p=P(A[1]),h.push([a,p])}return h.length>0?h:null}_getQuantizationFunction(d,O,P){return"point"===d?a=>(a.x=O(a.x),a.y=P(a.y),a):"polyline"===d||"polygon"===d?a=>{const p=(0,o.Bi)(a)?a.rings:a.paths,h=[];for(let L=0,x=p.length;L<x;L++){const f=this._quantizePoints(p[L],O,P);f&&h.push(f)}return h.length>0?((0,o.Bi)(a)?a.rings=h:a.paths=h,a):null}:"multipoint"===d?a=>{const p=this._quantizePoints(a.points,O,P);return p&&p.length>0?(a.points=p,a):null}:"extent"===d?a=>a:null}_getHydrationFunction(d,O,P,a,p){return"point"===d?h=>{h.x=O(h.x),h.y=P(h.y),a&&(h.z=a(h.z))}:"polyline"===d||"polygon"===d?h=>{const L=(0,o.Bi)(h)?h.rings:h.paths;let x,A;for(let f=0,D=L.length;f<D;f++){const z=L[f];for(let Z=0,H=z.length;Z<H;Z++){const $=z[Z];Z>0?(x+=$[0],A+=$[1]):(x=$[0],A=$[1]),$[0]=O(x),$[1]=P(A)}}if(a&&p)for(let f=0,D=L.length;f<D;f++){const z=L[f];for(let Z=0,H=z.length;Z<H;Z++){const $=z[Z];$[2]=a($[2]),$[3]=p($[3])}}else if(a)for(let f=0,D=L.length;f<D;f++){const z=L[f];for(let Z=0,H=z.length;Z<H;Z++){const $=z[Z];$[2]=a($[2])}}else if(p)for(let f=0,D=L.length;f<D;f++){const z=L[f];for(let Z=0,H=z.length;Z<H;Z++){const $=z[Z];$[2]=p($[2])}}}:"extent"===d?h=>{h.xmin=O(h.xmin),h.ymin=P(h.ymin),h.xmax=O(h.xmax),h.ymax=P(h.ymax),a&&null!=h.zmax&&null!=h.zmin&&(h.zmax=a(h.zmax),h.zmin=a(h.zmin)),p&&null!=h.mmax&&null!=h.mmin&&(h.mmax=p(h.mmax),h.mmin=p(h.mmin))}:"multipoint"===d?h=>{const L=h.points;let x,A;for(let f=0,D=L.length;f<D;f++){const z=L[f];f>0?(x+=z[0],A+=z[1]):(x=z[0],A=z[1]),z[0]=O(x),z[1]=P(A)}if(a&&p)for(let f=0,D=L.length;f<D;f++){const z=L[f];z[2]=a(z[2]),z[3]=p(z[3])}else if(a)for(let f=0,D=L.length;f<D;f++){const z=L[f];z[2]=a(z[2])}else if(p)for(let f=0,D=L.length;f<D;f++){const z=L[f];z[2]=p(z[2])}}:null}};(0,i._)([(0,j.MZ)({type:String,json:{write:!0}})],M.prototype,"displayFieldName",void 0),(0,i._)([(0,j.MZ)({type:Boolean,json:{write:{overridePolicy:d=>({enabled:d})}}})],M.prototype,"exceededTransferLimit",void 0),(0,i._)([(0,j.MZ)({type:[y.A],json:{write:!0}})],M.prototype,"features",void 0),(0,i._)([(0,F.w)("features")],M.prototype,"readFeatures",null),(0,i._)([(0,j.MZ)({type:[u.A],json:{write:!0}})],M.prototype,"fields",void 0),(0,i._)([(0,j.MZ)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:v.read}}})],M.prototype,"geometryType",void 0),(0,i._)([(0,n.K)("geometryType")],M.prototype,"writeGeometryType",null),(0,i._)([(0,j.MZ)({type:Boolean,json:{write:{overridePolicy:d=>({enabled:d})}}})],M.prototype,"hasM",void 0),(0,i._)([(0,j.MZ)({type:Boolean,json:{write:{overridePolicy:d=>({enabled:d})}}})],M.prototype,"hasZ",void 0),(0,i._)([(0,j.MZ)({types:m.yR,json:{write:!0}})],M.prototype,"queryGeometry",void 0),(0,i._)([(0,F.w)("queryGeometry")],M.prototype,"readQueryGeometry",null),(0,i._)([(0,j.MZ)({type:l.A,json:{write:!0}})],M.prototype,"spatialReference",void 0),(0,i._)([(0,n.K)("spatialReference")],M.prototype,"writeSpatialReference",null),(0,i._)([(0,j.MZ)({json:{write:!0}})],M.prototype,"transform",void 0),M=_=(0,i._)([(0,c.$)("esri.rest.support.FeatureSet")],M),M.prototype.toJSON.isDefaultToJSON=!0;const C=M},68470:(V,K,e)=>{e.d(K,{K:()=>l,Q:()=>F});var i=e(8189),y=e(49976),b=e(35150),S=e(85211),E=(e(3248),e(40707),e(15463)),W=e(76576);const F=(0,y.O)()({naturalLog:"natural-log",squareRoot:"square-root",percentOfTotal:"percent-of-total",log:"log",field:"field"}),c="percent-of-total",n="field",l=o=>{let m=class extends o{constructor(){super(...arguments),this.normalizationField=null,this.normalizationMaxValue=null,this.normalizationMinValue=null,this.normalizationTotal=null}get normalizationType(){let u=this._get("normalizationType");const _=!!this.normalizationField,v=null!=this.normalizationTotal;return _||v?(u=_&&n||v&&c||null,_&&v&&b.A.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):u!==n&&u!==c||(u=null),u}set normalizationType(u){this._set("normalizationType",u)}};return(0,i._)([(0,S.MZ)({type:String,json:{name:"parameters.normalizationField",write:!0}})],m.prototype,"normalizationField",void 0),(0,i._)([(0,S.MZ)({type:Number,json:{name:"parameters.normalizationMaxValue",write:!0}})],m.prototype,"normalizationMaxValue",void 0),(0,i._)([(0,S.MZ)({type:Number,json:{name:"parameters.normalizationMinValue",write:!0}})],m.prototype,"normalizationMinValue",void 0),(0,i._)([(0,S.MZ)({type:Number,json:{name:"parameters.normalizationTotal",write:!0}})],m.prototype,"normalizationTotal",void 0),(0,i._)([(0,E.e)(F,{name:"parameters.normalizationType"})],m.prototype,"normalizationType",null),m=(0,i._)([(0,W.$)("esri.rest.support.NormalizationBinParametersMixin")],m),m}},32117:(V,K,e)=>{e.d(K,{$w:()=>v,Bu:()=>D,DW:()=>L,FH:()=>Pe,FM:()=>W,G9:()=>S,GV:()=>C,Go:()=>c,K3:()=>Me,Kn:()=>p,MM:()=>o,MO:()=>Ee,Nl:()=>z,Ny:()=>d,O2:()=>Z,UE:()=>H,YC:()=>ae,YF:()=>Q,ZO:()=>ne,_1:()=>A,_H:()=>P,_W:()=>M,_d:()=>h,bs:()=>de,dI:()=>R,e6:()=>n,gQ:()=>E,iA:()=>te,jn:()=>u,lW:()=>l,mA:()=>m,n5:()=>$,pM:()=>x,pV:()=>a,pk:()=>Ae,rB:()=>ve,s4:()=>b,xo:()=>f,yH:()=>O,yX:()=>w,zb:()=>ue,zr:()=>_});var i=e(46988);function b(s,I,T,B){return function y(s){return"function"==typeof s}(s)?s(I,T,B):s}function S(s){return[s.r,s.g,s.b,s.a]}const N=" /-,\n";function j(s){let I=s.length;for(;I--;)if(!N.includes(s.charAt(I)))return!1;return!0}function E(s,I){const T=[];let B=0,J=-1;do{if(J=s.indexOf("[",B),J>=B){if(J>B){const U=s.slice(B,J);T.push([U,null,j(U)])}if(B=J+1,J=s.indexOf("]",B),J>=B){if(J>B){const U=I[s.slice(B,J)];U&&T.push([null,U,!1])}B=J+1}}}while(-1!==J);if(B<s.length){const U=s.slice(B);T.push([U,null,j(U)])}return T}function W(s,I,T,B){let J="",U=null;for(const re of I){const[Y,q,X]=re;if(Y)X?U=Y:(U&&(J+=U,U=null),J+=Y);else{let ee=q;null!=T&&(ee=Ee(q,T));const k=s.attributes[ee];k&&(U&&(J+=U,U=null),J+=k)}}return function F(s,I){switch("string"!=typeof s&&(s=String(s)),I){case"LowerCase":return s.toLowerCase();case"Allcaps":return s.toUpperCase();default:return s}}(J,B)}function c(s,I,T,B,J,U,re=!0){const Y=I/J,q=T/U,X=Math.ceil(Y/2),ee=Math.ceil(q/2);for(let k=0;k<U;k++)for(let se=0;se<J;se++){const pe=4*(se+(re?U-k-1:k)*J);let ie=0,ce=0,_e=0,he=0,Ie=0,Oe=0,fe=0;const Te=(k+.5)*q;for(let ye=Math.floor(k*q);ye<(k+1)*q;ye++){const Le=Math.abs(Te-(ye+.5))/ee,De=(se+.5)*Y,Ce=Le*Le;for(let Se=Math.floor(se*Y);Se<(se+1)*Y;Se++){let oe=Math.abs(De-(Se+.5))/X;const le=Math.sqrt(Ce+oe*oe);le>=-1&&le<=1&&(ie=2*le*le*le-3*le*le+1,ie>0&&(oe=4*(Se+ye*I),fe+=ie*s[oe+3],_e+=ie,s[oe+3]<255&&(ie=ie*s[oe+3]/250),he+=ie*s[oe],Ie+=ie*s[oe+1],Oe+=ie*s[oe+2],ce+=ie))}}B[pe]=he/ce,B[pe+1]=Ie/ce,B[pe+2]=Oe/ce,B[pe+3]=fe/_e}}function n(s){return s?[s[0],s[1],s[2],s[3]/255]:[0,0,0,0]}function l(s){return s.data?.symbol??null}function o(s){return"CIMVectorMarker"===s.type||"CIMPictureMarker"===s.type||"CIMBarChartMarker"===s.type||"CIMCharacterMarker"===s.type||"CIMPieChartMarker"===s.type||"CIMStackedBarChartMarker"===s.type}function m(s){return"CIMGradientStroke"===s.type||"CIMPictureStroke"===s.type||"CIMSolidStroke"===s.type}function u(s){return null!=s&&("CIMGradientFill"===s.type||"CIMHatchFill"===s.type||"CIMPictureFill"===s.type||"CIMSolidFill"===s.type||"CIMWaterFill"===s.type)}function _(s){return null!=s&&("CIMMarkerPlacementAlongLineRandomSize"===s.type||"CIMMarkerPlacementAlongLineSameSize"===s.type||"CIMMarkerPlacementAlongLineVariableSize"===s.type||"CIMMarkerPlacementAtExtremities"===s.type||"CIMMarkerPlacementAtMeasuredUnits"===s.type||"CIMMarkerPlacementAtRatioPositions"===s.type||"CIMMarkerPlacementOnLine"===s.type||"CIMMarkerPlacementOnVertices"===s.type)}const v=(s,I=0)=>null==s||isNaN(s)?I:s,M=(s,I)=>s??I,C=(s,I)=>s??I,d=s=>s.tintColor?n(s.tintColor):[255,255,255,1],O=s=>{if(!s)return!1;for(const I of s)switch(I.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function P(){return Promise.all([e.e(3930),e.e(2076),e.e(4108)]).then(e.bind(e,27815))}function a(s){if(!s)return"normal";switch(s.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function p(s){if(!s)return"normal";switch(s.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function h(s){let I="normal",T="normal";if(s){const B=s.toLowerCase();B.includes("italic")?I="italic":B.includes("oblique")&&(I="oblique"),B.includes("bold")?T="bold":B.includes("light")&&(T="lighter")}return{style:I,weight:T}}function L(s){return s.underline?"underline":s.strikethrough?"line-through":"none"}function x(s){if(!s)return null;switch(s.type){case"CIMPolygonSymbol":if(s.symbolLayers)for(const I of s.symbolLayers){const T=x(I);if(null!=T)return T}break;case"CIMTextSymbol":return x(s.symbol);case"CIMSolidFill":return s.color}return null}function A(s){if(s)switch(s.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const I=s.symbolLayers;if(I)for(const T of I){const B=A(T);if(null!=B)return B}break}case"CIMTextSymbol":return A(s.symbol);case"CIMSolidStroke":return s.color}}function f(s){if(s)switch(s.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(s.symbolLayers)for(const I of s.symbolLayers){const T=f(I);if(void 0!==T)return T}break;case"CIMTextSymbol":return f(s.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return s.width}}function D(s){switch(s){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function z(s){switch(s){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function Z(s){return(s?Object.keys(s):[]).map(I=>({name:I,alias:I,type:"string"==typeof s[I]?"esriFieldTypeString":"esriFieldTypeDouble"}))}const H=s=>s.includes("data:image/svg+xml");function $(s){if(!s)return null;switch(s.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function Q(s){return s&&s.charAt(0).toLowerCase()+s.slice(1)}function ue(s,I,T,B,J,U,re=!0){const{infos:Y}=U;let q=1,X=0,ee=0,k=0,se=1;for(const{absoluteAnchorPoint:ce,offsetX:_e,offsetY:he,rotation:Ie,size:Oe,frameHeight:fe,rotateClockWise:Te,scaleSymbolsProportionally:ye}of Y)se=ce?1:q,ee=ge(_e,he,X,se,ee),k=G(_e,he,X,se,k),fe&&(ye||re)&&(q*=Oe/fe),X=g(Ie,Te,X);const pe=ge(B,J,X,se,ee),ie=G(B,J,X,se,k);return{size:s*q,rotation:g(I,T,X),offsetX:pe,offsetY:ie}}function ne(s){if(null==s)return!1;if(Array.isArray(s))return s.every(I=>ne(I));switch(typeof s){case"string":return!!s;case"number":return!isNaN(s)}}function te(s,I){if("color"===I||"outlinecolor"===I||"backgroundcolor"===I||"borderlinecolor"===I||"tintcolor"===I)return[...i.K[I]];const T=i.D[s];if(!T)throw new Error(`InternalError: default value for type ${s}.`);return T[I]}function Me(s){return"string"==typeof s?function me(s){return s.split(" ").map(I=>Number(I))}(s):s}function Pe(s){return s?.dashTemplate&&(s.dashTemplate=Me(s.dashTemplate)),s}function de(s){if(null==s)return"Normal";switch(s.type){case"CIMTextSymbol":return s.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const I=s.symbolLayers;if(!I)return"Normal";for(const T of I)if("CIMVectorMarker"===T.type)return de(T)}break;case"CIMVectorMarker":{const I=s.markerGraphics;if(!I)return"Normal";for(const T of I)if(T.symbol)return de(T.symbol)}}return"Normal"}function ae(s){if(s)switch(s.type){case"CIMTextSymbol":return s.height;case"CIMPointSymbol":{let I=0;if(s.symbolLayers)for(const T of s.symbolLayers)if(T)switch(T.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const B=T.size??i.D.CIMVectorMarker.size;B>I&&(I=B);break}}return I}case"CIMLineSymbol":case"CIMPolygonSymbol":{let I=0;if(s.symbolLayers)for(const T of s.symbolLayers)if(T)switch(T.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const B=T.width;null!=B&&B>I&&(I=B);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(T.markerPlacement&&_(T.markerPlacement)){const B=T.size??i.D.CIMVectorMarker.size;B>I&&(I=B)}break;case"CIMPictureFill":{const B=T.height;null!=B&&B>I&&(I=B)}}return I}}}function Ee(s,I){if(null!==I){const T=I.get(s);return T?T.name:s}return s}function Ae(s){return s.map(I=>({...I,propertyName:Q(I.propertyName)}))}function ve(s){const I={};for(const T in s){const B=s[T];I[Q(T)]=B}return I}function G(s,I,T,B,J){const U=T*Math.PI/180;if(U){const re=Math.cos(U);return(Math.sin(U)*s+re*I)*B+J}return I*B+J}function ge(s,I,T,B,J){const U=T*Math.PI/180;return U?(Math.cos(U)*s-Math.sin(U)*I)*B+J:s*B+J}function g(s,I,T){return I?T-s:T+s}function R(s,I,T){const B="Color"===T||"TintColor"===T||"ToColor"===T,J="Rotation"===T||"Angle"===T||"ToRotation"===T;let U=I[Q(T)];if(null!=U&&(B?U=[U[0]/255,U[1]/255,U[2]/255,U[3]/255]:J&&(U*=Math.PI/180)),null==U&&(U=te(I.type,T.toLowerCase()),null!=U&&(B?U=[U[0]/255,U[1]/255,U[2]/255,U[3]]:J&&(U*=Math.PI/180))),null!=I.primitiveName){const re=s[I.primitiveName];if(null!=re){const Y=re[T];null==Y||("string"==typeof Y||"number"==typeof Y||Array.isArray(Y)?(U=Y,null!=U&&(B?U=[U[0]/255,U[1]/255,U[2]/255,U[3]/255]:J&&(U*=Math.PI/180))):(U={valueExpressionInfo:Y,defaultValue:U},null!=U&&(B?U={type:"Process",op:"ArcadeColor",value:U}:J&&(U={type:"Process",op:"Divide",left:U,right:180/Math.PI}))))}}if(null==U)throw new Error(`Failed to derive a value or an expression for "${T}".`);return U}function w(s,I){return Math.max(Math.min((s??I)/100,1),0)}},91644:(V,K,e)=>{e.d(K,{A7:()=>W,Cx:()=>F,Hk:()=>c,JJ:()=>m,SF:()=>n,UK:()=>E,jM:()=>l,x3:()=>o}),e(3248);var y=e(88521),b=e(55417),S=e(46602),N=e(47705),j=e(48254);const E=S.A.fromJSON(j.Cb),W=b.A.fromJSON(j.yM),F=y.A.fromJSON(j.WR),c=N.A.fromJSON(j.JZ);function n(u){if(null==u)return null;switch(u.type){case"mesh":return null;case"point":case"multipoint":return E;case"polyline":return W;case"polygon":case"extent":return F}return null}const l=S.A.fromJSON(j.nC),o=b.A.fromJSON(j.HW),m=y.A.fromJSON(j.b6)},48254:(V,K,e)=>{e.d(K,{Cb:()=>b,HW:()=>W,JR:()=>y,JZ:()=>j,WR:()=>N,b6:()=>F,fT:()=>i,nC:()=>E,yM:()=>S});const i=[252,146,31,255],y=[153,153,153,255],b={type:"esriSMS",style:"esriSMSCircle",size:6,color:i,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},S={type:"esriSLS",style:"esriSLSSolid",width:.75,color:i},N={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},j={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},E={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},W={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},F={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},89352:(V,K,e)=>{e.d(K,{A:()=>o});var i=e(8189),y=e(90660),b=e(71065),S=e(97442),N=e(85211),F=(e(3248),e(35150),e(40707),e(15463)),c=e(76576),n=e(26957);let l=class extends(y.A.ClonableMixin(b.A)){constructor(m){super(m),this.unit="milliseconds",this.value=0}toMilliseconds(){return(0,S.t)(this.value,this.unit,"milliseconds")}};(0,i._)([(0,F.e)(n.j,{nonNullable:!0})],l.prototype,"unit",void 0),(0,i._)([(0,N.MZ)({type:Number,json:{write:!0},nonNullable:!0})],l.prototype,"value",void 0),l=(0,i._)([(0,c.$)("esri.time.TimeInterval")],l);const o=l}}]);