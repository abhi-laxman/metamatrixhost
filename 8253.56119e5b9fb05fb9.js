"use strict";(self.webpackChunkAngularClient=self.webpackChunkAngularClient||[]).push([[8253,9557],{42139:(Ae,de,_)=>{_.d(de,{cZ:()=>ne,XW:()=>Te,fe:()=>ae});var Z,U,A=_(10467),C=_(89563),R=_(5922),re=_(60797),X=(_(31732),_(13682)),q=_(32034);class j{constructor(){this.version="",this.queryResult=new L}}class L{constructor(){this.featureResult=new S}}class S{constructor(){this.objectIdFieldName="",this.uniqueIdField=new x,this.globalIdFieldName="",this.geohashFieldName="",this.geometryProperties=new J,this.geometryType=null,this.spatialReference=new q.A,this.exceededTransferLimit=!1,this.hasZ=!1,this.hasM=!1,this.transform=new E,this.fields=[],this.fieldNameToAttributeIndexMap={},this.values=[],this.features=[],this.geometryFields=[]}}class x{constructor(){this.name="",this.isSystemMaintained=!1}}class J{constructor(){this.shapeAreaFieldName="",this.shapeLengthFieldName="",this.units=""}}class E{constructor(){this.quantizeOriginPosition="upperLeft",this.scale=new v,this.translate=new D}}class v{constructor(){this.xScale=0,this.yScale=0,this.mScale=0,this.zScale=0}}class D{constructor(){this.xTranslate=0,this.yTranslate=0,this.mTranslate=0,this.zTranslate=0}}class k{constructor(){this.name="",this.fieldType="esriFieldTypeString",this.alias="",this.sqlType="sqlTypeVarchar",this.domain="",this.defaultValue=""}}class ee{constructor(){this.attributes=[],this.compressedGeometry=new P,this.centroid=new P,this.aggregateGeometries=[]}}class P{constructor(){this.geometryType=null,this.lengths=[],this.coords=[]}}(U=Z||(Z={})).ELEMENTUID="ELEMENTUID",U.TYPENAME="TYPENAME";const K=[Z.ELEMENTUID,Z.TYPENAME];var Y,te;(function(U){U[U.ELEMENTUID=0]="ELEMENTUID",U[U.TYPENAME=1]="TYPENAME"})(Y||(Y={})),function(U){U[U.ELEMENTUID=0]="ELEMENTUID",U[U.TYPENAME=1]="TYPENAME",U[U.FROMUID=2]="FROMUID",U[U.TOUID=3]="TOUID"}(te||(te={}));var _e,g,H,b,F=_(31772),G=_(66072);function m(U){const ce=new P;ce.geometryType=G.bV[U.geometry_type.value];const z=[],$=[];for(let se=0;se<U.lengths.length;se++)z.push(U.lengths[se]);for(let se=0;se<U.coords.length;se++)$.push(U.coords[se]);return ce.lengths=z,ce.coords=$,ce}function M(U){const ce=new k;return ce.name=U.name,ce.alias=U.alias,ce.fieldType=G.r5[U.field_type.value],ce.sqlType=H[U.sql_type.value],ce.domain=U.domain,ce.defaultValue=U.default_value,ce}function B(U){const ce=M(U);return ce.geometryType=G.bV[U.geometry_type.value],ce}function V(){return V=(0,A.A)(function*(U){const ce=[],z={generateAllSublayers:!1,namedTypeDefinitions:new Map};return U.entitiesUrl&&ce.push(Ce(U.entitiesUrl).then($=>{he($,z)})),U.relationshipsUrl&&ce.push(Ce(U.relationshipsUrl).then($=>{he($,z)})),yield Promise.all(ce),z}),V.apply(this,arguments)}function ne(U,ce){return ue.apply(this,arguments)}function ue(){return ue=(0,A.A)(function*(U,ce){ce??=!1;const z={generateAllSublayers:ce,namedTypeDefinitions:new Map};return yield function le(U){return ie.apply(this,arguments)}(U).then($=>{!function Be(U,ce){for(const[z,$]of U){const se=(0,re.tE)(ce.namedTypeDefinitions,z,()=>({useAllData:!1,members:new Map}));for(const me of $)se.members.has(me)||se.members.set(me,{id:me})}}($,z)}),z}),ue.apply(this,arguments)}function ae(U){return ge.apply(this,arguments)}function ge(){return ge=(0,A.A)(function*(U){const ce=yield(0,F.I)(),z=new ce.MapOfObjectIdentifierSets;!function be(U,ce,z){for(const[$,se]of z.namedTypeDefinitions){if(!se.members||se.useAllData)continue;const me=se.members.keys();let Ie=!1,Oe=!0;const De=new ce.ObjectIdArray,xe=new ce.StringArray,Re=new ce.GlobalIdArray,Se=new ce.IdentifierArray,je=new ce.ObjectIdentifierSet;for(const Le of me)Oe&&(Ie=!isNaN(Number(Le)),Oe=!1),Ie?De.add_objectid(Number(Le)):(xe.add_string(Le),Re.add_globalid(Le)),Se.add_identifier(Le);je.set_oid_array(De),je.set_string_array(xe),je.set_globalid_array(Re),je.set_identifier_array(Se),De.delete(),xe.delete(),Re.delete(),Se.delete(),U.put_identifier_set($,je),je.delete()}}(z,ce,U);const $=new ce.MapOfObjectIdentifierSetsEncoder;try{$.set_map_of_identifier_sets(z),$.encode();const se=$.get_encoding_result();if(0!==se.error.error_code)throw new R.A("knowledge-graph:layer-support-utils",se.error.error_message);const me=structuredClone(se.get_byte_buffer());return $.delete(),me}finally{z.delete()}}),ge.apply(this,arguments)}function Ce(U){return Ue.apply(this,arguments)}function Ue(){return Ue=(0,A.A)(function*(U){const ce=yield(0,C.A)(U,{responseType:"array-buffer"});return function Ne(U){return O.apply(this,arguments)}(yield ce.data)}),Ue.apply(this,arguments)}function O(){return O=(0,A.A)(function*(U){const ce=new((yield(0,F.I)()).FeatureCollectionDecoder),z=ce.decode(new Uint8Array(U));if(0!==z.error_code)throw new R.A("knowledge-graph:layer-support-utils",z.error_message);const se=function T(U){const ce=new j;ce.version=U.version;const z=U.get_query_result();if(0!==z.results_type.value)throw new Error("Got a non-feature collection type");const $=z.get_feature_result(),se=ce.queryResult.featureResult;se.objectIdFieldName=$.objectid_field_name,se.exceededTransferLimit=$.exceeded_transfer_limit,se.hasM=$.has_m,se.hasZ=$.has_z,se.geometryType=G.bV[$.geometry_type.value],se.globalIdFieldName=$.globalid_field_name,se.geohashFieldName=$.geohash_field_name;const me=se.uniqueIdField,Ie=$.unique_id_field;me.name=Ie.name,me.isSystemMaintained=Ie.isSystemMaintained;const Oe=se.geometryProperties,De=$.geometry_properties;Oe.shapeAreaFieldName=De.shapeAreaFieldName,Oe.shapeLengthFieldName=De.shapeLengthFieldName,Oe.units=De.units;const xe=se.spatialReference,Re=$.spatial_reference;xe.wkid=Re.wkid,xe.latestWkid=Re.latestWkid,xe.vcsWkid=Re.vcsWkid,xe.latestVcsWkid=Re.latestVcsWkid,xe.wkt=Re.wkt,se.transform=function I(U){const ce=new E;ce.quantizeOriginPosition=g[U.quantizeOriginPosition.value];const z=ce.scale,$=U.scale;z.xScale=$.xScale,z.yScale=$.yScale,z.mScale=$.mScale,z.zScale=$.zScale;const se=ce.translate,me=U.translate;return se.xTranslate=me.xTranslate,se.yTranslate=me.yTranslate,se.mTranslate=me.mTranslate,se.zTranslate=me.zTranslate,ce}($.transform);const Se=se.fields,je=se.fieldNameToAttributeIndexMap,Le=$.fields,Ge=Le.size();for(let Fe=0;Fe<Ge;Fe++){const $e=Le.get(Fe),Ze=M($e);Se.push(Ze),je[Ze.name]=Fe,$e.delete()}Le.delete();const We=se.values,ke=$.values_count();for(let Fe=0;Fe<ke;Fe++)We.push($.get_value_at(Fe));const Ve=se.features,Ke=$.features,ze=Ke.size();if(ze>0)for(const Fe of K)if(void 0===je[Fe])throw new Error(`Feature collection missing required attribute: ${Fe}`);for(let Fe=0;Fe<ze;Fe++){const $e=new ee,Ze=Ke.get(Fe),tt=$e.attributes,nt=Ze.attributes_count();for(let Ye=0;Ye<nt;Ye++)tt.push(Ze.get_attribute_at(Ye));const Xe=Ze.get_compressed_geometry();Xe&&($e.compressedGeometry=m(Xe),$e.centroid=m(Ze.get_centroid()));const rt=$e.aggregateGeometries,Qe=Ze.aggregate_geometries,st=Qe.size();for(let Ye=0;Ye<st;Ye++){const qe=Qe.get(Ye),ot=m(qe);rt.push(ot),qe.delete()}Qe.delete(),Ve.push($e),Ze.delete()}Ke.delete();const Je=se.geometryFields,He=$.geometry_fields,et=He.size();for(let Fe=0;Fe<et;Fe++){const $e=He.get(Fe),Ze=B($e);Je.push(Ze),$e.delete()}return He.delete(),ce}(ce.get_feature_collection());return ce.delete(),se}),O.apply(this,arguments)}function ie(){return ie=(0,A.A)(function*(U){const ce=yield(0,C.A)(U,{responseType:"array-buffer"}),z=yield ce.data;return function fe(U){return Pe.apply(this,arguments)}(new Uint8Array(z))}),ie.apply(this,arguments)}function Pe(){return Pe=(0,A.A)(function*(U){const ce=new((yield(0,F.I)()).MapOfObjectIdentifierSetsDecoder),z=ce.decode(new Uint8Array(U)),$=new Map;if(0!==z.error_code)throw new R.A("knowledge-graph:layer-support-utils",z.error_message);const se=ce.get_map_of_identifier_sets(),me=se.keys,Ie=me.size();for(let Oe=0;Oe<Ie;Oe++){const De=me.get(Oe),xe=se.query_identifier_set(De),Re=[];if(xe.id_array_type.value===b.GLOBALID_ARRAY){const Se=xe.get_globalid_array(),je=Se.count();for(let Le=0;Le<je;Le++)Re.push(Se.get_globalid_at(Le))}else if(xe.id_array_type.value===b.IDENTIFIER_ARRAY){const Se=xe.get_identifier_array(),je=Se.count();for(let Le=0;Le<je;Le++)Re.push(Se.get_identifier_at(Le).toString())}else if(xe.id_array_type.value===b.STRING_ARRAY){const Se=xe.get_string_array(),je=Se.count();for(let Le=0;Le<je;Le++)Re.push(Se.get_string_at(Le))}else{if(xe.id_array_type.value!==b.OID_ARRAY)throw new R.A("knowledge-graph:layer-support-utils","Tried to encode an unexpected ID Array type.");{const Se=xe.get_oid_array(),je=Se.count();for(let Le=0;Le<je;Le++)Re.push(Se.get_objectid_at(Le).toString())}}$.set(De,Re)}return ce.delete(),$}),Pe.apply(this,arguments)}function he(U,ce){if(!U?.queryResult?.featureResult)return ce;const z=U.queryResult.featureResult.fieldNameToAttributeIndexMap;for(const $ of U.queryResult.featureResult.features){const me=(0,re.tE)(ce.namedTypeDefinitions,$.attributes[z[Z.TYPENAME]],()=>({useAllData:!1,members:new Map})),Ie=$.attributes[z[Z.ELEMENTUID]];if($.compressedGeometry?.coords?.length>0){let Oe=$.compressedGeometry.lengths;"esriGeometryPoint"===$.compressedGeometry.geometryType&&(Oe=[]),me.members.set(Ie,{id:Ie,linkChartLocation:new X.A(Oe,$.compressedGeometry.coords)})}else me.members.set(Ie,{id:Ie})}return ce}(function(U){U[U.featureResult=0]="featureResult",U[U.countResult=1]="countResult",U[U.idsResult=2]="idsResult"})(_e||(_e={})),function(U){U[U.upperLeft=0]="upperLeft",U[U.lowerLeft=1]="lowerLeft"}(g||(g={})),function(U){U[U.sqlTypeBigInt=0]="sqlTypeBigInt",U[U.sqlTypeBinary=1]="sqlTypeBinary",U[U.sqlTypeBit=2]="sqlTypeBit",U[U.sqlTypeChar=3]="sqlTypeChar",U[U.sqlTypeDate=4]="sqlTypeDate",U[U.sqlTypeDecimal=5]="sqlTypeDecimal",U[U.sqlTypeDouble=6]="sqlTypeDouble",U[U.sqlTypeFloat=7]="sqlTypeFloat",U[U.sqlTypeGeometry=8]="sqlTypeGeometry",U[U.sqlTypeGUID=9]="sqlTypeGUID",U[U.sqlTypeInteger=10]="sqlTypeInteger",U[U.sqlTypeLongNVarchar=11]="sqlTypeLongNVarchar",U[U.sqlTypeLongVarbinary=12]="sqlTypeLongVarbinary",U[U.sqlTypeLongVarchar=13]="sqlTypeLongVarchar",U[U.sqlTypeNChar=14]="sqlTypeNChar",U[U.sqlTypeNVarChar=15]="sqlTypeNVarChar",U[U.sqlTypeOther=16]="sqlTypeOther",U[U.sqlTypeReal=17]="sqlTypeReal",U[U.sqlTypeSmallInt=18]="sqlTypeSmallInt",U[U.sqlTypeSqlXml=19]="sqlTypeSqlXml",U[U.sqlTypeTime=20]="sqlTypeTime",U[U.sqlTypeTimestamp=21]="sqlTypeTimestamp",U[U.sqlTypeTimestamp2=22]="sqlTypeTimestamp2",U[U.sqlTypeTinyInt=23]="sqlTypeTinyInt",U[U.sqlTypeVarbinary=24]="sqlTypeVarbinary",U[U.sqlTypeVarchar=25]="sqlTypeVarchar"}(H||(H={})),function(U){U[U.OID_ARRAY=0]="OID_ARRAY",U[U.GLOBALID_ARRAY=1]="GLOBALID_ARRAY",U[U.STRING_ARRAY=2]="STRING_ARRAY",U[U.IDENTIFIER_ARRAY=3]="IDENTIFIER_ARRAY"}(b||(b={}));const Te={fetchAndConvertSerializedLinkChart:U=>function W(U){return V.apply(this,arguments)}(U)}},3567:(Ae,de,_)=>{_.d(de,{E:()=>_e,w:()=>X});var A=_(89952),C=_(69690),re=(_(3248),_(12438)),oe=_(17694);class X{constructor(m=9,M){this._compareMinX=E,this._compareMinY=v,this._toBBox=B=>B,this._maxEntries=Math.max(4,m||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),M&&("function"==typeof M?this._toBBox=M:this._initFormat(M)),this.clear()}destroy(){this.clear(),Y.prune(),te.prune(),F.prune(),G.prune()}all(m){j(this._data,m)}search(m,M){let B=this._data;const I=this._toBBox;if(Z(m,B))for(Y.clear();B;){for(let W=0,V=B.children.length;W<V;W++){const ne=B.children[W],ue=B.leaf?I(ne):ne;Z(m,ue)&&(B.leaf?M(ne):N(m,ue)?j(ne,M):Y.push(ne))}B=Y.pop()}}collides(m){let M=this._data;const B=this._toBBox;if(!Z(m,M))return!1;for(Y.clear();M;){for(let I=0,W=M.children.length;I<W;I++){const V=M.children[I],ne=M.leaf?B(V):V;if(Z(m,ne)){if(M.leaf||N(m,ne))return!0;Y.push(V)}}M=Y.pop()}return!1}load(m){if(!m.length)return this;if(m.length<this._minEntries){for(let B=0,I=m.length;B<I;B++)this.insert(m[B]);return this}let M=this._build(m.slice(),0,m.length-1,0);if(this._data.children.length)if(this._data.height===M.height)this._splitRoot(this._data,M);else{if(this._data.height<M.height){const B=this._data;this._data=M,M=B}this._insert(M,this._data.height-M.height-1,!0)}else this._data=M;return this}insert(m){return m&&this._insert(m,this._data.height-1),this}clear(){return this._data=new H([]),this}remove(m){if(!m)return this;let M,B=this._data,I=null,W=0,V=!1;const ne=this._toBBox(m);for(F.clear(),G.clear();B||F.length>0;){if(B||(B=F.pop(),I=F.data[F.length-1],W=G.pop()??0,V=!0),B.leaf&&(M=(0,A.qh)(B.children,(0,C.zI)(m),B.children.length,B.indexHint),-1!==M))return B.children.splice(M,1),F.push(B),this._condense(F),this;V||B.leaf||!N(B,ne)?I?(W++,B=I.children[W],V=!1):B=null:(F.push(B),G.push(W),W=0,I=B,B=B.children[0])}return this}toJSON(){return this._data}fromJSON(m){return this._data=m,this}_build(m,M,B,I){const W=B-M+1;let V=this._maxEntries;if(W<=V){const pe=new H(m.slice(M,B+1));return S(pe,this._toBBox),pe}I||(I=Math.ceil(Math.log(W)/Math.log(V)),V=Math.ceil(W/V**(I-1)));const ne=new b([]);ne.height=I;const ue=Math.ceil(W/V),ye=ue*Math.ceil(Math.sqrt(V));K(m,M,B,ye,this._compareMinX);for(let pe=M;pe<=B;pe+=ye){const Me=Math.min(pe+ye-1,B);K(m,pe,Me,ue,this._compareMinY);for(let ve=pe;ve<=Me;ve+=ue){const w=Math.min(ve+ue-1,Me);ne.children.push(this._build(m,ve,w,I-1))}}return S(ne,this._toBBox),ne}_insert(m,M,B){const W=B?m:(0,this._toBBox)(m);F.clear();const V=function q(T,m,M,B){for(;B.push(m),!0!==m.leaf&&B.length-1!==M;){let I,W=1/0,V=1/0;for(let ne=0,ue=m.children.length;ne<ue;ne++){const ye=m.children[ne],pe=D(ye),Me=ee(T,ye)-pe;Me<V?(V=Me,W=pe<W?pe:W,I=ye):Me===V&&pe<W&&(W=pe,I=ye)}m=I||m.children[0]}return m}(W,this._data,M,F);for(V.children.push(m),J(V,W);M>=0&&F.data[M].children.length>this._maxEntries;)this._split(F,M),M--;!function L(T,m,M){for(let B=M;B>=0;B--)J(m.data[B],T)}(W,F,M)}_split(m,M){const B=m.data[M],I=B.children.length,W=this._minEntries;this._chooseSplitAxis(B,W,I);const V=this._chooseSplitIndex(B,W,I);if(!V)return;const ne=B.children.splice(V,B.children.length-V),ue=B.leaf?new H(ne):new b(ne);ue.height=B.height,S(B,this._toBBox),S(ue,this._toBBox),M?m.data[M-1].children.push(ue):this._splitRoot(B,ue)}_splitRoot(m,M){this._data=new b([m,M]),this._data.height=m.height+1,S(this._data,this._toBBox)}_chooseSplitIndex(m,M,B){let I,W,V;I=W=1/0;for(let ne=M;ne<=B-M;ne++){const ue=x(m,0,ne,this._toBBox),ye=x(m,ne,B,this._toBBox),pe=P(ue,ye),Me=D(ue)+D(ye);pe<I?(I=pe,V=ne,W=Me<W?Me:W):pe===I&&Me<W&&(W=Me,V=ne)}return V}_chooseSplitAxis(m,M,B){const I=m.leaf?this._compareMinX:E,W=m.leaf?this._compareMinY:v;this._allDistMargin(m,M,B,I)<this._allDistMargin(m,M,B,W)&&m.children.sort(I)}_allDistMargin(m,M,B,I){m.children.sort(I);const W=this._toBBox,V=x(m,0,M,W),ne=x(m,B-M,B,W);let ue=k(V)+k(ne);for(let ye=M;ye<B-M;ye++){const pe=m.children[ye];J(V,m.leaf?W(pe):pe),ue+=k(V)}for(let ye=B-M-1;ye>=M;ye--){const pe=m.children[ye];J(ne,m.leaf?W(pe):pe),ue+=k(ne)}return ue}_condense(m){for(let M=m.length-1;M>=0;M--){const B=m.data[M];if(0===B.children.length)if(M>0){const I=m.data[M-1],W=I.children;W.splice((0,A.qh)(W,B,W.length,I.indexHint),1)}else this.clear();else S(B,this._toBBox)}}_initFormat(m){const M=["return a"," - b",";"];this._compareMinX=new Function("a","b",M.join(m[0])),this._compareMinY=new Function("a","b",M.join(m[1])),this._toBBox=new Function("a","return {minX: a"+m[0]+", minY: a"+m[1]+", maxX: a"+m[2]+", maxY: a"+m[3]+"};")}}function j(T,m){let M=T;for(te.clear();M;){if(!0===M.leaf)for(const B of M.children)m((0,C.zI)(B));else te.pushArray(M.children);M=te.pop()??null}}function S(T,m){x(T,0,T.children.length,m,T)}function x(T,m,M,B,I){I||(I=new H([])),I.minX=1/0,I.minY=1/0,I.maxX=-1/0,I.maxY=-1/0;for(let W,V=m;V<M;V++)W=T.children[V],J(I,T.leaf?B(W):W);return I}function J(T,m){T.minX=Math.min(T.minX,m.minX),T.minY=Math.min(T.minY,m.minY),T.maxX=Math.max(T.maxX,m.maxX),T.maxY=Math.max(T.maxY,m.maxY)}function E(T,m){return T.minX-m.minX}function v(T,m){return T.minY-m.minY}function D(T){return(T.maxX-T.minX)*(T.maxY-T.minY)}function k(T){return T.maxX-T.minX+(T.maxY-T.minY)}function ee(T,m){return(Math.max(m.maxX,T.maxX)-Math.min(m.minX,T.minX))*(Math.max(m.maxY,T.maxY)-Math.min(m.minY,T.minY))}function P(T,m){const M=Math.max(T.minX,m.minX),B=Math.max(T.minY,m.minY),I=Math.min(T.maxX,m.maxX),W=Math.min(T.maxY,m.maxY);return Math.max(0,I-M)*Math.max(0,W-B)}function N(T,m){return T.minX<=m.minX&&T.minY<=m.minY&&m.maxX<=T.maxX&&m.maxY<=T.maxY}function Z(T,m){return m.minX<=T.maxX&&m.minY<=T.maxY&&m.maxX>=T.minX&&m.maxY>=T.minY}function K(T,m,M,B,I){const W=[m,M];for(;W.length;){const V=W.pop(),ne=W.pop();if(V-ne<=B)continue;const ue=ne+Math.ceil((V-ne)/B/2)*B;(0,oe.q)(T,ue,ne,V,I),W.push(ne,ue,ue,V)}}const Y=new re.A,te=new re.A,F=new re.A,G=new re.A({deallocator:void 0});class _e{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}class g extends _e{constructor(){super(...arguments),this.height=1,this.indexHint=new A.vW}}class H extends g{constructor(m){super(),this.children=m,this.leaf=!0}}class b extends g{constructor(m){super(),this.children=m,this.leaf=!1}}},11445:(Ae,de,_)=>{_.d(de,{Qf:()=>j,Qh:()=>oe,RS:()=>R,ez:()=>x,i5:()=>J,lM:()=>re,qK:()=>S});var A=_(79139);const R=16;function re(E){if(!E)return 0;let v=S;for(const D in E)E.hasOwnProperty(D)&&(v+=q(E[D],!1));return v}function oe(E){if(!E)return 0;if("number"==typeof E[0])return j(E);if(Array.isArray(E))return function X(E){const v=E.length;if(0===v||"number"==typeof E[0])return L(E,8);let D=x;for(let k=0;k<v;k++)D+=q(E[k]);return D}(E);let v=S;for(const D in E)E.hasOwnProperty(D)&&(v+=q(E[D]));return v}function q(E,v=!0){switch(typeof E){case"object":return v?oe(E):S;case"string":return function C(E){return 32+E.length}(E);case"number":return R;case"boolean":return 4;default:return 8}}function j(...E){return E.reduce((v,D)=>v+(D?(0,A.iu)(D)?D.byteLength+J:Array.isArray(D)?L(D,R):0:0),0)}function L(E,v){return x+E.length*v}const S=32,x=16,J=145},40856:(Ae,de,_)=>{_.d(de,{X_:()=>re,i1:()=>oe,oW:()=>J,zx:()=>L});var A=_(69287),C=_(82663);const R=96;function re(E,v){const D=v||E.extent,k=E.width,ee=(0,C.GA)(D?.spatialReference);return D&&k?D.width/k*ee*C.dy*R:0}function oe(E,v){return E/((0,C.GA)(v)*C.dy*R)}function L(E,v,D){return function S(E,v){return 0===v||(0,A.Sp)(E,v)||E<v}(E,v)&&function x(E,v){return 0===v||(0,A.Sp)(E,v)||E>v}(E,D)}function J(E,v){return(0,A.Sp)(E,v)?0:(E||Number.POSITIVE_INFINITY)>(v||Number.POSITIVE_INFINITY)?1:-1}},36819:(Ae,de,_)=>{_.d(de,{A:()=>v});var A=_(8189),C=_(85211),X=(_(3248),_(35150),_(40707),_(76576)),q=_(88494),j=_(95478),L=_(93410),S=_(33036),x=_(27641),J=_(88485);let E=class extends((0,L.dM)((0,S.j)(j.A))){constructor(D){super(D),this.elevationInfo=null,this.graphics=new x.Y,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(D){return this.graphics.add(D),this}addMany(D){return this.graphics.addMany(D),this}removeAll(){return this.graphics.removeAll(),this}remove(D){this.graphics.remove(D)}removeMany(D){this.graphics.removeMany(D)}on(D,k){return super.on(D,k)}graphicChanged(D){this.emit("graphic-update",D)}};(0,A._)([(0,C.MZ)({type:J.A})],E.prototype,"elevationInfo",void 0),(0,A._)([(0,C.MZ)((0,q.C)(x.Y,"graphics"))],E.prototype,"graphics",void 0),(0,A._)([(0,C.MZ)({type:["show","hide"]})],E.prototype,"listMode",void 0),(0,A._)([(0,C.MZ)()],E.prototype,"screenSizePerspectiveEnabled",void 0),(0,A._)([(0,C.MZ)({readOnly:!0})],E.prototype,"type",void 0),(0,A._)([(0,C.MZ)({constructOnly:!0})],E.prototype,"internal",void 0),E=(0,A._)([(0,X.$)("esri.layers.GraphicsLayer")],E);const v=E},72211:(Ae,de,_)=>{_.d(de,{LF:()=>oe,M9:()=>X,zu:()=>S});var A=_(5922),C=_(89221),R=_(79845),re=_(26073);function oe(E,v,D){try{return function j(E){if(!E||0===E.length)return null;if(function L(E){const v=E[0];return!!v&&"scale"in v}(E)){const v=[];for(const D of E)v.push({scale:D.scale,value:S(D.value)});return v}return S(E)}(E)}catch(k){D?.messages?.push(k)}return null}function X(E,v,D,k){try{const ee=function q(E){const v=(0,R.q)(E);return v?(0,re.dw)(v)?v.map(D=>D.toJSON()):v.map(({scale:D,effects:k})=>({scale:D,value:k.map(ee=>ee.toJSON())})):null}(E);(0,C.sM)(D,ee,v)}catch(ee){k.messages&&k.messages.push(ee)}}function S(E){if(!E?.length)return"";const v=[];for(const D of E){let k=[];switch(D.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":k=[x(D,"amount")];break;case"blur":k=[x(D,"radius","pt")];break;case"hue-rotate":k=[x(D,"angle","deg")];break;case"drop-shadow":k=[x(D,"xoffset","pt"),x(D,"yoffset","pt"),x(D,"blurRadius","pt"),J(D,"color")];break;case"bloom":k=[x(D,"strength"),x(D,"radius","pt"),x(D,"threshold")]}const ee=`${D.type}(${k.filter(Boolean).join(" ")})`;(0,R.q)(ee),v.push(ee)}return v.join(" ")}function x(E,v,D){if(null==E[v])throw new A.A("effect:missing-parameter",`Missing parameter '${v}' in ${E.type} effect`,{effect:E});return D?E[v]+D:""+E[v]}function J(E,v){if(null==E[v])throw new A.A("effect:missing-parameter",`Missing parameter '${v}' in ${E.type} effect`,{effect:E});const D=E[v];return`rgba(${D[0]||0}, ${D[1]||0}, ${D[2]||0}, ${D[3]/255||0})`}},42086:(Ae,de,_)=>{_.d(de,{N3:()=>oe,Om:()=>re});var A=_(11445),C=_(27999),R=_(13682);class re{constructor(j=null,L={},S,x,J=0){this.geometry=j,this.attributes=L,this.centroid=S,this.objectId=x,this.displayId=J}static fromJSON(j){const L=j.geometry?R.A.fromJSON(j.geometry):null,S=j.centroid?R.A.fromJSON(j.centroid):null;return new re(L,j.attributes,S,j.objectId)}weakClone(){const j=new re(this.geometry,this.attributes,this.centroid,this.objectId);return j.displayId=this.displayId,j}clone(){const j=this.geometry?.clone(),L=new re(j,{...this.attributes},this.centroid?.clone(),this.objectId);return L.displayId=this.displayId,L}ensureCentroid(j){return this.centroid??=(0,C.Q)(new R.A,this.geometry,j.hasZ,j.hasM),this.centroid}get usedMemory(){return 128+(0,A.lM)(this.attributes)+(this.geometry?.usedMemory??0)}}function oe(q){return!!q.geometry?.coords?.length}},61808:(Ae,de,_)=>{_.d(de,{A:()=>A});class A{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const R=new A;return R.objectIdFieldName=this.objectIdFieldName,R.globalIdFieldName=this.globalIdFieldName,R.geohashFieldName=this.geohashFieldName,R.geometryProperties=this.geometryProperties,R.geometryType=this.geometryType,R.spatialReference=this.spatialReference,R.hasZ=this.hasZ,R.hasM=this.hasM,R.features=this.features,R.fields=this.fields,R.transform=this.transform,R.exceededTransferLimit=this.exceededTransferLimit,R.uniqueIdField=this.uniqueIdField,R.queryGeometry=this.queryGeometry,R.queryGeometryType=this.queryGeometryType,R}}},13682:(Ae,de,_)=>{_.d(de,{A:()=>R});var A=_(11445);class R{constructor(oe=[],X=[]){this.lengths=oe??[],this.coords=X??[]}static fromJSON(oe){return new R(oe.lengths,oe.coords)}static fromRect(oe){const[X,q,j,L]=oe,S=j-X,x=L-q;return new R([5],[X,q,S,0,0,x,-S,0,0,-x])}get isPoint(){return 0===this.lengths.length&&this.coords.length>=2}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((oe,X)=>oe+X)}get usedMemory(){return 64+(0,A.Qf)(this.lengths,this.coords)}area(){let oe=0,X=0;if(!this.lengths.length)return 0;for(let q=0;q<this.lengths.length;q++){const j=this.lengths[q];if(j<3)continue;let L=this.coords[2*X],S=this.coords[2*X+1];for(let x=1;x<j;x+=1){const J=this.coords[2*(x+X)],E=this.coords[2*(x+X)+1];oe+=-.5*(J-L)*(E+S),L=J,S=E}X+=j}return oe}forEachVertex(oe){let X=0;this.lengths.length||oe(this.coords[0],this.coords[1]);for(let q=0;q<this.lengths.length;q++){const j=this.lengths[q];for(let L=0;L<j;L++)oe(this.coords[2*(L+X)],this.coords[2*(L+X)+1]);X+=j}}deltaDecode(){const oe=this.clone(),{coords:X,lengths:q}=oe;let j=0;for(const L of q){for(let S=1;S<L;S++)X[2*(j+S)]+=X[2*(j+S)-2],X[2*(j+S)+1]+=X[2*(j+S)-1];j+=L}return oe}clone(oe){if(0===this.lengths.length)return new R([],[this.coords[0],this.coords[1]]);const X=2*(0===this.lengths.length?1:this.lengths.reduce((j,L)=>j+L)),q=this.coords.slice(0,X);return oe?(oe.set(q),new R(this.lengths,oe)):new R(Array.from(this.lengths),Array.from(q))}}},27999:(Ae,de,_)=>{function A(L,S){return L?S?4:3:S?3:2}function C(L,S,x,J){if(!S?.lengths.length)return null;L.lengths.length&&(L.lengths.length=0),L.coords.length&&(L.coords.length=0);const E=L.coords,v=[],D=x?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:k,coords:ee}=S,P=A(x,J);let N=0;for(const Z of k){const K=R(D,ee,N,Z,x,J);K&&v.push(K),N+=Z*P}if(v.sort((Z,K)=>{let Y=Z[2]-K[2];return 0===Y&&x&&(Y=Z[4]-K[4]),Y}),v.length){let Z=6*v[0][2];E[0]=v[0][0]/Z,E[1]=v[0][1]/Z,x&&(Z=6*v[0][4],E[2]=0!==Z?v[0][3]/Z:0),(E[0]<D[0]||E[0]>D[1]||E[1]<D[2]||E[1]>D[3]||x&&(E[2]<D[4]||E[2]>D[5]))&&(E.length=0)}if(!E.length){const Z=S.lengths[0]?function re(L,S,x,J,E){const v=A(J,E);let D=S,k=S+v,ee=0,P=0,N=0,Z=0;for(let K=0,Y=x-1;K<Y;K++,D+=v,k+=v){const te=L[D],F=L[D+1],G=L[D+2],_e=L[k],g=L[k+1],H=L[k+2],b=J?X(te,F,G,_e,g,H):oe(te,F,_e,g);if(b)if(ee+=b,J){const T=j(te,F,G,_e,g,H);P+=b*T[0],N+=b*T[1],Z+=b*T[2]}else{const T=q(te,F,_e,g);P+=b*T[0],N+=b*T[1]}}return ee>0?J?[P/ee,N/ee,Z/ee]:[P/ee,N/ee]:x>0?J?[L[S],L[S+1],L[S+2]]:[L[S],L[S+1]]:null}(ee,0,k[0],x,J):null;if(!Z)return null;E[0]=Z[0],E[1]=Z[1],x&&Z.length>2&&(E[2]=Z[2])}return L}function R(L,S,x,J,E,v){const D=A(E,v);let k=x,ee=x+D,P=0,N=0,Z=0,K=0,Y=0;for(let F=0,G=J-1;F<G;F++,k+=D,ee+=D){const _e=S[k],g=S[k+1],H=S[k+2],b=S[ee],T=S[ee+1],m=S[ee+2];let M=_e*T-b*g;K+=M,P+=(_e+b)*M,N+=(g+T)*M,E&&(M=_e*m-b*H,Z+=(H+m)*M,Y+=M),_e<L[0]&&(L[0]=_e),_e>L[1]&&(L[1]=_e),g<L[2]&&(L[2]=g),g>L[3]&&(L[3]=g),E&&(H<L[4]&&(L[4]=H),H>L[5]&&(L[5]=H))}if(K>0&&(K*=-1),Y>0&&(Y*=-1),!K)return null;const te=[P,N,.5*K];return E&&(te[3]=Z,te[4]=.5*Y),te}function oe(L,S,x,J){const E=x-L,v=J-S;return Math.sqrt(E*E+v*v)}function X(L,S,x,J,E,v){const D=J-L,k=E-S,ee=v-x;return Math.sqrt(D*D+k*k+ee*ee)}function q(L,S,x,J){return[L+.5*(x-L),S+.5*(J-S)]}function j(L,S,x,J,E,v){return[L+.5*(J-L),S+.5*(E-S),x+.5*(v-x)]}_.d(de,{Q:()=>C})},59894:(Ae,de,_)=>{_.d(de,{F:()=>j});var A=_(3248),C=_(3567),R=_(51995);const oe={minX:0,minY:0,maxX:0,maxY:0};class j{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new C.w(9,(0,A.A)("esri-csp-restrictions")?S=>({minX:S[0],minY:S[1],maxX:S[2],maxY:S[3]}):["[0]","[1]","[2]","[3]"]),this._loadIndex=()=>{if(this._indexInvalid){const S=new Array(this._idByBounds.size);let x=0;this._idByBounds.forEach((J,E)=>{S[x++]=E}),this._indexInvalid=!1,this._index.clear(),this._index.load(S)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter(S=>this._idByBounds.has(S))))),this._boundsToLoad.length=0)}}get fullBounds(){if(!this._boundsById.size)return null;const S=(0,R.Ie)();for(const x of this._boundsById.values())x&&(S[0]=Math.min(x[0],S[0]),S[1]=Math.min(x[1],S[1]),S[2]=Math.max(x[2],S[2]),S[3]=Math.max(x[3],S[3]));return S}get valid(){return!this._indexInvalid}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(S){const x=this._boundsById.get(S);this._boundsById.delete(S),x&&(this._idByBounds.delete(x),this._indexInvalid||this._index.remove(x))}forEachInBounds(S,x){this._loadIndex(),function q(L,S,x){(function X(L){oe.minX=L[0],oe.minY=L[1],oe.maxX=L[2],oe.maxY=L[3]})(S),L.search(oe,x)}(this._index,S,J=>x(this._idByBounds.get(J)))}get(S){return this._boundsById.get(S)}has(S){return this._boundsById.has(S)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(S,x){if(!this._indexInvalid){const J=this._boundsById.get(S);J&&(this._index.remove(J),this._idByBounds.delete(J))}this._boundsById.set(S,x),x&&(this._idByBounds.set(x,S),this._indexInvalid||(this._boundsToLoad.push(x),this._boundsToLoad.length>5e4&&this._loadIndex()))}}},64373:(Ae,de,_)=>{_.d(de,{A:()=>J});var A=_(89952),C=_(5922),R=_(42425),re=_(35150),oe=_(2296),X=_(51995),q=_(31732),j=_(59894),L=_(95985),S=_(50690);const x=(0,oe.vt)();class J{constructor(v){this.geometryInfo=v,this._boundsStore=new j.F,this._featuresById=new Map,this._usedMemory=0,this.events=new R.A,this.featureAdapter=S.T}get usedMemory(){return this._usedMemory}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){return this._boundsStore.fullBounds}get storeStatistics(){let v=0;return this._featuresById.forEach(D=>{null!=D.geometry&&D.geometry.coords&&(v+=D.geometry.coords.length)}),{featureCount:this._featuresById.size,vertexCount:v/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}getFullExtent(v){if(null==this.fullBounds)return null;const[D,k,ee,P]=this.fullBounds;return{xmin:D,ymin:k,xmax:ee,ymax:P,spatialReference:(0,L.ag)(v)}}add(v){this._add(v),this._emitChanged()}addMany(v){for(const D of v)this._add(D);this._emitChanged()}upsertMany(v){const D=v.map(k=>this._upsert(k));return this._emitChanged(),D.filter(A.Ru)}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged(),this._usedMemory=0}removeById(v){const D=this._featuresById.get(v);return D?(this._remove(D),this._emitChanged(),D):null}removeManyById(v){this._boundsStore.invalidateIndex();for(const D of v){const k=this._featuresById.get(D);k&&this._remove(k)}this._emitChanged()}forEachBounds(v,D){for(const k of v){const ee=this._boundsStore.get(k.objectId);ee&&D((0,oe.Jt)(x,ee))}}getFeature(v){return this._featuresById.get(v)}has(v){return this._featuresById.has(v)}forEach(v){this._featuresById.forEach(D=>v(D))}forEachInBounds(v,D){this._boundsStore.forEachInBounds(v,k=>{D(this._featuresById.get(k))})}_emitChanged(){this.events.emit("changed",void 0)}_add(v){if(!v)return;const D=v.objectId;if(null==D)return void re.A.getLogger("esri.layers.graphics.data.FeatureStore").error(new C.A("featurestore:invalid-feature","feature id is missing",{feature:v}));const k=this._featuresById.get(D);let ee;if(k?(v.displayId=k.displayId,ee=this._boundsStore.get(D),this._boundsStore.delete(D),this._usedMemory-=this.estimateFeatureUsedMemory?.(k)??0):null!=this.onFeatureAdd&&this.onFeatureAdd(v),!v.geometry?.coords?.length)return this._boundsStore.set(D,null),void this._featuresById.set(D,v);ee=(0,q.jQ)(ee??(0,X.vt)(),v.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),null!=ee&&this._boundsStore.set(D,ee),this._featuresById.set(D,v),this._usedMemory+=this.estimateFeatureUsedMemory?.(v)??0}_upsert(v){const D=v?.objectId;if(null==D)return re.A.getLogger("esri.layers.graphics.data.FeatureStore").error(new C.A("featurestore:invalid-feature","feature id is missing",{feature:v})),null;const k=this._featuresById.get(D);if(!k)return this._add(v),v;this._usedMemory-=this.estimateFeatureUsedMemory?.(k)??0;const{geometry:ee,attributes:P}=v;for(const N in P)k.attributes[N]=P[N];return ee&&(k.geometry=ee,this._boundsStore.set(D,(0,q.jQ)((0,X.vt)(),ee,this.geometryInfo.hasZ,this.geometryInfo.hasM)??null)),this._usedMemory+=this.estimateFeatureUsedMemory?.(k)??0,k}_remove(v){null!=this.onFeatureRemove&&this.onFeatureRemove(v);const D=v.objectId;return this._boundsStore.delete(D),this._featuresById.delete(D),this._usedMemory-=this.estimateFeatureUsedMemory?.(v)??0,v}}},50690:(Ae,de,_)=>{_.d(de,{T:()=>C});var A=_(42086);const C={getObjectId:R=>R.objectId,getAttributes:R=>R.attributes,getAttribute:(R,re)=>R.attributes[re],cloneWithGeometry:(R,re)=>new A.Om(re,R.attributes,null,R.objectId),getGeometry:R=>R.geometry,getCentroid:(R,re)=>R.ensureCentroid(re)}},89962:(Ae,de,_)=>{_.d(de,{F0:()=>oe,Vx:()=>j,e2:()=>S,f:()=>x});var A=_(3248),C=_(77806),R=_(78200),re=_(48254);function oe(J){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===J||"esriGeometryMultipoint"===J?re.Cb:"esriGeometryPolyline"===J?re.yM:re.WR}}}const X=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let q=1;function j(J,E){if((0,A.A)("esri-csp-restrictions"))return()=>({[E]:null,...J});try{let v=`this${L(E)} = null;`;for(const k in J)v+=`this${L(k)} = ${JSON.stringify(J[k])};`;const D=new Function(`\n      return class AttributesClass$${q++} {\n        constructor() {\n          ${v};\n        }\n      }\n    `)();return()=>new D}catch{return()=>({[E]:null,...J})}}function L(J){return X.test(J)?`.${J}`:`["${J}"]`}function S(J={}){return[{name:"New Feature",description:"",prototype:{attributes:(0,C.o8)(J)}}]}function x(J,E){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,isBranchVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:J},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:E,supportsDelete:E,supportsEditing:E,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryBins:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:E,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:R.F,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},queryAttributeBins:R.P,editing:{supportsGeometryUpdate:E,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1,zDefault:void 0}}}},55540:(Ae,de,_)=>{_.d(de,{P:()=>te});var A=_(10467),C=_(8189),R=_(98877),re=_(5922),oe=_(35150),X=_(60797),q=_(56492),j=_(63484),L=_(85211),J=(_(3248),_(40707),_(76576)),E=_(28067),v=_(55861),D=_(13970),k=_(58701),ee=_(62799),P=_(74148),N=_(27783),Z=_(4965),K=_(74490),Y=_(87086);let te=class extends R.A{constructor(F){super(F),this._processingCacheUpdatesLookup=new Map,this.knowledgeGraph=null,this.inclusionModeDefinition={generateAllSublayers:!0,namedTypeDefinitions:new Map},this.entityTypeNames=new Set,this.relationshipTypeNames=new Set,this.geographicLookup=new Map,this.sublayerCaches=new Map,this.nodeConnectionsLookup=new Map,this.relationshipConnectionsLookup=new Map,this.memberIdTypeLookup=new Map;const G=new Map;F.knowledgeGraph.dataModel.entityTypes?.forEach(_e=>{_e.name&&(G.set(_e.name,"entity"),this._processingCacheUpdatesLookup.set(_e.name,[]),F.inclusionModeDefinition&&!F.inclusionModeDefinition?.generateAllSublayers||this.entityTypeNames.add(_e.name),_e.properties?.forEach(g=>{g.geometryType&&"esriGeometryNull"!==g.geometryType&&this.geographicLookup.set(_e.name,{name:g.name??"",geometryType:g.geometryType})}))}),F.knowledgeGraph.dataModel.relationshipTypes?.forEach(_e=>{_e.name&&(G.set(_e.name,"relationship"),this._processingCacheUpdatesLookup.set(_e.name,[]),F.inclusionModeDefinition&&!F.inclusionModeDefinition?.generateAllSublayers||this.relationshipTypeNames.add(_e.name),_e.properties?.forEach(g=>{g.geometryType&&"esriGeometryNull"!==g.geometryType&&this.geographicLookup.set(_e.name,{name:g.name??"",geometryType:g.geometryType})}))}),F.inclusionModeDefinition?.namedTypeDefinitions.forEach((_e,g)=>{if("entity"===G.get(g))this.entityTypeNames.add(g);else{if("relationship"!==G.get(g))return oe.A.getLogger(this).warn(`A named type, ${g}, was in the inclusion list that wasn't in the data model and will be removed`),void F.inclusionModeDefinition?.namedTypeDefinitions.delete(g);this.relationshipTypeNames.add(g)}const H=new Map;_e.members?.forEach(b=>{(0,X.tE)(this.memberIdTypeLookup,b.id,()=>new Set).add(g);const T=this.getById(b.id);T&&H.set(b.id,T)}),this.sublayerCaches.set(g,H)})}addToLayer(F){F.forEach(({typeName:G,id:_e})=>{if(!this.inclusionModeDefinition)throw new re.A("knowledge-graph:layer-data-manager","You cannot add to a layer's exclusion list if it was not created with an exclusion list originally");if(this.inclusionModeDefinition.namedTypeDefinitions.has(G)){if(this.inclusionModeDefinition.namedTypeDefinitions.has(G)){const g=this.inclusionModeDefinition.namedTypeDefinitions.get(G);g.members||(g.members=new Map),g.members.set(_e,{id:_e}),(0,X.tE)(this.memberIdTypeLookup,_e,()=>new Set).add(G)}}else{const g=new Map;g.set(_e,{id:_e}),this.inclusionModeDefinition.namedTypeDefinitions.set(G,{useAllData:!1,members:g}),(0,X.tE)(this.memberIdTypeLookup,_e,()=>new Set).add(G)}})}getById(F){return P.A.getInstance().readFromStoreById(F)}getData(F,G,_e){var g=this;return(0,A.A)(function*(){if(G.objectType.name&&g.inclusionModeDefinition?.namedTypeDefinitions&&g.inclusionModeDefinition.namedTypeDefinitions.size>0&&!g.inclusionModeDefinition.namedTypeDefinitions.has(G.objectType.name))return[];let H;if(H=F||new Y.A({where:"1=1",outFields:["*"]}),"link-chart"===G.parentCompositeLayer.type){const b=G.parentCompositeLayer,T=g._processingCacheUpdatesLookup.get(G.objectType.name??""),m=H.outFields;m&&1===m.length&&m[0]===ee.dr&&"1=1"===H.where||(yield Promise.all(T??[]));const M=g.sublayerCaches.has(G.objectType.name??"")?Array.from(g.sublayerCaches.get(G.objectType.name)?.values()):[],B=[];return M.forEach(I=>{if(g.relationshipTypeNames.has(G.objectType.name)){I.geometry=b.relationshipLinkChartDiagramLookup.get(I.attributes[G.objectIdField]);const W=g.memberIdTypeLookup.get(I.attributes[ee.Cz]),V=g.memberIdTypeLookup.get(I.attributes[ee.KQ]),ne=g._isEndEntitySpatial(W,I,ee.Cz),ue=g._isEndEntitySpatial(V,I,ee.KQ);I.attributes[ee.BL]=Number(ne&&ue)}else{I.geometry=b.entityLinkChartDiagramLookup.get(I.attributes[G.objectIdField]);const W=g.geographicLookup.get(G.objectType.name);I.attributes[ee.BL]=W&&I.attributes[W.name]?1:0}I.attributes[ee.T1]=I.geometry,B.push(I)}),B}return g.retrieveDataFromService(H,G,_e)})()}getConnectedRecordIds(F,G,_e){var g=this;return(0,A.A)(function*(){const H=[];let b="";const T=g._getNamedTypeIdMapFromNodeIds(F);if(G&&0!==G?.length){for(const W of G)b=b+W+"|";b=b.slice(0,-1)}const m={},M=[];for(const[W,V]of T){const ne=`${W}_ids`;m[ne]=V,M.push(G&&0!==G?.length?`MATCH (n:${W}) WHERE id(n) IN $${ne} WITH n MATCH (n)-[r:${b}]-(m) RETURN id(r), type(r), id(m), labels(m)[0]`:`MATCH (n:${W}) WHERE id(n) IN $${ne} WITH n MATCH (n)-[r]-(m) RETURN id(r), type(r), id(m), labels(m)[0]`)}if(!M.length)return H;const B=M.join(" UNION "),I=(yield(0,Z.executeQueryStreaming)(g.knowledgeGraph,new K.A({openCypherQuery:B,bindParameters:m}),{signal:_e?.signal})).resultRowsStream.getReader();for(;;){const{done:W,value:V}=yield I.read();if(W)break;for(let ne=0;ne<V.length;ne++){const ue=V[ne];H.push({id:ue[0],typeName:ue[1]}),H.push({id:ue[2],typeName:ue[3]})}}return H})()}getRelationshipsBetweenNodes(F,G,_e){var g=this;return(0,A.A)(function*(){const H=g._getNamedTypeIdMapFromNodeIds(F);if(0===H.size)return[];const b={relationshipExclusionIds:G,possibleConnectionEntityIds:F},T=[];for(const[I,W]of H.entries()){const V=`${I}_ids`;b[V]=W,T.push(`MATCH (n:${I}) WHERE id(n) IN $${V} WITH n MATCH (n)-[r]->(m) WHERE id(m) IN $possibleConnectionEntityIds AND NOT id(r) IN $relationshipExclusionIds RETURN id(r), type(r)`)}const m=T.join(" UNION "),M=[],B=(yield(0,Z.executeQueryStreaming)(g.knowledgeGraph,new K.A({openCypherQuery:m,bindParameters:b}),{signal:_e?.signal})).resultRowsStream.getReader();for(;;){const{done:I,value:W}=yield B.read();if(I)break;for(let V=0;V<W.length;V++){const ne=W[V];M.push({id:ne[0],typeName:ne[1]})}}return M})()}getRelationshipsFromNodes(F,G,_e,g){var H=this;return(0,A.A)(function*(){const b=H._getNamedTypeIdMapFromNodeIds(F);if(0===b.size||0===G.length)return[];const T={relationshipExclusionIds:_e,possibleConnectionEntityIds:G},m=[];for(const[V,ne]of b.entries()){const ue=`${V}_ids`;T[ue]=ne,m.push(`MATCH (n:${V}) WHERE id(n) IN $${ue} WITH n MATCH (n)-[r]-(m) WHERE id(m) IN $possibleConnectionEntityIds AND NOT id(r) IN $relationshipExclusionIds RETURN id(r), type(r)`)}const M=m.join(" UNION "),B=new Map,I=(yield(0,Z.executeQueryStreaming)(H.knowledgeGraph,new K.A({openCypherQuery:M,bindParameters:T}),{signal:g?.signal})).resultRowsStream.getReader();for(;;){const{done:V,value:ne}=yield I.read();if(V)break;for(let ue=0;ue<ne.length;ue++){const ye=ne[ue];let pe=B.get(ye[1]);pe||(pe=new Set,B.set(ye[1],pe)),pe.add(ye[0])}}const W=[];for(const[V,ne]of B)for(const ue of ne)W.push({id:ue,typeName:V});return W})()}refreshCacheContent(F,G,_e,g=!0,H){var b=this;return(0,A.A)(function*(){const T=P.A.getInstance(),m=[],M=new Map,B=new Map;b.knowledgeGraph.dataModel.entityTypes?.forEach(I=>{I.name&&B.set(I.name,I)}),b.knowledgeGraph.dataModel.relationshipTypes?.forEach(I=>{I.name&&B.set(I.name,I)}),F||b.inclusionModeDefinition?F?F.forEach(I=>{if(b.memberIdTypeLookup.has(I))for(const W of b.memberIdTypeLookup.get(I))M.has(W)?M.get(W)?.push(I):M.set(W,[I])}):b.inclusionModeDefinition?.namedTypeDefinitions?.forEach((I,W)=>{I.useAllData?M.set(W,null):I.members&&I.members.forEach(V=>{M.has(W)&&null!==M.get(W)?M.get(W)?.push(V.id):M.set(W,[V.id])})}):(b.knowledgeGraph.dataModel.entityTypes?.forEach(I=>{I.name&&M.set(I.name,null)}),b.knowledgeGraph.dataModel.entityTypes?.forEach(I=>{I.name&&M.set(I.name,null)}));for(const[I,W]of M){const V=new Set(W),ne=new Promise((ue,ye)=>{(function(){var Me=(0,A.A)(function*(){const ve=new Set,w=[];let Q,ae="",ge=!1;if(G||B.get(I)?.properties?.forEach(Ce=>{Ce.name&&ve.add(Ce.name)}),_e&&b.geographicLookup.has(I)){const Ce=b.geographicLookup.get(I)?.name;Ce&&ve.add(Ce)}if(b.entityTypeNames.has(I))ae=`MATCH (n:${I}) ${W?"WHERE id(n) IN $ids ":""}return ID(n)`,ve.forEach(Ce=>{ae+=`, n.${Ce}`,w.push(Ce)});else{if(!b.relationshipTypeNames.has(I))throw new re.A("knowledge-graph:layer-data-manager",`The graph type of ${I} could not be determined. Was this type set in the KG data model and inclusion definition?`);ge=!0,ae=`MATCH ()-[n:${I}]->() ${W?"WHERE id(n) IN $ids ":""}return ID(n), id(startNode(n)), id(endNode(n))`,ve.forEach(Ce=>{ae+=`, n.${Ce}`,w.push(Ce)})}Q=new K.A(W?{openCypherQuery:ae,bindParameters:{ids:W}}:{openCypherQuery:ae});const Ee=(yield(0,Z.executeQueryStreaming)(b.knowledgeGraph,Q,{signal:H?.signal})).resultRowsStream.getReader();for(;;){const{done:Ce,value:Ue}=yield Ee.read();if(Ce)break;const Ne=[];for(let ie=0;ie<Ue.length;ie++){const fe=Ue[ie];let Pe=0,he=0;const Be={properties:{}};for(Be.id=fe[Pe],Pe++,he++,ge&&(Be.originId=fe[Pe],Pe++,he++,Be.destinationId=fe[Pe],Pe++,he++,(0,X.tE)(b.nodeConnectionsLookup,Be.originId,()=>new Set).add(Be.id),(0,X.tE)(b.nodeConnectionsLookup,Be.destinationId,()=>new Set).add(Be.id),(0,X.tE)(b.relationshipConnectionsLookup,Be.id,()=>[Be.originId,Be.destinationId]));Pe<fe.length;Pe++)Be.properties[w[Pe-he]]=fe[Pe];V.delete(Be.id),Ne.push(Be)}const O=T.writeToStore(Ne,ee.dr,b.geographicLookup.get(I)?.name);b.sublayerCaches.has(I)||b.sublayerCaches.set(I,new Map),g&&!b.inclusionModeDefinition?.namedTypeDefinitions.has(I)&&b.inclusionModeDefinition?.namedTypeDefinitions.set(I,{useAllData:!1,members:new Map}),g&&!b.inclusionModeDefinition?.namedTypeDefinitions.get(I).members&&(b.inclusionModeDefinition.namedTypeDefinitions.get(I).members=new Map);const le=b.sublayerCaches.get(I);O.forEach(ie=>{le?.set(ie.attributes[ee.dr],ie),g&&!b.inclusionModeDefinition?.namedTypeDefinitions.get(I).members.has(ie.attributes[ee.dr])&&(b.inclusionModeDefinition?.namedTypeDefinitions.get(I).members.set(ie.attributes[ee.dr],{id:ie.attributes[ee.dr]}),(0,X.tE)(b.memberIdTypeLookup,ie.attributes[ee.dr],()=>new Set).add(I))})}const be=b.inclusionModeDefinition?.namedTypeDefinitions.get(I);if(be)for(const Ce of V)be.members?.delete(Ce)});return function(){return Me.apply(this,arguments)}})()().then(()=>{ue(null)}).catch(Me=>{"AbortError"===Me.name?ue(null):ye(Me)})});m.push(ne),b._processingCacheUpdatesLookup.get(I)?.push(ne)}if(yield Promise.all(m),H?.signal?.aborted)throw(0,q.NK)()})()}removeFromLayer(F){const G=new Set,_e=new Set(F.map(g=>g.id));for(const g of F)G.add(g.typeName),1===this.memberIdTypeLookup.get(g.id)?.size?this.memberIdTypeLookup.delete(g.id):this.memberIdTypeLookup.get(g.id)?.delete(g.typeName),this.inclusionModeDefinition?.namedTypeDefinitions.forEach((H,b)=>{b===g.typeName&&H.members?.has(g.id)&&H.members.delete(g.id)});G.forEach(g=>{this.sublayerCaches.get(g)?.forEach((H,b)=>{_e.has(b)&&this.sublayerCaches.get(g)?.delete(b)})})}retrieveDataFromService(F,G,_e){var g=this;return(0,A.A)(function*(){const H=P.A.getInstance(),b=new Set,T=[];let m,M="",B=[];const I="relationship"===G.graphType,W=g.inclusionModeDefinition?.namedTypeDefinitions?.get(G.objectType.name)?.useAllData,V=G.parentCompositeLayer.sublayerIdsCache.get(G.objectType.name);let ne=!W&&V?Array.from(V).sort():null;if(g.inclusionModeDefinition?.namedTypeDefinitions?.get(G.objectType.name)?.useAllData)g.inclusionModeDefinition?.namedTypeDefinitions?.get(G.objectType.name)?.useAllData&&null!=F.objectIds&&(ne=F.objectIds);else if(null!=F.objectIds&&ne&&ne.length>0){const ye=F.objectIds;F.objectIds=ne.filter(pe=>ye.includes(pe))}else if(null!=F.objectIds)ne=F.objectIds;else{if(g.inclusionModeDefinition?.namedTypeDefinitions.has(G.objectType.name)&&(!g.inclusionModeDefinition.namedTypeDefinitions.get(G.objectType.name)?.members||g.inclusionModeDefinition.namedTypeDefinitions.get(G.objectType.name)?.members?.size<1))return F.objectIds=[],[];F.objectIds=ne}if(null!=F.outFields){const ye=F.outFields;ye.includes("*")?G.fields.forEach(pe=>{b.add(pe.name)}):ye.forEach(pe=>{pe!==ee.dr&&pe!==G.geometryFieldName&&b.add(pe)})}if(null!=F.geometry){const ye=F.geometry;let pe;const Me=G.parentCompositeLayer.dataManager.knowledgeGraph.serviceDefinition,ve=Me?.spatialReference,w=Me?.serviceCapabilities?.geometryCapabilities;let Q=w?.geometryMaxBoundingRectangleSizeX,ae=w?.geometryMaxBoundingRectangleSizeY;if("point"===ye.type){let ge=ye;ge.spatialReference?.isWGS84||(yield(0,D.initializeProjection)(ge.spatialReference,k.KK),ge=(0,D.project)(ge,k.KK)),pe=new E.A({spatialReference:k.KK,xmin:ge.x-1e-4,ymin:ge.y-1e-4,xmax:ge.x+1e-4,ymax:ge.y+1e-4})}else ye?.extent?.spatialReference&&!ye.spatialReference?.isWGS84?(yield(0,D.initializeProjection)(ye.extent.spatialReference,k.KK),pe=(0,D.project)(ye.extent,k.KK)):pe=ye.extent;if(Q&&ae&&ve){if(4326!==ve.wkid){const ge=new E.A({spatialReference:ve,xmax:Q,ymax:ae}),Ee=(0,D.project)(ge,k.KK);Q=Ee.xmax,ae=Ee.ymax}if(pe.xmax-pe.xmin>Q)throw new re.A("knowledge-graph:layer-data-manager",`Extent x bounds should be within ${Q}\xb0 latitude, limit exceeded`);if(pe.ymax-pe.ymin>ae)throw new re.A("knowledge-graph:layer-data-manager",`Extent y bounds should be within ${ae}\xb0 longitude, limit exceeded`)}if(null!=F.where&&"1=1"!==F.where){const ge=yield(0,j.GP)(F.where.toUpperCase(),G.fieldsIndex);G.fields.forEach(Ee=>{ge.fieldNames.includes(Ee.name)&&b.add(Ee.name)})}M=I?`Match ()-[n:${G.objectType.name}]->() WHERE esri.graph.ST_Intersects($param_filter_geom, n.${G.geometryFieldName}) return ID(n), id(startNode(r)), id(endNode(r))`:`Match (n:${G.objectType.name}) WHERE esri.graph.ST_Intersects($param_filter_geom, n.${G.geometryFieldName}) return ID(n)`,G.geometryFieldName&&b.add(G.geometryFieldName),b.forEach(ge=>{M+=`, n.${ge}`,T.push(ge)}),m=new K.A({openCypherQuery:M,bindParameters:{param_filter_geom:new v.A({rings:(0,N.Wq)(pe)})}})}else{let ye="";if(null!=F.where&&"1=1"!==F.where){const ve=yield(0,j.GP)(F.where,G.fieldsIndex);G.fields.forEach(Ee=>{ve.fieldNames.includes(Ee.name)&&b.add(Ee.name)});const w=new Set(["column-reference","string","number","binary-expression"]),Q=new Set(["=","<","<=","<>",">",">=","AND","OR","LIKE"]);let ae=!1;const ge=Ee=>{if("column-reference"===Ee.type)return`n.${Ee.column}`;if("string"===Ee.type)return`'${Ee.value}'`;if("number"===Ee.type)return`${Ee.value}`;if("binary-expression"===Ee.type&&w.has(Ee.left.type)&&w.has(Ee.right.type)&&Q.has(Ee.operator))return`${ge(Ee.left)} ${Ee.operator} ${ge(Ee.right)}`;if("binary-expression"===Ee.type&&"LIKE"===Ee.operator){let be="";if("function"===Ee.left.type&&"column-reference"===Ee.left.args.value[0].type)be+=`lower(n.${Ee.left.args.value[0].column})`;else{if("column-reference"!==Ee.left.type)return ae=!0,"";be+=`lower(n.${Ee.left.column})`}if(be+=" CONTAINS (","string"!==Ee.right.type)return ae=!0,"";{let Ce=Ee.right.value;"%"===Ce.charAt(0)&&(Ce=Ce.slice(1)),"%"===Ce.charAt(Ce.length-1)&&(Ce=Ce.slice(0,-1)),be+=`'${Ce.toLowerCase()}')`}return be}return ae=!0,""};ye=ge(ve.parseTree),ae&&(ye="")}let pe="";pe=I?`Match ()-[n:${G.objectType.name}]->()`:`Match (n:${G.objectType.name})`;let Me=!1;ne&&(Me=!0,pe+=" WHERE ID(n) IN $ids"),ye&&(pe+=Me?" AND":" WHERE",pe+=` ${ye}`),pe+=" return ID(n)",I&&(pe+=", id(startNode(n)), id(endNode(n))"),F.returnGeometry&&G.geometryFieldName&&b.add(G.geometryFieldName),b.forEach(ve=>{pe+=`, n.${ve}`,T.push(ve)}),m=new K.A(ne?{openCypherQuery:pe,bindParameters:{ids:ne}}:{openCypherQuery:pe})}const ue=(yield(0,Z.executeQueryStreaming)(G.parentCompositeLayer.dataManager.knowledgeGraph,m,_e)).resultRowsStream.getReader();for(;;){const{done:ye,value:pe}=yield ue.read();if(ye)break;const Me=[];for(let ve=0;ve<pe.length;ve++){const w=pe[ve];let Q=0,ae=0;const ge={properties:{}};for(ge.id=w[Q],Q++,ae++,I&&(ge.originId=w[Q],Q++,ae++,ge.destinationId=w[Q],Q++,ae++);Q<w.length;Q++)ge.properties[T[Q-ae]]=w[Q];Me.push(ge)}B=B.concat(H.writeToStore(Me,ee.dr,G.parentCompositeLayer.dataManager.geographicLookup.get(G.objectType.name)?.name))}return B})()}_isEndEntitySpatial(F,G,_e){for(const g of F??[])if(this.entityTypeNames.has(g)){const H=this.geographicLookup.get(g),b=H&&this.sublayerCaches.get(g)?.get(G.attributes[_e]);if(H&&b?.attributes[H.name])return!0}return!1}_getNamedTypeIdMapFromNodeIds(F){const G=new Map;return F.forEach(_e=>{if(this.memberIdTypeLookup.has(_e))for(const g of this.memberIdTypeLookup.get(_e)){if(!this.entityTypeNames.has(g))return;G.has(g)?G.get(g)?.push(_e):G.set(g,[_e])}}),G}};(0,C._)([(0,L.MZ)()],te.prototype,"knowledgeGraph",void 0),(0,C._)([(0,L.MZ)()],te.prototype,"inclusionModeDefinition",void 0),(0,C._)([(0,L.MZ)()],te.prototype,"entityTypeNames",void 0),(0,C._)([(0,L.MZ)()],te.prototype,"relationshipTypeNames",void 0),(0,C._)([(0,L.MZ)()],te.prototype,"geographicLookup",void 0),(0,C._)([(0,L.MZ)()],te.prototype,"sublayerCaches",void 0),(0,C._)([(0,L.MZ)()],te.prototype,"nodeConnectionsLookup",void 0),(0,C._)([(0,L.MZ)()],te.prototype,"relationshipConnectionsLookup",void 0),(0,C._)([(0,L.MZ)()],te.prototype,"memberIdTypeLookup",void 0),te=(0,C._)([(0,J.$)("esri.layers.knowledgeGraph.KnowledgeGraphLayerDataManager")],te)},85574:(Ae,de,_)=>{_.d(de,{A:()=>U});var A=_(10467),C=_(8189),R=_(92165),re=_(77806),oe=_(35150),X=_(39693),j=(_(19284),_(85211)),S=(_(3248),_(76576)),x=_(50305),J=_(26514),E=_(28067),v=_(1749),D=_(55861),k=_(93615),ee=_(13970),P=_(32034),N=_(58701),Z=_(6434),K=_(95478),Y=_(64373),te=_(47960),F=_(89962),G=_(62799);_(40707);const H=(0,_(3404).p)(),b=z=>{let $=class extends z{constructor(){super(...arguments),this.fields=[],this.fieldsIndex=null}};return(0,C._)([(0,j.MZ)(H.fields)],$.prototype,"fields",void 0),(0,C._)([(0,j.MZ)(H.fieldsIndex)],$.prototype,"fieldsIndex",void 0),$=(0,C._)([(0,S.$)("esri.layers.knowledgeGraph.KnowledgeGraphSublayerBase")],$),$};var T=_(43326),m=_(93410),M=_(73955),B=_(31446),I=_(25263),W=_(43124),V=_(1151),ne=_(33036),ue=_(84311),ye=_(22329),pe=_(14236),Me=_(29141),ve=_(86300),w=_(54947),Q=_(73975),ae=_(38488),ge=_(73747),Ee=_(85718),be=_(31595),Ce=_(93327),Ue=_(87086),Ne=_(41843),O=_(83393),le=_(85311);function ie(z){if(!z.json)return z;z.json.write=fe(z.json.write);const $=z.json.origins;if(!$)return z;let se;for(se in $){const me=$[se];me&&(me.write=fe(me.write))}return z}function fe(z){return"object"==typeof z&&z?(!1!==z.enabled&&(z.overridePolicy=function Pe(z){const{target:$,writer:se,overridePolicy:me,...Ie}=z;return function(Oe,De){const xe=Be.call(this,Oe,De);return xe.enabled?{...Ie,...xe}:xe}}(z)),z):!0===z?he():z}function he(){return{overridePolicy:Be}}function Be(z,$){const se=!!this.geometryType;let me={enabled:se};return se&&(me={...me,...we.call(this,z,$)}),me}function we(z,$){return{ignoreOrigin:this.originIdOf($)>J.Gr.DEFAULTS}}let Te=class extends(b((0,M.FJ)((0,I.J)((0,B.F)((0,m.dM)((0,W.fY)((0,ue.e)((0,ne.j)((0,V.J)((0,X.P)(K.A))))))))))){constructor(z){super(z),this.blendMode="normal",this.capabilities=(0,F.f)(!1,!1),this.charts=null,this.definitionExpression=null,this.displayField="",this.displayFilterEnabled=!0,this.displayFilterInfo=null,this.effect=null,this.elevationInfo=null,this.featureEffect=null,this.graphType=null,this.labelsVisible=!0,this.layerType=null,this.legendEnabled=!0,this.maxScale=0,this.minScale=0,this.objectIdField=G.dr,this.objectType=null,this.opacity=1,this.orderBy=null,this.parent=null,this.parentCompositeLayer=null,this.persistenceEnabled=!0,this.popupEnabled=!0,this.popupTemplate=null,this.refreshInterval=0,this.source={openPorts:()=>this.load().then(()=>{const $=new MessageChannel;return new le.A($.port1,{channel:$,client:{queryFeatures:(se,me={})=>{const Ie=Ue.A.fromJSON(se);return this.queryFeaturesJSON(Ie,me)}}}),[$.port2]})},this.type="knowledge-graph-sublayer",this.useViewTime=!0,this.visible=!0}get defaultPopupTemplate(){return this.createPopupTemplate()}set featureReduction(z){const $=this._normalizeFeatureReduction(z);this._set("featureReduction",$)}get fields(){const z=[];return this.objectType?.properties?.forEach($=>{z.push(Me.A.fromJSON({name:$.name,type:"esriFieldTypeOID"===$.fieldType?"esriFieldTypeInteger":$.fieldType,alias:$.alias,defaultValue:$.defaultValue,editable:$.editable,nullable:$.nullable}))}),z.push(Me.A.fromJSON({name:this.objectIdField,type:"esriFieldTypeString",alias:this.objectIdField,editable:!1}),Me.A.fromJSON({name:G.M1,type:"esriFieldTypeInteger",alias:G.M1,editable:!1}),Me.A.fromJSON({name:G.BL,type:"esriFieldTypeInteger",alias:G.BL,editable:!1})),z}get geometryType(){if("link-chart"===this.parentCompositeLayer?.type)return"relationship"===this.graphType?"polyline":"point";const z=this.parentCompositeLayer?.dataManager.geographicLookup.get(this.objectType?.name),$=z?.geometryType;return $&&"esriGeometryNull"!==$?Z.gy.fromJSON($):null}get geometryFieldName(){return"link-chart"===this.parentCompositeLayer?.type?G.T1:this.parentCompositeLayer?.dataManager.geographicLookup.get(this.objectType?.name)?.name??null}get graphTypeName(){return this.objectType?.name}get hasM(){const z=this.parentCompositeLayer?.dataManager.geographicLookup.get(this.objectType?.name),$=z?.name;return($?this.objectType?.properties?.[$]:null)?.hasM??!1}get hasZ(){const z=this.parentCompositeLayer?.dataManager.geographicLookup.get(this.objectType?.name),$=z?.name;return($?this.objectType?.properties?.[$]:null)?.hasZ??!1}set labelingInfo(z){this._set("labelingInfo",z)}get labelingInfo(){if(this._isOverridden("labelingInfo"))return this._get("labelingInfo");const z=this.objectType.properties?(0,T.MY)(this.objectType.properties):"ESRI__ID";return"link-chart"===this.parentCompositeLayer.type?(0,T.iW)(this.graphType,this.graphTypeName,z):(0,T.e$)(this.graphTypeName,this.geometryType,z)}set renderer(z){(0,ve.yp)(z,this.fieldsIndex),this._set("renderer",z)}get renderer(){if(this._isOverridden("renderer"))return this._get("renderer");const z=this.parentCompositeLayer?.dataManager?.knowledgeGraph?.dataModel,$=[...z?.entityTypes??[],...z?.relationshipTypes??[]].map(Ie=>Ie.name).indexOf(this.graphTypeName),se=(0,T.Td)($);if("link-chart"===this.parentCompositeLayer?.type){if("relationship"===this.graphType)return new ge.A({type:"simple",symbol:(0,T.UT)(se)});const Ie=(0,Ee.r)((0,F.F0)(Z.gy.toJSON("point")).renderer);return(0,O.dt)(Ie.symbol,se),Ie}const me=(0,Ee.r)((0,F.F0)(Z.gy.toJSON(this.geometryType)).renderer);return(0,O.dt)(me.symbol,se),me}get spatialReference(){return this.parentCompositeLayer?.dataManager?.knowledgeGraph?.dataModel?.spatialReference??P.A.WGS84}set timeInfo(z){this._set("timeInfo",z)}get title(){return this._isOverridden("title")?this._get("title"):this.graphTypeName}set title(z){this._set("title",z)}writeTitle(z,$){$.title=z??"Layer"}createPopupTemplate(z){return(0,Ne.tn)(this,z)}createQuery(){return new Ue.A({where:"1=1",outFields:["*"]})}getField(z){return this.fieldsIndex.get(z)}getFieldDomain(z,$){return null}queryFeatures(z,$){var se=this;return(0,A.A)(function*(){yield se.load();const{resolvedQuery:me,queryEngine:Ie}=yield se._setupQueryObjects(z),Oe=Ce.A.fromJSON(yield Ie.executeQuery(me.toJSON(),$?.signal));return Oe.features.forEach(De=>{De.sourceLayer=se}),Oe})()}queryFeaturesJSON(z,$){var se=this;return(0,A.A)(function*(){yield se.load();const{resolvedQuery:me,queryEngine:Ie}=yield se._setupQueryObjects(z);return yield Ie.executeQuery(me.toJSON(),$?.signal)})()}queryFeatureCount(z,$){var se=this;return(0,A.A)(function*(){yield se.load();const{resolvedQuery:me,queryEngine:Ie}=yield se._setupQueryObjects(z);return Ie.executeQueryForCount(me.toJSON(),$?.signal)})()}queryExtent(z={},$){var se=this;return(0,A.A)(function*(){yield se.load();const me={...z,returnGeometry:!0},{resolvedQuery:Ie,queryEngine:Oe}=yield se._setupQueryObjects(me),De=yield Oe.executeQueryForExtent(Ie.toJSON(),$?.signal);let xe;return xe=null!=De.extent?.xmin&&null!=De.extent?.xmax&&null!=De.extent?.ymin&&null!=De.extent?.ymax?new E.A(De.extent):new E.A,{count:De.count,extent:xe}})()}queryObjectIds(z,$){var se=this;return(0,A.A)(function*(){yield se.load();const me=Ue.A.from(z);let Ie;if("link-chart"===se.parentCompositeLayer.type&&se._cachedQueryEngine)Ie=se._cachedQueryEngine;else{const Oe=yield se.parentCompositeLayer.dataManager.getData(me,se,$);Ie=se.loadQueryEngine(Oe)}return yield Ie.executeQueryForIds(me.toJSON(),$?.signal)})()}loadQueryEngine(z){const $=new Y.A({geometryType:Z.gy.toJSON(this.geometryType),hasM:this.hasM,hasZ:this.hasZ}),se=new te.do({fieldsIndex:this.fieldsIndex.toJSON(),geometryType:Z.gy.toJSON(this.geometryType),hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:this.spatialReference.toJSON(),timeInfo:this.timeInfo?.toJSON(),featureStore:$});return se.featureStore.addMany(z),se}refreshCachedQueryEngine(){var z=this;return(0,A.A)(function*(){const $=yield z.parentCompositeLayer.dataManager.getData(new Ue.A({where:"1=1",outFields:[G.dr]}),z);z._cachedQueryEngine=z.loadQueryEngine($)})()}load(z){return this.addResolvingPromise(this.parent.load(z).then(()=>(0,ve.sv)(this.timeInfo,this.fieldsIndex))),Promise.resolve(this)}_setupQueryObjects(z,$){var se=this;return(0,A.A)(function*(){const me=Ue.A.from(z),Ie=me.geometry;if(Ie&&!Ie.spatialReference?.isWGS84&&(yield(0,ee.initializeProjection)(Ie.spatialReference,N.KK),me.geometry=(0,ee.project)(Ie instanceof D.A||Ie instanceof k.A||Ie instanceof v.A?Ie:Ie.extent,N.KK)),"link-chart"===se.parentCompositeLayer.type&&se._cachedQueryEngine)return{resolvedQuery:me,queryEngine:se._cachedQueryEngine};const Oe=yield se.parentCompositeLayer.dataManager.getData(me,se,$);return{resolvedQuery:me,queryEngine:se.loadQueryEngine(Oe)}})()}};(0,C._)([(0,j.MZ)(ie((0,re.o8)(m.sU)))],Te.prototype,"blendMode",void 0),(0,C._)([(0,j.MZ)()],Te.prototype,"capabilities",void 0),(0,C._)([(0,j.MZ)({json:{origins:{"web-scene":{write:!1}},write:he()}})],Te.prototype,"charts",void 0),(0,C._)([(0,j.MZ)({readOnly:!0})],Te.prototype,"defaultPopupTemplate",null),(0,C._)([(0,j.MZ)({type:String,json:{origins:{service:{read:!1}},name:"layerDefinition.definitionExpression",write:{ignoreOrigin:!0}}})],Te.prototype,"definitionExpression",void 0),(0,C._)([(0,j.MZ)()],Te.prototype,"displayField",void 0),(0,C._)([(0,j.MZ)(ie((0,re.o8)(M.Dp)))],Te.prototype,"displayFilterEnabled",void 0),(0,C._)([(0,j.MZ)(ie((0,re.o8)(M.KV)))],Te.prototype,"displayFilterInfo",void 0),(0,C._)([(0,j.MZ)(ie((0,re.o8)(m.LF)))],Te.prototype,"effect",void 0),(0,C._)([(0,j.MZ)()],Te.prototype,"elevationInfo",void 0),(0,C._)([(0,j.MZ)(ie((0,re.o8)(B.Y)))],Te.prototype,"featureEffect",void 0),(0,C._)([(0,j.MZ)(ie((0,re.o8)(pe.d)))],Te.prototype,"featureReduction",null),(0,C._)([(0,j.MZ)()],Te.prototype,"fields",null),(0,C._)([(0,j.MZ)()],Te.prototype,"geometryType",null),(0,C._)([(0,j.MZ)()],Te.prototype,"geometryFieldName",null),(0,C._)([(0,j.MZ)({type:["entity","relationship"],nonNullable:!0,json:{write:{isRequired:!0,ignoreOrigin:!0}}})],Te.prototype,"graphType",void 0),(0,C._)([(0,j.MZ)({type:String,nonNullable:!0,json:{write:{isRequired:!0,ignoreOrigin:!0}}})],Te.prototype,"graphTypeName",null),(0,C._)([(0,j.MZ)()],Te.prototype,"hasM",null),(0,C._)([(0,j.MZ)()],Te.prototype,"hasZ",null),(0,C._)([(0,j.MZ)({type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}},write:{ignoreOrigin:!0}}})],Te.prototype,"id",void 0),(0,C._)([(0,j.MZ)({type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",default:!1,write:{overridePolicy(){return{enabled:!!this.geometryType,alwaysWriteDefaults:!0,ignoreOrigin:!0}}}}})],Te.prototype,"labelsVisible",void 0),(0,C._)([(0,j.MZ)({type:[w.A],json:{name:"layerDefinition.drawingInfo.labelingInfo",read:function ce(z,$,se){const me=[["ESRI__AGGREGATION_COUNT",G.M1],["ESRI__ORIGIN_ID",G.Cz],["ESRI__DESTINATION_ID",G.KQ],["ESRI__LAYOUT_GEOMETRY",G.T1]];try{for(const Ie of z)for(const[Oe,De]of me)Ie.labelExpression=Ie.labelExpression?.replaceAll(Oe,De),Ie.labelExpressionInfo?.expression&&(Ie.labelExpressionInfo.expression=Ie.labelExpressionInfo.expression.replaceAll(Oe,De))}catch(Ie){oe.A.getLogger(this).warn("Error updating labelingInfo",Ie)}return(0,Q.w)(z,$,se)},write:he()}})],Te.prototype,"labelingInfo",null),(0,C._)([(0,j.MZ)({readOnly:!0,json:{read:!1,write:{writer(z,$){switch(this.parentCompositeLayer?.type){case"link-chart":$.layerType="LinkChartSubLayer";break;case"knowledge-graph":$.layerType=this.geometryType?"KnowledgeGraphSubLayer":"KnowledgeGraphSubTable"}},isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}}})],Te.prototype,"layerType",void 0),(0,C._)([(0,j.MZ)(ie((0,re.o8)(ye.fV)))],Te.prototype,"legendEnabled",void 0),(0,C._)([(0,j.MZ)(ie((0,re.o8)(ye.hG)))],Te.prototype,"maxScale",void 0),(0,C._)([(0,j.MZ)(ie((0,re.o8)(ye.hn)))],Te.prototype,"minScale",void 0),(0,C._)([(0,j.MZ)()],Te.prototype,"objectIdField",void 0),(0,C._)([(0,j.MZ)()],Te.prototype,"objectType",void 0),(0,C._)([(0,j.MZ)(ie((0,re.o8)(ye.ke)))],Te.prototype,"opacity",void 0),(0,C._)([(0,j.MZ)(ie((0,re.o8)(W.ne)))],Te.prototype,"orderBy",void 0),(0,C._)([(0,j.MZ)({clonable:!1})],Te.prototype,"parent",void 0),(0,C._)([(0,j.MZ)()],Te.prototype,"parentCompositeLayer",void 0),(0,C._)([(0,j.MZ)(ie((0,re.o8)(ye.M6)))],Te.prototype,"popupEnabled",void 0),(0,C._)([(0,j.MZ)({type:R.A,json:{name:"popupInfo",write:{ignoreOrigin:!0}}})],Te.prototype,"popupTemplate",void 0),(0,C._)([(0,j.MZ)({type:Number,json:{write:{overridePolicy:we}}})],Te.prototype,"refreshInterval",void 0),(0,C._)([(0,j.MZ)({types:be.Hg,json:{name:"layerDefinition.drawingInfo.renderer",write:he()}})],Te.prototype,"renderer",null),(0,C._)([(0,j.MZ)()],Te.prototype,"source",void 0),(0,C._)([(0,j.MZ)()],Te.prototype,"spatialReference",null),(0,C._)([(0,j.MZ)({type:ae.A,json:{name:"layerDefinition.timeInfo",write:!0,origins:{"web-document":{name:"layerDefinition.timeInfo",read:!0,write:!0},"portal-item":{name:"layerDefinition.timeInfo",read:!0,write:!0}}}})],Te.prototype,"timeInfo",null),(0,C._)([(0,j.MZ)({type:String,json:{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}}})],Te.prototype,"title",null),(0,C._)([(0,x.K)("title")],Te.prototype,"writeTitle",null),(0,C._)([(0,j.MZ)({json:{read:!1}})],Te.prototype,"type",void 0),(0,C._)([(0,j.MZ)(ie((0,re.o8)(ue.B)))],Te.prototype,"useViewTime",void 0),(0,C._)([(0,j.MZ)({type:Boolean,json:{name:"visibility",write:he()}})],Te.prototype,"visible",void 0),Te=(0,C._)([(0,S.$)("esri.layers.knowledgeGraph.KnowledgeGraphSublayer")],Te);const U=Te},74148:(Ae,de,_)=>{_.d(de,{A:()=>oe});var A=_(61320),C=_(31732),R=_(42086),re=_(62799);class oe{constructor(){this._featureLookup=new Map}static getInstance(){return oe.instance||(oe.instance=new oe),oe.instance}static resetInstance(){oe.instance&&(oe.instance=null)}deleteFromStore(q){q.forEach(j=>{this._featureLookup.delete(j)})}readFromStoreByList(q){const j=[];return q.forEach(L=>{const S=this.readFromStoreById(L);S&&j.push(S)}),j}readFromStoreById(q){return this._featureLookup.get(q)??null}writeToStore(q,j,L){const S=[];return q.forEach(x=>{if(!x?.id)return;x.properties||(x.properties=[]);let J,E=null;if(L&&x.properties[L]&&(E=(0,C.Ux)(x.properties[L])),"originId"in x&&"destinationId"in x&&(x.properties[re.Cz]=x.originId,x.properties[re.KQ]=x.destinationId),x.properties[j]=x.id,x.id&&this._featureLookup.has(x.id)&&this._featureLookup.get(x.id).attributes){const v=this._featureLookup.get(x.id),D=JSON.parse(JSON.stringify(Object.assign(v.attributes,x.properties)));L&&x.properties[L]&&(D[L]=(0,A.rS)(x.properties[L])),J=new R.Om(E?JSON.parse(JSON.stringify(E)):v?.geometry?JSON.parse(JSON.stringify(v.geometry)):null,D,null,x.properties[j])}else J=new R.Om(E?JSON.parse(JSON.stringify(E)):null,x.properties,null,x.properties[j]);this._featureLookup.set(`${x.typeName?`${x.typeName}__${x.id}`:x.id}`,J),S.push(J)}),S}}},62799:(Ae,de,_)=>{_.d(de,{BL:()=>X,Cz:()=>C,KQ:()=>R,M1:()=>oe,T1:()=>re,dr:()=>A});const A="ESRI__ID",C="ESRI__OriginID",R="ESRI__DestID",re="ESRI__LayoutGeometry",oe="ESRI__AggregationCount",X="LC.ESRI__IsSpatial"},43326:(Ae,de,_)=>{_.d(de,{MY:()=>k,Td:()=>v,UT:()=>D,e$:()=>P,iW:()=>ee,qN:()=>S});var A=_(10467),C=_(68677),R=_(54947),re=_(70489),oe=_(4965),X=_(81279),q=_(47705);const j={initializeLayersFromClientData:(N=(0,A.A)(function*(Z,K,Y){if(K||(K=[...Z.layers,...Z.tables].map(G=>G.graphTypeName)),0===K?.length)return;const te=new Map;for(const G of K)te.set(G,L(Z,G));const F=yield(0,oe.fetchClientDataAtKeys)(Z.dataManager.knowledgeGraph,Array.from(te.values()),{requestOptions:{signal:Y?.signal}});for(const G of[...Z.layers,...Z.tables]){const _e=G.objectType.name;if(null==_e)continue;const g=F.get(L(Z,_e));if(g){const H=JSON.parse(g);null===H||"object"!=typeof H||H.hasOwnProperty("showLabels")||(H.showLabels=!1),G.read(H,{origin:"service"})}}}),function(K,Y,te){return N.apply(this,arguments)})},L=(N,Z)=>"knowledge-graph"===N.type?`${Z}/Map`:`${Z}/LinkChart/LinkChartSubLayer`;var N;function S(N,Z,K){return x.apply(this,arguments)}function x(){return x=(0,A.A)(function*(N,Z,K){return j.initializeLayersFromClientData(N,Z,K)}),x.apply(this,arguments)}const J=["#4a0932","#b31515","#18382e","#a64f1b","#102432","#8c213f","#ed9310","#2c6954","#144d59","#ffc730","#75351e","#454f4b","#78b1c2","#191921","#8f8f82","#9be0c0","#dbb658","#87b051","#11495c","#c43541","#9c5596","#44498b","#ad9d63","#86afb3","#5c98ca","#b0bfa2","#73241f","#b86b53","#d9d78c","#3e756d","#f260a1","#a0d17d","#c27c30","#eb82eb","#ffdf3c","#ffb259","#ab52b3","#3cccb4","#0095ba","#d92b30"],E="#8f8f82";function v(N){return new C.A(N<0||N>=J.length?E:J[N])}function D(N){const Z=N.toArray();return new X.A({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,style:"solid",width:.75,color:Z},{type:"CIMVectorMarker",enable:!0,size:6,markerPlacement:{type:"CIMMarkerPlacementOnLine",angleToLine:!0,relativeTo:"LineMiddle"},frame:{xmin:-10,ymin:-5,xmax:0,ymax:5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[-12,-3.47],[-12,3.6],[1.96,-.03],[-12,-3.47]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:Z}]}}]}]}}})}function k(N){let Z="ESRI__ID",K=4;for(const Y of N)if(Y.name){if("name"===Y.name.toLowerCase()){Z=Y.name;break}Y.name.toLowerCase().includes("name")?(Z=Y.name,K=2):"esriFieldTypeString"===Y.fieldType&&K>3&&(Z=Y.name,K=3)}return Z}function ee(N,Z,K){const Y={color:[80,80,80],haloColor:[255,255,255],haloSize:.7,font:{size:10,weight:"normal"}},te=new R.A({labelExpressionInfo:new re.A({expression:"ESRI__ID"===K?`${Z}`:`$feature.${K}`}),labelPlacement:"above-center",symbol:new q.A(Y)}),F=new R.A({labelExpressionInfo:new re.A({expression:`'${Z}' + IIf($feature.ESRI__AggregationCount>1, ' (' + $feature.ESRI__AggregationCount + ')', '')`}),labelPlacement:"center-along",labelPosition:"parallel",repeatLabel:!1,symbol:new q.A({...Y,yoffset:"12px"})});return"entity"===N?[te]:[F]}function P(N,Z,K){const Y={color:[255,255,255],haloColor:[0,0,0],haloSize:.7,font:{size:10,weight:"bold"}},te="ESRI__ID"===K?`${N}`:`$feature.${K}`;return"point"===Z?[new R.A({labelExpressionInfo:new re.A({expression:te}),labelPlacement:"above-center",symbol:new q.A(Y)})]:"polyline"===Z?[new R.A({labelExpressionInfo:new re.A({expression:te}),labelPlacement:"center-along",repeatLabel:!0,symbol:new q.A(Y)})]:"polygon"===Z?[new R.A({labelExpressionInfo:new re.A({expression:te}),labelPlacement:"always-horizontal",symbol:new q.A(Y)})]:null}},27783:(Ae,de,_)=>{_.d(de,{k5:()=>b,aq:()=>K,Wq:()=>T});var A=_(10467),R=(_(81098),_(5922)),S=(_(1749),_(55861),_(93615),_(36819),_(74148),_(63468),_(49976));(0,S.O)()({none:"none",startAndEnd:"start-and-end",startOnly:"start-only"}),(0,S.O)()({absoluteValue:"absolute-value",multiplier:"multiplier"});const v=new Map([["basic-grid","basic-grid"],["geographic-organic-standard","geographic-organic-standard"],["hierarchical-bottom-to-top","hierarchical-bottom-to-top"],["hierarchical-top-to-bottom","hierarchical-bottom-to-top"],["organic-community","organic-community"],["organic-fusiform","organic-standard"],["organic-leaf-circle","organic-standard"],["organic-standard","organic-standard"],["radial-node-centric","radial-root-centric"],["radial-root-centric","radial-root-centric"],["tree-bottom-to-top","tree-left-to-right"],["tree-left-to-right","tree-left-to-right"],["tree-right-to-left","tree-left-to-right"],["tree-top-to-bottom","tree-left-to-right"],["chronological-mono-timeline","chronological-mono-timeline"],["chronological-multi-timeline","chronological-multi-timeline"]]);var D=_(4965),k=_(74490);function K(m,M,B){return Y.apply(this,arguments)}function Y(){return(Y=(0,A.A)(function*(m,M,B){const I=[],W=function Z(m,M){const B=new Map;if(M.dataModel?.relationshipTypes)for(const I of M.dataModel.relationshipTypes)I.name&&B.set(I.name,[]);for(const I of m)B.has(I.typeName)&&B.get(I.typeName)?.push(I.id);return B}(m,M),V={},ne=[];for(const[Me,ve]of W){if(ve.length<1)continue;const w=`${Me}_ids`;V[w]=ve,ne.push(`MATCH (n)-[r:${Me}]->(m) WHERE id(r) in $${w} RETURN id(n), labels(n)[0], id(m), labels(m)[0]`)}if(0===ne.length)return[];const ue=ne.join(" UNION "),ye=new k.A({openCypherQuery:ue,bindParameters:V}),pe=(yield(0,D.executeQueryStreaming)(M,ye,B?.requestOptions)).resultRowsStream.getReader();for(;;){const{done:Me,value:ve}=yield pe.read();if(Me)break;for(const w of ve)I.push({id:w[0],typeName:w[1]}),I.push({id:w[2],typeName:w[3]})}return I})).apply(this,arguments)}_(81279),_(88521),_(47705);const b=m=>v.get(m)??"radial-root-centric";function T(m){if(!m.spatialReference.isWGS84)throw new R.A("knowledge-graph:layer-support-utils","The utilsExtentToInBoundsRings function only supports WGS84 spatial references.");return m.clone().normalize().map(M=>[[M.xmin,M.ymin],[M.xmin,M.ymax],[M.xmax,M.ymax],[M.xmax,M.ymin],[M.xmin,M.ymin]])}},93410:(Ae,de,_)=>{_.d(de,{LF:()=>x,dM:()=>J,sU:()=>L});var A=_(8189),C=_(85211),X=(_(3248),_(35150),_(40707),_(76576)),q=_(50501),j=_(72211);const L={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:{layerContainerTypes:q.K}},"portal-item":{read:!0,write:{layerContainerTypes:q.K}}}}},S={read:{reader:j.LF},write:{allowNull:!0,writer:j.M9,layerContainerTypes:q.K}},x={json:{read:!1,write:!1,origins:{"web-map":S,"portal-item":S}}},J=E=>{let v=class extends E{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return(0,A._)([(0,C.MZ)(L)],v.prototype,"blendMode",void 0),(0,A._)([(0,C.MZ)(x)],v.prototype,"effect",void 0),v=(0,A._)([(0,X.$)("esri.layers.mixins.BlendLayer")],v),v}},73955:(Ae,de,_)=>{_.d(de,{FJ:()=>K,Dp:()=>Y,KV:()=>te});var A=_(8189),C=_(89221),R=_(85211),q=(_(3248),_(35150),_(40707),_(76576)),j=_(50501),L=_(90660),S=_(31178),x=_(71065),J=_(50305),E=_(40856),v=_(43085);const D={write:{overridePolicy:(F,G,_e)=>({enabled:!_e||"scale"===_e.filterMode})}};let k=class extends(L.A.ClonableMixin(x.A)){constructor(F){super(F),this.id=(0,v.lk)(),this.maxScale=0,this.minScale=0,this.title="",this.where=null}};(0,A._)([(0,R.MZ)({type:String,json:{write:!0}})],k.prototype,"id",void 0),(0,A._)([(0,R.MZ)({type:Number,json:D})],k.prototype,"maxScale",void 0),(0,A._)([(0,R.MZ)({type:Number,json:D})],k.prototype,"minScale",void 0),(0,A._)([(0,R.MZ)({type:String,json:{write:!0}})],k.prototype,"title",void 0),(0,A._)([(0,R.MZ)({type:String,json:{write:!0}})],k.prototype,"where",void 0),k=(0,A._)([(0,q.$)("esri.layers.support.DisplayFilter")],k);const ee=k;var P=_(27960);let N=class extends(L.A.ClonableMixin(x.A)){constructor(F){super(F),this.activeFilterId=null,this.filters=new(S.A.ofType(ee)),this.mode="manual"}writeFilters(F,G,_e,g){const H=F.toArray();"scale"===this.mode&&H.sort((b,T)=>{const m=(0,E.oW)(T.minScale,b.minScale);return 0===m?b.maxScale-T.maxScale:m}),G[_e]=H.map(b=>b.toJSON(g))}write(F,G){return super.write(F,(0,P.mW)(this,G))}};(0,A._)([(0,R.MZ)({type:String,json:{write:{overridePolicy:(F,G,_e)=>({enabled:"manual"===_e.filterMode,isRequired:!0})}}})],N.prototype,"activeFilterId",void 0),(0,A._)([(0,R.MZ)({type:S.A.ofType(ee),nonNullable:!0,json:{write:!0}})],N.prototype,"filters",void 0),(0,A._)([(0,J.K)("filters")],N.prototype,"writeFilters",null),(0,A._)([(0,R.MZ)({type:["manual","scale"],nonNullable:!0,json:{name:"filterMode",write:!0}})],N.prototype,"mode",void 0),N=(0,A._)([(0,q.$)("esri.layers.support.DisplayFilterInfo")],N);const K=F=>{let G=class extends F{constructor(){super(...arguments),this.displayFilterEnabled=!0,this.displayFilterInfo=null}};return(0,A._)([(0,R.MZ)(Y)],G.prototype,"displayFilterEnabled",void 0),(0,A._)([(0,R.MZ)(te)],G.prototype,"displayFilterInfo",void 0),G=(0,A._)([(0,q.$)("esri.layers.mixins.DisplayFilteredLayer")],G),G},Y={type:Boolean,json:{name:"layerDefinition.disableDisplayFilter",read:{reader:F=>!F},write:{layerContainerTypes:j.K,writer(F,G,_e){(0,C.sM)(_e,!F,G)}},origins:{"web-scene":{write:!1,read:!1}}}},te={type:N,json:{name:"layerDefinition.displayFilterInfo",write:{enabled:!0,allowNull:!0,layerContainerTypes:j.K},origins:{"web-scene":{write:!1,read:!1}}}}},43124:(Ae,de,_)=>{_.d(de,{Rr:()=>L,fY:()=>J,ne:()=>x});var A=_(8189),C=_(89221),R=_(85211),q=(_(3248),_(35150),_(40707),_(76576)),j=_(15848);function L(E,v,D){if(!E)return null;const k=E.find(P=>!!P.field);if(!k)return null;const ee=new j.A;return ee.read(k,D),[ee]}const x={type:[j.A],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:L},write:{writer:function S(E,v,D,k){const ee=E.find(P=>!!P.field);ee&&(0,C.sM)(D,[ee.toJSON()],v)}}}},J=E=>{let v=class extends E{constructor(){super(...arguments),this.orderBy=null}};return(0,A._)([(0,R.MZ)(x)],v.prototype,"orderBy",void 0),v=(0,A._)([(0,q.$)("esri.layers.mixins.OrderedLayer")],v),v}},1151:(Ae,de,_)=>{_.d(de,{J:()=>_e});var A=_(10467),C=_(8189),re=(_(3248),_(35150)),oe=_(56492),X=_(85211),q=_(48669),L=(_(40707),_(76576)),S=_(50501),x=_(31178),J=_(48900),E=_(34703);const v=new x.A,D=new WeakMap;function N(g,H){return Number.isFinite(g)&&Number.isFinite(H)?H<=0?g:N(H,g%H):0}let Z=0,K=0;function Y(){const g=Date.now();let H=!1;for(const b of v){const T=b.deref();T?T.refreshInterval&&g-(D.get(T)??0)+5>=6e4*T.refreshInterval&&(D.set(T,g),T.refresh(g)):H=!0}if(H)for(let b=v.length-1;b>=0;b--)v.at(b).deref()||v.removeAt(b)}(0,E.fm)(()=>{const g=Date.now();let H=0;for(const b of v){const T=b.deref();T&&(H=N(Math.round(6e4*T.refreshInterval),H),T.refreshInterval?D.get(T)||D.set(T,g):D.delete(T))}if(H!==K){if(K=H,clearInterval(Z),0===K)return void(Z=0);Z=setInterval(Y,K)}},J.OH);const _e=g=>{let H=class extends g{constructor(...b){super(...b),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=(0,oe.sg)(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||function k(g){(function P(g){return null!=g&&"object"==typeof g&&"refreshInterval"in g&&"refresh"in g})(g)&&v.push(new WeakRef(g))}(this)},()=>{})}destroy(){!function ee(g){const H=v.find(b=>b.deref()===g);H&&v.remove(H)}(this)}castRefreshInterval(b){return b>=.1?b:b<=0?0:.1}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(b=Date.now()){(0,oe.QZ)(this._debounceHasDataChanged()).then(T=>{T&&this._set("refreshTimestamp",b),this.emit("refresh",{dataChanged:T})},T=>{re.A.getLogger(this).error(T),this.emit("refresh",{dataChanged:!1,error:T})})}hasDataChanged(){return(0,A.A)(function*(){return!0})()}get test(){}};return(0,C._)([(0,X.MZ)({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:S.K}}}}})],H.prototype,"refreshInterval",void 0),(0,C._)([(0,q.w)("refreshInterval")],H.prototype,"castRefreshInterval",null),(0,C._)([(0,X.MZ)({readOnly:!0})],H.prototype,"refreshTimestamp",void 0),(0,C._)([(0,X.MZ)({readOnly:!0})],H.prototype,"refreshParameters",null),H=(0,C._)([(0,L.$)("esri.layers.mixins.RefreshableLayer")],H),H}},33036:(Ae,de,_)=>{_.d(de,{j:()=>q});var A=_(8189),C=_(85211),X=(_(3248),_(35150),_(40707),_(76576));const q=L=>{let S=class extends L{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const x={minScale:this.minScale,maxScale:this.maxScale},J=this.parent;J&&"effectiveScaleRange"in J&&function j(L,S){L.minScale=L.minScale>0?S.minScale>0?Math.min(L.minScale,S.minScale):L.minScale:S.minScale,L.maxScale=L.maxScale>0?S.maxScale>0?Math.max(L.maxScale,S.maxScale):L.maxScale:S.maxScale}(x,J.effectiveScaleRange);const E=this._get("effectiveScaleRange");return E&&E.minScale===x.minScale&&E.maxScale===x.maxScale?E:x}};return(0,A._)([(0,C.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],S.prototype,"minScale",void 0),(0,A._)([(0,C.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],S.prototype,"maxScale",void 0),(0,A._)([(0,C.MZ)({readOnly:!0})],S.prototype,"effectiveScaleRange",null),S=(0,A._)([(0,X.$)("esri.layers.mixins.ScaleRangeLayer")],S),S}},84311:(Ae,de,_)=>{_.d(de,{B:()=>v,e:()=>D});var A=_(8189),C=_(85211),X=(_(3248),_(35150),_(40707),_(17221)),q=_(76576),j=_(50501),L=_(86300),S=_(38488),x=_(26957),J=_(17181),E=_(89352);const v={type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation",layerContainerTypes:j.K}}},D=k=>{let ee=class extends k{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(P,N){const Z=N.timeInfo.exportOptions;if(!Z)return null;const K=Z.timeOffset,Y=x.j.fromJSON(Z.timeOffsetUnits);return K&&Y?new E.A({value:K,unit:Y}):null}set timeInfo(P){(0,L.sv)(P,this.fieldsIndex),this._set("timeInfo",P)}};return(0,A._)([(0,C.MZ)({type:J.A,json:{write:!1}})],ee.prototype,"timeExtent",void 0),(0,A._)([(0,C.MZ)({type:E.A})],ee.prototype,"timeOffset",void 0),(0,A._)([(0,X.w)("service","timeOffset",["timeInfo.exportOptions"])],ee.prototype,"readOffset",null),(0,A._)([(0,C.MZ)({value:null,type:S.A,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],ee.prototype,"timeInfo",null),(0,A._)([(0,C.MZ)(v)],ee.prototype,"useViewTime",void 0),ee=(0,A._)([(0,q.$)("esri.layers.mixins.TemporalLayer")],ee),ee}},15848:(Ae,de,_)=>{_.d(de,{A:()=>J});var L,A=_(8189),C=_(49976),R=_(71065),re=_(85211),j=(_(3248),_(35150),_(40707),_(76576));const S=new C.J({asc:"ascending",desc:"descending"});let x=L=class extends R.A{constructor(E){super(E),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new L({field:this.field,valueExpression:this.valueExpression,order:this.order})}};(0,A._)([(0,re.MZ)({type:String,json:{write:!0}})],x.prototype,"field",void 0),(0,A._)([(0,re.MZ)({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],x.prototype,"valueExpression",void 0),(0,A._)([(0,re.MZ)({type:S.apiValues,json:{type:S.jsonValues,read:S.read,write:S.write}})],x.prototype,"order",void 0),x=L=(0,A._)([(0,j.$)("esri.layers.support.OrderByInfo")],x);const J=x},38488:(Ae,de,_)=>{_.d(de,{A:()=>k});var A=_(8189),C=_(90660),R=_(71065),re=_(85211),j=(_(3248),_(35150),_(40707),_(17221)),L=_(76576),S=_(50305),x=_(17181),J=_(89352),E=_(22639);function v(ee,P){return J.A.fromJSON({value:ee,unit:P})}let D=class extends(C.A.ClonableMixin(R.A)){constructor(ee){super(ee),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(ee,P){return P.timeExtent&&Array.isArray(P.timeExtent)&&2===P.timeExtent.length?x.A.fromArray(P.timeExtent):null}writeFullTimeExtent(ee,P){P.timeExtent=null!=ee?.start&&null!=ee.end?ee.toArray():null}readInterval(ee,P){return P.timeInterval&&P.timeIntervalUnits?v(P.timeInterval,P.timeIntervalUnits):P.defaultTimeInterval&&P.defaultTimeIntervalUnits?v(P.defaultTimeInterval,P.defaultTimeIntervalUnits):null}writeInterval(ee,P){P.timeInterval=ee?.toJSON().value??null,P.timeIntervalUnits=ee?.toJSON().unit??null}};(0,A._)([(0,re.MZ)({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],D.prototype,"cumulative",void 0),(0,A._)([(0,re.MZ)({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],D.prototype,"endField",void 0),(0,A._)([(0,re.MZ)({type:x.A,json:{write:{enabled:!0,allowNull:!0}}})],D.prototype,"fullTimeExtent",void 0),(0,A._)([(0,j.w)("fullTimeExtent",["timeExtent"])],D.prototype,"readFullTimeExtent",null),(0,A._)([(0,S.K)("fullTimeExtent")],D.prototype,"writeFullTimeExtent",null),(0,A._)([(0,re.MZ)({type:Boolean,json:{write:!0}})],D.prototype,"hasLiveData",void 0),(0,A._)([(0,re.MZ)({type:J.A,json:{write:{enabled:!0,allowNull:!0}}})],D.prototype,"interval",void 0),(0,A._)([(0,j.w)("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],D.prototype,"readInterval",null),(0,A._)([(0,S.K)("interval")],D.prototype,"writeInterval",null),(0,A._)([(0,re.MZ)({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],D.prototype,"startField",void 0),(0,A._)([(0,re.MZ)((0,E.P6)("timeReference",!0))],D.prototype,"timeZone",void 0),(0,A._)([(0,re.MZ)({type:String,json:{write:{enabled:!0,allowNull:!0}}})],D.prototype,"trackIdField",void 0),(0,A._)([(0,re.MZ)({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],D.prototype,"useTime",void 0),(0,A._)([(0,re.MZ)({type:[Date],json:{read:!1}})],D.prototype,"stops",void 0),D=(0,A._)([(0,L.$)("esri.layers.support.TimeInfo")],D);const k=D},27960:(Ae,de,_)=>{_.d(de,{Ch:()=>oe,mW:()=>R,u2:()=>re});var A=_(69287),C=_(63484);function R(E,v){return{...v,filterMode:E.mode}}function re(E,v){return q(E,v).next().value??null}function oe(E,v,D){const k=function X(E){if("manual"===S(E))return null;const v=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:D,maxScale:k}of E.filters)v[0]=Math.max(v[0],x(D)),v[1]=Math.min(v[1],J(k));return v}(E);if(k&&((0,A.gg)(v,k[0])||(0,A.ZH)(D,k[1])))return"";const ee=Array.from(q(E,v,D)),P=function j(E,v,D){if(0===E.length)return!0;const k=x(E.at(0)?.minScale),ee=J(E.at(-1)?.maxScale);if((0,A.ZH)(k,v)||(0,A.gg)(ee,D))return!0;for(let P=0;P<E.length-1;P++){const N=E[P];if((0,A.ZH)(x(E[P+1].minScale),J(N.maxScale)))return!0}return!1}(ee,v,D)?"1=1":ee.map(N=>N.where||"1=1").reduce((N,Z)=>(0,C.IW)(N,Z),"");return P&&"1=1"!==P?P:""}function*q(E,v,D){if("manual"===S(E)){const k=E.filters.find(ee=>ee.id===E.activeFilterId);k&&(yield k)}else{"object"==typeof v&&(v=v.scale);for(const k of E.filters)L(k.minScale,k.maxScale,v,D)&&(yield k)}}function L(E,v,D,k){return E=x(E),D=x(D),v=J(v),!(!(0,A.Sp)(D,E)&&(k??D)>E||(0,A.Hx)(v,D)||void 0!==k&&(0,A.Sp)(k,E))}function S(E){return"mode"in E?E.mode:E.filterMode}function x(E){return E||Number.POSITIVE_INFINITY}function J(E){return E||0}},3404:(Ae,de,_)=>{_.d(de,{p:()=>X});var A=_(3248),C=_(35150),R=_(29141),re=_(73258),oe=_(86300);function X(){return{fields:{type:[R.A],value:null,set:function(q){if(q&&(0,A.A)("big-integer-warning-enabled")){const j=q.filter(L=>"big-integer"===L.type||"oid"===L.type&&(L.length||0)>=8);if(j.length){const L=j.map(S=>`'${S.name}'`).join(", ");C.A.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${L}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",q)}},fieldsIndex:{readOnly:!0,get(){return re.A.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(q){this._userOutFields=q,this.notifyChange("outFields")},get:function(){const q=this._userOutFields;if(!q?.length)return null;if(q.includes("*"))return["*"];if(!this.fields)return q;for(const j of q)this.fieldsIndex?.has(j)||C.A.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${j} found in outFields`,{layer:this,outFields:q});return(0,oe.DB)(this.fieldsIndex,q)}}}}},4858:(Ae,de,_)=>{_.d(de,{BI:()=>v,D3:()=>J,XJ:()=>E,lc:()=>x,mX:()=>k,rU:()=>D,tH:()=>Y});var A=_(1119);const C="__begin__",R="__end__",re=new RegExp(C,"ig"),oe=new RegExp(R,"ig"),X=new RegExp("^"+C,"i"),q=new RegExp(R+"$","i"),j='"',L=j+" + ",S=" + "+j;function x(te){return te.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function J(te){return te.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function E(te){const F={expression:"",type:"none"};return te.labelExpressionInfo?te.labelExpressionInfo.value?(F.expression=te.labelExpressionInfo.value,F.type="conventional"):te.labelExpressionInfo.expression&&(F.expression=te.labelExpressionInfo.expression,F.type="arcade"):null!=te.labelExpression&&(F.expression=x(te.labelExpression),F.type="conventional"),F}function v(te){const F=E(te);switch(F.type){case"conventional":return k(F.expression);case"arcade":return F.expression}return null}function D(te){const F=E(te);switch(F.type){case"conventional":return function P(te){return te?.match(ee)?.[1].trim()||null}(F.expression);case"arcade":return Y(F.expression)}return null}function k(te){let F;return te?(F=(0,A.HC)(te,G=>C+'$feature["'+G+'"]'+R),F=X.test(F)?F.replace(X,""):j+F,F=q.test(F)?F.replace(q,""):F+j,F=F.replaceAll(re,L).replaceAll(oe,S)):F='""',F}const ee=/^\s*\{([^}]+)\}\s*$/i,N=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,Z=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,K=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function Y(te){if(!te)return null;let F=N.exec(te)||Z.exec(te);return F?F[1]||F[3]:(F=K.exec(te),F?F[2]:null)}},63468:(Ae,de,_)=>{_.d(de,{$C:()=>Z,Hh:()=>oe,J:()=>L,JT:()=>j,Tu:()=>P,Wg:()=>N,Xq:()=>Y,i6:()=>te,pM:()=>ee,tx:()=>q,vJ:()=>K});var A=_(90261);let C,R=null;function oe(){return C||(C=_.e(1538).then(_.bind(_,71538)).then(g=>g.l).then(({default:g})=>g({locateFile:H=>(0,A.s)(`esri/libs/linkchartlayout/${H}`)})).then(g=>{!function X(g){R=g}(g)}),C)}var q,j,L,S,g;(g=q||(q={}))[g.None=0]="None",g[g.IsMovable=1]="IsMovable",g[g.IsGeographic=2]="IsGeographic",g[g.IsRoot=4]="IsRoot",g[g.IsOld=8]="IsOld",function(g){g[g.Success=0]="Success",g[g.Error=1]="Error",g[g.Canceled=2]="Canceled"}(j||(j={})),function(g){g[g.Regular=0]="Regular",g[g.Curved=1]="Curved",g[g.Recursive=2]="Recursive"}(L||(L={})),function(g){g[g.right=0]="right",g[g.left=1]="left",g[g.top=2]="top",g[g.bottom=3]="bottom"}(S||(S={}));const x={none:0,"start-only":1,"start-and-end":2};function E(g,H,b,T,m,M){const B=b.length,I=m.length,W=Float64Array.BYTES_PER_ELEMENT,V=Uint32Array.BYTES_PER_ELEMENT,ne=Uint8Array.BYTES_PER_ELEMENT,pe=R._malloc(16+B*(ne+2*W)+I*(2*V));try{const Me=pe+16-pe%16,ve=Me+B*W,w=ve+B*W,Q=w+I*V,ae=Q+I*V,ge=()=>[R.HEAPF64.subarray(Me>>3,(Me>>3)+B),R.HEAPF64.subarray(ve>>3,(ve>>3)+B),R.HEAPU32.subarray(w>>2,(w>>2)+I),R.HEAPU32.subarray(Q>>2,(Q>>2)+I),R.HEAPU8.subarray(ae,ae+B)],[Ee,be,Ce,Ue,Ne]=ge();Ee.set(b),be.set(T),Ce.set(m),Ue.set(M),Ne.set(H);const O=g(B,ae,Me,ve,I,w,Q);let le=null,ie=null;if(O.value===j.Success){const Te=R.getLayoutLinksTypes(),U=R.getLayoutLinksVerticesEndIndices(),ce=R.getLayoutLinksVertices(),z=R.countLayoutLinksVertices();!I||Te&&U?z&&!ce?O.value=j.Error:(le={types:new Uint8Array(R.HEAPU8.subarray(Te,Te+I)),vertexEndIndex:new Uint32Array(R.HEAPU32.subarray(U>>2,(U>>2)+I)),vertices:new Float64Array(R.HEAPF64.subarray(ce>>3,(ce>>3)+2*z))},ie=R.getAuxiliaryGraphicElements()):O.value=j.Error}const[fe,Pe,he,Be,we]=ge();return b.set(fe),T.set(Pe),m.set(he),M.set(Be),H.set(we),{status:O.value,links:le,graphics:ie}}finally{R._free(pe),R.cleanupLayout()}}var ee,P,N,Z,K,Y,te,F,G;(function(g){g.getMinIdealEdgeLength=function H(){return R.getMinIdealEdgeLength()},g.apply=function b(T,m,M,B,I,W,V=2,ne=1,ue=-1){return E((ye,pe,Me,ve,w,Q,ae)=>R.applyForceDirectedLayout(T,ye,pe,Me,ve,w,Q,ae,V,ne,ue),m,M,B,I,W)}})(ee||(ee={})),function(g){g.apply=function H(b,T,m,M,B,I,W=2,V=1,ne=-1){return E((ue,ye,pe,Me,ve,w,Q)=>R.applyCommunityLayout(b,ue,ye,pe,Me,ve,w,Q,W,V,ne),T,m,M,B,I)}}(P||(P={})),function(g){g.apply=function H(b,T,m,M,B,I){return E((W,V,ne,ue,ye,pe,Me)=>R.applySimpleLayout(b,W,V,ne,ue,ye,pe,Me),T,m,M,B,I)}}(N||(N={})),function(g){g.apply=function H(b,T,m,M,B,I){return E((W,V,ne,ue,ye,pe,Me)=>R.applyHierarchicalLayout(b,W,V,ne,ue,ye,pe,Me),T,m,M,B,I)}}(Z||(Z={})),function(g){g.apply=function H(b,T,m,M,B,I){return E((W,V,ne,ue,ye,pe,Me)=>R.applyRadialTreeLayout(b,W,V,ne,ue,ye,pe,Me),T,m,M,B,I)}}(K||(K={})),function(g){g.apply=function H(b,T,m,M,B,I){return E((W,V,ne,ue,ye,pe,Me)=>R.applySmartTreeLayout(b,W,V,ne,ue,ye,pe,Me),T,m,M,B,I)}}(Y||(Y={})),function(g){g.apply=function H(b,T,m,M,B,I,W,V,ne,ue,ye,pe){return E((Me,ve,w,Q,ae,ge,Ee)=>{if(B.length!==Me)return{value:j.Error};if(I.length!==Me)return{value:j.Error};if(ne.length!==ae)return{value:j.Error};if(ue.length!==ae)return{value:j.Error};const be=Float64Array.BYTES_PER_ELEMENT,Ue=R._malloc(16+Me*be),Ne=R._malloc(16+Me*be),O=R._malloc(16+ae*be),le=R._malloc(16+ae*be),ie=Ue+16-Ue%16,fe=Ne+16-Ne%16,Pe=O+16-O%16,he=le+16-le%16;try{return R.HEAPF64.subarray(ie>>3,(ie>>3)+Me).set(B),R.HEAPF64.subarray(fe>>3,(fe>>3)+Me).set(I),R.HEAPF64.subarray(Pe>>3,(Pe>>3)+ae).set(ne),R.HEAPF64.subarray(he>>3,(he>>3)+ae).set(ue),R.applyChronologicalLayout(b,Me,ve,w,Q,ie,fe,ae,ge,Ee,Pe,he,ye,function J(g){const H={timeDirection:"right",timeBannerUTCOffsetInMinutes:0,eventsTicksVisualization:"start-and-end",showDurationLineForNonZeroDurationEntityEvents:!0,durationLineWidth:5,entityPositionAtDurationRatio:1,showNonZeroDurationIntervalBounds:!1,separateTimeOverlaps:!0,separateTimelineOverlaps:!0,moveFirstBends:!0,secondBendRatio:.3,lineSeparationMultiplier:1,spaceSeparatedLinesEvenly:!1,useBezierCurves:!1,separatedLineShapeRatio:0,...g?.toJSON()??{},eventsTicksVisualization:g?.eventsTicksVisualization??"start-and-end"};return{...H,timeDirection:{value:S[H.timeDirection]??S.right},eventsTicksVisualization:{value:x[H.eventsTicksVisualization]??x["start-and-end"]}}}(pe))}finally{R._free(Ue),R._free(Ne),R._free(O),R._free(le)}},T,m,M,W,V)}}(te||(te={})),function(g){g[g.Undirected=0]="Undirected",g[g.Directed=1]="Directed",g[g.Reversed=2]="Reversed"}(F||(F={})),function(g){g[g.ByCC_Raw=0]="ByCC_Raw",g[g.ByCC_NormalizeGlobally=1]="ByCC_NormalizeGlobally",g[g.ByCC_NormalizeByCC=2]="ByCC_NormalizeByCC"}(G||(G={}))},26957:(Ae,de,_)=>{_.d(de,{j:()=>C});const C=(0,_(49976).O)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0})},79122:(Ae,de,_)=>{_.d(de,{A:()=>H});var K,A=_(10467),C=_(8189),R=_(49976),re=_(77806),oe=_(35150),X=_(85211),q=_(48669),j=_(15463),L=_(17221),S=_(76576),x=_(50305),J=_(55739),E=_(86300),v=_(38582),D=_(18550),k=_(19390),ee=_(36345),P=_(23005),N=_(48218),Z=_(94048);const te="percent-of-total",F="field",G=new R.J({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:te,esriNormalizeByField:F}),_e=(0,J.dp)(k.A);let g=K=class extends((0,D.h)(v.A)){constructor(b){super(b),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(b,T,m){if(!Array.isArray(b))return;let M=T.minValue;return b.map(B=>{const I=new k.A;return I.read(B,m),null==I.minValue&&(I.minValue=M),null==I.maxValue&&(I.maxValue=I.minValue),M=I.maxValue,I})}writeClassBreakInfos(b,T,m,M){const B=b.map(I=>I.write({},M));this._areClassBreaksConsecutive()&&B.forEach(I=>delete I.classMinValue),T[m]=B}castField(b){return null==b?b:"function"==typeof b?(oe.A.getLogger(this).error(".field: field must be a string value"),null):(0,J.GX)(b)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let b=this._get("normalizationType");const T=!!this.normalizationField,m=null!=this.normalizationTotal;return T||m?(b=T&&F||m&&te||null,T&&m&&oe.A.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):b!==F&&b!==te||(b=null),b}set normalizationType(b){this._set("normalizationType",b)}addClassBreakInfo(b,T,m){let M=null;M="number"==typeof b?new k.A({minValue:b,maxValue:T,symbol:(0,Z.dp)(m)}):_e((0,re.o8)(b)),this.classBreakInfos.push(M),1===this.classBreakInfos.length&&this.notifyChange("minValue")}removeClassBreakInfo(b,T){const m=this.classBreakInfos.length;for(let M=0;M<m;M++){const B=[this.classBreakInfos[M].minValue,this.classBreakInfos[M].maxValue];if(B[0]===b&&B[1]===T){this.classBreakInfos.splice(M,1);break}}}getBreakIndex(b,T){return this.valueExpression&&null==T?.arcade&&oe.A.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(b,T):this._getBreakIndexForField(b)}getClassBreakInfo(b,T){var m=this;return(0,A.A)(function*(){let M=T;m.valueExpression&&null==T?.arcade&&(M={...M,arcade:yield(0,N.lw)()});const B=m.getBreakIndex(b,M);return-1!==B?m.classBreakInfos[B]:null})()}getSymbol(b,T){if(this.valueExpression&&null==T?.arcade)return void oe.A.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const m=this.getBreakIndex(b,T);return m>-1?this.classBreakInfos[m].symbol:this.defaultSymbol}getSymbolAsync(b,T){var m=this;return(0,A.A)(function*(){let M=T;if(m.valueExpression&&null==T?.arcade){const I=yield(0,N.lw)(),{arcadeUtils:W}=I;W.hasGeometryOperations(m.valueExpression)&&(yield W.enableGeometryOperations()),M={...M,arcade:I}}const B=m.getBreakIndex(b,M);return B>-1?m.classBreakInfos[B].symbol:m.defaultSymbol})()}get symbols(){const b=[];return this.classBreakInfos.forEach(T=>{T.symbol&&b.push(T.symbol)}),this.defaultSymbol&&b.push(this.defaultSymbol),b}getAttributeHash(){return this.visualVariables?.reduce((b,T)=>b+T.getAttributeHash(),"")??""}getMeshHash(){const b=JSON.stringify(this.backgroundFillSymbol),T=JSON.stringify(this.defaultSymbol),m=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${b}.${T}.${this.classBreakInfos.reduce((M,B)=>M+B.getMeshHash(),"")}.${m}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new K({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol?.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol?.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:(0,re.o8)(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:(0,re.o8)(this.visualVariables),legendOptions:(0,re.o8)(this.legendOptions),authoringInfo:(0,re.o8)(this.authoringInfo)})}collectRequiredFields(b,T){var m=this;return(0,A.A)(function*(){const M=[m.collectVVRequiredFields(b,T),m.collectSymbolFields(b,T)];yield Promise.all(M)})()}collectSymbolFields(b,T){var m=this;return(0,A.A)(function*(){const M=[...m.symbols.map(B=>B.collectRequiredFields(b,T)),(0,E.Dx)(b,T,m.valueExpression)];(0,E.rq)(b,T,m.field),(0,E.rq)(b,T,m.normalizationField),yield Promise.all(M)})()}_getBreakIndexForExpression(b,T){const{viewingMode:m,scale:M,spatialReference:B,arcade:I,timeZone:W}=T??{},{valueExpression:V}=this;let ne=this._compiledValueExpression.valueExpression===V?this._compiledValueExpression.compiledFunction:null;const ue=I.arcadeUtils;if(!ne){const pe=ue.createSyntaxTree(V);ne=ue.createFunction(pe),this._compiledValueExpression.compiledFunction=ne}this._compiledValueExpression.valueExpression=V;const ye=ue.executeFunction(ne,ue.createExecContext(b,ue.getViewInfo({viewingMode:m,scale:M,spatialReference:B}),W));return this._getBreakIndexfromInfos(ye)}_getBreakIndexForField(b){const m=b.attributes,M=this.normalizationType;let B=parseFloat(m[this.field]);if(M){const I=this.normalizationTotal,W=parseFloat(this.normalizationField?m[this.normalizationField]:void 0);if("log"===M)B=Math.log(B)*Math.LOG10E;else if(M!==te||null==I||isNaN(I)){if(M===F&&!isNaN(W)){if(isNaN(B)||isNaN(W))return-1;B/=W}}else B=B/I*100}return this._getBreakIndexfromInfos(B)}_getBreakIndexfromInfos(b){const T=this.isMaxInclusive;if(null!=b&&"number"==typeof b&&!isNaN(b))for(let m=0;m<this.classBreakInfos.length;m++){const M=[this.classBreakInfos[m].minValue,this.classBreakInfos[m].maxValue];if(M[0]<=b&&(T?b<=M[1]:b<M[1]))return m}return-1}_areClassBreaksConsecutive(){const b=this.classBreakInfos,T=b.length;for(let m=1;m<T;m++)if(b[m-1].maxValue!==b[m].minValue)return!1;return!0}};(0,C._)([(0,X.MZ)(ee.As)],g.prototype,"backgroundFillSymbol",void 0),(0,C._)([(0,X.MZ)({type:[k.A],json:{write:{isRequired:!0}}})],g.prototype,"classBreakInfos",void 0),(0,C._)([(0,L.w)("classBreakInfos")],g.prototype,"readClassBreakInfos",null),(0,C._)([(0,x.K)("classBreakInfos")],g.prototype,"writeClassBreakInfos",null),(0,C._)([(0,X.MZ)({type:String,json:{write:!0}})],g.prototype,"defaultLabel",void 0),(0,C._)([(0,X.MZ)(ee.z4)],g.prototype,"defaultSymbol",void 0),(0,C._)([(0,X.MZ)({type:String,json:{write:!0}})],g.prototype,"field",void 0),(0,C._)([(0,q.w)("field")],g.prototype,"castField",null),(0,C._)([(0,X.MZ)({type:Boolean})],g.prototype,"isMaxInclusive",void 0),(0,C._)([(0,X.MZ)({type:P.A,json:{write:!0}})],g.prototype,"legendOptions",void 0),(0,C._)([(0,X.MZ)({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],g.prototype,"minValue",null),(0,C._)([(0,X.MZ)({type:String,json:{write:!0}})],g.prototype,"normalizationField",void 0),(0,C._)([(0,X.MZ)({type:Number,json:{write:!0}})],g.prototype,"normalizationTotal",void 0),(0,C._)([(0,X.MZ)({type:G.apiValues,value:null,json:{type:G.jsonValues,read:G.read,write:G.write}})],g.prototype,"normalizationType",null),(0,C._)([(0,j.e)({classBreaks:"class-breaks"})],g.prototype,"type",void 0),(0,C._)([(0,X.MZ)({type:String,json:{write:!0}})],g.prototype,"valueExpression",void 0),(0,C._)([(0,X.MZ)({type:String,json:{write:!0}})],g.prototype,"valueExpressionTitle",void 0),g=K=(0,C._)([(0,S.$)("esri.renderers.ClassBreaksRenderer")],g);const H=g},19390:(Ae,de,_)=>{_.d(de,{A:()=>x});var L,A=_(8189),C=_(71065),R=_(85211),q=(_(3248),_(35150),_(40707),_(76576)),j=_(36345);let S=L=class extends C.A{constructor(J){super(J),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new L({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?.clone()??null})}getMeshHash(){const J=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${J}`}};(0,A._)([(0,R.MZ)({type:String,json:{write:!0}})],S.prototype,"description",void 0),(0,A._)([(0,R.MZ)({type:String,json:{write:!0}})],S.prototype,"label",void 0),(0,A._)([(0,R.MZ)({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],S.prototype,"minValue",void 0),(0,A._)([(0,R.MZ)({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],S.prototype,"maxValue",void 0),(0,A._)([(0,R.MZ)(j.Wp)],S.prototype,"symbol",void 0),S=L=(0,A._)([(0,q.$)("esri.renderers.support.ClassBreakInfo")],S);const x=S},36775:(Ae,de,_)=>{_.d(de,{A:()=>S});var A=_(8189),C=_(85211),X=(_(3248),_(35150),_(40707),_(76576)),q=_(1749),j=_(14430);let L=class extends j.A{constructor(x){super(x),this.layoutGeometry=null}};(0,A._)([(0,C.MZ)({type:q.A,json:{write:!0}})],L.prototype,"layoutGeometry",void 0),L=(0,A._)([(0,X.$)("esri.rest.knowledgeGraph.Entity")],L);const S=L},14430:(Ae,de,_)=>{_.d(de,{A:()=>L});var A=_(8189),C=_(85211),X=(_(3248),_(35150),_(40707),_(76576)),q=_(53805);let j=class extends q.A{constructor(S){super(S),this.typeName=null,this.id=null}};(0,A._)([(0,C.MZ)({type:String,json:{write:!0}})],j.prototype,"typeName",void 0),(0,A._)([(0,C.MZ)({type:String,json:{write:!0}})],j.prototype,"id",void 0),j=(0,A._)([(0,X.$)("esri.rest.knowledgeGraph.GraphNamedObject")],j);const L=j},53805:(Ae,de,_)=>{_.d(de,{A:()=>L});var A=_(8189),C=_(71065),R=_(85211),q=(_(3248),_(35150),_(40707),_(76576));let j=class extends C.A{constructor(S){super(S),this.properties=null}};(0,A._)([(0,R.MZ)({json:{write:!0}})],j.prototype,"properties",void 0),j=(0,A._)([(0,q.$)("esri.rest.knowledgeGraph.GraphObject")],j);const L=j},74490:(Ae,de,_)=>{_.d(de,{A:()=>J});var A=_(8189),C=_(85211),X=(_(3248),_(35150),_(40707),_(76576)),q=_(32034),j=_(98877);let L=class extends j.A{constructor(E){super(E),this.openCypherQuery=""}};(0,A._)([(0,C.MZ)()],L.prototype,"openCypherQuery",void 0),L=(0,A._)([(0,X.$)("esri.rest.knowledgeGraph.GraphQuery")],L);const S=L;let x=class extends S{constructor(E){super(E),this.bindParameters=null,this.bindGeometryQuantizationParameters=null,this.outputQuantizationParameters=null,this.outputSpatialReference=null,this.provenanceBehavior=null}};(0,A._)([(0,C.MZ)()],x.prototype,"bindParameters",void 0),(0,A._)([(0,C.MZ)()],x.prototype,"bindGeometryQuantizationParameters",void 0),(0,A._)([(0,C.MZ)()],x.prototype,"outputQuantizationParameters",void 0),(0,A._)([(0,C.MZ)({type:q.A})],x.prototype,"outputSpatialReference",void 0),(0,A._)([(0,C.MZ)()],x.prototype,"provenanceBehavior",void 0),x=(0,A._)([(0,X.$)("esri.rest.knowledgeGraph.GraphQueryStreaming")],x);const J=x},49238:(Ae,de,_)=>{_.d(de,{A:()=>L});var A=_(8189),X=(_(35150),_(3248),_(40707),_(5922),_(76576)),q=_(53805);let j=class extends q.A{constructor(S){super(S)}};j=(0,A._)([(0,X.$)("esri.rest.knowledgeGraph.ObjectValue")],j);const L=j},36303:(Ae,de,_)=>{_.d(de,{A:()=>S});var A=_(8189),C=_(71065),R=_(85211),q=(_(3248),_(35150),_(40707),_(76576)),j=_(53805);let L=class extends C.A{constructor(x){super(x),this.path=[]}};(0,A._)([(0,R.MZ)({type:[j.A],json:{write:!0}})],L.prototype,"path",void 0),L=(0,A._)([(0,q.$)("esri.rest.knowledgeGraph.Path")],L);const S=L},97870:(Ae,de,_)=>{_.d(de,{A:()=>S});var A=_(8189),C=_(85211),X=(_(3248),_(35150),_(40707),_(76576)),q=_(93615),j=_(14430);let L=class extends j.A{constructor(x){super(x),this.originId=null,this.destinationId=null,this.layoutGeometry=null}};(0,A._)([(0,C.MZ)({type:String,json:{write:!0}})],L.prototype,"originId",void 0),(0,A._)([(0,C.MZ)({type:String,json:{write:!0}})],L.prototype,"destinationId",void 0),(0,A._)([(0,C.MZ)({type:q.A,json:{write:!0}})],L.prototype,"layoutGeometry",void 0),L=(0,A._)([(0,X.$)("esri.rest.knowledgeGraph.Relationship")],L);const S=L},41843:(Ae,de,_)=>{_.d(de,{DQ:()=>k,tn:()=>v});var A=_(92165),C=_(86300),R=_(54042),q=(_(75432),_(65121),_(558),_(8975)),J=(_(90792),_(83902),_(98089),_(62270),_(61099)),E=_(17580);function v({displayField:T,editFieldsInfo:m,fields:M,objectIdField:B,title:I},W){if(!M)return null;const V=function K(T,m){const M=m?.visibleFieldNames;return function P({fields:T,ignoreFieldTypes:m,sortDisabled:M}){const B=T;return m&&(T=T.filter(I=>!m.includes(I.type))),T===B&&(T=T.slice()),!0!==M&&T.sort(N),T}({fields:T.fields??[],ignoreFieldTypes:m?.ignoreFieldTypes||b,sortDisabled:m?.sortDisabled}).map(B=>new J.A({fieldName:B.name,isEditable:(0,C.R$)(B,T),label:B.alias,format:F(B),visible:ee(B,{...T,visibleFieldNames:M})}))}({editFieldsInfo:m,fields:M,objectIdField:B},W);if(!V.length)return null;const ne=function g(T){const m=(0,C.mB)(T),{titleBase:M}=T;return m?`${M}: {${m.trim()}}`:M??""}({titleBase:I,fields:M,displayField:T}),ue=function G(){return[new q.A,new R.A]}();return new A.A({title:ne,content:ue,fieldInfos:V})}function k(T){const{title:m,graphic:M}=T??{},{attributes:B,sourceLayer:I}=M??{},W=I&&"displayField"in I?I.displayField:null,V=W?B?.[W]:null,ne=null!=V?JSON.stringify(V):null,ue=M?.getObjectId()?.toString();return m||ne||ue||""}const ee=(T,m)=>m.visibleFieldNames?m.visibleFieldNames.has(T.name):(0,C.Bz)(T,m);function N(T,m){return"oid"===T.type?-1:"oid"===m.type?1:H(T)?-1:H(m)?1:(T.alias||T.name).toLocaleLowerCase().localeCompare((m.alias||m.name).toLocaleLowerCase())}function F(T){switch(T.type){case"small-integer":case"integer":case"single":return new E.A({digitSeparator:!0,places:0});case"double":return new E.A({digitSeparator:!0,places:2});case"string":return(0,C.JL)(T.name)?new E.A({digitSeparator:!0,places:0}):void 0;default:return}}function H(T){return"name"===(T.name&&T.name.toLowerCase())||"name"===T.alias?.toLowerCase()}const b=["geometry","blob","raster","guid","xml"]},32117:(Ae,de,_)=>{_.d(de,{$w:()=>ee,Bu:()=>T,DW:()=>_e,FH:()=>Me,FM:()=>j,G9:()=>re,GV:()=>N,Go:()=>S,K3:()=>pe,Kn:()=>F,MM:()=>E,MO:()=>Q,Nl:()=>m,Ny:()=>Z,O2:()=>M,UE:()=>B,YC:()=>w,YF:()=>W,ZO:()=>ne,_1:()=>H,_H:()=>Y,_W:()=>P,_d:()=>G,bs:()=>ve,dI:()=>Ue,e6:()=>x,gQ:()=>q,iA:()=>ue,jn:()=>D,lW:()=>J,mA:()=>v,n5:()=>I,pM:()=>g,pV:()=>te,pk:()=>ae,rB:()=>ge,s4:()=>R,xo:()=>b,yH:()=>K,yX:()=>Ne,zb:()=>V,zr:()=>k});var A=_(46988);function R(O,le,ie,fe){return function C(O){return"function"==typeof O}(O)?O(le,ie,fe):O}function re(O){return[O.r,O.g,O.b,O.a]}const oe=" /-,\n";function X(O){let le=O.length;for(;le--;)if(!oe.includes(O.charAt(le)))return!1;return!0}function q(O,le){const ie=[];let fe=0,Pe=-1;do{if(Pe=O.indexOf("[",fe),Pe>=fe){if(Pe>fe){const he=O.slice(fe,Pe);ie.push([he,null,X(he)])}if(fe=Pe+1,Pe=O.indexOf("]",fe),Pe>=fe){if(Pe>fe){const he=le[O.slice(fe,Pe)];he&&ie.push([null,he,!1])}fe=Pe+1}}}while(-1!==Pe);if(fe<O.length){const he=O.slice(fe);ie.push([he,null,X(he)])}return ie}function j(O,le,ie,fe){let Pe="",he=null;for(const Be of le){const[we,Te,U]=Be;if(we)U?he=we:(he&&(Pe+=he,he=null),Pe+=we);else{let ce=Te;null!=ie&&(ce=Q(Te,ie));const z=O.attributes[ce];z&&(he&&(Pe+=he,he=null),Pe+=z)}}return function L(O,le){switch("string"!=typeof O&&(O=String(O)),le){case"LowerCase":return O.toLowerCase();case"Allcaps":return O.toUpperCase();default:return O}}(Pe,fe)}function S(O,le,ie,fe,Pe,he,Be=!0){const we=le/Pe,Te=ie/he,U=Math.ceil(we/2),ce=Math.ceil(Te/2);for(let z=0;z<he;z++)for(let $=0;$<Pe;$++){const se=4*($+(Be?he-z-1:z)*Pe);let me=0,Ie=0,Oe=0,De=0,xe=0,Re=0,Se=0;const je=(z+.5)*Te;for(let Le=Math.floor(z*Te);Le<(z+1)*Te;Le++){const Ge=Math.abs(je-(Le+.5))/ce,We=($+.5)*we,ke=Ge*Ge;for(let Ve=Math.floor($*we);Ve<($+1)*we;Ve++){let Ke=Math.abs(We-(Ve+.5))/U;const ze=Math.sqrt(ke+Ke*Ke);ze>=-1&&ze<=1&&(me=2*ze*ze*ze-3*ze*ze+1,me>0&&(Ke=4*(Ve+Le*le),Se+=me*O[Ke+3],Oe+=me,O[Ke+3]<255&&(me=me*O[Ke+3]/250),De+=me*O[Ke],xe+=me*O[Ke+1],Re+=me*O[Ke+2],Ie+=me))}}fe[se]=De/Ie,fe[se+1]=xe/Ie,fe[se+2]=Re/Ie,fe[se+3]=Se/Oe}}function x(O){return O?[O[0],O[1],O[2],O[3]/255]:[0,0,0,0]}function J(O){return O.data?.symbol??null}function E(O){return"CIMVectorMarker"===O.type||"CIMPictureMarker"===O.type||"CIMBarChartMarker"===O.type||"CIMCharacterMarker"===O.type||"CIMPieChartMarker"===O.type||"CIMStackedBarChartMarker"===O.type}function v(O){return"CIMGradientStroke"===O.type||"CIMPictureStroke"===O.type||"CIMSolidStroke"===O.type}function D(O){return null!=O&&("CIMGradientFill"===O.type||"CIMHatchFill"===O.type||"CIMPictureFill"===O.type||"CIMSolidFill"===O.type||"CIMWaterFill"===O.type)}function k(O){return null!=O&&("CIMMarkerPlacementAlongLineRandomSize"===O.type||"CIMMarkerPlacementAlongLineSameSize"===O.type||"CIMMarkerPlacementAlongLineVariableSize"===O.type||"CIMMarkerPlacementAtExtremities"===O.type||"CIMMarkerPlacementAtMeasuredUnits"===O.type||"CIMMarkerPlacementAtRatioPositions"===O.type||"CIMMarkerPlacementOnLine"===O.type||"CIMMarkerPlacementOnVertices"===O.type)}const ee=(O,le=0)=>null==O||isNaN(O)?le:O,P=(O,le)=>O??le,N=(O,le)=>O??le,Z=O=>O.tintColor?x(O.tintColor):[255,255,255,1],K=O=>{if(!O)return!1;for(const le of O)switch(le.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function Y(){return Promise.all([_.e(3930),_.e(2076),_.e(4108)]).then(_.bind(_,27815))}function te(O){if(!O)return"normal";switch(O.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function F(O){if(!O)return"normal";switch(O.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function G(O){let le="normal",ie="normal";if(O){const fe=O.toLowerCase();fe.includes("italic")?le="italic":fe.includes("oblique")&&(le="oblique"),fe.includes("bold")?ie="bold":fe.includes("light")&&(ie="lighter")}return{style:le,weight:ie}}function _e(O){return O.underline?"underline":O.strikethrough?"line-through":"none"}function g(O){if(!O)return null;switch(O.type){case"CIMPolygonSymbol":if(O.symbolLayers)for(const le of O.symbolLayers){const ie=g(le);if(null!=ie)return ie}break;case"CIMTextSymbol":return g(O.symbol);case"CIMSolidFill":return O.color}return null}function H(O){if(O)switch(O.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const le=O.symbolLayers;if(le)for(const ie of le){const fe=H(ie);if(null!=fe)return fe}break}case"CIMTextSymbol":return H(O.symbol);case"CIMSolidStroke":return O.color}}function b(O){if(O)switch(O.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(O.symbolLayers)for(const le of O.symbolLayers){const ie=b(le);if(void 0!==ie)return ie}break;case"CIMTextSymbol":return b(O.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return O.width}}function T(O){switch(O){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function m(O){switch(O){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function M(O){return(O?Object.keys(O):[]).map(le=>({name:le,alias:le,type:"string"==typeof O[le]?"esriFieldTypeString":"esriFieldTypeDouble"}))}const B=O=>O.includes("data:image/svg+xml");function I(O){if(!O)return null;switch(O.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function W(O){return O&&O.charAt(0).toLowerCase()+O.slice(1)}function V(O,le,ie,fe,Pe,he,Be=!0){const{infos:we}=he;let Te=1,U=0,ce=0,z=0,$=1;for(const{absoluteAnchorPoint:Ie,offsetX:Oe,offsetY:De,rotation:xe,size:Re,frameHeight:Se,rotateClockWise:je,scaleSymbolsProportionally:Le}of we)$=Ie?1:Te,ce=be(Oe,De,U,$,ce),z=Ee(Oe,De,U,$,z),Se&&(Le||Be)&&(Te*=Re/Se),U=Ce(xe,je,U);const se=be(fe,Pe,U,$,ce),me=Ee(fe,Pe,U,$,z);return{size:O*Te,rotation:Ce(le,ie,U),offsetX:se,offsetY:me}}function ne(O){if(null==O)return!1;if(Array.isArray(O))return O.every(le=>ne(le));switch(typeof O){case"string":return!!O;case"number":return!isNaN(O)}}function ue(O,le){if("color"===le||"outlinecolor"===le||"backgroundcolor"===le||"borderlinecolor"===le||"tintcolor"===le)return[...A.K[le]];const ie=A.D[O];if(!ie)throw new Error(`InternalError: default value for type ${O}.`);return ie[le]}function pe(O){return"string"==typeof O?function ye(O){return O.split(" ").map(le=>Number(le))}(O):O}function Me(O){return O?.dashTemplate&&(O.dashTemplate=pe(O.dashTemplate)),O}function ve(O){if(null==O)return"Normal";switch(O.type){case"CIMTextSymbol":return O.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const le=O.symbolLayers;if(!le)return"Normal";for(const ie of le)if("CIMVectorMarker"===ie.type)return ve(ie)}break;case"CIMVectorMarker":{const le=O.markerGraphics;if(!le)return"Normal";for(const ie of le)if(ie.symbol)return ve(ie.symbol)}}return"Normal"}function w(O){if(O)switch(O.type){case"CIMTextSymbol":return O.height;case"CIMPointSymbol":{let le=0;if(O.symbolLayers)for(const ie of O.symbolLayers)if(ie)switch(ie.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const fe=ie.size??A.D.CIMVectorMarker.size;fe>le&&(le=fe);break}}return le}case"CIMLineSymbol":case"CIMPolygonSymbol":{let le=0;if(O.symbolLayers)for(const ie of O.symbolLayers)if(ie)switch(ie.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const fe=ie.width;null!=fe&&fe>le&&(le=fe);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(ie.markerPlacement&&k(ie.markerPlacement)){const fe=ie.size??A.D.CIMVectorMarker.size;fe>le&&(le=fe)}break;case"CIMPictureFill":{const fe=ie.height;null!=fe&&fe>le&&(le=fe)}}return le}}}function Q(O,le){if(null!==le){const ie=le.get(O);return ie?ie.name:O}return O}function ae(O){return O.map(le=>({...le,propertyName:W(le.propertyName)}))}function ge(O){const le={};for(const ie in O){const fe=O[ie];le[W(ie)]=fe}return le}function Ee(O,le,ie,fe,Pe){const he=ie*Math.PI/180;if(he){const Be=Math.cos(he);return(Math.sin(he)*O+Be*le)*fe+Pe}return le*fe+Pe}function be(O,le,ie,fe,Pe){const he=ie*Math.PI/180;return he?(Math.cos(he)*O-Math.sin(he)*le)*fe+Pe:O*fe+Pe}function Ce(O,le,ie){return le?ie-O:ie+O}function Ue(O,le,ie){const fe="Color"===ie||"TintColor"===ie||"ToColor"===ie,Pe="Rotation"===ie||"Angle"===ie||"ToRotation"===ie;let he=le[W(ie)];if(null!=he&&(fe?he=[he[0]/255,he[1]/255,he[2]/255,he[3]/255]:Pe&&(he*=Math.PI/180)),null==he&&(he=ue(le.type,ie.toLowerCase()),null!=he&&(fe?he=[he[0]/255,he[1]/255,he[2]/255,he[3]]:Pe&&(he*=Math.PI/180))),null!=le.primitiveName){const Be=O[le.primitiveName];if(null!=Be){const we=Be[ie];null==we||("string"==typeof we||"number"==typeof we||Array.isArray(we)?(he=we,null!=he&&(fe?he=[he[0]/255,he[1]/255,he[2]/255,he[3]/255]:Pe&&(he*=Math.PI/180))):(he={valueExpressionInfo:we,defaultValue:he},null!=he&&(fe?he={type:"Process",op:"ArcadeColor",value:he}:Pe&&(he={type:"Process",op:"Divide",left:he,right:180/Math.PI}))))}}if(null==he)throw new Error(`Failed to derive a value or an expression for "${ie}".`);return he}function Ne(O,le){return Math.max(Math.min((O??le)/100,1),0)}},76926:(Ae,de,_)=>{_.d(de,{Fe:()=>E,Km:()=>X,Nk:()=>S});var A=_(68677),C=_(32117);function X(P,N,Z,K){if(P)if("CIMTextSymbol"!==P.type){if(Z&&P.effects)for(const Y of P.effects)L(Y,N);if(P.symbolLayers)for(const Y of P.symbolLayers){switch(Y.type){case"CIMPictureMarker":case"CIMVectorMarker":q(Y,N,K);break;case"CIMPictureStroke":case"CIMSolidStroke":case"CIMGradientStroke":!K?.preserveOutlineWidth&&Y.width&&(Y.width*=N);break;case"CIMPictureFill":Y.height&&(Y.height*=N),Y.offsetX&&(Y.offsetX*=N),Y.offsetY&&(Y.offsetY*=N);break;case"CIMHatchFill":X(Y.lineSymbol,N,!0,{...K,preserveOutlineWidth:!1}),Y.offsetX&&(Y.offsetX*=N),Y.offsetY&&(Y.offsetY*=N),Y.separation&&(Y.separation*=N)}if(Y.effects)for(const te of Y.effects)L(te,N)}}else null!=P.height&&(P.height*=N)}function q(P,N,Z){if(P&&(P.markerPlacement&&function j(P,N){switch((0,C.zr)(P)&&P.offset&&(P.offset*=N),P.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(P.customEndingOffset&&(P.customEndingOffset*=N),P.offsetAlongLine&&(P.offsetAlongLine*=N),P.placementTemplate&&P.placementTemplate.length){const Z=P.placementTemplate.map(K=>K*N);P.placementTemplate=Z}break;case"CIMMarkerPlacementAlongLineVariableSize":if(P.maxRandomOffset&&(P.maxRandomOffset*=N),P.placementTemplate&&P.placementTemplate.length){const Z=P.placementTemplate.map(K=>K*N);P.placementTemplate=Z}break;case"CIMMarkerPlacementOnLine":P.startPointOffset&&(P.startPointOffset*=N);break;case"CIMMarkerPlacementAtExtremities":P.offsetAlongLine&&(P.offsetAlongLine*=N);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":P.beginPosition&&(P.beginPosition*=N),P.endPosition&&(P.endPosition*=N);break;case"CIMMarkerPlacementPolygonCenter":P.offsetX&&(P.offsetX*=N),P.offsetY&&(P.offsetY*=N);break;case"CIMMarkerPlacementInsidePolygon":P.offsetX&&(P.offsetX*=N),P.offsetY&&(P.offsetY*=N),P.stepX&&(P.stepX*=N),P.stepY&&(P.stepY*=N)}}(P.markerPlacement,N),P.offsetX&&(P.offsetX*=N),P.offsetY&&(P.offsetY*=N),P.anchorPoint&&"Absolute"===P.anchorPointUnits&&(P.anchorPoint={x:P.anchorPoint.x*N,y:P.anchorPoint.y*N}),P.size=null!=P.size?P.size*N:0,"CIMVectorMarker"===P.type&&P.markerGraphics))for(const K of P.markerGraphics)P.scaleSymbolsProportionally||X(K.symbol,N,!0,Z)}function L(P,N){switch(P.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":P.width&&(P.width*=N);break;case"CIMGeometricEffectBuffer":P.size&&(P.size*=N);break;case"CIMGeometricEffectCut":P.beginCut&&(P.beginCut*=N),P.endCut&&(P.endCut*=N),P.middleCut&&(P.middleCut*=N);break;case"CIMGeometricEffectDashes":if(P.customEndingOffset&&(P.customEndingOffset*=N),P.offsetAlongLine&&(P.offsetAlongLine*=N),P.dashTemplate&&P.dashTemplate.length){const Z=P.dashTemplate.map(K=>K*N);P.dashTemplate=Z}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":P.length&&(P.length*=N);break;case"CIMGeometricEffectMove":P.offsetX&&(P.offsetX*=N),P.offsetY&&(P.offsetY*=N);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":P.offset&&(P.offset*=N);break;case"CIMGeometricEffectRegularPolygon":P.radius&&(P.radius*=N);break;case"CIMGeometricEffectTaperedPolygon":P.fromWidth&&(P.fromWidth*=N),P.length&&(P.length*=N),P.toWidth&&(P.toWidth*=N);break;case"CIMGeometricEffectWave":P.amplitude&&(P.amplitude*=N),P.period&&(P.period*=N)}}function S(P){const N=[];return x((0,C.lW)(P),N),N.length?new A.A((0,C.e6)(N[0])):null}function x(P,N){if(!P)return;let Z;Z="CIMTextSymbol"===P.type?P.symbol:P;const K="CIMPolygonSymbol"===P.type;if(Z?.symbolLayers)for(const Y of Z.symbolLayers)if(!(Y.colorLocked||K&&((0,C.mA)(Y)||(0,C.MM)(Y)&&Y.markerPlacement&&(0,C.zr)(Y.markerPlacement))))switch(Y.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":Y.tintColor&&J(N,Y.tintColor);break;case"CIMVectorMarker":Y.markerGraphics?.forEach(te=>{x(te.symbol,N)});break;case"CIMSolidStroke":case"CIMSolidFill":J(N,Y.color);break;case"CIMHatchFill":x(Y.lineSymbol,N)}}function J(P,N){for(const Z of P)if(Z.join(".")===N.join("."))return;P.push(N)}function E(P,N,Z){N instanceof A.A||(N=new A.A(N));const K=(0,C.lW)(P);K&&v(K,N,Z)}function v(P,N,Z){if(!P)return;let K;K="CIMTextSymbol"===P.type?P.symbol:P;const Y="CIMPolygonSymbol"===K?.type;if(K?.symbolLayers)for(const te of K.symbolLayers){if(te.colorLocked)continue;if(Y)if(Z){const{layersToColor:G}=Z;if(((0,C.mA)(te)||(0,C.MM)(te)&&te.markerPlacement&&(0,C.zr)(te.markerPlacement))&&"fill"===G||(0,C.jn)(te)&&"outline"===G)continue}else if((0,C.mA)(te)||(0,C.MM)(te)&&te.markerPlacement&&(0,C.zr)(te.markerPlacement))continue;const F=N.toArray();switch(te.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":te.tintColor=F;break;case"CIMVectorMarker":te.markerGraphics?.forEach(G=>{v(G.symbol,N,Z)});break;case"CIMSolidStroke":case"CIMSolidFill":te.color=F;break;case"CIMHatchFill":v(te.lineSymbol,N,Z)}}}},91644:(Ae,de,_)=>{_.d(de,{A7:()=>j,Cx:()=>L,Hk:()=>S,JJ:()=>v,SF:()=>x,UK:()=>q,jM:()=>J,x3:()=>E}),_(3248);var C=_(88521),R=_(55417),re=_(46602),oe=_(47705),X=_(48254);const q=re.A.fromJSON(X.Cb),j=R.A.fromJSON(X.yM),L=C.A.fromJSON(X.WR),S=oe.A.fromJSON(X.JZ);function x(D){if(null==D)return null;switch(D.type){case"mesh":return null;case"point":case"multipoint":return q;case"polyline":return j;case"polygon":case"extent":return L}return null}const J=re.A.fromJSON(X.nC),E=R.A.fromJSON(X.HW),v=C.A.fromJSON(X.b6)},48254:(Ae,de,_)=>{_.d(de,{Cb:()=>R,HW:()=>j,JR:()=>C,JZ:()=>X,WR:()=>oe,b6:()=>L,fT:()=>A,nC:()=>q,yM:()=>re});const A=[252,146,31,255],C=[153,153,153,255],R={type:"esriSMS",style:"esriSMSCircle",size:6,color:A,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},re={type:"esriSLS",style:"esriSLSSolid",width:.75,color:A},oe={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},X={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},q={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},j={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},L={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},8134:(Ae,de,_)=>{_.d(de,{$4:()=>ee,O0:()=>P,O1:()=>N,Sw:()=>Z,eH:()=>D,rc:()=>k});var A=_(90261),C=_(68677),R=_(89563),re=_(33087),oe=_(67685),X=_(76926);const q="picture-fill",j="simple-fill",L="simple-line",S="simple-marker",x="text",J="cim",E=new Map([["dash",[4,3]],["dashdot",[4,3,1,3]],["dot",[1,3]],["longdash",[8,3]],["longdashdot",[8,3,1,3]],["longdashdotdot",[8,3,1,3,1,3]],["shortdash",[4,1]],["shortdashdot",[4,1,1,1]],["shortdashdotdot",[4,1,1,1,1,1]],["shortdot",[1,1]],["solid",[]]]),v=new re.q(1e3);function D(K){const Y=K.style;let te=null;if(K)switch(K.type){case S:"cross"!==Y&&"x"!==Y&&(te=K.color);break;case j:Y&&"solid"!==Y?"none"!==Y&&(te={type:"pattern",x:0,y:0,src:(0,A.s)(`esri/symbols/patterns/${Y}.png`),width:5,height:5}):te=K.color;break;case q:te={type:"pattern",src:K.url,width:(0,oe.Lz)(K.width)*K.xscale,height:(0,oe.Lz)(K.height)*K.yscale,x:(0,oe.Lz)(K.xoffset),y:(0,oe.Lz)(K.yoffset)};break;case x:te=K.color;break;case J:te=(0,X.Nk)(K)}return te}function k(K,Y){const te=K+"-"+Y;return void 0!==v.get(te)?Promise.resolve(v.get(te)):(0,R.A)(K,{responseType:"image"}).then(F=>{const G=F.data,_e=G.naturalWidth,g=G.naturalHeight,H=document.createElement("canvas");H.width=_e,H.height=g;const b=H.getContext("2d");b.fillStyle=Y,b.fillRect(0,0,_e,g),b.globalCompositeOperation="destination-in",b.drawImage(G,0,0);const T=H.toDataURL();return v.put(te,T),T})}function ee(K){if(!K)return null;let Y=null;switch(K.type){case j:case q:case S:Y=ee(K.outline);break;case L:{const te=(0,oe.Lz)(K.width);null!=K.style&&"none"!==K.style&&0!==te&&(Y={color:K.color,style:N(K.style),width:te,cap:K.cap,join:"miter"===K.join?(0,oe.Lz)(K.miterLimit):K.join},Y.dashArray=P(Y).join(",")||"none");break}default:Y=null}return Y}function P(K){if(!K?.style)return[];const{dashArray:Y,style:te,width:F}=K;if("string"==typeof Y&&"none"!==Y)return Y.split(",").map(g=>Number(g));const G=F??0,_e=E.has(te)?E.get(te).map(g=>g*G):[];if("butt"!==K.cap)for(const[g,H]of _e.entries())_e[g]=g%2==1?H+G:Math.max(H-G,1);return _e}const N=(()=>{const K={};return Y=>{if(K[Y])return K[Y];const te=Y.replaceAll("-","");return K[Y]=te,te}})(),Z=new C.A([128,128,128])},83393:(Ae,de,_)=>{_.d(de,{$d:()=>D,GG:()=>pe,N7:()=>k,Sx:()=>ee,UQ:()=>ue,di:()=>Me,dt:()=>Y,f3:()=>ve,k_:()=>v});var A=_(10467),C=_(68677),R=_(89447),oe=(_(3248),_(67685)),X=_(25866),q=_(72211),j=_(76926),L=_(8134),S=_(74760),x=_(94048);const J=new C.A("white");function v(w){if(!w)return 0;if((0,x.wk)(w)){const Q=function E(w){const Q=w.symbolLayers?.at(-1);if(Q&&"outline"in Q)return Q?.outline?.size}(w);return Q??0}return(0,oe.PN)((0,L.$4)(w)?.width)}function D(w){if(null==w||!("symbolLayers"in w)||null==w.symbolLayers)return!1;switch(w.type){case"point-3d":return w.symbolLayers.some(Q=>"object"===Q.type);case"line-3d":return w.symbolLayers.some(Q=>"path"===Q.type);case"polygon-3d":return w.symbolLayers.some(Q=>"object"===Q.type||"extrude"===Q.type);default:return!1}}function k(w){return w.resource?.href??""}function ee(w,Q){if(!w)return null;let ae=null;return(0,x.wk)(w)?ae=function P(w){const Q=w.symbolLayers;if(!Q)return null;let ae=null;return Q.forEach(ge=>{"object"===ge.type&&ge.resource?.href||(ae="water"===ge.type?ge.color:ge.material?ge.material.color:null)}),ae?new C.A(ae):null}(w):(0,x.$y)(w)&&(ae="cim"===w.type?(0,j.Nk)(w):w.color?new C.A(w.color):null),ae?N(ae,Q):null}function N(w,Q){if(null==Q||null==w)return w;const ae=w.toRgba();return ae[3]=ae[3]*Q,new C.A(ae)}function Y(w,Q,ae){w&&(Q||null!=ae)&&(Q&&(Q=new C.A(Q)),(0,x.wk)(w)?function Z(w,Q,ae){const ge=w.symbolLayers;if(!ge)return;const Ee=be=>N(Q=Q??be??(null!=ae?J:null),ae);ge.forEach(be=>{if("object"!==be.type||!be.resource?.href||Q)if("water"===be.type)be.color=Ee(be.color);else{const Ue=Ee(null!=be.material?be.material.color:null);null==be.material?be.material=new S.N({color:Ue}):be.material.color=Ue,null!=ae&&"outline"in be&&null!=be.outline?.color&&(be.outline.color=N(be.outline.color,ae))}})}(w,Q,ae):(0,x.$y)(w)&&function K(w,Q,ae){(Q=Q??w.color)&&(w.color=N(Q,ae)),null!=ae&&"outline"in w&&w.outline?.color&&(w.outline.color=N(w.outline.color,ae))}(w,Q,ae))}function F(){return F=(0,A.A)(function*(w,Q){const ae=w.symbolLayers;ae&&(yield(0,R.jJ)(ae,function(){var ge=(0,A.A)(function*(Ee){return function G(w,Q){return _e.apply(this,arguments)}(Ee,Q)});return function(Ee){return ge.apply(this,arguments)}}()))}),F.apply(this,arguments)}function _e(){return _e=(0,A.A)(function*(w,Q){switch(w.type){case"extrude":!function b(w,Q){w.size="number"==typeof Q[2]?Q[2]:0}(w,Q);break;case"icon":case"line":case"text":!function g(w,Q){const ae=H(Q);null!=ae&&(w.size=ae)}(w,Q);break;case"path":!function M(w,Q){const ae=B(Q,X.Un,[w.width,void 0,w.height]);w.width=V(Q[0],w.width,1,ae),w.height=V(Q[2],w.height,1,ae)}(w,Q);break;case"object":yield function T(w,Q){return m.apply(this,arguments)}(w,Q)}}),_e.apply(this,arguments)}function H(w){for(const Q of w)if("number"==typeof Q)return Q;return null}function m(){return m=(0,A.A)(function*(w,Q){const{resourceSize:ae,symbolSize:ge}=yield function I(w){return W.apply(this,arguments)}(w),Ee=B(Q,ae,ge);w.width=V(Q[0],ge[0],ae[0],Ee),w.depth=V(Q[1],ge[1],ae[1],Ee),w.height=V(Q[2],ge[2],ae[2],Ee)}),m.apply(this,arguments)}function B(w,Q,ae){for(let ge=0;ge<3;ge++){const Ee=w[ge];switch(Ee){case"symbol-value":{const be=ae[ge];return null!=be?be/Q[ge]:1}case"proportional":break;default:if(Ee&&Q[ge])return Ee/Q[ge]}}return 1}function W(){return(W=(0,A.A)(function*(w){const{computeObjectLayerResourceSize:Q}=yield _.e(5020).then(_.bind(_,75020)),ae=yield Q(w,10),{width:ge,height:Ee,depth:be}=w,Ce=[ge,be,Ee];let Ue=1;for(let Ne=0;Ne<3;Ne++){const O=Ce[Ne];if(null!=O){Ue=O/ae[Ne];break}}for(let Ne=0;Ne<3;Ne++)null==Ce[Ne]&&(Ce[Ne]=ae[Ne]*Ue);return{resourceSize:ae,symbolSize:Ce}})).apply(this,arguments)}function V(w,Q,ae,ge){switch(w){case"proportional":return ae*ge;case"symbol-value":return Q??ae;default:return w}}function ue(w,Q){return ye.apply(this,arguments)}function ye(){return ye=(0,A.A)(function*(w,Q){if(w&&Q)return(0,x.wk)(w)?function te(w,Q){return F.apply(this,arguments)}(w,Q):void((0,x.$y)(w)&&function ne(w,Q){const ae=H(Q);if(null!=ae)switch(w.type){case"simple-marker":w.size=ae;break;case"picture-marker":{const ge=w.width/w.height;ge>1?(w.width=ae,w.height=ae*ge):(w.width=ae*ge,w.height=ae);break}case"simple-line":w.width=ae;break;case"text":w.font.size=ae}}(w,Q))}),ye.apply(this,arguments)}function pe(w,Q,ae){if(w&&null!=Q)if((0,x.wk)(w)){const ge=w.symbolLayers;ge&&ge.forEach(Ee=>{if("object"===Ee.type)switch(ae){case"tilt":Ee.tilt=(Ee.tilt??0)+Q;break;case"roll":Ee.roll=(Ee.roll??0)+Q;break;default:Ee.heading=(Ee.heading??0)+Q}"icon"===Ee.type&&(Ee.angle+=Q)})}else(0,x.$y)(w)&&("simple-marker"!==w.type&&"picture-marker"!==w.type&&"text"!==w.type||(w.angle+=Q))}function Me(w){if(!w)return null;const Q=w.effects.filter(ae=>"bloom"!==ae.type).map(ae=>ae.toJSON());return(0,q.zu)(Q)}function ve(w){return null!=w&&"polygon-3d"===w.type&&w.symbolLayers.some(Q=>"extrude"===Q.type)}},89352:(Ae,de,_)=>{_.d(de,{A:()=>E});var A=_(8189),C=_(90660),R=_(71065),re=_(97442),oe=_(85211),L=(_(3248),_(35150),_(40707),_(15463)),S=_(76576),x=_(26957);let J=class extends(C.A.ClonableMixin(R.A)){constructor(v){super(v),this.unit="milliseconds",this.value=0}toMilliseconds(){return(0,re.t)(this.value,this.unit,"milliseconds")}};(0,A._)([(0,L.e)(x.j,{nonNullable:!0})],J.prototype,"unit",void 0),(0,A._)([(0,oe.MZ)({type:Number,json:{write:!0},nonNullable:!0})],J.prototype,"value",void 0),J=(0,A._)([(0,S.$)("esri.time.TimeInterval")],J);const E=J}}]);