"use strict";(self.webpackChunkAngularClient=self.webpackChunkAngularClient||[]).push([[2007],{53781:(gt,at,U)=>{U.d(at,{a:()=>d,b:()=>st,c:()=>A,d:()=>D,e:()=>y,f:()=>ut,g:()=>X,h:()=>v,j:()=>B,l:()=>b,n:()=>W,s:()=>it,t:()=>_});var L=U(85952);function A(l,f){return l[0]=f[0],l[1]=f[1],l[2]=f[2],l[3]=f[3],l}function it(l,f,g,z,H){return l[0]=f,l[1]=g,l[2]=z,l[3]=H,l}function X(l,f,g){return l[0]=f[0]+g[0],l[1]=f[1]+g[1],l[2]=f[2]+g[2],l[3]=f[3]+g[3],l}function k(l,f,g){return l[0]=f[0]-g[0],l[1]=f[1]-g[1],l[2]=f[2]-g[2],l[3]=f[3]-g[3],l}function x(l,f,g){return l[0]=f[0]*g[0],l[1]=f[1]*g[1],l[2]=f[2]*g[2],l[3]=f[3]*g[3],l}function J(l,f,g){return l[0]=f[0]/g[0],l[1]=f[1]/g[1],l[2]=f[2]/g[2],l[3]=f[3]/g[3],l}function st(l,f,g){return l[0]=f[0]*g,l[1]=f[1]*g,l[2]=f[2]*g,l[3]=f[3]*g,l}function w(l,f){const g=f[0]-l[0],z=f[1]-l[1],H=f[2]-l[2],nt=f[3]-l[3];return Math.sqrt(g*g+z*z+H*H+nt*nt)}function D(l,f){const g=f[0]-l[0],z=f[1]-l[1],H=f[2]-l[2],nt=f[3]-l[3];return g*g+z*z+H*H+nt*nt}function B(l){const f=l[0],g=l[1],z=l[2],H=l[3];return Math.sqrt(f*f+g*g+z*z+H*H)}function ut(l){const f=l[0],g=l[1],z=l[2],H=l[3];return f*f+g*g+z*z+H*H}function W(l,f){const g=f[0],z=f[1],H=f[2],nt=f[3];let Q=g*g+z*z+H*H+nt*nt;return Q>0&&(Q=1/Math.sqrt(Q),l[0]=g*Q,l[1]=z*Q,l[2]=H*Q,l[3]=nt*Q),l}function v(l,f){return l[0]*f[0]+l[1]*f[1]+l[2]*f[2]+l[3]*f[3]}function b(l,f,g,z){const H=f[0],nt=f[1],Q=f[2],ft=f[3];return l[0]=H+z*(g[0]-H),l[1]=nt+z*(g[1]-nt),l[2]=Q+z*(g[2]-Q),l[3]=ft+z*(g[3]-ft),l}function _(l,f,g){const z=f[0],H=f[1],nt=f[2],Q=f[3];return l[0]=g[0]*z+g[4]*H+g[8]*nt+g[12]*Q,l[1]=g[1]*z+g[5]*H+g[9]*nt+g[13]*Q,l[2]=g[2]*z+g[6]*H+g[10]*nt+g[14]*Q,l[3]=g[3]*z+g[7]*H+g[11]*nt+g[15]*Q,l}function d(l,f){return l[0]===f[0]&&l[1]===f[1]&&l[2]===f[2]&&l[3]===f[3]}function y(l,f){const g=l[0],z=l[1],H=l[2],nt=l[3],Q=f[0],ft=f[1],ht=f[2],m=f[3],p=(0,L.FD)();return Math.abs(g-Q)<=p*Math.max(1,Math.abs(g),Math.abs(Q))&&Math.abs(z-ft)<=p*Math.max(1,Math.abs(z),Math.abs(ft))&&Math.abs(H-ht)<=p*Math.max(1,Math.abs(H),Math.abs(ht))&&Math.abs(nt-m)<=p*Math.max(1,Math.abs(nt),Math.abs(m))}Object.freeze(Object.defineProperty({__proto__:null,add:X,ceil:function G(l,f){return l[0]=Math.ceil(f[0]),l[1]=Math.ceil(f[1]),l[2]=Math.ceil(f[2]),l[3]=Math.ceil(f[3]),l},copy:A,copyVec3:function V(l,f){return l[0]=f[0],l[1]=f[1],l[2]=f[2],l},dist:w,distance:w,div:J,divide:J,dot:v,equals:y,exactEquals:d,floor:function Y(l,f){return l[0]=Math.floor(f[0]),l[1]=Math.floor(f[1]),l[2]=Math.floor(f[2]),l[3]=Math.floor(f[3]),l},inverse:function O(l,f){return l[0]=1/f[0],l[1]=1/f[1],l[2]=1/f[2],l[3]=1/f[3],l},len:B,length:B,lerp:b,max:function ct(l,f,g){return l[0]=Math.max(f[0],g[0]),l[1]=Math.max(f[1],g[1]),l[2]=Math.max(f[2],g[2]),l[3]=Math.max(f[3],g[3]),l},min:function $(l,f,g){return l[0]=Math.min(f[0],g[0]),l[1]=Math.min(f[1],g[1]),l[2]=Math.min(f[2],g[2]),l[3]=Math.min(f[3],g[3]),l},mul:x,multiply:x,negate:function tt(l,f){return l[0]=-f[0],l[1]=-f[1],l[2]=-f[2],l[3]=-f[3],l},normalize:W,random:function S(l,f=1){const g=L.Ov;let z,H,nt,Q,ft,ht;do{z=2*g()-1,H=2*g()-1,ft=z*z+H*H}while(ft>=1);do{nt=2*g()-1,Q=2*g()-1,ht=nt*nt+Q*Q}while(ht>=1);const m=Math.sqrt((1-ft)/ht);return l[0]=f*z,l[1]=f*H,l[2]=f*nt*m,l[3]=f*Q*m,l},round:function q(l,f){return l[0]=Math.round(f[0]),l[1]=Math.round(f[1]),l[2]=Math.round(f[2]),l[3]=Math.round(f[3]),l},scale:st,scaleAndAdd:function lt(l,f,g,z){return l[0]=f[0]+g[0]*z,l[1]=f[1]+g[1]*z,l[2]=f[2]+g[2]*z,l[3]=f[3]+g[3]*z,l},set:it,sqrDist:D,sqrLen:ut,squaredDistance:D,squaredLength:ut,str:function C(l){return"vec4("+l[0]+", "+l[1]+", "+l[2]+", "+l[3]+")"},sub:k,subtract:k,transformMat4:_,transformQuat:function M(l,f,g){const z=f[0],H=f[1],nt=f[2],Q=g[0],ft=g[1],ht=g[2],m=g[3],p=m*z+ft*nt-ht*H,R=m*H+ht*z-Q*nt,Z=m*nt+Q*H-ft*z,ot=-Q*z-ft*H-ht*nt;return l[0]=p*m+ot*-Q+R*-ht-Z*-ft,l[1]=R*m+ot*-ft+Z*-Q-p*-ht,l[2]=Z*m+ot*-ht+p*-ft-R*-Q,l[3]=f[3],l}},Symbol.toStringTag,{value:"Module"}))},32954:(gt,at,U)=>{function L(){return[1,0,0,0,1,0,0,0,1]}function V(x,J,G,Y,$,ct,q,st,lt){return[x,J,G,Y,$,ct,q,st,lt]}U.d(at,{fA:()=>V,vt:()=>L,zK:()=>X});const X=[1,0,0,0,1,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:X,clone:function A(x){return[x[0],x[1],x[2],x[3],x[4],x[5],x[6],x[7],x[8]]},create:L,createView:function it(x,J){return new Float64Array(x,J,9)},fromValues:V},Symbol.toStringTag,{value:"Module"}))},62789:(gt,at,U)=>{function L(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function A(x){return[x[0],x[1],x[2],x[3],x[4],x[5],x[6],x[7],x[8],x[9],x[10],x[11],x[12],x[13],x[14],x[15]]}function V(x,J,G,Y,$,ct,q,st,lt,w,D,B,ut,tt,O,W){return[x,J,G,Y,$,ct,q,st,lt,w,D,B,ut,tt,O,W]}U.d(at,{fA:()=>V,o8:()=>A,vt:()=>L,zK:()=>X});const X=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:X,clone:A,create:L,createView:function it(x,J){return new Float64Array(x,J,16)},fromValues:V},Symbol.toStringTag,{value:"Module"}))},14214:(gt,at,U)=>{function L(){return[0,0,0,1]}function A(k){return[k[0],k[1],k[2],k[3]]}U.d(at,{o8:()=>A,vt:()=>L,zK:()=>it});const it=[0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:it,clone:A,create:L,fromValues:function V(k,x,J,G){return[k,x,J,G]}},Symbol.toStringTag,{value:"Module"}))},12225:(gt,at,U)=>{function L(){return new Float32Array(3)}function A(w){const D=new Float32Array(3);return D[0]=w[0],D[1]=w[1],D[2]=w[2],D}function V(w,D,B){const ut=new Float32Array(3);return ut[0]=w,ut[1]=D,ut[2]=B,ut}function X(){return L()}function k(){return V(1,1,1)}function x(){return V(1,0,0)}function J(){return V(0,1,0)}function G(){return V(0,0,1)}U.d(at,{fA:()=>V,o8:()=>A,vt:()=>L});const Y=X(),$=k(),ct=x(),q=J(),st=G();Object.freeze(Object.defineProperty({__proto__:null,ONES:$,UNIT_X:ct,UNIT_Y:q,UNIT_Z:st,ZEROS:Y,clone:A,create:L,createView:function it(w,D){return new Float32Array(w,D,3)},fromValues:V,ones:k,unitX:x,unitY:J,unitZ:G,zeros:X},Symbol.toStringTag,{value:"Module"}))},89141:(gt,at,U)=>{function L(){return[0,0,0,0]}function A(tt){return[tt[0],tt[1],tt[2],tt[3]]}function V(tt,O,W,v){return[tt,O,W,v]}function it(tt,O,W,v){return[tt,O,W,v]}function X(tt,O=[0,0,0,0]){const W=Math.min(4,tt.length);for(let v=0;v<W;++v)O[v]=tt[v];return O}function J(){return V(1,1,1,1)}function G(){return V(1,0,0,0)}function Y(){return V(0,1,0,0)}function $(){return V(0,0,1,0)}function ct(){return V(0,0,0,1)}U.d(at,{CN:()=>it,Un:()=>st,ci:()=>X,fA:()=>V,o8:()=>A,uY:()=>q,vt:()=>L});const q=[0,0,0,0],st=J(),lt=G(),w=Y(),D=$(),B=ct();Object.freeze(Object.defineProperty({__proto__:null,ONES:st,UNIT_W:B,UNIT_X:lt,UNIT_Y:w,UNIT_Z:D,ZEROS:q,clone:A,create:L,createView:function k(tt,O){return new Float64Array(tt,O,4)},freeze:it,fromArray:X,fromValues:V,ones:J,unitW:ct,unitX:G,unitY:Y,unitZ:$,zeros:function x(){return[0,0,0,0]}},Symbol.toStringTag,{value:"Module"}))},93617:(gt,at,U)=>{U.d(at,{C:()=>ct,Cr:()=>D,Io:()=>l,LV:()=>$,O_:()=>w,Qj:()=>q,T7:()=>I,Tj:()=>rt,U5:()=>d,Ui:()=>y,Z1:()=>et,_I:()=>P,b6:()=>F,ci:()=>ut,fA:()=>st,gv:()=>j,lU:()=>B,mN:()=>f,mP:()=>_,mR:()=>C,vt:()=>J,ze:()=>M});var L=U(69287),A=U(28714),V=U(25866),X=(U(53781),U(99608)),k=U(19741),x=U(56632);function J(m=nt){return[m[0],m[1],m[2],m[3]]}function $(m=nt[0],p=nt[1],R=nt[2],Z=nt[3]){return st(m,p,R,Z,k.Km.get())}function ct(m,p){return st(p[0],p[1],p[2],p[3],m)}function q(m){return m}function st(m,p,R,Z,ot=J()){return ot[0]=m,ot[1]=p,ot[2]=R,ot[3]=Z,ot}function w(m,p,R){const Z=p[0]*p[0]+p[1]*p[1]+p[2]*p[2],ot=Math.abs(Z-1)>1e-5&&Z>1e-12?1/Math.sqrt(Z):1;return R[0]=p[0]*ot,R[1]=p[1]*ot,R[2]=p[2]*ot,R[3]=-(R[0]*m[0]+R[1]*m[1]+R[2]*m[2]),R}function D(m,p,R,Z=J()){const ot=R[0]-p[0],Mt=R[1]-p[1],_t=R[2]-p[2],dt=m[0]-p[0],bt=m[1]-p[1],Et=m[2]-p[2],vt=Mt*Et-_t*bt,mt=_t*dt-ot*Et,yt=ot*bt-Mt*dt,It=vt*vt+mt*mt+yt*yt,pt=Math.abs(It-1)>1e-5&&It>1e-12?1/Math.sqrt(It):1;return Z[0]=vt*pt,Z[1]=mt*pt,Z[2]=yt*pt,Z[3]=-(Z[0]*m[0]+Z[1]*m[1]+Z[2]*m[2]),Z}function B(m,p,R,Z=0,ot=Math.floor(R*(1/3)),Mt=Math.floor(R*(2/3))){if(R<3)return!1;p(O,Z);let _t=ot,dt=!1;for(;_t<R-1&&!dt;)p(W,_t),_t++,dt=!(0,A.p)(O,W);if(!dt)return!1;for(_t=Math.max(_t,Mt),dt=!1;_t<R&&!dt;)p(v,_t),_t++,(0,A.d)(b,O,W),(0,A.n)(b,b),(0,A.d)(S,W,v),(0,A.n)(S,S),dt=!(0,A.p)(O,v)&&!(0,A.p)(W,v)&&Math.abs((0,A.f)(b,S))<tt;return dt?(D(O,W,v,m),!0):(0!==Z||1!==ot||2!==Mt)&&B(m,p,R,0,1,2)}function ut(m,p,R=!0){const Z=p.length/3;return B(m,(ot,Mt)=>(0,A.i)(ot,p[3*Mt+0],p[3*Mt+1],p[3*Mt+2]),R?Z-1:Z)}const tt=.99619469809,O=(0,V.vt)(),W=(0,V.vt)(),v=(0,V.vt)(),b=(0,V.vt)(),S=(0,V.vt)();function _(m,p,R){return p!==m&&ct(m,p),m[3]=-(0,A.f)(m,R),m}function M(m,p){return p[0]=-m[0],p[1]=-m[1],p[2]=-m[2],p[3]=-m[3],p}function C(m,p,R,Z){return(0,A.e)(v,p,m),w(R,v,Z)}function d(m,p,R,Z){return z(H(m,p,(0,A.d)(k.rq.get(),R,p),ft,Z))}function y(m,p,R){return null!=p&&z(H(m,p.origin,p.direction,ht,R))}function I(m,p,R){return z(H(m,p.origin,p.vector,Q.NONE,R))}function j(m,p,R){return z(H(m,p.origin,p.vector,Q.CLAMP,R))}function rt(m,p){return f(m,p)>=0}function F(m,p){const R=(0,A.f)(m,p.ray.direction),Z=-f(m,p.ray.origin);if(R>-1e-6&&R<1e-6)return Z>0;const ot=Z/R;return R>0?ot<p.c1&&(p.c1=ot):ot>p.c0&&(p.c0=ot),p.c0<=p.c1}function P(m,p,R){const Z=(0,A.h)(k.rq.get(),m,-m[3]),ot=function K(m,p,R){const Z=(0,A.h)(k.rq.get(),m,(0,A.f)(m,p));return(0,A.d)(R,p,Z),R}(m,(0,A.d)(k.rq.get(),p,Z),k.rq.get());return(0,A.g)(R,ot,Z),R}function et(m,p,R,Z){const ot=m,Mt=k.rq.get(),_t=k.rq.get();(0,x.VV)(ot,Mt,_t);const dt=(0,A.d)(k.rq.get(),R,p),bt=(0,X.gr)(Mt,dt),Et=(0,X.gr)(_t,dt),vt=(0,X.gr)(ot,dt);return(0,A.i)(Z,bt,Et,vt)}function l(m,p){return Math.abs(f(m,p))}function f(m,p){return(0,A.f)(m,p)+m[3]}var g,m;function z(m){return m===g.INTERSECTS_INSIDE_OUT||m===g.INTERSECTS_OUTSIDE_IN}function H(m,p,R,Z,ot){const Mt=(0,A.f)(m,R),_t=f(m,p);if(0===Mt)return _t>=0?g.INSIDE:g.OUTSIDE;let dt=-_t/Mt;return Z&Q.CLAMP&&(dt=(0,L.qE)(dt,0,1)),!(Z&Q.INFINITE_MIN)&&dt<0||!(Z&Q.INFINITE_MAX)&&dt>1?_t>=0?g.INSIDE:g.OUTSIDE:((0,A.g)(ot,p,(0,A.h)(ot,R,dt)),_t>=0?g.INTERSECTS_INSIDE_OUT:g.INTERSECTS_OUTSIDE_IN)}(m=g||(g={}))[m.INTERSECTS_INSIDE_OUT=0]="INTERSECTS_INSIDE_OUT",m[m.INTERSECTS_OUTSIDE_IN=1]="INTERSECTS_OUTSIDE_IN",m[m.INSIDE=2]="INSIDE",m[m.OUTSIDE=3]="OUTSIDE";const nt=[0,0,1,0];var Q;!function(m){m[m.NONE=0]="NONE",m[m.CLAMP=1]="CLAMP",m[m.INFINITE_MIN=4]="INFINITE_MIN",m[m.INFINITE_MAX=8]="INFINITE_MAX"}(Q||(Q={}));const ft=Q.INFINITE_MIN|Q.INFINITE_MAX,ht=Q.INFINITE_MAX},99608:(gt,at,U)=>{U.d(at,{EJ:()=>x,_I:()=>it,g7:()=>k,gr:()=>X});var L=U(69287),A=U(28714),V=U(25866);function it(Y,$,ct){const q=(0,A.f)(Y,$)/(0,A.f)(Y,Y);return(0,A.h)(ct,Y,q)}function X(Y,$){return(0,A.f)(Y,$)/(0,A.l)(Y)}function k(Y,$){const ct=(0,A.f)(Y,$)/((0,A.l)(Y)*(0,A.l)($));return-(0,L.XM)(ct)}function x(Y,$,ct){(0,A.n)(J,Y),(0,A.n)(G,$);const q=(0,A.f)(J,G),st=(0,L.XM)(q),lt=(0,A.e)(J,J,G);return(0,A.f)(lt,ct)<0?2*Math.PI-st:st}const J=(0,V.vt)(),G=(0,V.vt)()},19741:(gt,at,U)=>{U.d(at,{Rc:()=>st,J8:()=>lt,oG:()=>Y,rq:()=>$,Km:()=>ct}),U(3248);var A=U(64662),V=U(32954),it=U(62789),X=U(14214),k=U(45475),x=U(25866),J=U(89141);class G{constructor(D){this._create=D,this._items=new Array,this._itemsPtr=0}get(){return 0===this._itemsPtr&&(0,A.d)(()=>this._reset()),this._itemsPtr>=this._items.length&&this._items.push(this._create()),this._items[this._itemsPtr++]}_reset(){const D=2*this._itemsPtr;this._items.length>D&&(this._items.length=D),this._itemsPtr=0}static createVec2f64(){return new G(k.vt)}static createVec3f64(){return new G(x.vt)}static createVec4f64(){return new G(J.vt)}static createMat3f64(){return new G(V.vt)}static createMat4f64(){return new G(it.vt)}static createQuatf64(){return new G(X.vt)}get test(){}}const Y=G.createVec2f64(),$=G.createVec3f64(),ct=G.createVec4f64(),st=(G.createMat3f64(),G.createMat4f64()),lt=G.createQuatf64()},23005:(gt,at,U)=>{U.d(at,{A:()=>st});var $,L=U(8189),A=U(90660),V=U(49976),it=U(71065),X=U(85211),k=U(55739),G=(U(3248),U(40707),U(15463)),Y=U(76576);const ct=(0,V.O)()({ascendingValues:"ascending-values",descendingValues:"descending-values"});let q=$=class extends(A.A.ClonableMixin(it.A)){static from(lt){return(0,k.PZ)($,lt)}constructor(lt){super(lt),this.title=null,this.order=null}};(0,L._)([(0,X.MZ)({type:String,json:{write:!0}})],q.prototype,"title",void 0),(0,L._)([(0,G.e)(ct)],q.prototype,"order",void 0),q=$=(0,L._)([(0,Y.$)("esri.renderers.support.RendererLegendOptions")],q);const st=q},5236:(gt,at,U)=>{U.d(at,{A:()=>ct});var Y,L=U(8189),A=U(68677),V=U(71065),it=U(85211),X=U(55739),J=(U(3248),U(40707),U(76576)),G=U(50305);let $=Y=class extends V.A{constructor(q){super(q),this.color=null,this.label=null,this.value=null}writeValue(q,st,lt){st[lt]=q??0}clone(){return new Y({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};(0,L._)([(0,it.MZ)({type:A.A,json:{type:[X.jz],write:{isRequired:!0}}})],$.prototype,"color",void 0),(0,L._)([(0,it.MZ)({type:String,json:{write:!0}})],$.prototype,"label",void 0),(0,L._)([(0,it.MZ)({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],$.prototype,"value",void 0),(0,L._)([(0,G.K)("value")],$.prototype,"writeValue",null),$=Y=(0,L._)([(0,J.$)("esri.renderers.visualVariables.support.ColorStop")],$);const ct=$},90192:(gt,at,U)=>{U.r(at),U.d(at,{default:()=>M});var L=U(89952),A=U(79139),V=U(19890),it=U(14214),X=U(28714),k=U(12225),x=U(32034),J=U(23234),Y=(U(3248),U(49873)),$=U(87862),ct=U(87701),q=U(70787),st=U(46835);function D(C,d,y){return C?.attributeInfo.useElevation?d?function B(C,d){const y=new Float64Array(d);for(let I=0;I<d;I++)y[I]=C[3*I+2];return y}(d,y):null:C?.attributeInfo.storageInfo?(0,q.m0)(C.attributeInfo.storageInfo,C.buffer,y):null}function tt(C){switch(C){default:case null:case"none":return d=>d;case"low-four-bit":return d=>15&d;case"high-four-bit":return d=>(240&d)>>4;case"absolute-value":return d=>Math.abs(d);case"modulo-ten":return d=>d%10}}function O(C){let d=0;for(const y of C||[])d|=1<<y;return d}var W=U(19641);class v{transform(d){const y=this._transform(d),I=[y.points.buffer,y.rgb.buffer];null!=y.pointIdFilterMap&&I.push(y.pointIdFilterMap.buffer);for(const j of y.attributes)"buffer"in j.values&&(0,A.mw)(j.values.buffer)&&j.values.buffer!==y.rgb.buffer&&I.push(j.values.buffer);return Promise.resolve({result:y,transferList:I})}_transform(d){const y=function w(C,d){if(null==C.encoding||""===C.encoding){const y=(0,q.wH)(d,C);if(null==y.vertexAttributes.position)return;const I=(0,q.MA)(d,y.vertexAttributes.position),j=y.header.fields,rt=[j.offsetX,j.offsetY,j.offsetZ],T=[j.scaleX,j.scaleY,j.scaleZ],F=I.length/3,P=new Float64Array(3*F);for(let et=0;et<F;et++)P[3*et]=I[3*et]*T[0]+rt[0],P[3*et+1]=I[3*et+1]*T[1]+rt[1],P[3*et+2]=I[3*et+2]*T[2]+rt[2];return P}if("lepcc-xyz"===C.encoding)return(0,st.Me)(d).result}(d.schema,d.geometryBuffer);let I=y.length/3,j=null;const rt=new Array,T=D(d.primaryAttributeData,y,I);null!=d.primaryAttributeData&&T&&rt.push({attributeInfo:d.primaryAttributeData.attributeInfo,values:T});const F=D(d.modulationAttributeData,y,I);null!=d.modulationAttributeData&&F&&rt.push({attributeInfo:d.modulationAttributeData.attributeInfo,values:F});let P=function lt(C,d,y,I){const{rendererJSON:j,isRGBRenderer:rt}=C;let T=null,F=null;if(d&&rt)T=d;else if(d&&"pointCloudUniqueValueRenderer"===j?.type){F=ct.A.fromJSON(j);const P=F.colorUniqueValueInfos;T=new Uint8Array(3*I);const et=tt(F.fieldTransformType);for(let K=0;K<I;K++){const l=(et?et(d[K]):d[K])+"";for(let f=0;f<P.length;f++)if(P[f].values.includes(l)){T[3*K]=P[f].color.r,T[3*K+1]=P[f].color.g,T[3*K+2]=P[f].color.b;break}}}else if(d&&"pointCloudStretchRenderer"===j?.type){F=$.A.fromJSON(j);const P=F.stops;T=new Uint8Array(3*I);const et=tt(F.fieldTransformType);for(let K=0;K<I;K++){const l=et?et(d[K]):d[K],f=P.length-1;if(l<P[0].value)T[3*K]=P[0].color.r,T[3*K+1]=P[0].color.g,T[3*K+2]=P[0].color.b;else if(l>=P[f].value)T[3*K]=P[f].color.r,T[3*K+1]=P[f].color.g,T[3*K+2]=P[f].color.b;else for(let g=1;g<P.length;g++)if(l<P[g].value){const z=(l-P[g-1].value)/(P[g].value-P[g-1].value);T[3*K]=P[g].color.r*z+P[g-1].color.r*(1-z),T[3*K+1]=P[g].color.g*z+P[g-1].color.g*(1-z),T[3*K+2]=P[g].color.b*z+P[g-1].color.b*(1-z);break}}}else if(d&&"pointCloudClassBreaksRenderer"===j?.type){F=Y.A.fromJSON(j);const P=F.colorClassBreakInfos;T=new Uint8Array(3*I);const et=tt(F.fieldTransformType);for(let K=0;K<I;K++){const l=et?et(d[K]):d[K];for(let f=0;f<P.length;f++)if(l>=P[f].minValue&&l<=P[f].maxValue){T[3*K]=P[f].color.r,T[3*K+1]=P[f].color.g,T[3*K+2]=P[f].color.b;break}}}else T=new Uint8Array(3*I).fill(255);if(y&&F?.colorModulation){const P=F.colorModulation.minValue,et=F.colorModulation.maxValue,K=.3;for(let l=0;l<I;l++){const f=y[l],g=f>=et?1:f<=P?K:K+(1-K)*(f-P)/(et-P);T[3*l]=g*T[3*l],T[3*l+1]=g*T[3*l+1],T[3*l+2]=g*T[3*l+2]}}return T}(d.rendererInfo,T,F,I);if(d.filterInfo&&d.filterInfo.length>0&&null!=d.filterAttributesData){const K=d.filterAttributesData.filter(L.Ru).map(l=>{const f=D(l,y,I),g={attributeInfo:l.attributeInfo,values:f};return rt.push(g),g});j=new Uint32Array(I),I=function ut(C,d,y,I,j){const rt=C.length/3;let T=0;for(let F=0;F<rt;F++){let P=!0;for(let et=0;et<I.length&&P;et++){const{filterJSON:K}=I[et],l=j[et].values[F];switch(K.type){case"pointCloudValueFilter":{const f="exclude"===K.mode;K.values.includes(l)===f&&(P=!1);break}case"pointCloudBitfieldFilter":{const f=O(K.requiredSetBits),g=O(K.requiredClearBits);((l&f)!==f||l&g)&&(P=!1);break}case"pointCloudReturnFilter":{const f=15&l,g=l>>>4&15,z=g>1,H=1===f,nt=f===g;let Q=!1;for(const ft of K.includedReturns)if("last"===ft&&nt||"firstOfMany"===ft&&H&&z||"lastOfMany"===ft&&nt&&z||"single"===ft&&!z){Q=!0;break}Q||(P=!1);break}}}P&&(y[T]=F,C[3*T]=C[3*F],C[3*T+1]=C[3*F+1],C[3*T+2]=C[3*F+2],d[3*T]=d[3*F],d[3*T+1]=d[3*F+1],d[3*T+2]=d[3*F+2],T++)}return T}(y,P,j,d.filterInfo,K)}for(const K of d.userAttributesData){const l=D(K,y,I);rt.push({attributeInfo:K.attributeInfo,values:l})}3*I<P.length&&(P=new Uint8Array(P.buffer.slice(0,3*I))),function S(C,d,y){if(0!==y)for(let I=0;I<d;I++)C[3*I+2]+=y}(y,I,d.elevationOffset);const et=function b(C,d,y,I,j){if(!(0,J.projectBuffer)(C,I,0,C,j,0,d))throw new Error("Can't reproject");const rt=(0,k.o8)(y.center),T=(0,k.vt)(),F=(0,k.vt)(),P=(0,k.o8)(y.halfSize);(0,V.Xr)(_,y.quaternion);const et=new Float32Array(3*d);for(let K=0;K<d;K++){let l=3*K;T[0]=C[l]-rt[0],T[1]=C[l+1]-rt[1],T[2]=C[l+2]-rt[2],(0,X.w)(F,T,_),P[0]=Math.max(P[0],Math.abs(F[0])),P[1]=Math.max(P[1],Math.abs(F[1])),P[2]=Math.max(P[2],Math.abs(F[2])),et[l++]=T[0],et[l++]=T[1],et[l]=T[2]}return y.halfSize=P,et}(y,I,W.ab.fromData(d.obbData),x.A.fromJSON(d.inSR),x.A.fromJSON(d.outSR));return{obbData:d.obbData,points:et,rgb:P,attributes:rt,pointIdFilterMap:j}}}const _=(0,it.vt)();function M(){return new v}},70787:(gt,at,U)=>{U.d(at,{MA:()=>$,m0:()=>O,wH:()=>w});var L=U(5922),A=U(77806),V=U(35150),it=U(46835),X=U(40972);const k=()=>V.A.getLogger("esri.views.3d.layers.i3s.I3SBinaryReader");function x(_,M,C){let d="",y=0;for(;y<C;){const I=_[M+y];if(I<128)d+=String.fromCharCode(I),y++;else if(I>=192&&I<224){if(y+1>=C)throw new L.A("utf8-decode-error","UTF-8 Decode failed. Two byte character was truncated.");d+=String.fromCharCode((31&I)<<6|63&_[M+y+1]),y+=2}else if(I>=224&&I<240){if(y+2>=C)throw new L.A("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");d+=String.fromCharCode((15&I)<<12|(63&_[M+y+1])<<6|63&_[M+y+2]),y+=3}else{if(!(I>=240&&I<248))throw new L.A("utf8-decode-error","UTF-8 Decode failed. Invalid multi byte sequence.");{if(y+3>=C)throw new L.A("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");const j=(7&I)<<18|(63&_[M+y+1])<<12|(63&_[M+y+2])<<6|63&_[M+y+3];d+=j>=65536?String.fromCharCode(55296+(j-65536>>10),56320+(1023&j)):String.fromCharCode(j),y+=4}}}return d}function J(_,M){const C={byteOffset:0,byteCount:0,fields:Object.create(null)};let d=0;for(let y=0;y<M.length;y++){const I=M[y],j=I.valueType||I.type;C.fields[I.property]=(0,v[j])(_,d),d+=W[j].BYTES_PER_ELEMENT}return C.byteCount=d,C}function Y(_,M,C){const d=[];let y,I,j=0;for(I=0;I<_;I+=1){if(y=M[I],y>0){if(d.push(x(C,j,y-1)),0!==C[j+y-1])throw new L.A("string-array-error","Invalid string array: missing null termination.")}else d.push(null);j+=y}return d}function $(_,M){return new W[M.valueType](_,M.byteOffset,M.count*M.valuesPerElement)}function st(_,M,C){if(M!==_&&k().error(`Invalid ${C} buffer size\n expected: ${_}, actual: ${M})`),M<_)throw new L.A("buffer-too-small","Binary buffer is too small",{expectedSize:_,actualSize:M})}function w(_,M){const C=J(_,M&&M.header);let d=C.byteCount;const y={isDraco:!1,header:C,byteOffset:C.byteCount,byteCount:0,vertexAttributes:{}},I=C.fields,j=null!=I.vertexCount?I.vertexCount:I.count;for(const F of M.ordering){if(!M.vertexAttributes[F])continue;const P={...M.vertexAttributes[F],byteOffset:d,count:j};y.vertexAttributes[tt[F]||"_"+F]=P,d+=S(P.valueType)*P.valuesPerElement*j}const rt=I.faceCount;if(M.faces&&rt){y.faces={};for(const F of M.ordering){if(!M.faces[F])continue;const P={...M.faces[F],byteOffset:d,count:rt};y.faces[F]=P,d+=S(P.valueType)*P.valuesPerElement*rt}}const T=I.featureCount;if(M.featureAttributes&&M.featureAttributeOrder&&T){y.featureAttributes={};for(const F of M.featureAttributeOrder){if(!M.featureAttributes[F])continue;const P={...M.featureAttributes[F],byteOffset:d,count:T};y.featureAttributes[F]=P,d+=("UInt64"===P.valueType?8:S(P.valueType))*P.valuesPerElement*T}}return st(d,_.byteLength,"geometry"),y.byteCount=d-y.byteOffset,y}const tt={position:X.r.POSITION,normal:X.r.NORMAL,color:X.r.COLOR,uv0:X.r.UV0,region:X.r.UVREGION};function O(_,M,C){if("lepcc-rgb"===_.encoding)return(0,it.mb)(M);if("lepcc-intensity"===_.encoding)return(0,it.Ax)(M);if(null!=_.encoding&&""!==_.encoding)throw new L.A("unknown-attribute-storage-info-encoding","Unknown Attribute Storage Info Encoding");_["attributeByteCounts "]&&!_.attributeByteCounts&&(k().warn("Warning: Trailing space in 'attributeByteCounts '."),_.attributeByteCounts=_["attributeByteCounts "]),"ObjectIds"===_.ordering[0]&&_.hasOwnProperty("objectIds")&&(k().warn("Warning: Case error in objectIds"),_.ordering[0]="objectIds");const d=function q(_,M,C){const d=null!=M.header?J(_,M.header):{byteOffset:0,byteCount:0,fields:{count:C}},y={header:d,byteOffset:d.byteCount,byteCount:0,entries:Object.create(null)};let I=d.byteCount;for(let j=0;j<M.ordering.length;j++){const rt=M.ordering[j],T=(0,A.o8)(M[rt]);if(T.count=d.fields.count??0,"String"===T.valueType){if(T.byteOffset=I,T.byteCount=d.fields[rt+"ByteCount"],"UTF-8"!==T.encoding)throw new L.A("unsupported-encoding","Unsupported String encoding.",{encoding:T.encoding});if(T.timeEncoding&&"ECMA_ISO8601"!==T.timeEncoding)throw new L.A("unsupported-time-encoding","Unsupported time encoding.",{timeEncoding:T.timeEncoding})}else{if(!b(T.valueType))throw new L.A("unsupported-value-type","Unsupported binary valueType",{valueType:T.valueType});{const F=S(T.valueType);I+=I%F!=0?F-I%F:0,T.byteOffset=I,T.byteCount=F*T.valuesPerElement*T.count}}I+=T.byteCount??0,y.entries[rt]=T}return y.byteCount=I-y.byteOffset,y}(M,_,C);st(d.byteOffset+d.byteCount,M.byteLength,"attribute");const y=d.entries.attributeValues||d.entries.objectIds;if(y){if("String"===y.valueType){const I=d.entries.attributeByteCounts,j=$(M,I),rt=function ct(_,M){return new Uint8Array(_,M.byteOffset,M.byteCount)}(M,y);return y.timeEncoding?function G(_,M,C){return Y(_,M,C).map(d=>{const y=d?Date.parse(d):null;return null==y||Number.isNaN(y)?null:y})}(I.count,j,rt):Y(I.count,j,rt)}return $(M,y)}throw new L.A("bad-attribute-storage-info","Bad attributeStorageInfo specification.")}const W={Float32:Float32Array,Float64:Float64Array,UInt8:Uint8Array,Int8:Int8Array,UInt16:Uint16Array,Int16:Int16Array,UInt32:Uint32Array,Int32:Int32Array},v={Float32:(_,M)=>new DataView(_,0).getFloat32(M,!0),Float64:(_,M)=>new DataView(_,0).getFloat64(M,!0),UInt8:(_,M)=>new DataView(_,0).getUint8(M),Int8:(_,M)=>new DataView(_,0).getInt8(M),UInt16:(_,M)=>new DataView(_,0).getUint16(M,!0),Int16:(_,M)=>new DataView(_,0).getInt16(M,!0),UInt32:(_,M)=>new DataView(_,0).getUint32(M,!0),Int32:(_,M)=>new DataView(_,0).getInt32(M,!0)};function b(_){return W.hasOwnProperty(_)}function S(_){return b(_)?W[_].BYTES_PER_ELEMENT:0}},46835:(gt,at,U)=>{U.d(at,{Ax:()=>lt,Me:()=>x,mb:()=>ct});var L=U(5922);const A=!0,V={identifierOffset:0,identifierLength:10,versionOffset:10,checksumOffset:12,byteCount:16};function it(w,D,B){return{identifier:String.fromCharCode.apply(null,new Uint8Array(w,B+V.identifierOffset,V.identifierLength)),version:D.getUint16(B+V.versionOffset,A),checksum:D.getUint32(B+V.checksumOffset,A)}}const X={sizeLo:0,sizeHi:4,minX:8,minY:16,minZ:24,maxX:32,maxY:40,maxZ:48,errorX:56,errorY:64,errorZ:72,count:80,reserved:84,byteCount:88};function x(w){const D=new DataView(w,0);let B=0;const{identifier:ut,version:tt}=it(w,D,B);if(B+=V.byteCount,"LEPCC     "!==ut)throw new L.A("lepcc-decode-error","Bad identifier");if(tt>1)throw new L.A("lepcc-decode-error","Unknown version");const O=function k(w,D){return{sizeLo:w.getUint32(D+X.sizeLo,A),sizeHi:w.getUint32(D+X.sizeHi,A),minX:w.getFloat64(D+X.minX,A),minY:w.getFloat64(D+X.minY,A),minZ:w.getFloat64(D+X.minZ,A),maxX:w.getFloat64(D+X.maxX,A),maxY:w.getFloat64(D+X.maxY,A),maxZ:w.getFloat64(D+X.maxZ,A),errorX:w.getFloat64(D+X.errorX,A),errorY:w.getFloat64(D+X.errorY,A),errorZ:w.getFloat64(D+X.errorZ,A),count:w.getUint32(D+X.count,A),reserved:w.getUint32(D+X.reserved,A)}}(D,B);if(B+=X.byteCount,O.sizeHi*2**32+O.sizeLo!==w.byteLength)throw new L.A("lepcc-decode-error","Bad size");const W=new Float64Array(3*O.count),v=[],b=[],S=[],_=[];if(B=J(w,B,v),B=J(w,B,b),B=J(w,B,S),B=J(w,B,_),B!==w.byteLength)throw new L.A("lepcc-decode-error","Bad length");let M=0,C=0;for(let d=0;d<v.length;d++){C+=v[d];let y=0;for(let I=0;I<b[d];I++){y+=S[M];const j=_[M];W[3*M]=Math.min(O.maxX,O.minX+2*O.errorX*y),W[3*M+1]=Math.min(O.maxY,O.minY+2*O.errorY*C),W[3*M+2]=Math.min(O.maxZ,O.minZ+2*O.errorZ*j),M++}}return{errorX:O.errorX,errorY:O.errorY,errorZ:O.errorZ,result:W}}function J(w,D,B){const ut=[];D=G(w,D,ut);const tt=[];for(let O=0;O<ut.length;O++){tt.length=0,D=G(w,D,tt);for(let W=0;W<tt.length;W++)B.push(tt[W]+ut[O])}return D}function G(w,D,B){const ut=new DataView(w,D),tt=ut.getUint8(0),O=31&tt,W=!!(32&tt),v=(192&tt)>>6;let b=0;if(0===v)b=ut.getUint32(1,A),D+=5;else if(1===v)b=ut.getUint16(1,A),D+=3;else{if(2!==v)throw new L.A("lepcc-decode-error","Bad count type");b=ut.getUint8(1),D+=2}if(W)throw new L.A("lepcc-decode-error","LUT not implemented");const S=Math.ceil(b*O/8),_=new Uint8Array(w,D,S);let M=0,C=0,d=0;const y=-1>>>32-O;for(let I=0;I<b;I++){for(;C<O;)M|=_[d]<<C,C+=8,d+=1;B[I]=M&y,M>>>=O,C-=O,C+O>32&&(M|=_[d-1]>>8-C)}return D+d}const Y={sizeLo:0,sizeHi:4,count:8,colorMapCount:12,lookupMethod:14,compressionMethod:15,byteCount:16};function ct(w){const D=new DataView(w,0);let B=0;const{identifier:ut,version:tt}=it(w,D,B);if(B+=V.byteCount,"ClusterRGB"!==ut)throw new L.A("lepcc-decode-error","Bad identifier");if(tt>1)throw new L.A("lepcc-decode-error","Unknown version");const O=function $(w,D){return{sizeLo:w.getUint32(D+Y.sizeLo,A),sizeHi:w.getUint32(D+Y.sizeHi,A),count:w.getUint32(D+Y.count,A),colorMapCount:w.getUint16(D+Y.colorMapCount,A),lookupMethod:w.getUint8(D+Y.lookupMethod),compressionMethod:w.getUint8(D+Y.compressionMethod)}}(D,B);if(B+=Y.byteCount,O.sizeHi*2**32+O.sizeLo!==w.byteLength)throw new L.A("lepcc-decode-error","Bad size");if((2===O.lookupMethod||1===O.lookupMethod)&&0===O.compressionMethod){if(3*O.colorMapCount+O.count+B!==w.byteLength||O.colorMapCount>256)throw new L.A("lepcc-decode-error","Bad count");const W=new Uint8Array(w,B,3*O.colorMapCount),v=new Uint8Array(w,B+3*O.colorMapCount,O.count),b=new Uint8Array(3*O.count);for(let S=0;S<O.count;S++){const _=v[S];b[3*S]=W[3*_],b[3*S+1]=W[3*_+1],b[3*S+2]=W[3*_+2]}return b}if(0===O.lookupMethod&&0===O.compressionMethod){if(3*O.count+B!==w.byteLength||0!==O.colorMapCount)throw new L.A("lepcc-decode-error","Bad count");return new Uint8Array(w,B).slice()}if(O.lookupMethod<=2&&1===O.compressionMethod){if(B+3!==w.byteLength||1!==O.colorMapCount)throw new L.A("lepcc-decode-error","Bad count");const W=D.getUint8(B),v=D.getUint8(B+1),b=D.getUint8(B+2),S=new Uint8Array(3*O.count);for(let _=0;_<O.count;_++)S[3*_]=W,S[3*_+1]=v,S[3*_+2]=b;return S}throw new L.A("lepcc-decode-error","Bad method "+O.lookupMethod+","+O.compressionMethod)}const q={sizeLo:0,sizeHi:4,count:8,scaleFactor:12,bitsPerPoint:14,reserved:15,byteCount:16};function lt(w){const D=new DataView(w,0);let B=0;const{identifier:ut,version:tt}=it(w,D,B);if(B+=V.byteCount,"Intensity "!==ut)throw new L.A("lepcc-decode-error","Bad identifier");if(tt>1)throw new L.A("lepcc-decode-error","Unknown version");const O=function st(w,D){return{sizeLo:w.getUint32(D+q.sizeLo,A),sizeHi:w.getUint32(D+q.sizeHi,A),count:w.getUint32(D+q.count,A),scaleFactor:w.getUint16(D+q.scaleFactor,A),bitsPerPoint:w.getUint8(D+q.bitsPerPoint),reserved:w.getUint8(D+q.reserved)}}(D,B);if(B+=q.byteCount,O.sizeHi*2**32+O.sizeLo!==w.byteLength)throw new L.A("lepcc-decode-error","Bad size");const W=new Uint16Array(O.count);if(8===O.bitsPerPoint){if(O.count+B!==w.byteLength)throw new L.A("lepcc-decode-error","Bad size");const v=new Uint8Array(w,B,O.count);for(let b=0;b<O.count;b++)W[b]=v[b]*O.scaleFactor}else if(16===O.bitsPerPoint){if(2*O.count+B!==w.byteLength)throw new L.A("lepcc-decode-error","Bad size");const v=new Uint16Array(w,B,O.count);for(let b=0;b<O.count;b++)W[b]=v[b]*O.scaleFactor}else{const v=[];if(G(w,B,v)!==w.byteLength)throw new L.A("lepcc-decode-error","Bad size");for(let b=0;b<O.count;b++)W[b]=v[b]*O.scaleFactor}return W}},56632:(gt,at,U)=>{U.d(at,{VV:()=>Y,hG:()=>x,wp:()=>J}),U(69287);var A=U(28714),V=U(25866);function x(v){return Math.sqrt(Math.max(v[0]*v[0]+v[4]*v[4]+v[8]*v[8],v[1]*v[1]+v[5]*v[5]+v[9]*v[9],v[2]*v[2]+v[6]*v[6]+v[10]*v[10]))}function J(v,b){const S=Math.sqrt(b[0]*b[0]+b[4]*b[4]+b[8]*b[8]),_=Math.sqrt(b[1]*b[1]+b[5]*b[5]+b[9]*b[9]),M=Math.sqrt(b[2]*b[2]+b[6]*b[6]+b[10]*b[10]);return(0,A.i)(v,S,_,M),v}function Y(v,b,S){Math.abs(v[0])>Math.abs(v[1])?(0,A.i)(b,0,1,0):(0,A.i)(b,1,0,0),(0,A.e)(S,v,b),(0,A.e)(b,S,v),(0,A.n)(S,S),(0,A.n)(b,b)}(0,V.vt)(),(0,V.vt)(),(0,V.vt)(),(0,V.vt)(),(0,V.vt)()}}]);