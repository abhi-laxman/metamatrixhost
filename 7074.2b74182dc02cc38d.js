"use strict";(self.webpackChunkAngularClient=self.webpackChunkAngularClient||[]).push([[7074],{57074:(y,c,t)=>{t.r(c),t.d(c,{default:()=>m});var o=t(10467),d=t(8189),g=t(81098),p=t(89952),f=t(31178),_=t(17715),a=t(48900),P=(t(35150),t(3248),t(5922),t(76576)),v=t(88219),C=t(57052),M=t(57141),w=t(41474);const A="sublayers",u="layerView",D=new Set(["default"]);let E=class extends((0,v.e)(w.A)){constructor(){super(...arguments),this._highlightIds=new Map}*graphicsViews(){null==this._graphicsViewsFeatureCollectionMap?null==this._graphicsViews?yield*[]:yield*this._graphicsViews:yield*this._graphicsViewsFeatureCollectionMap.keys()}hitTest(s,i){var e=this;return(0,o.A)(function*(){return Array.from(e.graphicsViews(),h=>{const r=h.hitTest(s);if(null!=e._graphicsViewsFeatureCollectionMap){const n=e._graphicsViewsFeatureCollectionMap.get(h);for(const l of r)!l.popupTemplate&&n.popupTemplate&&(l.popupTemplate=n.popupTemplate),l.sourceLayer=l.layer=e.layer}return r}).flat().map(h=>({type:"graphic",graphic:h,layer:e.layer,mapPoint:s}))})()}highlight(s,i="default"){let e;"number"==typeof s?e=[s]:s instanceof g.A?e=[s.uid]:Array.isArray(s)&&s.length>0?e="number"==typeof s[0]?s:s.map(r=>r&&r.uid):f.A.isCollection(s)&&(e=s.map(r=>r&&r.uid).toArray());const h=e?.filter(p.Ru);return h?.length?(this._addHighlight(h),(0,_.hA)(()=>this._removeHighlight(h))):(0,_.hA)()}update(s){for(const i of this.graphicsViews())i.processUpdate(s)}attach(){const s=this.view,i=()=>this.requestUpdate(),e=this.layer.featureCollections;if(null!=e&&e.length){this._graphicsViewsFeatureCollectionMap=new Map;for(const h of e){const r=new C.A(this.view.featuresTilingScheme),n=new M.A({view:s,graphics:h.source,renderer:h.renderer,requestUpdateCallback:i,container:r});this._graphicsViewsFeatureCollectionMap.set(n,h),this.container.addChild(n.container),this.addHandles([(0,a.wB)(()=>h.visible,l=>n.container.visible=l,a.Vh),(0,a.wB)(()=>n.updating,()=>this.notifyChange("updating"),a.Vh)],u)}this._updateHighlight()}else null!=this.layer.sublayers&&this.addHandles((0,a.on)(()=>this.layer.sublayers,"change",()=>this._createGraphicsViews(),{onListenerAdd:()=>this._createGraphicsViews(),onListenerRemove:()=>this._destroyGraphicsViews()}),A)}detach(){this._destroyGraphicsViews(),this.removeHandles(A)}moveEnd(){}viewChange(){for(const s of this.graphicsViews())s.viewChange()}isUpdating(){for(const s of this.graphicsViews())if(s.updating)return!0;return!1}_destroyGraphicsViews(){this.container.removeAllChildren(),this.removeHandles(u);for(const s of this.graphicsViews())s.destroy();this._graphicsViews=null,this._graphicsViewsFeatureCollectionMap=null}_createGraphicsViews(){if(this._destroyGraphicsViews(),null==this.layer.sublayers)return;const s=[],i=this.view,e=()=>this.requestUpdate();for(const h of this.layer.sublayers){const r=new C.A(this.view.featuresTilingScheme);r.fadeTransitionEnabled=!0;const n=new M.A({view:i,graphics:h.graphics,requestUpdateCallback:e,container:r});this.addHandles([h.on("graphic-update",n.graphicUpdateHandler),(0,a.wB)(()=>h.visible,l=>n.container.visible=l,a.Vh),(0,a.wB)(()=>n.updating,()=>this.notifyChange("updating"),a.Vh)],u),this.container.addChild(n.container),s.push(n)}this._graphicsViews=s,this._updateHighlight()}_addHighlight(s){for(const i of s)if(this._highlightIds.has(i)){const e=this._highlightIds.get(i);this._highlightIds.set(i,e+1)}else this._highlightIds.set(i,1);this._updateHighlight()}_removeHighlight(s){for(const i of s)if(this._highlightIds.has(i)){const e=this._highlightIds.get(i)-1;0===e?this._highlightIds.delete(i):this._highlightIds.set(i,e)}this._updateHighlight()}_updateHighlight(){const s=Array.from(this._highlightIds.keys()),i=this._getHighlightBits(D.values());for(const e of this.graphicsViews())e.setHighlight(s.map(h=>({objectId:h,highlightFlags:i})))}};E=(0,d._)([(0,P.$)("esri.views.2d.layers.MapNotesLayerView2D")],E);const m=E},57052:(y,c,t)=>{t.d(c,{A:()=>p});var o=t(69473),d=t(57641),g=t(62931);class p extends d.f{renderChildren(_){for(const a of this.children)a.setTransform(_.state);if(super.renderChildren(_),this._updateAttributeView(),this.children.some(a=>a.hasData)){switch(_.drawPhase){case o.S5.MAP:this._renderChildren(_,o.RI.All);break;case o.S5.HIGHLIGHT:this.hasHighlight&&this._renderHighlight(_)}this._boundsRenderer&&this._boundsRenderer.doRender(_)}}_renderHighlight(_){(0,g.lB)(_,!1,a=>{this._renderChildren(a,o.RI.Highlight)})}}}}]);