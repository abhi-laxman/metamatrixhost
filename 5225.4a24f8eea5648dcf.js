"use strict";(self.webpackChunkAngularClient=self.webpackChunkAngularClient||[]).push([[5225],{28250:(Ee,q,i)=>{function j(_){return null!=M(_)||null!=O(_)}function b(_){return I.test(_)}function A(_){return M(_)??O(_)}function O(_){const E=new Date(_);return function $(_,E){if(Number.isNaN(_.getTime()))return!1;let a=!0;if(x&&/\d+\W*$/.test(E)){const y=E.match(/[a-zA-Z]{2,}/);if(y){let D=!1,F=0;for(;!D&&F<=y.length;)D=!S.test(y[F]),F++;a=!D}}return a}(E,_)?Number.isNaN(E.getTime())?null:E.getTime()-6e4*E.getTimezoneOffset():null}function M(_){const E=I.exec(_);if(!E?.groups)return null;const a=E.groups,y=+a.year,D=+a.month-1,F=+a.day,w=+(a.hours??"0"),N=+(a.minutes??"0"),K=+(a.seconds??"0");if(w>23||N>59||K>59)return null;const te=a.ms??"0",c=te?+te.padEnd(3,"0").slice(0,3):0;let f;return f=a.isUTC||!a.offsetSign?Date.UTC(y,D,F,w,N,K,c):6e4*("+"===a.offsetSign?-1:1)*(60*+a.offsetHours+ +a.offsetMinutes)+Date.UTC(y,D,F,w,N,K,c),Number.isNaN(f)?null:f}i.d(q,{Br:()=>b,Cq:()=>j,_U:()=>A});const I=/^(?:(?<year>-?\d{4,})-(?<month>\d{2})-(?<day>\d{2}))(?:T(?<hours>\d{2}):(?<minutes>\d{2}):(?<seconds>\d{2})(?:\.(?<ms>\d+))?)?(?:(?<isUTC>Z)|(?:(?<offsetSign>\+|-)(?<offsetHours>\d{2}):(?<offsetMinutes>\d{2})))?$/,S=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i,x=!Number.isNaN(new Date("technology 10").getTime())},36761:(Ee,q,i)=>{i.d(q,{BM:()=>Te,bd:()=>de,sO:()=>pe,xD:()=>S});var j=i(28250),b=i(5922),A=i(58701),O=i(42086),M=i(13682),I=i(86300);const $={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};function S(e){return $[e]}function*x(e){switch(e.type){case"Feature":yield e;break;case"FeatureCollection":for(const s of e.features)s&&(yield s)}}function*_(e){if(e)switch(e.type){case"Point":yield e.coordinates;break;case"LineString":case"MultiPoint":yield*e.coordinates;break;case"MultiLineString":case"Polygon":for(const s of e.coordinates)yield*s;break;case"MultiPolygon":for(const s of e.coordinates)for(const n of s)yield*n}}function a(e){for(const s of e)if(s.length>2)return!0;return!1}function F(e){let s=0;for(let n=0;n<e.length;n++){const l=e[n],g=e[(n+1)%e.length];s+=l[0]*g[1]-g[0]*l[1]}return s<=0}function w(e){const s=e[0],n=e[e.length-1];return s[0]===n[0]&&s[1]===n[1]&&s[2]===n[2]||e.push(s),e}function N(e,s,n){switch(s.type){case"LineString":return function K(e,s,n){return B(e,s.coordinates,n),e}(e,s,n);case"MultiLineString":return function te(e,s,n){for(const l of s.coordinates)B(e,l,n);return e}(e,s,n);case"MultiPoint":return function c(e,s,n){return B(e,s.coordinates,n),e}(e,s,n);case"MultiPolygon":return function f(e,s,n){for(const l of s.coordinates){G(e,l[0],n);for(let g=1;g<l.length;g++)U(e,l[g],n)}return e}(e,s,n);case"Point":return function d(e,s,n){return ae(e,s.coordinates,n),e}(e,s,n);case"Polygon":return function ie(e,s,n){const l=s.coordinates;G(e,l[0],n);for(let g=1;g<l.length;g++)U(e,l[g],n);return e}(e,s,n)}}function G(e,s,n){const l=w(s);!function y(e){return!F(e)}(l)?B(e,l,n):le(e,l,n)}function U(e,s,n){const l=w(s);!function D(e){return F(e)}(l)?B(e,l,n):le(e,l,n)}function B(e,s,n){for(const l of s)ae(e,l,n);e.lengths.push(s.length)}function le(e,s,n){for(let l=s.length-1;l>=0;l--)ae(e,s[l],n);e.lengths.push(s.length)}function ae(e,s,n){const[l,g,k]=s;e.coords.push(l,g),n.hasZ&&e.coords.push(k||0)}function Ae(e){switch(typeof e){case"string":return(0,j.Br)(e)?"esriFieldTypeDate":"esriFieldTypeString";case"number":return"esriFieldTypeDouble";default:return"unknown"}}function pe(e,s=4326){if(!e)throw new b.A("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==e.type&&"FeatureCollection"!==e.type)throw new b.A("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:e});const{crs:n}=e;if(!n)return;const l="string"==typeof n?n:"name"===n.type?n.properties.name:"EPSG"===n.type?n.properties.code:null,g=(0,A.oT)({wkid:s})?new RegExp(".*(CRS84H?|4326)$","i"):new RegExp(`.*(${s})$`,"i");if(!l||!g.test(l))throw new b.A("geojson:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:n})}function Te(e,s={}){const n=[],l=new Set,g=new Set;let k,ne=!1,T=null,J=!1,{geometryType:Z=null}=s;for(const ue of x(e)){const{geometry:C,properties:z,id:t}=ue;if((!C||(Z||(Z=S(C.type)),S(C.type)===Z))&&(ne||(ne=a(_(C))),J||(J=null!=t,J&&(k=typeof t,z&&(T=Object.keys(z).filter(r=>z[r]===t)))),z&&T&&J&&null!=t&&(T.length>1?T=T.filter(r=>z[r]===t):1===T.length&&(T=z[T[0]]===t?T:[])),z))for(const r in z){if(l.has(r))continue;const o=Ae(z[r]);if("unknown"===o){g.add(r);continue}g.delete(r),l.add(r);const u=(0,I.rS)(r);u&&n.push({name:u,alias:r,type:o})}}const ce=(0,I.rS)(1===T?.length&&T[0]||null)??void 0;if(ce)for(const ue of n)if(ue.name===ce&&(0,I.WA)(ue)){ue.type="esriFieldTypeOID";break}return{fields:n,geometryType:Z,hasZ:ne,objectIdFieldName:ce,objectIdFieldType:k,unknownFields:Array.from(g)}}function de(e,s){return Array.from(function*E(e,s={}){const{geometryType:n,objectIdField:l}=s;for(const g of e){const{geometry:k,properties:ne,id:T}=g;if(k&&S(k.type)!==n)continue;const J=ne||{};let Z;l&&(Z=J[l],null==T||Z||(J[l]=Z=T)),yield new O.Om(k?N(new M.A,k,s):null,J,null,Z)}}(x(e),s))}},89962:(Ee,q,i)=>{i.d(q,{F0:()=>M,Vx:()=>S,e2:()=>_,f:()=>E});var j=i(3248),b=i(77806),A=i(78200),O=i(48254);function M(a){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===a||"esriGeometryMultipoint"===a?O.Cb:"esriGeometryPolyline"===a?O.yM:O.WR}}}const I=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let $=1;function S(a,y){if((0,j.A)("esri-csp-restrictions"))return()=>({[y]:null,...a});try{let D=`this${x(y)} = null;`;for(const w in a)D+=`this${x(w)} = ${JSON.stringify(a[w])};`;const F=new Function(`\n      return class AttributesClass$${$++} {\n        constructor() {\n          ${D};\n        }\n      }\n    `)();return()=>new F}catch{return()=>({[y]:null,...a})}}function x(a){return I.test(a)?`.${a}`:`["${a}"]`}function _(a={}){return[{name:"New Feature",description:"",prototype:{attributes:(0,b.o8)(a)}}]}function E(a,y){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,isBranchVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:a},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:y,supportsDelete:y,supportsEditing:y,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryBins:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:y,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:A.F,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},queryAttributeBins:A.P,editing:{supportsGeometryUpdate:y,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1,zDefault:void 0}}}},51248:(Ee,q,i)=>{i.d(q,{$1:()=>N,CR:()=>D,MB:()=>E,PC:()=>te,Yx:()=>$,bP:()=>x});var j=i(10467),b=i(28250),A=i(58701),O=i(86300);class M{constructor(){this.code=null,this.description=null}}class I{constructor(f){this.error=new M,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=f}}function $(c){return new I(c)}class S{constructor(f){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=f}}function x(c){return new S(c)}const _=new Set;function E(c,f,d,ie=!1){_.clear();for(const G in d){const U=c.get(G);if(!U)continue;const B=a(U,d[G]);if(_.add(U.name),U&&(ie||U.editable)){const le=(0,O.CJ)(U,B);if(le)return $((0,O.uo)(le,U,B));f[U.name]=B}}for(const G of c.requiredFields??[])if(!_.has(G.name))return $(`missing required field "${G.name}"`);return null}function a(c,f){let d=f;return(0,O.WA)(c)&&"string"==typeof f?d=parseFloat(f):(0,O.yM)(c)&&null!=f&&"string"!=typeof f?d=String(f):(0,O.vE)(c)&&"string"==typeof f&&(d=(0,b._U)(f)),(0,O.WX)(d)}let y;function D(c,f){if(!c||!(0,A.fn)(f))return c;if("rings"in c||"paths"in c){if(null==y)throw new TypeError("geometry engine not loaded");return y.simplify(f,c)}return c}function w(){return(w=(0,j.A)(function*(){return null==y&&(y=yield Promise.all([i.e(3930),i.e(2076),i.e(4108)]).then(i.bind(i,27815))),y})).apply(this,arguments)}function N(c,f){return K.apply(this,arguments)}function K(){return K=(0,j.A)(function*(c,f){!(0,A.fn)(c)||"esriGeometryPolygon"!==f&&"esriGeometryPolyline"!==f||(yield function F(){return w.apply(this,arguments)}())}),K.apply(this,arguments)}const te={supportsAutoIntervalBin:!0,supportsFixedIntervalBin:!0,supportsFixedBoundariesBin:!0,supportsDateBin:!0,supportsStackBy:!0,supportsSplitBy:!0,supportsNormalization:!0,supportedStatisticTypes:["COUNT","SUM","AVG","VAR","STDDEV","MIN","MAX","PERCENTILE_CONT","PERCENTILE_DISC","CentroidAggregate","EnvelopeAggregate","ConvexHullAggregate"],supportedNormalizationTypes:["field","log","naturalLog","percentOfTotal","squareRoot"]}},55225:(Ee,q,i)=>{i.d(q,{GA:()=>Te,GL:()=>ie,I:()=>l,J0:()=>e,Ki:()=>Ae,Px:()=>le,QE:()=>f,bV:()=>U,bW:()=>s,vJ:()=>c});var j=i(10467),b=i(89563),A=i(5922),O=i(35150),M=i(45272),I=i(32034),$=i(58701),S=i(55039),x=i(31732),_=i(61808),E=i(36761),a=i(89962),y=i(51248),D=i(73258),F=i(38965),w=i(20543);const N=()=>O.A.getLogger("esri.layers.ogc.ogcFeatureUtils"),K="startindex",te=new Set([K,"offset"]),c="http://www.opengis.net/def/crs/",f=`${c}OGC/1.3/CRS84`;var d,t;function ie(t,r){return G.apply(this,arguments)}function G(){return(G=(0,j.A)(function*(t,r,o={},u=5){const{links:p}=t,P=C(p,"items",d.geojson)||C(p,"http://www.opengis.net/def/rel/ogc/1.0/items",d.geojson);if(null==P)throw new A.A("ogc-feature-layer:missing-items-page","Missing items url");const{apiKey:W,customParameters:V,signal:Q}=o,R=(0,M.s2)(P.href,t.landingPage.url),se={limit:u,...V,token:W},fe=(0,M.a6)(R,se),Oe={accept:d.geojson},{data:me}=yield(0,b.A)(fe,{signal:Q,headers:Oe}),ye=function z(t,r,o){if(!o)return;const u=C(o,"next",d.geojson),p=(0,M.An)(u?.href)?.query;if(!p)return;const P=(0,M.An)(t).query,W=Object.keys(P??{});return Object.entries(p).filter(([R])=>!W.includes(R)).find(([R,se])=>te.has(R.toLowerCase())&&Number.parseInt(se,10)===r)?.[0]}(fe,u,me.links)??K;(0,E.sO)(me);const L=(0,E.BM)(me,{geometryType:r.geometryType}),ee=r.fields||L.fields||[],Me=null!=r.hasZ?r.hasZ:L.hasZ,H=L.geometryType,X=r.objectIdField||L.objectIdFieldName||"OBJECTID";let h=r.timeInfo;const _e=ee.find(({name:m})=>m===X);if(_e)_e.editable=!1,_e.nullable=!1;else{if(!L.objectIdFieldType)throw new A.A("ogc-feature-layer:missing-feature-id","Collection geojson require a feature id as a unique identifier");ee.unshift({name:X,alias:X,type:"number"===L.objectIdFieldType?"esriFieldTypeOID":"esriFieldTypeString",editable:!1,nullable:!1})}if(X!==L.objectIdFieldName){const m=ee.find(({name:v})=>v===L.objectIdFieldName);m&&(m.type="esriFieldTypeInteger")}ee===L.fields&&L.unknownFields.length>0&&N().warn({name:"ogc-feature-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:L.unknownFields}});for(const m of ee){if(null==m.name&&(m.name=m.alias),null==m.alias&&(m.alias=m.name),"esriFieldTypeOID"!==m.type&&"esriFieldTypeGlobalID"!==m.type&&(m.editable=null==m.editable||!!m.editable,m.nullable=null==m.nullable||!!m.nullable),!m.name)throw new A.A("ogc-feature-layer:invalid-field-name","field name is missing",{field:m});if(!F.m.jsonValues.includes(m.type))throw new A.A("ogc-feature-layer:invalid-field-type",`invalid type for field "${m.name}"`,{field:m})}if(h){const m=new D.A(ee);if(h.startTimeField){const v=m.get(h.startTimeField);v?(h.startTimeField=v.name,v.type="esriFieldTypeDate"):h.startTimeField=null}if(h.endTimeField){const v=m.get(h.endTimeField);v?(h.endTimeField=v.name,v.type="esriFieldTypeDate"):h.endTimeField=null}if(h.trackIdField){const v=m.get(h.trackIdField);v?h.trackIdField=v.name:(h.trackIdField=null,N().warn({name:"ogc-feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:h}}))}h.timeReference||={timeZoneIANA:w.n$},h.startTimeField||h.endTimeField||(N().warn({name:"ogc-feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:h}}),h=void 0)}return{drawingInfo:H?(0,a.F0)(H):null,extent:ue(t),geometryType:H,fields:ee,hasZ:!!Me,objectIdField:X,paginationParameter:ye,timeInfo:h}})).apply(this,arguments)}function U(t){return B.apply(this,arguments)}function B(){return(B=(0,j.A)(function*(t,r={}){const{links:o,url:u}=t,p=C(o,"data",d.json)||C(o,"http://www.opengis.net/def/rel/ogc/1.0/data",d.json);if(null==p)throw new A.A("ogc-feature-layer:missing-collections-page","Missing collections url");const{apiKey:P,customParameters:W,signal:V}=r,Q=(0,M.s2)(p.href,u),{data:R}=yield(0,b.A)(Q,{signal:V,headers:{accept:d.json},query:{...W,token:P}});for(const se of R.collections)se.landingPage=t;return R})).apply(this,arguments)}function le(t){return ae.apply(this,arguments)}function ae(){return(ae=(0,j.A)(function*(t,r={}){const{links:o,url:u}=t,p=C(o,"conformance",d.json)||C(o,"http://www.opengis.net/def/rel/ogc/1.0/conformance",d.json);if(null==p)throw new A.A("ogc-feature-layer:missing-conformance-page","Missing conformance url");const{apiKey:P,customParameters:W,signal:V}=r,Q=(0,M.s2)(p.href,u),{data:R}=yield(0,b.A)(Q,{signal:V,headers:{accept:d.json},query:{...W,token:P}});return R})).apply(this,arguments)}function Ae(t){return pe.apply(this,arguments)}function pe(){return(pe=(0,j.A)(function*(t,r={}){const{apiKey:o,customParameters:u,signal:p}=r,{data:P}=yield(0,b.A)(t,{signal:p,headers:{accept:d.json},query:{...u,token:o}});return P.url=t,P})).apply(this,arguments)}function Te(t){return de.apply(this,arguments)}function de(){return(de=(0,j.A)(function*(t,r={}){const{links:o,url:u}=t,p=C(o,"service-desc",d.openapi);if(null==p)return N().warn("ogc-feature-layer:missing-openapi-page","The OGC API-Features server does not have an OpenAPI page."),null;const{apiKey:P,customParameters:W,signal:V}=r,Q=(0,M.s2)(p.href,u),{data:R}=yield(0,b.A)(Q,{signal:V,headers:{accept:d.openapi},query:{...W,token:P}});return R})).apply(this,arguments)}function e(t){const r=/^http:\/\/www\.opengis.net\/def\/crs\/(?<authority>.*)\/(?<version>.*)\/(?<code>.*)$/i.exec(t),o=r?.groups;if(!o)return null;const{authority:u,code:p}=o;switch(u.toLowerCase()){case"ogc":switch(p.toLowerCase()){case"crs27":return I.A.GCS_NAD_1927.wkid;case"crs83":return 4269;case"crs84":case"crs84h":return I.A.WGS84.wkid;default:return null}case"esri":case"epsg":{const P=Number.parseInt(p,10);return Number.isNaN(P)?null:P}default:return null}}function s(t,r,o){return n.apply(this,arguments)}function n(){return(n=(0,j.A)(function*(t,r,o){const u=yield l(t,r,o);return(0,x.ZF)(u)})).apply(this,arguments)}function l(t,r,o){return g.apply(this,arguments)}function g(){return(g=(0,j.A)(function*(t,r,o){const{collection:{links:u,landingPage:{url:p}},layerDefinition:P,maxRecordCount:W,queryParameters:{apiKey:V,customParameters:Q},spatialReference:R,supportedCrs:se}=t,fe=C(u,"items",d.geojson)||C(u,"http://www.opengis.net/def/rel/ogc/1.0/items",d.geojson);if(null==fe)throw new A.A("ogc-feature-layer:missing-items-page","Missing items url");const{geometry:Oe,num:me,start:ye,timeExtent:L,where:ee}=r;if(r.objectIds)throw new A.A("ogc-feature-layer:query-by-objectids-not-supported","Queries with object ids are not supported");const Me=I.A.fromJSON(R),H=r.outSpatialReference??Me,X=H.isWGS84?null:ne(H,se),h=function ce(t,r){if(!function k(t){return null!=t&&"extent"===t.type}(t))return null;const{spatialReference:o}=t;if(!o||o.isWGS84)return{bbox:T(t)};const u=ne(o,r);return null!=u?{bbox:T(t),"bbox-crs":u}:o.isWebMercator?{bbox:T((0,S.Cv)(t,I.A.WGS84))}:null}(Oe,se),_e=function J(t){if(null==t)return null;const{start:r,end:o}=t;return`${null!=r?r.toISOString():".."}/${null!=o?o.toISOString():".."}`}(L),m=function Z(t){return null!=t&&t&&"1=1"!==t?t:null}(ee),v=me??(null==ye?W:10),Fe=0===ye?void 0:ye,{fields:je,geometryType:Pe,hasZ:Ie,objectIdField:ge,paginationParameter:we}=P,ve=(0,M.s2)(fe.href,p),{data:be}=yield(0,b.A)(ve,{...o,query:{...Q,...h,crs:X,datetime:_e,query:m,limit:v,[we]:Fe,token:V},headers:{accept:d.geojson}}),he=(0,E.bd)(be,{geometryType:Pe,hasZ:Ie,objectIdField:ge}),Re=he.length===v&&!!C(be.links??[],"next",d.geojson),Ce=new D.A(je);for(const Y of he){const oe={};(0,y.MB)(Ce,oe,Y.attributes,!0);for(const De of Ce.fields)De.nullable&&!(De.name in oe)&&(oe[De.name]=null);oe[ge]=Y.attributes[ge],Y.attributes=oe}if(!X&&H.isWebMercator)for(const Y of he)if(null!=Y.geometry&&null!=Pe){const oe=(0,x.zv)(Y.geometry,Pe,Ie,!1);oe.spatialReference=I.A.WGS84,Y.geometry=(0,x.Ux)((0,S.Cv)(oe,H))}for(const Y of he)Y.objectId=Y.attributes[ge];const Se=X||!X&&H.isWebMercator?H.toJSON():$.KK,re=new _.A;return re.exceededTransferLimit=Re,re.features=he,re.fields=je,re.geometryType=Pe,re.hasZ=Ie,re.objectIdFieldName=ge,re.spatialReference=Se,re})).apply(this,arguments)}function ne(t,r){const{isWebMercator:o,wkid:u}=t;if(!u)return null;const p=o?r[3857]??r[102100]??r[102113]??r[900913]:r[t.wkid];return p?`${c}${p}`:null}function T(t){if(null==t)return"";const{xmin:r,ymin:o,xmax:u,ymax:p}=t;return`${r},${o},${u},${p}`}function ue(t){const r=t.extent?.spatial;if(!r)return null;const o=r.bbox[0],u=4===o.length,[p,P]=o;return{xmin:p,ymin:P,xmax:u?o[2]:o[3],ymax:u?o[3]:o[4],zmin:u?void 0:o[2],zmax:u?void 0:o[5],spatialReference:I.A.WGS84.toJSON()}}function C(t,r,o){return t.find(({rel:u,type:p})=>u===r&&p===o)??t.find(({rel:u,type:p})=>u===r&&!p)}(t=d||(d={})).json="application/json",t.geojson="application/geo+json",t.openapi="application/vnd.oai.openapi+json;version=3.0"}}]);