"use strict";(self.webpackChunkAngularClient=self.webpackChunkAngularClient||[]).push([[3073],{32954:(de,Q,n)=>{function R(){return[1,0,0,0,1,0,0,0,1]}function k(N,I,V,M,B,Z,T,D,w){return[N,I,V,M,B,Z,T,D,w]}n.d(Q,{fA:()=>k,vt:()=>R,zK:()=>X});const X=[1,0,0,0,1,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:X,clone:function f(N){return[N[0],N[1],N[2],N[3],N[4],N[5],N[6],N[7],N[8]]},create:R,createView:function K(N,I){return new Float64Array(N,I,9)},fromValues:k},Symbol.toStringTag,{value:"Module"}))},3567:(de,Q,n)=>{n.d(Q,{E:()=>P,w:()=>z});var R=n(89952),f=n(69690),K=(n(3248),n(12438)),X=n(17694);class z{constructor(a=9,m){this._compareMinX=T,this._compareMinY=D,this._toBBox=y=>y,this._maxEntries=Math.max(4,a||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),m&&("function"==typeof m?this._toBBox=m:this._initFormat(m)),this.clear()}destroy(){this.clear(),x.prune(),u.prune(),h.prune(),g.prune()}all(a){I(this._data,a)}search(a,m){let y=this._data;const L=this._toBBox;if(ne(a,y))for(x.clear();y;){for(let A=0,S=y.children.length;A<S;A++){const U=y.children[A],G=y.leaf?L(U):U;ne(a,G)&&(y.leaf?m(U):q(a,G)?I(U,m):x.push(U))}y=x.pop()}}collides(a){let m=this._data;const y=this._toBBox;if(!ne(a,m))return!1;for(x.clear();m;){for(let L=0,A=m.children.length;L<A;L++){const S=m.children[L],U=m.leaf?y(S):S;if(ne(a,U)){if(m.leaf||q(a,U))return!0;x.push(S)}}m=x.pop()}return!1}load(a){if(!a.length)return this;if(a.length<this._minEntries){for(let y=0,L=a.length;y<L;y++)this.insert(a[y]);return this}let m=this._build(a.slice(),0,a.length-1,0);if(this._data.children.length)if(this._data.height===m.height)this._splitRoot(this._data,m);else{if(this._data.height<m.height){const y=this._data;this._data=m,m=y}this._insert(m,this._data.height-m.height-1,!0)}else this._data=m;return this}insert(a){return a&&this._insert(a,this._data.height-1),this}clear(){return this._data=new v([]),this}remove(a){if(!a)return this;let m,y=this._data,L=null,A=0,S=!1;const U=this._toBBox(a);for(h.clear(),g.clear();y||h.length>0;){if(y||(y=h.pop(),L=h.data[h.length-1],A=g.pop()??0,S=!0),y.leaf&&(m=(0,R.qh)(y.children,(0,f.zI)(a),y.children.length,y.indexHint),-1!==m))return y.children.splice(m,1),h.push(y),this._condense(h),this;S||y.leaf||!q(y,U)?L?(A++,y=L.children[A],S=!1):y=null:(h.push(y),g.push(A),A=0,L=y,y=y.children[0])}return this}toJSON(){return this._data}fromJSON(a){return this._data=a,this}_build(a,m,y,L){const A=y-m+1;let S=this._maxEntries;if(A<=S){const W=new v(a.slice(m,y+1));return M(W,this._toBBox),W}L||(L=Math.ceil(Math.log(A)/Math.log(S)),S=Math.ceil(A/S**(L-1)));const U=new E([]);U.height=L;const G=Math.ceil(A/S),F=G*Math.ceil(Math.sqrt(S));oe(a,m,y,F,this._compareMinX);for(let W=m;W<=y;W+=F){const J=Math.min(W+F-1,y);oe(a,W,J,G,this._compareMinY);for(let ee=W;ee<=J;ee+=G){const ae=Math.min(ee+G-1,J);U.children.push(this._build(a,ee,ae,L-1))}}return M(U,this._toBBox),U}_insert(a,m,y){const A=y?a:(0,this._toBBox)(a);h.clear();const S=function N(d,a,m,y){for(;y.push(a),!0!==a.leaf&&y.length-1!==m;){let L,A=1/0,S=1/0;for(let U=0,G=a.children.length;U<G;U++){const F=a.children[U],W=w(F),J=Y(d,F)-W;J<S?(S=J,A=W<A?W:A,L=F):J===S&&W<A&&(A=W,L=F)}a=L||a.children[0]}return a}(A,this._data,m,h);for(S.children.push(a),Z(S,A);m>=0&&h.data[m].children.length>this._maxEntries;)this._split(h,m),m--;!function V(d,a,m){for(let y=m;y>=0;y--)Z(a.data[y],d)}(A,h,m)}_split(a,m){const y=a.data[m],L=y.children.length,A=this._minEntries;this._chooseSplitAxis(y,A,L);const S=this._chooseSplitIndex(y,A,L);if(!S)return;const U=y.children.splice(S,y.children.length-S),G=y.leaf?new v(U):new E(U);G.height=y.height,M(y,this._toBBox),M(G,this._toBBox),m?a.data[m-1].children.push(G):this._splitRoot(y,G)}_splitRoot(a,m){this._data=new E([a,m]),this._data.height=a.height+1,M(this._data,this._toBBox)}_chooseSplitIndex(a,m,y){let L,A,S;L=A=1/0;for(let U=m;U<=y-m;U++){const G=B(a,0,U,this._toBBox),F=B(a,U,y,this._toBBox),W=$(G,F),J=w(G)+w(F);W<L?(L=W,S=U,A=J<A?J:A):W===L&&J<A&&(A=J,S=U)}return S}_chooseSplitAxis(a,m,y){const L=a.leaf?this._compareMinX:T,A=a.leaf?this._compareMinY:D;this._allDistMargin(a,m,y,L)<this._allDistMargin(a,m,y,A)&&a.children.sort(L)}_allDistMargin(a,m,y,L){a.children.sort(L);const A=this._toBBox,S=B(a,0,m,A),U=B(a,y-m,y,A);let G=C(S)+C(U);for(let F=m;F<y-m;F++){const W=a.children[F];Z(S,a.leaf?A(W):W),G+=C(S)}for(let F=y-m-1;F>=m;F--){const W=a.children[F];Z(U,a.leaf?A(W):W),G+=C(U)}return G}_condense(a){for(let m=a.length-1;m>=0;m--){const y=a.data[m];if(0===y.children.length)if(m>0){const L=a.data[m-1],A=L.children;A.splice((0,R.qh)(A,y,A.length,L.indexHint),1)}else this.clear();else M(y,this._toBBox)}}_initFormat(a){const m=["return a"," - b",";"];this._compareMinX=new Function("a","b",m.join(a[0])),this._compareMinY=new Function("a","b",m.join(a[1])),this._toBBox=new Function("a","return {minX: a"+a[0]+", minY: a"+a[1]+", maxX: a"+a[2]+", maxY: a"+a[3]+"};")}}function I(d,a){let m=d;for(u.clear();m;){if(!0===m.leaf)for(const y of m.children)a((0,f.zI)(y));else u.pushArray(m.children);m=u.pop()??null}}function M(d,a){B(d,0,d.children.length,a,d)}function B(d,a,m,y,L){L||(L=new v([])),L.minX=1/0,L.minY=1/0,L.maxX=-1/0,L.maxY=-1/0;for(let A,S=a;S<m;S++)A=d.children[S],Z(L,d.leaf?y(A):A);return L}function Z(d,a){d.minX=Math.min(d.minX,a.minX),d.minY=Math.min(d.minY,a.minY),d.maxX=Math.max(d.maxX,a.maxX),d.maxY=Math.max(d.maxY,a.maxY)}function T(d,a){return d.minX-a.minX}function D(d,a){return d.minY-a.minY}function w(d){return(d.maxX-d.minX)*(d.maxY-d.minY)}function C(d){return d.maxX-d.minX+(d.maxY-d.minY)}function Y(d,a){return(Math.max(a.maxX,d.maxX)-Math.min(a.minX,d.minX))*(Math.max(a.maxY,d.maxY)-Math.min(a.minY,d.minY))}function $(d,a){const m=Math.max(d.minX,a.minX),y=Math.max(d.minY,a.minY),L=Math.min(d.maxX,a.maxX),A=Math.min(d.maxY,a.maxY);return Math.max(0,L-m)*Math.max(0,A-y)}function q(d,a){return d.minX<=a.minX&&d.minY<=a.minY&&a.maxX<=d.maxX&&a.maxY<=d.maxY}function ne(d,a){return a.minX<=d.maxX&&a.minY<=d.maxY&&a.maxX>=d.minX&&a.maxY>=d.minY}function oe(d,a,m,y,L){const A=[a,m];for(;A.length;){const S=A.pop(),U=A.pop();if(S-U<=y)continue;const G=U+Math.ceil((S-U)/y/2)*y;(0,X.q)(d,G,U,S,L),A.push(U,G,G,S)}}const x=new K.A,u=new K.A,h=new K.A,g=new K.A({deallocator:void 0});class P{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}class _ extends P{constructor(){super(...arguments),this.height=1,this.indexHint=new R.vW}}class v extends _{constructor(a){super(),this.children=a,this.leaf=!0}}class E extends _{constructor(a){super(),this.children=a,this.leaf=!1}}},15584:(de,Q,n)=>{n.d(Q,{b3:()=>V,jZ:()=>I});var R=n(71065),f=n(51995),k=n(83065),K=n(15268),X=n(61320),z=n(20914),N=n(58701);function I(x){return M(x,!0)}function V(x){return M(x,!1)}function M(x,u){if(null==x)return null;const h=x.spatialReference,g=(0,N.Vp)(h),P=R.A.isSerializable(x)?x.toJSON():x;if(!g)return P;const _=(0,N.K8)(h)?102100:4326,v=z.j7[_].maxX,E=z.j7[_].minX;if((0,X.fT)(P))return Z(P,v,E);if((0,X.U9)(P))return P.points=P.points.map(d=>Z(d,v,E)),P;if((0,X.ZC)(P))return function B(x,u){if(!u)return x;const h=function T(x,u){const h=[],{ymin:g,ymax:P,xmin:_,xmax:v}=x,E=x.xmax-x.xmin,[d,a]=u.valid,{x:m,frameId:y}=D(x.xmin,u),{x:L,frameId:A}=D(x.xmax,u),S=m===L&&E>0;if(E>2*a){const U={xmin:_<v?m:L,ymin:g,xmax:a,ymax:P},G={xmin:d,ymin:g,xmax:_<v?L:m,ymax:P},F={xmin:0,ymin:g,xmax:a,ymax:P},W={xmin:d,ymin:g,xmax:0,ymax:P},J=[],ee=[];w(U,F)&&J.push(y),w(U,W)&&ee.push(y),w(G,F)&&J.push(A),w(G,W)&&ee.push(A);for(let ae=y+1;ae<A;ae++)J.push(ae),ee.push(ae);h.push(new $(U,[y]),new $(G,[A]),new $(F,J),new $(W,ee))}else m>L||S?h.push(new $({xmin:m,ymin:g,xmax:a,ymax:P},[y]),new $({xmin:d,ymin:g,xmax:L,ymax:P},[A])):h.push(new $({xmin:m,ymin:g,xmax:L,ymax:P},[y]));return h}(x,u).map(g=>g.extent);return h.length<2?h[0]||x:h.length>2?(x.xmin=u.valid[0],x.xmax=u.valid[1],x):{rings:h.map(g=>[[g.xmin,g.ymin],[g.xmin,g.ymax],[g.xmax,g.ymax],[g.xmax,g.ymin],[g.xmin,g.ymin]])}}(P,g);if((0,X.Bi)(P)||(0,X.Rg)(P)){const d=(0,k.Rg)(q,P),a={xmin:d[0],ymin:d[1],xmax:d[2],ymax:d[3]},m=(0,z.kd)(a.xmin,E)*(2*v),y=0===m?P:(0,z.kS)(P,m);return a.xmin+=m,a.xmax+=m,a.xmax>v?Y(y,v,u):a.xmin<E?Y(y,E,u):y}return P}function Z(x,u,h){if(Array.isArray(x)){const g=x[0];if(g>u){const P=(0,z.kd)(g,u);x[0]=g+P*(-2*u)}else if(g<h){const P=(0,z.kd)(g,h);x[0]=g+P*(-2*h)}}else{const g=x.x;if(g>u){const P=(0,z.kd)(g,u);x.x+=P*(-2*u)}else if(g<h){const P=(0,z.kd)(g,h);x.x+=P*(-2*h)}}return x}function D(x,u){const[h,g]=u.valid,P=2*g;let _,v=0;return x>g?(_=Math.ceil(Math.abs(x-g)/P),x-=_*P,v=_):x<h&&(_=Math.ceil(Math.abs(x-h)/P),x+=_*P,v=-_),{x,frameId:v}}function w(x,u){const{xmin:h,ymin:g,xmax:P,ymax:_}=u;return C(x,h,g)&&C(x,h,_)&&C(x,P,_)&&C(x,P,g)}function C(x,u,h){return u>=x.xmin&&u<=x.xmax&&h>=x.ymin&&h<=x.ymax}function Y(x,u,h=!0){const g=!(0,X.Rg)(x);if(g&&(0,K.m3)(x),h)return(new ne).cut(x,u);const P=g?x.rings:x.paths,_=g?4:2,v=P.length,E=-2*u;for(let d=0;d<v;d++){const a=P[d];if(a&&a.length>=_){const m=[];for(const y of a)m.push([y[0]+E,y[1]]);P.push(m)}}return g?x.rings=P:x.paths=P,x}class ${constructor(u,h){this.extent=u,this.frameIds=h}}const q=(0,f.vt)();class ne{constructor(){this._linesIn=[],this._linesOut=[]}cut(u,h){let g;if(this._xCut=h,u.rings)this._closed=!0,g=u.rings,this._minPts=4;else{if(!u.paths)return null;this._closed=!1,g=u.paths,this._minPts=2}for(const _ of g){if(!_||_.length<this._minPts)continue;let v=!0;for(const E of _)v?(this.moveTo(E),v=!1):this.lineTo(E);this._closed&&this.close()}this._pushLineIn(),this._pushLineOut(),g=[];for(const _ of this._linesIn)_&&_.length>=this._minPts&&g.push(_);const P=-2*this._xCut;for(const _ of this._linesOut)if(_&&_.length>=this._minPts){for(const v of _)v[0]+=P;g.push(_)}return this._closed?u.rings=g:u.paths=g,u}moveTo(u){this._pushLineIn(),this._pushLineOut(),this._prevSide=this._side(u[0]),this._moveTo(u[0],u[1],this._prevSide),this._prevPt=u,this._firstPt=u}lineTo(u){const h=this._side(u[0]);if(h*this._prevSide==-1){const g=this._intersect(this._prevPt,u);this._lineTo(this._xCut,g,0),this._prevSide=0,this._lineTo(u[0],u[1],h)}else this._lineTo(u[0],u[1],h);this._prevSide=h,this._prevPt=u}close(){const u=this._firstPt,h=this._prevPt;u[0]===h[0]&&u[1]===h[1]||this.lineTo(u),this._checkClosingPt(this._lineIn),this._checkClosingPt(this._lineOut)}_moveTo(u,h,g){this._closed?(this._lineIn.push([g<=0?u:this._xCut,h]),this._lineOut.push([g>=0?u:this._xCut,h])):(g<=0&&this._lineIn.push([u,h]),g>=0&&this._lineOut.push([u,h]))}_lineTo(u,h,g){this._closed?(oe(this._lineIn,g<=0?u:this._xCut,h),oe(this._lineOut,g>=0?u:this._xCut,h)):g<0?(0===this._prevSide&&this._pushLineOut(),this._lineIn.push([u,h])):g>0?(0===this._prevSide&&this._pushLineIn(),this._lineOut.push([u,h])):this._prevSide<0?(this._lineIn.push([u,h]),this._lineOut.push([u,h])):this._prevSide>0&&(this._lineOut.push([u,h]),this._lineIn.push([u,h]))}_checkClosingPt(u){const h=u.length;h>3&&u[0][0]===this._xCut&&u[h-2][0]===this._xCut&&u[1][0]===this._xCut&&(u[0][1]=u[h-2][1],u.pop())}_side(u){return u<this._xCut?-1:u>this._xCut?1:0}_intersect(u,h){return u[1]+(this._xCut-u[0])/(h[0]-u[0])*(h[1]-u[1])}_pushLineIn(){this._lineIn&&this._lineIn.length>=this._minPts&&this._linesIn.push(this._lineIn),this._lineIn=[]}_pushLineOut(){this._lineOut&&this._lineOut.length>=this._minPts&&this._linesOut.push(this._lineOut),this._lineOut=[]}}function oe(x,u,h){const g=x.length;g>1&&x[g-1][0]===u&&x[g-2][0]===u?x[g-1][1]=h:x.push([u,h])}},92072:(de,Q,n)=>{n.r(Q),n.d(Q,{default:()=>bt});var R=n(10467),f=n(8189),k=n(31178),K=n(5922),X=n(35150),z=n(39693),N=n(56492),I=n(85211),V=n(48669),Z=(n(3248),n(40707),n(17221)),T=n(76576),D=n(50305),w=n(26514),C=n(95478),Y=n(93410),$=n(17049),q=n(85551),ne=n(33036),oe=n(90660),x=n(71065),u=n(10249),h=n(67685),g=n(31610),P=n(32954),_=n(83953),v=n(45475),E=n(1749),d=n(55861),a=n(13970),m=n(32034);let y=class extends oe.A{projectOrWarn(e,t){if(null==e)return e;const{geometry:l,pending:c}=(0,a.projectOrLoad)(e,t);return c?null:c||l?l:(X.A.getLogger(this).warn("geometry could not be projected to the spatial reference",{georeference:this,geometry:e,sourceSpatialReference:e.spatialReference,targetSpatialReference:t}),null)}};y=(0,f._)([(0,T.$)("esri.layers.support.GeoreferenceBase")],y);const L=y,A=(0,P.vt)(),S=(0,v.vt)();let U=class extends x.A{};(0,f._)([(0,I.MZ)({type:Number,json:{write:{isRequired:!0}}})],U.prototype,"x",void 0),(0,f._)([(0,I.MZ)({type:Number,json:{write:{isRequired:!0}}})],U.prototype,"y",void 0),U=(0,f._)([(0,T.$)("esri.layers.support.ControlPointsGeoreference.ControlPointJSONType")],U);let G=class extends oe.A{constructor(){super(...arguments),this.sourcePoint=null,this.mapPoint=null}};(0,f._)([(0,I.MZ)()],G.prototype,"sourcePoint",void 0),(0,f._)([(0,I.MZ)({type:E.A})],G.prototype,"mapPoint",void 0),G=(0,f._)([(0,T.$)("esri.layers.support.ControlPointsGeoreference.ControlPoint")],G);let F=class extends(x.A.JSONSupportMixin(L)){constructor(e){super(e),this.controlPoints=null,this.height=0,this.type="control-points",this.width=0}readControlPoints(e,t){const l=m.A.fromJSON(t.spatialReference),c=(0,P.fA)(...t.coefficients,1);return e.map(p=>((0,_.hZ)(S,p.x,p.y),(0,u.W)(S,S,c),{sourcePoint:p,mapPoint:new E.A({x:S[0],y:S[1],spatialReference:l})}))}writeControlPoints(e,t,l,c){if(null!=this.transform)null!=e&&W(e[0])&&(t.controlPoints=e.map(p=>{const O=p.sourcePoint;return{x:O.x,y:O.y}}),t.spatialReference=e[0].mapPoint.spatialReference.toJSON(),t.coefficients=this.transform.slice(0,8));else{const p=new K.A("web-document-write:invalid-georeference","Invalid 'controlPoints', 'width', 'height' configuration. Make sure the parent media element is loaded i.e. the ImageElement or VideoElement set as 'MediaLayer.source'.",{layer:c?.layer,georeference:this});c?.messages?c.messages.push(p):X.A.getLogger(this).error(p.name,p.message)}}get coords(){if(null==this.controlPoints)return null;const e=this._updateTransform(A);return null!=e&&W(this.controlPoints[0])?function ut(e,t,l,c){const p=(0,v.fA)(0,l),O=(0,v.fA)(0,0),j=(0,v.fA)(t,0),b=(0,v.fA)(t,l);return(0,u.W)(p,p,e),(0,u.W)(O,O,e),(0,u.W)(j,j,e),(0,u.W)(b,b,e),new d.A({rings:[[p,O,j,b,p]],spatialReference:c})}(e,this.width,this.height,this.controlPoints[0].mapPoint.spatialReference):null}set coords(e){if(null==this.controlPoints||!W(this.controlPoints[0]))return;const t=this.controlPoints[0].mapPoint.spatialReference;if(null==(e=this.projectOrWarn(e,t)))return;const{width:l,height:c}=this,{rings:[[p,O,j,b]]}=e,H={sourcePoint:(0,h.tc)(0,c),mapPoint:new E.A({x:p[0],y:p[1],spatialReference:t})},te={sourcePoint:(0,h.tc)(0,0),mapPoint:new E.A({x:O[0],y:O[1],spatialReference:t})},ie={sourcePoint:(0,h.tc)(l,0),mapPoint:new E.A({x:j[0],y:j[1],spatialReference:t})},re={sourcePoint:(0,h.tc)(l,c),mapPoint:new E.A({x:b[0],y:b[1],spatialReference:t})};W(H)&&W(te)&&W(ie)&&W(re)&&(Ze(A,H,te,ie,re),this.controlPoints=this.controlPoints.map(({sourcePoint:ce})=>((0,_.hZ)(S,ce.x,ce.y),(0,u.W)(S,S,A),{sourcePoint:ce,mapPoint:new E.A({x:S[0],y:S[1],spatialReference:t})})))}get inverseTransform(){return null==this.transform?null:(0,g.B8)((0,P.vt)(),this.transform)}get transform(){return this._updateTransform()}toMap(e){if(null==e||null==this.transform||null==this.controlPoints||!W(this.controlPoints[0]))return null;(0,_.hZ)(S,e.x,e.y);const t=this.controlPoints[0].mapPoint.spatialReference;return(0,u.W)(S,S,this.transform),new E.A({x:S[0],y:S[1],spatialReference:t})}toSource(e){if(null==e||null==this.inverseTransform||null==this.controlPoints||!W(this.controlPoints[0]))return null;const t=this.controlPoints[0].mapPoint.spatialReference;return e=e.normalize(),null==(e=(0,a.projectOrLoad)(e,t).geometry)?null:((0,_.hZ)(S,e.x,e.y),(0,u.W)(S,S,this.inverseTransform),(0,h.tc)(S[0],S[1]))}toSourceNormalized(e){const t=this.toSource(e);return null!=t&&(t.x/=this.width,t.y/=this.height),t}_updateTransform(e){const{controlPoints:t,width:l,height:c}=this;if(!(null!=t&&l>0&&c>0))return null;const[p,O,j,b]=t;if(!W(p))return null;const H=p.mapPoint.spatialReference,te=this._projectControlPoint(O,H),ie=this._projectControlPoint(j,H),re=this._projectControlPoint(b,H);if(!(te.valid&&ie.valid&&re.valid&&W(te.controlPoint)))return null;null==e&&(e=(0,P.vt)());let ce=null;return ce=W(ie.controlPoint)&&W(re.controlPoint)?Ze(e,p,te.controlPoint,ie.controlPoint,re.controlPoint):W(ie.controlPoint)?function at(e,t,l,c){return ye(J,pe,t),ye(ee,me,l),ye(ae,ve,c),(0,_.Cc)(fe,J,ee,.5),(0,_.e$)(fe,ae,fe,Math.PI),(0,_.Cc)(ge,pe,me,.5),(0,_.e$)(ge,ve,ge,Math.PI),De(e,J,ee,ae,fe,pe,me,ve,ge)}(e,p,te.controlPoint,ie.controlPoint):function ot(e,t,l){return ye(J,pe,t),ye(ee,me,l),(0,_.e$)(ae,ee,J,Re),(0,_.e$)(fe,J,ee,Re),(0,_.e$)(ve,me,pe,-Re),(0,_.e$)(ge,pe,me,-Re),De(e,J,ee,ae,fe,pe,me,ve,ge)}(e,p,te.controlPoint),ce.every(Ae=>0===Ae)?null:ce}_projectControlPoint(e,t){if(!W(e))return{valid:!0,controlPoint:e};const{sourcePoint:l,mapPoint:c}=e,{geometry:p,pending:O}=(0,a.projectOrLoad)(c,t);return O?{valid:!1,controlPoint:null}:O||p?{valid:!0,controlPoint:{sourcePoint:l,mapPoint:p}}:(X.A.getLogger(this).warn("map point could not be projected to the spatial reference",{georeference:this,controlPoint:e,sourceSpatialReference:c.spatialReference,targetSpatialReference:t}),{valid:!1,controlPoint:null})}};function W(e){return null!=e?.sourcePoint&&null!=e.mapPoint}(0,f._)([(0,I.MZ)({type:[G],json:{write:{allowNull:!1,isRequired:!0,target:{controlPoints:{type:[U],isRequired:!0},coefficients:{type:[Number],isRequired:!0},spatialReference:{type:m.A,isRequired:!0}}}}})],F.prototype,"controlPoints",void 0),(0,f._)([(0,Z.w)("controlPoints")],F.prototype,"readControlPoints",null),(0,f._)([(0,D.K)("controlPoints")],F.prototype,"writeControlPoints",null),(0,f._)([(0,I.MZ)({clonable:!1})],F.prototype,"coords",null),(0,f._)([(0,I.MZ)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}})],F.prototype,"height",void 0),(0,f._)([(0,I.MZ)({readOnly:!0})],F.prototype,"inverseTransform",null),(0,f._)([(0,I.MZ)({readOnly:!0})],F.prototype,"transform",null),(0,f._)([(0,I.MZ)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}})],F.prototype,"width",void 0),F=(0,f._)([(0,T.$)("esri.layers.support.ControlPointsGeoreference")],F);const J=(0,v.vt)(),ee=(0,v.vt)(),ae=(0,v.vt)(),fe=(0,v.vt)(),pe=(0,v.vt)(),me=(0,v.vt)(),ve=(0,v.vt)(),ge=(0,v.vt)(),Re=Math.PI/2;function ye(e,t,l){(0,_.hZ)(e,l.sourcePoint.x,l.sourcePoint.y),(0,_.hZ)(t,l.mapPoint.x,l.mapPoint.y)}function Ze(e,t,l,c,p){return ye(J,pe,t),ye(ee,me,l),ye(ae,ve,c),ye(fe,ge,p),De(e,J,ee,ae,fe,pe,me,ve,ge)}const lt=new Array(8).fill(0),ct=new Array(8).fill(0);function Ye(e,t,l,c,p){return e[0]=t[0],e[1]=t[1],e[2]=l[0],e[3]=l[1],e[4]=c[0],e[5]=c[1],e[6]=p[0],e[7]=p[1],e}function De(e,t,l,c,p,O,j,b,H){return(0,u.O)(e,Ye(lt,t,l,c,p),Ye(ct,O,j,b,H))}const Le=F;var Ve=n(89563),dt=n(48116),le=n(45272),ht=n(43085),pt=n(3046),Ne=n(55098),Ue=n(28067),mt=n(58701);const Se=(0,v.vt)();let _e=class extends L{constructor(e){super(e),this.bottomLeft=null,this.bottomRight=null,this.topLeft=null,this.topRight=null,this.type="corners"}get coords(){let{topLeft:e,topRight:t,bottomLeft:l,bottomRight:c}=this;if(null==e||null==t||null==l||null==c)return null;const p=e.spatialReference;return t=this.projectOrWarn(t,p),l=this.projectOrWarn(l,p),c=this.projectOrWarn(c,p),null==t||null==l||null==c?null:new d.A({rings:[[[l.x,l.y],[e.x,e.y],[t.x,t.y],[c.x,c.y],[l.x,l.y]]],spatialReference:p})}set coords(e){const{topLeft:t}=this;if(null==t)return;const l=t.spatialReference;if(null==(e=this.projectOrWarn(e,l)))return;const{rings:[[c,p,O,j]]}=e;this.bottomLeft=new E.A({x:c[0],y:c[1],spatialReference:l}),this.topLeft=new E.A({x:p[0],y:p[1],spatialReference:l}),this.topRight=new E.A({x:O[0],y:O[1],spatialReference:l}),this.bottomRight=new E.A({x:j[0],y:j[1],spatialReference:l})}toSourceNormalized(e){const{topLeft:t,topRight:l,bottomRight:c,bottomLeft:p}=this;if(null==e||null==t||null==l||null==c||null==p)return null;const O=t.spatialReference;e=e.normalize();const j=(0,a.projectOrLoad)(e,O).geometry;if(null==j)return null;(0,_.hZ)(Se,j.x,j.y);const b=(0,u.O)((0,P.vt)(),[t.x,t.y,p.x,p.y,l.x,l.y,c.x,c.y],[0,0,0,1,1,0,1,1]);return(0,u.W)(Se,Se,b),(0,h.tc)(Se[0],Se[1])}};(0,f._)([(0,I.MZ)({clonable:!1})],_e.prototype,"coords",null),(0,f._)([(0,I.MZ)({type:E.A})],_e.prototype,"bottomLeft",void 0),(0,f._)([(0,I.MZ)({type:E.A})],_e.prototype,"bottomRight",void 0),(0,f._)([(0,I.MZ)({type:E.A})],_e.prototype,"topLeft",void 0),(0,f._)([(0,I.MZ)({type:E.A})],_e.prototype,"topRight",void 0),_e=(0,f._)([(0,T.$)("esri.layers.support.CornersGeoreference")],_e);const yt=_e;var Te=n(69287),ft=n(85952);let Me=class extends L{constructor(e){super(e),this.extent=null,this.rotation=0,this.type="extent-and-rotation"}get coords(){if(null==this.extent)return null;const{xmin:e,ymin:t,xmax:l,ymax:c,spatialReference:p}=this.extent;let O;if(this.rotation){const{x:j,y:b}=this.extent.center,H=je(j,b,this.rotation);O=[H(e,t),H(e,c),H(l,c),H(l,t)],O.push(O[0])}else O=[[e,t],[e,c],[l,c],[l,t],[e,t]];return new d.A({rings:[O],spatialReference:p})}set coords(e){if(null==e||null==this.extent)return;const t=this.extent.spatialReference;if(e=this.projectOrWarn(e,t),null==e?.extent)return;const{rings:[[l,c,p]],extent:{center:{x:O,y:j}}}=e,b=(0,Te.KJ)(Math.PI/2-Math.atan2(c[1]-l[1],c[0]-l[0])),H=je(O,j,-b),[te,ie]=H(l[0],l[1]),[re,ce]=H(p[0],p[1]);this.extent=new Ue.A({xmin:te,ymin:ie,xmax:re,ymax:ce,spatialReference:t}),this.rotation=b}toSourceNormalized(e){const{extent:t,rotation:l}=this;if(null==e||null==t)return null;const{xmin:c,ymin:p,xmax:O,ymax:j,center:b,spatialReference:H}=t;e=e.normalize();const te=(0,a.projectOrLoad)(e,H).geometry;if(null==te)return null;let ie=te.x,re=te.y;return l&&([ie,re]=je(b.x,b.y,-l)(ie,re)),(0,h.tc)((0,Te.hs)(ie,c,O,0,1),(0,Te.hs)(re,j,p,0,1))}};function je(e,t,l){const c=(0,ft.DF)(l),p=Math.cos(c),O=Math.sin(c);return(j,b)=>[p*(j-e)+O*(b-t)+e,p*(b-t)-O*(j-e)+t]}function $e(e,t){const l=(0,w.aB)(t);return function vt(e){return"media"===e?.type}(e)&&!!e.portalItem&&null!=l&&l>w.Gr.PORTAL_ITEM}function Xe(e,t,l){return{enabled:!$e(l?.layer,l?.origin),ignoreOrigin:!0}}(0,f._)([(0,I.MZ)({clonable:!1})],Me.prototype,"coords",null),(0,f._)([(0,I.MZ)({type:Ue.A})],Me.prototype,"extent",void 0),(0,f._)([(0,I.MZ)({type:Number})],Me.prototype,"rotation",void 0),Me=(0,f._)([(0,T.$)("esri.layers.support.ExtentAndRotationGeoreference")],Me);const He={json:{name:"url",type:String,write:{overridePolicy:Xe}}},Fe={readOnly:!0,json:{read:!1,write:{target:"mediaType",overridePolicy:Xe}}},Mt={types:{key:"type",base:L,typeMap:{"control-points":Le,corners:yt,"extent-and-rotation":Me}},json:{types:{key:"type",base:L,typeMap:{"control-points":Le}},write:{overridePolicy:()=>({enabled:!0,ignoreOrigin:!0})}}};let xe=class extends(pt.A.NumericIdentifiableMixin((0,z.P)(Ne.A))){constructor(e){super(e),this.georeference=null,this.opacity=1}readGeoreference(e){return Le.fromJSON(e)}writeGeoreference(e,t,l,c){const p=c?.resources?.pendingOperations,O=()=>{const j=function xt(e,t,l){if(!e||"control-points"===e.type)return e;const{coords:c}=e;if(5!==c?.rings[0]?.length)return null;const[p,O,j,b]=c.rings[0],{spatialReference:H}=c;return new Le({controlPoints:[{mapPoint:new E.A({x:p[0],y:p[1],spatialReference:H}),sourcePoint:(0,h.tc)(0,l)},{mapPoint:new E.A({x:O[0],y:O[1],spatialReference:H}),sourcePoint:(0,h.tc)(0,0)},{mapPoint:new E.A({x:j[0],y:j[1],spatialReference:H}),sourcePoint:(0,h.tc)(t,0)},{mapPoint:new E.A({x:b[0],y:b[1],spatialReference:H}),sourcePoint:(0,h.tc)(t,l)}],width:t,height:l})}(this.georeference,this.contentWidth,this.contentHeight);if(j){if("control-points"!==e.type&&X.A.getLogger(this).warn(`only georeference of type 'control-points' may be persisted. The georeference of type '${e.type}' has been automatically converted.`),4!==j.controlPoints?.length&&c?.messages)return void c.messages.push(new K.A("property:unsupported","only 'control-points' georeference with 4 control points may be persisted."));t[l]=j.write({},c)}};if("control-points"!==e.type&&!this.loaded&&p)return t[l]={},void p.push(this.load().then(O));O()}get contentWidth(){return 0}get contentHeight(){return 0}toSource(e){const{georeference:t,contentWidth:l,contentHeight:c}=this;if(null==e||null==t||0===l||0===c)return null;const p=t.toSourceNormalized(e);return null==p?null:(p.x*=l,p.y*=c,p)}};(0,f._)([(0,I.MZ)(Mt)],xe.prototype,"georeference",void 0),(0,f._)([(0,Z.w)("georeference")],xe.prototype,"readGeoreference",null),(0,f._)([(0,D.K)("georeference")],xe.prototype,"writeGeoreference",null),(0,f._)([(0,I.MZ)({json:{read:!1,write:!1}})],xe.prototype,"opacity",void 0),xe=(0,f._)([(0,T.$)("esri.layers.support.MediaElementBase")],xe);const We=xe;var ze,Pt=n(20368),Pe=n(11152),Ee=n(88135);let he=class extends We{constructor(e){super(e),this.animationOptions=null,this.content=null,this.image=null,this.type="image",this[ze]=!0,this.image=null}load(){const e=this.image;if("string"==typeof e){const t=(0,dt.M5)(e).then(l=>{this._set("content",l)});this.addResolvingPromise(t)}else if(e instanceof HTMLImageElement){const t=e.decode().then(()=>{this._set("content",e)});this.addResolvingPromise(t)}else e?this._set("content",e):this.addResolvingPromise(Promise.reject(new K.A("image-element:invalid-image-type","Invalid image type",{image:e})));return Promise.resolve(this)}get contentWidth(){return null==this.content?0:this.content instanceof HTMLImageElement?this.content.naturalWidth:this.content.width}get contentHeight(){return null==this.content?0:this.content instanceof HTMLImageElement?this.content.naturalHeight:this.content.height}readImage(e,t,l){return(0,Ee.f)(t.url,l)}writeImage(e,t,l,c){if(null==e)return;const p=c?.portalItem,O=c?.resources;if(!p||!O)return void("string"==typeof e&&(t[l]=(0,Ee.t)(e,c)));const j=function Et(e){return"string"==typeof e&&!(0,le.DB)(e)&&!(0,le.w8)(e)}(e)?e:null;if(j){if(null==(0,Ee.i)(j))return void(t[l]=j);const b=(0,Ee.t)(j,{...c,verifyItemRelativeUrls:c?.verifyItemRelativeUrls?{writtenUrls:c.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},Ee.M.NO);if(p&&b&&!(0,le.oP)(b))return O.toKeep.push({resource:p.resourceFromPath(b),compress:!1}),void(t[l]=b)}t[l]="<pending>",O.pendingOperations.push(function It(e){return Ge.apply(this,arguments)}(e).then(b=>{const H=function Lt(e,t){const l=(0,ht.lk)(),c=`${(0,le.fj)("media",l)}.${(0,Pt.n)({type:"blob",blob:e})}`;return t.resourceFromPath(c)}(b,p);t[l]=H.itemRelativeUrl,O.toAdd.push({resource:H,content:{type:"blob",blob:b},compress:!1,finish:te=>{this.image=te.url}})}))}};ze=Pe.Of,(0,f._)([(0,I.MZ)()],he.prototype,"animationOptions",void 0),(0,f._)([(0,I.MZ)({readOnly:!0})],he.prototype,"content",void 0),(0,f._)([(0,I.MZ)({readOnly:!0})],he.prototype,"contentWidth",null),(0,f._)([(0,I.MZ)({readOnly:!0})],he.prototype,"contentHeight",null),(0,f._)([(0,I.MZ)(He)],he.prototype,"image",void 0),(0,f._)([(0,Z.w)("image",["url"])],he.prototype,"readImage",null),(0,f._)([(0,D.K)("image")],he.prototype,"writeImage",null),(0,f._)([(0,I.MZ)(Fe)],he.prototype,"type",void 0),he=(0,f._)([(0,T.$)("esri.layers.support.ImageElement")],he);const Je=he;function Ge(){return(Ge=(0,R.A)(function*(e){return"string"==typeof e?(0,le.DB)(e)?(0,le.N9)(e):(yield(0,Ve.A)(e,{responseType:"blob"})).data:new Promise(t=>function At(e){if(e instanceof HTMLCanvasElement)return e;const t=e instanceof HTMLImageElement?e.naturalWidth:e.width,l=e instanceof HTMLImageElement?e.naturalHeight:e.height,c=document.createElement("canvas"),p=c.getContext("2d");return c.width=t,c.height=l,e instanceof HTMLImageElement?p.drawImage(e,0,0,e.width,e.height):e instanceof ImageData&&p.putImageData(e,0,0),c}(e).toBlob(t))})).apply(this,arguments)}var Qe,St=n(5605),Ot=n(42425),Rt=n(64261),Ke=n(48900),Tt=n(51995),Bt=n(62928),wt=n(59894),Ct=n(28),Dt=n(40611);let ue=class extends We{constructor(e){super(e),this.autoplay=!0,this.content=null,this.controller=null,this.type="video",this[Qe]=!0}load(){var e=this;const t=this.video;return"string"==typeof t?this.addResolvingPromise(Promise.all([this._preProcessVideoUrl(t),n.e(2648).then(n.bind(n,62648))]).then(function(){var l=(0,R.A)(function*([c,{default:p}]){e.controller=new p,e.controller.playerUrl=c,yield(0,Ke.C_)(()=>e.controller?.element),e.controller.loop=!0,e.controller.muted=!0,e.controller.playsInline=!0,e.controller.crossOrigin="anonymous",yield(0,Ke.C_)(()=>"can-play"===e.controller?.state),yield e.controller.play(),e.autoplay||e.controller.pause(),e._set("content",e.controller.element)});return function(c){return l.apply(this,arguments)}}())):t instanceof HTMLVideoElement?this.addResolvingPromise(this._loadVideo(t).then(()=>{this._set("content",t)})):this.addResolvingPromise(Promise.reject(new K.A("video-element:invalid-video-type","Invalid video type",{video:t}))),Promise.resolve(this)}get contentWidth(){return this.content?.videoWidth??0}get contentHeight(){return this.content?.videoHeight??0}get currentTime(){return this.controller?.currentTime}set currentTime(e){if(!this.controller)return;const t=(0,Te.qE)(e,0,this.controller.duration);this.controller?.setCurrentTime(t)}get duration(){return this.controller?.duration}set video(e){"not-loaded"===this.loadStatus?this._set("video",e):X.A.getLogger(this).error("#video","video cannot be changed after the element is loaded.")}writeVideo(e,t,l,c){if(!e)return void(c?.messages&&c.messages.push(new K.A("video-element:unsupported-video","video source is missing")));const p=function Ut(e){return"string"==typeof e&&!(0,le.DB)(e)&&!(0,le.w8)(e)}(e)?e:null;if(!p)return void(c?.messages&&c.messages.push(new K.A("video-element:unsupported-video","video source must be an absolute url")));!(0,le.oP)(p)&&c?.blockedRelativeUrls&&c.blockedRelativeUrls.push(p);const O=(0,le.s2)(p);(0,Ee.i)(O)?c?.messages&&c.messages.push(new K.A("video-element:unsupported-video","video source cannot be an item resource")):t[l]=O}_preProcessVideoUrl(e){return(0,R.A)(function*(){if((0,le.zs)(e))return(0,le.yM)(e);try{return yield(0,Ve.A)(e,{method:"head"}),e}catch{return(0,le.yM)(e,!0)}})()}_loadVideo(e){return new Promise((t,l)=>{const c=(0,Dt.Oo)(e,"canplay",()=>{this.removeHandles("canplay"),this.autoplay?e.play().then(t,l):t()});this.addHandles(c,"canplay"),"anonymous"!==e.crossOrigin&&(e.crossOrigin="anonymous",(0,le.w8)(e.src)||(e.src=e.src))})}};Qe=Pe.UR,(0,f._)([(0,I.MZ)()],ue.prototype,"autoplay",void 0),(0,f._)([(0,I.MZ)({readOnly:!0})],ue.prototype,"content",void 0),(0,f._)([(0,I.MZ)({readOnly:!0})],ue.prototype,"contentWidth",null),(0,f._)([(0,I.MZ)({readOnly:!0})],ue.prototype,"contentHeight",null),(0,f._)([(0,I.MZ)()],ue.prototype,"controller",void 0),(0,f._)([(0,I.MZ)({type:Number})],ue.prototype,"currentTime",null),(0,f._)([(0,I.MZ)({type:Number})],ue.prototype,"duration",null),(0,f._)([(0,I.MZ)(He)],ue.prototype,"video",null),(0,f._)([(0,D.K)("video")],ue.prototype,"writeVideo",null),(0,f._)([(0,I.MZ)(Fe)],ue.prototype,"type",void 0),ue=(0,f._)([(0,T.$)("esri.layers.support.VideoElement")],ue);const ke=ue,qe=k.A.ofType({key:"type",defaultKeyValue:"image",base:We,typeMap:{image:Je,video:ke}});let Ie=class extends(Ne.A.LoadableMixin(Rt.A.EsriPromiseMixin(Ot.A.EventedAccessor))){constructor(e){super(e),this._index=new wt.F,this._elementViewsMap=new Map,this._elementsIndexes=new Map,this._elementsChangedHandler=t=>{for(const c of t.removed){const p=this._elementViewsMap.get(c);this._elementViewsMap.delete(c),this._index.delete(p),this.removeHandles(p),p.destroy(),this.notifyChange("fullExtent")}const{spatialReference:l}=this;for(const c of t.added){if(this._elementViewsMap.get(c))continue;const p=new Ct._({spatialReference:l,element:c});this._elementViewsMap.set(c,p);const O=(0,Ke.wB)(()=>p.coords,()=>this._updateIndexForElement(p,!1));this._updateIndexForElement(p,!0),this.addHandles(O,p)}this._elementsIndexes.clear(),this.elements.forEach((c,p)=>this._elementsIndexes.set(c,p)),this.emit("refresh")},this.elements=new qe}load(e){var t=this;return(0,R.A)(function*(){if((0,N.Te)(e),!t.spatialReference){const l=t.elements.find(c=>null!=c.georeference?.coords);t._set("spatialReference",l?l.georeference.coords.spatialReference:m.A.WGS84)}return t._elementsChangedHandler({added:t.elements.items,removed:[]}),t.addHandles(t.elements.on("change",t._elementsChangedHandler)),t})()}destroy(){this._index.clear(),this._elementViewsMap.clear(),this._elementsIndexes.clear()}set elements(e){this._set("elements",(0,St.V)(e,this._get("elements"),qe))}get fullExtent(){if("not-loaded"===this.loadStatus)return null;const e=this._index.fullBounds;return null==e?null:new Ue.A({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:this.spatialReference})}set spatialReference(e){"not-loaded"===this.loadStatus?this._set("spatialReference",e):X.A.getLogger(this).error("#spatialReference","spatialReference cannot be changed after the source is loaded.")}queryElements(e,t){var l=this;return(0,R.A)(function*(){yield l.load(),yield(0,a.initializeProjection)(e.spatialReference,l.spatialReference,null,t);const c=(0,mt.aI)(e.spatialReference,l.spatialReference)?e:(0,a.project)(e,l.spatialReference);if(!c)return[];const p=c.normalize(),O=[];for(const j of p)l._index.forEachInBounds((0,Tt.VY)(j),({normalizedCoords:b,element:H})=>{null!=b&&(0,Bt.fA)(j,b)&&O.push(H)});return O.sort((j,b)=>l._elementsIndexes.get(j)-l._elementsIndexes.get(b)),O})()}hasElement(e){return this.elements.includes(e)}_updateIndexForElement(e,t){const l=e.normalizedBounds,c=this._index.has(e),p=null!=l;this._index.delete(e),p&&this._index.set(e,l),this.notifyChange("fullExtent"),t||(c!==p?this.emit("refresh"):this.emit("change",{element:e.element}))}};(0,f._)([(0,I.MZ)()],Ie.prototype,"elements",null),(0,f._)([(0,I.MZ)({readOnly:!0})],Ie.prototype,"fullExtent",null),(0,f._)([(0,I.MZ)()],Ie.prototype,"spatialReference",null),Ie=(0,f._)([(0,T.$)("esri.layers.support.LocalMediaElementSource")],Ie);const Oe=Ie;var we=n(71655);let se=class extends((0,Y.dM)((0,ne.j)((0,$.q)((0,q.A)((0,z.P)(C.A)))))){constructor(e){var t;super(e),t=this,this.effectiveSource=null,this.georeference=null,this.copyright=null,this.operationalLayerType="MediaLayer",this.spatialReference=null,this.type="media",this._debouncedSaveOperations=(0,N.sg)(function(){var l=(0,R.A)(function*(c,p,O){const{save:j,saveAs:b}=yield n.e(4905).then(n.bind(n,44905));switch(c){case we.X.SAVE:return j(t,p);case we.X.SAVE_AS:return b(t,O,p)}});return function(c,p,O){return l.apply(this,arguments)}}()),this.source=new Oe}load(e){return this.addResolvingPromise(this._doLoad(e)),Promise.resolve(this)}_doLoad(e){var t=this;return(0,R.A)(function*(){yield t.loadFromPortal({supportedTypes:["Media Layer"]},e);let l=t.source;if(!l)throw new K.A("media-layer:source-missing","Set 'MediaLayer.source' before loading the layer.");const c=t._getSourceOverride(l,t.georeference);c&&(t.setAtOrigin("source",c,"web-map"),t.setAtOrigin("source",c,"web-scene"),l=c);const p=(0,Pe.bv)(l)?new Oe({elements:new k.A([l])}):l;t._set("effectiveSource",p),t.spatialReference&&(p.spatialReference=t.spatialReference),yield p.load(e),t.spatialReference=p.spatialReference})()}destroy(){this.effectiveSource?.destroy(),this.effectiveSource!==this.source&&this.source?.destroy()}readGeoreference(e,t){return e&&"itemId"in t&&t.itemId?e:void 0}get fullExtent(){return this.loaded?this.effectiveSource.fullExtent:null}get source(){return this._get("source")}set source(e){"loaded"!==this.loadStatus&&"failed"!==this.loadStatus?this._set("source",e):X.A.getLogger(this).error("#source","source cannot be changed after the layer is loaded.")}castSource(e){return e?Array.isArray(e)?new Oe({elements:new k.A(e)}):e instanceof k.A?new Oe({elements:e}):e:null}readSource(e,t,l){if("itemId"in t&&t.itemId)return;const c=this._createSource(t);return c?.read(t,l),c}writeSource(e,t,l,c){if(e&&e instanceof Oe){const p=e.elements.length;if(1!==p)return void(c?.messages&&c.messages.push(new K.A("media-layer:unsupported-source",`local media element source can only be persisted if it contains exactly one ImageElement, but it has ${p}.`)));e=e.elements.at(0)}(0,Pe.bv)(e)?e.write(t,c):c?.messages&&c.messages.push(new K.A("media-layer:unsupported-source",e?"only media elements of type 'ImageElement' or 'VideoElement' can be persisted":"the media layer is missing a source"))}save(e){var t=this;return(0,R.A)(function*(){return t._debouncedSaveOperations(we.X.SAVE,e)})()}saveAs(e,t){var l=this;return(0,R.A)(function*(){return l._debouncedSaveOperations(we.X.SAVE_AS,t,e)})()}_createSource(e){if("mediaType"in e)switch(e.mediaType){case"image":return new Je;case"video":return new ke}return null}_getSourceOverride(e,t){if((0,Pe.bv)(e)&&this.originIdOf("source")===w.Gr.PORTAL_ITEM&&t&&(this.originIdOf("georeference")===w.Gr.WEB_MAP||this.originIdOf("georeference")===w.Gr.WEB_SCENE)){const l=e.toJSON(),c=this._createSource(l);return c.read({...l},{origin:"portal-item"}),c.read({georeference:t},{origin:"web-map"}),c.read({georeference:t},{origin:"web-scene"}),c}return null}};(0,f._)([(0,I.MZ)({readOnly:!0})],se.prototype,"effectiveSource",void 0),(0,f._)([(0,I.MZ)({readOnly:!0,json:{read:!1,write:!1,origins:{"web-document":{read:!0}}}})],se.prototype,"georeference",void 0),(0,f._)([(0,Z.w)("web-document","georeference")],se.prototype,"readGeoreference",null),(0,f._)([(0,I.MZ)({type:String})],se.prototype,"copyright",void 0),(0,f._)([(0,I.MZ)({readOnly:!0})],se.prototype,"fullExtent",null),(0,f._)([(0,I.MZ)({type:["MediaLayer"]})],se.prototype,"operationalLayerType",void 0),(0,f._)([(0,I.MZ)({type:["show","hide"]})],se.prototype,"listMode",void 0),(0,f._)([(0,I.MZ)({nonNullable:!0,json:{write:{enabled:!0,allowNull:!1,target:{url:{type:String},mediaType:{type:["image","video"]},georeference:{type:Le}},overridePolicy(e,t,l){return{enabled:!0,allowNull:!1,ignoreOrigin:$e(this,l?.origin)&&(0,Pe.bv)(e)&&!!e.georeference&&e.originIdOf("georeference")>w.Gr.PORTAL_ITEM}}}}})],se.prototype,"source",null),(0,f._)([(0,V.w)("source")],se.prototype,"castSource",null),(0,f._)([(0,Z.w)("source",["url"])],se.prototype,"readSource",null),(0,f._)([(0,D.K)("source")],se.prototype,"writeSource",null),(0,f._)([(0,I.MZ)()],se.prototype,"spatialReference",void 0),(0,f._)([(0,I.MZ)({readOnly:!0})],se.prototype,"type",void 0),se=(0,f._)([(0,T.$)("esri.layers.MediaLayer")],se);const bt=se},72211:(de,Q,n)=>{n.d(Q,{LF:()=>X,M9:()=>z,zu:()=>M});var R=n(5922),f=n(89221),k=n(79845),K=n(26073);function X(T,D,w){try{return function I(T){if(!T||0===T.length)return null;if(function V(T){const D=T[0];return!!D&&"scale"in D}(T)){const D=[];for(const w of T)D.push({scale:w.scale,value:M(w.value)});return D}return M(T)}(T)}catch(C){w?.messages?.push(C)}return null}function z(T,D,w,C){try{const Y=function N(T){const D=(0,k.q)(T);return D?(0,K.dw)(D)?D.map(w=>w.toJSON()):D.map(({scale:w,effects:C})=>({scale:w,value:C.map(Y=>Y.toJSON())})):null}(T);(0,f.sM)(w,Y,D)}catch(Y){C.messages&&C.messages.push(Y)}}function M(T){if(!T?.length)return"";const D=[];for(const w of T){let C=[];switch(w.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":C=[B(w,"amount")];break;case"blur":C=[B(w,"radius","pt")];break;case"hue-rotate":C=[B(w,"angle","deg")];break;case"drop-shadow":C=[B(w,"xoffset","pt"),B(w,"yoffset","pt"),B(w,"blurRadius","pt"),Z(w,"color")];break;case"bloom":C=[B(w,"strength"),B(w,"radius","pt"),B(w,"threshold")]}const Y=`${w.type}(${C.filter(Boolean).join(" ")})`;(0,k.q)(Y),D.push(Y)}return D.join(" ")}function B(T,D,w){if(null==T[D])throw new R.A("effect:missing-parameter",`Missing parameter '${D}' in ${T.type} effect`,{effect:T});return w?T[D]+w:""+T[D]}function Z(T,D){if(null==T[D])throw new R.A("effect:missing-parameter",`Missing parameter '${D}' in ${T.type} effect`,{effect:T});const w=T[D];return`rgba(${w[0]||0}, ${w[1]||0}, ${w[2]||0}, ${w[3]/255||0})`}},59894:(de,Q,n)=>{n.d(Q,{F:()=>I});var R=n(3248),f=n(3567),k=n(51995);const X={minX:0,minY:0,maxX:0,maxY:0};class I{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new f.w(9,(0,R.A)("esri-csp-restrictions")?M=>({minX:M[0],minY:M[1],maxX:M[2],maxY:M[3]}):["[0]","[1]","[2]","[3]"]),this._loadIndex=()=>{if(this._indexInvalid){const M=new Array(this._idByBounds.size);let B=0;this._idByBounds.forEach((Z,T)=>{M[B++]=T}),this._indexInvalid=!1,this._index.clear(),this._index.load(M)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter(M=>this._idByBounds.has(M))))),this._boundsToLoad.length=0)}}get fullBounds(){if(!this._boundsById.size)return null;const M=(0,k.Ie)();for(const B of this._boundsById.values())B&&(M[0]=Math.min(B[0],M[0]),M[1]=Math.min(B[1],M[1]),M[2]=Math.max(B[2],M[2]),M[3]=Math.max(B[3],M[3]));return M}get valid(){return!this._indexInvalid}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(M){const B=this._boundsById.get(M);this._boundsById.delete(M),B&&(this._idByBounds.delete(B),this._indexInvalid||this._index.remove(B))}forEachInBounds(M,B){this._loadIndex(),function N(V,M,B){(function z(V){X.minX=V[0],X.minY=V[1],X.maxX=V[2],X.maxY=V[3]})(M),V.search(X,B)}(this._index,M,Z=>B(this._idByBounds.get(Z)))}get(M){return this._boundsById.get(M)}has(M){return this._boundsById.has(M)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(M,B){if(!this._indexInvalid){const Z=this._boundsById.get(M);Z&&(this._index.remove(Z),this._idByBounds.delete(Z))}this._boundsById.set(M,B),B&&(this._idByBounds.set(B,M),this._indexInvalid||(this._boundsToLoad.push(B),this._boundsToLoad.length>5e4&&this._loadIndex()))}}},93410:(de,Q,n)=>{n.d(Q,{LF:()=>B,dM:()=>Z,sU:()=>V});var R=n(8189),f=n(85211),z=(n(3248),n(35150),n(40707),n(76576)),N=n(50501),I=n(72211);const V={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:{layerContainerTypes:N.K}},"portal-item":{read:!0,write:{layerContainerTypes:N.K}}}}},M={read:{reader:I.LF},write:{allowNull:!0,writer:I.M9,layerContainerTypes:N.K}},B={json:{read:!1,write:!1,origins:{"web-map":M,"portal-item":M}}},Z=T=>{let D=class extends T{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return(0,R._)([(0,f.MZ)(V)],D.prototype,"blendMode",void 0),(0,R._)([(0,f.MZ)(B)],D.prototype,"effect",void 0),D=(0,R._)([(0,z.$)("esri.layers.mixins.BlendLayer")],D),D}},17049:(de,Q,n)=>{n.d(Q,{q:()=>ne});var R=n(8189),f=n(5922),k=n(45272),K=n(85211),X=n(55739),I=(n(3248),n(40707),n(17221)),V=n(76576),M=n(50305),B=n(50501),Z=n(34813),T=n(56558);const D={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},w={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},C={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},Y={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,Object3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":D,"web-map/basemap":w,"web-map/tables":C,"link-chart/operational-layers":{...D,LinkChartLayer:!0},"link-chart/basemap":w,"link-chart/tables":C,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0,WCS:!0},"portal-item/tables":{ArcGISFeatureLayer:!0,SubtypeGroupTable:!0}};var $=n(22329),q=n(17181);const ne=x=>{let u=class extends x{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(h,g,P){return"Group Layer"===P?.portalItem?.type?void 0:h}writeListMode(h,g,P,_){(_&&"ground"===_.layerContainerType||h&&(0,T.R)(this,P,{},_))&&(g[P]=h)}writeOperationalLayerType(h,g,P){h&&(g[P]=h)}writeTitle(h,g){g.title=h??"Layer"}readVisibilityTimeExtent(h){return h?q.A.fromArray(h):null}writeVisibilityTimeExtent(h,g,P,_){h&&"tables"!==_.layerContainerType&&(h.isEmpty?_?.messages&&_.messages.push(new f.A("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):g[P]=h.toArray())}read(h,g){g&&(g.layer=this),(0,Z.t)(this,h,P=>super.read(h,P),g)}write(h,g){if(!this.persistenceEnabled&&!g?.ignorePersistenceEnabled)return null;if(g?.origin){const v=`${g.origin}/${g.layerContainerType||"operational-layers"}`;let d=!!Y[v]?.[this.operationalLayerType];if("ArcGISTiledElevationServiceLayer"===this.operationalLayerType&&"web-scene/operational-layers"===v&&(d=!1),"ArcGISDimensionLayer"===this.operationalLayerType&&"web-map/operational-layers"===v&&(d=!1),!d)return g.messages?.push(new f.A("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${v}'`,{layer:this})),null}const P=super.write(h,{...g,layer:this}),_=!!g&&!!g.messages&&!!g.messages.filter(v=>v instanceof f.A&&"web-document-write:property-required"===v.name).length;return(0,k.w8)(P?.url)?(g?.messages?.push(new f.A("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&_?null:P}beforeSave(){}};return(0,R._)([(0,K.MZ)({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],u.prototype,"id",void 0),(0,R._)([(0,I.w)("id",["id"])],u.prototype,"readId",null),(0,R._)([(0,K.MZ)($.C1)],u.prototype,"listMode",void 0),(0,R._)([(0,M.K)("listMode")],u.prototype,"writeListMode",null),(0,R._)([(0,K.MZ)({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:B.K,isRequired:!0}}}}})],u.prototype,"operationalLayerType",void 0),(0,R._)([(0,M.K)("operationalLayerType")],u.prototype,"writeOperationalLayerType",null),(0,R._)([(0,K.MZ)($.ke)],u.prototype,"opacity",void 0),(0,R._)([(0,K.MZ)({type:Boolean,readOnly:!1})],u.prototype,"persistenceEnabled",void 0),(0,R._)([(0,K.MZ)({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],u.prototype,"title",void 0),(0,R._)([(0,M.K)("title"),(0,M.K)(["web-scene"],"title")],u.prototype,"writeTitle",null),(0,R._)([(0,K.MZ)({type:q.A,json:{origins:{"web-scene":{write:{layerContainerTypes:B.K}}}}})],u.prototype,"visibilityTimeExtent",void 0),(0,R._)([(0,I.w)("visibilityTimeExtent")],u.prototype,"readVisibilityTimeExtent",null),(0,R._)([(0,M.K)(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[X.jz,X.Uv]]}})],u.prototype,"writeVisibilityTimeExtent",null),(0,R._)([(0,K.MZ)({type:Boolean,json:{name:"visibility",write:{layerContainerTypes:B.K}}})],u.prototype,"visible",void 0),u=(0,R._)([(0,V.$)("esri.layers.mixins.OperationalLayer")],u),u}},85551:(de,Q,n)=>{n.d(Q,{A:()=>u});var R=n(10467),f=n(8189),k=n(23098),K=n(77469),X=n(89563),z=n(89447),N=n(5922),I=n(35150),V=n(11432),M=n(56492),B=n(45272),Z=n(85211),w=(n(3248),n(40707),n(17221)),C=n(76576),Y=n(50305),$=n(58443),q=n(73874),ne=n(46577),oe=n(52606),x=n(69927);const u=g=>{let P=class extends g{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=(0,V.pR)(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(_){_!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",_))}readPortalItem(_,v,E){if(v.itemId)return new ne.default({id:v.itemId,portal:E?.portal})}writePortalItem(_,v){_?.id&&(v.itemId=_.id)}loadFromPortal(_,v){var E=this;return(0,R.A)(function*(){if(E.portalItem?.id)try{const{load:d}=yield Promise.all([n.e(2076),n.e(6180)]).then(n.bind(n,56180));return(0,M.Te)(v),yield d({instance:E,supportedTypes:_.supportedTypes,validateItem:_.validateItem,supportsData:_.supportsData,layerModuleTypeMap:_.layerModuleTypeMap,populateGroupLayer:_.populateGroupLayer},v)}catch(d){throw(0,M.zf)(d)||I.A.getLogger(E).warn(`Failed to load layer (${E.title}, ${E.id}) portal item (${E.portalItem.id})\n  ${d}`),d}})()}finishLoadEditablePortalLayer(_){var v=this;return(0,R.A)(function*(){v._set("userHasEditingPrivileges",yield v._fetchUserHasEditingPrivileges(_).catch(E=>((0,M.QP)(E),!0)))})()}setUserPrivileges(_,v){var E=this;return(0,R.A)(function*(){if(!k.A.userPrivilegesApplied)return E.finishLoadEditablePortalLayer(v);if(E.url)try{const{features:{edit:d,fullEdit:a},content:{updateItem:m}}=yield E._fetchUserPrivileges(_,v);E._set("userHasEditingPrivileges",d),E._set("userHasFullEditingPrivileges",a),E._set("userHasUpdateItemPrivileges",m)}catch(d){(0,M.QP)(d)}})()}_fetchUserPrivileges(_,v){var E=this;return(0,R.A)(function*(){let d=E.portalItem;if(!_||!d||!d.loaded||d.sourceUrl)return E._fetchFallbackUserPrivileges(v);const a=!K.id?.findCredential(E.url),m=_===d.id;if(m&&d.portal.user)return E._getUserPrivileges(d,a);let y,L;if(m)y=d.portal.url;else try{y=yield(0,$.wI)(E.url,v)}catch(G){(0,M.QP)(G)}if(!y||!(0,B.b8)(y,d.portal.url))return E._fetchFallbackUserPrivileges(v);try{const G=null!=v?v.signal:null;L=yield K.id?.getCredential(`${y}/sharing`,{prompt:!1,signal:G})}catch(G){(0,M.QP)(G)}if(!L)return{features:{edit:!0,fullEdit:!1},content:{updateItem:!1}};try{if(m?yield d.reload():(d=new ne.default({id:_,portal:{url:y}}),yield d.load(v)),d.portal.user)return E._getUserPrivileges(d,a)}catch(G){(0,M.QP)(G)}return{features:{edit:!0,fullEdit:!1},content:{updateItem:!1}}})()}_getUserPrivileges(_,v){const E=(0,x.It)(_);return v&&(E.features.edit=!0),E}_fetchFallbackUserPrivileges(_){var v=this;return(0,R.A)(function*(){let E=!0;try{E=yield v._fetchUserHasEditingPrivileges(_)}catch(d){(0,M.QP)(d)}return{features:{edit:E,fullEdit:!1},content:{updateItem:!1}}})()}_fetchUserHasEditingPrivileges(_){var v=this;return(0,R.A)(function*(){const E=v.url?K.id?.findCredential(v.url):null;if(!E)return!0;const d=h.credential===E?h.user:yield v._fetchEditingUser(_);return h.credential=E,h.user=d,null==d?.privileges||d.privileges.includes("features:user:edit")})()}_fetchEditingUser(_){var v=this;return(0,R.A)(function*(){const E=v.portalItem?.portal?.user;if(E)return E;const d=K.id?.findServerInfo(v.url??"");if(!d?.owningSystemUrl)return null;const a=`${d.owningSystemUrl}/sharing/rest`,m=q.A.getDefault();if(m&&m.loaded&&(0,B.S8)(m.restUrl)===(0,B.S8)(a))return m.user;const y=`${a}/community/self`,L=null!=_?_.signal:null,A=yield(0,z.Ke)((0,X.A)(y,{authMode:"no-prompt",query:{f:"json"},signal:L}));return A.ok?oe.A.fromJSON(A.value.data):null})()}read(_,v){v&&(v.layer=this),super.read(_,v)}write(_,v){const E=v?.portal,d=this.portalItem?.id&&(this.portalItem.portal||q.A.getDefault());return E&&d&&!(0,B.ut)(d.restUrl,E.restUrl)?(v.messages&&v.messages.push(new N.A("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(_,{...v,layer:this})}};return(0,f._)([(0,Z.MZ)({type:ne.default})],P.prototype,"portalItem",null),(0,f._)([(0,w.w)("web-document","portalItem",["itemId"])],P.prototype,"readPortalItem",null),(0,f._)([(0,Y.K)("web-document","portalItem",{itemId:{type:String}})],P.prototype,"writePortalItem",null),(0,f._)([(0,Z.MZ)({clonable:!1})],P.prototype,"resourceReferences",void 0),(0,f._)([(0,Z.MZ)({type:Boolean,readOnly:!0})],P.prototype,"userHasEditingPrivileges",void 0),(0,f._)([(0,Z.MZ)({type:Boolean,readOnly:!0})],P.prototype,"userHasFullEditingPrivileges",void 0),(0,f._)([(0,Z.MZ)({type:Boolean,readOnly:!0})],P.prototype,"userHasUpdateItemPrivileges",void 0),P=(0,f._)([(0,C.$)("esri.layers.mixins.PortalLayer")],P),P},h={credential:null,user:null}},33036:(de,Q,n)=>{n.d(Q,{j:()=>N});var R=n(8189),f=n(85211),z=(n(3248),n(35150),n(40707),n(76576));const N=V=>{let M=class extends V{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const B={minScale:this.minScale,maxScale:this.maxScale},Z=this.parent;Z&&"effectiveScaleRange"in Z&&function I(V,M){V.minScale=V.minScale>0?M.minScale>0?Math.min(V.minScale,M.minScale):V.minScale:M.minScale,V.maxScale=V.maxScale>0?M.maxScale>0?Math.max(V.maxScale,M.maxScale):V.maxScale:M.maxScale}(B,Z.effectiveScaleRange);const T=this._get("effectiveScaleRange");return T&&T.minScale===B.minScale&&T.maxScale===B.maxScale?T:B}};return(0,R._)([(0,f.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],M.prototype,"minScale",void 0),(0,R._)([(0,f.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],M.prototype,"maxScale",void 0),(0,R._)([(0,f.MZ)({readOnly:!0})],M.prototype,"effectiveScaleRange",null),M=(0,R._)([(0,z.$)("esri.layers.mixins.ScaleRangeLayer")],M),M}},69927:(de,Q,n)=>{n.d(Q,{It:()=>w,LG:()=>N,OM:()=>M,Sm:()=>B,Y:()=>I,bK:()=>V,mm:()=>D,sQ:()=>Z});var R=n(10467),f=n(13970),k=n(32034),K=n(55039);function z(){return(z=(0,R.A)(function*(C){const Y=C.spatialReference;if(Y.isWGS84)return C.clone();if(Y.isWebMercator)return(0,K.ci)(C);const $=k.A.WGS84;return yield(0,f.initializeProjection)(Y,$),(0,f.project)(C,$)})).apply(this,arguments)}function N(C,Y){if(!I(C,Y)){const $=C.typeKeywords;$?$.push(Y):C.typeKeywords=[Y]}}function I(C,Y){return!!C.typeKeywords?.includes(Y)}function V(C){return I(C,D.HOSTED_SERVICE)}function M(C,Y){const $=C.typeKeywords;if($){const q=$.indexOf(Y);q>-1&&$.splice(q,1)}}function B(C,Y,$){$?N(C,Y):M(C,Y)}function Z(C){return T.apply(this,arguments)}function T(){return T=(0,R.A)(function*(C){const Y=C.clone().normalize();let $;if(Y.length>1)for(const q of Y)$?q.width>$.width&&($=q):$=q;else $=Y[0];return function X(C){return z.apply(this,arguments)}($)}),T.apply(this,arguments)}const D={DEVELOPER_BASEMAP:"DeveloperBasemap",GROUP_LAYER_MAP:"Map",HOSTED_SERVICE:"Hosted Service",JSAPI:"ArcGIS API for JavaScript",LOCAL_SCENE:"ViewingMode-Local",METADATA:"Metadata",MULTI_LAYER:"Multilayer",ORIENTED_IMAGERY_LAYER:"OrientedImageryLayer",SINGLE_LAYER:"Singlelayer",SUBTYPE_GROUP_LAYER:"SubtypeGroupLayer",SUBTYPE_GROUP_TABLE:"SubtypeGroupTable",TABLE:"Table",TILED_IMAGERY:"Tiled Imagery"};function w(C){const{portal:Y,isOrgItem:$,itemControl:q}=C,ne=Y.user?.privileges;let oe=!ne||ne.includes("features:user:edit"),x=!!$&&!!ne?.includes("features:user:fullEdit");const u="update"===q||"admin"===q;return u?x=oe=!0:x&&(oe=!0),{features:{edit:oe,fullEdit:x},content:{updateItem:u}}}},71655:(de,Q,n)=>{var R,f;n.d(Q,{X:()=>R}),(f=R||(R={}))[f.SAVE=0]="SAVE",f[f.SAVE_AS=1]="SAVE_AS"}}]);