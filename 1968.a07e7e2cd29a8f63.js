"use strict";(self.webpackChunkAngularClient=self.webpackChunkAngularClient||[]).push([[1968],{40856:(K,G,n)=>{n.d(G,{X_:()=>P,i1:()=>O,oW:()=>s,zx:()=>d});var x=n(69287),p=n(82663);const j=96;function P(g,I){const w=I||g.extent,_=g.width,B=(0,p.GA)(w?.spatialReference);return w&&_?w.width/_*B*p.dy*j:0}function O(g,I){return g/((0,p.GA)(I)*p.dy*j)}function d(g,I,w){return function c(g,I){return 0===I||(0,x.Sp)(g,I)||g<I}(g,I)&&function E(g,I){return 0===I||(0,x.Sp)(g,I)||g>I}(g,w)}function s(g,I){return(0,x.Sp)(g,I)?0:(g||Number.POSITIVE_INFINITY)>(I||Number.POSITIVE_INFINITY)?1:-1}},14916:(K,G,n)=>{function x(P){const O=P.layer;return"floorInfo"in O&&O.floorInfo?.floorField&&"floors"in P.view?j(P.view.floors,O.floorInfo.floorField):null}function p(P,O){return"floorInfo"in O&&O.floorInfo?.floorField?j(P,O.floorInfo.floorField):null}function j(P,O){if(!P?.length)return null;const h=P.filter(o=>""!==o).map(o=>`'${o}'`);return h.push("''"),`${O} IN (${h.join(",")}) OR ${O} IS NULL`}n.d(G,{E:()=>x,f:()=>p})},87293:(K,G,n)=>{n.d(G,{Sk:()=>j,Zx:()=>p,_X:()=>O});var x=n(26514);function p(h,o,m){return o.flatten(({sublayers:c})=>c).length!==h.length||!!h.some(c=>c.originIdOf("minScale")>m||c.originIdOf("maxScale")>m||c.originIdOf("renderer")>m||c.originIdOf("labelingInfo")>m||c.originIdOf("opacity")>m||c.originIdOf("labelsVisible")>m||c.originIdOf("source")>m)||!P(h,o)}function j(h,o,m){return!!h.some(d=>{const c=d.source,E=!c||"map-layer"===c.type&&c.mapLayerId===d.id&&(null==c.gdbVersion||c.gdbVersion===m);d.commitProperty("renderer"),d.commitProperty("labelingInfo"),d.commitProperty("opacity"),d.commitProperty("labelsVisible"),d.commitProperty("orderBy");const s=d.layer?.capabilities?.exportMap?.supportsSublayerOrderBy??!1;return!E||d.originIdOf("renderer")>x.Gr.SERVICE||d.originIdOf("labelingInfo")>x.Gr.SERVICE||d.originIdOf("opacity")>x.Gr.SERVICE||d.originIdOf("labelsVisible")>x.Gr.SERVICE||s&&d.originIdOf("orderBy")>x.Gr.SERVICE})||!P(h,o)}function P(h,o){if(!h?.length||null==o)return!0;const m=o.slice().reverse().flatten(({sublayers:E})=>E&&E.toArray().reverse()).map(E=>E.id).toArray();if(h.length>m.length)return!1;let d=0;const c=m.length;for(const{id:E}of h){for(;d<c&&m[d]!==E;)d++;if(d>=c)return!1}return!0}function O(h){return!!h&&h.some(o=>null!=o.minScale||null!=o.layerDefinition?.minScale)}},86869:(K,G,n)=>{function x(h,o){return o?"xoffset"in o&&o.xoffset?Math.max(h,Math.abs(o.xoffset)):"yoffset"in o&&o.yoffset?Math.max(h,Math.abs(o.yoffset||0)):h:h}function j(h,o){return"number"==typeof h?h:h?.stops?.length?function p(h){let o=0,m=0;for(let d=0;d<h.length;d++){const c=h[d].size;"number"==typeof c&&(o+=c,m++)}return o/m}(h.stops):o}function O(h){const o=h?.renderer,m=h?.pointerType,d="touch"===m?9:6;if(!o)return d;const c="visualVariables"in o?function P(h,o){if(!o)return h;const m=o.filter(s=>"size"===s.type).map(s=>{const{maxSize:g,minSize:I}=s;return(j(g,h)+j(I,h))/2});let d=0;const c=m.length;if(0===c)return h;for(let s=0;s<c;s++)d+=m[s];const E=Math.floor(d/c);return Math.max(E,h)}(d,o.visualVariables):d;if("simple"===o.type)return x(c,o.symbol);if("unique-value"===o.type){let E=c;return o.uniqueValueInfos?.forEach(s=>{E=x(E,s.symbol)}),E}if("class-breaks"===o.type){let E=c;return o.classBreakInfos.forEach(s=>{E=x(E,s.symbol)}),E}return c}n.d(G,{o:()=>O})},9468:(K,G,n)=>{n.d(G,{A:()=>E});var x=n(8189),h=(n(35150),n(3248),n(40707),n(5922),n(76576)),o=n(69473),m=n(57641),d=n(62931);let c=class extends m.f{get hasHighlight(){return this.children.some(s=>s.hasData)}renderChildren(s){this.attributeView.update(),s.drawPhase===o.S5.HIGHLIGHT&&this.children.some(g=>g.hasData)&&(super.renderChildren(s),s.context.setColorMask(!0,!0,!0,!0),(0,d.lB)(s,!1,g=>{this._renderChildren(g,o.RI.Highlight)}))}};c=(0,x._)([(0,h.$)("esri.views.2d.layers.graphics.HighlightGraphicContainer")],c);const E=c},96006:(K,G,n)=>{n.d(G,{Uh:()=>W,ox:()=>Ue});var x=n(10467),p=n(8189),j=n(98877),P=n(89952),O=n(5922),h=n(3248),o=n(60797),m=n(56492),d=n(48900),c=n(63484),E=n(82663),s=n(85211),I=(n(35150),n(76576)),w=n(28067),_=n(40856),B=n(86300),N=n(14916),ne=n(86869),ye=n(89563),fe=n(77098),Y=n(68800),oe=n(61320),he=n(58701),me=n(87293);var k,xe=n(31178),ie=n(71065),Ie=n(55739),se=(n(40707),n(50305)),Me=n(32034),le=n(6434),be=n(17181);let A=k=class extends ie.A{static from(i){return(0,Ie.PZ)(k,i)}constructor(i){super(i),this.dpi=96,this.floors=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=null,this.height=400,this.historicMoment=null,this.layerIds=null,this.layerOption="top",this.mapExtent=null,this.maxAllowableOffset=null,this.returnFieldName=!0,this.returnGeometry=!1,this.returnM=!1,this.returnUnformattedValues=!0,this.returnZ=!1,this.spatialReference=null,this.sublayers=null,this.timeExtent=null,this.tolerance=null,this.width=400}writeHistoricMoment(i,e){e.historicMoment=i&&i.getTime()}};(0,p._)([(0,s.MZ)({type:Number,json:{write:!0}})],A.prototype,"dpi",void 0),(0,p._)([(0,s.MZ)()],A.prototype,"floors",void 0),(0,p._)([(0,s.MZ)({type:String,json:{write:!0}})],A.prototype,"gdbVersion",void 0),(0,p._)([(0,s.MZ)({types:le.yR,json:{read:oe.rS,write:!0}})],A.prototype,"geometry",void 0),(0,p._)([(0,s.MZ)({type:Number,json:{write:!0}})],A.prototype,"geometryPrecision",void 0),(0,p._)([(0,s.MZ)({type:Number,json:{write:!0}})],A.prototype,"height",void 0),(0,p._)([(0,s.MZ)({type:Date})],A.prototype,"historicMoment",void 0),(0,p._)([(0,se.K)("historicMoment")],A.prototype,"writeHistoricMoment",null),(0,p._)([(0,s.MZ)({type:[Number],json:{write:!0}})],A.prototype,"layerIds",void 0),(0,p._)([(0,s.MZ)({type:["top","visible","all","popup"],json:{write:!0}})],A.prototype,"layerOption",void 0),(0,p._)([(0,s.MZ)({type:w.A,json:{write:!0}})],A.prototype,"mapExtent",void 0),(0,p._)([(0,s.MZ)({type:Number,json:{write:!0}})],A.prototype,"maxAllowableOffset",void 0),(0,p._)([(0,s.MZ)({type:Boolean,json:{write:!0}})],A.prototype,"returnFieldName",void 0),(0,p._)([(0,s.MZ)({type:Boolean,json:{write:!0}})],A.prototype,"returnGeometry",void 0),(0,p._)([(0,s.MZ)({type:Boolean,json:{write:!0}})],A.prototype,"returnM",void 0),(0,p._)([(0,s.MZ)({type:Boolean,json:{write:!0}})],A.prototype,"returnUnformattedValues",void 0),(0,p._)([(0,s.MZ)({type:Boolean,json:{write:!0}})],A.prototype,"returnZ",void 0),(0,p._)([(0,s.MZ)({type:Me.A,json:{write:!0}})],A.prototype,"spatialReference",void 0),(0,p._)([(0,s.MZ)({type:xe.A})],A.prototype,"sublayers",void 0),(0,p._)([(0,s.MZ)({type:be.A,json:{write:!0}})],A.prototype,"timeExtent",void 0),(0,p._)([(0,s.MZ)({type:Number,json:{write:!0}})],A.prototype,"tolerance",void 0),(0,p._)([(0,s.MZ)({type:Number,json:{write:!0}})],A.prototype,"width",void 0),A=k=(0,p._)([(0,I.$)("esri.rest.support.IdentifyParameters")],A);const ae=A;var ue=n(81098),Oe=n(17221);let H=class extends ie.A{constructor(i){super(i),this.displayFieldName=null,this.feature=null,this.layerId=null,this.layerName=null}readFeature(i,e){return ue.A.fromJSON({attributes:{...e.attributes},geometry:{...e.geometry}})}writeFeature(i,e){if(!i)return;const{attributes:u,geometry:l}=i;u&&(e.attributes={...u}),null!=l&&(e.geometry=l.toJSON(),e.geometryType=le.Ye.toJSON(l.type))}};(0,p._)([(0,s.MZ)({type:String,json:{write:!0}})],H.prototype,"displayFieldName",void 0),(0,p._)([(0,s.MZ)({type:ue.A})],H.prototype,"feature",void 0),(0,p._)([(0,Oe.w)("feature",["attributes","geometry"])],H.prototype,"readFeature",null),(0,p._)([(0,se.K)("feature")],H.prototype,"writeFeature",null),(0,p._)([(0,s.MZ)({type:Number,json:{write:!0}})],H.prototype,"layerId",void 0),(0,p._)([(0,s.MZ)({type:String,json:{write:!0}})],H.prototype,"layerName",void 0),H=(0,p._)([(0,I.$)("esri.rest.support.IdentifyResult")],H);const Pe=H;function q(){return(q=(0,x.A)(function*(i,e,u){const l=(e=function Se(i){return ae.from(i)}(e)).geometry?[e.geometry]:[],y=(0,Y.Dl)(i);return y.path+="/identify",(0,fe.el)(l).then(a=>{const M=function ge(i,e){const{dpi:u,gdbVersion:l,geometry:y,geometryPrecision:a,height:M,historicMoment:T,layerOption:f,mapExtent:U,maxAllowableOffset:v,returnFieldName:R,returnGeometry:b,returnUnformattedValues:F,returnZ:S,spatialReference:Z,timeExtent:V,tolerance:D,width:C}=i.toJSON(),{dynamicLayers:Q,layerDefs:$,layerIds:X}=function ve(i){const{mapExtent:e,floors:u,width:l,sublayers:y,layerIds:a,layerOption:M,gdbVersion:T}=i,f=y?.find(S=>null!=S.layer)?.layer?.serviceSublayers,U="popup"===M,v={},R=(0,_.X_)({extent:e,width:l,spatialReference:e?.spatialReference}),b=[],F=S=>{if(S.visible&&(0===R||(0===S.minScale||R<=S.minScale)&&(0===S.maxScale||R>=S.maxScale)))if(S.sublayers)S.sublayers.forEach(F);else{if(!1===a?.includes(S.id)||U&&(!S.popupTemplate||!S.popupEnabled))return;b.unshift(S)}};if(y?.forEach(F),y&&!b.length)v.layerIds=[];else{const S=(0,me.Sk)(b,f,T),Z=b.map(V=>{const D=(0,N.f)(u,V);return V.toExportImageJSON(D)});if(S)v.dynamicLayers=JSON.stringify(Z);else{if(y){let D=b.map(({id:C})=>C);a&&(D=D.filter(C=>a.includes(C))),v.layerIds=D}else a?.length&&(v.layerIds=a);const V=function Ee(i,e){const u=!!i?.length,l=e.filter(y=>null!=y.definitionExpression||u&&null!=y.floorInfo);return l.length?l.map(y=>{const a=(0,N.f)(i,y),M=(0,c.mA)(a,y.definitionExpression);return{id:y.id,definitionExpression:M??void 0}}):null}(u,b);if(null!=V&&V.length){const D={};for(const C of V)C.definitionExpression&&(D[C.id]=C.definitionExpression);Object.keys(D).length&&(v.layerDefs=JSON.stringify(D))}}}return v}(i),z=null!=e?.geometry?e.geometry:null,L={historicMoment:T,geometryPrecision:a,maxAllowableOffset:v,returnFieldName:R,returnGeometry:b,returnUnformattedValues:F,returnZ:S,tolerance:D},J=z?.toJSON()||y;L.imageDisplay=`${C},${M},${u}`,l&&(L.gdbVersion=l),J&&(delete J.spatialReference,L.geometry=JSON.stringify(J),L.geometryType=(0,oe.$B)(J));const ce=Z??J?.spatialReference??U?.spatialReference;if(ce&&(L.sr=(0,he.YX)(ce)),L.time=V?[V.start,V.end].join(","):null,U){const{xmin:Ge,ymin:Le,xmax:Ve,ymax:Ne}=U;L.mapExtent=`${Ge},${Le},${Ve},${Ne}`}return $&&(L.layerDefs=$),Q&&!$&&(L.dynamicLayers=Q),L.layers="popup"===f?"visible":f,X&&!Q&&(L.layers+=`:${X.join(",")}`),L}(e,{geometry:a?.[0]}),T=(0,Y.lF)({...y.query,f:"json",...M}),f=(0,Y.jV)(T,u);return(0,ye.A)(y.path,f).then(Re).then(U=>function _e(i,e){if(!e?.length)return i;const u=new Map;e.forEach(function l(y){u.set(y.id,y),y.sublayers&&y.sublayers.forEach(l)});for(const y of i.results)y.feature.sourceLayer=u.get(y.layerId);return i}(U,e.sublayers))})})).apply(this,arguments)}function Re(i){const e=i.data;return e.results=e.results||[],e.exceededTransferLimit=!!e.exceededTransferLimit,e.results=e.results.map(u=>Pe.fromJSON(u)),e}var Te=n(48218),pe=n(46602),de=n(64935);let ee=null;function Ue(i,e){return"tile"===e.type||"map-image"===e.type}let W=class extends j.A{constructor(i){var e;super(i),e=this,this._featuresResolutions=new WeakMap,this.highlightGraphics=null,this.highlightGraphicUpdated=null,this.updateHighlightedFeatures=(0,m.sg)(function(){var u=(0,x.A)(function*(l){e.destroyed||e.updatingHandles.addPromise(e._updateHighlightedFeaturesGeometries(l).catch(()=>{}))});return function(l){return u.apply(this,arguments)}}())}initialize(){const i=e=>{for(const u of e){const{sourceLayer:l}=u;null!=l&&"geometryType"in l&&"point"===l.geometryType&&(u.visible=!1)}this.updatingHandles.addPromise(this._updateHighlightedFeaturesSymbols(e).catch(()=>{})),this.updateHighlightedFeatures(this._highlightGeometriesResolution)};this.addHandles([(0,d.on)(()=>this.highlightGraphics,"change",e=>i(e.added),{onListenerAdd:e=>i(e)})])}fetchPopupFeaturesAtLocation(i,e){var u=this;return(0,x.A)(function*(){const{layerView:{layer:l,view:{scale:y}}}=u;if(!i)throw new O.A("fetchPopupFeatures:invalid-area","Nothing to fetch without area",{layer:l});const a=function je(i,e,u){const l=[];if(!i)return l;const y=a=>{if(a.visible&&(0===a.minScale||e<=a.minScale)&&(0===a.maxScale||e>=a.maxScale))if(a.sublayers)a.sublayers.forEach(y);else if(a.popupEnabled){const f=(0,de.D8)(a,{...u,defaultPopupTemplateEnabled:!1});null!=f&&l.unshift({sublayer:a,popupTemplate:f})}};return i.map(y),l}(l.sublayers,y,e);if(!a.length)return[];const M=yield function Fe(i,e){return te.apply(this,arguments)}(l,a);if(!((l.capabilities?.operations?.supportsIdentify??1)&&l.version>=10.5||M))throw new O.A("fetchPopupFeatures:not-supported","query operation is disabled for this service",{layer:l});return M?u._fetchPopupFeaturesUsingQueries(i,a,e):u._fetchPopupFeaturesUsingIdentify(i,a,e)})()}clearHighlights(){this.highlightGraphics?.removeAll()}_updateHighlightedFeaturesSymbols(i){var e=this;return(0,x.A)(function*(){const{layerView:{view:u},highlightGraphics:l,highlightGraphicUpdated:y}=e;if(l&&y)for(const a of i){const M=a.sourceLayer&&"renderer"in a.sourceLayer&&a.sourceLayer.renderer;a.sourceLayer&&"geometryType"in a.sourceLayer&&"point"===a.sourceLayer.geometryType&&M&&"getSymbolAsync"in M&&M.getSymbolAsync(a).then(function(){var T=(0,x.A)(function*(f){f||=new pe.A;let U=null;const v="visualVariables"in M?M.visualVariables?.find(R=>"size"===R.type):void 0;v&&(ee||(ee=(yield n.e(7522).then(n.bind(n,77522))).getSize),U=ee(v,a,{view:u.type,scale:u.scale,shape:"simple-marker"===f.type?f.style:null})),U||="width"in f&&"height"in f&&null!=f.width&&null!=f.height?Math.max(f.width,f.height):"size"in f?f.size:16,l.includes(a)&&(a.symbol=new pe.A({style:"square",size:U,xoffset:"xoffset"in f?f.xoffset:0,yoffset:"yoffset"in f?f.yoffset:0}),y(a,"symbol"),a.visible=!0)});return function(f){return T.apply(this,arguments)}}())}})()}_updateHighlightedFeaturesGeometries(i){var e=this;return(0,x.A)(function*(){const{layerView:{layer:u,view:l},highlightGraphics:y,highlightGraphicUpdated:a}=e;if(e._highlightGeometriesResolution=i,!a||!y?.length||!u.capabilities.operations.supportsQuery)return;const M=e._getTargetResolution(i),T=new Map;for(const v of y)(!e._featuresResolutions.has(v)||e._featuresResolutions.get(v)>M)&&(0,o.tE)(T,v.sourceLayer,()=>new Map).set(v.getObjectId(),v);const f=Array.from(T,([v,R])=>{const b=v.createQuery();return b.objectIds=[...R.keys()],b.outFields=[v.objectIdField],b.returnGeometry=!0,b.maxAllowableOffset=M,b.outSpatialReference=l.spatialReference,v.queryFeatures(b)}),U=yield Promise.all(f);if(!e.destroyed)for(const{features:v}of U)for(const R of v){const F=T.get(R.sourceLayer).get(R.getObjectId());F&&y.includes(F)&&(F.geometry=R.geometry,a(F,"geometry"),e._featuresResolutions.set(F,M))}})()}_getTargetResolution(i){const e=i*(0,E.GA)(this.layerView.view.spatialReference),u=e/16;return u<=10?0:i/e*u}_fetchPopupFeaturesUsingIdentify(i,e,u){var l=this;return(0,x.A)(function*(){const y=yield l._createIdentifyParameters(i,e,u);if(null==y)return[];const{results:a}=yield function Ae(i,e,u){return q.apply(this,arguments)}(l.layerView.layer.parsedUrl,y,u);return a.map(M=>M.feature)})()}_createIdentifyParameters(i,e,u){var l=this;return(0,x.A)(function*(){const{floors:y,layer:a,timeExtent:M,view:{spatialReference:T,scale:f}}=l.layerView;if(!e.length)return null;yield Promise.all(e.map(({sublayer:S})=>S.load(u).catch(()=>{})));const U=Math.min((0,h.A)("mapservice-popup-identify-max-tolerance"),a.allSublayers.reduce((S,Z)=>Z.renderer?(0,ne.o)({renderer:Z.renderer,pointerType:u?.pointerType}):S,2)),v=l.createFetchPopupFeaturesQueryGeometry(i,U),R=(0,_.i1)(f,T),b=Math.round(v.width/R),F=new w.A({xmin:v.center.x-R*b,ymin:v.center.y-R*b,xmax:v.center.x+R*b,ymax:v.center.y+R*b,spatialReference:v.spatialReference});return new ae({floors:y,gdbVersion:"gdbVersion"in a?a.gdbVersion:void 0,geometry:i,height:b,layerOption:"popup",mapExtent:F,returnGeometry:!0,spatialReference:T,sublayers:a.sublayers,timeExtent:M,tolerance:U,width:b})})()}_fetchPopupFeaturesUsingQueries(i,e,u){var l=this;return(0,x.A)(function*(){const{layerView:{floors:y,timeExtent:a}}=l,M=e.map(function(){var T=(0,x.A)(function*({sublayer:f,popupTemplate:U}){if(yield f.load(u).catch(()=>{}),f.capabilities&&!f.capabilities.operations.supportsQuery)return[];const v=f.createQuery(),R=(0,ne.o)({renderer:f.renderer,pointerType:u?.pointerType}),b=l.createFetchPopupFeaturesQueryGeometry(i,R),F=new Set,[S]=yield Promise.all([(0,de.TO)(f,U),f.renderer?.collectRequiredFields(F,f.fieldsIndex)]);(0,m.Te)(u),(0,B._w)(F,f.fieldsIndex,S);const Z=Array.from(F).sort();v.geometry=b,v.outFields=Z,v.timeExtent=a;const V=(0,N.f)(y,f);if(v.where=(0,c.mA)(v.where,V),f.capabilities?.query.supportsOrderBy&&f.orderBy?.[0]){const z=f.orderBy[0],L=!z.valueExpression&&z.field;L&&(v.orderByFields=[`${L} ${"ascending"===z.order?"asc":"desc"}`])}const D=l._getTargetResolution(b.width/R),C=yield function we(i){return i.expressionInfos?.length||Array.isArray(i.content)&&i.content.some(e=>"expression"===e.type)?(0,Te.lw)():Promise.resolve()}(U);(0,m.Te)(u);const Q="point"===f.geometryType||C&&C.arcadeUtils.hasGeometryOperations(U);Q||(v.maxAllowableOffset=D);let{features:$}=yield f.queryFeatures(v,u);const X=Q?0:D;$=yield function De(i,e,u){return re.apply(this,arguments)}(f,$,u);for(const z of $)l._featuresResolutions.set(z,X);return $});return function(f){return T.apply(this,arguments)}}());return(yield Promise.allSettled(M)).reduce((T,f)=>"fulfilled"===f.status?[...T,...f.value]:T,[]).filter(P.Ru)})()}};function te(){return(te=(0,x.A)(function*(i,e){if(i.capabilities?.operations?.supportsQuery)return!0;try{return yield Promise.any(e.map(({sublayer:u})=>u.load().then(()=>u.capabilities.operations.supportsQuery)))}catch{return!1}})).apply(this,arguments)}function re(){return(re=(0,x.A)(function*(i,e,u){const l=i.renderer;return l&&"defaultSymbol"in l&&!l.defaultSymbol&&(e=l.valueExpression?yield Promise.all(e.map(y=>l.getSymbolAsync(y,u).then(a=>a?y:null))).then(y=>y.filter(a=>null!=a)):e.filter(y=>null!=l.getSymbol(y))),e})).apply(this,arguments)}(0,p._)([(0,s.MZ)({constructOnly:!0})],W.prototype,"createFetchPopupFeaturesQueryGeometry",void 0),(0,p._)([(0,s.MZ)({constructOnly:!0})],W.prototype,"layerView",void 0),(0,p._)([(0,s.MZ)({constructOnly:!0})],W.prototype,"highlightGraphics",void 0),(0,p._)([(0,s.MZ)({constructOnly:!0})],W.prototype,"highlightGraphicUpdated",void 0),(0,p._)([(0,s.MZ)({constructOnly:!0})],W.prototype,"updatingHandles",void 0),W=(0,p._)([(0,I.$)("esri.views.layers.support.MapServiceLayerViewHelper")],W)},64935:(K,G,n)=>{n.d(G,{D8:()=>O,TO:()=>j,d0:()=>h});var x=n(10467),p=n(86300);function j(o){return P.apply(this,arguments)}function P(){return(P=(0,x.A)(function*(o,m=o.popupTemplate){if(null==m)return[];const d=yield m.getRequiredFields(o.fieldsIndex),{lastEditInfoEnabled:c}=m,{objectIdField:E,typeIdField:s,globalIdField:g,relationships:I}=o;if(d.includes("*"))return["*"];const w=c?(0,p.eX)(o):[],_=(0,p.DB)(o.fieldsIndex,[...d,...w]);return s&&_.push(s),_&&E&&o.fieldsIndex?.has(E)&&!_.includes(E)&&_.push(E),_&&g&&o.fieldsIndex?.has(g)&&!_.includes(g)&&_.push(g),I&&I.forEach(B=>{const{keyField:N}=B;_&&N&&o.fieldsIndex?.has(N)&&!_.includes(N)&&_.push(N)}),_})).apply(this,arguments)}function O(o,m){return o.popupTemplate?o.popupTemplate:null!=m&&m.defaultPopupTemplateEnabled&&null!=o.defaultPopupTemplate?o.defaultPopupTemplate:null}function h(o,m){return null!=O(o,{defaultPopupTemplateEnabled:m})}},23868:(K,G,n)=>{n.d(G,{V:()=>P,t:()=>O});var x=n(82663),p=n(28067),j=n(86869);function P(o,m,d,c=new p.A){let E=0;if("2d"===d.type)E=m*(d.resolution??0);else if("3d"===d.type){const B=d.overlayPixelSizeInMapUnits(o),N=d.basemapSpatialReference;E=null==N||N.equals(d.spatialReference)?m*B:(0,x.GA)(N)/(0,x.GA)(d.spatialReference)}const s=o.x-E,g=o.y-E,I=o.x+E,w=o.y+E,{spatialReference:_}=d;return c.xmin=Math.min(s,I),c.ymin=Math.min(g,w),c.xmax=Math.max(s,I),c.ymax=Math.max(g,w),c.spatialReference=_,c}function O(o,m,d){const c=d.toMap(o);return null!=c&&P(c,(0,j.o)(),d,h).intersects(m)}const h=new p.A}}]);