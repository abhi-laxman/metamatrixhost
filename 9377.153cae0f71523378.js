"use strict";(self.webpackChunkAngularClient=self.webpackChunkAngularClient||[]).push([[9377],{74784:(X,G,z)=>{z.d(G,{A:()=>Z});var N=z(8189),W=z(49976),U=z(71065),j=z(85211),$=(z(3248),z(35150),z(40707),z(15463)),J=z(76576);const q=new W.J({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"}),K=new W.J({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});let E=class extends U.A{constructor(w){super(w),this.type="class-breaks-definition",this.breakCount=null,this.classificationField=null,this.classificationMethod=null,this.normalizationField=null,this.normalizationType=null}set standardDeviationInterval(w){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",w)}set definedInterval(w){"defined-interval"===this.classificationMethod&&this._set("definedInterval",w)}};(0,N._)([(0,$.e)({classBreaksDef:"class-breaks-definition"})],E.prototype,"type",void 0),(0,N._)([(0,j.MZ)({json:{write:!0}})],E.prototype,"breakCount",void 0),(0,N._)([(0,j.MZ)({json:{write:!0}})],E.prototype,"classificationField",void 0),(0,N._)([(0,j.MZ)({type:String,json:{read:q.read,write:q.write}})],E.prototype,"classificationMethod",void 0),(0,N._)([(0,j.MZ)({json:{write:!0}})],E.prototype,"normalizationField",void 0),(0,N._)([(0,j.MZ)({json:{read:K.read,write:K.write}})],E.prototype,"normalizationType",void 0),(0,N._)([(0,j.MZ)({value:null,json:{write:!0}})],E.prototype,"standardDeviationInterval",null),(0,N._)([(0,j.MZ)({value:null,json:{write:!0}})],E.prototype,"definedInterval",null),E=(0,N._)([(0,J.$)("esri.rest.support.ClassBreaksDefinition")],E);const Z=E},54076:(X,G,z)=>{z.d(G,{_:()=>j,t:()=>Y});var N=z(35150);const W=()=>N.A.getLogger("esri.rest.support.generateRendererUtils");function U(s,c){return Number(s.toFixed(c))}function j(s){const c=$(s),a=[],p=c.uniqueValues.length;for(let d=0;d<p;d++){const b=c.uniqueValues[d],g=c.valueFrequency[d],h=b.toString();a.push({value:b,count:g,label:h})}return{uniqueValues:a}}function Y(s,c){const{normalizationTotal:a}=s;return{classBreaks:H(s,c),normalizationTotal:a}}function H(s,c){const a=s.definition,{classificationMethod:p,normalizationType:d,definedInterval:b}=a,g=a.breakCount??1,h=[];let u=s.values;if(0===u.length)return[];u=u.sort((m,l)=>m-l);const[T,D]=c??[u.at(0),u.at(-1)];if("equal-interval"===p)if(u.length>=g){const m=(D-T)/g;let l=T;for(let t=1;t<g;t++){const f=U(T+t*m,6);h.push({minValue:l,maxValue:f,label:S(l,f,d)}),l=f}h.push({minValue:l,maxValue:D,label:S(l,D,d)})}else u.forEach(m=>{h.push({minValue:m,maxValue:m,label:S(m,m,d)})});else if("natural-breaks"===p){const m=$(u),t=function J(s,c,a){const p=s.length,d=[];a>p&&(a=p);for(let g=0;g<a;g++)d.push(Math.round(g*p/a-1));d.push(p-1);let b=q(d,s,c,a);return function K(s,c,a,p,d,b){let g=0,h=0,u=0,T=0,D=!0;for(let m=0;m<2&&D;m++){0===m&&(D=!1);for(let l=0;l<b-1;l++)for(;a[l+1]+1!==a[l+2];){a[l+1]=a[l+1]+1;const t=R(l,a,p,d);u=t.sbMean,g=t.sbSdcm;const f=R(l+1,a,p,d);if(T=f.sbMean,h=f.sbSdcm,!(g+h<c[l]+c[l+1])){a[l+1]=a[l+1]-1;break}c[l]=g,c[l+1]=h,s[l]=u,s[l+1]=T,D=!0}for(let l=b-1;l>0;l--)for(;a[l]!==a[l-1]+1;){a[l]=a[l]-1;const t=R(l-1,a,p,d);u=t.sbMean,g=t.sbSdcm;const f=R(l,a,p,d);if(T=f.sbMean,h=f.sbSdcm,!(g+h<c[l-1]+c[l])){a[l]=a[l]+1;break}c[l-1]=g,c[l]=h,s[l-1]=u,s[l]=T,D=!0}}return D}(b.mean,b.sdcm,d,s,c,a)&&(b=q(d,s,c,a)),d}(m.uniqueValues,s.valueFrequency||m.valueFrequency,g);let f=T;for(let y=1;y<g;y++)if(m.uniqueValues.length>y){const O=U(m.uniqueValues[t[y]],6);h.push({minValue:f,maxValue:O,label:S(f,O,d)}),f=O}h.push({minValue:f,maxValue:D,label:S(f,D,d)})}else if("quantile"===p)if(u.length>=g&&T!==D){let m=T,l=Math.ceil(u.length/g),t=0;for(let f=1;f<g;f++){let y=l+t-1;y>u.length&&(y=u.length-1),y<0&&(y=0),h.push({minValue:m,maxValue:u[y],label:S(m,u[y],d)}),m=u[y],t+=l,l=Math.ceil((u.length-t)/(g-f))}h.push({minValue:m,maxValue:D,label:S(m,D,d)})}else{let m=-1;for(let l=0;l<u.length;l++){const t=u[l];t!==m&&(m=t,h.push({minValue:m,maxValue:t,label:S(m,t,d)}),m=t)}}else if("standard-deviation"===p){const m=function Z(s){let c=0;for(let a=0;a<s.length;a++)c+=s[a];return c/=s.length,c}(u),l=function w(s,c){let a=0;for(let p=0;p<s.length;p++){const d=s[p];a+=(d-c)*(d-c)}return a/=s.length,Math.sqrt(a)}(u,m);if(0===l)h.push({minValue:u[0],maxValue:u[0],label:S(u[0],u[0],d)});else{const t=function E(s,c,a,p,d){let b=Math.max(p-s,c-p)/d/a;return b=b>=1?1:b>=.5?.5:.25,b}(T,D,g,m,l)*l;let f=0,y=T;for(let A=g;A>=1;A--){const Q=U(m-(A-.5)*t,6);h.push({minValue:y,maxValue:Q,label:S(y,Q,d)}),y=Q,f++}let O=U(m+.5*t,6);h.push({minValue:y,maxValue:O,label:S(y,O,d)}),y=O,f++;for(let A=1;A<=g;A++)O=f===2*g?D:U(m+(A+.5)*t,6),h.push({minValue:y,maxValue:O,label:S(y,O,d)}),y=O,f++}}else if("defined-interval"===p){if(!b)return h;const[m,l]=c??[u.at(0),u.at(-1)],t=Math.ceil((l-m)/b);let f=m;for(let y=1;y<t;y++){const O=U(m+y*b,6);h.push({minValue:f,maxValue:O,label:S(f,O,d)}),f=O}h.push({minValue:f,maxValue:l,label:S(f,l,d)})}return h}function S(s,c,a){let p=null;return p=s===c?a&&"percent-of-total"===a?s+"%":s.toString():a&&"percent-of-total"===a?s+"% - "+c+"%":s+" - "+c,p}function $(s){const c=[],a=[];let p=Number.MIN_VALUE,d=1,b=-1;for(let g=0;g<s.length;g++){const h=s[g];h===p?(d++,a[b]=d):null!==h&&(c.push(h),p=h,d=1,a.push(d),b++)}return{uniqueValues:c,valueFrequency:a}}function q(s,c,a,p){let d=[],b=[],g=[],h=0;const u=[],T=[];for(let t=0;t<p;t++){const f=R(t,s,c,a);u.push(f.sbMean),T.push(f.sbSdcm),h+=T[t]}let D,m=h,l=!0;for(;l||h<m;){l=!1,d=[];for(let t=0;t<p;t++)d.push(s[t]);for(let t=0;t<p;t++)for(let f=s[t]+1;f<=s[t+1];f++)if(D=c[f],t>0&&f!==s[t+1]&&Math.abs(D-u[t])>Math.abs(D-u[t-1]))s[t]=f;else if(t<p-1&&s[t]!==f-1&&Math.abs(D-u[t])>Math.abs(D-u[t+1])){s[t+1]=f-1;break}m=h,h=0,b=[],g=[];for(let t=0;t<p;t++){b.push(u[t]),g.push(T[t]);const f=R(t,s,c,a);u[t]=f.sbMean,T[t]=f.sbSdcm,h+=T[t]}}if(h>m){for(let t=0;t<p;t++)s[t]=d[t],u[t]=b[t],T[t]=g[t];h=m}return{mean:u,sdcm:T}}function R(s,c,a,p){let d=0,b=0;for(let u=c[s]+1;u<=c[s+1];u++){const T=p[u];d+=a[u]*T,b+=T}b<=0&&W().warn("Exception in Natural Breaks calculation");const g=d/b;let h=0;for(let u=c[s]+1;u<=c[s+1];u++)h+=p[u]*(a[u]-g)**2;return{sbMean:g,sbSdcm:h}}},59377:(X,G,z)=>{z.d(G,{$y:()=>ue,Ak:()=>le,FM:()=>c,G_:()=>R,OR:()=>ae,Rw:()=>ee,Vb:()=>Z,al:()=>ne,b3:()=>O,gJ:()=>E,jM:()=>re,lv:()=>Q,oZ:()=>y,qg:()=>s,sU:()=>te,wy:()=>K,z9:()=>w,zS:()=>oe});var N=z(74784),W=z(54076);const U="<Null>",j="equal-interval",Y=1,H=5,S=10,$=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,J=new Set(["esriFieldTypeDate","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeLong","esriFieldTypeOID","esriFieldTypeBigInteger"]),q=new Set(["esriFieldTypeTimeOnly","esriFieldTypeDateOnly"]),K=["min","max","avg","stddev","count","sum","variance","nullcount","median"];function E(e){return null==e||"string"==typeof e&&!e?U:e}function Z(e){return!(null!=e.normalizationField||null!=e.normalizationType||null!=e.minValue||null!=e.maxValue||e.sqlExpression&&e.supportsSQLExpression)}function w(e){const{outStatisticTypes:n}=e,i=e.returnDistinct?[...new Set(e.values)]:e.values,o=i.filter(V=>null!=V).sort(),r=o.length,_={count:r,min:o[0],max:o[r-1]};return e.supportsNullCount&&(_.nullcount=i.length-r),!e.percentileParams||n?.include?.length&&!n.include.includes("median")||n?.exclude?.length&&n.exclude.includes("median")||(_.median=s(i,e.percentileParams)),_}function R(e){const{values:n,useSampleStdDev:i,supportsNullCount:o,outStatisticTypes:r}=e;let _=Number.POSITIVE_INFINITY,V=Number.NEGATIVE_INFINITY,v=null,M=null,P=null,x=null,I=0;const F=null==e.minValue?-1/0:e.minValue,B=null==e.maxValue?1/0:e.maxValue;for(const C of n)Number.isFinite(C)?C>=F&&C<=B&&(v=null===v?C:v+C,_=Math.min(_,C),V=Math.max(V,C),I++):"string"==typeof C&&I++;if(I&&null!=v){M=v/I;let C=0;for(const k of n)Number.isFinite(k)&&k>=F&&k<=B&&(C+=(k-M)**2);x=i?I>1?C/(I-1):0:I>0?C/I:0,P=Math.sqrt(x)}else _=null,V=null;const L={avg:M,count:I,max:V,min:_,stddev:P,sum:v,variance:x};return o&&(L.nullcount=n.length-I),!e.percentileParams||r?.include?.length&&!r.include.includes("median")||r?.exclude?.length&&r.exclude.includes("median")||(L.median=s(n,e.percentileParams)),L}function s(e,n){const{fieldType:i,value:o,orderBy:r,isDiscrete:_}=n,V=c(i,"desc"===r);if(0===(e=[...e].filter(B=>null!=B).sort((B,L)=>V(B,L))).length)return null;if(o<=0)return e[0];if(o>=1)return e[e.length-1];const v=(e.length-1)*o,M=Math.floor(v),P=M+1,x=v%1,I=e[M],F=e[P];return P>=e.length||_||"string"==typeof I||"string"==typeof F?I:I*(1-x)+F*x}function c(e,n){if(e){if(J.has(e))return t(n);if(q.has(e))return D(n,!1);if("esriFieldTypeTimestampOffset"===e)return function h(e){return e?g:b}(n);const V=D(n,!0);if("esriFieldTypeString"===e)return V;if("esriFieldTypeGUID"===e||"esriFieldTypeGlobalID"===e)return(v,M)=>V(f(v),f(M))}const i=n?1:-1,o=t(n),r=D(n,!0),_=d(n);return(V,v)=>"number"==typeof V&&"number"==typeof v?o(V,v):"string"==typeof V&&"string"==typeof v?r(V,v):_(V,v)??i}const a=(e,n)=>null==e?null==n?0:1:null==n?-1:null,p=(e,n)=>null==e?null==n?0:-1:null==n?1:null;function d(e){return e?a:p}const b=(e,n)=>p(e,n)??(e===n?0:new Date(e).getTime()-new Date(n).getTime()),g=(e,n)=>a(e,n)??(e===n?0:new Date(n).getTime()-new Date(e).getTime()),u=(e,n)=>p(e,n)??(e===n?0:e<n?-1:1),T=(e,n)=>a(e,n)??(e===n?0:e<n?1:-1);function D(e,n){if(!n)return e?T:u;const i=d(e);return e?(o,r)=>i(o,r)??((o=o.toUpperCase())>(r=r.toUpperCase())?-1:o<r?1:0):(o,r)=>i(o,r)??((o=o.toUpperCase())<(r=r.toUpperCase())?-1:o>r?1:0)}const m=(e,n)=>a(e,n)??n-e,l=(e,n)=>p(e,n)??e-n;function t(e){return e?m:l}function f(e){return e.slice(24,36)+e.slice(19,23)+e.slice(16,18)+e.slice(14,16)+e.slice(11,13)+e.slice(9,11)+e.slice(6,8)+e.slice(4,6)+e.slice(2,4)+e.slice(0,2)}function y(e,n,i){let o;for(o in e)n?.include?.length&&!n.include.includes(o)||n?.exclude?.length&&n.exclude.includes(o)?delete e[o]:K.includes(o)&&(Number.isFinite(e[o])||(e[o]=null));return i&&["avg","stddev","variance"].forEach(r=>{null!=e[r]&&(e[r]=Math.ceil(e[r]??0))}),e}function O(e){const n={};for(let i of e)(null==i||"string"==typeof i&&""===i.trim())&&(i=null),null==n[i]?n[i]={count:1,data:i}:n[i].count++;return{count:n}}function A(e){return"coded-value"!==e?.type?[]:e.codedValues.map(n=>n.code)}function Q(e,n,i,o){const r=e.count,_=[];if(i&&n){const V=[],v=A(n[0]);for(const M of v)if(n[1]){const P=A(n[1]);for(const x of P)if(n[2]){const I=A(n[2]);for(const F of I)V.push(`${E(M)}${o}${E(x)}${o}${E(F)}`)}else V.push(`${E(M)}${o}${E(x)}`)}else V.push(M);for(const M of V)r.hasOwnProperty(M)||(r[M]={data:M,count:0})}for(const V in r){const v=r[V];_.push({value:v.data,count:v.count,label:v.label})}return{uniqueValueInfos:_}}function oe(e,n,i,o){let r=null;switch(n){case"log":0!==e&&(r=Math.log(e)*Math.LOG10E);break;case"percent-of-total":Number.isFinite(o)&&0!==o&&(r=e/o*100);break;case"field":Number.isFinite(i)&&0!==i&&(r=e/i);break;case"natural-log":e>0&&(r=Math.log(e));break;case"square-root":e>0&&(r=e**.5)}return r}function ee(e,n,i){const o=ne({field:n.field,normalizationType:n.normalizationType,normalizationField:n.normalizationField,classificationMethod:n.classificationMethod,standardDeviationInterval:n.standardDeviationInterval,definedInterval:n.definedInterval,breakCount:n.numClasses||H});return e=function se(e,n,i){const o=n??-1/0,r=i??1/0;return e.filter(_=>Number.isFinite(_)&&_>=o&&_<=r)}(e,n.minValue,n.maxValue),(0,W.t)({definition:o,values:e,normalizationTotal:n.normalizationTotal},i)}function ne(e){const{breakCount:n,field:i,normalizationField:o,normalizationType:r}=e,_=e.classificationMethod||j;return new N.A({breakCount:n,classificationField:i,classificationMethod:_,normalizationField:"field"===r?o:void 0,normalizationType:r,standardDeviationInterval:"standard-deviation"===_?e.standardDeviationInterval||Y:void 0,definedInterval:"defined-interval"===_?e.definedInterval:void 0})}function re(e,n){let i=e.classBreaks;const o=i.length,r=i[0]?.minValue,_=i[o-1]?.maxValue,V="standard-deviation"===n,v=$;return i=i.map(M=>{const P=M.label,x={minValue:M.minValue,maxValue:M.maxValue,label:P};if(V&&P){const I=P.match(v),F=I?.map(B=>+B.trim())??[];2===F.length?(x.minStdDev=F[0],x.maxStdDev=F[1],F[0]<0&&F[1]>0&&(x.hasAvg=!0)):1===F.length&&(P.includes("<")?(x.minStdDev=null,x.maxStdDev=F[0]):P.includes(">")&&(x.minStdDev=F[0],x.maxStdDev=null))}return x}),{minValue:r,maxValue:_,classBreakInfos:i,normalizationTotal:e.normalizationTotal}}function ue(e,n){const i=te(e,n);if(null==i.min&&null==i.max)return{bins:[],minValue:i.min,maxValue:i.max,normalizationTotal:n.normalizationTotal};const o=i.intervals,r=i.min??0,_=i.max??0,V=o.map((v,M)=>({minValue:o[M][0],maxValue:o[M][1],count:0}));for(const v of e)if(null!=v&&v>=r&&v<=_){const M=le(o,v);M>-1&&V[M].count++}return{bins:V,minValue:r,maxValue:_,normalizationTotal:n.normalizationTotal}}function te(e,n,i=!1){const{field:o,classificationMethod:r,standardDeviationInterval:_,definedInterval:V,normalizationType:v,normalizationField:M,normalizationTotal:P,minValue:x,maxValue:I}=n,F=n.numBins||S;let B=null,L=null,C=null;if(r&&"equal-interval"!==r||v){const{classBreaks:k}=ee(e,{field:o,normalizationType:v,normalizationField:M,normalizationTotal:P,classificationMethod:r,standardDeviationInterval:_,definedInterval:V,minValue:x,maxValue:I,numClasses:F},null!=x&&null!=I?[x,I]:void 0);B=k[0]?.minValue,L=k[k.length-1]?.maxValue,C=k.map(ie=>[ie.minValue,ie.maxValue])}else{if(null!=x&&null!=I)B=x,L=I;else{const k=R({values:e,minValue:x,maxValue:I,useSampleStdDev:!v,supportsNullCount:Z({normalizationType:v,normalizationField:M,minValue:x,maxValue:I})});B=k.min??null,L=k.max??null}C=ae(B??0,L??0,F)}if(i){const k=C.at(-1)[1];C.push([k,k])}return{min:B,max:L,intervals:C}}function le(e,n){let i=-1;for(let o=e.length-1;o>=0;o--)if(n>=e[o][0]){i=o;break}return i}function ae(e,n,i){const o=(n-e)/i,r=[];let _,V=e;for(let v=1;v<=i;v++)_=V+o,_=Number(_.toFixed(16)),r.push([V,v===i?n:_]),V=_;return r}}}]);