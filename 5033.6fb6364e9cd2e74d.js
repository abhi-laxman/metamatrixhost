"use strict";(self.webpackChunkAngularClient=self.webpackChunkAngularClient||[]).push([[5033,9557],{53781:(Y,Q,f)=>{f.d(Q,{a:()=>D,b:()=>m,c:()=>w,d:()=>L,e:()=>v,f:()=>Z,g:()=>F,h:()=>z,j:()=>q,l:()=>a,n:()=>W,s:()=>x,t:()=>u});var O=f(85952);function w(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function x(e,t,n,E,j){return e[0]=t,e[1]=n,e[2]=E,e[3]=j,e}function F(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e}function S(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}function C(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}function h(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e}function m(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function P(e,t){const n=t[0]-e[0],E=t[1]-e[1],j=t[2]-e[2],U=t[3]-e[3];return Math.sqrt(n*n+E*E+j*j+U*U)}function L(e,t){const n=t[0]-e[0],E=t[1]-e[1],j=t[2]-e[2],U=t[3]-e[3];return n*n+E*E+j*j+U*U}function q(e){const t=e[0],n=e[1],E=e[2],j=e[3];return Math.sqrt(t*t+n*n+E*E+j*j)}function Z(e){const t=e[0],n=e[1],E=e[2],j=e[3];return t*t+n*n+E*E+j*j}function W(e,t){const n=t[0],E=t[1],j=t[2],U=t[3];let B=n*n+E*E+j*j+U*U;return B>0&&(B=1/Math.sqrt(B),e[0]=n*B,e[1]=E*B,e[2]=j*B,e[3]=U*B),e}function z(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function a(e,t,n,E){const j=t[0],U=t[1],B=t[2],K=t[3];return e[0]=j+E*(n[0]-j),e[1]=U+E*(n[1]-U),e[2]=B+E*(n[2]-B),e[3]=K+E*(n[3]-K),e}function u(e,t,n){const E=t[0],j=t[1],U=t[2],B=t[3];return e[0]=n[0]*E+n[4]*j+n[8]*U+n[12]*B,e[1]=n[1]*E+n[5]*j+n[9]*U+n[13]*B,e[2]=n[2]*E+n[6]*j+n[10]*U+n[14]*B,e[3]=n[3]*E+n[7]*j+n[11]*U+n[15]*B,e}function D(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function v(e,t){const n=e[0],E=e[1],j=e[2],U=e[3],B=t[0],K=t[1],A=t[2],G=t[3],J=(0,O.FD)();return Math.abs(n-B)<=J*Math.max(1,Math.abs(n),Math.abs(B))&&Math.abs(E-K)<=J*Math.max(1,Math.abs(E),Math.abs(K))&&Math.abs(j-A)<=J*Math.max(1,Math.abs(j),Math.abs(A))&&Math.abs(U-G)<=J*Math.max(1,Math.abs(U),Math.abs(G))}Object.freeze(Object.defineProperty({__proto__:null,add:F,ceil:function i(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e},copy:w,copyVec3:function g(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},dist:P,distance:P,div:h,divide:h,dot:z,equals:v,exactEquals:D,floor:function l(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e},inverse:function M(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},len:q,length:q,lerp:a,max:function d(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e},min:function y(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e},mul:C,multiply:C,negate:function _(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},normalize:W,random:function c(e,t=1){const n=O.Ov;let E,j,U,B,K,A;do{E=2*n()-1,j=2*n()-1,K=E*E+j*j}while(K>=1);do{U=2*n()-1,B=2*n()-1,A=U*U+B*B}while(A>=1);const G=Math.sqrt((1-K)/A);return e[0]=t*E,e[1]=t*j,e[2]=t*U*G,e[3]=t*B*G,e},round:function o(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e},scale:m,scaleAndAdd:function I(e,t,n,E){return e[0]=t[0]+n[0]*E,e[1]=t[1]+n[1]*E,e[2]=t[2]+n[2]*E,e[3]=t[3]+n[3]*E,e},set:x,sqrDist:L,sqrLen:Z,squaredDistance:L,squaredLength:Z,str:function N(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},sub:S,subtract:S,transformMat4:u,transformQuat:function b(e,t,n){const E=t[0],j=t[1],U=t[2],B=n[0],K=n[1],A=n[2],G=n[3],J=G*E+K*U-A*j,H=G*j+A*E-B*U,X=G*U+B*j-K*E,ee=-B*E-K*j-A*U;return e[0]=J*G+ee*-B+H*-A-X*-K,e[1]=H*G+ee*-K+X*-B-J*-A,e[2]=X*G+ee*-A+J*-K-H*-B,e[3]=t[3],e}},Symbol.toStringTag,{value:"Module"}))},28250:(Y,Q,f)=>{function O(l){return null!=F(l)||null!=x(l)}function w(l){return S.test(l)}function g(l){return F(l)??x(l)}function x(l){const y=new Date(l);return function C(l,y){if(Number.isNaN(l.getTime()))return!1;let d=!0;if(i&&/\d+\W*$/.test(y)){const o=y.match(/[a-zA-Z]{2,}/);if(o){let m=!1,I=0;for(;!m&&I<=o.length;)m=!h.test(o[I]),I++;d=!m}}return d}(y,l)?Number.isNaN(y.getTime())?null:y.getTime()-6e4*y.getTimezoneOffset():null}function F(l){const y=S.exec(l);if(!y?.groups)return null;const d=y.groups,o=+d.year,m=+d.month-1,I=+d.day,P=+(d.hours??"0"),L=+(d.minutes??"0"),q=+(d.seconds??"0");if(P>23||L>59||q>59)return null;const Z=d.ms??"0",_=Z?+Z.padEnd(3,"0").slice(0,3):0;let M;return M=d.isUTC||!d.offsetSign?Date.UTC(o,m,I,P,L,q,_):6e4*("+"===d.offsetSign?-1:1)*(60*+d.offsetHours+ +d.offsetMinutes)+Date.UTC(o,m,I,P,L,q,_),Number.isNaN(M)?null:M}f.d(Q,{Br:()=>w,Cq:()=>O,_U:()=>g});const S=/^(?:(?<year>-?\d{4,})-(?<month>\d{2})-(?<day>\d{2}))(?:T(?<hours>\d{2}):(?<minutes>\d{2}):(?<seconds>\d{2})(?:\.(?<ms>\d+))?)?(?:(?<isUTC>Z)|(?:(?<offsetSign>\+|-)(?<offsetHours>\d{2}):(?<offsetMinutes>\d{2})))?$/,h=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i,i=!Number.isNaN(new Date("technology 10").getTime())},89141:(Y,Q,f)=>{function O(){return[0,0,0,0]}function w(_){return[_[0],_[1],_[2],_[3]]}function g(_,M,W,z){return[_,M,W,z]}function x(_,M,W,z){return[_,M,W,z]}function F(_,M=[0,0,0,0]){const W=Math.min(4,_.length);for(let z=0;z<W;++z)M[z]=_[z];return M}function h(){return g(1,1,1,1)}function i(){return g(1,0,0,0)}function l(){return g(0,1,0,0)}function y(){return g(0,0,1,0)}function d(){return g(0,0,0,1)}f.d(Q,{CN:()=>x,Un:()=>m,ci:()=>F,fA:()=>g,o8:()=>w,uY:()=>o,vt:()=>O});const o=[0,0,0,0],m=h(),I=i(),P=l(),L=y(),q=d();Object.freeze(Object.defineProperty({__proto__:null,ONES:m,UNIT_W:q,UNIT_X:I,UNIT_Y:P,UNIT_Z:L,ZEROS:o,clone:w,create:O,createView:function S(_,M){return new Float64Array(_,M,4)},freeze:x,fromArray:F,fromValues:g,ones:h,unitW:d,unitX:i,unitY:l,unitZ:y,zeros:function C(){return[0,0,0,0]}},Symbol.toStringTag,{value:"Module"}))},11445:(Y,Q,f)=>{f.d(Q,{Qf:()=>h,Qh:()=>F,RS:()=>g,ez:()=>y,i5:()=>d,lM:()=>x,qK:()=>l});var O=f(79139);const g=16;function x(o){if(!o)return 0;let m=l;for(const I in o)o.hasOwnProperty(I)&&(m+=C(o[I],!1));return m}function F(o){if(!o)return 0;if("number"==typeof o[0])return h(o);if(Array.isArray(o))return function S(o){const m=o.length;if(0===m||"number"==typeof o[0])return i(o,8);let I=y;for(let P=0;P<m;P++)I+=C(o[P]);return I}(o);let m=l;for(const I in o)o.hasOwnProperty(I)&&(m+=C(o[I]));return m}function C(o,m=!0){switch(typeof o){case"object":return m?F(o):l;case"string":return function w(o){return 32+o.length}(o);case"number":return g;case"boolean":return 4;default:return 8}}function h(...o){return o.reduce((m,I)=>m+(I?(0,O.iu)(I)?I.byteLength+d:Array.isArray(I)?i(I,g):0:0),0)}function i(o,m){return y+o.length*m}const l=32,y=16,d=145},42086:(Y,Q,f)=>{f.d(Q,{N3:()=>F,Om:()=>x});var O=f(11445),w=f(27999),g=f(13682);class x{constructor(h=null,i={},l,y,d=0){this.geometry=h,this.attributes=i,this.centroid=l,this.objectId=y,this.displayId=d}static fromJSON(h){const i=h.geometry?g.A.fromJSON(h.geometry):null,l=h.centroid?g.A.fromJSON(h.centroid):null;return new x(i,h.attributes,l,h.objectId)}weakClone(){const h=new x(this.geometry,this.attributes,this.centroid,this.objectId);return h.displayId=this.displayId,h}clone(){const h=this.geometry?.clone(),i=new x(h,{...this.attributes},this.centroid?.clone(),this.objectId);return i.displayId=this.displayId,i}ensureCentroid(h){return this.centroid??=(0,w.Q)(new g.A,this.geometry,h.hasZ,h.hasM),this.centroid}get usedMemory(){return 128+(0,O.lM)(this.attributes)+(this.geometry?.usedMemory??0)}}function F(C){return!!C.geometry?.coords?.length}},61808:(Y,Q,f)=>{f.d(Q,{A:()=>O});class O{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const g=new O;return g.objectIdFieldName=this.objectIdFieldName,g.globalIdFieldName=this.globalIdFieldName,g.geohashFieldName=this.geohashFieldName,g.geometryProperties=this.geometryProperties,g.geometryType=this.geometryType,g.spatialReference=this.spatialReference,g.hasZ=this.hasZ,g.hasM=this.hasM,g.features=this.features,g.fields=this.fields,g.transform=this.transform,g.exceededTransferLimit=this.exceededTransferLimit,g.uniqueIdField=this.uniqueIdField,g.queryGeometry=this.queryGeometry,g.queryGeometryType=this.queryGeometryType,g}}},13682:(Y,Q,f)=>{f.d(Q,{A:()=>g});var O=f(11445);class g{constructor(F=[],S=[]){this.lengths=F??[],this.coords=S??[]}static fromJSON(F){return new g(F.lengths,F.coords)}static fromRect(F){const[S,C,h,i]=F,l=h-S,y=i-C;return new g([5],[S,C,l,0,0,y,-l,0,0,-y])}get isPoint(){return 0===this.lengths.length&&this.coords.length>=2}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((F,S)=>F+S)}get usedMemory(){return 64+(0,O.Qf)(this.lengths,this.coords)}area(){let F=0,S=0;if(!this.lengths.length)return 0;for(let C=0;C<this.lengths.length;C++){const h=this.lengths[C];if(h<3)continue;let i=this.coords[2*S],l=this.coords[2*S+1];for(let y=1;y<h;y+=1){const d=this.coords[2*(y+S)],o=this.coords[2*(y+S)+1];F+=-.5*(d-i)*(o+l),i=d,l=o}S+=h}return F}forEachVertex(F){let S=0;this.lengths.length||F(this.coords[0],this.coords[1]);for(let C=0;C<this.lengths.length;C++){const h=this.lengths[C];for(let i=0;i<h;i++)F(this.coords[2*(i+S)],this.coords[2*(i+S)+1]);S+=h}}deltaDecode(){const F=this.clone(),{coords:S,lengths:C}=F;let h=0;for(const i of C){for(let l=1;l<i;l++)S[2*(h+l)]+=S[2*(h+l)-2],S[2*(h+l)+1]+=S[2*(h+l)-1];h+=i}return F}clone(F){if(0===this.lengths.length)return new g([],[this.coords[0],this.coords[1]]);const S=2*(0===this.lengths.length?1:this.lengths.reduce((h,i)=>h+i)),C=this.coords.slice(0,S);return F?(F.set(C),new g(this.lengths,F)):new g(Array.from(this.lengths),Array.from(C))}}},27999:(Y,Q,f)=>{function O(i,l){return i?l?4:3:l?3:2}function w(i,l,y,d){if(!l?.lengths.length)return null;i.lengths.length&&(i.lengths.length=0),i.coords.length&&(i.coords.length=0);const o=i.coords,m=[],I=y?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:P,coords:L}=l,q=O(y,d);let Z=0;for(const _ of P){const M=g(I,L,Z,_,y,d);M&&m.push(M),Z+=_*q}if(m.sort((_,M)=>{let W=_[2]-M[2];return 0===W&&y&&(W=_[4]-M[4]),W}),m.length){let _=6*m[0][2];o[0]=m[0][0]/_,o[1]=m[0][1]/_,y&&(_=6*m[0][4],o[2]=0!==_?m[0][3]/_:0),(o[0]<I[0]||o[0]>I[1]||o[1]<I[2]||o[1]>I[3]||y&&(o[2]<I[4]||o[2]>I[5]))&&(o.length=0)}if(!o.length){const _=l.lengths[0]?function x(i,l,y,d,o){const m=O(d,o);let I=l,P=l+m,L=0,q=0,Z=0,_=0;for(let M=0,W=y-1;M<W;M++,I+=m,P+=m){const z=i[I],a=i[I+1],c=i[I+2],u=i[P],b=i[P+1],N=i[P+2],D=d?S(z,a,c,u,b,N):F(z,a,u,b);if(D)if(L+=D,d){const v=h(z,a,c,u,b,N);q+=D*v[0],Z+=D*v[1],_+=D*v[2]}else{const v=C(z,a,u,b);q+=D*v[0],Z+=D*v[1]}}return L>0?d?[q/L,Z/L,_/L]:[q/L,Z/L]:y>0?d?[i[l],i[l+1],i[l+2]]:[i[l],i[l+1]]:null}(L,0,P[0],y,d):null;if(!_)return null;o[0]=_[0],o[1]=_[1],y&&_.length>2&&(o[2]=_[2])}return i}function g(i,l,y,d,o,m){const I=O(o,m);let P=y,L=y+I,q=0,Z=0,_=0,M=0,W=0;for(let a=0,c=d-1;a<c;a++,P+=I,L+=I){const u=l[P],b=l[P+1],N=l[P+2],D=l[L],v=l[L+1],V=l[L+2];let k=u*v-D*b;M+=k,q+=(u+D)*k,Z+=(b+v)*k,o&&(k=u*V-D*N,_+=(N+V)*k,W+=k),u<i[0]&&(i[0]=u),u>i[1]&&(i[1]=u),b<i[2]&&(i[2]=b),b>i[3]&&(i[3]=b),o&&(N<i[4]&&(i[4]=N),N>i[5]&&(i[5]=N))}if(M>0&&(M*=-1),W>0&&(W*=-1),!M)return null;const z=[q,Z,.5*M];return o&&(z[3]=_,z[4]=.5*W),z}function F(i,l,y,d){const o=y-i,m=d-l;return Math.sqrt(o*o+m*m)}function S(i,l,y,d,o,m){const I=d-i,P=o-l,L=m-y;return Math.sqrt(I*I+P*P+L*L)}function C(i,l,y,d){return[i+.5*(y-i),l+.5*(d-l)]}function h(i,l,y,d,o,m){return[i+.5*(d-i),l+.5*(o-l),y+.5*(m-y)]}f.d(Q,{Q:()=>w})},81570:(Y,Q,f)=>{f.r(Q),f.d(Q,{default:()=>W});var O=f(10467),w=f(89563),g=f(89447),x=f(5922),F=f(35150),S=f(56492),C=f(61320),h=f(58701),i=f(31732),l=f(17256),y=f(64373),d=f(88840),o=f(47960),m=f(36761),I=f(89962),P=f(51248),L=f(73258),q=f(38965),Z=f(86300),_=f(20543);const M={hasAttachments:!1,capabilities:"query, editing, create, delete, update",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsQueryAttachmentOrderByFields:!1,supportsQueryBins:!0,supportsQueryWithCacheHint:!0,supportsQueryWithDistance:!0,supportsQueryWithResultType:!0,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0},queryBinsCapabilities:P.PC};class W{constructor(){var a=this;this._queryEngine=null,this._snapshotFeatures=function(){var c=(0,O.A)(function*(u){const b=yield a._fetch(u);return a._createFeatures(b)});return function(u){return c.apply(this,arguments)}}()}destroy(){this._queryEngine?.destroy(),this._queryEngine=this._createDefaultAttributes=null}load(a,c={}){var u=this;return(0,O.A)(function*(){u._loadOptions={url:a.url,customParameters:a.customParameters};const b=[],[N]=yield Promise.all([a.url?u._fetch(c?.signal):null,u._checkProjection(a.spatialReference)]),D=(0,m.BM)(N,{geometryType:a.geometryType}),v=a.fields||D.fields||[],V=null!=a.hasZ?a.hasZ:D.hasZ,k=D.geometryType;let s=a.objectIdField||D.objectIdFieldName||"__OBJECTID";const p=a.spatialReference||h.KK;let r=a.timeInfo;v===D.fields&&D.unknownFields.length>0&&b.push({name:"geojson-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:D.unknownFields}});const T=new L.A(v);let R=T.get(s);R?("esriFieldTypeString"!==R.type&&(R.type="esriFieldTypeOID"),R.editable=!1,R.nullable=!1,s=R.name):(R={alias:s,name:s,type:"string"===D.objectIdFieldType?"esriFieldTypeString":"esriFieldTypeOID",editable:!1,nullable:!1},v.unshift(R));const $={};for(const A of v){if(null==A.name&&(A.name=A.alias),null==A.alias&&(A.alias=A.name),!A.name)throw new x.A("geojson-layer:invalid-field-name","field name is missing",{field:A});if(!q.m.jsonValues.includes(A.type))throw new x.A("geojson-layer:invalid-field-type",`invalid type for field "${A.name}"`,{field:A});if(A.name!==R.name){const G=(0,Z.lD)(A);void 0!==G&&($[A.name]=G)}null==A.length&&(A.length=(0,Z._b)(A))}if(r){if(r.startTimeField){const A=T.get(r.startTimeField);A?(r.startTimeField=A.name,A.type="esriFieldTypeDate"):r.startTimeField=null}if(r.endTimeField){const A=T.get(r.endTimeField);A?(r.endTimeField=A.name,A.type="esriFieldTypeDate"):r.endTimeField=null}if(r.trackIdField){const A=T.get(r.trackIdField);A?r.trackIdField=A.name:(r.trackIdField=null,b.push({name:"geojson-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:r}}))}r.startTimeField||r.endTimeField||(b.push({name:"geojson-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:r}}),r=null)}const e=k?(0,I.F0)(k):void 0,t=T.dateFields.length?{timeZoneIANA:_.n$}:null,n={warnings:b,featureErrors:[],layerDefinition:{...M,drawingInfo:e??void 0,templates:(0,I.e2)($),extent:void 0,geometryType:k,objectIdField:s,fields:v,hasZ:!!V,timeInfo:r,dateFieldsTimeReference:t}};u._queryEngine=new o.do({fieldsIndex:L.A.fromLayerJSON({fields:v,timeInfo:r,dateFieldsTimeReference:t}),geometryType:k,hasM:!1,hasZ:V,objectIdField:s,spatialReference:p,timeInfo:r,featureStore:new y.A({geometryType:k,hasM:!1,hasZ:V})});const E=u._queryEngine.fieldsIndex.requiredFields.indexOf(R);E>-1&&u._queryEngine.fieldsIndex.requiredFields.splice(E,1),u._createDefaultAttributes=(0,I.Vx)($,s);const j=yield u._createFeatures(N);u._objectIdGenerator=u._createObjectIdGenerator(u._queryEngine,j);const U=u._normalizeFeatures(j,n.featureErrors);u._queryEngine.featureStore.addMany(U);const{fullExtent:B,timeExtent:K}=yield u._queryEngine.fetchRecomputedExtents();if(n.layerDefinition.extent=B,K){const{start:A,end:G}=K;n.layerDefinition.timeInfo.timeExtent=[A,G]}return n})()}applyEdits(a){var c=this;return(0,O.A)(function*(){const{spatialReference:u,geometryType:b}=c._queryEngine;return yield Promise.all([(0,P.$1)(u,b),(0,d.Nk)(a.adds,u),(0,d.Nk)(a.updates,u)]),yield c._waitSnapshotComplete(),c._applyEdits(a)})()}queryFeatures(a={},c={}){var u=this;return(0,O.A)(function*(){return yield u._waitSnapshotComplete(),u._queryEngine.executeQuery(a,c.signal)})()}queryFeatureCount(a={},c={}){var u=this;return(0,O.A)(function*(){return yield u._waitSnapshotComplete(),u._queryEngine.executeQueryForCount(a,c.signal)})()}queryObjectIds(a={},c={}){var u=this;return(0,O.A)(function*(){return yield u._waitSnapshotComplete(),u._queryEngine.executeQueryForIds(a,c.signal)})()}queryExtent(a={},c={}){var u=this;return(0,O.A)(function*(){return yield u._waitSnapshotComplete(),u._queryEngine.executeQueryForExtent(a,c.signal)})()}querySnapping(a,c={}){var u=this;return(0,O.A)(function*(){return yield u._waitSnapshotComplete(),(0,l.J)(u._queryEngine,a,c.signal)})()}queryAttributeBins(a,c={}){var u=this;return(0,O.A)(function*(){return yield u._waitSnapshotComplete(),u._queryEngine.executeAttributeBinsQuery(a,c.signal)})()}refresh(a){var c=this;return(0,O.A)(function*(){c._loadOptions.customParameters=a,c._snapshotTask?.abort(),c._snapshotTask=(0,g.UT)(c._snapshotFeatures),c._snapshotTask.promise.then(N=>{c._queryEngine.featureStore.clear(),c._objectIdGenerator=c._createObjectIdGenerator(c._queryEngine,N);const D=c._normalizeFeatures(N);D&&c._queryEngine.featureStore.addMany(D)},N=>{c._queryEngine.featureStore.clear(),(0,S.zf)(N)||F.A.getLogger("esri.layers.GeoJSONLayer").error(new x.A("geojson-layer:refresh","An error occurred during refresh",{error:N}))}),yield c._waitSnapshotComplete();const{fullExtent:u,timeExtent:b}=yield c._queryEngine.fetchRecomputedExtents();return{extent:u,timeExtent:b}})()}_createFeatures(a){var c=this;return(0,O.A)(function*(){if(null==a)return[];const{geometryType:u,hasZ:b,objectIdField:N}=c._queryEngine,D=(0,m.bd)(a,{geometryType:u,hasZ:b,objectIdField:N});if(!(0,h.aI)(c._queryEngine.spatialReference,h.KK))for(const v of D)null!=v.geometry&&(v.geometry=(0,i.Ux)((0,d.Cv)((0,i.zv)(v.geometry,c._queryEngine.geometryType,c._queryEngine.hasZ,!1),h.KK,c._queryEngine.spatialReference)));return D})()}_waitSnapshotComplete(){var a=this;return(0,O.A)(function*(){if(a._snapshotTask&&!a._snapshotTask.finished){try{yield a._snapshotTask.promise}catch{}return a._waitSnapshotComplete()}})()}_fetch(a){var c=this;return(0,O.A)(function*(){const{url:u,customParameters:b}=c._loadOptions,N=(yield(0,w.A)(u??"",{responseType:"json",query:{...b},signal:a})).data;return(0,m.sO)(N),N})()}_normalizeFeatures(a,c){const{objectIdField:u,fieldsIndex:b}=this._queryEngine,N=[];for(const D of a){const v=this._createDefaultAttributes(),V=(0,P.MB)(b,v,D.attributes,!0);V?c?.push(V):(this._assignObjectId(v,D.attributes,!0),D.attributes=v,D.objectId=v[u],N.push(D))}return N}_applyEdits(a){var c=this;return(0,O.A)(function*(){const{adds:u,updates:b,deletes:N}=a,D={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};if(u?.length&&c._applyAddEdits(D,u),b?.length&&c._applyUpdateEdits(D,b),N?.length){for(const k of N)D.deleteResults.push((0,P.bP)(k));c._queryEngine.featureStore.removeManyById(N)}const{fullExtent:v,timeExtent:V}=yield c._queryEngine.fetchRecomputedExtents();return{extent:v,timeExtent:V,featureEditResults:D}})()}_applyAddEdits(a,c){const{addResults:u}=a,{geometryType:b,hasM:N,hasZ:D,objectIdField:v,spatialReference:V,featureStore:k,fieldsIndex:s}=this._queryEngine,p=[];for(const r of c){if(r.geometry&&b!==(0,C.$B)(r.geometry)){u.push((0,P.Yx)("Incorrect geometry type."));continue}const T=this._createDefaultAttributes(),R=(0,P.MB)(s,T,r.attributes);if(R)u.push(R);else{if(this._assignObjectId(T,r.attributes),r.attributes=T,null!=r.uid&&(a.uidToObjectId[r.uid]=r.attributes[v]),null!=r.geometry){const $=r.geometry.spatialReference??V;r.geometry=(0,d.Cv)((0,P.CR)(r.geometry,$),$,V)}p.push(r),u.push((0,P.bP)(r.attributes[v]))}}k.addMany((0,i.Di)([],p,b,D,N,v))}_applyUpdateEdits({updateResults:a},c){const{geometryType:u,hasM:b,hasZ:N,objectIdField:D,spatialReference:v,featureStore:V,fieldsIndex:k}=this._queryEngine;for(const s of c){const{attributes:p,geometry:r}=s,T=p?.[D];if(null==T){a.push((0,P.Yx)(`Identifier field ${D} missing`));continue}if(!V.has(T)){a.push((0,P.Yx)(`Feature with object id ${T} missing`));continue}const R=(0,i.oN)(V.getFeature(T),u,N,b);if(null!=r){if(u!==(0,C.$B)(r)){a.push((0,P.Yx)("Incorrect geometry type."));continue}const $=r.spatialReference??v;R.geometry=(0,d.Cv)((0,P.CR)(r,$),$,v)}if(p){const $=(0,P.MB)(k,R.attributes,p);if($){a.push($);continue}}V.add((0,i.E2)(R,u,N,b,D)),a.push((0,P.bP)(T))}}_createObjectIdGenerator(a,c){const u=a.fieldsIndex.get(a.objectIdField);if("esriFieldTypeString"===u.type)return()=>u.name+"-"+Date.now().toString(16);let b=Number.NEGATIVE_INFINITY;for(const N of c)N.objectId&&(b=Math.max(b,N.objectId));return b=Math.max(0,b)+1,()=>b++}_assignObjectId(a,c,u=!1){const b=this._queryEngine.objectIdField;a[b]=u&&b in c?c[b]:this._objectIdGenerator()}_checkProjection(a){return(0,O.A)(function*(){try{yield(0,d.Nk)(h.KK,a)}catch{throw new x.A("geojson-layer","Projection not supported")}})()}}},36761:(Y,Q,f)=>{f.d(Q,{BM:()=>V,bd:()=>k,sO:()=>v,xD:()=>h});var O=f(28250),w=f(5922),g=f(58701),x=f(42086),F=f(13682),S=f(86300);const C={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};function h(s){return C[s]}function*i(s){switch(s.type){case"Feature":yield s;break;case"FeatureCollection":for(const p of s.features)p&&(yield p)}}function*l(s){if(s)switch(s.type){case"Point":yield s.coordinates;break;case"LineString":case"MultiPoint":yield*s.coordinates;break;case"MultiLineString":case"Polygon":for(const p of s.coordinates)yield*p;break;case"MultiPolygon":for(const p of s.coordinates)for(const r of p)yield*r}}function d(s){for(const p of s)if(p.length>2)return!0;return!1}function I(s){let p=0;for(let r=0;r<s.length;r++){const T=s[r],R=s[(r+1)%s.length];p+=T[0]*R[1]-R[0]*T[1]}return p<=0}function P(s){const p=s[0],r=s[s.length-1];return p[0]===r[0]&&p[1]===r[1]&&p[2]===r[2]||s.push(p),s}function L(s,p,r){switch(p.type){case"LineString":return function q(s,p,r){return u(s,p.coordinates,r),s}(s,p,r);case"MultiLineString":return function Z(s,p,r){for(const T of p.coordinates)u(s,T,r);return s}(s,p,r);case"MultiPoint":return function _(s,p,r){return u(s,p.coordinates,r),s}(s,p,r);case"MultiPolygon":return function M(s,p,r){for(const T of p.coordinates){a(s,T[0],r);for(let R=1;R<T.length;R++)c(s,T[R],r)}return s}(s,p,r);case"Point":return function W(s,p,r){return N(s,p.coordinates,r),s}(s,p,r);case"Polygon":return function z(s,p,r){const T=p.coordinates;a(s,T[0],r);for(let R=1;R<T.length;R++)c(s,T[R],r);return s}(s,p,r)}}function a(s,p,r){const T=P(p);!function o(s){return!I(s)}(T)?u(s,T,r):b(s,T,r)}function c(s,p,r){const T=P(p);!function m(s){return I(s)}(T)?u(s,T,r):b(s,T,r)}function u(s,p,r){for(const T of p)N(s,T,r);s.lengths.push(p.length)}function b(s,p,r){for(let T=p.length-1;T>=0;T--)N(s,p[T],r);s.lengths.push(p.length)}function N(s,p,r){const[T,R,$]=p;s.coords.push(T,R),r.hasZ&&s.coords.push($||0)}function D(s){switch(typeof s){case"string":return(0,O.Br)(s)?"esriFieldTypeDate":"esriFieldTypeString";case"number":return"esriFieldTypeDouble";default:return"unknown"}}function v(s,p=4326){if(!s)throw new w.A("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==s.type&&"FeatureCollection"!==s.type)throw new w.A("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:s});const{crs:r}=s;if(!r)return;const T="string"==typeof r?r:"name"===r.type?r.properties.name:"EPSG"===r.type?r.properties.code:null,R=(0,g.oT)({wkid:p})?new RegExp(".*(CRS84H?|4326)$","i"):new RegExp(`.*(${p})$`,"i");if(!T||!R.test(T))throw new w.A("geojson:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:r})}function V(s,p={}){const r=[],T=new Set,R=new Set;let $,e=!1,t=null,n=!1,{geometryType:E=null}=p;for(const U of i(s)){const{geometry:B,properties:K,id:A}=U;if((!B||(E||(E=h(B.type)),h(B.type)===E))&&(e||(e=d(l(B))),n||(n=null!=A,n&&($=typeof A,K&&(t=Object.keys(K).filter(G=>K[G]===A)))),K&&t&&n&&null!=A&&(t.length>1?t=t.filter(G=>K[G]===A):1===t.length&&(t=K[t[0]]===A?t:[])),K))for(const G in K){if(T.has(G))continue;const J=D(K[G]);if("unknown"===J){R.add(G);continue}R.delete(G),T.add(G);const H=(0,S.rS)(G);H&&r.push({name:H,alias:G,type:J})}}const j=(0,S.rS)(1===t?.length&&t[0]||null)??void 0;if(j)for(const U of r)if(U.name===j&&(0,S.WA)(U)){U.type="esriFieldTypeOID";break}return{fields:r,geometryType:E,hasZ:e,objectIdFieldName:j,objectIdFieldType:$,unknownFields:Array.from(R)}}function k(s,p){return Array.from(function*y(s,p={}){const{geometryType:r,objectIdField:T}=p;for(const R of s){const{geometry:$,properties:e,id:t}=R;if($&&h($.type)!==r)continue;const n=e||{};let E;T&&(E=n[T],null==t||E||(n[T]=E=t)),yield new x.Om($?L(new F.A,$,p):null,n,null,E)}}(i(s),p))}},89962:(Y,Q,f)=>{f.d(Q,{F0:()=>F,Vx:()=>h,e2:()=>l,f:()=>y});var O=f(3248),w=f(77806),g=f(78200),x=f(48254);function F(d){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===d||"esriGeometryMultipoint"===d?x.Cb:"esriGeometryPolyline"===d?x.yM:x.WR}}}const S=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let C=1;function h(d,o){if((0,O.A)("esri-csp-restrictions"))return()=>({[o]:null,...d});try{let m=`this${i(o)} = null;`;for(const P in d)m+=`this${i(P)} = ${JSON.stringify(d[P])};`;const I=new Function(`\n      return class AttributesClass$${C++} {\n        constructor() {\n          ${m};\n        }\n      }\n    `)();return()=>new I}catch{return()=>({[o]:null,...d})}}function i(d){return S.test(d)?`.${d}`:`["${d}"]`}function l(d={}){return[{name:"New Feature",description:"",prototype:{attributes:(0,w.o8)(d)}}]}function y(d,o){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,isBranchVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:d},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:o,supportsDelete:o,supportsEditing:o,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryBins:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:o,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:g.F,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},queryAttributeBins:g.P,editing:{supportsGeometryUpdate:o,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1,zDefault:void 0}}}},51248:(Y,Q,f)=>{f.d(Q,{$1:()=>L,CR:()=>m,MB:()=>y,PC:()=>Z,Yx:()=>C,bP:()=>i});var O=f(10467),w=f(28250),g=f(58701),x=f(86300);class F{constructor(){this.code=null,this.description=null}}class S{constructor(M){this.error=new F,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=M}}function C(_){return new S(_)}class h{constructor(M){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=M}}function i(_){return new h(_)}const l=new Set;function y(_,M,W,z=!1){l.clear();for(const a in W){const c=_.get(a);if(!c)continue;const u=d(c,W[a]);if(l.add(c.name),c&&(z||c.editable)){const b=(0,x.CJ)(c,u);if(b)return C((0,x.uo)(b,c,u));M[c.name]=u}}for(const a of _.requiredFields??[])if(!l.has(a.name))return C(`missing required field "${a.name}"`);return null}function d(_,M){let W=M;return(0,x.WA)(_)&&"string"==typeof M?W=parseFloat(M):(0,x.yM)(_)&&null!=M&&"string"!=typeof M?W=String(M):(0,x.vE)(_)&&"string"==typeof M&&(W=(0,w._U)(M)),(0,x.WX)(W)}let o;function m(_,M){if(!_||!(0,g.fn)(M))return _;if("rings"in _||"paths"in _){if(null==o)throw new TypeError("geometry engine not loaded");return o.simplify(M,_)}return _}function P(){return(P=(0,O.A)(function*(){return null==o&&(o=yield Promise.all([f.e(3930),f.e(2076),f.e(4108)]).then(f.bind(f,27815))),o})).apply(this,arguments)}function L(_,M){return q.apply(this,arguments)}function q(){return q=(0,O.A)(function*(_,M){!(0,g.fn)(_)||"esriGeometryPolygon"!==M&&"esriGeometryPolyline"!==M||(yield function I(){return P.apply(this,arguments)}())}),q.apply(this,arguments)}const Z={supportsAutoIntervalBin:!0,supportsFixedIntervalBin:!0,supportsFixedBoundariesBin:!0,supportsDateBin:!0,supportsStackBy:!0,supportsSplitBy:!0,supportsNormalization:!0,supportedStatisticTypes:["COUNT","SUM","AVG","VAR","STDDEV","MIN","MAX","PERCENTILE_CONT","PERCENTILE_DISC","CentroidAggregate","EnvelopeAggregate","ConvexHullAggregate"],supportedNormalizationTypes:["field","log","naturalLog","percentOfTotal","squareRoot"]}},48254:(Y,Q,f)=>{f.d(Q,{Cb:()=>g,HW:()=>h,JR:()=>w,JZ:()=>S,WR:()=>F,b6:()=>i,fT:()=>O,nC:()=>C,yM:()=>x});const O=[252,146,31,255],w=[153,153,153,255],g={type:"esriSMS",style:"esriSMSCircle",size:6,color:O,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},x={type:"esriSLS",style:"esriSLSSolid",width:.75,color:O},F={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},S={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},C={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},h={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},i={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}}}]);