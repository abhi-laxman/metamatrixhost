"use strict";(self.webpackChunkAngularClient=self.webpackChunkAngularClient||[]).push([[5724],{55724:(Y,b,l)=>{l.r(b),l.d(b,{createArcadeExecutor:()=>ae,createArcadeProfile:()=>te});var g=l(10467),$=l(81098),m=l(61299),C=l(42970),y=(l(3248),l(23159)),O=l(5922),J=l(77806),T=l(35150),I=l(87257),x=l(29752),z=l(35940),N=l(73874),V=l(93327),H=l(48218);let d=null;function Q(e,n,a,o={}){const r=n.elementType,s="value",u="array"===r.type?[{name:s,type:r.type,elementType:r.elementType}]:"dictionary"===r.type?[{name:s,type:r.type,properties:r.properties}]:[{name:s,type:r.type}];return new C.A(e.map(c=>{const t={};return D(t,u,{[s]:c},a,o),t[s]}))}function X(e,n,a={}){const o=e instanceof V.A?new z.default({source:e.features,geometryType:e.geometryType,fields:e.fields,spatialReference:e.spatialReference}):e;return n.constructFeatureSet(o,a.spatialReference,null,!0,a.lruCache,a.interceptor)}function q(e,n,a={}){const{spatialReference:o,interceptor:r,lruCache:s}=a;return"string"==typeof e?n.createFeatureSetCollectionFromService(e,o,s,r):n.createFeatureSetCollectionFromMap(e,o,s,r)}function ee(e,n,a,o={}){const r={};return D(r,n.properties,e,a,o),new d.Dictionary(r)}function D(e,n,a,o,r={}){const s={};for(const u of Object.keys(a))s[u.toLowerCase()]=a[u];for(const u of n){const c=u.name.toLowerCase();if(r.variablesPreProcessed)e[c]=s[c];else switch(u.type){case"array":{const t=s[c];e[c]=null==t?null:Q(t,u,o,r);break}case"feature":{const t=s[c];e[c]=null==t?null:d.Feature.createFromGraphic(t,r?.timeZone);break}case"featureSet":{const t=s[c];e[c]=null==t?null:o?X(t,o,r):null;break}case"featureSetCollection":{const t=s[c];e[c]=null==t?null:o?q(t,o,r):null;break}case"dictionary":{const t=s[c];e[c]=null==t?null:ee(t,u,o,r);break}case"date":{const t=s[c];e[c]=t?t instanceof m.lY?t:r?.timeZone?m.lY.dateJSAndZoneToArcadeDate(t,r?.timeZone):m.lY.dateJSToArcadeDate(t):null;break}case"dateOnly":{const t=s[c];e[c]=t?t instanceof I.n?t:I.n.fromReader(t):null;break}case"time":{const t=s[c];e[c]=t?t instanceof x.k?t:x.k.fromReader(t):null;break}case"knowledgeGraph":case"geometry":case"boolean":case"text":case"number":e[c]=s[c];break;case"voxel":{const t=s[c];e[c]=null==t?null:new d.Voxel(t,r?.timeZone);break}}}}function R(e,n){for(const a of e)n.push(a),"dictionary"===a.type&&R(a.properties,n);return n}function L(e,n,a,o,r){const{spatialReference:s,interceptor:u,lruCache:c,console:t,abortSignal:v,timeZone:p,services:M={portal:N.A.getDefault()}}=a,A={vars:{},spatialReference:s,interceptor:u,timeZone:p,lrucache:c,useAsync:r,services:M,console:t,abortSignal:v};return n&&D(A.vars,e.variables,n,o,a),A}function h(e,n){switch(n.getArcadeType(e)){case"number":case"text":case"boolean":case"point":case"polygon":case"polyline":case"multipoint":case"extent":return e;case"date":return e.toJSDate();case"time":case"dateOnly":return e.toString();case"feature":{const a=e,o="geometry"in a?a.geometry():null,r="readAttributes"in a?a.readAttributes():a.attributes;return new $.A({geometry:o,attributes:r})}case"dictionary":{const a=e,o=a.attributes,r={};for(const s of Object.keys(o))r[s]=h(a.field(s),n);return r}case"array":return("toArray"in e?e.toArray():e).map(a=>h(a,n))}return e}const U={variables:[{name:"$feature",type:"feature"},{name:"$layer",type:"featureSet"},{name:"$datastore",type:"featureSetCollection"},{name:"$map",type:"featureSetCollection"},{name:"$userInput",type:"geometry"},{name:"$graph",type:"knowledgeGraph"},{name:"$view",type:"dictionary",properties:[{name:"scale",type:"number"},{name:"timeProperties",type:"dictionary",properties:[{name:"currentStart",type:"date"},{name:"currentEnd",type:"date"},{name:"startIncluded",type:"boolean"},{name:"endIncluded",type:"boolean"}]}]}]},j={variables:[{name:"$feature",type:"feature"},{name:"$aggregatedFeatures",type:"featureSet"},{name:"$view",type:"dictionary",properties:[{name:"scale",type:"number"},{name:"timeProperties",type:"dictionary",properties:[{name:"currentStart",type:"date"},{name:"currentEnd",type:"date"},{name:"startIncluded",type:"boolean"},{name:"endIncluded",type:"boolean"}]}]}]},w={variables:[{name:"$voxel",type:"voxel"}]},W=new Map([["aggregate-field",{variables:[{name:"$feature",type:"feature"}]}],["form-constraint",{variables:[{name:"$feature",type:"feature"}]}],["feature-z",{variables:[{name:"$feature",type:"feature"}]}],["field-calculation",{variables:[{name:"$feature",type:"feature"},{name:"$datastore",type:"featureSetCollection"}]}],["form-calculation",{variables:[{name:"$feature",type:"feature"},{name:"$originalFeature",type:"feature"},{name:"$layer",type:"featureSet"},{name:"$featureSet",type:"featureSet"},{name:"$datastore",type:"featureSetCollection"},{name:"$map",type:"featureSetCollection"},{name:"$editContext",type:"dictionary",properties:[{name:"editType",type:"text"}]}]}],["labeling",{variables:[{name:"$feature",type:"feature"},{name:"$view",type:"dictionary",properties:[{name:"scale",type:"number"},{name:"timeProperties",type:"dictionary",properties:[{name:"currentStart",type:"date"},{name:"currentEnd",type:"date"},{name:"startIncluded",type:"boolean"},{name:"endIncluded",type:"boolean"}]}]}]}],["popup",U],["popup-element",U],["popup-feature-reduction",j],["popup-element-feature-reduction",j],["visualization",{variables:[{name:"$feature",type:"feature"},{name:"$view",type:"dictionary",properties:[{name:"scale",type:"number"},{name:"timeProperties",type:"dictionary",properties:[{name:"currentStart",type:"date"},{name:"currentEnd",type:"date"},{name:"startIncluded",type:"boolean"},{name:"endIncluded",type:"boolean"}]}]}]}],["popup-voxel",w],["popup-element-voxel",w]]);function te(e){"feature-reduction-popup"===e?((0,y.io)(T.A.getLogger("esri.arcade"),'profile name: "feature-reduction-popup"',{replacement:'"popup-feature-reduction"',version:"4.32",warnOnce:!0}),e="popup-feature-reduction"):"feature-reduction-popup-element"===e&&((0,y.io)(T.A.getLogger("esri.arcade"),'profile name: "feature-reduction-popup-element"',{replacement:'"popup-element-feature-reduction"',version:"4.32",warnOnce:!0}),e="popup-element-feature-reduction");const n=W.get(e);if(!n){const a=Array.from(W.keys()).map(o=>`'${o}'`).join(", ");throw new O.A("createArcadeProfile:invalid-profile-name",`Invalid profile name '${e}'. You must specify one of the following values: ${a}`)}return(0,J.o8)(n)}function ae(e,n){return S.apply(this,arguments)}function S(){return S=(0,g.A)(function*(e,n,a={}){d||(d=yield(0,H.lw)());const{arcade:o,arcadeUtils:r}=d,{loadScriptDependencies:s,referencesMember:u,scriptIsAsync:c}=o,t=R(n.variables,[]),v=t.filter(i=>"featureSet"===i.type||"featureSetCollection"===i.type).map(i=>i.name.toLowerCase()),p=o.parseScript(e,v);if(!p)throw new O.A("arcade:invalid-script","Unable to create SyntaxTree");const M=r.extractFieldNames(p),A=o.scriptTouchesGeometry(p),B=t.map(i=>i.name.toLowerCase()).filter(i=>u(p,i)),f=c(p,v);yield s(p,f,v);const K={vars:{},spatialReference:null,useAsync:f};for(const i of B)K.vars[i]="any";const{lruCache:F}=a,k=o.compileScript(p,K),Z=o.featureSetUtils(),{services:re}=a;return{execute:(i,E={})=>{if(f)throw new O.A("arcade:invalid-execution-mode","Cannot execute the script in synchronous mode");const _=k(L(n,i,{lruCache:F,...E},Z,f));return E.rawOutput?_:h(_,r)},executeAsync:(i=(0,g.A)(function*(E,_={}){const G=yield k(L(n,E,{lruCache:F,services:re,..._},Z,f));return _.rawOutput?G:h(G,r)}),function(_){return i.apply(this,arguments)}),isAsync:f,variablesUsed:B,fieldsUsed:M,geometryUsed:A,syntaxTree:p};var i}),S.apply(this,arguments)}},42970:(Y,b,l)=>{l.d(b,{A:()=>g});class g{constructor(m=[]){this._elements=m}length(){return this._elements.length}get(m){return this._elements[m]}toArray(){return this.slice()}slice(m=0,C=this.length()){const P=[];for(let y=m;y<C;y++)P.push(this.get(y));return P}}}}]);