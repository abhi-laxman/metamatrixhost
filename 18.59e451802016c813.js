"use strict";(self.webpackChunkAngularClient=self.webpackChunkAngularClient||[]).push([[18],{40018:(Qn,wn,G)=>{G.d(wn,{DO:()=>zn,FT:()=>O,Hh:()=>On,OM:()=>X,OO:()=>Nn,Ps:()=>Fn,Wo:()=>vn,_I:()=>on,_l:()=>rn,dK:()=>Jn,eh:()=>cn,l0:()=>Un,t$:()=>Yn,uk:()=>In,vI:()=>pn,xh:()=>$});var V,n,An=G(10467),Sn=G(89952),hn=G(5922),L=G(82663),I=G(28067),w=G(33658),N=G(1749),H=G(55861),T=G(13970),xn=G(32034),Gn=G(58701);function $(n,t,o){return!(0,T.canProjectWithoutEngine)(n,t,o)}function j(n,t,o){const i=$(n,t,o);if(i&&!(0,T.isLoaded)())throw new hn.A("rasterprojectionhelper-project","projection engine is not loaded");return i}(n=V||(V={}))[n.None=0]="None",n[n.North=1]="North",n[n.South=2]="South",n[n.Both=3]="Both";const mn=(n,t,o,i=0)=>{if(1===o[0])return[0,0];let r=1,e=-1,s=1,f=-1;for(let u=0;u<n.length;u+=2)isNaN(n[u])||(r=r>n[u]?n[u]:r,e=e>n[u]?e:n[u],s=s>n[u+1]?n[u+1]:s,f=f>n[u+1]?f:n[u+1]);const{cols:a,rows:l}=t,c=(e-r)/a/o[0],M=(f-s)/l/o[1],m=2*i;let h=0,x=!1,p=[0,0];for(let u=0;u<a-3;u++){for(let P=0;P<l-3;P++){const y=u*l*2+2*P,d=(n[y+1]+n[y+5]+n[y+4*l+1]+n[y+4*l+5])/4,_=Math.abs(((n[y]+n[y+4]+n[y+4*l]+n[y+4*l+4])/4-n[y+2*l+2])/c),E=Math.abs((d-n[y+2*l+3])/M);if(_+E>h&&(h=_+E,p=[_,E]),m&&h>m){x=!0;break}}if(x)break}return p},Tn={3395:20037508.342789244,3410:17334193.943686873,3857:20037508.342788905,3975:17367530.445161372,4087:20037508.342789244,4088:20015108.787169147,6933:17367530.445161372,32662:20037508.342789244,53001:20015086.79602057,53002:10007543.39801029,53003:20015086.79602057,53004:20015086.79602057,53016:14152803.599503474,53017:17333573.624304302,53034:20015086.79602057,53079:20015114.352186374,53080:20015114.352186374,54001:20037508.342789244,54002:10018754.171394624,54003:20037508.342789244,54004:20037508.342789244,54016:14168658.027268292,54017:17367530.44516137,54034:20037508.342789244,54079:20037508.342789244,54080:20037508.342789244,54100:20037508.342789244,54101:20037508.342789244},B=32,U=4,Q=U,Z=new Map,q=new Map,K=500,bn=39.37,Cn=96;let F=null;function On(){return nn.apply(this,arguments)}function nn(){return(nn=(0,An.A)(function*(){F&&(0,T.isLoaded)()||((0,T.isLoaded)()||(yield(0,T.load)()),F=yield Promise.all([G.e(3930),G.e(5885)]).then(G.bind(G,46041)))})).apply(this,arguments)}function pn(n,t,o){return j(n.spatialReference,t),o?(0,T.getTransformation)(t,n.spatialReference,n):(0,T.getTransformation)(n.spatialReference,t,n)}function vn(n,t,o,i=null){const r=n.spatialReference;if(!r||!t||r.equals(t))return n;j(r,t,i);const e=o.center,s=new I.A({xmin:e.x-n.x/2,xmax:e.x+n.x/2,ymin:e.y-n.y/2,ymax:e.y+n.y/2,spatialReference:r}),f=(0,T.project)(s,t,i),a=O(t);return null==f||null!=a&&f.width>=a?Y(n,r,t):{x:f.width,y:f.height}}function Y(n,t,o){const i=(0,L.GA)(t)/(0,L.GA)(o);return{x:n.x*i,y:n.y*i}}function tn(n,t,o){const{spatialReference:i}=o;if(!i||!t||i.equals(t))return n;if(i.isGeographic&&t.isGeographic)return Y(n,i,t);if(j(i,t),!F)throw new hn.A("raster-projection-helper:project-dataset-resolution","geometry engine is not loaded");let{x:r,y:e}=n;const s=(r+e)/2*(0,L.GA)(i);let f=1;s>30&&(f=30/s,r*=f,e*=f);const a=256,l=r*a/2,c=e*a/2,{x:M,y:m}=o.center,h=[];for(let R=0;R<=a;R++)h.push([M-l,m-c+R*e]);for(let R=1;R<=a;R++)h.push([M-l+R*r,m+c]);for(let R=1;R<=a;R++)h.push([M+l,m+c-R*e]);for(let R=1;R<a;R++)h.push([M+l-R*r,m-c]);h.push(h[0]);const x=new H.A({rings:[h],spatialReference:i}),p=(0,T.project)(x,t);if(!p)return Y(n,i,t);const u=p.extent,P=O(t);if(null==u||null!=P&&u.width>=P)return Y(n,i,t);const y=F.planarArea(p),d=Math.sqrt(y/(r*e*a*a))/f,_={x:u.width/f/a,y:u.height/f/a},E={x:r*d,y:e*d},C=_.x*_.y;return Math.abs(C-E.x*E.y)/C<.1?_:E}function en(n,t){return("number"==typeof n?n:(n.x+n.y)/2)*(0,L.GA)(t)*Cn*bn}function Nn(n,t){const{pixelSize:o,extent:i}=n;return en(tn(o,t,i),t)}function b(n,t=.01){return(0,L.GA)(n)?t/(0,L.GA)(n):0}function on(n,t,o=null,i=!0){const r=n.spatialReference;if(r.equals(t))return n;j(r,t,o);const e=(0,T.project)(n,t,o);return i&&e&&gn([n],[e],r,t),e}function gn(n,t,o,i){const r=J(o,!0),e=J(i,!0),s=b(o,K),f=b(i,K);if(s&&null!=r&&null!=e)for(let a=0;a<n.length;a++){const l=t[a];if(!l)continue;const{x:c}=n[a],{x:M}=l;M>=e[1]-f&&Math.abs(c-r[0])<s?l.x-=e[1]-e[0]:M<=e[0]+f&&Math.abs(c-r[1])<s&&(l.x+=e[1]-e[0])}}function W(n,t=!1){let o=n.wkid||n.wkt2||n.wkt;if(!o||n.isGeographic)return null;if(o=String(o),Z.has(o)){const s=Z.get(o);return t?s?.gcs:s?.pcs}const i=n.wkid?w.P.coordsys(n.wkid):w.P.fromString(n.isGeographic?w.a.PE_TYPE_GEOGCS:w.a.PE_TYPE_PROJCS,n.wkt2||n.wkt),r=dn(i,b(n,1e-4)),e=dn(i,0,!0);return Z.set(o,{pcs:r,gcs:e}),t?e:r}function dn(n,t=0,o=!1){const i=w.j.generate(n),r=o?n.horizonGcsGenerate():n.horizonPcsGenerate();if(!i||!r?.length)return null;let e=!1,s=r.find(u=>1===u.getInclusive()&&1===u.getKind());if(!s){if(s=r.find(u=>1===u.getInclusive()&&0===u.getKind()),!s)return null;e=!0}const f=o?0:(2===i.getNorthPoleLocation()?1:0)|(2===i.getSouthPoleLocation()?2:0),a=i.isPannableRectangle(),l=s.getCoord();if(e)return{isEnvelope:e,isPannable:a,vertices:l,coef:null,bbox:[l[0][0]-t,l[0][1]-t,l[1][0]+t,l[1][1]+t],poleLocation:f};let c=0;const M=[];let[m,h]=l[0],[x,p]=l[0];for(let u=0,P=l.length;u<P;u++){c++,c===P&&(c=0);const[y,g]=l[u],[d,_]=l[c];if(_===g)M.push([y,d,g,_,2]);else{const E=(d-y)/(_-g||1e-4),C=y-E*g;M.push(g<_?[E,C,g,_,0]:[E,C,_,g,1])}m=m<y?m:y,h=h<g?h:g,x=x>y?x:y,p=p>g?p:g}return{isEnvelope:!1,isPannable:a,vertices:l,coef:M,bbox:[m,h,x,p],poleLocation:f}}function sn(n,t){const o=[],{cols:i,rows:r,xres:e,yres:s,usePixelCenter:f}=n;let{xmin:a,ymax:l}=n;if(f&&(a+=e/2,l-=s/2),null==t){for(let h=0;h<i;h++)for(let x=0;x<r;x++)o.push([a+e*h,l-s*x]);return{points:o}}const c=new Uint8Array(i*r);if(t.isEnvelope){const{bbox:[h,x,p,u]}=t;for(let P=0,y=0;P<i;P++){const g=a+e*P,d=t.isPannable||g>=h&&g<=p;for(let _=0;_<r;_++,y++){const E=l-s*_;d&&E>=x&&E<=u&&(o.push([g,E]),c[y]=1)}}return{points:o,mask:c}}const M=t.coef,m=[];for(let h=0;h<r;h++){const x=l-s*h,p=[],u=[];for(let y=0;y<M.length;y++){const[g,d,_,E,C]=M[y];x===_&&_===E?(p.push(g),p.push(d),u.push(2),u.push(2)):x>=_&&x<=E&&(p.push(g*x+d),u.push(C))}let P=p;if(p.length>2){let y=2===u[0]?0:u[0],g=p[0];P=[];for(let d=1;d<u.length;d++)2===u[d]&&d!==u.length-1||(u[d]!==y&&(P.push(0===y?Math.min(g,p[d-1]):Math.max(g,p[d-1])),y=u[d],g=p[d]),d===u.length-1&&P.push(0===u[d]?Math.min(g,p[d]):Math.max(g,p[d])));P.sort((d,_)=>d-_)}else p[0]>p[1]&&(P=[p[1],p[0]]);m.push(P)}for(let h=0,x=0;h<i;h++){const p=a+e*h;for(let u=0;u<r;u++,x++){const P=l-s*u,y=m[u];if(2===y.length)p>=y[0]&&p<=y[1]&&(o.push([p,P]),c[x]=1);else if(y.length>2){let g=!1;for(let d=0;d<y.length;d+=2)if(p>=y[d]&&p<=y[d+1]){g=!0;break}g&&(o.push([p,P]),c[x]=1)}}}return{points:o,mask:c}}function Mn(n,t){const o=O(n[0].spatialReference);if(n.length<2||null==o||(t=t??b(n[0].spatialReference),1===(n=n.filter(f=>f.width>t)).length))return n[0];let{xmin:i,xmax:r,ymin:e,ymax:s}=n[0];for(let f=1;f<n.length;f++){const a=n[f];r=a.xmax+o*f,e=Math.min(e,a.ymin),s=Math.max(s,a.ymax)}return new I.A({xmin:i,xmax:r,ymin:e,ymax:s,spatialReference:n[0].spatialReference})}function rn(n,t,o=null,i=!0){const r=n.spatialReference;if(r.equals(t))return n;const e=X(n),s=O(r,!0),f=O(t);if(0===e||null==s||null==f){const l=an(n,t,o,i);if(null==s&&null!=f&&Math.abs(l.width-f)<b(t)&&(0,T.isLoaded)()){const c=W(r);if(null!=c&&c.poleLocation===V.None&&n.width<(c.bbox[2]-c.bbox[0])/2)return function Dn(n,t){const o=O(t);if(null==o)return null;let{xmin:i,ymin:r,xmax:e,ymax:s}=n;const f=n.spatialReference,a=new H.A({spatialReference:f,rings:[[[i,r],[e,r],[e,s],[i,s],[i,r]]]}),l=(0,T.project)(a,t);if(2!==l.rings.length||!l.rings[0].length||!l.rings[1].length)return null;const{rings:c}=l,M=b(f),m=new I.A({spatialReference:t});for(let h=0;h<2;h++){i=e=c[h][0][0],r=s=c[h][0][1];for(let x=0;x<c[h].length;x++)i=i>c[h][x][0]?c[h][x][0]:i,e=e<c[h][x][0]?c[h][x][0]:e,r=r>c[h][x][1]?c[h][x][1]:r,s=s<c[h][x][1]?c[h][x][1]:s;if(0===h)m.ymin=r,m.ymax=s,m.xmin=i,m.xmax=e;else if(m.ymin=Math.min(m.ymin,r),m.ymax=Math.max(m.ymax,s),Math.abs(e-o/2)<M)m.xmin=i,m.xmax=m.xmax+o;else{if(!(Math.abs(i+o/2)<M))return null;m.xmax=e+o}}return m}(n,t)||l}return l}const a=n.clone().normalize();if(1===a.length&&n.xmax<s&&n.xmax-s/2>b(r)){const{xmin:l,xmax:c}=n;for(let M=0;M<=e;M++)a[M]=new I.A({xmin:0===M?l:-s/2,xmax:M===e?c-s*M:s/2,ymin:n.ymin,ymax:n.ymax,spatialReference:r})}return Mn(a.map(l=>an(l,t,o,i)).filter(Sn.Ru))}function In(n,t,o){if("extent"===n.type){const{xmin:i,ymin:r,xmax:e,ymax:s,spatialReference:f}=n;n=new H.A({rings:[[[i,s],[e,s],[e,r],[i,r],[i,s]]],spatialReference:f})}return n.spatialReference.equals(t)?n:(j(n.spatialReference,t,o),(0,T.project)(n,t,o))}function an(n,t,o=null,i=!0,r=!0){const e=n.spatialReference;if(e.equals(t)||!t)return n;j(e,t,o);const s=(0,T.project)(n,t,o);if(r&&t.isWebMercator&&s&&(s.ymax=Math.min(20037508.342787,s.ymax),s.ymin=Math.max(-20037508.342787,s.ymin),s.ymin>=s.ymax))return null;if(!i||!s)return s;const f=J(e,!0),a=J(t,!0);if(null==f||null==a)return s;const l=b(e,.001),c=b(e,K),M=b(t,.001);if(Math.abs(s.xmin-a[0])<M&&Math.abs(s.xmax-a[1])<M){const m=Math.abs(n.xmin-f[0]),h=Math.abs(f[1]-n.xmax);if(m<l&&h>c){s.xmin=a[0];const x=[];x.push(new N.A(n.xmax,n.ymin,e)),x.push(new N.A(n.xmax,(n.ymin+n.ymax)/2,e)),x.push(new N.A(n.xmax,n.ymax,e));const p=x.map(u=>on(u,t,o)).filter(u=>!isNaN(u?.x)).map(u=>u.x);s.xmax=Math.max.apply(null,p)}if(h<l&&m>c){s.xmax=a[1];const x=[];x.push(new N.A(n.xmin,n.ymin,e)),x.push(new N.A(n.xmin,(n.ymin+n.ymax)/2,e)),x.push(new N.A(n.xmin,n.ymax,e));const p=x.map(u=>on(u,t,o)).filter(u=>!isNaN(u?.x)).map(u=>u.x);s.xmin=Math.min.apply(null,p)}}else{const m=b(t,.001);Math.abs(s.xmin-a[0])<m&&(s.xmin=a[0]),Math.abs(s.xmax-a[1])<m&&(s.xmax=a[1])}return s}function O(n,t=!1){return n?n.isWebMercator?2*(t?20037508.342787:20037508.342788905):n.wkid&&n.isGeographic?360:2*Tn[n.wkid]||null:null}function J(n,t=!1){if(n.isGeographic)return[-180,180];const o=O(n,t);return null!=o?[-o/2,o/2]:null}function Pn(n,t,o,i){let r=(n-t)/o;return r-Math.floor(r)!=0?r=Math.floor(r):i&&(r-=1),r}function X(n,t=!1){const o=O(n.spatialReference);if(null==o)return 0;const i=t?0:-o/2,r=b(n.spatialReference),e=!t&&Math.abs(n.xmax-o/2)<r?o/2:n.xmax,s=!t&&Math.abs(n.xmin+o/2)<r?-o/2:n.xmin;return Pn(e,i,o,!0)-Pn(s,i,o,!1)}function zn(n){const t=n.storageInfo.origin.x,o=O(n.spatialReference,!0);if(null==o)return{originX:t,halfWorldWidth:null,pyramidsInfo:null};const i=o/2,{nativePixelSize:r,storageInfo:e,extent:s}=n,{maximumPyramidLevel:f,blockWidth:a,pyramidScalingFactor:l}=e;let c=r.x;const M=[],m=null!=n.transform&&"gcs-shift"===n.transform.type,h=t+(m?0:i),x=m?o-t:i-t;for(let p=0;p<=f;p++){const u=(s.xmax-t)/c/a,P=u-Math.floor(u)==0?u:Math.ceil(u),y=x/c/a,g=y-Math.floor(y)==0?y:Math.ceil(y),d=Math.floor(h/c/a),_=Math.round(h/c)%a,E=(a-Math.round(x/c)%a)%a;M.push({resolutionX:c,blockWidth:a,datasetColumnCount:P,worldColumnCountFromOrigin:g,leftMargin:_,rightPadding:E,originColumnOffset:d}),c*=l}return{originX:t,halfWorldWidth:i,pyramidsInfo:M,hasGCSSShiftTransform:m}}function Un(n){const t=n.isAdaptive&&null==n.spacing;let o=n.spacing||[B,B],i=ln(n),r={cols:i.size[0]+1,rows:i.size[1]+1};const e=i.outofBoundPointCount>0&&i.outofBoundPointCount<i.offsets.length/2;let s=i.outofBoundPointCount===i.offsets.length/2||t&&e?[0,0]:mn(i.offsets,r,o,Q);const a=n.projectedExtent.spatialReference,l=n.srcBufferExtent.spatialReference;if(t&&(e||(s[0]+s[1])/2>Q)&&($(a,l,n.datumTransformation)&&(a.isGeographic||W(a)),o=[U,U],i=ln({...n,spacing:o}),r={cols:i.size[0]+1,rows:i.size[1]+1},s=mn(i.offsets,r,o,Q)),i.error=s,o[0]>1&&(i.coefficients=_n(i.offsets,r,e)),n.includeGCSGrid&&!a.isGeographic&&!a.isWebMercator)if(l.isGeographic)i.gcsGrid={offsets:i.offsets,coefficients:i.coefficients,spacing:o};else{const c=W(a);if(null!=c&&!c.isEnvelope){const M=function Bn(n){if(!n||n.isGeographic)return n;const t=String(n.wkid||n.wkt2||n.wkt);let o;return q.has(t)?o=q.get(t):(o=(n.wkid?w.P.coordsys(n.wkid):w.P.fromString(w.a.PE_TYPE_PROJCS,n.wkt2||n.wkt)).getGeogcs().getCode(),q.set(t,o)),new xn.A({wkid:o})}(a),m=rn(n.projectedExtent,M),{offsets:h}=ln({...n,srcBufferExtent:m,spacing:o}),x=_n(h,r,e);i.gcsGrid={offsets:h,coefficients:x,spacing:o}}}return i}function ln(n){const{projectedExtent:t,srcBufferExtent:o,pixelSize:i,datumTransformation:r,rasterTransform:e}=n,s=t.spatialReference,f=o.spatialReference,a=j(s,f),{xmin:l,ymin:c,xmax:M,ymax:m}=t,h=O(f),x=null!=h&&(n.hasWrapAround||"gcs-shift"===e?.type),p=n.spacing||[B,B],u=p[0]*i.x,P=p[1]*i.y,y=1===p[0],g=Math.ceil((M-l)/u-.1/p[0])+(y?0:1),d=Math.ceil((m-c)/P-.1/p[1])+(y?0:1),_=function jn(n){const{inSR:t,outSR:o,datumTransformation:i,preferPE:r}=n;if(t.equals(o)){const{points:e}=sn(n,null);return e}return t.isWebMercator&&o.isWGS84||t.isWGS84&&o.isWebMercator?function Ln(n){const{cols:t,rows:o,xres:i,yres:r,usePixelCenter:e,inSR:s,outSR:f}=n;let{xmin:a,ymax:l}=n;e&&(a+=i/2,l-=r/2);const c=[],M=[],m=Math.max(t,o);for(let x=0;x<m;x++){const p=a+i*Math.min(t,x),u=l-r*Math.min(o,x),P=(0,T.project)(new N.A({x:p,y:u,spatialReference:s}),f);x<=t&&c.push(P.x),x<=o&&M.push(P.y)}const h=[];for(let x=0;x<t;x++)for(let p=0;p<o;p++)h.push([c[x],M[p]]);return h}(n):j(t,o,i)&&r&&(t.isGeographic||null!=W(t))?function yn(n){const{inSR:t,outSR:o,datumTransformation:i}=n,r=W(t),{points:e,mask:s}=sn(n,r);if(!t.isGeographic){const a=t.wkid?w.P.coordsys(t.wkid):w.P.fromString(t.isGeographic?w.a.PE_TYPE_GEOGCS:w.a.PE_TYPE_PROJCS,t.wkt2||t.wkt);w.g.projToGeog(a,e.length,e)}if(null!=i&&i.steps.length){let a;if(o.isGeographic&&(a=e.map(([c])=>c>179.9955?1:c<-179.9955?-1:0)),i.steps.forEach(c=>{const M=c.wkid?w.P.geogtran(c.wkid):w.P.fromString(w.a.PE_TYPE_GEOGTRAN,c.wkt);w.h.geogToGeog(M,e.length,e,null,c.isInverse?w.a.PE_TRANSFORM_2_TO_1:w.a.PE_TRANSFORM_1_TO_2)}),a)for(let c=0;c<e.length;c++){const M=a[c],m=e[c][0],h=m>179.9955?1:m<-179.9955?-1:0;M&&h&&M!==h&&(e[c][0]=M>0?m+360:m-360)}}if(!o.isGeographic){const a=W(o,!0);!function Wn(n,t){const[o,i]=t;for(let r=0;r<n.length;r++){const e=n[r][1];(e<o||e>i)&&(n[r]=[NaN,NaN])}}(e,null!=a&&a.isEnvelope?[a.bbox[1],a.bbox[3]]:[-90,90]);const c=o.wkid?w.P.coordsys(o.wkid):w.P.fromString(o.isGeographic?w.a.PE_TYPE_GEOGCS:w.a.PE_TYPE_PROJCS,o.wkt2||o.wkt);w.g.geogToProj(c,e.length,e)}let f=e;if(s&&e.length!==s.length){f=[];for(let a=0,l=0;a<s.length;a++)f.push(s[a]?e[l++]:[NaN,NaN])}return f}(n):function kn(n){const{points:t}=sn(n,null),{inSR:o,outSR:i,datumTransformation:r}=n,e=t.map(f=>new N.A(f[0],f[1],o)),s=(0,T.project)(e,i,r);return r&&gn(e,s,o,i),s.map(f=>f?[f.x,f.y]:[NaN,NaN])}(n)}({cols:g,rows:d,xmin:l,ymax:m,xres:u,yres:P,inSR:s,outSR:f,datumTransformation:r,preferPE:p[0]<=U,usePixelCenter:y}),E=[];let C,R=0;const S=y?-1:NaN,{xmin:v,xmax:D,ymax:fn,width:Xn,height:Hn}=o,Vn=b(f,K),$n=null!=h&&v>0&&D>h/2;let Rn=!1;if(a){const k=W(s);Rn=null!=k&&k.poleLocation>0}for(let k=0;k<g;k++){const un=[];for(let z=0;z<d;z++){let A=_[k*d+z];if(x&&A[0]>D&&A[0]>h/2-Vn?A[0]-=h:x&&0===k&&A[0]<0&&$n&&!e&&(A[0]+=h),!A||isNaN(A[0])||isNaN(A[1]))E.push(S),E.push(S),un.push(null),R++;else{if(e){const En=e.inverseTransform(new N.A({x:A[0],y:A[1],spatialReference:f}));A=[En.x,En.y]}un.push(A),k>0&&x&&C[z]&&A[0]<C[z][0]&&(A[0]+=h,Rn&&A[0]>D&&A[0]>h&&(A[0]-=h)),E.push((A[0]-v)/Xn),E.push((fn-A[1])/Hn)}}C=un}return{offsets:E,error:null,coefficients:null,outofBoundPointCount:R,spacing:p,size:y?[g,d]:[g-1,d-1]}}function _n(n,t,o){const{cols:i,rows:r}=t,e=new Float32Array((i-1)*(r-1)*2*6),s=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]),f=new Float32Array([-1,1,0,0,-1,1,1,0,0]);for(let a=0;a<i-1;a++){for(let l=0;l<r-1;l++){let c=a*r*2+2*l;const M=n[c],m=n[c+1],h=n[c+2],x=n[c+3];c+=2*r;const p=n[c],u=n[c+1],P=n[c+2],y=n[c+3];let g=0,d=12*(l*(i-1)+a);for(let _=0;_<3;_++)e[d++]=s[g++]*M+s[g++]*h+s[g++]*P;g=0;for(let _=0;_<3;_++)e[d++]=s[g++]*m+s[g++]*x+s[g++]*y;g=0;for(let _=0;_<3;_++)e[d++]=f[g++]*M+f[g++]*p+f[g++]*P;g=0;for(let _=0;_<3;_++)e[d++]=f[g++]*m+f[g++]*u+f[g++]*y}if(o)for(let l=0;l<e.length;l++)isNaN(e[l])&&(e[l]=-1)}return e}function Fn(n){const{spatialReference:t}=n,o=(0,Gn.Vp)(t);if(!o)return n;const[i,r]=o.valid,e=r-i;let s=0;return n.xmin<i?s=Math.ceil((i-n.xmin)/e):n.xmin>r&&(s=-Math.ceil((n.xmin-r)/e)),new I.A({spatialReference:n.spatialReference,xmin:n.xmin+s*e,ymin:n.ymin,xmax:n.xmax+s*e,ymax:n.ymax})}function Yn(n,t,o){const{storageInfo:i,pixelSize:r}=t;let e=0,s=!1;const{pyramidResolutions:f}=i,a="mixed"===i.tileInfo.format?.toLowerCase()?Math.max(1,Math.min(3,i.tileInfo.dpi/96)):1,l=(n.x+n.y)/2/a;if(null!=f&&f.length){const x=f[f.length-1],p=(x.x+x.y)/2,u=(r.x+r.y)/2;if(l<=u)e=0;else if(l>=p)e=f.length,s=l/p>8;else{let y,g=u;for(let d=1;d<=f.length;d++){if(y=(f[d-1].x+f[d-1].y)/2,l<=y){l===y?e=d:"down"===o?(e=d-1,s=l/g>8):e="up"===o||l-g>y-l||l/g>2?d:d-1;break}g=y}}const P=0===e?r:f[e-1];return s&&Math.min(P.x,P.y)*(0,L.GA)(t.spatialReference)>19567&&(s=!1),{pyramidLevel:e,pyramidResolution:new N.A({x:P.x,y:P.y,spatialReference:t.spatialReference}),excessiveReading:s}}const c=Math.log(n.x/r.x)/Math.LN2,M=Math.log(n.y/r.y)/Math.LN2,m=t.storageInfo.maximumPyramidLevel||0;e="down"===o?Math.floor(Math.min(c,M)):"up"===o?Math.ceil(Math.max(c,M)):Math.round((c+M)/2),e<0?e=0:e>m&&(s=e>m+3,e=m);const h=2**e;return{pyramidLevel:e,pyramidResolution:new N.A({x:h*t.nativePixelSize.x,y:h*t.nativePixelSize.y,spatialReference:t.spatialReference}),excessiveReading:s}}function cn(n,t,o=!1){const{pixelSize:i,extent:r}=n,e=pn(r,t,!1),s=rn(function Kn(n,t){const o=n.clone().normalize();return 1===o.length?o[0]:Mn(o,t)}(r,(i.x+i.y)/16),t,e);return o||0===X(s)?s:an(r,t,e)}function Jn(n,t,o){const i=o?.tileSize??512,r=o?.alignGlobalDatasetWithAGOL??!0,e=!!o?.limitToSrcResolution,{extent:s,spatialReference:f,pixelSize:a}=n,l=tn(a,t,s);if(null==l)return{projectedPixelSize:null,scales:null,srcResolutions:null,isCustomTilingScheme:!1};const c=(l.x+l.y)/2,M=en(c,t),m=t.isGeographic?256/i*295828763.7958547:256/i*591657527.591555;let h="vector-magdir"===n.dataType||"vector-uv"===n.dataType;const x=cn(n,t,!0),p=Math.min(Math.ceil(Math.log(Math.min(n.width,n.height)/32)/Math.LN2),Math.ceil(Math.log(m/2/M)/Math.LN2));if(!h&&r&&(t.isGeographic||t.isWebMercator)){const R=O(t);if(h=X(x)>0||null!=R&&x.width>R/4,!h&&null!=R){let S=-1;if(p<3)S=2**p*c*i;else if(n.storageInfo){const{maximumPyramidLevel:D=0,pyramidScalingFactor:fn=2}=n.storageInfo;S=fn**D*c*i}const v=Math.ceil(R/S);h=1===v||2===v&&R/2-x.xmax<S}}let u,P=M;const y=1.001,g=Math.min(2,Math.max(1.414,n.storageInfo?.pyramidScalingFactor||2));if(h){P=m;const R=t.isGeographic?1341104507446289e-21:.29858214164761665,S=en(R,t);u=tn({x:R,y:R},f,cn(n,new xn.A({wkid:t.isGeographic?4326:3857}),!0)),u.x*=P/S,u.y*=P/S}else{u={x:a.x,y:a.y};let R=0;for(;P<m*(y/2)&&R<p;)R++,P*=g,u.x*=g,u.y*=g;Math.max(P,m)/Math.min(P,m)<=y&&(P=m)}const d=[P],_=[{x:u.x,y:u.y}],C=Math.min(70.5310735,M)/y;for(;P>=C;)P/=g,u.x/=g,u.y/=g,d.push(P),_.push({x:u.x,y:u.y});if(e){const R=.001*a.x;let S=_.findIndex(v=>v.x>=a.x-R&&v.x<=a.x+R);S>-1?(_.length=S+1,d.length=S+1):(S=_.findIndex(v=>v.x<=a.x+R),S>0&&(_.length=S,d.length=S))}return{projectedPixelSize:l,scales:d,srcResolutions:_,isCustomTilingScheme:!h}}}}]);