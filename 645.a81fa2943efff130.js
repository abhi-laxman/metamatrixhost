"use strict";(self.webpackChunkAngularClient=self.webpackChunkAngularClient||[]).push([[645],{53781:(H,S,g)=>{g.d(S,{a:()=>M,b:()=>U,c:()=>D,d:()=>N,e:()=>d,f:()=>R,g:()=>p,h:()=>r,j:()=>V,l:()=>s,n:()=>e,s:()=>O,t:()=>l});var A=g(85952);function D(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t}function O(t,n,o,u,f){return t[0]=n,t[1]=o,t[2]=u,t[3]=f,t}function p(t,n,o){return t[0]=n[0]+o[0],t[1]=n[1]+o[1],t[2]=n[2]+o[2],t[3]=n[3]+o[3],t}function x(t,n,o){return t[0]=n[0]-o[0],t[1]=n[1]-o[1],t[2]=n[2]-o[2],t[3]=n[3]-o[3],t}function b(t,n,o){return t[0]=n[0]*o[0],t[1]=n[1]*o[1],t[2]=n[2]*o[2],t[3]=n[3]*o[3],t}function T(t,n,o){return t[0]=n[0]/o[0],t[1]=n[1]/o[1],t[2]=n[2]/o[2],t[3]=n[3]/o[3],t}function U(t,n,o){return t[0]=n[0]*o,t[1]=n[1]*o,t[2]=n[2]*o,t[3]=n[3]*o,t}function q(t,n){const o=n[0]-t[0],u=n[1]-t[1],f=n[2]-t[2],m=n[3]-t[3];return Math.sqrt(o*o+u*u+f*f+m*m)}function N(t,n){const o=n[0]-t[0],u=n[1]-t[1],f=n[2]-t[2],m=n[3]-t[3];return o*o+u*u+f*f+m*m}function V(t){const n=t[0],o=t[1],u=t[2],f=t[3];return Math.sqrt(n*n+o*o+u*u+f*f)}function R(t){const n=t[0],o=t[1],u=t[2],f=t[3];return n*n+o*o+u*u+f*f}function e(t,n){const o=n[0],u=n[1],f=n[2],m=n[3];let v=o*o+u*u+f*f+m*m;return v>0&&(v=1/Math.sqrt(v),t[0]=o*v,t[1]=u*v,t[2]=f*v,t[3]=m*v),t}function r(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]}function s(t,n,o,u){const f=n[0],m=n[1],v=n[2],P=n[3];return t[0]=f+u*(o[0]-f),t[1]=m+u*(o[1]-m),t[2]=v+u*(o[2]-v),t[3]=P+u*(o[3]-P),t}function l(t,n,o){const u=n[0],f=n[1],m=n[2],v=n[3];return t[0]=o[0]*u+o[4]*f+o[8]*m+o[12]*v,t[1]=o[1]*u+o[5]*f+o[9]*m+o[13]*v,t[2]=o[2]*u+o[6]*f+o[10]*m+o[14]*v,t[3]=o[3]*u+o[7]*f+o[11]*m+o[15]*v,t}function M(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]}function d(t,n){const o=t[0],u=t[1],f=t[2],m=t[3],v=n[0],P=n[1],L=n[2],z=n[3],F=(0,A.FD)();return Math.abs(o-v)<=F*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(u-P)<=F*Math.max(1,Math.abs(u),Math.abs(P))&&Math.abs(f-L)<=F*Math.max(1,Math.abs(f),Math.abs(L))&&Math.abs(m-z)<=F*Math.max(1,Math.abs(m),Math.abs(z))}Object.freeze(Object.defineProperty({__proto__:null,add:p,ceil:function C(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t[3]=Math.ceil(n[3]),t},copy:D,copyVec3:function a(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t},dist:q,distance:q,div:T,divide:T,dot:r,equals:d,exactEquals:M,floor:function y(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t[3]=Math.floor(n[3]),t},inverse:function h(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t[3]=1/n[3],t},len:V,length:V,lerp:s,max:function I(t,n,o){return t[0]=Math.max(n[0],o[0]),t[1]=Math.max(n[1],o[1]),t[2]=Math.max(n[2],o[2]),t[3]=Math.max(n[3],o[3]),t},min:function B(t,n,o){return t[0]=Math.min(n[0],o[0]),t[1]=Math.min(n[1],o[1]),t[2]=Math.min(n[2],o[2]),t[3]=Math.min(n[3],o[3]),t},mul:b,multiply:b,negate:function i(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=-n[3],t},normalize:e,random:function c(t,n=1){const o=A.Ov;let u,f,m,v,P,L;do{u=2*o()-1,f=2*o()-1,P=u*u+f*f}while(P>=1);do{m=2*o()-1,v=2*o()-1,L=m*m+v*v}while(L>=1);const z=Math.sqrt((1-P)/L);return t[0]=n*u,t[1]=n*f,t[2]=n*m*z,t[3]=n*v*z,t},round:function w(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t[3]=Math.round(n[3]),t},scale:U,scaleAndAdd:function W(t,n,o,u){return t[0]=n[0]+o[0]*u,t[1]=n[1]+o[1]*u,t[2]=n[2]+o[2]*u,t[3]=n[3]+o[3]*u,t},set:O,sqrDist:N,sqrLen:R,squaredDistance:N,squaredLength:R,str:function j(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},sub:x,subtract:x,transformMat4:l,transformQuat:function E(t,n,o){const u=n[0],f=n[1],m=n[2],v=o[0],P=o[1],L=o[2],z=o[3],F=z*u+P*m-L*f,$=z*f+L*u-v*m,J=z*m+v*f-P*u,tt=-v*u-P*f-L*m;return t[0]=F*z+tt*-v+$*-L-J*-P,t[1]=$*z+tt*-P+J*-v-F*-L,t[2]=J*z+tt*-L+F*-P-$*-v,t[3]=n[3],t}},Symbol.toStringTag,{value:"Module"}))},32954:(H,S,g)=>{function A(){return[1,0,0,0,1,0,0,0,1]}function a(b,T,C,y,B,I,w,U,W){return[b,T,C,y,B,I,w,U,W]}g.d(S,{fA:()=>a,vt:()=>A,zK:()=>p});const p=[1,0,0,0,1,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:p,clone:function D(b){return[b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8]]},create:A,createView:function O(b,T){return new Float64Array(b,T,9)},fromValues:a},Symbol.toStringTag,{value:"Module"}))},89141:(H,S,g)=>{function A(){return[0,0,0,0]}function D(i){return[i[0],i[1],i[2],i[3]]}function a(i,h,e,r){return[i,h,e,r]}function O(i,h,e,r){return[i,h,e,r]}function p(i,h=[0,0,0,0]){const e=Math.min(4,i.length);for(let r=0;r<e;++r)h[r]=i[r];return h}function T(){return a(1,1,1,1)}function C(){return a(1,0,0,0)}function y(){return a(0,1,0,0)}function B(){return a(0,0,1,0)}function I(){return a(0,0,0,1)}g.d(S,{CN:()=>O,Un:()=>U,ci:()=>p,fA:()=>a,o8:()=>D,uY:()=>w,vt:()=>A});const w=[0,0,0,0],U=T(),W=C(),q=y(),N=B(),V=I();Object.freeze(Object.defineProperty({__proto__:null,ONES:U,UNIT_W:V,UNIT_X:W,UNIT_Y:q,UNIT_Z:N,ZEROS:w,clone:D,create:A,createView:function x(i,h){return new Float64Array(i,h,4)},freeze:O,fromArray:p,fromValues:a,ones:T,unitW:I,unitX:C,unitY:y,unitZ:B,zeros:function b(){return[0,0,0,0]}},Symbol.toStringTag,{value:"Module"}))},71548:(H,S,g)=>{g.d(S,{C:()=>T,Cr:()=>y,H6:()=>U,_I:()=>I,dz:()=>W,fA:()=>C,kb:()=>B,ld:()=>q,sd:()=>w,vt:()=>x});var A=g(69287),D=g(84149),a=g(28714),O=g(25866),p=g(19741);function x(i){return i?{origin:(0,O.o8)(i.origin),vector:(0,O.o8)(i.vector)}:{origin:(0,O.vt)(),vector:(0,O.vt)()}}function T(i,h=x()){return C(i.origin,i.vector,h)}function C(i,h,e=x()){return(0,a.c)(e.origin,i),(0,a.c)(e.vector,h),e}function y(i,h,e=x()){return(0,a.c)(e.origin,i),(0,a.d)(e.vector,h,i),e}function B(i,h){const e=(0,a.d)(p.rq.get(),h,i.origin),r=(0,a.f)(i.vector,e),s=(0,a.f)(i.vector,i.vector),c=(0,A.qE)(r/s,0,1),l=(0,a.d)(p.rq.get(),(0,a.h)(p.rq.get(),i.vector,c),e);return(0,a.f)(l,l)}function I(i,h,e){return U(i,h,0,1,e)}function w(i,h,e){return(0,a.g)(e,i.origin,(0,a.h)(e,i.vector,h))}function U(i,h,e,r,s){const{vector:c,origin:l}=i,E=(0,a.d)(p.rq.get(),h,l),j=(0,a.f)(c,E)/(0,a.k)(c);return(0,a.h)(s,c,(0,A.qE)(j,e,r)),(0,a.g)(s,s,i.origin)}function W(i,h){if(N(i,function b(i,h){const e=R.get();return e.origin=i,e.vector=h,e}(h.origin,h.direction),!1,V)){const{tA:e,pB:r,distance2:s}=V;if(e>=0&&e<=1)return s;if(e<0)return(0,a.s)(i.origin,r);if(e>1)return(0,a.s)((0,a.g)(p.rq.get(),i.origin,i.vector),r)}return null}function q(i,h,e){return!!N(i,h,!0,V)&&((0,a.c)(e,V.pA),!0)}function N(i,h,e,r){const c=i.origin,l=(0,a.g)(p.rq.get(),c,i.vector),E=h.origin,j=(0,a.g)(p.rq.get(),E,h.vector),M=p.rq.get(),d=p.rq.get();if(M[0]=c[0]-E[0],M[1]=c[1]-E[1],M[2]=c[2]-E[2],d[0]=j[0]-E[0],d[1]=j[1]-E[1],d[2]=j[2]-E[2],Math.abs(d[0])<1e-6&&Math.abs(d[1])<1e-6&&Math.abs(d[2])<1e-6)return!1;const _=p.rq.get();if(_[0]=l[0]-c[0],_[1]=l[1]-c[1],_[2]=l[2]-c[2],Math.abs(_[0])<1e-6&&Math.abs(_[1])<1e-6&&Math.abs(_[2])<1e-6)return!1;const k=M[0]*d[0]+M[1]*d[1]+M[2]*d[2],G=d[0]*_[0]+d[1]*_[1]+d[2]*_[2],Q=M[0]*_[0]+M[1]*_[1]+M[2]*_[2],Z=d[0]*d[0]+d[1]*d[1]+d[2]*d[2],X=(_[0]*_[0]+_[1]*_[1]+_[2]*_[2])*Z-G*G;if(Math.abs(X)<1e-6)return!1;let K=(k*G-Q*Z)/X,Y=(k+G*K)/Z;e&&(K=(0,A.qE)(K,0,1),Y=(0,A.qE)(Y,0,1));const t=p.rq.get(),n=p.rq.get();return t[0]=c[0]+K*_[0],t[1]=c[1]+K*_[1],t[2]=c[2]+K*_[2],n[0]=E[0]+Y*d[0],n[1]=E[1]+Y*d[1],n[2]=E[2]+Y*d[2],r.tA=K,r.tB=Y,r.pA=t,r.pB=n,r.distance2=(0,a.s)(t,n),!0}const V={tA:0,tB:0,pA:(0,O.vt)(),pB:(0,O.vt)(),distance2:0},R=new D.I(()=>x())},5409:(H,S,g)=>{g.r(S),g.d(S,{default:()=>V});var A=g(10467),D=g(8189),a=g(56492),T=(g(35150),g(3248),g(40707),g(5922),g(76576)),C=g(28714),y=g(25866),B=g(71548),I=g(83989),w=g(83926),U=g(32230);function q(e,r,s){const c=(0,I.c)(),l=(0,I.a)(c);return(0,C.b)(l,l,e,.5),(0,C.b)(l,l,r,.5),c[3]=(0,C.j)(l,e),(0,C.g)(l,l,s),c}let N=class{constructor(){this._idToComponent=new Map,this._components=new w.A(e=>e.bounds),this._edges=new w.A(e=>e.bounds),this._tmpLineSegment=(0,B.vt)(),this._tmpP1=(0,y.vt)(),this._tmpP2=(0,y.vt)(),this._tmpP3=(0,y.vt)(),this.remoteClient=null}fetchCandidates(e,r){var s=this;return(0,A.A)(function*(){yield Promise.resolve(),(0,a.Te)(r),yield s._ensureEdgeLocations(e,r);const c=[];return s._edges.forEachNeighbor(l=>(s._addCandidates(e,l,c),c.length<1e3),e.bounds),{result:{candidates:c}}})()}_ensureEdgeLocations(e,r){var s=this;return(0,A.A)(function*(){const c=[];if(s._components.forEachNeighbor(j=>{if(null==j.info){const{id:M,uid:d}=j;c.push({id:M,uid:d})}return!0},e.bounds),!c.length)return;const l={components:c},E=yield s.remoteClient.invoke("fetchAllEdgeLocations",l,r??{});for(const j of E.components)s._setFetchEdgeLocations(j)})()}add(e){var r=this;return(0,A.A)(function*(){const s=new i(e.id,e.bounds);return r._idToComponent.set(s.id,s),r._components.add([s]),{result:{}}})()}remove(e){var r=this;return(0,A.A)(function*(){const s=r._idToComponent.get(e.id);if(s){const c=[];r._edges.forEachNeighbor(l=>(l.component===s&&c.push(l),!0),s.bounds),r._edges.remove(c),r._components.remove([s]),r._idToComponent.delete(s.id)}return{result:{}}})()}_setFetchEdgeLocations(e){const r=this._idToComponent.get(e.id);if(null==r||e.uid!==r.uid)return;const s=U.HY.createView(e.locations),c=new Array(s.count),l=(0,y.vt)(),E=(0,y.vt)();for(let d=0;d<s.count;d++){s.position0.getVec(d,l),s.position1.getVec(d,E);const _=q(l,E,e.origin),k=new h(r,d,_);c[d]=k}this._edges.add(c);const{objectIds:j,origin:M}=e;r.info={locations:s,objectIds:j,origin:M}}_addCandidates(e,r,s){const{info:c}=r.component,{origin:l,objectIds:E}=c,j=c.locations,M=j.position0.getVec(r.index,this._tmpP1),d=j.position1.getVec(r.index,this._tmpP2);(0,C.g)(M,M,l),(0,C.g)(d,d,l);const _=E[j.componentIndex.get(r.index)];this._addEdgeCandidate(e,_,M,d,s),R(e,_,M,s),R(e,_,d,s)}_addEdgeCandidate(e,r,s,c,l){if(!e.returnEdge)return;const E=(0,I.a)(e.bounds),j=(0,B.Cr)(s,c,this._tmpLineSegment),M=(0,B._I)(j,E,this._tmpP3);(0,I.o)(e.bounds,M)&&l.push({type:"edge",objectId:r,target:(0,y.o8)(M),distance:(0,C.j)(E,M),start:(0,y.o8)(s),end:(0,y.o8)(c)})}};N=(0,D._)([(0,T.$)("esri.views.interactive.snapping.featureSources.sceneLayerSource.SceneLayerSnappingSourceWorker")],N);const V=N;function R(e,r,s,c){if(!e.returnVertex||!(0,I.o)(e.bounds,s))return;const l=(0,I.a)(e.bounds);c.push({type:"vertex",objectId:r,target:(0,y.o8)(s),distance:(0,C.j)(l,s)})}let i=(()=>{class e{constructor(s,c){this.id=s,this.bounds=c,this.info=null,this.uid=++e.uid}}return e.uid=0,e})();class h{constructor(r,s,c){this.component=r,this.index=s,this.bounds=c}}},30454:(H,S,g)=>{g.d(S,{_:()=>A});class A{constructor(a,O,p,x,b,T=!1,C=0){this.name=a,this.count=O,this.type=p,this.offset=x,this.stride=b,this.normalized=T,this.divisor=C}}}}]);