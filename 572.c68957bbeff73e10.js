"use strict";(self.webpackChunkAngularClient=self.webpackChunkAngularClient||[]).push([[572,8860,6322,5204,9728,6773,6598,2117],{33087:(N,B,s)=>{s.d(B,{q:()=>g});var h=s(60611);class g{constructor(a,L){this._storage=new h.F,this.id="",this.name="",this.size=0,this._storage.maxSize=a,this._storage.register(this),L&&this._storage.registerRemoveFunc("",L)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(a,L,m=1){this._storage.put(this,a,L,m,1)}pop(a){return this._storage.pop(this,a)}get(a){return this._storage.get(this,a)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(a){this._storage.maxSize=a}resetHitRate(){}}},60611:(N,B,s)=>{s.d(B,{F:()=>m,Ti:()=>g});var h=s(12438);const g=-3,j=g-1;var a,T;(T=a||(a={}))[T.ALL=0]="ALL",T[T.SOME=1]="SOME";class m{get size(){return this._size}constructor(c=10485760){this._maxSize=c,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new h.A,this._users=new h.A}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear()}register(c){this._users.push(c)}deregister(c){this._users.removeUnordered(c)}registerRemoveFunc(c,l){this._removeFuncs.push([c,l])}deregisterRemoveFunc(c){this._removeFuncs.filterInPlace(l=>l[0]!==c)}get maxSize(){return this._maxSize}set maxSize(c){this._maxSize=Math.max(c,-1),this._checkSize()}getSize(c,l){return this._db.get(c.id+l)?.size??0}put(c,l,u,p,y){const _=this._db.get(l=c.id+l);if(_&&(this._size-=_.size,c.size-=_.size,this._db.delete(l),_.entry!==u&&this._notifyRemove(l,_.entry,_.size,a.ALL)),p>this._maxSize)return void this._notifyRemove(l,u,p,a.ALL);if(void 0===u)return void console.warn("Refusing to cache undefined entry ");if(!p||p<0)return console.warn(`Refusing to cache entry with size ${p} for key ${l}`),void this._notifyRemove(l,u,0,a.ALL);const O=1+Math.max(y,j)-g;this._db.set(l,new z(u,p,O)),this._size+=p,c.size+=p,this._checkSize()}updateSize(c,l,u,p){const y=this._db.get(l=c.id+l);if(y&&y.entry===u){for(this._size-=y.size,c.size-=y.size;p>this._maxSize;){const _=this._notifyRemove(l,u,p,a.SOME);if(!(null!=_&&_>0))return void this._db.delete(l);p=_}y.size=p,this._size+=p,c.size+=p,this._checkSize()}}pop(c,l){const u=this._db.get(l=c.id+l);if(u)return this._size-=u.size,c.size-=u.size,this._db.delete(l),++this._hit,u.entry;++this._miss}get(c,l){const u=this._db.get(l=c.id+l);if(void 0!==u)return this._db.delete(l),u.lives=u.lifetime,this._db.set(l,u),++this._hit,u.entry;++this._miss}peek(c,l){const u=this._db.get(c.id+l);return u?++this._hit:++this._miss,u?.entry}get performanceInfo(){const c={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},l={},u=new Array;this._db.forEach((_,O)=>{const f=_.lifetime;u[f]=(u[f]||0)+_.size,this._users.forAll(M=>{const{id:C,name:i}=M;O.startsWith(C)&&(l[i]=(l[i]||0)+_.size)})});const p={};this._users.forAll(_=>{const O=_.name;"hitRate"in _&&"number"==typeof _.hitRate&&!isNaN(_.hitRate)&&_.hitRate>0?(l[O]=l[O]||0,p[O]=Math.round(100*_.hitRate)+"%"):p[O]="0%"});const y=Object.keys(l);y.sort((_,O)=>l[O]-l[_]),y.forEach(_=>c[_]=Math.round(l[_]/2**20)+"MB / "+p[_]);for(let _=u.length-1;_>=0;--_){const O=u[_];O&&(c["Priority "+(_+g-1)]=Math.round(O/this._size*100)+"%")}return c}resetStats(){this._hit=this._miss=0,this._users.forAll(c=>c.resetHitRate())}clear(c){const l=c.id;this._db.forEach((u,p)=>{p.startsWith(l)&&(this._size-=u.size,this._db.delete(p),this._notifyRemove(p,u.entry,u.size,a.ALL))}),c.size=0}clearAll(){this._db.forEach((c,l)=>this._notifyRemove(l,c.entry,c.size,a.ALL)),this._users.forAll(c=>c.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(c,l,u,p){let y;return this._removeFuncs.some(_=>{if(c.startsWith(_[0])){const O=_[1](l,p,u);return"number"==typeof O&&(y=O),!0}return!1}),y}_checkSize(){this._users.forAll(c=>this._checkSizeLimits(c)),this._checkSizeLimits()}_checkSizeLimits(c){const l=c??this;if(l.maxSize<0||l.size<=l.maxSize)return;const u=c?.id;let p=!0;for(;p;){p=!1;for(const[y,_]of this._db)if(0===_.lifetime&&(!u||y.startsWith(u))){if(this._purgeItem(y,_,c),l.size<=.9*l.maxSize)return;p||=this._db.has(y)}}for(const[y,_]of this._db)if((!u||y.startsWith(u))&&(this._purgeItem(y,_,c),l.size<=.9*l.maxSize))return}_purgeItem(c,l,u=this._users.find(p=>c.startsWith(p.id))){if(this._db.delete(c),l.lives<=1){this._size-=l.size,u&&(u.size-=l.size);const p=this._notifyRemove(c,l.entry,l.size,a.SOME);null!=p&&p>0&&(this._size+=p,u&&(u.size+=p),l.lives=l.lifetime,l.size=p,this._db.set(c,l))}else--l.lives,this._db.set(c,l)}}class z{constructor(c,l,u){this.entry=c,this.size=l,this.lifetime=u,this.lives=u}}},34015:(N,B,s)=>{s.r(B),s.d(B,{default:()=>o});var h=s(10467),g=s(8189),j=s(5922),a=s(56492),L=s(45272),m=s(85211),U=s(3248),c=(s(35150),s(40707),s(17221)),l=s(76576),u=s(32034),p=s(35940),y=s(55098),_=s(19284),O=s(28067),f=s(93327);let M=class extends y.A{constructor(t){var e;super(t),e=this,this.type="csv",this.refresh=(0,a.sg)(function(){var d=(0,h.A)(function*(I){yield e.load();const{extent:S,timeExtent:R}=yield e._connection.invoke("refresh",I);return S&&(e.sourceJSON.extent=S),R&&(e.sourceJSON.timeInfo.timeExtent=[R.start,R.end]),{dataChanged:!0,updates:{extent:e.sourceJSON.extent,timeInfo:e.sourceJSON.timeInfo}}});return function(I){return d.apply(this,arguments)}}())}load(t){return this.addResolvingPromise(this._startWorker(null!=t?t.signal:null)),Promise.resolve(this)}destroy(){this._connection?.close(),this._connection=null}openPorts(){var t=this;return(0,h.A)(function*(){return yield t.load(),t._connection.openPorts()})()}queryFeatures(t,e={}){var d=this;return(0,h.A)(function*(){yield d.load(e);const I=yield d._connection.invoke("queryFeatures",t?t.toJSON():null,e);return f.A.fromJSON(I)})()}queryFeaturesJSON(t,e={}){var d=this;return(0,h.A)(function*(){return yield d.load(e),d._connection.invoke("queryFeatures",t?t.toJSON():null,e)})()}queryFeatureCount(t,e={}){var d=this;return(0,h.A)(function*(){return yield d.load(e),d._connection.invoke("queryFeatureCount",t?t.toJSON():null,e)})()}queryObjectIds(t,e={}){var d=this;return(0,h.A)(function*(){return yield d.load(e),d._connection.invoke("queryObjectIds",t?t.toJSON():null,e)})()}queryExtent(t,e={}){var d=this;return(0,h.A)(function*(){yield d.load(e);const I=yield d._connection.invoke("queryExtent",t?t.toJSON():null,e);return{count:I.count,extent:O.A.fromJSON(I.extent)}})()}querySnapping(t,e={}){var d=this;return(0,h.A)(function*(){return yield d.load(e),d._connection.invoke("querySnapping",t,e)})()}queryAttributeBins(t,e={}){var d=this;return(0,h.A)(function*(){return yield d.load(),d._connection.invoke("queryAttributeBins",t?t.toJSON():null,e)})()}_startWorker(t){var e=this;return(0,h.A)(function*(){e._connection=yield(0,_.ho)("CSVSourceWorker",{strategy:(0,U.A)("feature-layers-workers")?"dedicated":"local",signal:t,registryTarget:e});const{url:d,delimiter:I,fields:S,latitudeField:R,longitudeField:x,spatialReference:b,timeInfo:w}=e.loadOptions,W=yield e._connection.invoke("load",{url:d,customParameters:e.customParameters,parsingOptions:{delimiter:I,fields:S?.map($=>$.toJSON()),latitudeField:R,longitudeField:x,spatialReference:b?.toJSON(),timeInfo:w?.toJSON()}},{signal:t});e.locationInfo=W.locationInfo,e.sourceJSON=W.layerDefinition,e.delimiter=W.delimiter})()}};(0,g._)([(0,m.MZ)()],M.prototype,"type",void 0),(0,g._)([(0,m.MZ)()],M.prototype,"loadOptions",void 0),(0,g._)([(0,m.MZ)()],M.prototype,"customParameters",void 0),(0,g._)([(0,m.MZ)()],M.prototype,"locationInfo",void 0),(0,g._)([(0,m.MZ)()],M.prototype,"sourceJSON",void 0),(0,g._)([(0,m.MZ)()],M.prototype,"delimiter",void 0),M=(0,g._)([(0,l.$)("esri.layers.graphics.sources.CSVSource")],M);var C=s(89962),i=s(87086),v=s(88135);function P(t,e){throw new j.A(e,`CSVLayer (title: ${t.title}, id: ${t.id}) cannot be saved to a portal item`)}let n=class extends p.default{constructor(...t){super(...t),this.geometryType="point",this.capabilities=(0,C.f)(!1,!1),this.delimiter=null,this.editingEnabled=!1,this.fields=null,this.latitudeField=null,this.locationType="coordinates",this.longitudeField=null,this.operationalLayerType="CSV",this.outFields=["*"],this.path=null,this.spatialReference=u.A.WGS84,this.source=null,this.type="csv"}normalizeCtorArgs(t,e){return"string"==typeof t?{url:t,...e}:t}load(t){var e=this;const d=null!=t?t.signal:null,I=this.loadFromPortal({supportedTypes:["CSV"],supportsData:!1},t).catch(a.QP).then((0,h.A)(function*(){return e.initLayerProperties(yield e.createGraphicsSource(d))}));return this.addResolvingPromise(I),Promise.resolve(this)}get isTable(){return this.loaded&&null==this.geometryType}readWebMapLabelsVisible(t,e){return null!=e.showLabels?e.showLabels:!!e.layerDefinition?.drawingInfo?.labelingInfo}set url(t){if(!t)return void this._set("url",t);const e=(0,L.An)(t);this._set("url",e.path),e.query&&(this.customParameters={...this.customParameters,...e.query})}createGraphicsSource(t){var e=this;return(0,h.A)(function*(){const d=new M({loadOptions:{delimiter:e.delimiter,fields:e.fields,latitudeField:e.latitudeField??void 0,longitudeField:e.longitudeField??void 0,spatialReference:e.spatialReference??void 0,timeInfo:e.timeInfo??void 0,url:e.url},customParameters:e.customParameters??void 0});return e._set("source",d),yield d.load({signal:t}),e.read({locationInfo:d.locationInfo,columnDelimiter:d.delimiter},{origin:"service",url:e.parsedUrl}),d})()}queryFeatures(t,e){return this.load().then(()=>this.source.queryFeatures(i.A.from(t)||this.createQuery())).then(d=>{if(d?.features)for(const I of d.features)I.layer=I.sourceLayer=this;return d})}queryObjectIds(t,e){var d=this;return(0,h.A)(function*(){return yield d.load(),d.source.queryObjectIds(i.A.from(t)||d.createQuery())})()}queryFeatureCount(t,e){return this.load().then(()=>this.source.queryFeatureCount(i.A.from(t)||this.createQuery()))}queryExtent(t,e){return this.load().then(()=>this.source.queryExtent(i.A.from(t)||this.createQuery()))}read(t,e){super.read(t,e),e&&"service"===e.origin&&this.revert(["latitudeField","longitudeField"],"service")}write(t,e){return super.write(t,{...e,writeLayerSchema:!0})}clone(){throw new j.A("csv-layer:clone",`CSVLayer (title: ${this.title}, id: ${this.id}) cannot be cloned`)}save(t){var e=this;return(0,h.A)(function*(){return P(e,"csv-layer:save")})()}saveAs(t,e){var d=this;return(0,h.A)(function*(){return P(d,"csv-layer:save-as")})()}hasDataChanged(){var t=this;return(0,h.A)(function*(){try{const{dataChanged:e,updates:d}=yield t.source.refresh(t.customParameters);return null!=d&&t.read(d,{origin:"service",url:t.parsedUrl,ignoreDefaults:!0}),e}catch{}return!1})()}_verifyFields(){}_verifySource(){}_hasMemorySource(){return!1}};(0,g._)([(0,m.MZ)({readOnly:!0,json:{read:!1,write:!1}})],n.prototype,"capabilities",void 0),(0,g._)([(0,m.MZ)({type:[","," ",";","|","\t"],json:{read:{source:"columnDelimiter"},write:{target:"columnDelimiter",ignoreOrigin:!0}}})],n.prototype,"delimiter",void 0),(0,g._)([(0,m.MZ)({readOnly:!0,type:Boolean,json:{origins:{"web-scene":{read:!1,write:!1}}}})],n.prototype,"editingEnabled",void 0),(0,g._)([(0,m.MZ)({json:{read:{source:"layerDefinition.fields"},write:{target:"layerDefinition.fields"}}})],n.prototype,"fields",void 0),(0,g._)([(0,m.MZ)({type:Boolean,readOnly:!0})],n.prototype,"isTable",null),(0,g._)([(0,c.w)("web-map","labelsVisible",["layerDefinition.drawingInfo.labelingInfo","showLabels"])],n.prototype,"readWebMapLabelsVisible",null),(0,g._)([(0,m.MZ)({type:String,json:{read:{source:"locationInfo.latitudeFieldName"},write:{target:"locationInfo.latitudeFieldName",ignoreOrigin:!0}}})],n.prototype,"latitudeField",void 0),(0,g._)([(0,m.MZ)({type:["show","hide"]})],n.prototype,"listMode",void 0),(0,g._)([(0,m.MZ)({type:["coordinates"],json:{read:{source:"locationInfo.locationType"},write:{target:"locationInfo.locationType",ignoreOrigin:!0,isRequired:!0}}})],n.prototype,"locationType",void 0),(0,g._)([(0,m.MZ)({type:String,json:{read:{source:"locationInfo.longitudeFieldName"},write:{target:"locationInfo.longitudeFieldName",ignoreOrigin:!0}}})],n.prototype,"longitudeField",void 0),(0,g._)([(0,m.MZ)({type:["CSV"]})],n.prototype,"operationalLayerType",void 0),(0,g._)([(0,m.MZ)()],n.prototype,"outFields",void 0),(0,g._)([(0,m.MZ)({type:String,json:{origins:{"web-scene":{read:!1,write:!1}},read:!1,write:!1}})],n.prototype,"path",void 0),(0,g._)([(0,m.MZ)({json:{read:!1},cast:null,type:M,readOnly:!0})],n.prototype,"source",void 0),(0,g._)([(0,m.MZ)({json:{read:!1},value:"csv",readOnly:!0})],n.prototype,"type",void 0),(0,g._)([(0,m.MZ)({json:{read:v.r,write:{isRequired:!0,ignoreOrigin:!0,writer:v.w}}})],n.prototype,"url",null),n=(0,g._)([(0,l.$)("esri.layers.CSVLayer")],n);const o=n},78200:(N,B,s)=>{s.d(B,{F:()=>h,P:()=>g});const h={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!0,supportsCurrentUser:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!0,supportsReturnMesh:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByAnonymous:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0,supportsTrueCurve:!1},g={supportsDate:!0,supportsFixedInterval:!0,supportsAutoInterval:!0,supportsFixedBoundaries:!0,supportsStackBy:!0,supportsSplitBy:!0,supportsSnapToData:!1,supportsReturnFullIntervalBin:!1,supportsFirstDayOfWeek:!1,supportsNormalization:!0,supportedStatistics:{count:!0,sum:!0,avg:!0,var:!0,stddev:!0,min:!0,max:!0,percentileContinuous:!0,percentileDiscrete:!0,envelope:!0,centroid:!0,convexHull:!0},supportedNormalizationTypes:{field:!0,log:!0,naturalLog:!0,percentOfTotal:!0,squareRoot:!0}}},89962:(N,B,s)=>{s.d(B,{F0:()=>L,Vx:()=>z,e2:()=>c,f:()=>l});var h=s(3248),g=s(77806),j=s(78200),a=s(48254);function L(u){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===u||"esriGeometryMultipoint"===u?a.Cb:"esriGeometryPolyline"===u?a.yM:a.WR}}}const m=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let U=1;function z(u,p){if((0,h.A)("esri-csp-restrictions"))return()=>({[p]:null,...u});try{let y=`this${T(p)} = null;`;for(const O in u)y+=`this${T(O)} = ${JSON.stringify(u[O])};`;const _=new Function(`\n      return class AttributesClass$${U++} {\n        constructor() {\n          ${y};\n        }\n      }\n    `)();return()=>new _}catch{return()=>({[p]:null,...u})}}function T(u){return m.test(u)?`.${u}`:`["${u}"]`}function c(u={}){return[{name:"New Feature",description:"",prototype:{attributes:(0,g.o8)(u)}}]}function l(u,p){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,isBranchVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:u},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:p,supportsDelete:p,supportsEditing:p,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryBins:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:p,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:j.F,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},queryAttributeBins:j.P,editing:{supportsGeometryUpdate:p,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1,zDefault:void 0}}}},94376:(N,B,s)=>{s.d(B,{p:()=>z});var h=s(8189),g=s(85211),m=(s(3248),s(35150),s(40707),s(76576));const z=T=>{let c=class extends T{get apiKey(){return this._isOverridden("apiKey")?this._get("apiKey"):function U(T){return"portalItem"in T}(this)?this.portalItem?.apiKey:null}set apiKey(l){null!=l?this._override("apiKey",l):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return(0,h._)([(0,g.MZ)({type:String})],c.prototype,"apiKey",null),c=(0,h._)([(0,m.$)("esri.layers.mixins.APIKeyMixin")],c),c}},43124:(N,B,s)=>{s.d(B,{Rr:()=>T,fY:()=>u,ne:()=>l});var h=s(8189),g=s(89221),j=s(85211),U=(s(3248),s(35150),s(40707),s(76576)),z=s(15848);function T(p,y,_){if(!p)return null;const O=p.find(M=>!!M.field);if(!O)return null;const f=new z.A;return f.read(O,_),[f]}const l={type:[z.A],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:T},write:{writer:function c(p,y,_,O){const f=p.find(M=>!!M.field);f&&(0,g.sM)(_,[f.toJSON()],y)}}}},u=p=>{let y=class extends p{constructor(){super(...arguments),this.orderBy=null}};return(0,h._)([(0,j.MZ)(l)],y.prototype,"orderBy",void 0),y=(0,h._)([(0,U.$)("esri.layers.mixins.OrderedLayer")],y),y}},47063:(N,B,s)=>{s.d(B,{A:()=>y});var h=s(8189),g=s(90660),j=s(71065),a=s(85211),z=(s(3248),s(35150),s(40707),s(17221)),T=s(76576),c=s(50305),l=s(39664),u=s(69741);let p=class extends(g.A.ClonableMixin(j.A)){constructor(_){super(_),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(_){const O={};for(const f of Object.keys(_))O[f]=(0,l.rS)(_[f]);return O}writeDomains(_,O){const f={};for(const M of Object.keys(_))_[M]&&(f[M]=_[M]?.toJSON());O.domains=f}};(0,h._)([(0,a.MZ)({json:{write:!0}})],p.prototype,"id",void 0),(0,h._)([(0,a.MZ)({json:{write:!0}})],p.prototype,"name",void 0),(0,h._)([(0,a.MZ)({json:{write:!0}})],p.prototype,"domains",void 0),(0,h._)([(0,z.w)("domains")],p.prototype,"readDomains",null),(0,h._)([(0,c.K)("domains")],p.prototype,"writeDomains",null),(0,h._)([(0,a.MZ)({type:[u.A],json:{write:!0}})],p.prototype,"templates",void 0),p=(0,h._)([(0,T.$)("esri.layers.support.FeatureType")],p);const y=p},73258:(N,B,s)=>{s.d(B,{A:()=>y});var h=s(5922),g=s(71065),j=s(35150),a=s(60797),L=s(24098),m=s(86300),U=s(20543),z=s(22639),T=s(44549);const p=new Map;class y{static fromJSON(i){return new y(i.fields,i.timeZoneByFieldName)}static fromLayer(i){return new y(i.fields??[],M(i))}static fromLayerJSON(i){return new y(i.fields??[],M(i))}constructor(i=[],v){this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=i||[],this._timeZoneByFieldName=v?new Map(v):null;const P=[];for(const n of this.fields){const o=n?.name,t=O(o);if(o&&t){const e=_(o);this._fieldsMap.set(o,n),this._fieldsMap.set(e,n),this._normalizedFieldsMap.set(t,n),P.push(`${e}:${n.type}:${this._timeZoneByFieldName?.get(o)}`),(0,m.vE)(n)?(this.dateFields.push(n),this._dateFieldsSet.add(n)):(0,m.WA)(n)&&(this._numericFieldsSet.add(n),this.numericFields.push(n)),(0,m.te)(n)||(0,m.Xz)(n)||(n.editable=null==n.editable||!!n.editable,n.nullable=null==n.nullable||!!n.nullable)}}P.sort(),this.uid=P.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const i of this.fields)(0,m.te)(i)||(0,m.Xz)(i)||i.nullable||void 0!==(0,m.lD)(i)||this._requiredFields.push(i)}return this._requiredFields}equals(i){return this.uid===i?.uid}has(i){return null!=this.get(i)}get(i){if(!i)return;let v=this._fieldsMap.get(i);return v||(v=this._fieldsMap.get(_(i))??this._normalizedFieldsMap.get(O(i)),v&&this._fieldsMap.set(i,v),v)}getTimeZone(i){const v=this.get(i&&"string"!=typeof i?i.name:i);return v?this._timeZoneByFieldName?this._timeZoneByFieldName.get(v.name):"date"===v.type||"esriFieldTypeDate"===v.type?(j.A.getLogger("esri.layers.support.FieldsIndex").errorOnce(new h.A("getTimeZone:no-timezone-information",`no time zone information for field '${v.name}'`)),U.n$):f.has(v.type)?U.L5:null:null}getLuxonTimeZone(i){const v=this.getTimeZone(i);return v?v===U.L5?L.GB.instance:v===U.n$?T.mQ.utcInstance:(0,a.tE)(p,v,()=>T.oh.create(v)):null}isDateField(i){return this._dateFieldsSet.has(this.get(i))}isTimeOnlyField(i){return(0,m.OH)(this.get(i))}isNumericField(i){return this._numericFieldsSet.has(this.get(i))}normalizeFieldName(i){return this.get(i)?.name??void 0}toJSON(){return{fields:this.fields.map(i=>g.A.isSerializable(i)?i.toJSON():i),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}function _(C){return C.trim().toLowerCase()}function O(C){return(0,m.rS)(C)?.toLowerCase()??""}const f=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function M(C){const i=new Map;if(!C.fields)return i;const v=!0===C.datesInUnknownTimezone,{timeInfo:P,editFieldsInfo:n}=C,o=(P?"startField"in P?P.startField:P.startTimeField:"")??"",t=(P?"endField"in P?P.endField:P.endTimeField:"")??"",e=function u(C){return"dateFieldsTimeZone"in C}(C)?C.dateFieldsTimeZone??null:C.dateFieldsTimeReference?(0,z.ZS)(C.dateFieldsTimeReference):null,d=n?function c(C){return"timeZone"in C}(n)?n.timeZone??e:n.dateFieldsTimeReference?(0,z.ZS)(n.dateFieldsTimeReference):e??U.n$:null,I=P?function l(C){return"timeZone"in C}(P)?P.timeZone??e:P.timeReference?(0,z.ZS)(P.timeReference):e:null,S=new Map([[_(n?.creationDateField??""),d],[_(n?.editDateField??""),d],[_(o),I],[_(t),I]]);for(const{name:R,type:x}of C.fields)if(f.has(x))i.set(R,U.L5);else if("date"!==x&&"esriFieldTypeDate"!==x)i.set(R,null);else if(v)i.set(R,U.L5);else{const b=S.get(_(R??""))??e;i.set(R,b)}return i}},64584:(N,B,s)=>{s.d(B,{A:()=>l});var T,h=s(8189),g=s(31178),j=s(71065),a=s(85211),z=(s(3248),s(35150),s(40707),s(76576));let c=T=class extends j.A{constructor(u){super(u),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new g.A}clone(){return new T({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};(0,h._)([(0,a.MZ)({type:String,json:{write:{isRequired:!0}}})],c.prototype,"floorField",void 0),(0,h._)([(0,a.MZ)({json:{read:!1,write:!1}})],c.prototype,"viewAllMode",void 0),(0,h._)([(0,a.MZ)({json:{read:!1,write:!1}})],c.prototype,"viewAllLevelIds",void 0),c=T=(0,h._)([(0,z.$)("esri.layers.support.LayerFloorInfo")],c);const l=c},15848:(N,B,s)=>{s.d(B,{A:()=>u});var T,h=s(8189),g=s(49976),j=s(71065),a=s(85211),z=(s(3248),s(35150),s(40707),s(76576));const c=new g.J({asc:"ascending",desc:"descending"});let l=T=class extends j.A{constructor(p){super(p),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new T({field:this.field,valueExpression:this.valueExpression,order:this.order})}};(0,h._)([(0,a.MZ)({type:String,json:{write:!0}})],l.prototype,"field",void 0),(0,h._)([(0,a.MZ)({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],l.prototype,"valueExpression",void 0),(0,h._)([(0,a.MZ)({type:c.apiValues,json:{type:c.jsonValues,read:c.read,write:c.write}})],l.prototype,"order",void 0),l=T=(0,h._)([(0,z.$)("esri.layers.support.OrderByInfo")],l);const u=l},36267:(N,B,s)=>{s.d(B,{A:()=>p});var h=s(8189),g=s(90660),j=s(49976),a=s(71065),L=s(85211),T=(s(3248),s(35150),s(40707),s(76576));const c=new j.J({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),l=new j.J({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let u=class extends(g.A.ClonableMixin(a.A)){constructor(y){super(y),this.cardinality=null,this.catalogId=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};(0,h._)([(0,L.MZ)({json:{read:c.read,write:c.write}})],u.prototype,"cardinality",void 0),(0,h._)([(0,L.MZ)({json:{name:"catalogID"}})],u.prototype,"catalogId",void 0),(0,h._)([(0,L.MZ)({json:{read:!0,write:!0}})],u.prototype,"composite",void 0),(0,h._)([(0,L.MZ)({json:{read:!0,write:!0}})],u.prototype,"id",void 0),(0,h._)([(0,L.MZ)({json:{read:!0,write:!0}})],u.prototype,"keyField",void 0),(0,h._)([(0,L.MZ)({json:{read:!0,write:!0}})],u.prototype,"keyFieldInRelationshipTable",void 0),(0,h._)([(0,L.MZ)({json:{read:!0,write:!0}})],u.prototype,"name",void 0),(0,h._)([(0,L.MZ)({json:{read:!0,write:!0}})],u.prototype,"relatedTableId",void 0),(0,h._)([(0,L.MZ)({json:{read:!0,write:!0}})],u.prototype,"relationshipTableId",void 0),(0,h._)([(0,L.MZ)({json:{read:l.read,write:l.write}})],u.prototype,"role",void 0),u=(0,h._)([(0,T.$)("esri.layers.support.Relationship")],u);const p=u},85791:(N,B,s)=>{s.d(B,{A:()=>O});var h=s(10467),g=s(8189),j=s(98877),a=s(89447),L=s(31178),m=s(85211),c=(s(3248),s(35150),s(40707),s(76576)),l=s(86300),u=s(48218);let _=class extends j.A{constructor(f){super(f),this._featureUtils=null,this.effectivePopupTemplate=null}get _arcadeTask(){return this.expressionsUsedInTitle.length>0?this._get("_arcadeTask")||(0,a.UT)(()=>(0,u.lw)()):null}get featureUtilsPromise(){return this._get("featureUtilsPromise")??s.e(3958).then(s.bind(s,93958)).then(f=>this._featureUtils=f)}get calculatedExpressions(){const f=new L.A;if(!this.expressionsUsedInTitle.length)return f;if(!this._arcadeTask?.value){for(const M of this.expressionsUsedInTitle??[])f.push({name:M.name,invalid:!0});return f}for(const M of this.expressionsUsedInTitle)try{const C=this._arcadeTask.value.arcade.parseScript(M.expression,["$layer","$map","$datastore"]);if(C.isAsync){f.push({name:M.name,invalid:!0});break}f.push({name:M.name,syntax:C,invalid:!1,func:this._arcadeTask.value.arcade.compileScript(C,{vars:{$feature:"any"}})})}catch{f.push({name:M.name,invalid:!0});break}return f}get expressionsUsedInTitle(){let f=this.effectivePopupTemplate?.title??"";return"string"!=typeof f?[]:(f=f.toLowerCase(),this.effectivePopupTemplate?.expressionInfos?.filter(M=>f.includes(`{expression/${M.name.toLowerCase()}}`))??[])}get fieldInfoMap(){return this._featureUtils?this._createFieldInfoMap(this._featureUtils.getAllFieldInfos(this.effectivePopupTemplate)):null}get hasBadExpressions(){return this.calculatedExpressions.some(f=>!0===f.invalid)}get requiredFields(){const f=new Set;if(this._arcadeTask?.value&&!this.hasBadExpressions)for(const C of this.calculatedExpressions?.toArray()??[])try{const i=this._arcadeTask.value.arcade.extractFieldLiterals(C.syntax);for(const v of i){const P=v.split("."),n=this.fieldsIndex.get(P.at(-1)??"");n&&f.add(n.name)}}catch{}const M=this._extractFieldNames(this.workingTitle);for(const C of M){const i=this.fieldsIndex.get(C);i&&f.add(i.name)}return f}get titleFromDisplayField(){let f="";return this.displayField&&(f=this.fieldsIndex.get(this.displayField)?.name??""),f||(f=this.fieldsIndex.get(this.objectIdField)?.name??""),f?`{${f}}`:""}get workingTitle(){const f=this.effectivePopupTemplate?this.effectivePopupTemplate.title:"";return""===f||null==f||this.hasBadExpressions||"string"!=typeof f?this.titleFromDisplayField:f}getTitle(f,M,C){var i=this;return(0,h.A)(function*(){try{const{attributes:v}=M,P=C?.timeZone??"system",[{substituteFieldsInLinksAndAttributes:n}]=yield Promise.all([i.featureUtilsPromise,i._arcadeTask?.promise]);if(C.fetchMissingFields&&(M=yield i._checkAndReQueryGraphic(f,M)),i.workingTitle&&i.fieldInfoMap){const o=i._createFormattedAttributes(f,M,P).global;return n({attributes:v,expressionAttributes:null,fieldInfoMap:i.fieldInfoMap,globalAttributes:o,layer:f,text:i.workingTitle})}return""}catch{}return""})()}_checkAndReQueryGraphic(f,M){var C=this;return(0,h.A)(function*(){const i=M.getObjectId();if(null==i)return M;if(!(0,l.Kl)(C.requiredFields,M)){const v=f.createQuery();v.where="1=1",v.outFields=[...C.requiredFields],v.objectIds=[i];const P=yield f.queryFeatures(v);if(1===P?.features.length)return P.features[0]}return M})()}_createFieldInfoMap(f){const M=new Map;if(!f)return M;for(const C of f){if(!C.fieldName)continue;const i=this.fieldsIndex.get(C.fieldName),v=i?.name??C.fieldName;C.fieldName=v,M.set(v.toLowerCase(),C)}return M}_createFormattedAttributes(f,M,C="system"){const i=this.effectivePopupTemplate?.fieldInfos??[],v={};if(!this._featureUtils)return{};if(!this.hasBadExpressions&&this.calculatedExpressions.length>0&&this._arcadeTask?.value){const n=this._arcadeTask.value.Feature.createFromGraphicLikeObject(M.geometry,M.attributes,f,null);for(const o of this.calculatedExpressions)try{v[`expression/${o.name}`]=o.func({vars:{$feature:n}})}catch{}}const P={...M.attributes,...v};return{global:this._featureUtils.formatAttributes({fieldInfos:i,attributes:P,graphic:M,timeZone:C,layer:f,fieldInfoMap:this.fieldInfoMap}),content:[]}}_extractFieldNames(f){return(0,l.nw)(f).filter(M=>!(0===M.indexOf("relationships/")||0===M.indexOf("expression/")))}};(0,g._)([(0,m.MZ)({readOnly:!0})],_.prototype,"_arcadeTask",null),(0,g._)([(0,m.MZ)()],_.prototype,"_featureUtils",void 0),(0,g._)([(0,m.MZ)({readOnly:!0})],_.prototype,"featureUtilsPromise",null),(0,g._)([(0,m.MZ)({readOnly:!0})],_.prototype,"calculatedExpressions",null),(0,g._)([(0,m.MZ)()],_.prototype,"displayField",void 0),(0,g._)([(0,m.MZ)()],_.prototype,"effectivePopupTemplate",void 0),(0,g._)([(0,m.MZ)()],_.prototype,"expressionsUsedInTitle",null),(0,g._)([(0,m.MZ)()],_.prototype,"fieldsIndex",void 0),(0,g._)([(0,m.MZ)()],_.prototype,"fieldInfoMap",null),(0,g._)([(0,m.MZ)()],_.prototype,"fields",void 0),(0,g._)([(0,m.MZ)()],_.prototype,"objectIdField",void 0),(0,g._)([(0,m.MZ)()],_.prototype,"requiredFields",null),_=(0,g._)([(0,c.$)("esri.layers.support.TitleCreator")],_);const O=_},27960:(N,B,s)=>{s.d(B,{Ch:()=>L,mW:()=>j,u2:()=>a});var h=s(69287),g=s(63484);function j(p,y){return{...y,filterMode:p.mode}}function a(p,y){return U(p,y).next().value??null}function L(p,y,_){const O=function m(p){if("manual"===c(p))return null;const y=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:_,maxScale:O}of p.filters)y[0]=Math.max(y[0],l(_)),y[1]=Math.min(y[1],u(O));return y}(p);if(O&&((0,h.gg)(y,O[0])||(0,h.ZH)(_,O[1])))return"";const f=Array.from(U(p,y,_)),M=function z(p,y,_){if(0===p.length)return!0;const O=l(p.at(0)?.minScale),f=u(p.at(-1)?.maxScale);if((0,h.ZH)(O,y)||(0,h.gg)(f,_))return!0;for(let M=0;M<p.length-1;M++){const C=p[M];if((0,h.ZH)(l(p[M+1].minScale),u(C.maxScale)))return!0}return!1}(f,y,_)?"1=1":f.map(C=>C.where||"1=1").reduce((C,i)=>(0,g.IW)(C,i),"");return M&&"1=1"!==M?M:""}function*U(p,y,_){if("manual"===c(p)){const O=p.filters.find(f=>f.id===p.activeFilterId);O&&(yield O)}else{"object"==typeof y&&(y=y.scale);for(const O of p.filters)T(O.minScale,O.maxScale,y,_)&&(yield O)}}function T(p,y,_,O){return p=l(p),_=l(_),y=u(y),!(!(0,h.Sp)(_,p)&&(O??_)>p||(0,h.Hx)(y,_)||void 0!==O&&(0,h.Sp)(O,p))}function c(p){return"mode"in p?p.mode:p.filterMode}function l(p){return p||Number.POSITIVE_INFINITY}function u(p){return p||0}},6829:(N,B,s)=>{s.d(B,{CW:()=>p,Fm:()=>z,Hz:()=>y,JQ:()=>u,JZ:()=>t,ND:()=>O,R_:()=>m,U9:()=>l,fu:()=>g,nr:()=>_,oF:()=>j,rq:()=>T,z$:()=>c});const h=[["binary","application/octet-stream","bin",""]];function g(e,d){return null!=i(d.name,e?.supportedFormats??[])}function j(e,d){if(!e)return!1;const I=T(d,e.supportedFormats??[]);return null!=I&&e.editFormats.includes(I)}function m(e,d){return v(function C(e,d){const I=e.toLowerCase();return f(d).find(S=>P(S)===I)}(e,d))}function U(e,d){return v(i(e,d))}function z(e,d){return P(function M(e,d){return f(d).find(I=>v(I)===e)}(e,d))}function T(e,d){return U(e.name,d)??m(e.type,d)}function c(e,d,I){return m(e,I)??U(d,I)}function l({supportedFormats:e}){return c("model/gltf-binary","glb",e)}function u(e){const d=l(e);return null!=d&&e.editFormats.includes(d)}function p({supportedFormats:e}){return c("model/gltf+json","gltf",e)}function y(e){if(!e)return null;const d=l(e),I=p(e);let S=null;for(const R of e.queryFormats){if(R===d)return R;R===I&&(S=R)}return S}function _({supportedFormats:e}){return c("application/esri3do-SR_world","wld",e)}function O({supportedFormats:e}){return c("application/esri3do-SR_prj","prj",e)}function f(e){return[...h,...e]}function i(e,d){const I=e.toLowerCase();return f(d).find(S=>function n(e){return e?.[2].split(",").map(d=>d.toLowerCase())??[]}(S).some(R=>I.endsWith(R)))}function v(e){return e?.[0]}function P(e){return e?.[1].toLowerCase()}function t(e){return e.tables?.find(d=>"assetMaps"===d.role)}},4858:(N,B,s)=>{s.d(B,{BI:()=>y,D3:()=>u,XJ:()=>p,lc:()=>l,mX:()=>O,rU:()=>_,tH:()=>P});var h=s(1119);const g="__begin__",j="__end__",a=new RegExp(g,"ig"),L=new RegExp(j,"ig"),m=new RegExp("^"+g,"i"),U=new RegExp(j+"$","i"),z='"',T=z+" + ",c=" + "+z;function l(n){return n.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function u(n){return n.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function p(n){const o={expression:"",type:"none"};return n.labelExpressionInfo?n.labelExpressionInfo.value?(o.expression=n.labelExpressionInfo.value,o.type="conventional"):n.labelExpressionInfo.expression&&(o.expression=n.labelExpressionInfo.expression,o.type="arcade"):null!=n.labelExpression&&(o.expression=l(n.labelExpression),o.type="conventional"),o}function y(n){const o=p(n);switch(o.type){case"conventional":return O(o.expression);case"arcade":return o.expression}return null}function _(n){const o=p(n);switch(o.type){case"conventional":return function M(n){return n?.match(f)?.[1].trim()||null}(o.expression);case"arcade":return P(o.expression)}return null}function O(n){let o;return n?(o=(0,h.HC)(n,t=>g+'$feature["'+t+'"]'+j),o=m.test(o)?o.replace(m,""):z+o,o=U.test(o)?o.replace(U,""):o+z,o=o.replaceAll(a,T).replaceAll(L,c)):o='""',o}const f=/^\s*\{([^}]+)\}\s*$/i,C=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,i=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,v=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function P(n){if(!n)return null;let o=C.exec(n)||i.exec(n);return o?o[1]||o[3]:(o=v.exec(n),o?o[2]:null)}},90543:(N,B,s)=>{s.d(B,{S:()=>u,d:()=>n});var h=s(3248),g=s(68438),j=s(6829);function a(o,t,e){return!!m(o,t,e)}function L(o,t,e){return m(o,t,e)}function m(o,t,e){return o&&o.hasOwnProperty(t)?o[t]:e}const U={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function z(o){const t=o?.supportedSpatialAggregationStatistics?.map(e=>e.toLowerCase());return{envelope:!!t?.includes("envelopeaggregate"),centroid:!!t?.includes("centroidaggregate"),convexHull:!!t?.includes("convexhullaggregate")}}function T(o,t){return!!o?.supportedOperationsWithCacheHint?.map(d=>d.toLowerCase())?.includes(t.toLowerCase())}function c(o){const t=o?.supportedStatisticTypes?.map(e=>e.toLowerCase());return{count:!!t?.includes("count"),sum:!!t?.includes("sum"),min:!!t?.includes("min"),max:!!t?.includes("max"),avg:!!t?.includes("avg"),var:!!t?.includes("var"),stddev:!!t?.includes("stddev"),percentileContinuous:!!t?.includes("percentile_continuous"),percentileDiscrete:!!t?.includes("percentile_discrete"),envelope:!!t?.includes("envelopeaggregate"),centroid:!!t?.includes("centroidaggregate"),convexHull:!!t?.includes("convexhullaggregate")}}function l(o){const t=o?.supportedNormalizationTypes?.map(e=>e.toLowerCase());return{field:!!t?.includes("field"),log:!!t?.includes("log"),naturalLog:!!t?.includes("naturallog"),percentOfTotal:!!t?.includes("percentoftotal"),squareRoot:!!t?.includes("squareroot")}}function u(o,t){return{analytics:p(o),attachment:y(o),data:_(o),metadata:O(o),operations:f(o.capabilities,o,t),query:M(o,t),queryAttributeBins:v(o),queryRelated:C(o),queryTopFeatures:i(o),editing:P(o)}}function p(o){return{supportsCacheHint:T(o.advancedQueryCapabilities,"queryAnalytics")}}function y(o){const t=o.attachmentProperties,e={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:T(o.advancedQueryCapabilities,"queryAttachments"),supportsOrderByFields:a(o.advancedQueryCapabilities,"supportsQueryAttachmentOrderByFields",!1),supportsResize:a(o,"supportsAttachmentsResizing",!1)};return t&&Array.isArray(t)&&t.forEach(d=>{const I=U[d.name];I&&(e[I]=!!d.isEnabled)}),e}function _(o){return{isVersioned:a(o,"isDataVersioned",!1),isBranchVersioned:a(o,"isDataBranchVersioned",!1),supportsAttachment:a(o,"hasAttachments",!1),supportsM:a(o,"hasM",!1),supportsZ:a(o,"hasZ",!1)}}function O(o){return{supportsAdvancedFieldProperties:a(o,"supportsFieldDescriptionProperty",!1)}}function f(o,t,e){const d=o?o.toLowerCase().split(",").map(ue=>ue.trim()):[],I=e?(0,g.qg)(e):null,S=d.includes(null!=I&&"MapServer"===I.serverType?"data":"query"),R=d.includes("editing")&&!t.datesInUnknownTimezone;let x=R&&d.includes("create"),b=R&&d.includes("delete"),w=R&&d.includes("update");const W=d.includes("changetracking"),$=t.advancedQueryCapabilities;return R&&!(x||b||w)&&(x=b=w=!0),{supportsCalculate:a(t,"supportsCalculate",!1),supportsTruncate:a(t,"supportsTruncate",!1),supportsValidateSql:a(t,"supportsValidateSql",!1),supportsAdd:x,supportsDelete:b,supportsEditing:R,supportsChangeTracking:W,supportsQuery:S,supportsQueryAnalytics:a($,"supportsQueryAnalytic",!1),supportsQueryAttachments:a($,"supportsQueryAttachments",!1),supportsQueryBins:a($,"supportsQueryBins",!1),supportsQueryTopFeatures:a($,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:a(t,"supportsAttachmentsResizing",!1),supportsSync:d.includes("sync"),supportsUpdate:w,supportsExceedsLimitStatistics:a(t,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:a(t,"supportsAsyncConvert3D",!1)}}function M(o,t){const e=o.advancedQueryCapabilities,d=o.ownershipBasedAccessControlForFeatures,I=o.archivingInfo,S=o.currentVersion,R=t?.includes("MapServer"),x=!R||S>=(0,h.A)("mapserver-pbf-version-support"),b=(0,g.Wo)(t),w=new Set((o.supportedQueryFormats??"").split(",").map(W=>W.toLowerCase().trim()));return{maxRecordCount:L(o,"maxRecordCount",void 0),maxRecordCountFactor:L(o,"maxRecordCountFactor",void 0),standardMaxRecordCount:L(o,"standardMaxRecordCount",void 0),supportedSpatialAggregationStatistics:z(e),supportsCacheHint:a(e,"supportsQueryWithCacheHint",!1)||T(e,"query"),supportsCentroid:a(e,"supportsReturningGeometryCentroid",!1),supportsCompactGeometry:b,supportsCurrentUser:a(e,"supportsCurrentUserQueries",!1),supportsDefaultSpatialReference:a(e,"supportsDefaultSR",!1),supportsDisjointSpatialRelationship:a(e,"supportsDisjointSpatialRel",!1),supportsDistance:a(e,"supportsQueryWithDistance",!1),supportsDistinct:a(e,"supportsDistinct",o.supportsAdvancedQueries),supportsExtent:a(e,"supportsReturningQueryExtent",!1),supportsFormatPBF:x&&w.has("pbf"),supportsFullTextSearch:a(e,"supportsFullTextSearch",!1),supportsGeometryProperties:a(e,"supportsReturningGeometryProperties",!1),supportsHavingClause:a(e,"supportsHavingClause",!1),supportsHistoricMoment:a(I,"supportsQueryWithHistoricMoment",!1),supportsMaxRecordCountFactor:a(e,"supportsMaxRecordCountFactor",!1),supportsOrderBy:a(e,"supportsOrderBy",o.supportsAdvancedQueries),supportsPagination:a(e,"supportsPagination",!1),supportsPercentileStatistics:a(e,"supportsPercentileStatistics",!1),supportsQuantization:a(o,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:a(o,"supportsQuantizationEditMode",!1),supportsQueryByAnonymous:a(d,"allowAnonymousToQuery",!0),supportsQueryByOthers:a(d,"allowOthersToQuery",!0),supportsQueryGeometry:a(o,"supportsReturningQueryGeometry",!1),supportsResultType:a(e,"supportsQueryWithResultType",!1),supportsReturnMesh:!!(0,j.Hz)(o.infoFor3D),supportsSpatialAggregationStatistics:a(e,"supportsSpatialAggregationStatistics",!1),supportsSqlExpression:a(e,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:a(o,"useStandardizedQueries",!1),supportsStatistics:a(e,"supportsStatistics",o.supportsStatistics),supportsTopFeaturesQuery:a(e,"supportsTopFeaturesQuery",!1),supportsTrueCurve:a(e,"supportsTrueCurve",!1),tileMaxRecordCount:L(o,"tileMaxRecordCount",void 0)}}function C(o){const t=o.advancedQueryCapabilities,e=a(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:a(t,"supportsQueryRelatedPagination",!1),supportsCount:e,supportsOrderBy:e,supportsCacheHint:T(t,"queryRelated")}}function i(o){return{supportsCacheHint:T(o.advancedQueryCapabilities,"queryTopFilter")}}function v(o){const t=o?o.queryBinsCapabilities:void 0;return{supportsDate:a(t,"supportsDateBin",!1),supportsFixedInterval:a(t,"supportsFixedIntervalBin",!1),supportsAutoInterval:a(t,"supportsAutoIntervalBin",!1),supportsFixedBoundaries:a(t,"supportsFixedBoundariesBin",!1),supportsStackBy:a(t,"supportsStackBy",!1),supportsSplitBy:a(t,"supportsSplitBy",!1),supportsSnapToData:a(t,"supportsSnapToData",!1),supportsReturnFullIntervalBin:a(t,"supportsReturnFullIntervalBin",!1),supportsFirstDayOfWeek:a(t,"supportsFirstDayOfWeek",!1),supportsNormalization:a(t,"supportsNormalization",!1),supportedStatistics:c(t),supportedNormalizationTypes:l(t)}}function P(o){const t=o.ownershipBasedAccessControlForFeatures,e=o?o.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:a(o,"allowGeometryUpdates",!0),supportsGlobalId:a(o,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:a(o,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:a(o,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:a(o,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:a(o,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:a(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:a(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:a(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:a(t,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:a(e,"supportsAsyncApplyEdits",!1),zDefault:L(o,"zDefault",void 0)}}function n(o){return{operations:{supportsAppend:a(o,"supportsAppend",!1),supportsCoverageQuery:o?.playbackInfo?.klv["0601"]??!1,supportsExportClip:a(o,"supportsExportClip",!1),supportsExportFrameset:a(o,"supportsExportFrameset",!1),supportsMensuration:a(o,"supportsMensuration",!1),supportsUpdate:a(o,"supportsUpdate",!1)}}}},78592:(N,B,s)=>{s.d(B,{O3:()=>T,PU:()=>U,YW:()=>l,ex:()=>L,hv:()=>c,zp:()=>m});var h=s(69287),g=s(67685),j=s(53781),a=s(89141);const L=2.4;function m(u){return(0,g.PN)(u*L)}function U(u){return(0,g.Lz)(u)/L}function z(u,p,y,_){let{color:O,ratio:f}=p,{color:M,ratio:C}=y;C===f&&(1===C?f-=1e-6:C+=1e-6);const i=(0,h.qE)((_-f)/(C-f),0,1);(0,j.l)(u,O.toArray(),M.toArray(),i)}function T(u){const y=new Uint8ClampedArray(2048);if((u=u.filter(({ratio:C})=>C>=0&&C<=1).sort((C,i)=>C.ratio-i.ratio).map(({color:C,ratio:i})=>({color:C,ratio:Math.max(i,.001)}))).length<1)return y;let _=u[0],O=u[0],f=1;const M=(0,a.vt)();for(let C=0;C<512;C++){const i=(C+.5)/512;for(;i>O.ratio&&f<u.length;)_=O,O=u[f++];z(M,_,O,i),y.set(M,4*C)}return y}function c(u,p,y){const _=Math.sqrt(u**2+p**2)/y;return _>1?0:3/(Math.PI*y**2)*(1-_**2)**2}function l(u){return"function"==typeof u?u:u?p=>+p[u]:()=>1}},98789:(N,B,s)=>{s.d(B,{q:()=>g});var h=s(23743);function g(j,a,L){if(!L?.features||!L.hasZ)return;const m=(0,h.N)(L.geometryType,a,j.outSpatialReference);if(null!=m)for(const U of L.features)m(U.geometry)}},93327:(N,B,s)=>{s.d(B,{A:()=>C});var O,h=s(8189),g=s(81098),j=s(49976),a=s(71065),L=s(77806),m=s(85211),T=(s(3248),s(35150),s(17221)),c=s(76576),l=s(50305),u=s(32034),p=s(61320),y=s(6434),_=s(29141);const f=new j.J({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let M=O=class extends a.A{constructor(i){super(i),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(i,v){return this.readFeaturesWithClass(i,v,g.A)}writeGeometryType(i,v,P,n){if(i)return void f.write(i,v,P,n);const{features:o}=this;if(o)for(const t of o)if(null!=t?.geometry)return void f.write(t.geometry.type,v,P,n)}readQueryGeometry(i,v){if(!i)return null;const P=!!i.spatialReference,n=(0,p.rS)(i);return n&&!P&&v.spatialReference&&(n.spatialReference=u.A.fromJSON(v.spatialReference)),n}writeSpatialReference(i,v){if(i)return void(v.spatialReference=i.toJSON());const{features:P}=this;if(P)for(const n of P)if(n&&null!=n.geometry&&n.geometry.spatialReference)return void(v.spatialReference=n.geometry.spatialReference.toJSON())}clone(){return new O(this.cloneProperties())}cloneProperties(){return(0,L.o8)({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(i){const v=this.write();if(v.features&&Array.isArray(i)&&i.length>0)for(let P=0;P<v.features.length;P++){const n=v.features[P];if(n.geometry){const o=i?.[P];n.geometry=o?.toJSON()||n.geometry}}return v}quantize(i){const{scale:[v,P],translate:[n,o]}=i,d=this.features,I=this._getQuantizationFunction(this.geometryType,S=>Math.round((S-n)/v),S=>Math.round((o-S)/P));for(let S=0,R=d.length;S<R;S++)I?.(d[S].geometry)||(d.splice(S,1),S--,R--);return this.transform=i,this}unquantize(){const{geometryType:i,features:v,transform:P}=this;if(!P)return this;const{translate:[n,o],scale:[t,e]}=P;let S=null,R=null;if(this.hasZ&&null!=P?.scale?.[2]){const{translate:[,,b],scale:[,,w]}=P;S=W=>W*w+b}if(this.hasM&&null!=P?.scale?.[3]){const{translate:[,,,b],scale:[,,,w]}=P;R=W=>null==W?W:W*w+b}const x=this._getHydrationFunction(i,b=>b*t+n,b=>o-b*e,S,R);for(const{geometry:b}of v)null!=b&&x&&x(b);return this.transform=null,this}readFeaturesWithClass(i,v,P){const n=u.A.fromJSON(v.spatialReference),o=[];for(let t=0;t<i.length;t++){const e=i[t],d=P.fromJSON(e),I=e.geometry?.spatialReference;null==d.geometry||I||(d.geometry.spatialReference=n);const S=e.aggregateGeometries,R=d.aggregateGeometries;if(S&&null!=R)for(const x in R){const b=R[x],w=S[x],W=w?.spatialReference;null==b||W||(b.spatialReference=n)}o.push(d)}return o}_quantizePoints(i,v,P){let n,o;const t=[];for(let e=0,d=i.length;e<d;e++){const I=i[e];if(e>0){const S=v(I[0]),R=P(I[1]);S===n&&R===o||(t.push([S-n,R-o]),n=S,o=R)}else n=v(I[0]),o=P(I[1]),t.push([n,o])}return t.length>0?t:null}_getQuantizationFunction(i,v,P){return"point"===i?n=>(n.x=v(n.x),n.y=P(n.y),n):"polyline"===i||"polygon"===i?n=>{const o=(0,p.Bi)(n)?n.rings:n.paths,t=[];for(let e=0,d=o.length;e<d;e++){const S=this._quantizePoints(o[e],v,P);S&&t.push(S)}return t.length>0?((0,p.Bi)(n)?n.rings=t:n.paths=t,n):null}:"multipoint"===i?n=>{const o=this._quantizePoints(n.points,v,P);return o&&o.length>0?(n.points=o,n):null}:"extent"===i?n=>n:null}_getHydrationFunction(i,v,P,n,o){return"point"===i?t=>{t.x=v(t.x),t.y=P(t.y),n&&(t.z=n(t.z))}:"polyline"===i||"polygon"===i?t=>{const e=(0,p.Bi)(t)?t.rings:t.paths;let d,I;for(let S=0,R=e.length;S<R;S++){const x=e[S];for(let b=0,w=x.length;b<w;b++){const W=x[b];b>0?(d+=W[0],I+=W[1]):(d=W[0],I=W[1]),W[0]=v(d),W[1]=P(I)}}if(n&&o)for(let S=0,R=e.length;S<R;S++){const x=e[S];for(let b=0,w=x.length;b<w;b++){const W=x[b];W[2]=n(W[2]),W[3]=o(W[3])}}else if(n)for(let S=0,R=e.length;S<R;S++){const x=e[S];for(let b=0,w=x.length;b<w;b++){const W=x[b];W[2]=n(W[2])}}else if(o)for(let S=0,R=e.length;S<R;S++){const x=e[S];for(let b=0,w=x.length;b<w;b++){const W=x[b];W[2]=o(W[2])}}}:"extent"===i?t=>{t.xmin=v(t.xmin),t.ymin=P(t.ymin),t.xmax=v(t.xmax),t.ymax=P(t.ymax),n&&null!=t.zmax&&null!=t.zmin&&(t.zmax=n(t.zmax),t.zmin=n(t.zmin)),o&&null!=t.mmax&&null!=t.mmin&&(t.mmax=o(t.mmax),t.mmin=o(t.mmin))}:"multipoint"===i?t=>{const e=t.points;let d,I;for(let S=0,R=e.length;S<R;S++){const x=e[S];S>0?(d+=x[0],I+=x[1]):(d=x[0],I=x[1]),x[0]=v(d),x[1]=P(I)}if(n&&o)for(let S=0,R=e.length;S<R;S++){const x=e[S];x[2]=n(x[2]),x[3]=o(x[3])}else if(n)for(let S=0,R=e.length;S<R;S++){const x=e[S];x[2]=n(x[2])}else if(o)for(let S=0,R=e.length;S<R;S++){const x=e[S];x[2]=o(x[2])}}:null}};(0,h._)([(0,m.MZ)({type:String,json:{write:!0}})],M.prototype,"displayFieldName",void 0),(0,h._)([(0,m.MZ)({type:Boolean,json:{write:{overridePolicy:i=>({enabled:i})}}})],M.prototype,"exceededTransferLimit",void 0),(0,h._)([(0,m.MZ)({type:[g.A],json:{write:!0}})],M.prototype,"features",void 0),(0,h._)([(0,T.w)("features")],M.prototype,"readFeatures",null),(0,h._)([(0,m.MZ)({type:[_.A],json:{write:!0}})],M.prototype,"fields",void 0),(0,h._)([(0,m.MZ)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:f.read}}})],M.prototype,"geometryType",void 0),(0,h._)([(0,l.K)("geometryType")],M.prototype,"writeGeometryType",null),(0,h._)([(0,m.MZ)({type:Boolean,json:{write:{overridePolicy:i=>({enabled:i})}}})],M.prototype,"hasM",void 0),(0,h._)([(0,m.MZ)({type:Boolean,json:{write:{overridePolicy:i=>({enabled:i})}}})],M.prototype,"hasZ",void 0),(0,h._)([(0,m.MZ)({types:y.yR,json:{write:!0}})],M.prototype,"queryGeometry",void 0),(0,h._)([(0,T.w)("queryGeometry")],M.prototype,"readQueryGeometry",null),(0,h._)([(0,m.MZ)({type:u.A,json:{write:!0}})],M.prototype,"spatialReference",void 0),(0,h._)([(0,l.K)("spatialReference")],M.prototype,"writeSpatialReference",null),(0,h._)([(0,m.MZ)({json:{write:!0}})],M.prototype,"transform",void 0),M=O=(0,h._)([(0,c.$)("esri.rest.support.FeatureSet")],M),M.prototype.toJSON.isDefaultToJSON=!0;const C=M},68470:(N,B,s)=>{s.d(B,{K:()=>u,Q:()=>T});var h=s(8189),g=s(49976),j=s(35150),a=s(85211),U=(s(3248),s(40707),s(15463)),z=s(76576);const T=(0,g.O)()({naturalLog:"natural-log",squareRoot:"square-root",percentOfTotal:"percent-of-total",log:"log",field:"field"}),c="percent-of-total",l="field",u=p=>{let y=class extends p{constructor(){super(...arguments),this.normalizationField=null,this.normalizationMaxValue=null,this.normalizationMinValue=null,this.normalizationTotal=null}get normalizationType(){let _=this._get("normalizationType");const O=!!this.normalizationField,f=null!=this.normalizationTotal;return O||f?(_=O&&l||f&&c||null,O&&f&&j.A.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):_!==l&&_!==c||(_=null),_}set normalizationType(_){this._set("normalizationType",_)}};return(0,h._)([(0,a.MZ)({type:String,json:{name:"parameters.normalizationField",write:!0}})],y.prototype,"normalizationField",void 0),(0,h._)([(0,a.MZ)({type:Number,json:{name:"parameters.normalizationMaxValue",write:!0}})],y.prototype,"normalizationMaxValue",void 0),(0,h._)([(0,a.MZ)({type:Number,json:{name:"parameters.normalizationMinValue",write:!0}})],y.prototype,"normalizationMinValue",void 0),(0,h._)([(0,a.MZ)({type:Number,json:{name:"parameters.normalizationTotal",write:!0}})],y.prototype,"normalizationTotal",void 0),(0,h._)([(0,U.e)(T,{name:"parameters.normalizationType"})],y.prototype,"normalizationType",null),y=(0,h._)([(0,z.$)("esri.rest.support.NormalizationBinParametersMixin")],y),y}},32117:(N,B,s)=>{s.d(B,{$w:()=>f,Bu:()=>R,DW:()=>e,FH:()=>ve,FM:()=>z,G9:()=>a,GV:()=>C,Go:()=>c,K3:()=>he,Kn:()=>o,MM:()=>p,MO:()=>fe,Nl:()=>x,Ny:()=>i,O2:()=>b,UE:()=>w,YC:()=>Oe,YF:()=>$,ZO:()=>de,_1:()=>I,_H:()=>P,_W:()=>M,_d:()=>t,bs:()=>pe,dI:()=>Pe,e6:()=>l,gQ:()=>U,iA:()=>_e,jn:()=>_,lW:()=>u,mA:()=>y,n5:()=>W,pM:()=>d,pV:()=>n,pk:()=>Se,rB:()=>Ce,s4:()=>j,xo:()=>S,yH:()=>v,yX:()=>Ae,zb:()=>ue,zr:()=>O});var h=s(46988);function j(r,E,A,F){return function g(r){return"function"==typeof r}(r)?r(E,A,F):r}function a(r){return[r.r,r.g,r.b,r.a]}const L=" /-,\n";function m(r){let E=r.length;for(;E--;)if(!L.includes(r.charAt(E)))return!1;return!0}function U(r,E){const A=[];let F=0,K=-1;do{if(K=r.indexOf("[",F),K>=F){if(K>F){const D=r.slice(F,K);A.push([D,null,m(D)])}if(F=K+1,K=r.indexOf("]",F),K>=F){if(K>F){const D=E[r.slice(F,K)];D&&A.push([null,D,!1])}F=K+1}}}while(-1!==K);if(F<r.length){const D=r.slice(F);A.push([D,null,m(D)])}return A}function z(r,E,A,F){let K="",D=null;for(const k of E){const[Z,V,H]=k;if(Z)H?D=Z:(D&&(K+=D,D=null),K+=Z);else{let X=V;null!=A&&(X=fe(V,A));const Q=r.attributes[X];Q&&(D&&(K+=D,D=null),K+=Q)}}return function T(r,E){switch("string"!=typeof r&&(r=String(r)),E){case"LowerCase":return r.toLowerCase();case"Allcaps":return r.toUpperCase();default:return r}}(K,F)}function c(r,E,A,F,K,D,k=!0){const Z=E/K,V=A/D,H=Math.ceil(Z/2),X=Math.ceil(V/2);for(let Q=0;Q<D;Q++)for(let G=0;G<K;G++){const ee=4*(G+(k?D-Q-1:Q)*K);let J=0,te=0,re=0,oe=0,ie=0,ae=0,ne=0;const ce=(Q+.5)*V;for(let se=Math.floor(Q*V);se<(Q+1)*V;se++){const ge=Math.abs(ce-(se+.5))/X,Ie=(G+.5)*Z,De=ge*ge;for(let le=Math.floor(G*Z);le<(G+1)*Z;le++){let Y=Math.abs(Ie-(le+.5))/H;const q=Math.sqrt(De+Y*Y);q>=-1&&q<=1&&(J=2*q*q*q-3*q*q+1,J>0&&(Y=4*(le+se*E),ne+=J*r[Y+3],re+=J,r[Y+3]<255&&(J=J*r[Y+3]/250),oe+=J*r[Y],ie+=J*r[Y+1],ae+=J*r[Y+2],te+=J))}}F[ee]=oe/te,F[ee+1]=ie/te,F[ee+2]=ae/te,F[ee+3]=ne/re}}function l(r){return r?[r[0],r[1],r[2],r[3]/255]:[0,0,0,0]}function u(r){return r.data?.symbol??null}function p(r){return"CIMVectorMarker"===r.type||"CIMPictureMarker"===r.type||"CIMBarChartMarker"===r.type||"CIMCharacterMarker"===r.type||"CIMPieChartMarker"===r.type||"CIMStackedBarChartMarker"===r.type}function y(r){return"CIMGradientStroke"===r.type||"CIMPictureStroke"===r.type||"CIMSolidStroke"===r.type}function _(r){return null!=r&&("CIMGradientFill"===r.type||"CIMHatchFill"===r.type||"CIMPictureFill"===r.type||"CIMSolidFill"===r.type||"CIMWaterFill"===r.type)}function O(r){return null!=r&&("CIMMarkerPlacementAlongLineRandomSize"===r.type||"CIMMarkerPlacementAlongLineSameSize"===r.type||"CIMMarkerPlacementAlongLineVariableSize"===r.type||"CIMMarkerPlacementAtExtremities"===r.type||"CIMMarkerPlacementAtMeasuredUnits"===r.type||"CIMMarkerPlacementAtRatioPositions"===r.type||"CIMMarkerPlacementOnLine"===r.type||"CIMMarkerPlacementOnVertices"===r.type)}const f=(r,E=0)=>null==r||isNaN(r)?E:r,M=(r,E)=>r??E,C=(r,E)=>r??E,i=r=>r.tintColor?l(r.tintColor):[255,255,255,1],v=r=>{if(!r)return!1;for(const E of r)switch(E.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function P(){return Promise.all([s.e(3930),s.e(2076),s.e(4108)]).then(s.bind(s,27815))}function n(r){if(!r)return"normal";switch(r.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function o(r){if(!r)return"normal";switch(r.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function t(r){let E="normal",A="normal";if(r){const F=r.toLowerCase();F.includes("italic")?E="italic":F.includes("oblique")&&(E="oblique"),F.includes("bold")?A="bold":F.includes("light")&&(A="lighter")}return{style:E,weight:A}}function e(r){return r.underline?"underline":r.strikethrough?"line-through":"none"}function d(r){if(!r)return null;switch(r.type){case"CIMPolygonSymbol":if(r.symbolLayers)for(const E of r.symbolLayers){const A=d(E);if(null!=A)return A}break;case"CIMTextSymbol":return d(r.symbol);case"CIMSolidFill":return r.color}return null}function I(r){if(r)switch(r.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const E=r.symbolLayers;if(E)for(const A of E){const F=I(A);if(null!=F)return F}break}case"CIMTextSymbol":return I(r.symbol);case"CIMSolidStroke":return r.color}}function S(r){if(r)switch(r.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(r.symbolLayers)for(const E of r.symbolLayers){const A=S(E);if(void 0!==A)return A}break;case"CIMTextSymbol":return S(r.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return r.width}}function R(r){switch(r){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function x(r){switch(r){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function b(r){return(r?Object.keys(r):[]).map(E=>({name:E,alias:E,type:"string"==typeof r[E]?"esriFieldTypeString":"esriFieldTypeDouble"}))}const w=r=>r.includes("data:image/svg+xml");function W(r){if(!r)return null;switch(r.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function $(r){return r&&r.charAt(0).toLowerCase()+r.slice(1)}function ue(r,E,A,F,K,D,k=!0){const{infos:Z}=D;let V=1,H=0,X=0,Q=0,G=1;for(const{absoluteAnchorPoint:te,offsetX:re,offsetY:oe,rotation:ie,size:ae,frameHeight:ne,rotateClockWise:ce,scaleSymbolsProportionally:se}of Z)G=te?1:V,X=me(re,oe,H,G,X),Q=ye(re,oe,H,G,Q),ne&&(se||k)&&(V*=ae/ne),H=Me(ie,ce,H);const ee=me(F,K,H,G,X),J=ye(F,K,H,G,Q);return{size:r*V,rotation:Me(E,A,H),offsetX:ee,offsetY:J}}function de(r){if(null==r)return!1;if(Array.isArray(r))return r.every(E=>de(E));switch(typeof r){case"string":return!!r;case"number":return!isNaN(r)}}function _e(r,E){if("color"===E||"outlinecolor"===E||"backgroundcolor"===E||"borderlinecolor"===E||"tintcolor"===E)return[...h.K[E]];const A=h.D[r];if(!A)throw new Error(`InternalError: default value for type ${r}.`);return A[E]}function he(r){return"string"==typeof r?function Ee(r){return r.split(" ").map(E=>Number(E))}(r):r}function ve(r){return r?.dashTemplate&&(r.dashTemplate=he(r.dashTemplate)),r}function pe(r){if(null==r)return"Normal";switch(r.type){case"CIMTextSymbol":return r.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const E=r.symbolLayers;if(!E)return"Normal";for(const A of E)if("CIMVectorMarker"===A.type)return pe(A)}break;case"CIMVectorMarker":{const E=r.markerGraphics;if(!E)return"Normal";for(const A of E)if(A.symbol)return pe(A.symbol)}}return"Normal"}function Oe(r){if(r)switch(r.type){case"CIMTextSymbol":return r.height;case"CIMPointSymbol":{let E=0;if(r.symbolLayers)for(const A of r.symbolLayers)if(A)switch(A.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const F=A.size??h.D.CIMVectorMarker.size;F>E&&(E=F);break}}return E}case"CIMLineSymbol":case"CIMPolygonSymbol":{let E=0;if(r.symbolLayers)for(const A of r.symbolLayers)if(A)switch(A.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const F=A.width;null!=F&&F>E&&(E=F);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(A.markerPlacement&&O(A.markerPlacement)){const F=A.size??h.D.CIMVectorMarker.size;F>E&&(E=F)}break;case"CIMPictureFill":{const F=A.height;null!=F&&F>E&&(E=F)}}return E}}}function fe(r,E){if(null!==E){const A=E.get(r);return A?A.name:r}return r}function Se(r){return r.map(E=>({...E,propertyName:$(E.propertyName)}))}function Ce(r){const E={};for(const A in r){const F=r[A];E[$(A)]=F}return E}function ye(r,E,A,F,K){const D=A*Math.PI/180;if(D){const k=Math.cos(D);return(Math.sin(D)*r+k*E)*F+K}return E*F+K}function me(r,E,A,F,K){const D=A*Math.PI/180;return D?(Math.cos(D)*r-Math.sin(D)*E)*F+K:r*F+K}function Me(r,E,A){return E?A-r:A+r}function Pe(r,E,A){const F="Color"===A||"TintColor"===A||"ToColor"===A,K="Rotation"===A||"Angle"===A||"ToRotation"===A;let D=E[$(A)];if(null!=D&&(F?D=[D[0]/255,D[1]/255,D[2]/255,D[3]/255]:K&&(D*=Math.PI/180)),null==D&&(D=_e(E.type,A.toLowerCase()),null!=D&&(F?D=[D[0]/255,D[1]/255,D[2]/255,D[3]]:K&&(D*=Math.PI/180))),null!=E.primitiveName){const k=r[E.primitiveName];if(null!=k){const Z=k[A];null==Z||("string"==typeof Z||"number"==typeof Z||Array.isArray(Z)?(D=Z,null!=D&&(F?D=[D[0]/255,D[1]/255,D[2]/255,D[3]/255]:K&&(D*=Math.PI/180))):(D={valueExpressionInfo:Z,defaultValue:D},null!=D&&(F?D={type:"Process",op:"ArcadeColor",value:D}:K&&(D={type:"Process",op:"Divide",left:D,right:180/Math.PI}))))}}if(null==D)throw new Error(`Failed to derive a value or an expression for "${A}".`);return D}function Ae(r,E){return Math.max(Math.min((r??E)/100,1),0)}},91644:(N,B,s)=>{s.d(B,{A7:()=>z,Cx:()=>T,Hk:()=>c,JJ:()=>y,SF:()=>l,UK:()=>U,jM:()=>u,x3:()=>p}),s(3248);var g=s(88521),j=s(55417),a=s(46602),L=s(47705),m=s(48254);const U=a.A.fromJSON(m.Cb),z=j.A.fromJSON(m.yM),T=g.A.fromJSON(m.WR),c=L.A.fromJSON(m.JZ);function l(_){if(null==_)return null;switch(_.type){case"mesh":return null;case"point":case"multipoint":return U;case"polyline":return z;case"polygon":case"extent":return T}return null}const u=a.A.fromJSON(m.nC),p=j.A.fromJSON(m.HW),y=g.A.fromJSON(m.b6)},48254:(N,B,s)=>{s.d(B,{Cb:()=>j,HW:()=>z,JR:()=>g,JZ:()=>m,WR:()=>L,b6:()=>T,fT:()=>h,nC:()=>U,yM:()=>a});const h=[252,146,31,255],g=[153,153,153,255],j={type:"esriSMS",style:"esriSMSCircle",size:6,color:h,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},a={type:"esriSLS",style:"esriSLSSolid",width:.75,color:h},L={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},m={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},U={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},z={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},T={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},71655:(N,B,s)=>{var h,g;s.d(B,{X:()=>h}),(g=h||(h={}))[g.SAVE=0]="SAVE",g[g.SAVE_AS=1]="SAVE_AS"}}]);