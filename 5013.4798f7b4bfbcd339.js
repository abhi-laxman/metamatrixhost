"use strict";(self.webpackChunkAngularClient=self.webpackChunkAngularClient||[]).push([[5013],{55144:(Y,w,t)=>{t.d(w,{T:()=>h,d:()=>N});const h={Base64:0,Hex:1,String:2,Raw:3},c=8,F=(1<<c)-1;function R(i,E){const _=(65535&i)+(65535&E);return(i>>16)+(E>>16)+(_>>16)<<16|65535&_}function P(i,E,_,u,y,m){return R(function T(i,E){return i<<E|i>>>32-E}(R(R(E,i),R(u,m)),y),_)}function S(i,E,_,u,y,m,g){return P(E&_|~E&u,i,E,y,m,g)}function L(i,E,_,u,y,m,g){return P(E&u|_&~u,i,E,y,m,g)}function f(i,E,_,u,y,m,g){return P(E^_^u,i,E,y,m,g)}function W(i,E,_,u,y,m,g){return P(_^(E|~u),i,E,y,m,g)}function N(i,E=h.Hex){const _=E||h.Base64,u=function b(i,E){i[E>>5]|=128<<E%32,i[14+(E+64>>>9<<4)]=E;let _=1732584193,u=-271733879,y=-1732584194,m=271733878;for(let g=0;g<i.length;g+=16){const G=_,J=u,A=y,D=m;_=S(_,u,y,m,i[g],7,-680876936),m=S(m,_,u,y,i[g+1],12,-389564586),y=S(y,m,_,u,i[g+2],17,606105819),u=S(u,y,m,_,i[g+3],22,-1044525330),_=S(_,u,y,m,i[g+4],7,-176418897),m=S(m,_,u,y,i[g+5],12,1200080426),y=S(y,m,_,u,i[g+6],17,-1473231341),u=S(u,y,m,_,i[g+7],22,-45705983),_=S(_,u,y,m,i[g+8],7,1770035416),m=S(m,_,u,y,i[g+9],12,-1958414417),y=S(y,m,_,u,i[g+10],17,-42063),u=S(u,y,m,_,i[g+11],22,-1990404162),_=S(_,u,y,m,i[g+12],7,1804603682),m=S(m,_,u,y,i[g+13],12,-40341101),y=S(y,m,_,u,i[g+14],17,-1502002290),u=S(u,y,m,_,i[g+15],22,1236535329),_=L(_,u,y,m,i[g+1],5,-165796510),m=L(m,_,u,y,i[g+6],9,-1069501632),y=L(y,m,_,u,i[g+11],14,643717713),u=L(u,y,m,_,i[g],20,-373897302),_=L(_,u,y,m,i[g+5],5,-701558691),m=L(m,_,u,y,i[g+10],9,38016083),y=L(y,m,_,u,i[g+15],14,-660478335),u=L(u,y,m,_,i[g+4],20,-405537848),_=L(_,u,y,m,i[g+9],5,568446438),m=L(m,_,u,y,i[g+14],9,-1019803690),y=L(y,m,_,u,i[g+3],14,-187363961),u=L(u,y,m,_,i[g+8],20,1163531501),_=L(_,u,y,m,i[g+13],5,-1444681467),m=L(m,_,u,y,i[g+2],9,-51403784),y=L(y,m,_,u,i[g+7],14,1735328473),u=L(u,y,m,_,i[g+12],20,-1926607734),_=f(_,u,y,m,i[g+5],4,-378558),m=f(m,_,u,y,i[g+8],11,-2022574463),y=f(y,m,_,u,i[g+11],16,1839030562),u=f(u,y,m,_,i[g+14],23,-35309556),_=f(_,u,y,m,i[g+1],4,-1530992060),m=f(m,_,u,y,i[g+4],11,1272893353),y=f(y,m,_,u,i[g+7],16,-155497632),u=f(u,y,m,_,i[g+10],23,-1094730640),_=f(_,u,y,m,i[g+13],4,681279174),m=f(m,_,u,y,i[g],11,-358537222),y=f(y,m,_,u,i[g+3],16,-722521979),u=f(u,y,m,_,i[g+6],23,76029189),_=f(_,u,y,m,i[g+9],4,-640364487),m=f(m,_,u,y,i[g+12],11,-421815835),y=f(y,m,_,u,i[g+15],16,530742520),u=f(u,y,m,_,i[g+2],23,-995338651),_=W(_,u,y,m,i[g],6,-198630844),m=W(m,_,u,y,i[g+7],10,1126891415),y=W(y,m,_,u,i[g+14],15,-1416354905),u=W(u,y,m,_,i[g+5],21,-57434055),_=W(_,u,y,m,i[g+12],6,1700485571),m=W(m,_,u,y,i[g+3],10,-1894986606),y=W(y,m,_,u,i[g+10],15,-1051523),u=W(u,y,m,_,i[g+1],21,-2054922799),_=W(_,u,y,m,i[g+8],6,1873313359),m=W(m,_,u,y,i[g+15],10,-30611744),y=W(y,m,_,u,i[g+6],15,-1560198380),u=W(u,y,m,_,i[g+13],21,1309151649),_=W(_,u,y,m,i[g+4],6,-145523070),m=W(m,_,u,y,i[g+11],10,-1120210379),y=W(y,m,_,u,i[g+2],15,718787259),u=W(u,y,m,_,i[g+9],21,-343485551),_=R(_,G),u=R(u,J),y=R(y,A),m=R(m,D)}return[_,u,y,m]}(function $(i){const E=[];for(let _=0,u=i.length*c;_<u;_+=c)E[_>>5]|=(i.charCodeAt(_/c)&F)<<_%32;return E}(i),i.length*c);switch(_){case h.Raw:return u;case h.Hex:return function I(i){const E="0123456789abcdef",_=[];for(let u=0,y=4*i.length;u<y;u++)_.push(E.charAt(i[u>>2]>>u%4*8+4&15)+E.charAt(i[u>>2]>>u%4*8&15));return _.join("")}(u);case h.String:return function B(i){const E=[];for(let _=0,u=32*i.length;_<u;_+=c)E.push(String.fromCharCode(i[_>>5]>>>_%32&F));return E.join("")}(u);case h.Base64:return function j(i){const u=[];for(let y=0,m=4*i.length;y<m;y+=3){const g=(i[y>>2]>>y%4*8&255)<<16|(i[y+1>>2]>>(y+1)%4*8&255)<<8|i[y+2>>2]>>(y+2)%4*8&255;for(let G=0;G<4;G++)u.push(8*y+6*G>32*i.length?"=":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(g>>6*(3-G)&63))}return u.join("")}(u)}}},36812:(Y,w,t)=>{t.d(w,{A:()=>i});var W,h=t(8189),c=t(71065),F=t(85211),I=(t(3248),t(35150),t(40707),t(76576)),j=t(92771),T=t(62789),P=t(19890),S=t(14214),L=t(25866),f=t(63842);let b=W=class extends c.A{constructor(E){super(E),this.translation=(0,L.vt)(),this.rotationAxis=(0,L.ci)(f.up),this.rotationAngle=0,this.scale=(0,L.fA)(1,1,1)}get rotation(){return(0,f.i4)(this.rotationAxis,this.rotationAngle)}set rotation(E){this.rotationAxis=(0,L.o8)((0,f.yo)(E)),this.rotationAngle=(0,f.g7)(E)}get localMatrix(){const E=(0,T.vt)();return(0,P.x8)(N,(0,f.yo)(this.rotation),(0,f.$I)(this.rotation)),(0,j.o1)(E,N,this.translation,this.scale),E}get localMatrixInverse(){return(0,j.B8)((0,T.vt)(),this.localMatrix)}equals(E){return this===E||null!=E&&(0,j.t2)(this.localMatrix,E.localMatrix)}clone(){const E={translation:(0,L.o8)(this.translation),rotationAxis:(0,L.o8)(this.rotationAxis),rotationAngle:this.rotationAngle,scale:(0,L.o8)(this.scale)};return new W(E)}};(0,h._)([(0,F.MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],b.prototype,"translation",void 0),(0,h._)([(0,F.MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],b.prototype,"rotationAxis",void 0),(0,h._)([(0,F.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],b.prototype,"rotationAngle",void 0),(0,h._)([(0,F.MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],b.prototype,"scale",void 0),(0,h._)([(0,F.MZ)()],b.prototype,"rotation",null),(0,h._)([(0,F.MZ)()],b.prototype,"localMatrix",null),(0,h._)([(0,F.MZ)()],b.prototype,"localMatrixInverse",null),b=W=(0,h._)([(0,I.$)("esri.geometry.support.MeshTransform")],b);const N=(0,S.vt)(),i=b},63842:(Y,w,t)=>{t.d(w,{$I:()=>_,AU:()=>N,Cr:()=>f,g7:()=>E,i4:()=>L,ui:()=>W,up:()=>y,vt:()=>I,yo:()=>i});var h=t(69287),c=t(92771),F=t(19890),R=t(14214),$=t(28714),B=t(25866);function I(x=y){return[x[0],x[1],x[2],x[3]]}function L(x,M,o=I()){return(0,$.c)(o,x),o[3]=M,o}function f(x,M,o){return(0,$.e)(o,x,M),(0,$.n)(o,o),o[3]=-(0,$.r)(x,M),o}function W(x,M=I()){const o=(0,c.l)(m,x);return u(M,(0,h.KJ)((0,F.Xd)(M,o))),M}function b(x,M,o=I()){return(0,F.x8)(m,x,_(x)),(0,F.x8)(g,M,_(M)),(0,F.lw)(m,g,m),u(o,(0,h.KJ)((0,F.Xd)(o,m)))}function N(x,M,o,d=I()){return L(B.Cw,x,J),L(B.JP,M,A),L(B.Cb,o,D),b(J,A,J),b(J,D,d),d}function i(x){return x}function E(x){return x[3]}function _(x){return(0,h.kU)(x[3])}function u(x,M){return x[3]=M,x}const y=[0,0,1,0],m=(0,R.vt)(),g=(0,R.vt)(),J=(I(),I()),A=I(),D=I()},33136:(Y,w,t)=>{t.r(w),t.d(w,{default:()=>dt});var h=t(10467),c=t(8189),F=t(81098),R=t(92165),$=t(90660),B=t(31178),I=t(5922),j=t(35150),T=t(11432),P=t(39693),S=t(56492),L=t(48900),f=t(85211),N=(t(3248),t(40707),t(74220)),i=t(17221),E=t(76576),_=t(26514),u=t(1749),y=t(95478),m=t(41377),g=t(94376),G=t(25936),J=t(23e3),A=t(58277),D=t(17049),x=t(85551),M=t(33036),o=t(46406),d=t(84311),v=t(71065),O=t(86300);function U({associatedLayer:s,serviceUpdateTimeStamp:p}){const n=s?.editingInfo?.lastEditDate,K=s?.serverGens,V=null!=n,z=null!=p,X=V&&z&&p.lastUpdate!==n.getTime();return V&&(X||!z&&K?.minServerGen!==K?.serverGen)}var Z=t(38488),H=t(17181),Q=t(89352);const k=s=>{let p=class extends s{constructor(){super(...arguments),this.serviceTimeInfo=null}get timeInfo(){const n=this.associatedLayer?.timeInfo;if(null==n)return null;const K=n.clone();return(0,O.sv)(K,this.fieldsIndex),K}set timeInfo(n){(0,O.sv)(n,this.fieldsIndex),this._override("timeInfo",n)}get timeExtent(){return this.associatedLayer?.timeExtent}set timeExtent(n){this._override("timeExtent",n)}get timeOffset(){return this.associatedLayer?.timeOffset}set timeOffset(n){this._override("timeOffset",n)}get datesInUnknownTimezone(){return this.associatedLayer?.datesInUnknownTimezone??!1}set datesInUnknownTimezone(n){this._override("datesInUnknownTimezone",n)}loadTimeInfoFromService(n){var K=this;return(0,h.A)(function*(){const{serviceTimeInfo:V}=K;if(null==V)return;const{startTimeField:z,endTimeField:X}=V;if(null==z&&null==X||U({associatedLayer:K.associatedLayer,serviceUpdateTimeStamp:K.serviceUpdateTimeStamp}))return;const q=function(){var de=(0,h.A)(function*(te){let ie=null;try{ie=(yield K.fetchStatistics?.(te,n))?.stats}catch{}if(null==ie)return null;const{minTimeStr:De,min:Le,maxTimeStr:Te,max:je}=ie,ve=te===z?De??Le:Te??je;return null!=ve?new Date(ve):null});return function(ie){return de.apply(this,arguments)}}(),[ee,se]=yield Promise.all([q(z),q(X)]);if(null!=z&&null==ee||null!=X&&null==se)return;const le=new H.A({start:ee,end:se});K.setAtOrigin("timeInfo",new Z.A({endField:X,startField:z,fullTimeExtent:le}),"service")})()}};return(0,c._)([(0,f.MZ)({type:Z.A,json:{read:!1,write:!1}})],p.prototype,"timeInfo",null),(0,c._)([(0,f.MZ)({type:H.A,json:{read:!1,write:!1}})],p.prototype,"timeExtent",null),(0,c._)([(0,f.MZ)({type:Q.A,json:{read:!1,write:!1}})],p.prototype,"timeOffset",null),(0,c._)([(0,f.MZ)({type:Boolean,nonNullable:!0,json:{read:!1,write:!1}})],p.prototype,"datesInUnknownTimezone",null),(0,c._)([(0,f.MZ)({type:re,readOnly:!0,json:{read:{source:"timeInfo"}}})],p.prototype,"serviceTimeInfo",void 0),p=(0,c._)([(0,E.$)("esri.layers.mixins.TemporalSceneLayer")],p),p};let re=class extends v.A{constructor(){super(...arguments),this.endTimeField=null,this.startTimeField=null}};(0,c._)([(0,f.MZ)({type:String})],re.prototype,"endTimeField",void 0),(0,c._)([(0,f.MZ)({type:String})],re.prototype,"startTimeField",void 0),re=(0,c._)([(0,E.$)("esri.layers.mixins.TemporalSceneLayer.SceneServiceTimeInfo")],re);var ae=t(68438),ye=t(86537),oe=t(75783),ce=t(22329),Ee=t(47516),Ke=t(27378),Ze=t(71906),we=t(3404),Ne=t(73258),pe=t(10581),Se=t(6829),Ve=t(54947),Re=t(73975),$e=t(64584),ze=t(64833),Ge=t(3158);let ne=class extends v.A{constructor(){super(...arguments),this.name=null,this.field=null,this.currentRangeExtent=null,this.fullRangeExtent=null,this.type="rangeInfo"}};(0,c._)([(0,f.MZ)({type:String,json:{read:!0,write:{isRequired:!0}}})],ne.prototype,"name",void 0),(0,c._)([(0,f.MZ)({type:String,json:{read:!0,write:{isRequired:!0}}})],ne.prototype,"field",void 0),(0,c._)([(0,f.MZ)({type:[Number],json:{read:!0,write:!0}})],ne.prototype,"currentRangeExtent",void 0),(0,c._)([(0,f.MZ)({type:[Number],json:{read:!0,write:!0}})],ne.prototype,"fullRangeExtent",void 0),(0,c._)([(0,f.MZ)({type:["rangeInfo"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],ne.prototype,"type",void 0),ne=(0,c._)([(0,E.$)("esri.layers.support.RangeInfo")],ne);var fe,Ce=t(89563),Je=t(77806),He=t(25968),Ue=t(96996),ge=t(55861),Fe=t(13970);let Me=fe=class extends(v.A.JSONSupportMixin(B.A.ofType(ge.A))){constructor(s){super(s)}clone(){return new fe(this.items.map(s=>s.clone()))}write(s,p){return this.toJSON(p)}toJSON(s){const p=s?.layer?.spatialReference;return p?this.toArray().map(n=>{if(!p.equals(n.spatialReference)){if(!(0,Fe.canProjectWithoutEngine)(n.spatialReference,p))return s?.messages?.push(new Ue.A("scenefilter:unsupported","Scene filters with incompatible spatial references are not supported",{modification:this,spatialReference:s.layer.spatialReference,context:s})),null;const V=new ge.A;(0,Fe.projectPolygon)(n,V,p),n=V}const K=n.toJSON(s);return delete K.spatialReference,K}).filter(n=>null!=n):(s?.messages?.push(new Ue.A("scenefilter:unsupported","Writing Scene filters without context layer is not supported",{modification:this,spatialReference:s.layer.spatialReference,context:s})),this.toArray().map(n=>n.toJSON(s)))}static fromJSON(s,p){const n=new fe;return s.forEach(K=>n.add(ge.A.fromJSON(K,p))),n}};Me=fe=(0,c._)([(0,E.$)("esri.layers.support.PolygonCollection")],Me);const me=Me;var Ie,Qe=t(88135);let ue=Ie=class extends v.A{constructor(s){super(s),this.spatialRelationship="disjoint",this.geometries=new me,this._geometriesSource=null}initialize(){this.addHandles((0,L.on)(()=>this.geometries,"after-changes",()=>this.geometries=this.geometries,L.OH))}readGeometries(s,p,n){Array.isArray(s)?this.geometries=me.fromJSON(s,n):this._geometriesSource={url:(0,Qe.f)(s,n),context:n}}loadGeometries(s,p){var n=this;return(0,h.A)(function*(){if(null==n._geometriesSource)return;const{url:K,context:V}=n._geometriesSource,z=yield(0,Ce.A)(K,{responseType:"json",signal:p?.signal}),X=s.toJSON(),q=z.data.map(ee=>({...ee,spatialReference:X}));n.geometries=me.fromJSON(q,V),n._geometriesSource=null})()}clone(){const s=new Ie({geometries:(0,Je.o8)(this.geometries),spatialRelationship:this.spatialRelationship});return s._geometriesSource=this._geometriesSource,s}};(0,c._)([(0,f.MZ)({type:["disjoint","contains"],nonNullable:!0,json:{write:{isRequired:!0}}})],ue.prototype,"spatialRelationship",void 0),(0,c._)([(0,f.MZ)({type:me,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}}),(0,He.P)({origins:["web-scene","portal-item"],type:"resource",prefix:"geometries",contentAddressed:!0})],ue.prototype,"geometries",void 0),(0,c._)([(0,i.w)(["web-scene","portal-item"],"geometries")],ue.prototype,"readGeometries",null),ue=Ie=(0,c._)([(0,E.$)("esri.layers.support.SceneFilter")],ue);const Xe=ue;var Ye=t(45272);function Oe(){return(Oe=(0,h.A)(function*({fieldName:s,statisticsInfo:p,errorContext:n,fieldsIndex:K,path:V,customParameters:z,apiKey:X,signal:q}){if(null==p)throw new I.A(`${n}:no-cached-statistics`,"Cached statistics are not available for this layer");const ee=K.get(s);if(null==ee)throw new I.A(`${n}:field-unexisting`,`Field '${s}' does not exist on the layer`);const se=p.find(te=>te.name===ee.name);if(null==se)throw new I.A(`${n}:no-cached-statistics`,"Cached statistics for this attribute are not available");const le=(0,Ye.fj)(V,se.href),{data:de}=yield(0,Ce.A)(le,{query:{f:"json",...z,token:X},responseType:"json",signal:q});return de})).apply(this,arguments)}var qe=t(8691),et=t(31595),tt=t(87086),he=t(73812),st=t(41843);function Pe(){return(Pe=(0,h.A)(function*(s){const p=[];for(const n of s)n.name.toLowerCase().endsWith(".zip")?p.push(ot(n)):p.push(Promise.resolve(n));return(yield Promise.all(p)).flat()})).apply(this,arguments)}function ot(s){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,h.A)(function*(s){const{BlobReader:p,ZipReader:n,BlobWriter:K}=yield Promise.all([t.e(2076),t.e(7344)]).then(t.bind(t,47344)),V=[];return(yield new n(new p(s)).getEntries()).forEach(X=>{if(X.directory||/^__MACOS/i.test(X.filename))return;const q=new K,ee=X.getData?.(q).then(se=>new File([se],X.filename));ee&&V.push(ee)}),Promise.all(V)})).apply(this,arguments)}var nt=t(51454),Be=t(64935),it=t(46873);const at=new Set(["3DObject","Point"]),be=(0,we.p)();let C=class extends(k((0,A.w6)((0,o.w6)((0,G.b)((0,D.q)((0,x.A)((0,M.j)((0,P.P)((0,J.d)((0,g.p)($.A.ClonableMixin(y.A)))))))))))){constructor(...s){super(...s),this.featureReduction=null,this.rangeInfos=null,this.operationalLayerType="ArcGISSceneServiceLayer",this.type="scene",this.fields=null,this.floorInfo=null,this.outFields=null,this.nodePages=null,this.materialDefinitions=null,this.textureSetDefinitions=null,this.geometryDefinitions=null,this.serviceUpdateTimeStamp=null,this.excludeObjectIds=new B.A,this.definitionExpression=null,this.filter=null,this.path=null,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.priority=null,this.semantic=null,this.cachedDrawingInfo={color:!1},this.popupEnabled=!0,this.popupTemplate=null,this.objectIdField=null,this.globalIdField=null,this._fieldUsageInfo={},this.screenSizePerspectiveEnabled=!0,this.serviceItemId=void 0}normalizeCtorArgs(s,p){return"string"==typeof s?{url:s,...p}:s}destroy(){this._set("renderer",null),this.associatedLayer=(0,T.pR)(this.associatedLayer)}getField(s){return this.fieldsIndex.get(s)}getFieldDomain(s,p){const n=this.getField(s)?.domain??null;return this.associatedLayer?(0,Ee.Vq)(this.associatedLayer,s,p,n):n}getFeatureType(s){return s&&this.associatedLayer?this.associatedLayer.getFeatureType(s):null}get types(){return this.associatedLayer?.types??[]}get typeIdField(){return this.associatedLayer?.typeIdField??null}get templates(){return this.associatedLayer?.templates??null}get formTemplate(){return this.associatedLayer?.formTemplate??null}get attributeTableTemplate(){return this.associatedLayer?.attributeTableTemplate??null}get fieldsIndex(){return new Ne.A(this.fields)}readNodePages(s,p,n){return"Point"===p.layerType&&(s=p.pointNodePages),null==s||"object"!=typeof s?null:pe.W4.fromJSON(s,n)}set elevationInfo(s){this._set("elevationInfo",s),this.loaded&&this._validateElevationInfo()}get effectiveCapabilities(){return this._capabilitiesFromAssociatedFeatureLayer(this.associatedLayer?.effectiveCapabilities)}get effectiveEditingEnabled(){return null!=this.associatedLayer&&(0,Ee.C$)(this.associatedLayer)}get geometryType(){return lt[this.profile]||"mesh"}set renderer(s){(0,O.yp)(s,this.fieldsIndex),this._set("renderer",s)}readCachedDrawingInfo(s){return null!=s&&"object"==typeof s||(s={}),null==s.color&&(s.color=!1),s}get capabilities(){return this._capabilitiesFromAssociatedFeatureLayer(this.associatedLayer?.capabilities)}_capabilitiesFromAssociatedFeatureLayer(s){s=s??oe.P;const{query:p,queryRelated:n,editing:{supportsGlobalId:K,supportsRollbackOnFailure:V,supportsUploadWithItemId:z,supportsGeometryUpdate:X,supportsReturnServiceEditsInSourceSpatialReference:q},data:{supportsZ:ee,supportsM:se,isVersioned:le,supportsAttachment:de},operations:{supportsEditing:te,supportsAdd:ie,supportsUpdate:De,supportsDelete:Le,supportsQuery:Te,supportsQueryAttachments:je,supportsAsyncConvert3D:ve}}=s,_e=s.operations.supportsChangeTracking,xe=!!this.associatedLayer?.infoFor3D;return{query:p,queryRelated:n,editing:{supportsGlobalId:K,supportsReturnServiceEditsInSourceSpatialReference:q,supportsRollbackOnFailure:V,supportsGeometryUpdate:xe&&X,supportsUploadWithItemId:z},data:{supportsAttachment:de,supportsZ:ee,supportsM:se,isVersioned:le},operations:{supportsQuery:Te,supportsQueryAttachments:je,supportsEditing:te&&_e,supportsAdd:xe&&ie&&_e,supportsDelete:xe&&Le&&_e,supportsUpdate:De&&_e,supportsAsyncConvert3D:ve}}}get editingEnabled(){return this._isOverridden("editingEnabled")?this._get("editingEnabled"):this.associatedLayer?.editingEnabled??!1}set editingEnabled(s){this._overrideIfSome("editingEnabled",s)}get infoFor3D(){return this.associatedLayer?.infoFor3D??null}get relationships(){return this.associatedLayer?.relationships}get defaultPopupTemplate(){return this.associatedLayer||this.attributeStorageInfo?this.createPopupTemplate():null}readObjectIdField(s,p){return!s&&p.fields&&p.fields.some(n=>("esriFieldTypeOID"===n.type&&(s=n.name),!!s)),s||void 0}readGlobalIdField(s,p){return!s&&p.fields&&p.fields.some(n=>("esriFieldTypeGlobalID"===n.type&&(s=n.name),!!s)),s||void 0}get displayField(){return this.associatedLayer?.displayField??null}readProfile(s,p){const n=p.store.profile;return null!=n&&We[n]?We[n]:(j.A.getLogger(this).error("Unknown or missing profile",{profile:n,layer:this}),"mesh-pyramids")}get useViewTime(){return this.associatedLayer?.useViewTime??!0}set useViewTime(s){this._override("useViewTime",s)}load(s){return this.addResolvingPromise(this._load(s)),Promise.resolve(this)}_load(s){var p=this;return(0,h.A)(function*(){const n=null!=s?s.signal:null;yield p.loadFromPortal({supportedTypes:["Scene Service"]},s).catch(S.QP),yield p._fetchService(n),yield Promise.all([p._fetchIndexAndUpdateExtent(p.nodePages,n),p._setAssociatedFeatureLayer(n),p._loadFilterGeometries()]),p._validateElevationInfo(),p._applyAssociatedLayerOverrides(),p._populateFieldUsageInfo(),yield p.loadTimeInfoFromService(s),yield(0,qe.L)(p,{origin:"service"},n),(0,O.yp)(p.renderer,p.fieldsIndex),yield p.finishLoadEditablePortalLayer(s)})()}beforeSave(){var s=this;return(0,h.A)(function*(){null!=s.filter&&(s.filter=s.filter.clone(),yield s.load())})()}_loadFilterGeometries(){var s=this;return(0,h.A)(function*(){if(s.filter)try{yield s.filter.loadGeometries(s.spatialReference)}catch(p){j.A.getLogger(s).error("#_loadFilterGeometries()",s,"Failed to load filter geometries. Geometry filter will not be applied for this layer.",{error:p}),s.filter=null}})()}createQuery(){const s=new tt.A;return"mesh"===this.geometryType?this.capabilities.query.supportsReturnMesh&&(s.returnGeometry=!0):(s.returnGeometry=!0,s.returnZ=!0),s.where=this.definitionExpression||"1=1",s.sqlFormat="standard",s.outFields=["*"],s}queryExtent(s,p){return this._getAssociatedLayerForQuery().then(n=>n.queryExtent(s||this.createQuery(),p))}queryFeatureCount(s,p){return this._getAssociatedLayerForQuery().then(n=>n.queryFeatureCount(s||this.createQuery(),p))}queryFeatures(s,p){return this._getAssociatedLayerForQuery().then(n=>n.queryFeatures(s||this.createQuery(),p)).then(n=>{if(n?.features)for(const K of n.features)K.layer=this,K.sourceLayer=this;return n})}queryRelatedFeatures(s,p){var n=this;return(0,h.A)(function*(){if(yield n.load(),!n.associatedLayer)throw new I.A("scenelayer:query-not-available","SceneLayer queries are not available without an associated feature layer",{layer:n});return n.associatedLayer.queryRelatedFeatures(s,p)})()}queryRelatedFeaturesCount(s,p){var n=this;return(0,h.A)(function*(){if(yield n.load(),!n.associatedLayer)throw new I.A("scenelayer:query-not-available","SceneLayer queries are not available without an associated feature layer",{layer:n});return n.associatedLayer.queryRelatedFeaturesCount(s,p)})()}queryCachedAttributes(s,p){var n=this;return(0,h.A)(function*(){const K=(0,O.hL)(n.fieldsIndex,yield(0,Be.TO)(n,(0,Be.D8)(n)));return(0,nt.s1)(n.parsedUrl?.path??"",n.attributeStorageInfo??[],s,p,K,n.apiKey,n.customParameters)})()}queryCachedFeature(s,p){var n=this;return(0,h.A)(function*(){const K=yield n.queryCachedAttributes(s,[p]);if(!K||0===K.length)throw new I.A("scenelayer:feature-not-in-cached-data","Feature not found in cached data");const V=new F.A;return V.attributes=K[0],V.layer=n,V.sourceLayer=n,V})()}queryObjectIds(s,p){return this._getAssociatedLayerForQuery().then(n=>n.queryObjectIds(s||this.createQuery(),p))}queryAttachments(s,p){return this._getAssociatedLayerForQuery().then(n=>n.queryAttachments(s,p))}getFieldUsageInfo(s){const p={supportsLabelingInfo:!1,supportsRenderer:!1,supportsPopupTemplate:!1,supportsLayerQuery:!1};return this.loaded?this._fieldUsageInfo[s]||p:(j.A.getLogger(this).error("#getFieldUsageInfo()","Unavailable until layer is loaded"),p)}createPopupTemplate(s){return(0,st.tn)(this,s)}_getAssociatedLayerForQuery(){const s=this.associatedLayer;return s?.loaded?Promise.resolve(s):this._loadAssociatedLayerForQuery()}_loadAssociatedLayerForQuery(){var s=this;return(0,h.A)(function*(){if(yield s.load(),!s.associatedLayer)throw new I.A("scenelayer:query-not-available","SceneLayer queries are not available without an associated feature layer",{layer:s});try{yield s.associatedLayer.load()}catch(p){throw new I.A("scenelayer:query-not-available","SceneLayer associated feature layer could not be loaded",{layer:s,error:p})}return s.associatedLayer})()}hasCachedStatistics(s){return null!=this.statisticsInfo&&this.statisticsInfo.some(p=>p.name===s)}queryCachedStatistics(s,p){var n=this;return(0,h.A)(function*(){return yield n.load(p),yield n.fetchStatistics(s,p)})()}saveAs(s,p){var n=this;return(0,h.A)(function*(){return n._debouncedSaveOperations(o.Xh.SAVE_AS,{...p,getTypeKeywords:()=>n._getTypeKeywords(),portalItemLayerType:"scene"},s)})()}save(){var s=this;return(0,h.A)(function*(){const p={getTypeKeywords:()=>s._getTypeKeywords(),portalItemLayerType:"scene"};return s._debouncedSaveOperations(o.Xh.SAVE,p)})()}applyEdits(s,p){var n=this;return(0,h.A)(function*(){const{applyEdits:K}=yield t.e(1447).then(t.bind(t,13828));let V=p;yield n.load();const z=n.associatedLayer;if(!z)throw new I.A(`${n.type}-layer:not-editable`,"Service is not editable");yield z.load();const{globalIdField:X}=z,q=!!z.infoFor3D,ee=V?.globalIdUsed??!0;if(q&&null==X)throw new I.A(`${n.type}-layer:not-editable`,"Valid globalIdField expected on editable SceneLayer");if(q&&!ee)throw new I.A(`${n.type}-layer:globalid-required`,"globalIdUsed must not be false for SceneLayer editing as globalIds are required.");return(0,ae.Wo)(z.url)&&q&&null!=s.deleteFeatures&&null!=X&&(V={...V,globalIdToObjectId:yield(0,Ee.GA)(z,s.deleteFeatures,X)}),K(n,z.source,s,V)})()}uploadAssets(s,p){var n=this;return(0,h.A)(function*(){if(yield n.load(),null==n.associatedLayer)throw new I.A(`${n.type}-layer:not-editable`,"Service is not editable");return yield n.associatedLayer.load(),n.associatedLayer.uploadAssets(s,p)})()}on(s,p){return super.on(s,p)}convertMesh(s,p){var n=this;return(0,h.A)(function*(){p??={};const K=te=>{throw j.A.getLogger(n).error(".convertMesh()",te.message),te};yield n.load(),n.infoFor3D||K(new I.A("invalid:layer","SceneLayer has no capability for mesh conversion"));const V=yield n.extractAndFilterFiles(s),z=V.reduce((te,ie)=>(0,Se.oF)(n.infoFor3D,ie)?te+1:te,0);0===z&&K(new m.VP),z>1&&K(new m.XQ);const q=p.location??new u.A({x:0,y:0,z:0,spatialReference:n.spatialReference}),ee=q.spatialReference.isGeographic?"local":"georeferenced",{default:se}=yield Promise.all([t.e(5434),t.e(6456),t.e(6141),t.e(5184)]).then(t.bind(t,96923)),le=se.createWithExternalSource(q,V,{vertexSpace:ee,transform:(0,Ge.Z)(q.spatialReference),unitConversionDisabled:!0}),[de]=yield n.uploadAssets([le],{...p,useAssetOrigin:!p.location});return de})()}extractAndFilterFiles(s){var p=this;return(0,h.A)(function*(){yield p.load();const n=p.infoFor3D;return n?(yield function rt(s){return Pe.apply(this,arguments)}(s)).filter(K=>(0,Se.fu)(n,K)):s})()}validateLayer(s){if(s.layerType&&!at.has(s.layerType))throw new I.A("scenelayer:layer-type-not-supported","SceneLayer does not support this layer type",{layerType:s.layerType});if(isNaN(this.version.major)||isNaN(this.version.minor))throw new I.A("layer:service-version-not-supported","Service version is not supported.",{serviceVersion:this.version.versionString,supportedVersions:"1.x, 2.x"});if(this.version.major>2)throw new I.A("layer:service-version-too-new","Service version is too new.",{serviceVersion:this.version.versionString,supportedVersions:"1.x, 2.x"});!function p(n,K){let V=!1,z=!1;if(null==n)V=!0,z=!0;else{const X=K&&K.isGeographic;switch(n){case"east-north-up":case"earth-centered":V=!0,z=X;break;case"vertex-reference-frame":V=!0,z=!X;break;default:V=!1}}if(!V)throw new I.A("scenelayer:unsupported-normal-reference-frame","Normal reference frame is invalid.");if(!z)throw new I.A("scenelayer:incompatible-normal-reference-frame","Normal reference frame is incompatible with layer spatial reference.")}(this.normalReferenceFrame,this.spatialReference)}_getTypeKeywords(){const s=[];if("points"===this.profile)s.push("Point");else{if("mesh-pyramids"!==this.profile)throw new I.A("scenelayer:unknown-profile","SceneLayer:save() encountered an unknown SceneLayer profile: "+this.profile);s.push("3DObject")}return s}_populateFieldUsageInfo(){if(this._fieldUsageInfo={},this.fields)for(const s of this.fields){const p=!!this.attributeStorageInfo?.some(V=>V.name===s.name),n=!!this.associatedLayer?.fields?.some(V=>V&&s.name===V.name);this._fieldUsageInfo[s.name]={supportsLabelingInfo:p,supportsRenderer:p,supportsPopupTemplate:p||n,supportsLayerQuery:n}}}_applyAssociatedLayerOverrides(){this._applyAssociatedLayerFieldsOverrides(),this._applyAssociatedLayerPopupOverrides(),this._applyAssociatedLayerExtentOverride(),this._applyAssociatedLayerPrivileges()}_applyAssociatedLayerFieldsOverrides(){if(!this.associatedLayer?.fields)return;let s=null;for(const p of this.associatedLayer.fields){const n=this.getField(p.name);n?(!n.domain&&p.domain&&(n.domain=p.domain.clone()),n.editable=p.editable,n.nullable=p.nullable,n.length=p.length):(s||(s=this.fields?this.fields.slice():[]),s.push(p.clone()))}s&&this._set("fields",s)}_applyAssociatedLayerPopupOverrides(){if(!this.associatedLayer)return;const s=["popupTemplate","popupEnabled"],p=(0,N.oY)(this);for(let n=0;n<s.length;n++){const K=s[n],V=this.originIdOf(K),z=this.associatedLayer.originIdOf(K);V<z&&(z===_.Gr.SERVICE||z===_.Gr.PORTAL_ITEM)&&p.setAtOrigin(K,this.associatedLayer[K],z)}}_applyAssociatedLayerExtentOverride(){const s=this.associatedLayer?.getAtOrigin("fullExtent","service");null==this.associatedLayer?.infoFor3D||!s||!(0,ae.Wo)(this.associatedLayer?.url)||!U(this)||(0,N.oY)(this).setAtOrigin("fullExtent",s.clone(),_.Gr.SERVICE)}_applyAssociatedLayerPrivileges(){const s=this.associatedLayer;s&&(this._set("userHasEditingPrivileges",s.userHasEditingPrivileges),this._set("userHasFullEditingPrivileges",s.userHasFullEditingPrivileges),this._set("userHasUpdateItemPrivileges",s.userHasUpdateItemPrivileges))}_setAssociatedFeatureLayer(s){var p=this;return(0,h.A)(function*(){if(["mesh-pyramids","points"].includes(p.profile))try{const{serverUrl:n,layerId:K,portalItem:V}=yield(0,ye.L)(`${p.url}/layers/${p.layerId}`,{sceneLayerItem:p.portalItem,customParameters:p.customParameters,apiKey:p.apiKey,signal:s}),z=yield ze.S.FeatureLayer();p.associatedLayer=new z({url:n,customParameters:p.customParameters,layerId:K,portalItem:V}),yield p.associatedLayer.load()}catch(n){(0,S.zf)(n)||p._logWarningOnPopupEnabled()}})()}_logWarningOnPopupEnabled(){var s=this;return(0,h.A)(function*(){yield(0,L.C_)(()=>s.popupEnabled&&null!=s.popupTemplate);const p=`this SceneLayer: ${s.title}`;null==s.attributeStorageInfo?j.A.getLogger(s).warn(`Associated FeatureLayer could not be loaded and no binary attributes found. Popups will not work on ${p}`):j.A.getLogger(s).info(`Associated FeatureLayer could not be loaded. Falling back to binary attributes for Popups on ${p}`)})()}_validateElevationInfo(){const s=this.elevationInfo;"mesh-pyramids"===this.profile&&(0,he.XF)(j.A.getLogger(this),(0,he.$7)("Mesh scene layers","relative-to-scene",s)),(0,he.XF)(j.A.getLogger(this),(0,he.tW)("Scene layers",s))}fetchStatistics(s,p){var n=this;return(0,h.A)(function*(){return yield function ke(s){return Oe.apply(this,arguments)}({fieldName:s,statisticsInfo:n.statisticsInfo,errorContext:"scenelayer",fieldsIndex:n.fieldsIndex,path:n.parsedUrl?.path??"",customParameters:n.customParameters,apiKey:n.apiKey,signal:p?.signal})})()}};(0,c._)([(0,f.MZ)({types:{key:"type",base:Ke.c,typeMap:{selection:Ze.A}},json:{origins:{"web-scene":{name:"layerDefinition.featureReduction",write:!0},"portal-item":{name:"layerDefinition.featureReduction",write:!0}}}})],C.prototype,"featureReduction",void 0),(0,c._)([(0,f.MZ)({type:[ne],json:{read:!1,origins:{"web-scene":{name:"layerDefinition.rangeInfos",write:!0},"portal-item":{name:"layerDefinition.rangeInfos",write:!0}}}})],C.prototype,"rangeInfos",void 0),(0,c._)([(0,f.MZ)({json:{read:!1}})],C.prototype,"associatedLayer",void 0),(0,c._)([(0,f.MZ)({type:["show","hide"]})],C.prototype,"listMode",void 0),(0,c._)([(0,f.MZ)({type:["ArcGISSceneServiceLayer"]})],C.prototype,"operationalLayerType",void 0),(0,c._)([(0,f.MZ)({json:{read:!1},readOnly:!0})],C.prototype,"type",void 0),(0,c._)([(0,f.MZ)({...be.fields,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],C.prototype,"fields",void 0),(0,c._)([(0,f.MZ)()],C.prototype,"types",null),(0,c._)([(0,f.MZ)()],C.prototype,"typeIdField",null),(0,c._)([(0,f.MZ)()],C.prototype,"templates",null),(0,c._)([(0,f.MZ)()],C.prototype,"formTemplate",null),(0,c._)([(0,f.MZ)()],C.prototype,"attributeTableTemplate",null),(0,c._)([(0,f.MZ)({readOnly:!0,clonable:!1})],C.prototype,"fieldsIndex",null),(0,c._)([(0,f.MZ)({type:$e.A,json:{read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo"}}})],C.prototype,"floorInfo",void 0),(0,c._)([(0,f.MZ)(be.outFields)],C.prototype,"outFields",void 0),(0,c._)([(0,f.MZ)({type:pe.W4,readOnly:!0,json:{read:!1}})],C.prototype,"nodePages",void 0),(0,c._)([(0,i.w)("service","nodePages",["nodePages","pointNodePages"])],C.prototype,"readNodePages",null),(0,c._)([(0,f.MZ)({type:[pe.uV],readOnly:!0})],C.prototype,"materialDefinitions",void 0),(0,c._)([(0,f.MZ)({type:[pe.Ot],readOnly:!0})],C.prototype,"textureSetDefinitions",void 0),(0,c._)([(0,f.MZ)({type:[pe.L0],readOnly:!0})],C.prototype,"geometryDefinitions",void 0),(0,c._)([(0,f.MZ)({readOnly:!0})],C.prototype,"serviceUpdateTimeStamp",void 0),(0,c._)([(0,f.MZ)({readOnly:!0})],C.prototype,"attributeStorageInfo",void 0),(0,c._)([(0,f.MZ)({readOnly:!0})],C.prototype,"statisticsInfo",void 0),(0,c._)([(0,f.MZ)({type:B.A.ofType(Number),nonNullable:!0,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.excludeObjectIds",write:{enabled:!0}}})],C.prototype,"excludeObjectIds",void 0),(0,c._)([(0,f.MZ)({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],C.prototype,"definitionExpression",void 0),(0,c._)([(0,f.MZ)({type:Xe,json:{name:"layerDefinition.polygonFilter",write:{enabled:!0,allowNull:!0},origins:{service:{read:!1,write:!1}}}})],C.prototype,"filter",void 0),(0,c._)([(0,f.MZ)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],C.prototype,"path",void 0),(0,c._)([(0,f.MZ)(ce.Yj)],C.prototype,"elevationInfo",null),(0,c._)([(0,f.MZ)({readOnly:!0,json:{read:!1}})],C.prototype,"effectiveCapabilities",null),(0,c._)([(0,f.MZ)({readOnly:!0})],C.prototype,"effectiveEditingEnabled",null),(0,c._)([(0,f.MZ)({type:String})],C.prototype,"geometryType",null),(0,c._)([(0,f.MZ)(ce.kF)],C.prototype,"labelsVisible",void 0),(0,c._)([(0,f.MZ)({type:[Ve.A],json:{origins:{service:{name:"drawingInfo.labelingInfo",read:{reader:Re.w},write:!1}},name:"layerDefinition.drawingInfo.labelingInfo",read:{reader:Re.w},write:!0}})],C.prototype,"labelingInfo",void 0),(0,c._)([(0,f.MZ)(ce.fV)],C.prototype,"legendEnabled",void 0),(0,c._)([(0,f.MZ)({type:Number,json:{origins:{"web-document":{default:1,write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}},read:{source:["opacity","layerDefinition.drawingInfo.transparency"],reader(s,p){if("number"==typeof s&&s>=0&&s<=1)return s;const n=p.layerDefinition?.drawingInfo?.transparency;return void 0!==n?(0,it.D)(n):void 0}}},"portal-item":{write:!0},service:{read:!1}}}})],C.prototype,"opacity",void 0),(0,c._)([(0,f.MZ)({type:["Low","High"],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],C.prototype,"priority",void 0),(0,c._)([(0,f.MZ)({type:["Labels"],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],C.prototype,"semantic",void 0),(0,c._)([(0,f.MZ)({types:et.XJ,json:{origins:{service:{read:{source:"drawingInfo.renderer"}}},name:"layerDefinition.drawingInfo.renderer",write:!0},value:null})],C.prototype,"renderer",null),(0,c._)([(0,f.MZ)({json:{read:!1}})],C.prototype,"cachedDrawingInfo",void 0),(0,c._)([(0,i.w)("service","cachedDrawingInfo")],C.prototype,"readCachedDrawingInfo",null),(0,c._)([(0,f.MZ)({readOnly:!0,json:{read:!1}})],C.prototype,"capabilities",null),(0,c._)([(0,f.MZ)({type:Boolean,json:{read:!1}})],C.prototype,"editingEnabled",null),(0,c._)([(0,f.MZ)({readOnly:!0,json:{write:!1,read:!1}})],C.prototype,"infoFor3D",null),(0,c._)([(0,f.MZ)({readOnly:!0,json:{write:!1,read:!1}})],C.prototype,"relationships",null),(0,c._)([(0,f.MZ)(ce.M6)],C.prototype,"popupEnabled",void 0),(0,c._)([(0,f.MZ)({type:R.A,json:{name:"popupInfo",write:!0}})],C.prototype,"popupTemplate",void 0),(0,c._)([(0,f.MZ)({readOnly:!0,json:{read:!1}})],C.prototype,"defaultPopupTemplate",null),(0,c._)([(0,f.MZ)({type:String,json:{read:!1}})],C.prototype,"objectIdField",void 0),(0,c._)([(0,i.w)("service","objectIdField",["objectIdField","fields"])],C.prototype,"readObjectIdField",null),(0,c._)([(0,f.MZ)({type:String,json:{read:!1}})],C.prototype,"globalIdField",void 0),(0,c._)([(0,i.w)("service","globalIdField",["globalIdField","fields"])],C.prototype,"readGlobalIdField",null),(0,c._)([(0,f.MZ)({readOnly:!0,type:String,json:{read:!1}})],C.prototype,"displayField",null),(0,c._)([(0,f.MZ)({type:String,json:{read:!1}})],C.prototype,"profile",void 0),(0,c._)([(0,i.w)("service","profile",["store.profile"])],C.prototype,"readProfile",null),(0,c._)([(0,f.MZ)({readOnly:!0,type:String,json:{origins:{service:{read:{source:"store.normalReferenceFrame"}}},read:!1}})],C.prototype,"normalReferenceFrame",void 0),(0,c._)([(0,f.MZ)(ce.PY)],C.prototype,"screenSizePerspectiveEnabled",void 0),(0,c._)([(0,f.MZ)({json:{read:!1,origins:{service:{read:!0}}}})],C.prototype,"serviceItemId",void 0),(0,c._)([(0,f.MZ)(d.B)],C.prototype,"useViewTime",null),C=(0,c._)([(0,E.$)("esri.layers.SceneLayer")],C);const We={"mesh-pyramids":"mesh-pyramids",meshpyramids:"mesh-pyramids","features-meshes":"mesh-pyramids",points:"points","features-points":"points",lines:"lines","features-lines":"lines",polygons:"polygons","features-polygons":"polygons"},lt={"mesh-pyramids":"mesh",points:"point"},dt=C},23e3:(Y,w,t)=>{t.d(w,{d:()=>I});var h=t(8189),c=t(85211),B=(t(3248),t(35150),t(40707),t(76576));const I=j=>{let T=class extends j{constructor(){super(...arguments),this.customParameters=null}};return(0,h._)([(0,c.MZ)({type:Object,json:{write:{overridePolicy:P=>({enabled:!!(P&&Object.keys(P).length>0)})}}})],T.prototype,"customParameters",void 0),T=(0,h._)([(0,B.$)("esri.layers.mixins.CustomParametersMixin")],T),T}},58277:(Y,w,t)=>{t.d(w,{Mk:()=>N,Zk:()=>f,w6:()=>_});var h=t(8189),c=t(42425),F=t(77806),R=t(56492),$=t(85211),j=(t(3248),t(35150),t(76576)),T=t(30448);const P=new c.A.EventEmitter;function f(u,y,m=null,g=!1){const G=(0,R.Tw)();return P.emit("apply-edits",{serviceUrl:u,layerId:y,gdbVersion:m,mayReceiveServiceEdits:g=null==y||g,result:G.promise}),G}const b=Symbol();function N(u){return null!=u&&"object"==typeof u&&b in u}function i(u){return null!=u&&"object"==typeof u&&"gdbVersion"in u}function E(u,y,m){const g=new URL(u).host,G=T.Z3.get(g),J=A=>!A||A===G;return J(y)&&J(m)||y===m}const _=u=>{var y;let m=class extends u{constructor(...g){super(...g),this[y]=!0,this._applyEditsHandler=G=>{const{serviceUrl:J,layerId:A,gdbVersion:D,mayReceiveServiceEdits:x,result:M}=G,o=J===this.url,d=null!=A&&null!=this.layerId&&A===this.layerId,v=i(this),O=i(this)&&E(J,D,this.gdbVersion);if(!o||v&&!O||!d&&!x)return;const U=M.then(Z=>{if(this.lastEditsEventDate=new Date,d&&(Z.addedFeatures.length||Z.updatedFeatures.length||Z.deletedFeatures.length||Z.addedAttachments.length||Z.updatedAttachments.length||Z.deletedAttachments.length))return this.emit("edits",(0,F.o8)(Z)),Z;const H=Z.editedFeatures?.find(({layerId:k})=>k===this.layerId);if(H){const{adds:k,updates:re,deletes:ae}=H.editedFeatures,ye={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:k?k.map(({attributes:oe})=>({objectId:this.objectIdField&&oe[this.objectIdField],globalId:this.globalIdField&&oe[this.globalIdField]})):[],deletedFeatures:ae?ae.map(({attributes:oe})=>({objectId:this.objectIdField&&oe[this.objectIdField],globalId:this.globalIdField&&oe[this.globalIdField]})):[],updatedFeatures:re?re.map(({current:{attributes:oe}})=>({objectId:this.objectIdField&&oe[this.objectIdField],globalId:this.globalIdField&&oe[this.globalIdField]})):[],editedFeatures:(0,F.o8)(Z.editedFeatures),exceededTransferLimit:!1,historicMoment:(0,F.o8)(Z.historicMoment)};return this.emit("edits",ye),ye}const Q={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:(0,F.o8)(Z.editedFeatures),exceededTransferLimit:!1,historicMoment:(0,F.o8)(Z.historicMoment)};return"historicMoment"in this&&this._shouldUpdateHistoricMoment(J,D,Q.historicMoment)&&this.emit("edits",Q),Q}).then(Z=>("historicMoment"in this&&this._shouldUpdateHistoricMoment(J,D,Z.historicMoment)&&(this.historicMoment=Z.historicMoment),Z));this.emit("apply-edits",{result:U})},this._updateMomentHandler=G=>{const{serviceUrl:J,gdbVersion:A,moment:D}=G,x=J===this.url,M=i(this),o=i(this)&&E(J,A,this.gdbVersion),d=i(this)&&!E(J,this.gdbVersion,null);x&&M&&o&&d&&"historicMoment"in this&&this.historicMoment!==D&&(this.historicMoment=D)},this.when().then(()=>{this.addHandles(function S(u){return P.on("apply-edits",new WeakRef(u))}(this._applyEditsHandler)),"historicMoment"in this&&this.addHandles(function L(u){return P.on("update-moment",new WeakRef(u))}(this._updateMomentHandler))},()=>{})}_shouldUpdateHistoricMoment(g,G,J){return"historicMoment"in this&&this.historicMoment!==J&&(0,T.w5)(g,G)}};return y=b,(0,h._)([(0,$.MZ)()],m.prototype,"lastEditsEventDate",void 0),m=(0,h._)([(0,j.$)("esri.layers.mixins.EditBusLayer")],m),m}},33036:(Y,w,t)=>{t.d(w,{j:()=>I});var h=t(8189),c=t(85211),B=(t(3248),t(35150),t(40707),t(76576));const I=T=>{let P=class extends T{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const S={minScale:this.minScale,maxScale:this.maxScale},L=this.parent;L&&"effectiveScaleRange"in L&&function j(T,P){T.minScale=T.minScale>0?P.minScale>0?Math.min(T.minScale,P.minScale):T.minScale:P.minScale,T.maxScale=T.maxScale>0?P.maxScale>0?Math.max(T.maxScale,P.maxScale):T.maxScale:P.maxScale}(S,L.effectiveScaleRange);const f=this._get("effectiveScaleRange");return f&&f.minScale===S.minScale&&f.maxScale===S.maxScale?f:S}};return(0,h._)([(0,c.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],P.prototype,"minScale",void 0),(0,h._)([(0,c.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],P.prototype,"maxScale",void 0),(0,h._)([(0,c.MZ)({readOnly:!0})],P.prototype,"effectiveScaleRange",null),P=(0,h._)([(0,B.$)("esri.layers.mixins.ScaleRangeLayer")],P),P}},84311:(Y,w,t)=>{t.d(w,{B:()=>W,e:()=>b});var h=t(8189),c=t(85211),B=(t(3248),t(35150),t(40707),t(17221)),I=t(76576),j=t(50501),T=t(86300),P=t(38488),S=t(26957),L=t(17181),f=t(89352);const W={type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation",layerContainerTypes:j.K}}},b=N=>{let i=class extends N{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(E,_){const u=_.timeInfo.exportOptions;if(!u)return null;const y=u.timeOffset,m=S.j.fromJSON(u.timeOffsetUnits);return y&&m?new f.A({value:y,unit:m}):null}set timeInfo(E){(0,T.sv)(E,this.fieldsIndex),this._set("timeInfo",E)}};return(0,h._)([(0,c.MZ)({type:L.A,json:{write:!1}})],i.prototype,"timeExtent",void 0),(0,h._)([(0,c.MZ)({type:f.A})],i.prototype,"timeOffset",void 0),(0,h._)([(0,B.w)("service","timeOffset",["timeInfo.exportOptions"])],i.prototype,"readOffset",null),(0,h._)([(0,c.MZ)({value:null,type:P.A,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],i.prototype,"timeInfo",null),(0,h._)([(0,c.MZ)(W)],i.prototype,"useViewTime",void 0),i=(0,h._)([(0,I.$)("esri.layers.mixins.TemporalLayer")],i),i}},27378:(Y,w,t)=>{t.d(w,{c:()=>j});var h=t(8189),c=t(71065),F=t(85211),I=(t(3248),t(35150),t(40707),t(76576));let j=class extends c.A{constructor(){super(...arguments),this.type=null}};(0,h._)([(0,F.MZ)({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],j.prototype,"type",void 0),j=(0,h._)([(0,I.$)("esri.layers.support.FeatureReduction")],j)},71906:(Y,w,t)=>{t.d(w,{A:()=>P});var j,h=t(8189),c=t(85211),B=(t(3248),t(35150),t(40707),t(76576)),I=t(27378);let T=j=class extends I.c{constructor(S){super(S),this.type="selection"}clone(){return new j}};(0,h._)([(0,c.MZ)({type:["selection"]})],T.prototype,"type",void 0),T=j=(0,h._)([(0,B.$)("esri.layers.support.FeatureReductionSelection")],T);const P=T},64584:(Y,w,t)=>{t.d(w,{A:()=>S});var T,h=t(8189),c=t(31178),F=t(71065),R=t(85211),j=(t(3248),t(35150),t(40707),t(76576));let P=T=class extends F.A{constructor(L){super(L),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new c.A}clone(){return new T({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};(0,h._)([(0,R.MZ)({type:String,json:{write:{isRequired:!0}}})],P.prototype,"floorField",void 0),(0,h._)([(0,R.MZ)({json:{read:!1,write:!1}})],P.prototype,"viewAllMode",void 0),(0,h._)([(0,R.MZ)({json:{read:!1,write:!1}})],P.prototype,"viewAllLevelIds",void 0),P=T=(0,h._)([(0,j.$)("esri.layers.support.LayerFloorInfo")],P);const S=P},38488:(Y,w,t)=>{t.d(w,{A:()=>N});var h=t(8189),c=t(90660),F=t(71065),R=t(85211),j=(t(3248),t(35150),t(40707),t(17221)),T=t(76576),P=t(50305),S=t(17181),L=t(89352),f=t(22639);function W(i,E){return L.A.fromJSON({value:i,unit:E})}let b=class extends(c.A.ClonableMixin(F.A)){constructor(i){super(i),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(i,E){return E.timeExtent&&Array.isArray(E.timeExtent)&&2===E.timeExtent.length?S.A.fromArray(E.timeExtent):null}writeFullTimeExtent(i,E){E.timeExtent=null!=i?.start&&null!=i.end?i.toArray():null}readInterval(i,E){return E.timeInterval&&E.timeIntervalUnits?W(E.timeInterval,E.timeIntervalUnits):E.defaultTimeInterval&&E.defaultTimeIntervalUnits?W(E.defaultTimeInterval,E.defaultTimeIntervalUnits):null}writeInterval(i,E){E.timeInterval=i?.toJSON().value??null,E.timeIntervalUnits=i?.toJSON().unit??null}};(0,h._)([(0,R.MZ)({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],b.prototype,"cumulative",void 0),(0,h._)([(0,R.MZ)({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],b.prototype,"endField",void 0),(0,h._)([(0,R.MZ)({type:S.A,json:{write:{enabled:!0,allowNull:!0}}})],b.prototype,"fullTimeExtent",void 0),(0,h._)([(0,j.w)("fullTimeExtent",["timeExtent"])],b.prototype,"readFullTimeExtent",null),(0,h._)([(0,P.K)("fullTimeExtent")],b.prototype,"writeFullTimeExtent",null),(0,h._)([(0,R.MZ)({type:Boolean,json:{write:!0}})],b.prototype,"hasLiveData",void 0),(0,h._)([(0,R.MZ)({type:L.A,json:{write:{enabled:!0,allowNull:!0}}})],b.prototype,"interval",void 0),(0,h._)([(0,j.w)("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],b.prototype,"readInterval",null),(0,h._)([(0,P.K)("interval")],b.prototype,"writeInterval",null),(0,h._)([(0,R.MZ)({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],b.prototype,"startField",void 0),(0,h._)([(0,R.MZ)((0,f.P6)("timeReference",!0))],b.prototype,"timeZone",void 0),(0,h._)([(0,R.MZ)({type:String,json:{write:{enabled:!0,allowNull:!0}}})],b.prototype,"trackIdField",void 0),(0,h._)([(0,R.MZ)({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],b.prototype,"useTime",void 0),(0,h._)([(0,R.MZ)({type:[Date],json:{read:!1}})],b.prototype,"stops",void 0),b=(0,h._)([(0,T.$)("esri.layers.support.TimeInfo")],b);const N=b},3404:(Y,w,t)=>{t.d(w,{p:()=>B});var h=t(3248),c=t(35150),F=t(29141),R=t(73258),$=t(86300);function B(){return{fields:{type:[F.A],value:null,set:function(I){if(I&&(0,h.A)("big-integer-warning-enabled")){const j=I.filter(T=>"big-integer"===T.type||"oid"===T.type&&(T.length||0)>=8);if(j.length){const T=j.map(P=>`'${P.name}'`).join(", ");c.A.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${T}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",I)}},fieldsIndex:{readOnly:!0,get(){return R.A.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(I){this._userOutFields=I,this.notifyChange("outFields")},get:function(){const I=this._userOutFields;if(!I?.length)return null;if(I.includes("*"))return["*"];if(!this.fields)return I;for(const j of I)this.fieldsIndex?.has(j)||c.A.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${j} found in outFields`,{layer:this,outFields:I});return(0,$.DB)(this.fieldsIndex,I)}}}}},6829:(Y,w,t)=>{t.d(w,{CW:()=>f,Fm:()=>j,Hz:()=>W,JQ:()=>L,JZ:()=>J,ND:()=>N,R_:()=>B,U9:()=>S,fu:()=>c,nr:()=>b,oF:()=>F,rq:()=>T,z$:()=>P});const h=[["binary","application/octet-stream","bin",""]];function c(A,D){return null!=u(D.name,A?.supportedFormats??[])}function F(A,D){if(!A)return!1;const x=T(D,A.supportedFormats??[]);return null!=x&&A.editFormats.includes(x)}function B(A,D){return y(function _(A,D){const x=A.toLowerCase();return i(D).find(M=>m(M)===x)}(A,D))}function I(A,D){return y(u(A,D))}function j(A,D){return m(function E(A,D){return i(D).find(x=>y(x)===A)}(A,D))}function T(A,D){return I(A.name,D)??B(A.type,D)}function P(A,D,x){return B(A,x)??I(D,x)}function S({supportedFormats:A}){return P("model/gltf-binary","glb",A)}function L(A){const D=S(A);return null!=D&&A.editFormats.includes(D)}function f({supportedFormats:A}){return P("model/gltf+json","gltf",A)}function W(A){if(!A)return null;const D=S(A),x=f(A);let M=null;for(const o of A.queryFormats){if(o===D)return o;o===x&&(M=o)}return M}function b({supportedFormats:A}){return P("application/esri3do-SR_world","wld",A)}function N({supportedFormats:A}){return P("application/esri3do-SR_prj","prj",A)}function i(A){return[...h,...A]}function u(A,D){const x=A.toLowerCase();return i(D).find(M=>function g(A){return A?.[2].split(",").map(D=>D.toLowerCase())??[]}(M).some(o=>x.endsWith(o)))}function y(A){return A?.[0]}function m(A){return A?.[1].toLowerCase()}function J(A){return A.tables?.find(D=>"assetMaps"===D.role)}},26957:(Y,w,t)=>{t.d(w,{j:()=>c});const c=(0,t(49976).O)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0})},79122:(Y,w,t)=>{t.d(w,{A:()=>x});var y,h=t(10467),c=t(8189),F=t(49976),R=t(77806),$=t(35150),B=t(85211),I=t(48669),j=t(15463),T=t(17221),P=t(76576),S=t(50305),L=t(55739),f=t(86300),W=t(38582),b=t(18550),N=t(19390),i=t(36345),E=t(23005),_=t(48218),u=t(94048);const g="percent-of-total",G="field",J=new F.J({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:g,esriNormalizeByField:G}),A=(0,L.dp)(N.A);let D=y=class extends((0,b.h)(W.A)){constructor(M){super(M),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(M,o,d){if(!Array.isArray(M))return;let v=o.minValue;return M.map(O=>{const U=new N.A;return U.read(O,d),null==U.minValue&&(U.minValue=v),null==U.maxValue&&(U.maxValue=U.minValue),v=U.maxValue,U})}writeClassBreakInfos(M,o,d,v){const O=M.map(U=>U.write({},v));this._areClassBreaksConsecutive()&&O.forEach(U=>delete U.classMinValue),o[d]=O}castField(M){return null==M?M:"function"==typeof M?($.A.getLogger(this).error(".field: field must be a string value"),null):(0,L.GX)(M)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let M=this._get("normalizationType");const o=!!this.normalizationField,d=null!=this.normalizationTotal;return o||d?(M=o&&G||d&&g||null,o&&d&&$.A.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):M!==G&&M!==g||(M=null),M}set normalizationType(M){this._set("normalizationType",M)}addClassBreakInfo(M,o,d){let v=null;v="number"==typeof M?new N.A({minValue:M,maxValue:o,symbol:(0,u.dp)(d)}):A((0,R.o8)(M)),this.classBreakInfos.push(v),1===this.classBreakInfos.length&&this.notifyChange("minValue")}removeClassBreakInfo(M,o){const d=this.classBreakInfos.length;for(let v=0;v<d;v++){const O=[this.classBreakInfos[v].minValue,this.classBreakInfos[v].maxValue];if(O[0]===M&&O[1]===o){this.classBreakInfos.splice(v,1);break}}}getBreakIndex(M,o){return this.valueExpression&&null==o?.arcade&&$.A.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(M,o):this._getBreakIndexForField(M)}getClassBreakInfo(M,o){var d=this;return(0,h.A)(function*(){let v=o;d.valueExpression&&null==o?.arcade&&(v={...v,arcade:yield(0,_.lw)()});const O=d.getBreakIndex(M,v);return-1!==O?d.classBreakInfos[O]:null})()}getSymbol(M,o){if(this.valueExpression&&null==o?.arcade)return void $.A.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const d=this.getBreakIndex(M,o);return d>-1?this.classBreakInfos[d].symbol:this.defaultSymbol}getSymbolAsync(M,o){var d=this;return(0,h.A)(function*(){let v=o;if(d.valueExpression&&null==o?.arcade){const U=yield(0,_.lw)(),{arcadeUtils:Z}=U;Z.hasGeometryOperations(d.valueExpression)&&(yield Z.enableGeometryOperations()),v={...v,arcade:U}}const O=d.getBreakIndex(M,v);return O>-1?d.classBreakInfos[O].symbol:d.defaultSymbol})()}get symbols(){const M=[];return this.classBreakInfos.forEach(o=>{o.symbol&&M.push(o.symbol)}),this.defaultSymbol&&M.push(this.defaultSymbol),M}getAttributeHash(){return this.visualVariables?.reduce((M,o)=>M+o.getAttributeHash(),"")??""}getMeshHash(){const M=JSON.stringify(this.backgroundFillSymbol),o=JSON.stringify(this.defaultSymbol),d=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${M}.${o}.${this.classBreakInfos.reduce((v,O)=>v+O.getMeshHash(),"")}.${d}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new y({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol?.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol?.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:(0,R.o8)(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:(0,R.o8)(this.visualVariables),legendOptions:(0,R.o8)(this.legendOptions),authoringInfo:(0,R.o8)(this.authoringInfo)})}collectRequiredFields(M,o){var d=this;return(0,h.A)(function*(){const v=[d.collectVVRequiredFields(M,o),d.collectSymbolFields(M,o)];yield Promise.all(v)})()}collectSymbolFields(M,o){var d=this;return(0,h.A)(function*(){const v=[...d.symbols.map(O=>O.collectRequiredFields(M,o)),(0,f.Dx)(M,o,d.valueExpression)];(0,f.rq)(M,o,d.field),(0,f.rq)(M,o,d.normalizationField),yield Promise.all(v)})()}_getBreakIndexForExpression(M,o){const{viewingMode:d,scale:v,spatialReference:O,arcade:U,timeZone:Z}=o??{},{valueExpression:H}=this;let Q=this._compiledValueExpression.valueExpression===H?this._compiledValueExpression.compiledFunction:null;const k=U.arcadeUtils;if(!Q){const ae=k.createSyntaxTree(H);Q=k.createFunction(ae),this._compiledValueExpression.compiledFunction=Q}this._compiledValueExpression.valueExpression=H;const re=k.executeFunction(Q,k.createExecContext(M,k.getViewInfo({viewingMode:d,scale:v,spatialReference:O}),Z));return this._getBreakIndexfromInfos(re)}_getBreakIndexForField(M){const d=M.attributes,v=this.normalizationType;let O=parseFloat(d[this.field]);if(v){const U=this.normalizationTotal,Z=parseFloat(this.normalizationField?d[this.normalizationField]:void 0);if("log"===v)O=Math.log(O)*Math.LOG10E;else if(v!==g||null==U||isNaN(U)){if(v===G&&!isNaN(Z)){if(isNaN(O)||isNaN(Z))return-1;O/=Z}}else O=O/U*100}return this._getBreakIndexfromInfos(O)}_getBreakIndexfromInfos(M){const o=this.isMaxInclusive;if(null!=M&&"number"==typeof M&&!isNaN(M))for(let d=0;d<this.classBreakInfos.length;d++){const v=[this.classBreakInfos[d].minValue,this.classBreakInfos[d].maxValue];if(v[0]<=M&&(o?M<=v[1]:M<v[1]))return d}return-1}_areClassBreaksConsecutive(){const M=this.classBreakInfos,o=M.length;for(let d=1;d<o;d++)if(M[d-1].maxValue!==M[d].minValue)return!1;return!0}};(0,c._)([(0,B.MZ)(i.As)],D.prototype,"backgroundFillSymbol",void 0),(0,c._)([(0,B.MZ)({type:[N.A],json:{write:{isRequired:!0}}})],D.prototype,"classBreakInfos",void 0),(0,c._)([(0,T.w)("classBreakInfos")],D.prototype,"readClassBreakInfos",null),(0,c._)([(0,S.K)("classBreakInfos")],D.prototype,"writeClassBreakInfos",null),(0,c._)([(0,B.MZ)({type:String,json:{write:!0}})],D.prototype,"defaultLabel",void 0),(0,c._)([(0,B.MZ)(i.z4)],D.prototype,"defaultSymbol",void 0),(0,c._)([(0,B.MZ)({type:String,json:{write:!0}})],D.prototype,"field",void 0),(0,c._)([(0,I.w)("field")],D.prototype,"castField",null),(0,c._)([(0,B.MZ)({type:Boolean})],D.prototype,"isMaxInclusive",void 0),(0,c._)([(0,B.MZ)({type:E.A,json:{write:!0}})],D.prototype,"legendOptions",void 0),(0,c._)([(0,B.MZ)({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],D.prototype,"minValue",null),(0,c._)([(0,B.MZ)({type:String,json:{write:!0}})],D.prototype,"normalizationField",void 0),(0,c._)([(0,B.MZ)({type:Number,json:{write:!0}})],D.prototype,"normalizationTotal",void 0),(0,c._)([(0,B.MZ)({type:J.apiValues,value:null,json:{type:J.jsonValues,read:J.read,write:J.write}})],D.prototype,"normalizationType",null),(0,c._)([(0,j.e)({classBreaks:"class-breaks"})],D.prototype,"type",void 0),(0,c._)([(0,B.MZ)({type:String,json:{write:!0}})],D.prototype,"valueExpression",void 0),(0,c._)([(0,B.MZ)({type:String,json:{write:!0}})],D.prototype,"valueExpressionTitle",void 0),D=y=(0,c._)([(0,P.$)("esri.renderers.ClassBreaksRenderer")],D);const x=D},19390:(Y,w,t)=>{t.d(w,{A:()=>S});var T,h=t(8189),c=t(71065),F=t(85211),I=(t(3248),t(35150),t(40707),t(76576)),j=t(36345);let P=T=class extends c.A{constructor(L){super(L),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new T({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?.clone()??null})}getMeshHash(){const L=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${L}`}};(0,h._)([(0,F.MZ)({type:String,json:{write:!0}})],P.prototype,"description",void 0),(0,h._)([(0,F.MZ)({type:String,json:{write:!0}})],P.prototype,"label",void 0),(0,h._)([(0,F.MZ)({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],P.prototype,"minValue",void 0),(0,h._)([(0,F.MZ)({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],P.prototype,"maxValue",void 0),(0,h._)([(0,F.MZ)(j.Wp)],P.prototype,"symbol",void 0),P=T=(0,h._)([(0,I.$)("esri.renderers.support.ClassBreakInfo")],P);const S=P},8691:(Y,w,t)=>{t.d(w,{L:()=>$});var h=t(10467),c=t(89447),F=t(56492),R=t(96996);function $(I,j,T){return B.apply(this,arguments)}function B(){return(B=(0,h.A)(function*(I,j,T){const P=I&&I.getAtOrigin&&I.getAtOrigin("renderer",j.origin);if(P&&"unique-value"===P.type&&P.styleOrigin){const S=yield(0,c.Ke)(P.populateFromStyle());if((0,F.Te)(T),!1===S.ok){const L=S.error;j?.messages&&j.messages.push(new R.A("renderer:style-reference",`Failed to create unique value renderer from style reference: ${L.message}`,{error:L,context:j})),I.clear("renderer",j?.origin)}}})).apply(this,arguments)}},73812:(Y,w,t)=>{t.d(w,{$7:()=>G,B:()=>g,Fo:()=>_,M7:()=>D,NN:()=>P,Q5:()=>u,Tq:()=>M,Up:()=>m,XF:()=>A,Ze:()=>b,bK:()=>$,bh:()=>T,id:()=>N,ky:()=>j,qt:()=>x,tW:()=>J,v9:()=>S,w7:()=>B,wF:()=>R,wS:()=>i,wz:()=>f,x:()=>L,xS:()=>E,ze:()=>I});var h=t(82663),c=t(82575);function F(o){return o?x:M}function R(o,d){return d?.mode?d.mode:F(o).mode}function $(o,d){return d??F(o)}function B(o,d){return R(null==o||(o.hasZ??!1),d)}function I(o,d){return $(null==o||(o.hasZ??!1),d)}function j(o){const d=W(o);return B(o.geometry,d)}function T(o){const d=W(o),v=B(o.geometry,d),O=null!=d&&"on-the-ground"!==v?D(d):0,U=d?.featureExpressionInfo;return{mode:v,offset:O,featureExpressionInfo:U}}function P(o){return f(T(o))}function S(o){return f(o)||L(o)}function L(o){return"0"===o?.featureExpressionInfo?.expression}function f(o){if(!o||"on-the-ground"===o.mode)return!1;const d=o?.featureExpressionInfo?o.featureExpressionInfo.expression:null;return!(!d||"0"===d)}function W(o){return o.layer&&"elevationInfo"in o.layer?o.layer.elevationInfo:null}function b(o,d){if(!o?.offset)return 0;const{offset:v,unit:O}=o;if("decimal-degrees"===O)return 0;const U="unknown"!==O&&O?O:"meters",Z=(0,h.mq)(d);return Z?(0,h.oU)(v,U,Z):0}function N(o,d,v){if(!v?.mode)return;const O=o.hasZ?o.z:0,U=b(v,o.spatialReference);switch(v.mode){case"absolute-height":return O-U;case"on-the-ground":return 0;case"relative-to-ground":return O-((d.elevationProvider.getElevation(o.x,o.y,O,o.spatialReference,"ground")??0)+U);case"relative-to-scene":return O-((d.elevationProvider.getElevation(o.x,o.y,O,o.spatialReference,"scene")??0)+U)}}function i(o,d,v,O=null){return _(o,d.x,d.y,d.hasZ?d.z:0,d.spatialReference,v,O)}function E(o,d,v,O,U=null){return _(o,d[0],d[1],d.length>2?d[2]:0,v,O,U)}function _(o,d,v,O,U,Z,H=null){if(null==Z)return;const Q=null!=H?H.mode:"absolute-height";if("on-the-ground"===Q)return 0;const{absoluteZ:k}=u(d,v,O,U,o,Z);return function y(o,d,v,O,U,Z,H,Q){const k=b(H,U);switch(Q){case"absolute-height":return o-k;case"relative-to-ground":return o-((Z.elevationProvider.getElevation(d,v,O,U,"ground")??0)+k);case"relative-to-scene":return o-((Z.elevationProvider.getElevation(d,v,O,U,"scene")??0)+k)}}(k,d,v,O,U,o,H,Q)}function u(o,d,v,O,U,Z){const H=b(Z,O);switch(Z.mode){case"absolute-height":return{absoluteZ:v+H,elevation:0};case"on-the-ground":{const Q=U.elevationProvider.getElevation(o,d,0,O,"ground")??0;return{absoluteZ:Q,elevation:Q}}case"relative-to-ground":{const Q=U.elevationProvider.getElevation(o,d,v,O,"ground")??0;return{absoluteZ:v+Q+H,elevation:Q}}case"relative-to-scene":{const Q=U.elevationProvider.getElevation(o,d,v,O,"scene")??0;return{absoluteZ:v+Q+H,elevation:Q}}}}function m(o,d){if(null==d)return!1;const{mode:v}=d;return null!=v&&("scene"===o&&"relative-to-scene"===v||"ground"===o&&"absolute-height"!==v)}function g(o,d,v){return v&&v.mode!==d?`${o} only support ${d} elevation mode`:null}function G(o,d,v){return v?.mode===d?`${o} do not support ${d} elevation mode`:null}function J(o,d){return null!=d?.featureExpressionInfo&&"0"!==d.featureExpressionInfo.expression?`${o} do not support featureExpressionInfo`:null}function A(o,d){d&&o.warn(".elevationInfo=",d)}function D(o){return(o?.offset??0)*(0,c.Ao)(o?.unit)}const x={mode:"absolute-height",offset:0},M={mode:"on-the-ground",offset:null}},41843:(Y,w,t)=>{t.d(w,{DQ:()=>N,tn:()=>W});var h=t(92165),c=t(86300),F=t(54042),I=(t(75432),t(65121),t(558),t(8975)),L=(t(90792),t(83902),t(98089),t(62270),t(61099)),f=t(17580);function W({displayField:o,editFieldsInfo:d,fields:v,objectIdField:O,title:U},Z){if(!v)return null;const H=function y(o,d){const v=d?.visibleFieldNames;return function E({fields:o,ignoreFieldTypes:d,sortDisabled:v}){const O=o;return d&&(o=o.filter(U=>!d.includes(U.type))),o===O&&(o=o.slice()),!0!==v&&o.sort(_),o}({fields:o.fields??[],ignoreFieldTypes:d?.ignoreFieldTypes||M,sortDisabled:d?.sortDisabled}).map(O=>new L.A({fieldName:O.name,isEditable:(0,c.R$)(O,o),label:O.alias,format:G(O),visible:i(O,{...o,visibleFieldNames:v})}))}({editFieldsInfo:d,fields:v,objectIdField:O},Z);if(!H.length)return null;const Q=function D(o){const d=(0,c.mB)(o),{titleBase:v}=o;return d?`${v}: {${d.trim()}}`:v??""}({titleBase:U,fields:v,displayField:o}),k=function J(){return[new I.A,new F.A]}();return new h.A({title:Q,content:k,fieldInfos:H})}function N(o){const{title:d,graphic:v}=o??{},{attributes:O,sourceLayer:U}=v??{},Z=U&&"displayField"in U?U.displayField:null,H=Z?O?.[Z]:null,Q=null!=H?JSON.stringify(H):null,k=v?.getObjectId()?.toString();return d||Q||k||""}const i=(o,d)=>d.visibleFieldNames?d.visibleFieldNames.has(o.name):(0,c.Bz)(o,d);function _(o,d){return"oid"===o.type?-1:"oid"===d.type?1:x(o)?-1:x(d)?1:(o.alias||o.name).toLocaleLowerCase().localeCompare((d.alias||d.name).toLocaleLowerCase())}function G(o){switch(o.type){case"small-integer":case"integer":case"single":return new f.A({digitSeparator:!0,places:0});case"double":return new f.A({digitSeparator:!0,places:2});case"string":return(0,c.JL)(o.name)?new f.A({digitSeparator:!0,places:0}):void 0;default:return}}function x(o){return"name"===(o.name&&o.name.toLowerCase())||"name"===o.alias?.toLowerCase()}const M=["geometry","blob","raster","guid","xml"]},89352:(Y,w,t)=>{t.d(w,{A:()=>f});var h=t(8189),c=t(90660),F=t(71065),R=t(97442),$=t(85211),T=(t(3248),t(35150),t(40707),t(15463)),P=t(76576),S=t(26957);let L=class extends(c.A.ClonableMixin(F.A)){constructor(W){super(W),this.unit="milliseconds",this.value=0}toMilliseconds(){return(0,R.t)(this.value,this.unit,"milliseconds")}};(0,h._)([(0,T.e)(S.j,{nonNullable:!0})],L.prototype,"unit",void 0),(0,h._)([(0,$.MZ)({type:Number,json:{write:!0},nonNullable:!0})],L.prototype,"value",void 0),L=(0,h._)([(0,P.$)("esri.time.TimeInterval")],L);const f=L},30448:(Y,w,t)=>{t.d(w,{TA:()=>R,We:()=>j,Z3:()=>$,ZJ:()=>P,w5:()=>L});var h=t(10467),c=t(89563);const R=(0,t(43085).vD)(),$=new Map,B=new Map;function j(f,W,b){return T.apply(this,arguments)}function T(){return(T=(0,h.A)(function*(f,W,b){if(!f||!b)return!1;if(!W)return!0;const N=new URL(f).host;let i=$.get(N);if(!i){const E=f.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");i=(yield(0,c.A)(E,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}return i===W})).apply(this,arguments)}function P(f,W){return S.apply(this,arguments)}function S(){return(S=(0,h.A)(function*(f,W,b=!1){if(!f||!W)return!0;const N=f.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),i=B.get(N)?.entries();if(i)for(const[E,_]of i)if(_.name===W){const u=!_.stack?.hasForwardEdits();if(!u&&b){const[{deleteForwardEdits:y},{default:m}]=yield Promise.all([t.e(4570).then(t.bind(t,44570)),t.e(5566).then(t.bind(t,55566))]),g=yield y(N,E,new m({sessionId:R,moment:_.moment}));return g.success&&_.stack?.clearForwardEdits(),g.success}return u}return!0})).apply(this,arguments)}function L(f,W){if(!f)return!1;const b=f.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),N=B.get(b)?.entries();if(N)for(const[i,E]of N)if(E.name===W)return"edit"===E.lockType;return!1}},64935:(Y,w,t)=>{t.d(w,{D8:()=>$,TO:()=>F,d0:()=>B});var h=t(10467),c=t(86300);function F(I){return R.apply(this,arguments)}function R(){return(R=(0,h.A)(function*(I,j=I.popupTemplate){if(null==j)return[];const T=yield j.getRequiredFields(I.fieldsIndex),{lastEditInfoEnabled:P}=j,{objectIdField:S,typeIdField:L,globalIdField:f,relationships:W}=I;if(T.includes("*"))return["*"];const b=P?(0,c.eX)(I):[],N=(0,c.DB)(I.fieldsIndex,[...T,...b]);return L&&N.push(L),N&&S&&I.fieldsIndex?.has(S)&&!N.includes(S)&&N.push(S),N&&f&&I.fieldsIndex?.has(f)&&!N.includes(f)&&N.push(f),W&&W.forEach(i=>{const{keyField:E}=i;N&&E&&I.fieldsIndex?.has(E)&&!N.includes(E)&&N.push(E)}),N})).apply(this,arguments)}function $(I,j){return I.popupTemplate?I.popupTemplate:null!=j&&j.defaultPopupTemplateEnabled&&null!=I.defaultPopupTemplate?I.defaultPopupTemplate:null}function B(I,j){return null!=$(I,{defaultPopupTemplateEnabled:j})}}}]);