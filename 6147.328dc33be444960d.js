"use strict";(self.webpackChunkAngularClient=self.webpackChunkAngularClient||[]).push([[6147],{33087:(U,j,o)=>{o.d(j,{q:()=>M});var P=o(60611);class M{constructor(D,T){this._storage=new P.F,this.id="",this.name="",this.size=0,this._storage.maxSize=D,this._storage.register(this),T&&this._storage.registerRemoveFunc("",T)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(D,T,O=1){this._storage.put(this,D,T,O,1)}pop(D){return this._storage.pop(this,D)}get(D){return this._storage.get(this,D)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(D){this._storage.maxSize=D}resetHitRate(){}}},60611:(U,j,o)=>{o.d(j,{F:()=>O,Ti:()=>M});var P=o(12438);const M=-3,L=M-1;var D,I;(I=D||(D={}))[I.ALL=0]="ALL",I[I.SOME=1]="SOME";class O{get size(){return this._size}constructor(r=10485760){this._maxSize=r,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new P.A,this._users=new P.A}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear()}register(r){this._users.push(r)}deregister(r){this._users.removeUnordered(r)}registerRemoveFunc(r,t){this._removeFuncs.push([r,t])}deregisterRemoveFunc(r){this._removeFuncs.filterInPlace(t=>t[0]!==r)}get maxSize(){return this._maxSize}set maxSize(r){this._maxSize=Math.max(r,-1),this._checkSize()}getSize(r,t){return this._db.get(r.id+t)?.size??0}put(r,t,n,m,A){const c=this._db.get(t=r.id+t);if(c&&(this._size-=c.size,r.size-=c.size,this._db.delete(t),c.entry!==n&&this._notifyRemove(t,c.entry,c.size,D.ALL)),m>this._maxSize)return void this._notifyRemove(t,n,m,D.ALL);if(void 0===n)return void console.warn("Refusing to cache undefined entry ");if(!m||m<0)return console.warn(`Refusing to cache entry with size ${m} for key ${t}`),void this._notifyRemove(t,n,0,D.ALL);const g=1+Math.max(A,L)-M;this._db.set(t,new C(n,m,g)),this._size+=m,r.size+=m,this._checkSize()}updateSize(r,t,n,m){const A=this._db.get(t=r.id+t);if(A&&A.entry===n){for(this._size-=A.size,r.size-=A.size;m>this._maxSize;){const c=this._notifyRemove(t,n,m,D.SOME);if(!(null!=c&&c>0))return void this._db.delete(t);m=c}A.size=m,this._size+=m,r.size+=m,this._checkSize()}}pop(r,t){const n=this._db.get(t=r.id+t);if(n)return this._size-=n.size,r.size-=n.size,this._db.delete(t),++this._hit,n.entry;++this._miss}get(r,t){const n=this._db.get(t=r.id+t);if(void 0!==n)return this._db.delete(t),n.lives=n.lifetime,this._db.set(t,n),++this._hit,n.entry;++this._miss}peek(r,t){const n=this._db.get(r.id+t);return n?++this._hit:++this._miss,n?.entry}get performanceInfo(){const r={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},t={},n=new Array;this._db.forEach((c,g)=>{const B=c.lifetime;n[B]=(n[B]||0)+c.size,this._users.forAll(S=>{const{id:x,name:p}=S;g.startsWith(x)&&(t[p]=(t[p]||0)+c.size)})});const m={};this._users.forAll(c=>{const g=c.name;"hitRate"in c&&"number"==typeof c.hitRate&&!isNaN(c.hitRate)&&c.hitRate>0?(t[g]=t[g]||0,m[g]=Math.round(100*c.hitRate)+"%"):m[g]="0%"});const A=Object.keys(t);A.sort((c,g)=>t[g]-t[c]),A.forEach(c=>r[c]=Math.round(t[c]/2**20)+"MB / "+m[c]);for(let c=n.length-1;c>=0;--c){const g=n[c];g&&(r["Priority "+(c+M-1)]=Math.round(g/this._size*100)+"%")}return r}resetStats(){this._hit=this._miss=0,this._users.forAll(r=>r.resetHitRate())}clear(r){const t=r.id;this._db.forEach((n,m)=>{m.startsWith(t)&&(this._size-=n.size,this._db.delete(m),this._notifyRemove(m,n.entry,n.size,D.ALL))}),r.size=0}clearAll(){this._db.forEach((r,t)=>this._notifyRemove(t,r.entry,r.size,D.ALL)),this._users.forAll(r=>r.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(r,t,n,m){let A;return this._removeFuncs.some(c=>{if(r.startsWith(c[0])){const g=c[1](t,m,n);return"number"==typeof g&&(A=g),!0}return!1}),A}_checkSize(){this._users.forAll(r=>this._checkSizeLimits(r)),this._checkSizeLimits()}_checkSizeLimits(r){const t=r??this;if(t.maxSize<0||t.size<=t.maxSize)return;const n=r?.id;let m=!0;for(;m;){m=!1;for(const[A,c]of this._db)if(0===c.lifetime&&(!n||A.startsWith(n))){if(this._purgeItem(A,c,r),t.size<=.9*t.maxSize)return;m||=this._db.has(A)}}for(const[A,c]of this._db)if((!n||A.startsWith(n))&&(this._purgeItem(A,c,r),t.size<=.9*t.maxSize))return}_purgeItem(r,t,n=this._users.find(m=>r.startsWith(m.id))){if(this._db.delete(r),t.lives<=1){this._size-=t.size,n&&(n.size-=t.size);const m=this._notifyRemove(r,t.entry,t.size,D.SOME);null!=m&&m>0&&(this._size+=m,n&&(n.size+=m),t.lives=t.lifetime,t.size=m,this._db.set(r,t))}else--t.lives,this._db.set(r,t)}}class C{constructor(r,t,n){this.entry=r,this.size=t,this.lifetime=n,this.lives=n}}},70264:(U,j,o)=>{o.d(j,{Jy:()=>g,Ox:()=>c,Qm:()=>v,Sp:()=>p,_4:()=>A});var P=o(10467),M=o(23098),L=o(77469),D=o(92165),T=o(89563),O=o(77806),z=o(45272),C=o(32034),I=o(2296),r=o(83065),t=o(85718),n=o(93327);const m={esriGeometryPoint:"points",esriGeometryPolyline:"polylines",esriGeometryPolygon:"polygons"};function A(i){const d=i.folders||[],a=d.slice(),u=new Map,f=new Map,R=new Map,e=new Map,l=new Map,s={esriGeometryPoint:f,esriGeometryPolyline:R,esriGeometryPolygon:e};(i.featureCollection?.layers||[]).forEach(h=>{const y=(0,O.o8)(h);y.featureSet.features=[];const b=h.featureSet.geometryType;u.set(b,y);const W=h.layerDefinition.objectIdField;"esriGeometryPoint"===b?B(f,W,h.featureSet.features):"esriGeometryPolyline"===b?B(R,W,h.featureSet.features):"esriGeometryPolygon"===b&&B(e,W,h.featureSet.features)}),i.groundOverlays&&i.groundOverlays.forEach(h=>{l.set(h.id,h)}),d.forEach(h=>{h.networkLinkIds.forEach(y=>{const b=function x(i,d,a){const u=function S(i,d){let a;return d.some(u=>u.id===i&&(a=u,!0)),a}(i,a);return u&&(u.parentFolderId=d,u.networkLink=u),u}(y,h.id,i.networkLinks);b&&a.push(b)})}),a.forEach(h=>{if(h.featureInfos){h.points=(0,O.o8)(u.get("esriGeometryPoint")),h.polylines=(0,O.o8)(u.get("esriGeometryPolyline")),h.polygons=(0,O.o8)(u.get("esriGeometryPolygon")),h.mapImages=[];for(const y of h.featureInfos)switch(y.type){case"esriGeometryPoint":case"esriGeometryPolyline":case"esriGeometryPolygon":{const b=s[y.type].get(y.id);b&&h[m[y.type]]?.featureSet.features.push(b);break}case"GroundOverlay":{const b=l.get(y.id);b&&h.mapImages.push(b);break}}h.fullExtent=v([h])}});const _=v(a);return{folders:d,sublayers:a,extent:_}}function c(i,d,a,u){const f=L.id?.findCredential(i);return i=(0,z.a6)(i,{token:f?.token}),(0,T.A)(M.A.kmlServiceUrl,{query:{url:i,model:"simple",folders:"",refresh:0!==a||void 0,outSR:JSON.stringify(d)},responseType:"json",signal:u})}function g(i,d,a=null,u=[]){const f=[],R={},e=d.sublayers,l=new Set(d.folders.map(s=>s.id));return e.forEach(s=>{const _=new i;if(a?_.read(s,a):_.read(s),u.length&&l.has(_.id)&&(_.visible=u.includes(_.id)),R[s.id]=_,null!=s.parentFolderId&&-1!==s.parentFolderId){const h=R[s.parentFolderId];h.sublayers||(h.sublayers=[]),h.sublayers?.unshift(_)}else f.unshift(_)}),f}function B(i,d,a){a.forEach(u=>{i.set(u.attributes[d],u)})}function p(i){return E.apply(this,arguments)}function E(){return(E=(0,P.A)(function*(i){const d=n.A.fromJSON(i.featureSet).features,u=(0,t.r)(i.layerDefinition.drawingInfo.renderer),f=D.A.fromJSON(i.popupInfo),R=[];for(const e of d){const l=yield u.getSymbolAsync(e);e.symbol=l,e.popupTemplate=f,e.visible=!0,R.push(e)}return R})).apply(this,arguments)}function v(i){const d=(0,I.vt)(I.qv),a=(0,I.vt)(I.qv);for(const u of i){if(u.polygons?.featureSet?.features)for(const f of u.polygons.featureSet.features)(0,r.LJ)(d,f.geometry),(0,I.RF)(a,d);if(u.polylines?.featureSet?.features)for(const f of u.polylines.featureSet.features)(0,r.LJ)(d,f.geometry),(0,I.RF)(a,d);if(u.points?.featureSet?.features)for(const f of u.points.featureSet.features)(0,r.LJ)(d,f.geometry),(0,I.RF)(a,d);if(u.mapImages)for(const f of u.mapImages)(0,r.LJ)(d,f.extent),(0,I.RF)(a,d)}return(0,I.aI)(a,I.qv)?void 0:{xmin:a[0],ymin:a[1],zmin:a[2],xmax:a[3],ymax:a[4],zmax:a[5],spatialReference:C.A.WGS84}}},79122:(U,j,o)=>{o.d(j,{A:()=>R});var E,P=o(10467),M=o(8189),L=o(49976),D=o(77806),T=o(35150),O=o(85211),z=o(48669),C=o(15463),I=o(17221),r=o(76576),t=o(50305),n=o(55739),m=o(86300),A=o(38582),c=o(18550),g=o(19390),B=o(36345),S=o(23005),x=o(48218),p=o(94048);const i="percent-of-total",d="field",a=new L.J({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:i,esriNormalizeByField:d}),u=(0,n.dp)(g.A);let f=E=class extends((0,c.h)(A.A)){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,l,s){if(!Array.isArray(e))return;let _=l.minValue;return e.map(h=>{const y=new g.A;return y.read(h,s),null==y.minValue&&(y.minValue=_),null==y.maxValue&&(y.maxValue=y.minValue),_=y.maxValue,y})}writeClassBreakInfos(e,l,s,_){const h=e.map(y=>y.write({},_));this._areClassBreaksConsecutive()&&h.forEach(y=>delete y.classMinValue),l[s]=h}castField(e){return null==e?e:"function"==typeof e?(T.A.getLogger(this).error(".field: field must be a string value"),null):(0,n.GX)(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const l=!!this.normalizationField,s=null!=this.normalizationTotal;return l||s?(e=l&&d||s&&i||null,l&&s&&T.A.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):e!==d&&e!==i||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,l,s){let _=null;_="number"==typeof e?new g.A({minValue:e,maxValue:l,symbol:(0,p.dp)(s)}):u((0,D.o8)(e)),this.classBreakInfos.push(_),1===this.classBreakInfos.length&&this.notifyChange("minValue")}removeClassBreakInfo(e,l){const s=this.classBreakInfos.length;for(let _=0;_<s;_++){const h=[this.classBreakInfos[_].minValue,this.classBreakInfos[_].maxValue];if(h[0]===e&&h[1]===l){this.classBreakInfos.splice(_,1);break}}}getBreakIndex(e,l){return this.valueExpression&&null==l?.arcade&&T.A.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(e,l):this._getBreakIndexForField(e)}getClassBreakInfo(e,l){var s=this;return(0,P.A)(function*(){let _=l;s.valueExpression&&null==l?.arcade&&(_={..._,arcade:yield(0,x.lw)()});const h=s.getBreakIndex(e,_);return-1!==h?s.classBreakInfos[h]:null})()}getSymbol(e,l){if(this.valueExpression&&null==l?.arcade)return void T.A.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const s=this.getBreakIndex(e,l);return s>-1?this.classBreakInfos[s].symbol:this.defaultSymbol}getSymbolAsync(e,l){var s=this;return(0,P.A)(function*(){let _=l;if(s.valueExpression&&null==l?.arcade){const y=yield(0,x.lw)(),{arcadeUtils:b}=y;b.hasGeometryOperations(s.valueExpression)&&(yield b.enableGeometryOperations()),_={..._,arcade:y}}const h=s.getBreakIndex(e,_);return h>-1?s.classBreakInfos[h].symbol:s.defaultSymbol})()}get symbols(){const e=[];return this.classBreakInfos.forEach(l=>{l.symbol&&e.push(l.symbol)}),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables?.reduce((e,l)=>e+l.getAttributeHash(),"")??""}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),l=JSON.stringify(this.defaultSymbol),s=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${e}.${l}.${this.classBreakInfos.reduce((_,h)=>_+h.getMeshHash(),"")}.${s}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new E({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol?.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol?.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:(0,D.o8)(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:(0,D.o8)(this.visualVariables),legendOptions:(0,D.o8)(this.legendOptions),authoringInfo:(0,D.o8)(this.authoringInfo)})}collectRequiredFields(e,l){var s=this;return(0,P.A)(function*(){const _=[s.collectVVRequiredFields(e,l),s.collectSymbolFields(e,l)];yield Promise.all(_)})()}collectSymbolFields(e,l){var s=this;return(0,P.A)(function*(){const _=[...s.symbols.map(h=>h.collectRequiredFields(e,l)),(0,m.Dx)(e,l,s.valueExpression)];(0,m.rq)(e,l,s.field),(0,m.rq)(e,l,s.normalizationField),yield Promise.all(_)})()}_getBreakIndexForExpression(e,l){const{viewingMode:s,scale:_,spatialReference:h,arcade:y,timeZone:b}=l??{},{valueExpression:W}=this;let K=this._compiledValueExpression.valueExpression===W?this._compiledValueExpression.compiledFunction:null;const F=y.arcadeUtils;if(!K){const G=F.createSyntaxTree(W);K=F.createFunction(G),this._compiledValueExpression.compiledFunction=K}this._compiledValueExpression.valueExpression=W;const V=F.executeFunction(K,F.createExecContext(e,F.getViewInfo({viewingMode:s,scale:_,spatialReference:h}),b));return this._getBreakIndexfromInfos(V)}_getBreakIndexForField(e){const s=e.attributes,_=this.normalizationType;let h=parseFloat(s[this.field]);if(_){const y=this.normalizationTotal,b=parseFloat(this.normalizationField?s[this.normalizationField]:void 0);if("log"===_)h=Math.log(h)*Math.LOG10E;else if(_!==i||null==y||isNaN(y)){if(_===d&&!isNaN(b)){if(isNaN(h)||isNaN(b))return-1;h/=b}}else h=h/y*100}return this._getBreakIndexfromInfos(h)}_getBreakIndexfromInfos(e){const l=this.isMaxInclusive;if(null!=e&&"number"==typeof e&&!isNaN(e))for(let s=0;s<this.classBreakInfos.length;s++){const _=[this.classBreakInfos[s].minValue,this.classBreakInfos[s].maxValue];if(_[0]<=e&&(l?e<=_[1]:e<_[1]))return s}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,l=e.length;for(let s=1;s<l;s++)if(e[s-1].maxValue!==e[s].minValue)return!1;return!0}};(0,M._)([(0,O.MZ)(B.As)],f.prototype,"backgroundFillSymbol",void 0),(0,M._)([(0,O.MZ)({type:[g.A],json:{write:{isRequired:!0}}})],f.prototype,"classBreakInfos",void 0),(0,M._)([(0,I.w)("classBreakInfos")],f.prototype,"readClassBreakInfos",null),(0,M._)([(0,t.K)("classBreakInfos")],f.prototype,"writeClassBreakInfos",null),(0,M._)([(0,O.MZ)({type:String,json:{write:!0}})],f.prototype,"defaultLabel",void 0),(0,M._)([(0,O.MZ)(B.z4)],f.prototype,"defaultSymbol",void 0),(0,M._)([(0,O.MZ)({type:String,json:{write:!0}})],f.prototype,"field",void 0),(0,M._)([(0,z.w)("field")],f.prototype,"castField",null),(0,M._)([(0,O.MZ)({type:Boolean})],f.prototype,"isMaxInclusive",void 0),(0,M._)([(0,O.MZ)({type:S.A,json:{write:!0}})],f.prototype,"legendOptions",void 0),(0,M._)([(0,O.MZ)({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],f.prototype,"minValue",null),(0,M._)([(0,O.MZ)({type:String,json:{write:!0}})],f.prototype,"normalizationField",void 0),(0,M._)([(0,O.MZ)({type:Number,json:{write:!0}})],f.prototype,"normalizationTotal",void 0),(0,M._)([(0,O.MZ)({type:a.apiValues,value:null,json:{type:a.jsonValues,read:a.read,write:a.write}})],f.prototype,"normalizationType",null),(0,M._)([(0,C.e)({classBreaks:"class-breaks"})],f.prototype,"type",void 0),(0,M._)([(0,O.MZ)({type:String,json:{write:!0}})],f.prototype,"valueExpression",void 0),(0,M._)([(0,O.MZ)({type:String,json:{write:!0}})],f.prototype,"valueExpressionTitle",void 0),f=E=(0,M._)([(0,r.$)("esri.renderers.ClassBreaksRenderer")],f);const R=f},73747:(U,j,o)=>{o.d(j,{A:()=>A});var n,P=o(10467),M=o(8189),L=o(77806),D=o(85211),z=(o(3248),o(35150),o(15463)),C=o(76576),I=o(38582),r=o(18550),t=o(36345);let m=n=class extends((0,r.h)(I.A)){constructor(c){super(c),this.description=null,this.label=null,this.symbol=null,this.type="simple"}collectRequiredFields(c,g){var B=this;return(0,P.A)(function*(){yield Promise.all([B.collectSymbolFields(c,g),B.collectVVRequiredFields(c,g)])})()}collectSymbolFields(c,g){var B=this;return(0,P.A)(function*(){yield Promise.all(B.symbols.map(S=>S.collectRequiredFields(c,g)))})()}getSymbol(c,g){return this.symbol}getSymbolAsync(c,g){var B=this;return(0,P.A)(function*(){return B.symbol})()}get symbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables?.reduce((c,g)=>c+g.getAttributeHash(),"")??""}getMeshHash(){return this.symbols.reduce((c,g)=>c+JSON.stringify(g),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new n({description:this.description,label:this.label,symbol:(0,L.o8)(this.symbol),visualVariables:(0,L.o8)(this.visualVariables),authoringInfo:(0,L.o8)(this.authoringInfo)})}};(0,M._)([(0,D.MZ)({type:String,json:{write:!0}})],m.prototype,"description",void 0),(0,M._)([(0,D.MZ)({type:String,json:{write:!0}})],m.prototype,"label",void 0),(0,M._)([(0,D.MZ)(t.Wp)],m.prototype,"symbol",void 0),(0,M._)([(0,z.e)({simple:"simple"})],m.prototype,"type",void 0),m=n=(0,M._)([(0,C.$)("esri.renderers.SimpleRenderer")],m);const A=m},19390:(U,j,o)=>{o.d(j,{A:()=>t});var I,P=o(8189),M=o(71065),L=o(85211),z=(o(3248),o(35150),o(40707),o(76576)),C=o(36345);let r=I=class extends M.A{constructor(n){super(n),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new I({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?.clone()??null})}getMeshHash(){const n=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${n}`}};(0,P._)([(0,L.MZ)({type:String,json:{write:!0}})],r.prototype,"description",void 0),(0,P._)([(0,L.MZ)({type:String,json:{write:!0}})],r.prototype,"label",void 0),(0,P._)([(0,L.MZ)({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],r.prototype,"minValue",void 0),(0,P._)([(0,L.MZ)({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],r.prototype,"maxValue",void 0),(0,P._)([(0,L.MZ)(C.Wp)],r.prototype,"symbol",void 0),r=I=(0,P._)([(0,z.$)("esri.renderers.support.ClassBreakInfo")],r);const t=r},78592:(U,j,o)=>{o.d(j,{O3:()=>I,PU:()=>z,YW:()=>t,ex:()=>T,hv:()=>r,zp:()=>O});var P=o(69287),M=o(67685),L=o(53781),D=o(89141);const T=2.4;function O(n){return(0,M.PN)(n*T)}function z(n){return(0,M.Lz)(n)/T}function C(n,m,A,c){let{color:g,ratio:B}=m,{color:S,ratio:x}=A;x===B&&(1===x?B-=1e-6:x+=1e-6);const p=(0,P.qE)((c-B)/(x-B),0,1);(0,L.l)(n,g.toArray(),S.toArray(),p)}function I(n){const A=new Uint8ClampedArray(2048);if((n=n.filter(({ratio:x})=>x>=0&&x<=1).sort((x,p)=>x.ratio-p.ratio).map(({color:x,ratio:p})=>({color:x,ratio:Math.max(p,.001)}))).length<1)return A;let c=n[0],g=n[0],B=1;const S=(0,D.vt)();for(let x=0;x<512;x++){const p=(x+.5)/512;for(;p>g.ratio&&B<n.length;)c=g,g=n[B++];C(S,c,g,p),A.set(S,4*x)}return A}function r(n,m,A){const c=Math.sqrt(n**2+m**2)/A;return c>1?0:3/(Math.PI*A**2)*(1-c**2)**2}function t(n){return"function"==typeof n?n:n?m=>+m[n]:()=>1}},85718:(U,j,o)=>{o.d(j,{L:()=>O,r:()=>D});var P=o(96996),M=o(71224),L=o(31595);function D(z,C){return O(z,null,C)}const T=(0,M.C)({types:L.Hg});function O(z,C,I){return z?z&&(z.styleName||z.styleUrl)&&"uniqueValue"!==z.type?(I?.messages&&I.messages.push(new P.A("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+z.type+"'",{definition:z,context:I})),null):T(z,C,I):null}},93327:(U,j,o)=>{o.d(j,{A:()=>x});var g,P=o(8189),M=o(81098),L=o(49976),D=o(71065),T=o(77806),O=o(85211),I=(o(3248),o(35150),o(17221)),r=o(76576),t=o(50305),n=o(32034),m=o(61320),A=o(6434),c=o(29141);const B=new L.J({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let S=g=class extends D.A{constructor(p){super(p),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(p,E){return this.readFeaturesWithClass(p,E,M.A)}writeGeometryType(p,E,v,i){if(p)return void B.write(p,E,v,i);const{features:d}=this;if(d)for(const a of d)if(null!=a?.geometry)return void B.write(a.geometry.type,E,v,i)}readQueryGeometry(p,E){if(!p)return null;const v=!!p.spatialReference,i=(0,m.rS)(p);return i&&!v&&E.spatialReference&&(i.spatialReference=n.A.fromJSON(E.spatialReference)),i}writeSpatialReference(p,E){if(p)return void(E.spatialReference=p.toJSON());const{features:v}=this;if(v)for(const i of v)if(i&&null!=i.geometry&&i.geometry.spatialReference)return void(E.spatialReference=i.geometry.spatialReference.toJSON())}clone(){return new g(this.cloneProperties())}cloneProperties(){return(0,T.o8)({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(p){const E=this.write();if(E.features&&Array.isArray(p)&&p.length>0)for(let v=0;v<E.features.length;v++){const i=E.features[v];if(i.geometry){const d=p?.[v];i.geometry=d?.toJSON()||i.geometry}}return E}quantize(p){const{scale:[E,v],translate:[i,d]}=p,f=this.features,R=this._getQuantizationFunction(this.geometryType,e=>Math.round((e-i)/E),e=>Math.round((d-e)/v));for(let e=0,l=f.length;e<l;e++)R?.(f[e].geometry)||(f.splice(e,1),e--,l--);return this.transform=p,this}unquantize(){const{geometryType:p,features:E,transform:v}=this;if(!v)return this;const{translate:[i,d],scale:[a,u]}=v;let e=null,l=null;if(this.hasZ&&null!=v?.scale?.[2]){const{translate:[,,_],scale:[,,h]}=v;e=y=>y*h+_}if(this.hasM&&null!=v?.scale?.[3]){const{translate:[,,,_],scale:[,,,h]}=v;l=y=>null==y?y:y*h+_}const s=this._getHydrationFunction(p,_=>_*a+i,_=>d-_*u,e,l);for(const{geometry:_}of E)null!=_&&s&&s(_);return this.transform=null,this}readFeaturesWithClass(p,E,v){const i=n.A.fromJSON(E.spatialReference),d=[];for(let a=0;a<p.length;a++){const u=p[a],f=v.fromJSON(u),R=u.geometry?.spatialReference;null==f.geometry||R||(f.geometry.spatialReference=i);const e=u.aggregateGeometries,l=f.aggregateGeometries;if(e&&null!=l)for(const s in l){const _=l[s],h=e[s],y=h?.spatialReference;null==_||y||(_.spatialReference=i)}d.push(f)}return d}_quantizePoints(p,E,v){let i,d;const a=[];for(let u=0,f=p.length;u<f;u++){const R=p[u];if(u>0){const e=E(R[0]),l=v(R[1]);e===i&&l===d||(a.push([e-i,l-d]),i=e,d=l)}else i=E(R[0]),d=v(R[1]),a.push([i,d])}return a.length>0?a:null}_getQuantizationFunction(p,E,v){return"point"===p?i=>(i.x=E(i.x),i.y=v(i.y),i):"polyline"===p||"polygon"===p?i=>{const d=(0,m.Bi)(i)?i.rings:i.paths,a=[];for(let u=0,f=d.length;u<f;u++){const e=this._quantizePoints(d[u],E,v);e&&a.push(e)}return a.length>0?((0,m.Bi)(i)?i.rings=a:i.paths=a,i):null}:"multipoint"===p?i=>{const d=this._quantizePoints(i.points,E,v);return d&&d.length>0?(i.points=d,i):null}:"extent"===p?i=>i:null}_getHydrationFunction(p,E,v,i,d){return"point"===p?a=>{a.x=E(a.x),a.y=v(a.y),i&&(a.z=i(a.z))}:"polyline"===p||"polygon"===p?a=>{const u=(0,m.Bi)(a)?a.rings:a.paths;let f,R;for(let e=0,l=u.length;e<l;e++){const s=u[e];for(let _=0,h=s.length;_<h;_++){const y=s[_];_>0?(f+=y[0],R+=y[1]):(f=y[0],R=y[1]),y[0]=E(f),y[1]=v(R)}}if(i&&d)for(let e=0,l=u.length;e<l;e++){const s=u[e];for(let _=0,h=s.length;_<h;_++){const y=s[_];y[2]=i(y[2]),y[3]=d(y[3])}}else if(i)for(let e=0,l=u.length;e<l;e++){const s=u[e];for(let _=0,h=s.length;_<h;_++){const y=s[_];y[2]=i(y[2])}}else if(d)for(let e=0,l=u.length;e<l;e++){const s=u[e];for(let _=0,h=s.length;_<h;_++){const y=s[_];y[2]=d(y[2])}}}:"extent"===p?a=>{a.xmin=E(a.xmin),a.ymin=v(a.ymin),a.xmax=E(a.xmax),a.ymax=v(a.ymax),i&&null!=a.zmax&&null!=a.zmin&&(a.zmax=i(a.zmax),a.zmin=i(a.zmin)),d&&null!=a.mmax&&null!=a.mmin&&(a.mmax=d(a.mmax),a.mmin=d(a.mmin))}:"multipoint"===p?a=>{const u=a.points;let f,R;for(let e=0,l=u.length;e<l;e++){const s=u[e];e>0?(f+=s[0],R+=s[1]):(f=s[0],R=s[1]),s[0]=E(f),s[1]=v(R)}if(i&&d)for(let e=0,l=u.length;e<l;e++){const s=u[e];s[2]=i(s[2]),s[3]=d(s[3])}else if(i)for(let e=0,l=u.length;e<l;e++){const s=u[e];s[2]=i(s[2])}else if(d)for(let e=0,l=u.length;e<l;e++){const s=u[e];s[2]=d(s[2])}}:null}};(0,P._)([(0,O.MZ)({type:String,json:{write:!0}})],S.prototype,"displayFieldName",void 0),(0,P._)([(0,O.MZ)({type:Boolean,json:{write:{overridePolicy:p=>({enabled:p})}}})],S.prototype,"exceededTransferLimit",void 0),(0,P._)([(0,O.MZ)({type:[M.A],json:{write:!0}})],S.prototype,"features",void 0),(0,P._)([(0,I.w)("features")],S.prototype,"readFeatures",null),(0,P._)([(0,O.MZ)({type:[c.A],json:{write:!0}})],S.prototype,"fields",void 0),(0,P._)([(0,O.MZ)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:B.read}}})],S.prototype,"geometryType",void 0),(0,P._)([(0,t.K)("geometryType")],S.prototype,"writeGeometryType",null),(0,P._)([(0,O.MZ)({type:Boolean,json:{write:{overridePolicy:p=>({enabled:p})}}})],S.prototype,"hasM",void 0),(0,P._)([(0,O.MZ)({type:Boolean,json:{write:{overridePolicy:p=>({enabled:p})}}})],S.prototype,"hasZ",void 0),(0,P._)([(0,O.MZ)({types:A.yR,json:{write:!0}})],S.prototype,"queryGeometry",void 0),(0,P._)([(0,I.w)("queryGeometry")],S.prototype,"readQueryGeometry",null),(0,P._)([(0,O.MZ)({type:n.A,json:{write:!0}})],S.prototype,"spatialReference",void 0),(0,P._)([(0,t.K)("spatialReference")],S.prototype,"writeSpatialReference",null),(0,P._)([(0,O.MZ)({json:{write:!0}})],S.prototype,"transform",void 0),S=g=(0,P._)([(0,r.$)("esri.rest.support.FeatureSet")],S),S.prototype.toJSON.isDefaultToJSON=!0;const x=S}}]);