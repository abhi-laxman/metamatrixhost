"use strict";(self.webpackChunkAngularClient=self.webpackChunkAngularClient||[]).push([[3085],{5216:(K,R,o)=>{o.d(R,{BV:()=>I});var x,n,m=o(83953),V=o(45475),l=o(28714),h=o(25866),_=o(53781),u=o(89141),E=o(1749);(n=x||(x={}))[n.Z=0]="Z",n[n.M=1]="M";class Z{constructor(t){this.spatialReference=t}createVector(){return this._tag((0,V.vt)())}pointToVector(t){return this._tag((0,V.fA)(t.x,t.y))}arrayToVector(t){return this._tag((0,V.fA)(t[0],t[1]))}vectorToArray(t){return[t[0],t[1]]}pointToArray(t){return[t.x,t.y]}vectorToPoint(t,e=new E.A){return e.x=t[0],e.y=t[1],e.z=void 0,e.m=void 0,e.spatialReference=this.spatialReference,e}arrayToPoint(t,e=new E.A){return e.x=t[0],e.y=t[1],e.z=void 0,e.m=void 0,e.spatialReference=this.spatialReference,e}vectorToDehydratedPoint(t,e){if(t)return e??={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"},e.x=t[0],e.y=t[1],e.z=void 0,e.m=void 0,e.hasZ=!1,e.hasM=!1,e.spatialReference=this.spatialReference,e}lerp(t,e,A,f){return(0,m.Cc)(f,t,e,A)}addDelta(t,e,A){t[0]+=e,t[1]+=A}distance(t,e){return(0,m.Io)(t,e)}getZ(t,e=void 0){return e}hasZ(){return!1}getM(t,e=void 0){return e}hasM(){return!1}clone(t){return this._tag((0,V.ci)(t))}copy(t,e){return(0,m.C)(e,t)}fromXYZ(t){return this._tag((0,V.fA)(t[0],t[1]))}toXYZ(t,e=(0,h.vt)()){return(0,l.i)(e,t[0],t[1],0)}pointToXYZ(t,e=(0,h.vt)()){return(0,l.i)(e,t.x,t.y,0)}equals(t,e){return(0,m.aI)(t,e)}_tag(t){return t}}class O{constructor(t,e){this._valueType=t,this.spatialReference=e}createVector(){return this._tag((0,h.vt)())}pointToVector(t){return this._tag((0,h.fA)(t.x,t.y,this._valueType===x.Z?t.z:t.m))}arrayToVector(t){return this._tag((0,h.fA)(t[0],t[1],t[2]||0))}vectorToArray(t){return[t[0],t[1],t[2]]}pointToArray(t){return this._valueType===x.Z?[t.x,t.y,t.z]:[t.x,t.y,t.m]}vectorToPoint(t,e=new E.A){return e.x=t[0],e.y=t[1],e.z=this._valueType===x.Z?t[2]:void 0,e.m=this._valueType===x.M?t[2]:void 0,e.spatialReference=this.spatialReference,e}arrayToPoint(t,e=new E.A){return e.x=t[0],e.y=t[1],e.z=this._valueType===x.Z?t[2]:void 0,e.m=this._valueType===x.M?t[2]:void 0,e.spatialReference=this.spatialReference,e}vectorToDehydratedPoint(t,e){if(!t)return;e??={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"};const A=this._valueType===x.Z,f=this._valueType===x.M;return e.x=t[0],e.y=t[1],e.z=A?t[2]:void 0,e.m=f?t[2]:void 0,e.hasZ=A,e.hasM=f,e.spatialReference=this.spatialReference,e}lerp(t,e,A,f){return(0,l.m)(f,t,e,A)}addDelta(t,e,A,f){t[0]+=e,t[1]+=A,this._valueType===x.Z&&(t[2]+=f)}distance(t,e){return this._valueType===x.Z?(0,l.j)(t,e):(0,m.Io)(t,e)}getZ(t,e=void 0){return this._valueType===x.Z?t[2]:e}hasZ(){return this._valueType===x.Z}getM(t,e=void 0){return this._valueType===x.M?t[2]:e}hasM(){return this._valueType===x.M}clone(t){return this._tag((0,h.ci)(t))}copy(t,e){return(0,l.c)(e,t)}fromXYZ(t,e=0,A=0){return this._tag((0,h.fA)(t[0],t[1],this._valueType===x.Z?t.length>2?t[2]:e:A))}toXYZ(t,e=(0,h.vt)()){return(0,l.i)(e,t[0],t[1],this._valueType===x.Z?t[2]:0)}pointToXYZ(t,e=(0,h.vt)()){return(0,l.i)(e,t.x,t.y,this._valueType===x.Z?t.z??0:0)}equals(t,e){return(0,l.I)(t,e)}_tag(t){return t}}class M{constructor(t){this.spatialReference=t}createVector(){return this._tag((0,u.vt)())}pointToVector(t){return this._tag((0,u.fA)(t.x,t.y,t.z,t.m))}arrayToVector(t){return this._tag((0,u.fA)(t[0],t[1],t[2]||0,t[3]||0))}vectorToArray(t){return[t[0],t[1],t[2],t[3]]}pointToArray(t){return[t.x,t.y,t.z,t.m]}vectorToPoint(t,e=new E.A){return e.x=t[0],e.y=t[1],e.z=t[2],e.m=t[3],e.spatialReference=this.spatialReference,e}arrayToPoint(t,e=new E.A){return e.x=t[0],e.y=t[1],e.z=t[2],e.m=t[3],e.spatialReference=this.spatialReference,e}vectorToDehydratedPoint(t,e){if(t)return e??={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"},e.x=t[0],e.y=t[1],e.z=t[2],e.m=t[3],e.hasZ=!0,e.hasM=!0,e.spatialReference=this.spatialReference,e}lerp(t,e,A,f){return(0,_.l)(f,t,e,A)}addDelta(t,e,A,f){t[0]+=e,t[1]+=A,t[2]+=f}distance(t,e){return(0,l.j)(t,e)}getZ(t){return t[2]}hasZ(){return!0}getM(t){return t[3]}hasM(){return!0}clone(t){return this._tag((0,u.ci)(t))}copy(t,e){return(0,_.c)(e,t)}fromXYZ(t,e=0,A=0){return this._tag((0,u.fA)(t[0],t[1],t.length>2?t[2]:e,A))}toXYZ(t,e=(0,h.vt)()){return(0,l.i)(e,t[0],t[1],t[2])}pointToXYZ(t,e=(0,h.vt)()){return(0,l.i)(e,t.x,t.y,t.z??0)}equals(t,e){return(0,_.e)(t,e)}_tag(t){return t}}function I(n,t,e){return n&&t?new M(e):t?new O(x.M,e):n?new O(x.Z,e):new Z(e)}},46175:(K,R,o)=>{o.d(R,{uA:()=>S,oH:()=>L,ZE:()=>I,Li:()=>M,oF:()=>A});var m=o(89952),V=o(69690),l=o(42425),h=o(55861),_=o(93615),u=o(5216),E=o(58701),x=o(23191);class M{constructor(g){this.component=g,this.leftEdge=null,this.rightEdge=null,this.type="vertex",this.index=null}get pos(){return this._pos}set pos(g){this._pos=g,this.component.unnormalizeVertexPositions()}}class L{constructor(g,P,D){this.component=g,this.leftVertex=P,this.rightVertex=D,this.type="edge",P.rightEdge=this,D.leftEdge=this}}class S{constructor(g,P){this._spatialReference=g,this._viewingMode=P,this.vertices=[],this.edges=[],this.index=null}unnormalizeVertexPositions(){this.vertices.length<=1||function Z(f,g){if(!g.supported)return;let P=1/0,D=-1/0;const C=g.upperBoundX-g.lowerBoundX;f.forEach(i=>{let s=i.pos[0];for(;s<g.lowerBoundX;)s+=C;for(;s>g.upperBoundX;)s-=C;P=Math.min(P,s),D=Math.max(D,s),i.pos[0]=s});const T=D-P;C-T<T&&f.forEach(i=>{i.pos[0]<0&&(i.pos[0]+=C)})}(this.vertices,function O(f,g){const P=(0,E.Vp)(f);return g===x.RT.Global&&P?{supported:!0,lowerBoundX:P.valid[0],upperBoundX:P.valid[1]}:{supported:!1,lowerBoundX:null,upperBoundX:null}}(this._spatialReference,this._viewingMode))}updateVertexIndex(g,P){if(0===this.vertices.length)return;const D=this.vertices[0];let C=null,T=g,i=P;do{C=T,C.index=i++,T=C.rightEdge?C.rightEdge.rightVertex:null}while(null!=T&&T!==D);C.leftEdge&&C!==this.vertices[this.vertices.length-1]&&this.swapVertices(this.vertices.indexOf(C),this.vertices.length-1)}getFirstVertex(){return this.vertices.at(0)}getLastVertex(){return this.vertices.at(-1)}isClosed(){return this.vertices.length>2&&null!==this.vertices[0].leftEdge}swapVertices(g,P){const D=this.vertices[g];this.vertices[g]=this.vertices[P],this.vertices[P]=D}iterateVertices(g){if(0===this.vertices.length)return;const P=this.vertices[0];let D=P;do{g(D,D.index),D=null!=D.rightEdge?D.rightEdge.rightVertex:null}while(D!==P&&null!=D)}}class I extends l.A{constructor(g,P){super(),this.type=g,this.coordinateHelper=P,this._geometry=null,this._dirty=!0,this.components=[]}get geometry(){if(this._dirty){switch(this.type){case"point":this._geometry=this._toPoint();break;case"polyline":this._geometry=this._toPolyline();break;case"polygon":this._geometry=this._toPolygon();break;case"mesh":break;default:(0,V.Xb)(this.type)}this._dirty=!1}return this._geometry}get spatialReference(){return this.coordinateHelper.spatialReference}get allVertices(){return Array.from(this.iterateVertices())}*iterateVertices(){for(const g of this.components)for(const P of g.vertices)yield P}notifyChanges(g){this._dirty=!0,this.emit("change",g)}_toPoint(){return 0===this.components.length||0===this.components[0].vertices.length?null:this.coordinateHelper.vectorToPoint(this.components[0].vertices[0].pos)}_toPolyline(){const g=[],P=this.coordinateHelper.vectorToArray;for(const D of this.components){if(D.vertices.length<1)continue;const C=[];let T=D.vertices.find(s=>null==s.leftEdge);const i=T;do{C.push(P(T.pos)),T=T.rightEdge?T.rightEdge.rightVertex:null}while(T&&T!==i);g.push(C)}return new _.A({paths:g,spatialReference:this.spatialReference,hasZ:this.coordinateHelper.hasZ(),hasM:this.coordinateHelper.hasM()})}_toPolygon(){const g=[],P=this.coordinateHelper.vectorToArray;for(const D of this.components){if(D.vertices.length<1)continue;const C=[],T=D.vertices[0];let i=T;const s=i;do{C.push(P(i.pos)),i=null!=i.rightEdge?i.rightEdge.rightVertex:null}while(i&&i!==s);D.isClosed()&&C.push(P(T.pos)),g.push(C)}return new h.A({rings:g,spatialReference:this.spatialReference,hasZ:this.coordinateHelper.hasZ(),hasM:this.coordinateHelper.hasM()})}static fromGeometry(g,P){const C=(0,u.BV)(g.hasZ,g.hasM,g.spatialReference),T=new I(g.type,C);switch(g.type){case"polygon":!function n(f,g,P){const D=g.spatialReference,C=f.coordinateHelper,T=g.rings;for(let i=0;i<T.length;++i){const s=T[i],r=new S(D,P);r.index=i;const v=s.length>2&&(0,m.aI)(s[0],s[s.length-1]),y=v?s.length-1:s.length;for(let B=0;B<y;++B){const j=C.arrayToVector(s[B]),c=new M(r);r.vertices.push(c),c.pos=j,c.index=B}const U=r.vertices.length-1;for(let B=0;B<U;++B){const d=new L(r,r.vertices[B],r.vertices[B+1]);r.edges.push(d)}if(v){const B=new L(r,r.vertices[r.vertices.length-1],r.vertices[0]);r.edges.push(B)}f.components.push(r)}}(T,g,P);break;case"polyline":!function t(f,g,P){const D=g.spatialReference,C=f.coordinateHelper,T=g.paths;for(let i=0;i<T.length;++i){const s=T[i],r=new S(D,P);r.index=i;const v=s.length;for(let U=0;U<v;++U){const B=C.arrayToVector(s[U]),j=new M(r);r.vertices.push(j),j.pos=B,j.index=U}const y=r.vertices.length-1;for(let U=0;U<y;++U){const c=new L(r,r.vertices[U],r.vertices[U+1]);r.edges.push(c)}f.components.push(r)}}(T,g,P);break;case"point":e(T,g,P);break;case"mesh":e(T,g.origin,P),T._geometry=g,T._dirty=!1}return T}}function e(f,g,P){const C=f.coordinateHelper,T=new S(g.spatialReference,P);T.index=0;const i=new M(T);i.index=0,i.pos=C.pointToVector(g),T.vertices.push(i),f.components.push(T)}function A(f){return"mesh"===f.type}},63938:(K,R,o)=>{o.d(R,{p:()=>C});var m=o(42425),V=o(17715),l=o(25866),h=o(15268),_=o(46175),u=o(3969);class E{constructor(i,s,r){this._editGeometry=i,this._component=s,this._pos=r,this._addedVertex=null,this._originalEdge=null,this._left=null,this._right=null}apply(){let i="redo";null==this._addedVertex&&(i="apply",this._addedVertex=new _.Li(this._component));const s=this._component.getLastVertex();if(null==s)this._component.vertices.push(this._addedVertex),this._addedVertex.pos=this._pos,this._addedVertex.index=0;else{let r=null;s.rightEdge&&(this._originalEdge=s.rightEdge,r=this._originalEdge.rightVertex,this._component.edges.splice(this._component.edges.indexOf(this._originalEdge),1)),this._component.vertices.push(this._addedVertex),this._addedVertex.pos=this._pos,null==this._left&&(this._left=new _.oH(this._component,s,this._addedVertex)),this._component.edges.push(this._left),s.rightEdge=this._left,null!=this._originalEdge&&null!=r&&(null==this._right&&(this._right=new _.oH(this._component,this._addedVertex,r)),this._component.edges.push(this._right),r.leftEdge=this._right),this._component.updateVertexIndex(this._addedVertex,s.index+1)}this._editGeometry.notifyChanges({operation:i,addedVertices:[this._addedVertex]})}undo(){null!=this._addedVertex&&(this._component.vertices.splice(this._component.vertices.indexOf(this._addedVertex),1),null!=this._left&&(this._component.edges.splice(this._component.edges.indexOf(this._left),1),this._left.leftVertex.rightEdge=null),null!=this._right&&(this._component.edges.splice(this._component.edges.indexOf(this._right),1),this._right.rightVertex.leftEdge=null),null!=this._originalEdge&&(this._component.edges.push(this._originalEdge),this._originalEdge.leftVertex.rightEdge=this._originalEdge,this._originalEdge.rightVertex.leftEdge=this._originalEdge),null!=this._left?this._component.updateVertexIndex(this._left.leftVertex,this._left.leftVertex.index):this._component.updateVertexIndex(this._addedVertex,0),this._editGeometry.notifyChanges({operation:"undo",removedVertices:[this._addedVertex]}))}accumulate(){return!1}}var x=o(39116);class Z{constructor(i,s,r=0){this._editGeometry=i,this._vertices=s,this._minNumberOfVertices=r,this.removedVertices=null}apply(){let i="redo";if(null==this.removedVertices){const s=this.removedVertices=[];this._vertices.forEach(r=>{const v=this._removeVertex(r);null!=v&&s.push(v)}),i="apply"}else this.removedVertices.forEach(s=>{this._removeVertex(s.removedVertex)});this._editGeometry.notifyChanges({operation:i,removedVertices:this._vertices})}undo(){this.removedVertices?.forEach(i=>{this._undoRemoveVertex(i)}),this._editGeometry.notifyChanges({operation:"undo",addedVertices:this._vertices})}accumulate(){return!1}_removeVertex(i){const s=i.component;if(s.vertices.length<=this._minNumberOfVertices)return null;const r={removedVertex:i,createdEdge:null},v=i.leftEdge,y=i.rightEdge;return s.vertices.splice(s.vertices.indexOf(i),1),v&&(s.edges.splice(s.edges.indexOf(v),1),v.leftVertex.rightEdge=null),y&&(s.edges.splice(s.edges.indexOf(y),1),y.rightVertex.leftEdge=null),0===i.index&&y&&this._vertices.length>0&&s.swapVertices(s.vertices.indexOf(y.rightVertex),0),v&&y&&(r.createdEdge=new _.oH(s,v.leftVertex,y.rightVertex),s.edges.push(r.createdEdge)),y&&s.updateVertexIndex(y.rightVertex,y.rightVertex.index-1),r}_undoRemoveVertex(i){const s=i.removedVertex,r=i.removedVertex.component,v=s.leftEdge,y=s.rightEdge;i.createdEdge&&r.edges.splice(r.edges.indexOf(i.createdEdge),1),r.vertices.push(s),v&&(r.edges.push(v),v.leftVertex.rightEdge=v),y&&(r.edges.push(y),y.rightVertex.leftEdge=y),r.updateVertexIndex(s,s.index)}}class O{constructor(i,s,r){this._editGeometry=i,this._edge=s,this._t=r,this.createdVertex=null,this._left=null,this._right=null}apply(){let i="redo";const s=this._edge,r=s.component,v=s.leftVertex,y=s.rightVertex;r.edges.splice(r.edges.indexOf(s),1),null==this.createdVertex&&(i="apply",this.createdVertex=new _.Li(s.component)),r.vertices.push(this.createdVertex),this.createdVertex.pos=this._editGeometry.coordinateHelper.lerp(s.leftVertex.pos,s.rightVertex.pos,this._t,this._editGeometry.coordinateHelper.createVector()),null==this._left&&(this._left=new _.oH(r,v,this.createdVertex)),this._left.leftVertex.leftEdge?r.edges.push(this._left):r.edges.unshift(this._left),v.rightEdge=this._left,null==this._right&&(this._right=new _.oH(r,this.createdVertex,y)),r.edges.push(this._right),y.leftEdge=this._right,r.updateVertexIndex(this.createdVertex,v.index+1),this._editGeometry.notifyChanges({operation:i,addedVertices:[this.createdVertex]})}undo(){if(null==this.createdVertex||null==this._left||null==this._right)return null;const i=this._edge,s=i.component,r=this.createdVertex.leftEdge,v=this.createdVertex.rightEdge,y=r?.leftVertex,U=v?.rightVertex;s.vertices.splice(s.vertices.indexOf(this.createdVertex),1),s.edges.splice(s.edges.indexOf(this._left),1),s.edges.splice(s.edges.indexOf(this._right),1),this._edge.leftVertex.leftEdge?s.edges.push(this._edge):s.edges.unshift(this._edge),y&&(y.rightEdge=i),U&&(U.leftEdge=i),y&&s.updateVertexIndex(y,y.index),this._editGeometry.notifyChanges({operation:"undo",removedVertices:[this.createdVertex]})}accumulate(){return!1}}class M{constructor(i,s,r){this._editGeometry=i,this._vertex=s,this._pos=r}apply(){const i=null==this._originalPosition;i&&(this._originalPosition=this._vertex.pos),this._apply(i?"apply":"redo")}undo(){this._vertex.pos=this._originalPosition,this._editGeometry.notifyChanges({operation:"undo",updatedVertices:[this._vertex]})}accumulate(i){return i instanceof M&&i._vertex===this._vertex&&(this._pos=i._pos,this._apply("apply"),!0)}_apply(i){this._vertex.pos=this._pos,this._editGeometry.components.forEach(s=>s.unnormalizeVertexPositions()),this._editGeometry.notifyChanges({operation:i,updatedVertices:[this._vertex]})}}var L=o(89952);class S{constructor(i,s){this._editGeometry=i,this._component=s,this._createdEdge=null}apply(){let i="redo";if(null==this._createdEdge){i="apply";const s=this._component.getFirstVertex(),r=this._component.getLastVertex();if(this._component.isClosed()||this._component.vertices.length<3||null==s||null==r)return;this._createdEdge=new _.oH(this._component,r,s)}this._createdEdge.leftVertex.rightEdge=this._createdEdge,this._createdEdge.rightVertex.leftEdge=this._createdEdge,this._component.edges.push(this._createdEdge),this._editGeometry.notifyChanges({operation:i})}undo(){null!=this._createdEdge&&((0,L.TF)(this._component.edges,this._createdEdge),this._createdEdge.leftVertex.rightEdge=null,this._createdEdge.rightVertex.leftEdge=null,this._editGeometry.notifyChanges({operation:"undo"}))}accumulate(){return!1}}class I{constructor(i,s,r,v){this._editGeometry=i,this.dx=s,this.dy=r,this.dz=v,this._firstTime=!0}apply(){const i=this._firstTime?"apply":"redo";this._firstTime=!1,this._apply(i,this.dx,this.dy,this.dz)}undo(){this._apply("undo",-this.dx,-this.dy,-this.dz)}accumulate(i){return i instanceof I&&i._editGeometry.geometry===this._editGeometry.geometry&&(this._apply("apply",i.dx,i.dy,i.dz),this.dx+=i.dx,this.dy+=i.dy,this.dz+=i.dz,!0)}_apply(i,s,r,v){const y=this._editGeometry.geometry;y.offset(s,r,v);const U=this._editGeometry.components[0].getFirstVertex();U&&(U.pos=this._editGeometry.coordinateHelper.pointToVector(y.origin),this._editGeometry.notifyChanges({operation:i,updatedVertices:[U]}))}}var g,n=o(97465),t=o(43354),e=o(58059),A=o(21724);class f{constructor(i,s){this._editGeometry=i,this._newPositions=s}apply(){const i=null==this._originalPositions?"apply":"redo";if(!this._originalPositions){const s=this._editGeometry.coordinateHelper;this._originalPositions=this._editGeometry.allVertices.map(r=>s.clone(r.pos))}this._apply(i,this._newPositions)}undo(){this._originalPositions&&this._apply("undo",this._originalPositions)}accumulate(i){return i instanceof f&&(this._newPositions=i._newPositions,this._apply("apply",this._newPositions),!0)}_apply(i,s){const r=this._editGeometry.coordinateHelper,v=this._editGeometry.allVertices;for(let y=0;y<v.length;y++)r.copy(s[y],v[y].pos);this._editGeometry.components.forEach(y=>y.unnormalizeVertexPositions()),this._editGeometry.notifyChanges({operation:i,updatedVertices:v})}}const P=Symbol();class D{constructor(i){this._operations=[],this._closed=!1,this[g]=!0,i&&(this._operations=i,this._closed=!0)}close(){this._closed=!0}apply(){for(const i of this._operations)i.apply()}undo(){for(let i=this._operations.length-1;i>=0;i--)this._operations[i].undo()}accumulate(i){if(this._closed)return!1;const s=this._operations.length?this._operations[this._operations.length-1]:null;return s&&s.accumulate(i)||(this._operations.push(i),i.apply()),!0}}g=P;class C extends m.A{constructor(i,s){super(),this.data=i,this.viewingMode=s,this._undoStack=[],this._redoStack=[],this._listener=this.data.on("change",r=>{r.addedVertices&&this.emit("vertex-add",{type:"vertex-add",vertices:r.addedVertices,operation:r.operation}),r.removedVertices&&this.emit("vertex-remove",{type:"vertex-remove",vertices:r.removedVertices,operation:r.operation}),r.updatedVertices&&this.emit("vertex-update",{type:"vertex-update",vertices:r.updatedVertices,operation:r.operation})})}destroy(){this._listener.remove()}splitEdge(i,s){return this._apply(new O(this.data,i,s))}updateVertices(i,s,r=u.Y.ACCUMULATE_STEPS){return this._apply(new x.D(this.data,i,s),r)}move(i,s,r,v=u.Y.ACCUMULATE_STEPS){return(0,_.oF)(this.data)?this._apply(new I(this.data,i,s,r),v):this.moveVertices(this.data.allVertices,i,s,r,v)}moveVertices(i,s,r,v,y=u.Y.ACCUMULATE_STEPS){return(0,_.oF)(this.data)?this._apply(new I(this.data,s,r,v),y):this.updateVertices(i,new n.a(this.data.coordinateHelper,s,r,v),y)}scale(i,s,r,v,y=u.Y.ACCUMULATE_STEPS,U=x.K.CUMULATIVE){return this.scaleVertices(this.data.allVertices,i,s,r,v,y,U)}scaleVertices(i,s,r,v,y,U=u.Y.ACCUMULATE_STEPS,B=x.K.CUMULATIVE){return this.updateVertices(i,new A.j(s,r,v,y,B),U)}rotate(i,s,r=u.Y.ACCUMULATE_STEPS,v=x.K.CUMULATIVE){return this.rotateVertices(this.data.allVertices,i,s,r,v)}rotateVertices(i,s,r,v=u.Y.ACCUMULATE_STEPS,y=x.K.CUMULATIVE){return this.updateVertices(i,new e.m(s,r,y),v)}removeVertices(i){return this._apply(new Z(this.data,i,this._minNumVerticesPerType))}appendVertex(i){return 0===this.data.components.length?null:this._apply(new E(this.data,this.data.components[0],i))}setVertexPosition(i,s){return this._apply(new M(this.data,i,s))}offsetEdge(i,s,r,v=u.Y.ACCUMULATE_STEPS){return this.updateVertices([s.leftVertex,s.rightVertex],new t.L(this.data.coordinateHelper,i,s,r),v)}trySetGeometry(i,s=u.Y.ACCUMULATE_STEPS){const{data:r}=this,{coordinateHelper:v}=r;if(r.type!==i.type||!r.spatialReference.equals(i.spatialReference)||v.hasZ()!==i.hasZ||v.hasM()!==i.hasM||!(0,h.It)(r.geometry,i)||(0,_.oF)(r))return;const y=Array.from(_.ZE.fromGeometry(i,this.viewingMode).iterateVertices(),U=>U.pos);return this.setVertexPositions(y,s)}setVertexPositions(i,s=u.Y.ACCUMULATE_STEPS){return this._apply(new f(this.data,i),s)}createResetState(){if((0,_.oF)(this.data))return this._createResetStateMesh();const i=this.data.geometry.clone();return(0,V.hA)(()=>this.trySetGeometry(i))}closeComponent(i){return this.data.components.includes(i)?this._apply(new S(this.data,i)):null}canRemoveVertex(i){return i.vertices.length>this._minNumVerticesPerType}createUndoGroup(){const i=new D;return this._apply(i),(0,V.hA)(()=>i.close())}undo(){if(this._undoStack.length>0){const i=this._undoStack.pop();return i.undo(),this._redoStack.push(i),i}return null}redo(){if(this._redoStack.length>0){const i=this._redoStack.pop();return i.apply(),this._undoStack.push(i),i}return null}get canUndo(){return this._undoStack.length>0}get canRedo(){return this._redoStack.length>0}get lastOperation(){return this._undoStack.length>0?this._undoStack[this._undoStack.length-1]:null}get _minNumVerticesPerType(){switch(this.data.type){case"point":return 1;case"polyline":return 2;case"polygon":return 3;default:return 0}}_apply(i,s=u.Y.ACCUMULATE_STEPS){return s!==u.Y.NEW_STEP&&null!=this.lastOperation&&this.lastOperation.accumulate(i)||(i.apply(),this._undoStack.push(i),this._redoStack=[]),i}_createResetStateMesh(){if(!(0,_.oF)(this.data))return(0,V.hA)();const i=this.data.geometry,{vertexSpace:s}=i;if(s.origin){const v=(0,l.o8)(s.origin);return(0,V.hA)(()=>{i.vertexSpace.origin=v})}const r=i.vertexAttributes.clonePositional();return(0,V.hA)(()=>{i.vertexAttributes=r,i.vertexAttributesChanged()})}static fromGeometry(i,s){return new C(_.ZE.fromGeometry(i,s),s)}}},3969:(K,R,o)=>{var m,V;o.d(R,{Y:()=>m}),(V=m||(m={}))[V.NEW_STEP=0]="NEW_STEP",V[V.ACCUMULATE_STEPS=1]="ACCUMULATE_STEPS"},97465:(K,R,o)=>{o.d(R,{a:()=>m});class m{constructor(l,h,_,u){this._helper=l,this.dx=h,this.dy=_,this.dz=u}_move(l,h,_,u){this._helper.addDelta(l.pos,h,_,u)}apply(l){this._move(l,this.dx,this.dy,this.dz)}undo(l){this._move(l,-this.dx,-this.dy,-this.dz)}canAccumulate(l){return l instanceof m}accumulate(l,h){this._move(l,h.dx,h.dy,h.dz)}accumulateParams(l){this.dx+=l.dx,this.dy+=l.dy,this.dz+=l.dz}}},43354:(K,R,o)=>{o.d(R,{B:()=>L,L:()=>Z});var m=o(69287),V=o(83953),l=o(45475),h=o(28714),_=o(25866),u=o(93617),E=o(99608),x=o(24872);class Z{get plane(){return this._plane}get requiresSplitEdgeLeft(){return!this._left.isOriginalDirection}get requiresSplitEdgeRight(){return!this._right.isOriginalDirection}get edgeDirection(){return this._edgeDirection}constructor(n,t,e,A=0,f=S.IMMEDIATE){this._helper=n,this._planeType=t,this._edge=e,this.distance=A,this._plane=(0,u.vt)(),this._offsetPlane=(0,u.vt)(),this._minDistance=-1/0,this._maxDistance=1/0,this._selectedArrow=1,f===S.IMMEDIATE&&this._initialize()}_initialize(){this._initializeNeighbors(),this._initializePlane(),this._initializeDistanceConstraints()}_initializeNeighbors(){const n=this._toXYZ(this._edge.leftVertex.pos),t=this._toXYZ(this._edge.leftVertex.leftEdge?.leftVertex?.pos),e=this._toXYZ(this._edge.rightVertex.pos),A=this._toXYZ(this._edge.rightVertex.rightEdge?.rightVertex?.pos);this._edgeDirection=(0,h.o)((0,_.vt)(),n,e),t?(this._left=this._computeNeighbor(n,t,this._edgeDirection),this._right=this._computeNeighbor(e,A,this._edgeDirection,this._left)):(this._right=this._computeNeighbor(e,A,this._edgeDirection),this._left=this._computeNeighbor(n,t,this._edgeDirection,this._right))}_toXYZ(n){return null!=n?this._helper.toXYZ(n):null}_pointToXYZ(n){return this._toXYZ(this._helper.pointToVector(n))}_computeNeighbor(n,t,e,A){const f=(0,_.vt)();if(t){(0,h.o)(f,n,t);const g=!this._passesBisectingAngleThreshold(f,e);return{start:n,end:t,direction:g?this._bisectVectorsPerpendicular(e,f):f,isOriginalDirection:!g}}return this._helper.hasZ()?A&&((0,h.e)(f,e,A.direction),(0,h.e)(f,f,e),(0,h.n)(f,f),Math.sign(f[1])!==Math.sign(e[0])&&(0,h.h)(f,f,-1)):(0,h.i)(f,-e[1],e[0],0),{start:n,end:t,direction:f,isOriginalDirection:!0}}_passesBisectingAngleThreshold(n,t){const e=Math.abs((0,E.g7)(t,n));return e>=O&&e<=Math.PI-O}_bisectVectorsPerpendicular(n,t){const e=(0,h.f)(n,t)<0?n:(0,h.v)((0,_.vt)(),n),A=Math.abs((0,h.f)(e,t));if(!(A<M||A>1-M))return this._bisectDirection(e,t);const f=(0,h.e)((0,_.vt)(),e,[0,0,1]);return(0,h.n)(f,f)}_bisectDirection(n,t){const e=(0,h.g)((0,_.vt)(),n,t);return(0,h.n)(e,e)}_initializePlane(){const n=this._computeNormalDirection(this._left),t=this._computeNormalDirection(this._right);(0,h.f)(n,t)<0&&(0,h.v)(t,t),(0,u.O_)(this._left.start,this._bisectDirection(n,t),this._plane)}_computeNormalDirection(n){const t=(0,h.e)((0,_.vt)(),n.direction,this._edgeDirection);(0,h.n)(t,t);const e=(0,h.e)((0,_.vt)(),this._edgeDirection,t);return this._planeType===L.XY&&(e[2]=0),(0,h.n)(e,e)}_initializeDistanceConstraints(){null==this._left.end||this.requiresSplitEdgeLeft||this._updateDistanceConstraint((0,u.mN)(this._plane,this._left.end)),null==this._right.end||this.requiresSplitEdgeRight||this._updateDistanceConstraint((0,u.mN)(this._plane,this._right.end)),this._updateIntersectDistanceConstraint(this._plane)}_updateDistanceConstraint(n){n<=0&&(this._minDistance=Math.max(this._minDistance,n)),n>=0&&(this._maxDistance=Math.min(this._maxDistance,n))}_updateIntersectDistanceConstraint(n){const t=(0,u.Qj)(n),e=this._edgeDirection,A=(0,h.g)((0,_.vt)(),this._left.start,this._left.direction),f=(0,h.g)((0,_.vt)(),this._right.start,this._right.direction),g=this._pointInBasis2D((0,l.vt)(),t,e,this._left.start),P=this._pointInBasis2D((0,l.vt)(),t,e,A),D=this._pointInBasis2D((0,l.vt)(),t,e,this._right.start),C=this._pointInBasis2D((0,l.vt)(),t,e,f),[T]=(0,x.jI)({start:P,end:g,type:x.Vv.LINE},{start:C,end:D,type:x.Vv.LINE});if(!T)return;const i=(0,V.Re)((0,l.vt)(),g,P);(0,V.S8)(i,i);const s=(0,V.Re)((0,l.vt)(),T,P),r=(0,V.Om)(i,s),v=(0,h.g)((0,_.vt)(),A,(0,h.h)((0,_.vt)(),this._left.direction,-r)),y=(0,u.mN)(n,v);this._updateDistanceConstraint(y)}_pointInBasis2D(n,t,e,A){return n[0]=(0,E.gr)(t,A),n[1]=(0,E.gr)(e,A),n}_offset(n,t){Number.isFinite(this._minDistance)&&(t=Math.max(this._minDistance,t)),Number.isFinite(this._maxDistance)&&(t=Math.min(this._maxDistance,t)),(0,u.C)(this._offsetPlane,this._plane),this._offsetPlane[3]-=t;const e=(f,g,P)=>null!=g&&(0,u.U5)(this._offsetPlane,f,(0,h.g)((0,_.vt)(),f,g),P),A=(0,_.vt)();(n===this._edge.leftVertex?e(this._left.start,this._left.direction,A):e(this._right.start,this._right.direction,A))&&this._helper.copy(this._helper.fromXYZ(A,void 0,this._helper.getM(n.pos)),n.pos)}selectArrowFromStartPoint(n){this._selectedArrow=(0,u.Tj)(this.plane,this._pointToXYZ(n))?1:-1}get selectedArrow(){return this._selectedArrow}signedDistanceToPoint(n){return(0,u.mN)(this.plane,this._pointToXYZ(n))}clampedStartAndEnd(n){const t=this._helper.toXYZ(this._helper.pointToVector(n)),e=(0,u._I)(this._plane,t,(0,_.vt)()),A=(0,u.mN)(this._plane,t),f=(0,m.qE)(A,this._minDistance,this._maxDistance);return(0,h.m)(t,e,t,f/A),{start:e,end:t}}apply(n){this._offset(n,this.distance)}undo(n){this._offset(n,0)}canAccumulate(n){return n instanceof Z&&this._edge.leftVertex.index===n._edge.leftVertex.index&&this._edge.rightVertex.index===n._edge.rightVertex.index&&this._edge.component===n._edge.component&&this._maybeEqualsVec3(this._left.direction,n._left.direction)&&this._maybeEqualsVec3(this._right.direction,n._right.direction)&&(0,h.I)((0,u.Qj)(this._plane),(0,u.Qj)(n._plane))}accumulate(n,t){this._offset(n,this._plane[3]-t._plane[3]+t.distance)}accumulateParams(n){this.distance=n.distance-n._plane[3]+this._plane[3]}clone(){const n=new Z(this._helper,this._planeType,this._edge,this.distance,S.DEFERRED);return(0,u.C)(n._plane,this._plane),(0,u.C)(n._offsetPlane,this._offsetPlane),n._maxDistance=this._maxDistance,n._minDistance=this._minDistance,n._left=this._cloneNeighbor(this._left),n._right=this._cloneNeighbor(this._right),n._edgeDirection=(0,h.c)((0,_.vt)(),this._edgeDirection),n}_maybeEqualsVec3(n,t){return null==n&&null==t||null!=n&&null!=t&&(0,h.I)(n,t)}_cloneNeighbor({start:n,end:t,direction:e,isOriginalDirection:A}){return{start:(0,h.c)((0,_.vt)(),n),end:null!=t?(0,h.c)((0,_.vt)(),t):null,direction:(0,h.c)((0,_.vt)(),e),isOriginalDirection:A}}}const O=(0,m.kU)(15),M=.001;var L,S,I;(I=L||(L={}))[I.XYZ=0]="XYZ",I[I.XY=1]="XY",function(I){I[I.IMMEDIATE=0]="IMMEDIATE",I[I.DEFERRED=1]="DEFERRED"}(S||(S={}))},58059:(K,R,o)=>{o.d(R,{m:()=>h});var m=o(89952),V=o(83953),l=o(39116);class h{constructor(u,E,x=l.K.CUMULATIVE){this.origin=u,this.angle=E,this._accumulationType=x}_rotate(u,E){(0,V.e$)(u.pos,u.pos,this.origin,E)}apply(u){this._rotate(u,this.angle)}undo(u){this._rotate(u,-this.angle)}canAccumulate(u){return u instanceof h&&(0,m.aI)(this.origin,u.origin)}accumulate(u,E){this._rotate(u,E._accumulationType===l.K.REPLACE?E.angle-this.angle:E.angle)}accumulateParams(u){this.angle=u._accumulationType===l.K.REPLACE?u.angle:this.angle+u.angle}}},21724:(K,R,o)=>{o.d(R,{j:()=>_});var m=o(89952),V=o(45475),l=o(83953),h=o(39116);class _{constructor(E,x,Z,O,M=h.K.CUMULATIVE){this.origin=E,this.axis1=x,this.factor1=Z,this.factor2=O,this._accumulationType=M,this.axis2=(0,V.fA)(x[1],-x[0])}_scale(E,x,Z){(0,l.Vj)(E.pos,E.pos,this.origin,this.axis1,x),(0,l.Vj)(E.pos,E.pos,this.origin,this.axis2,Z)}apply(E){this._scale(E,this.factor1,this.factor2)}undo(E){this._scale(E,1/this.factor1,1/this.factor2)}canAccumulate(E){return E instanceof _&&(0,m.aI)(this.origin,E.origin)&&(0,m.aI)(this.axis1,E.axis1)}accumulate(E,x){x._accumulationType===h.K.REPLACE?this._scale(E,x.factor1/this.factor1,x.factor2/this.factor2):this._scale(E,x.factor1,x.factor2)}accumulateParams(E){const x=E._accumulationType===h.K.REPLACE;this.factor1=x?E.factor1:this.factor1*E.factor1,this.factor2=x?E.factor2:this.factor2*E.factor2}}},39116:(K,R,o)=>{o.d(R,{D:()=>m,K:()=>V});class m{constructor(h,_,u){this._editGeometry=h,this._vertices=_,this.operation=u,this._undone=!1}_notifyChanges(h){this._editGeometry.components.forEach(_=>_.unnormalizeVertexPositions()),this._editGeometry.notifyChanges({operation:h,updatedVertices:this._vertices})}apply(){this._vertices.forEach(h=>this.operation.apply(h)),this._notifyChanges(this._undone?"redo":"apply")}undo(){this._vertices.forEach(h=>this.operation.undo(h)),this._undone=!0,this._notifyChanges("undo")}canAccumulate(h){if(this._undone||h._vertices.length!==this._vertices.length)return!1;for(let _=0;_<h._vertices.length;++_)if(h._vertices[_]!==this._vertices[_])return!1;return this.operation.canAccumulate(h.operation)}accumulate(h){return!!(h instanceof m&&this.canAccumulate(h))&&(this._vertices.forEach(_=>this.operation.accumulate(_,h.operation)),this.operation.accumulateParams(h.operation),this._notifyChanges("apply"),!0)}}var V,l;(l=V||(V={}))[l.CUMULATIVE=0]="CUMULATIVE",l[l.REPLACE=1]="REPLACE"},86478:(K,R,o)=>{o.d(R,{e:()=>m});class m{constructor(l){this.vertexHandle=null,this.excludeFeature=null,this.visualizer=null,this.selfSnappingZ=null,this.drawConstraints=null,this.editGeometryOperations=l.editGeometryOperations,this.elevationInfo=l.elevationInfo,this.pointer=l.pointer,this.vertexHandle=l.vertexHandle,this.excludeFeature=l.excludeFeature,this.feature=l.feature,this.visualizer=l.visualizer,this.selfSnappingZ=l.selfSnappingZ,this.drawConstraints=l.drawConstraints}get coordinateHelper(){return this.editGeometryOperations.data.coordinateHelper}get spatialReference(){return this.coordinateHelper.spatialReference}}},94041:(K,R,o)=>{o.d(R,{b:()=>E});var m=o(17715),V=o(53726),l=o(49973),h=o(5579),_=o(93151),u=o(31158);class E{draw(O,M){const L=function x(Z){const O=[];for(const M of Z){let L=!0;for(const S of O)if(M.equals(S)){L=!1;break}L&&O.push(M)}return O}(O),S=this.sortUniqueHints(L),I=[];for(const n of S)n instanceof V.v&&I.push(this.visualizeIntersectionPoint(n,M)),n instanceof l.c&&I.push(this.visualizeLine(n,M)),n instanceof h.r&&I.push(this.visualizeParallelSign(n,M)),n instanceof u.l&&I.push(this.visualizeRightAngleQuad(n,M)),n instanceof _._&&I.push(this.visualizePoint(n,M));return(0,m.vE)(I)}sortUniqueHints(O){return O}}},93151:(K,R,o)=>{o.d(R,{_:()=>l});var m=o(28714),V=o(77171);class l extends V.m{constructor(_,u,E){super(u,E),this.point=_}equals(_){return _ instanceof l&&(0,m.p)(this.point,_.point)}}},33983:(K,R,o)=>{o.d(R,{Am:()=>r,Gk:()=>A,Ku:()=>P,S3:()=>C,fL:()=>y,em:()=>v,LJ:()=>T,Y3:()=>D,dy:()=>s,qP:()=>i,fr:()=>g,Hw:()=>U,uf:()=>B});var m=o(81142),V=o(8851),l=o(8189),h=o(98877),_=o(43085),u=o(85211),O=(o(3248),o(35150),o(40707),o(76576));let M=class extends h.A{constructor(c){super(c),this.actual=null,this.lockable=!0,this.id=(0,_.lk)(),this.inputValue=null,this.readOnly=!1,this.suffix=null,this.visible=!0,this.invalid=!1,this.unlockOnVertexPlacement=!0}get committed(){return this.lockable?this._get("committed"):null}set committed(c){this.lockable&&this._set("committed",c)}get dirty(){return null!=this.inputValue}get locked(){return this.lockable&&null!=this.committed}onInput(c){this.inputValue=c,this.invalid=!1}onCommit(c,d,a){this.lockable?this._onCommitLockable(c,a):this._onCommitNonLockable(a),this.invalid&&"commit-and-exit"===c||a.onCommit(d,c)}_onCommitLockable(c,d){const{inputValue:a,locked:p}=this;p&&L(a)?this.unlock():("commit-and-exit"===c&&!p||null!=a)&&this._parseInputAndLock(d)}_onCommitNonLockable(c){const{inputValue:d}=this;L(d)?this.lockable?this.setActual(null):this.clearInputValue():null!=d&&this._parseInputAndSetActual(c)}applyValue(c){this.lockable?this.lock(c):this.setActual(c)}clearInputValue(){this.inputValue=null,this.invalid=!1}setActual(c){this.actual=c,this.clearInputValue()}lock(c){this.lockable&&(this.committed=c??this.actual,this.clearInputValue())}unlock(){this.lockable&&(this.committed=null,this.clearInputValue())}toggleLock(c){this.lockable&&(this.locked?this.unlock():this._parseInputAndLock(c))}getSuffix(c){const{suffix:d}=this;return"function"==typeof d?d(c):d}getFormattedValue(c){const{actual:d,committed:a,format:p}=this;return null!=a?p(a,c):null!=d?p(d,c):null}getRawDisplayValue(c){const{actual:d,committed:a,inputValue:p}=this;return p??(this.lockable&&null!=a?this.formatForInputMode(a,c):null!=d?this.formatForInputMode(d,c):null)}_parseInputAndSetActual(c){const{inputValue:d}=this;if(null==d||L(d))return this.setActual(null);const a=this.parse(d,c);null!=a?this.setActual(a):this.invalid=!0}_parseInputAndLock(c){const{inputValue:d,actual:a}=this;if(L(d))return this.unlock();if(null==d)return this.lock(a);const p=this.parse(d,c);null!=p?this.lock(p):this.invalid=!0}};function L(c){return null!=c&&""===c.trim()}(0,l._)([(0,u.MZ)()],M.prototype,"actual",void 0),(0,l._)([(0,u.MZ)()],M.prototype,"committed",null),(0,l._)([(0,u.MZ)()],M.prototype,"dirty",null),(0,l._)([(0,u.MZ)()],M.prototype,"format",void 0),(0,l._)([(0,u.MZ)()],M.prototype,"formatForInputMode",void 0),(0,l._)([(0,u.MZ)()],M.prototype,"lockable",void 0),(0,l._)([(0,u.MZ)()],M.prototype,"locked",null),(0,l._)([(0,u.MZ)()],M.prototype,"id",void 0),(0,l._)([(0,u.MZ)()],M.prototype,"inputValue",void 0),(0,l._)([(0,u.MZ)()],M.prototype,"name",void 0),(0,l._)([(0,u.MZ)()],M.prototype,"parse",void 0),(0,l._)([(0,u.MZ)()],M.prototype,"readOnly",void 0),(0,l._)([(0,u.MZ)()],M.prototype,"suffix",void 0),(0,l._)([(0,u.MZ)()],M.prototype,"title",void 0),(0,l._)([(0,u.MZ)()],M.prototype,"visible",void 0),(0,l._)([(0,u.MZ)()],M.prototype,"invalid",void 0),(0,l._)([(0,u.MZ)()],M.prototype,"unlockOnVertexPlacement",void 0),M=(0,l._)([(0,O.$)("esri.views.interactive.tooltip.fields.TooltipField")],M);let S=class extends M{constructor(c){super(c),this.showAsZ=!1}normalizeCtorArgs(c){const d=a=>a.inputUnitInfos.verticalLength.unit;return{name:"elevation",actual:m.r7,parse:(0,V.hw)({createQuantity:(a,p)=>(0,m.d_)(a,d(p))}),format:(a,p)=>p.formatters.verticalLength(a),formatForInputMode:(a,p)=>p.formatters.scalar((0,m.kM)(a,d(p))),suffix:a=>a.inputUnitInfos.verticalLength.abbreviation,title:a=>a.messages.sketch[this.showAsZ?"z":"elevation"],unlockOnVertexPlacement:!1,...c}}};(0,l._)([(0,u.MZ)()],S.prototype,"showAsZ",void 0),S=(0,l._)([(0,O.$)("esri.views.interactive.tooltip.fields.TooltipFieldElevation")],S);var I=o(54795),n=o(12724);let t=class extends M{constructor(c){super(c),this.precision=1}normalizeCtorArgs(c){return{name:"orientation",actual:null,parse:(0,V.hw)({createQuantity:(a,p)=>(0,m.Wq)(a,(a=>a.inputUnitInfos.angle.unit)(p),"geographic"),sanitize:V.D5}),format:a=>{const p=(0,n.P1)(a);return(0,I.Nk)(p,"geographic",this.precision)},formatForInputMode:(a,p)=>{const z=(0,n.P1)(a);return p.formatters.scalar(z)},suffix:a=>a.inputUnitInfos.angle.abbreviation,title:a=>a.messages.sketch.orientation,...c}}};(0,l._)([(0,u.MZ)()],t.prototype,"precision",void 0),t=(0,l._)([(0,O.$)("esri.views.interactive.tooltip.fields.TooltipFieldOrientation")],t);let e=class extends M{constructor(c){super(c),this.precision=null}normalizeCtorArgs(c){const d=a=>a.inputUnitInfos.length.unit;return{name:"size",actual:null,parse:(0,V.hw)({createQuantity:(a,p)=>(0,m.d_)(a,d(p))}),format:(a,p)=>p.formatters.length(a),formatForInputMode:(a,p)=>p.formatters.scalar((0,m.kM)(a,d(p))),suffix:a=>a.inputUnitInfos.length.abbreviation,title:a=>a.messages.sketch.size,...c}}};function A(c){const d=p=>p.inputUnitInfos.angle.unit,a=p=>p.sketchOptions.values.effectiveDirectionMode;return new M({name:"direction",actual:m.IV,parse:(0,V.hw)({createQuantity:(p,z)=>(0,m.Wq)(p,d(z),"geographic"),sanitize:V.D5}),format:(p,z)=>{const F=a(z),G=(0,n.jQ)(p,F);switch(F){case n.rZ.Absolute:return z.formatters.direction(G);case n.rZ.Relative:return z.formatters.directionRelative(G);case n.rZ.RelativeBilateral:return z.formatters.directionRelativeBilateral(G)}},formatForInputMode:(p,z)=>{const F=(0,n.jQ)(p,a(z));return z.formatters.scalar((0,m.kM)(F,d(z)))},suffix:p=>p.inputUnitInfos.angle.abbreviation,title:p=>{const z=a(p),{absolute:F,relative:G}=p.messages.sketch.direction;switch(z){case n.rZ.Absolute:return F;case n.rZ.Relative:case n.rZ.RelativeBilateral:return G}},...c})}function f(c){const d=a=>a.inputUnitInfos.length.unit;return new M({name:"distance",actual:m.r7,parse:(0,V.hw)({createQuantity:(a,p)=>(0,m.d_)(Math.max(a,0),d(p))}),format:(a,p)=>p.formatters.length(a),formatForInputMode:(a,p)=>p.formatters.scalar((0,m.kM)(a,d(p))),suffix:a=>a.inputUnitInfos.length.abbreviation,title:a=>a.messages.sketch.distance,...c})}function g(c){return f({format:(d,a)=>a.formatters.totalLength(d),title:d=>d.messages.sketch.totalLength,readOnly:!0,...c})}function P(c){return f({...c})}function D(c){return f({...c,parse:(0,V.hw)({createQuantity:(a,p)=>(0,m.d_)(a,(a=>a.inputUnitInfos.length.unit)(p))}),format:(a,p)=>p.formatters.lengthRelative(a)})}function C(c){return new S(c)}function T(c){return new t(c)}function i(c){return new e(c)}function s(c){return j("scale",{name:"scale",actual:null,parse:(0,V.hw)({createQuantity:d=>(0,m.LF)(Math.abs(d))}),...c})}function r(c){const d=a=>a.inputUnitInfos.area.unit;return new M({name:"area",actual:m.iT,parse:(0,V.hw)({createQuantity:(a,p)=>(0,m.gT)(a,d(p))}),format:(a,p)=>p.formatters.area(a),formatForInputMode:(a,p)=>p.formatters.scalar((0,m.kM)(a,d(p))),suffix:a=>a.inputUnitInfos.area.abbreviation,title:a=>a.messages.sketch.area,readOnly:!0,...c})}function v(c){return new M({name:"x",actual:m.IV,parse:V.L5,format:(d,a)=>a.formatters.longitudeDecimalDegrees(d),formatForInputMode:d=>(0,V.zX)(d),suffix:d=>d.inputUnitInfos.angle.abbreviation,title:d=>d.messages.sketch.longitude,...c})}function y(c){return new M({name:"y",actual:m.IV,parse:V.A3,format:(d,a)=>a.formatters.latitudeDecimalDegrees(d),formatForInputMode:d=>(0,V.oZ)(d),suffix:d=>d.inputUnitInfos.angle.abbreviation,title:d=>d.messages.sketch.latitude,...c})}function U(c){return j("x",{name:"x",...c})}function B(c){return j("y",{name:"y",...c})}function j(c,d){return new M({actual:(0,m.LF)(0),parse:(0,V.hw)({createQuantity:a=>(0,m.LF)(a)}),format:(a,p)=>p.formatters.scalar(a),formatForInputMode:(a,p)=>p.formatters.scalar(a),title:a=>a.messages.sketch[c],...d})}(0,l._)([(0,u.MZ)()],e.prototype,"precision",void 0),e=(0,l._)([(0,O.$)("esri.views.interactive.tooltip.fields.TooltipFieldSize")],e)},26530:(K,R,o)=>{o.d(R,{B:()=>L});var m=o(8189),V=o(81142),l=o(85211),E=(o(3248),o(35150),o(40707),o(76576)),x=o(15364),Z=o(33983),O=o(8851),M=o(38289);const L=I=>{let n=class extends I{constructor(){super(...arguments),this.longitude=(0,Z.em)(),this.latitude=(0,Z.fL)(),this.x=(0,Z.Hw)(),this.y=(0,Z.uf)(),this.elevation=(0,Z.S3)(),this.geographic=!1}get effectiveX(){return this.geographic?this.longitude:this.x}get effectiveY(){return this.geographic?this.latitude:this.y}get key(){return{longitude:this.longitude.actual,latitude:this.latitude.actual,x:this.x.actual,y:this.y.actual,elevation:this.elevation.actual,geographic:this.geographic}}setLocationFromPoint(t,e=t?.spatialReference){if(this.geographic=!!e&&(0,M.yF)(e),null==t)return this._setActualLonLat(null,null),void this._setActualXY(null,null);if(this.geographic){const A=(0,x.QP)(t,S);this._setActualLonLat((0,O.m6)(A?.[0]),(0,O.m6)(A?.[1]))}else this._setActualXY((0,V.LF)(t.x),(0,V.LF)(t.y))}_setActualLonLat(t,e){this.longitude.actual=t,this.latitude.actual=e}_setActualXY(t,e){this.x.actual=t,this.y.actual=e}};return(0,m._)([(0,l.MZ)()],n.prototype,"geographic",void 0),(0,m._)([(0,l.MZ)()],n.prototype,"effectiveX",null),(0,m._)([(0,l.MZ)()],n.prototype,"effectiveY",null),(0,m._)([(0,l.MZ)()],n.prototype,"key",null),n=(0,m._)([(0,E.$)("esri.views.interactive.tooltip.infos.TooltipInfoWithCoordinates")],n),n},S=[0,0]},84177:(K,R,o)=>{o.d(R,{n:()=>i});var m=o(81142),V=o(82663),l=o(92405),h=o(28714),_=o(25866),u=o(44929),E=o(93617),x=o(53511),Z=o(54746);function L(s,r,v=s.hasZ){const y=(0,Z.l)(s.spatialReference),U=(0,V.B5)(y);if(null==U)return null;const B=(c,d)=>!(d.length<2||((0,h.i)(c,d[0],d[1],v&&d[2]||0),0));let j=0;for(const c of s.rings){const d=c.length;if(d<3)continue;const{positionsWorldCoords:a}=r;for(;a.length<d;)a.push((0,_.vt)());const p=S,z=(0,h.i)(I,0,0,0),F=1/d;for(let w=0;w<d;w++){if(!B(p,c[w])||!(0,u.F)(p,s.spatialReference,a[w],y))return null;(0,h.b)(z,z,a[w],F)}const G=(0,E.Cr)(a[0],a[1],z,(0,E.LV)());if(0===(0,h.k)((0,E.Qj)(G)))continue;for(let w=0;w<d;w++)(0,E.Z1)(G,z,a[w],a[w]);const W=t(a);for(let w=0;w<W.length;w+=3)j+=(0,x.Fm)(a[W[w]],a[W[w+1]],a[W[w+2]])}return(0,m.gT)(j,U)}const S=(0,_.vt)(),I=(0,_.vt)();function t(s){return(0,l.e)(function e(s){const r=new Float64Array(2*s.length);for(let v=0;v<s.length;++v){const y=s[v],U=2*v;r[U]=y[0],r[U+1]=y[1]}return r}(s),[],2)}var A=o(46041),f=o(79283),g=o(38289);function D(s){return(0,m.gT)(Math.abs((0,f.qy)([s],"square-meters")[0]),"square-meters")}function C(s){try{return(0,m.gT)(Math.abs((0,A.geodesicArea)(s,"square-meters")),"square-meters")}catch{return null}}function i(s,r={positionsWorldCoords:[]}){return function T(s,r,v={positionsWorldCoords:[]}){if("on-the-ground"===r){const y=function P(s){const{spatialReference:r}=s;return(0,g.M0)(r,D,C,s)}(s);return y??function M(s,r={positionsWorldCoords:[]}){return L(s,r,!1)}(s,v)}return function O(s,r={positionsWorldCoords:[]}){return L(s,r)}(s,v)}(s,"on-the-ground",r)}}}]);