"use strict";(self.webpackChunkAngularClient=self.webpackChunkAngularClient||[]).push([[6773,6598],{33087:(B,D,e)=>{e.d(D,{q:()=>E});var d=e(60611);class E{constructor(s,S){this._storage=new d.F,this.id="",this.name="",this.size=0,this._storage.maxSize=s,this._storage.register(this),S&&this._storage.registerRemoveFunc("",S)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(s,S,v=1){this._storage.put(this,s,S,v,1)}pop(s){return this._storage.pop(this,s)}get(s){return this._storage.get(this,s)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(s){this._storage.maxSize=s}resetHitRate(){}}},60611:(B,D,e)=>{e.d(D,{F:()=>v,Ti:()=>E});var d=e(12438);const E=-3,T=E-1;var s,P;(P=s||(s={}))[P.ALL=0]="ALL",P[P.SOME=1]="SOME";class v{get size(){return this._size}constructor(n=10485760){this._maxSize=n,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new d.A,this._users=new d.A}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear()}register(n){this._users.push(n)}deregister(n){this._users.removeUnordered(n)}registerRemoveFunc(n,o){this._removeFuncs.push([n,o])}deregisterRemoveFunc(n){this._removeFuncs.filterInPlace(o=>o[0]!==n)}get maxSize(){return this._maxSize}set maxSize(n){this._maxSize=Math.max(n,-1),this._checkSize()}getSize(n,o){return this._db.get(n.id+o)?.size??0}put(n,o,a,i,_){const l=this._db.get(o=n.id+o);if(l&&(this._size-=l.size,n.size-=l.size,this._db.delete(o),l.entry!==a&&this._notifyRemove(o,l.entry,l.size,s.ALL)),i>this._maxSize)return void this._notifyRemove(o,a,i,s.ALL);if(void 0===a)return void console.warn("Refusing to cache undefined entry ");if(!i||i<0)return console.warn(`Refusing to cache entry with size ${i} for key ${o}`),void this._notifyRemove(o,a,0,s.ALL);const m=1+Math.max(_,T)-E;this._db.set(o,new R(a,i,m)),this._size+=i,n.size+=i,this._checkSize()}updateSize(n,o,a,i){const _=this._db.get(o=n.id+o);if(_&&_.entry===a){for(this._size-=_.size,n.size-=_.size;i>this._maxSize;){const l=this._notifyRemove(o,a,i,s.SOME);if(!(null!=l&&l>0))return void this._db.delete(o);i=l}_.size=i,this._size+=i,n.size+=i,this._checkSize()}}pop(n,o){const a=this._db.get(o=n.id+o);if(a)return this._size-=a.size,n.size-=a.size,this._db.delete(o),++this._hit,a.entry;++this._miss}get(n,o){const a=this._db.get(o=n.id+o);if(void 0!==a)return this._db.delete(o),a.lives=a.lifetime,this._db.set(o,a),++this._hit,a.entry;++this._miss}peek(n,o){const a=this._db.get(n.id+o);return a?++this._hit:++this._miss,a?.entry}get performanceInfo(){const n={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},o={},a=new Array;this._db.forEach((l,m)=>{const c=l.lifetime;a[c]=(a[c]||0)+l.size,this._users.forAll(y=>{const{id:I,name:O}=y;m.startsWith(I)&&(o[O]=(o[O]||0)+l.size)})});const i={};this._users.forAll(l=>{const m=l.name;"hitRate"in l&&"number"==typeof l.hitRate&&!isNaN(l.hitRate)&&l.hitRate>0?(o[m]=o[m]||0,i[m]=Math.round(100*l.hitRate)+"%"):i[m]="0%"});const _=Object.keys(o);_.sort((l,m)=>o[m]-o[l]),_.forEach(l=>n[l]=Math.round(o[l]/2**20)+"MB / "+i[l]);for(let l=a.length-1;l>=0;--l){const m=a[l];m&&(n["Priority "+(l+E-1)]=Math.round(m/this._size*100)+"%")}return n}resetStats(){this._hit=this._miss=0,this._users.forAll(n=>n.resetHitRate())}clear(n){const o=n.id;this._db.forEach((a,i)=>{i.startsWith(o)&&(this._size-=a.size,this._db.delete(i),this._notifyRemove(i,a.entry,a.size,s.ALL))}),n.size=0}clearAll(){this._db.forEach((n,o)=>this._notifyRemove(o,n.entry,n.size,s.ALL)),this._users.forAll(n=>n.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(n,o,a,i){let _;return this._removeFuncs.some(l=>{if(n.startsWith(l[0])){const m=l[1](o,i,a);return"number"==typeof m&&(_=m),!0}return!1}),_}_checkSize(){this._users.forAll(n=>this._checkSizeLimits(n)),this._checkSizeLimits()}_checkSizeLimits(n){const o=n??this;if(o.maxSize<0||o.size<=o.maxSize)return;const a=n?.id;let i=!0;for(;i;){i=!1;for(const[_,l]of this._db)if(0===l.lifetime&&(!a||_.startsWith(a))){if(this._purgeItem(_,l,n),o.size<=.9*o.maxSize)return;i||=this._db.has(_)}}for(const[_,l]of this._db)if((!a||_.startsWith(a))&&(this._purgeItem(_,l,n),o.size<=.9*o.maxSize))return}_purgeItem(n,o,a=this._users.find(i=>n.startsWith(i.id))){if(this._db.delete(n),o.lives<=1){this._size-=o.size,a&&(a.size-=o.size);const i=this._notifyRemove(n,o.entry,o.size,s.SOME);null!=i&&i>0&&(this._size+=i,a&&(a.size+=i),o.lives=o.lifetime,o.size=i,this._db.set(n,o))}else--o.lives,this._db.set(n,o)}}class R{constructor(n,o,a){this.entry=n,this.size=o,this.lifetime=a,this.lives=a}}},94376:(B,D,e)=>{e.d(D,{p:()=>R});var d=e(8189),E=e(85211),v=(e(3248),e(35150),e(40707),e(76576));const R=P=>{let n=class extends P{get apiKey(){return this._isOverridden("apiKey")?this._get("apiKey"):function x(P){return"portalItem"in P}(this)?this.portalItem?.apiKey:null}set apiKey(o){null!=o?this._override("apiKey",o):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return(0,d._)([(0,E.MZ)({type:String})],n.prototype,"apiKey",null),n=(0,d._)([(0,v.$)("esri.layers.mixins.APIKeyMixin")],n),n}},43124:(B,D,e)=>{e.d(D,{Rr:()=>P,fY:()=>a,ne:()=>o});var d=e(8189),E=e(89221),T=e(85211),x=(e(3248),e(35150),e(40707),e(76576)),R=e(15848);function P(i,_,l){if(!i)return null;const m=i.find(y=>!!y.field);if(!m)return null;const c=new R.A;return c.read(m,l),[c]}const o={type:[R.A],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:P},write:{writer:function n(i,_,l,m){const c=i.find(y=>!!y.field);c&&(0,E.sM)(l,[c.toJSON()],_)}}}},a=i=>{let _=class extends i{constructor(){super(...arguments),this.orderBy=null}};return(0,d._)([(0,T.MZ)(o)],_.prototype,"orderBy",void 0),_=(0,d._)([(0,x.$)("esri.layers.mixins.OrderedLayer")],_),_}},47063:(B,D,e)=>{e.d(D,{A:()=>_});var d=e(8189),E=e(90660),T=e(71065),s=e(85211),R=(e(3248),e(35150),e(40707),e(17221)),P=e(76576),n=e(50305),o=e(39664),a=e(69741);let i=class extends(E.A.ClonableMixin(T.A)){constructor(l){super(l),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(l){const m={};for(const c of Object.keys(l))m[c]=(0,o.rS)(l[c]);return m}writeDomains(l,m){const c={};for(const y of Object.keys(l))l[y]&&(c[y]=l[y]?.toJSON());m.domains=c}};(0,d._)([(0,s.MZ)({json:{write:!0}})],i.prototype,"id",void 0),(0,d._)([(0,s.MZ)({json:{write:!0}})],i.prototype,"name",void 0),(0,d._)([(0,s.MZ)({json:{write:!0}})],i.prototype,"domains",void 0),(0,d._)([(0,R.w)("domains")],i.prototype,"readDomains",null),(0,d._)([(0,n.K)("domains")],i.prototype,"writeDomains",null),(0,d._)([(0,s.MZ)({type:[a.A],json:{write:!0}})],i.prototype,"templates",void 0),i=(0,d._)([(0,P.$)("esri.layers.support.FeatureType")],i);const _=i},64584:(B,D,e)=>{e.d(D,{A:()=>o});var P,d=e(8189),E=e(31178),T=e(71065),s=e(85211),R=(e(3248),e(35150),e(40707),e(76576));let n=P=class extends T.A{constructor(a){super(a),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new E.A}clone(){return new P({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};(0,d._)([(0,s.MZ)({type:String,json:{write:{isRequired:!0}}})],n.prototype,"floorField",void 0),(0,d._)([(0,s.MZ)({json:{read:!1,write:!1}})],n.prototype,"viewAllMode",void 0),(0,d._)([(0,s.MZ)({json:{read:!1,write:!1}})],n.prototype,"viewAllLevelIds",void 0),n=P=(0,d._)([(0,R.$)("esri.layers.support.LayerFloorInfo")],n);const o=n},15848:(B,D,e)=>{e.d(D,{A:()=>a});var P,d=e(8189),E=e(49976),T=e(71065),s=e(85211),R=(e(3248),e(35150),e(40707),e(76576));const n=new E.J({asc:"ascending",desc:"descending"});let o=P=class extends T.A{constructor(i){super(i),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new P({field:this.field,valueExpression:this.valueExpression,order:this.order})}};(0,d._)([(0,s.MZ)({type:String,json:{write:!0}})],o.prototype,"field",void 0),(0,d._)([(0,s.MZ)({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],o.prototype,"valueExpression",void 0),(0,d._)([(0,s.MZ)({type:n.apiValues,json:{type:n.jsonValues,read:n.read,write:n.write}})],o.prototype,"order",void 0),o=P=(0,d._)([(0,R.$)("esri.layers.support.OrderByInfo")],o);const a=o},36267:(B,D,e)=>{e.d(D,{A:()=>i});var d=e(8189),E=e(90660),T=e(49976),s=e(71065),S=e(85211),P=(e(3248),e(35150),e(40707),e(76576));const n=new T.J({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),o=new T.J({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let a=class extends(E.A.ClonableMixin(s.A)){constructor(_){super(_),this.cardinality=null,this.catalogId=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};(0,d._)([(0,S.MZ)({json:{read:n.read,write:n.write}})],a.prototype,"cardinality",void 0),(0,d._)([(0,S.MZ)({json:{name:"catalogID"}})],a.prototype,"catalogId",void 0),(0,d._)([(0,S.MZ)({json:{read:!0,write:!0}})],a.prototype,"composite",void 0),(0,d._)([(0,S.MZ)({json:{read:!0,write:!0}})],a.prototype,"id",void 0),(0,d._)([(0,S.MZ)({json:{read:!0,write:!0}})],a.prototype,"keyField",void 0),(0,d._)([(0,S.MZ)({json:{read:!0,write:!0}})],a.prototype,"keyFieldInRelationshipTable",void 0),(0,d._)([(0,S.MZ)({json:{read:!0,write:!0}})],a.prototype,"name",void 0),(0,d._)([(0,S.MZ)({json:{read:!0,write:!0}})],a.prototype,"relatedTableId",void 0),(0,d._)([(0,S.MZ)({json:{read:!0,write:!0}})],a.prototype,"relationshipTableId",void 0),(0,d._)([(0,S.MZ)({json:{read:o.read,write:o.write}})],a.prototype,"role",void 0),a=(0,d._)([(0,P.$)("esri.layers.support.Relationship")],a);const i=a},85791:(B,D,e)=>{e.d(D,{A:()=>m});var d=e(10467),E=e(8189),T=e(98877),s=e(89447),S=e(31178),v=e(85211),n=(e(3248),e(35150),e(40707),e(76576)),o=e(86300),a=e(48218);let l=class extends T.A{constructor(c){super(c),this._featureUtils=null,this.effectivePopupTemplate=null}get _arcadeTask(){return this.expressionsUsedInTitle.length>0?this._get("_arcadeTask")||(0,s.UT)(()=>(0,a.lw)()):null}get featureUtilsPromise(){return this._get("featureUtilsPromise")??e.e(3958).then(e.bind(e,93958)).then(c=>this._featureUtils=c)}get calculatedExpressions(){const c=new S.A;if(!this.expressionsUsedInTitle.length)return c;if(!this._arcadeTask?.value){for(const y of this.expressionsUsedInTitle??[])c.push({name:y.name,invalid:!0});return c}for(const y of this.expressionsUsedInTitle)try{const I=this._arcadeTask.value.arcade.parseScript(y.expression,["$layer","$map","$datastore"]);if(I.isAsync){c.push({name:y.name,invalid:!0});break}c.push({name:y.name,syntax:I,invalid:!1,func:this._arcadeTask.value.arcade.compileScript(I,{vars:{$feature:"any"}})})}catch{c.push({name:y.name,invalid:!0});break}return c}get expressionsUsedInTitle(){let c=this.effectivePopupTemplate?.title??"";return"string"!=typeof c?[]:(c=c.toLowerCase(),this.effectivePopupTemplate?.expressionInfos?.filter(y=>c.includes(`{expression/${y.name.toLowerCase()}}`))??[])}get fieldInfoMap(){return this._featureUtils?this._createFieldInfoMap(this._featureUtils.getAllFieldInfos(this.effectivePopupTemplate)):null}get hasBadExpressions(){return this.calculatedExpressions.some(c=>!0===c.invalid)}get requiredFields(){const c=new Set;if(this._arcadeTask?.value&&!this.hasBadExpressions)for(const I of this.calculatedExpressions?.toArray()??[])try{const O=this._arcadeTask.value.arcade.extractFieldLiterals(I.syntax);for(const z of O){const j=z.split("."),A=this.fieldsIndex.get(j.at(-1)??"");A&&c.add(A.name)}}catch{}const y=this._extractFieldNames(this.workingTitle);for(const I of y){const O=this.fieldsIndex.get(I);O&&c.add(O.name)}return c}get titleFromDisplayField(){let c="";return this.displayField&&(c=this.fieldsIndex.get(this.displayField)?.name??""),c||(c=this.fieldsIndex.get(this.objectIdField)?.name??""),c?`{${c}}`:""}get workingTitle(){const c=this.effectivePopupTemplate?this.effectivePopupTemplate.title:"";return""===c||null==c||this.hasBadExpressions||"string"!=typeof c?this.titleFromDisplayField:c}getTitle(c,y,I){var O=this;return(0,d.A)(function*(){try{const{attributes:z}=y,j=I?.timeZone??"system",[{substituteFieldsInLinksAndAttributes:A}]=yield Promise.all([O.featureUtilsPromise,O._arcadeTask?.promise]);if(I.fetchMissingFields&&(y=yield O._checkAndReQueryGraphic(c,y)),O.workingTitle&&O.fieldInfoMap){const r=O._createFormattedAttributes(c,y,j).global;return A({attributes:z,expressionAttributes:null,fieldInfoMap:O.fieldInfoMap,globalAttributes:r,layer:c,text:O.workingTitle})}return""}catch{}return""})()}_checkAndReQueryGraphic(c,y){var I=this;return(0,d.A)(function*(){const O=y.getObjectId();if(null==O)return y;if(!(0,o.Kl)(I.requiredFields,y)){const z=c.createQuery();z.where="1=1",z.outFields=[...I.requiredFields],z.objectIds=[O];const j=yield c.queryFeatures(z);if(1===j?.features.length)return j.features[0]}return y})()}_createFieldInfoMap(c){const y=new Map;if(!c)return y;for(const I of c){if(!I.fieldName)continue;const O=this.fieldsIndex.get(I.fieldName),z=O?.name??I.fieldName;I.fieldName=z,y.set(z.toLowerCase(),I)}return y}_createFormattedAttributes(c,y,I="system"){const O=this.effectivePopupTemplate?.fieldInfos??[],z={};if(!this._featureUtils)return{};if(!this.hasBadExpressions&&this.calculatedExpressions.length>0&&this._arcadeTask?.value){const A=this._arcadeTask.value.Feature.createFromGraphicLikeObject(y.geometry,y.attributes,c,null);for(const r of this.calculatedExpressions)try{z[`expression/${r.name}`]=r.func({vars:{$feature:A}})}catch{}}const j={...y.attributes,...z};return{global:this._featureUtils.formatAttributes({fieldInfos:O,attributes:j,graphic:y,timeZone:I,layer:c,fieldInfoMap:this.fieldInfoMap}),content:[]}}_extractFieldNames(c){return(0,o.nw)(c).filter(y=>!(0===y.indexOf("relationships/")||0===y.indexOf("expression/")))}};(0,E._)([(0,v.MZ)({readOnly:!0})],l.prototype,"_arcadeTask",null),(0,E._)([(0,v.MZ)()],l.prototype,"_featureUtils",void 0),(0,E._)([(0,v.MZ)({readOnly:!0})],l.prototype,"featureUtilsPromise",null),(0,E._)([(0,v.MZ)({readOnly:!0})],l.prototype,"calculatedExpressions",null),(0,E._)([(0,v.MZ)()],l.prototype,"displayField",void 0),(0,E._)([(0,v.MZ)()],l.prototype,"effectivePopupTemplate",void 0),(0,E._)([(0,v.MZ)()],l.prototype,"expressionsUsedInTitle",null),(0,E._)([(0,v.MZ)()],l.prototype,"fieldsIndex",void 0),(0,E._)([(0,v.MZ)()],l.prototype,"fieldInfoMap",null),(0,E._)([(0,v.MZ)()],l.prototype,"fields",void 0),(0,E._)([(0,v.MZ)()],l.prototype,"objectIdField",void 0),(0,E._)([(0,v.MZ)()],l.prototype,"requiredFields",null),l=(0,E._)([(0,n.$)("esri.layers.support.TitleCreator")],l);const m=l},27960:(B,D,e)=>{e.d(D,{Ch:()=>S,mW:()=>T,u2:()=>s});var d=e(69287),E=e(63484);function T(i,_){return{..._,filterMode:i.mode}}function s(i,_){return x(i,_).next().value??null}function S(i,_,l){const m=function v(i){if("manual"===n(i))return null;const _=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:l,maxScale:m}of i.filters)_[0]=Math.max(_[0],o(l)),_[1]=Math.min(_[1],a(m));return _}(i);if(m&&((0,d.gg)(_,m[0])||(0,d.ZH)(l,m[1])))return"";const c=Array.from(x(i,_,l)),y=function R(i,_,l){if(0===i.length)return!0;const m=o(i.at(0)?.minScale),c=a(i.at(-1)?.maxScale);if((0,d.ZH)(m,_)||(0,d.gg)(c,l))return!0;for(let y=0;y<i.length-1;y++){const I=i[y];if((0,d.ZH)(o(i[y+1].minScale),a(I.maxScale)))return!0}return!1}(c,_,l)?"1=1":c.map(I=>I.where||"1=1").reduce((I,O)=>(0,E.IW)(I,O),"");return y&&"1=1"!==y?y:""}function*x(i,_,l){if("manual"===n(i)){const m=i.filters.find(c=>c.id===i.activeFilterId);m&&(yield m)}else{"object"==typeof _&&(_=_.scale);for(const m of i.filters)P(m.minScale,m.maxScale,_,l)&&(yield m)}}function P(i,_,l,m){return i=o(i),l=o(l),_=a(_),!(!(0,d.Sp)(l,i)&&(m??l)>i||(0,d.Hx)(_,l)||void 0!==m&&(0,d.Sp)(m,i))}function n(i){return"mode"in i?i.mode:i.filterMode}function o(i){return i||Number.POSITIVE_INFINITY}function a(i){return i||0}},6829:(B,D,e)=>{e.d(D,{CW:()=>i,Fm:()=>R,Hz:()=>_,JQ:()=>a,JZ:()=>f,ND:()=>m,R_:()=>v,U9:()=>o,fu:()=>E,nr:()=>l,oF:()=>T,rq:()=>P,z$:()=>n});const d=[["binary","application/octet-stream","bin",""]];function E(u,C){return null!=O(C.name,u?.supportedFormats??[])}function T(u,C){if(!u)return!1;const b=P(C,u.supportedFormats??[]);return null!=b&&u.editFormats.includes(b)}function v(u,C){return z(function I(u,C){const b=u.toLowerCase();return c(C).find(W=>j(W)===b)}(u,C))}function x(u,C){return z(O(u,C))}function R(u,C){return j(function y(u,C){return c(C).find(b=>z(b)===u)}(u,C))}function P(u,C){return x(u.name,C)??v(u.type,C)}function n(u,C,b){return v(u,b)??x(C,b)}function o({supportedFormats:u}){return n("model/gltf-binary","glb",u)}function a(u){const C=o(u);return null!=C&&u.editFormats.includes(C)}function i({supportedFormats:u}){return n("model/gltf+json","gltf",u)}function _(u){if(!u)return null;const C=o(u),b=i(u);let W=null;for(const U of u.queryFormats){if(U===C)return U;U===b&&(W=U)}return W}function l({supportedFormats:u}){return n("application/esri3do-SR_world","wld",u)}function m({supportedFormats:u}){return n("application/esri3do-SR_prj","prj",u)}function c(u){return[...d,...u]}function O(u,C){const b=u.toLowerCase();return c(C).find(W=>function A(u){return u?.[2].split(",").map(C=>C.toLowerCase())??[]}(W).some(U=>b.endsWith(U)))}function z(u){return u?.[0]}function j(u){return u?.[1].toLowerCase()}function f(u){return u.tables?.find(C=>"assetMaps"===C.role)}},4858:(B,D,e)=>{e.d(D,{BI:()=>_,D3:()=>a,XJ:()=>i,lc:()=>o,mX:()=>m,rU:()=>l,tH:()=>j});var d=e(1119);const E="__begin__",T="__end__",s=new RegExp(E,"ig"),S=new RegExp(T,"ig"),v=new RegExp("^"+E,"i"),x=new RegExp(T+"$","i"),R='"',P=R+" + ",n=" + "+R;function o(A){return A.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function a(A){return A.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function i(A){const r={expression:"",type:"none"};return A.labelExpressionInfo?A.labelExpressionInfo.value?(r.expression=A.labelExpressionInfo.value,r.type="conventional"):A.labelExpressionInfo.expression&&(r.expression=A.labelExpressionInfo.expression,r.type="arcade"):null!=A.labelExpression&&(r.expression=o(A.labelExpression),r.type="conventional"),r}function _(A){const r=i(A);switch(r.type){case"conventional":return m(r.expression);case"arcade":return r.expression}return null}function l(A){const r=i(A);switch(r.type){case"conventional":return function y(A){return A?.match(c)?.[1].trim()||null}(r.expression);case"arcade":return j(r.expression)}return null}function m(A){let r;return A?(r=(0,d.HC)(A,f=>E+'$feature["'+f+'"]'+T),r=v.test(r)?r.replace(v,""):R+r,r=x.test(r)?r.replace(x,""):r+R,r=r.replaceAll(s,P).replaceAll(S,n)):r='""',r}const c=/^\s*\{([^}]+)\}\s*$/i,I=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,O=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,z=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function j(A){if(!A)return null;let r=I.exec(A)||O.exec(A);return r?r[1]||r[3]:(r=z.exec(A),r?r[2]:null)}},90543:(B,D,e)=>{e.d(D,{S:()=>a,d:()=>A});var d=e(3248),E=e(68438),T=e(6829);function s(r,f,u){return!!v(r,f,u)}function S(r,f,u){return v(r,f,u)}function v(r,f,u){return r&&r.hasOwnProperty(f)?r[f]:u}const x={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function R(r){const f=r?.supportedSpatialAggregationStatistics?.map(u=>u.toLowerCase());return{envelope:!!f?.includes("envelopeaggregate"),centroid:!!f?.includes("centroidaggregate"),convexHull:!!f?.includes("convexhullaggregate")}}function P(r,f){return!!r?.supportedOperationsWithCacheHint?.map(C=>C.toLowerCase())?.includes(f.toLowerCase())}function n(r){const f=r?.supportedStatisticTypes?.map(u=>u.toLowerCase());return{count:!!f?.includes("count"),sum:!!f?.includes("sum"),min:!!f?.includes("min"),max:!!f?.includes("max"),avg:!!f?.includes("avg"),var:!!f?.includes("var"),stddev:!!f?.includes("stddev"),percentileContinuous:!!f?.includes("percentile_continuous"),percentileDiscrete:!!f?.includes("percentile_discrete"),envelope:!!f?.includes("envelopeaggregate"),centroid:!!f?.includes("centroidaggregate"),convexHull:!!f?.includes("convexhullaggregate")}}function o(r){const f=r?.supportedNormalizationTypes?.map(u=>u.toLowerCase());return{field:!!f?.includes("field"),log:!!f?.includes("log"),naturalLog:!!f?.includes("naturallog"),percentOfTotal:!!f?.includes("percentoftotal"),squareRoot:!!f?.includes("squareroot")}}function a(r,f){return{analytics:i(r),attachment:_(r),data:l(r),metadata:m(r),operations:c(r.capabilities,r,f),query:y(r,f),queryAttributeBins:z(r),queryRelated:I(r),queryTopFeatures:O(r),editing:j(r)}}function i(r){return{supportsCacheHint:P(r.advancedQueryCapabilities,"queryAnalytics")}}function _(r){const f=r.attachmentProperties,u={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:P(r.advancedQueryCapabilities,"queryAttachments"),supportsOrderByFields:s(r.advancedQueryCapabilities,"supportsQueryAttachmentOrderByFields",!1),supportsResize:s(r,"supportsAttachmentsResizing",!1)};return f&&Array.isArray(f)&&f.forEach(C=>{const b=x[C.name];b&&(u[b]=!!C.isEnabled)}),u}function l(r){return{isVersioned:s(r,"isDataVersioned",!1),isBranchVersioned:s(r,"isDataBranchVersioned",!1),supportsAttachment:s(r,"hasAttachments",!1),supportsM:s(r,"hasM",!1),supportsZ:s(r,"hasZ",!1)}}function m(r){return{supportsAdvancedFieldProperties:s(r,"supportsFieldDescriptionProperty",!1)}}function c(r,f,u){const C=r?r.toLowerCase().split(",").map(ut=>ut.trim()):[],b=u?(0,E.qg)(u):null,W=C.includes(null!=b&&"MapServer"===b.serverType?"data":"query"),U=C.includes("editing")&&!f.datesInUnknownTimezone;let Z=U&&C.includes("create"),$=U&&C.includes("delete"),V=U&&C.includes("update");const st=C.includes("changetracking"),H=f.advancedQueryCapabilities;return U&&!(Z||$||V)&&(Z=$=V=!0),{supportsCalculate:s(f,"supportsCalculate",!1),supportsTruncate:s(f,"supportsTruncate",!1),supportsValidateSql:s(f,"supportsValidateSql",!1),supportsAdd:Z,supportsDelete:$,supportsEditing:U,supportsChangeTracking:st,supportsQuery:W,supportsQueryAnalytics:s(H,"supportsQueryAnalytic",!1),supportsQueryAttachments:s(H,"supportsQueryAttachments",!1),supportsQueryBins:s(H,"supportsQueryBins",!1),supportsQueryTopFeatures:s(H,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:s(f,"supportsAttachmentsResizing",!1),supportsSync:C.includes("sync"),supportsUpdate:V,supportsExceedsLimitStatistics:s(f,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:s(f,"supportsAsyncConvert3D",!1)}}function y(r,f){const u=r.advancedQueryCapabilities,C=r.ownershipBasedAccessControlForFeatures,b=r.archivingInfo,W=r.currentVersion,U=f?.includes("MapServer"),Z=!U||W>=(0,d.A)("mapserver-pbf-version-support"),$=(0,E.Wo)(f),V=new Set((r.supportedQueryFormats??"").split(",").map(st=>st.toLowerCase().trim()));return{maxRecordCount:S(r,"maxRecordCount",void 0),maxRecordCountFactor:S(r,"maxRecordCountFactor",void 0),standardMaxRecordCount:S(r,"standardMaxRecordCount",void 0),supportedSpatialAggregationStatistics:R(u),supportsCacheHint:s(u,"supportsQueryWithCacheHint",!1)||P(u,"query"),supportsCentroid:s(u,"supportsReturningGeometryCentroid",!1),supportsCompactGeometry:$,supportsCurrentUser:s(u,"supportsCurrentUserQueries",!1),supportsDefaultSpatialReference:s(u,"supportsDefaultSR",!1),supportsDisjointSpatialRelationship:s(u,"supportsDisjointSpatialRel",!1),supportsDistance:s(u,"supportsQueryWithDistance",!1),supportsDistinct:s(u,"supportsDistinct",r.supportsAdvancedQueries),supportsExtent:s(u,"supportsReturningQueryExtent",!1),supportsFormatPBF:Z&&V.has("pbf"),supportsFullTextSearch:s(u,"supportsFullTextSearch",!1),supportsGeometryProperties:s(u,"supportsReturningGeometryProperties",!1),supportsHavingClause:s(u,"supportsHavingClause",!1),supportsHistoricMoment:s(b,"supportsQueryWithHistoricMoment",!1),supportsMaxRecordCountFactor:s(u,"supportsMaxRecordCountFactor",!1),supportsOrderBy:s(u,"supportsOrderBy",r.supportsAdvancedQueries),supportsPagination:s(u,"supportsPagination",!1),supportsPercentileStatistics:s(u,"supportsPercentileStatistics",!1),supportsQuantization:s(r,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:s(r,"supportsQuantizationEditMode",!1),supportsQueryByAnonymous:s(C,"allowAnonymousToQuery",!0),supportsQueryByOthers:s(C,"allowOthersToQuery",!0),supportsQueryGeometry:s(r,"supportsReturningQueryGeometry",!1),supportsResultType:s(u,"supportsQueryWithResultType",!1),supportsReturnMesh:!!(0,T.Hz)(r.infoFor3D),supportsSpatialAggregationStatistics:s(u,"supportsSpatialAggregationStatistics",!1),supportsSqlExpression:s(u,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:s(r,"useStandardizedQueries",!1),supportsStatistics:s(u,"supportsStatistics",r.supportsStatistics),supportsTopFeaturesQuery:s(u,"supportsTopFeaturesQuery",!1),supportsTrueCurve:s(u,"supportsTrueCurve",!1),tileMaxRecordCount:S(r,"tileMaxRecordCount",void 0)}}function I(r){const f=r.advancedQueryCapabilities,u=s(f,"supportsAdvancedQueryRelated",!1);return{supportsPagination:s(f,"supportsQueryRelatedPagination",!1),supportsCount:u,supportsOrderBy:u,supportsCacheHint:P(f,"queryRelated")}}function O(r){return{supportsCacheHint:P(r.advancedQueryCapabilities,"queryTopFilter")}}function z(r){const f=r?r.queryBinsCapabilities:void 0;return{supportsDate:s(f,"supportsDateBin",!1),supportsFixedInterval:s(f,"supportsFixedIntervalBin",!1),supportsAutoInterval:s(f,"supportsAutoIntervalBin",!1),supportsFixedBoundaries:s(f,"supportsFixedBoundariesBin",!1),supportsStackBy:s(f,"supportsStackBy",!1),supportsSplitBy:s(f,"supportsSplitBy",!1),supportsSnapToData:s(f,"supportsSnapToData",!1),supportsReturnFullIntervalBin:s(f,"supportsReturnFullIntervalBin",!1),supportsFirstDayOfWeek:s(f,"supportsFirstDayOfWeek",!1),supportsNormalization:s(f,"supportsNormalization",!1),supportedStatistics:n(f),supportedNormalizationTypes:o(f)}}function j(r){const f=r.ownershipBasedAccessControlForFeatures,u=r?r.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:s(r,"allowGeometryUpdates",!0),supportsGlobalId:s(r,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:s(r,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:s(r,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:s(r,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:s(r,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:s(f,"allowAnonymousToDelete",!0),supportsDeleteByOthers:s(f,"allowOthersToDelete",!0),supportsUpdateByAnonymous:s(f,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:s(f,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:s(u,"supportsAsyncApplyEdits",!1),zDefault:S(r,"zDefault",void 0)}}function A(r){return{operations:{supportsAppend:s(r,"supportsAppend",!1),supportsCoverageQuery:r?.playbackInfo?.klv["0601"]??!1,supportsExportClip:s(r,"supportsExportClip",!1),supportsExportFrameset:s(r,"supportsExportFrameset",!1),supportsMensuration:s(r,"supportsMensuration",!1),supportsUpdate:s(r,"supportsUpdate",!1)}}}},78592:(B,D,e)=>{e.d(D,{O3:()=>P,PU:()=>x,YW:()=>o,ex:()=>S,hv:()=>n,zp:()=>v});var d=e(69287),E=e(67685),T=e(53781),s=e(89141);const S=2.4;function v(a){return(0,E.PN)(a*S)}function x(a){return(0,E.Lz)(a)/S}function R(a,i,_,l){let{color:m,ratio:c}=i,{color:y,ratio:I}=_;I===c&&(1===I?c-=1e-6:I+=1e-6);const O=(0,d.qE)((l-c)/(I-c),0,1);(0,T.l)(a,m.toArray(),y.toArray(),O)}function P(a){const _=new Uint8ClampedArray(2048);if((a=a.filter(({ratio:I})=>I>=0&&I<=1).sort((I,O)=>I.ratio-O.ratio).map(({color:I,ratio:O})=>({color:I,ratio:Math.max(O,.001)}))).length<1)return _;let l=a[0],m=a[0],c=1;const y=(0,s.vt)();for(let I=0;I<512;I++){const O=(I+.5)/512;for(;O>m.ratio&&c<a.length;)l=m,m=a[c++];R(y,l,m,O),_.set(y,4*I)}return _}function n(a,i,_){const l=Math.sqrt(a**2+i**2)/_;return l>1?0:3/(Math.PI*_**2)*(1-l**2)**2}function o(a){return"function"==typeof a?a:a?i=>+i[a]:()=>1}},98789:(B,D,e)=>{e.d(D,{q:()=>E});var d=e(23743);function E(T,s,S){if(!S?.features||!S.hasZ)return;const v=(0,d.N)(S.geometryType,s,T.outSpatialReference);if(null!=v)for(const x of S.features)v(x.geometry)}},68470:(B,D,e)=>{e.d(D,{K:()=>a,Q:()=>P});var d=e(8189),E=e(49976),T=e(35150),s=e(85211),x=(e(3248),e(40707),e(15463)),R=e(76576);const P=(0,E.O)()({naturalLog:"natural-log",squareRoot:"square-root",percentOfTotal:"percent-of-total",log:"log",field:"field"}),n="percent-of-total",o="field",a=i=>{let _=class extends i{constructor(){super(...arguments),this.normalizationField=null,this.normalizationMaxValue=null,this.normalizationMinValue=null,this.normalizationTotal=null}get normalizationType(){let l=this._get("normalizationType");const m=!!this.normalizationField,c=null!=this.normalizationTotal;return m||c?(l=m&&o||c&&n||null,m&&c&&T.A.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):l!==o&&l!==n||(l=null),l}set normalizationType(l){this._set("normalizationType",l)}};return(0,d._)([(0,s.MZ)({type:String,json:{name:"parameters.normalizationField",write:!0}})],_.prototype,"normalizationField",void 0),(0,d._)([(0,s.MZ)({type:Number,json:{name:"parameters.normalizationMaxValue",write:!0}})],_.prototype,"normalizationMaxValue",void 0),(0,d._)([(0,s.MZ)({type:Number,json:{name:"parameters.normalizationMinValue",write:!0}})],_.prototype,"normalizationMinValue",void 0),(0,d._)([(0,s.MZ)({type:Number,json:{name:"parameters.normalizationTotal",write:!0}})],_.prototype,"normalizationTotal",void 0),(0,d._)([(0,x.e)(P,{name:"parameters.normalizationType"})],_.prototype,"normalizationType",null),_=(0,d._)([(0,R.$)("esri.rest.support.NormalizationBinParametersMixin")],_),_}},32117:(B,D,e)=>{e.d(D,{$w:()=>c,Bu:()=>U,DW:()=>u,FH:()=>Ct,FM:()=>R,G9:()=>s,GV:()=>I,Go:()=>n,K3:()=>ft,Kn:()=>r,MM:()=>i,MO:()=>ht,Nl:()=>Z,Ny:()=>O,O2:()=>$,UE:()=>V,YC:()=>vt,YF:()=>H,ZO:()=>_t,_1:()=>b,_H:()=>j,_W:()=>y,_d:()=>f,bs:()=>ct,dI:()=>St,e6:()=>o,gQ:()=>x,iA:()=>dt,jn:()=>l,lW:()=>a,mA:()=>_,n5:()=>st,pM:()=>C,pV:()=>A,pk:()=>It,rB:()=>Pt,s4:()=>T,xo:()=>W,yH:()=>z,yX:()=>Ot,zb:()=>ut,zr:()=>m});var d=e(46988);function T(t,p,h,g){return function E(t){return"function"==typeof t}(t)?t(p,h,g):t}function s(t){return[t.r,t.g,t.b,t.a]}const S=" /-,\n";function v(t){let p=t.length;for(;p--;)if(!S.includes(t.charAt(p)))return!1;return!0}function x(t,p){const h=[];let g=0,L=-1;do{if(L=t.indexOf("[",g),L>=g){if(L>g){const M=t.slice(g,L);h.push([M,null,v(M)])}if(g=L+1,L=t.indexOf("]",g),L>=g){if(L>g){const M=p[t.slice(g,L)];M&&h.push([null,M,!1])}g=L+1}}}while(-1!==L);if(g<t.length){const M=t.slice(g);h.push([M,null,v(M)])}return h}function R(t,p,h,g){let L="",M=null;for(const G of p){const[F,k,Q]=G;if(F)Q?M=F:(M&&(L+=M,M=null),L+=F);else{let Y=k;null!=h&&(Y=ht(k,h));const K=t.attributes[Y];K&&(M&&(L+=M,M=null),L+=K)}}return function P(t,p){switch("string"!=typeof t&&(t=String(t)),p){case"LowerCase":return t.toLowerCase();case"Allcaps":return t.toUpperCase();default:return t}}(L,g)}function n(t,p,h,g,L,M,G=!0){const F=p/L,k=h/M,Q=Math.ceil(F/2),Y=Math.ceil(k/2);for(let K=0;K<M;K++)for(let w=0;w<L;w++){const q=4*(w+(G?M-K-1:K)*L);let N=0,tt=0,rt=0,ot=0,it=0,at=0,nt=0;const pt=(K+.5)*k;for(let et=Math.floor(K*k);et<(K+1)*k;et++){const Et=Math.abs(pt-(et+.5))/Y,At=(w+.5)*F,Dt=Et*Et;for(let lt=Math.floor(w*F);lt<(w+1)*F;lt++){let J=Math.abs(At-(lt+.5))/Q;const X=Math.sqrt(Dt+J*J);X>=-1&&X<=1&&(N=2*X*X*X-3*X*X+1,N>0&&(J=4*(lt+et*p),nt+=N*t[J+3],rt+=N,t[J+3]<255&&(N=N*t[J+3]/250),ot+=N*t[J],it+=N*t[J+1],at+=N*t[J+2],tt+=N))}}g[q]=ot/tt,g[q+1]=it/tt,g[q+2]=at/tt,g[q+3]=nt/rt}}function o(t){return t?[t[0],t[1],t[2],t[3]/255]:[0,0,0,0]}function a(t){return t.data?.symbol??null}function i(t){return"CIMVectorMarker"===t.type||"CIMPictureMarker"===t.type||"CIMBarChartMarker"===t.type||"CIMCharacterMarker"===t.type||"CIMPieChartMarker"===t.type||"CIMStackedBarChartMarker"===t.type}function _(t){return"CIMGradientStroke"===t.type||"CIMPictureStroke"===t.type||"CIMSolidStroke"===t.type}function l(t){return null!=t&&("CIMGradientFill"===t.type||"CIMHatchFill"===t.type||"CIMPictureFill"===t.type||"CIMSolidFill"===t.type||"CIMWaterFill"===t.type)}function m(t){return null!=t&&("CIMMarkerPlacementAlongLineRandomSize"===t.type||"CIMMarkerPlacementAlongLineSameSize"===t.type||"CIMMarkerPlacementAlongLineVariableSize"===t.type||"CIMMarkerPlacementAtExtremities"===t.type||"CIMMarkerPlacementAtMeasuredUnits"===t.type||"CIMMarkerPlacementAtRatioPositions"===t.type||"CIMMarkerPlacementOnLine"===t.type||"CIMMarkerPlacementOnVertices"===t.type)}const c=(t,p=0)=>null==t||isNaN(t)?p:t,y=(t,p)=>t??p,I=(t,p)=>t??p,O=t=>t.tintColor?o(t.tintColor):[255,255,255,1],z=t=>{if(!t)return!1;for(const p of t)switch(p.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function j(){return Promise.all([e.e(3930),e.e(2076),e.e(4108)]).then(e.bind(e,27815))}function A(t){if(!t)return"normal";switch(t.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function r(t){if(!t)return"normal";switch(t.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function f(t){let p="normal",h="normal";if(t){const g=t.toLowerCase();g.includes("italic")?p="italic":g.includes("oblique")&&(p="oblique"),g.includes("bold")?h="bold":g.includes("light")&&(h="lighter")}return{style:p,weight:h}}function u(t){return t.underline?"underline":t.strikethrough?"line-through":"none"}function C(t){if(!t)return null;switch(t.type){case"CIMPolygonSymbol":if(t.symbolLayers)for(const p of t.symbolLayers){const h=C(p);if(null!=h)return h}break;case"CIMTextSymbol":return C(t.symbol);case"CIMSolidFill":return t.color}return null}function b(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const p=t.symbolLayers;if(p)for(const h of p){const g=b(h);if(null!=g)return g}break}case"CIMTextSymbol":return b(t.symbol);case"CIMSolidStroke":return t.color}}function W(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(t.symbolLayers)for(const p of t.symbolLayers){const h=W(p);if(void 0!==h)return h}break;case"CIMTextSymbol":return W(t.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return t.width}}function U(t){switch(t){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function Z(t){switch(t){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function $(t){return(t?Object.keys(t):[]).map(p=>({name:p,alias:p,type:"string"==typeof t[p]?"esriFieldTypeString":"esriFieldTypeDouble"}))}const V=t=>t.includes("data:image/svg+xml");function st(t){if(!t)return null;switch(t.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function H(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}function ut(t,p,h,g,L,M,G=!0){const{infos:F}=M;let k=1,Q=0,Y=0,K=0,w=1;for(const{absoluteAnchorPoint:tt,offsetX:rt,offsetY:ot,rotation:it,size:at,frameHeight:nt,rotateClockWise:pt,scaleSymbolsProportionally:et}of F)w=tt?1:k,Y=yt(rt,ot,Q,w,Y),K=mt(rt,ot,Q,w,K),nt&&(et||G)&&(k*=at/nt),Q=Mt(it,pt,Q);const q=yt(g,L,Q,w,Y),N=mt(g,L,Q,w,K);return{size:t*k,rotation:Mt(p,h,Q),offsetX:q,offsetY:N}}function _t(t){if(null==t)return!1;if(Array.isArray(t))return t.every(p=>_t(p));switch(typeof t){case"string":return!!t;case"number":return!isNaN(t)}}function dt(t,p){if("color"===p||"outlinecolor"===p||"backgroundcolor"===p||"borderlinecolor"===p||"tintcolor"===p)return[...d.K[p]];const h=d.D[t];if(!h)throw new Error(`InternalError: default value for type ${t}.`);return h[p]}function ft(t){return"string"==typeof t?function gt(t){return t.split(" ").map(p=>Number(p))}(t):t}function Ct(t){return t?.dashTemplate&&(t.dashTemplate=ft(t.dashTemplate)),t}function ct(t){if(null==t)return"Normal";switch(t.type){case"CIMTextSymbol":return t.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const p=t.symbolLayers;if(!p)return"Normal";for(const h of p)if("CIMVectorMarker"===h.type)return ct(h)}break;case"CIMVectorMarker":{const p=t.markerGraphics;if(!p)return"Normal";for(const h of p)if(h.symbol)return ct(h.symbol)}}return"Normal"}function vt(t){if(t)switch(t.type){case"CIMTextSymbol":return t.height;case"CIMPointSymbol":{let p=0;if(t.symbolLayers)for(const h of t.symbolLayers)if(h)switch(h.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const g=h.size??d.D.CIMVectorMarker.size;g>p&&(p=g);break}}return p}case"CIMLineSymbol":case"CIMPolygonSymbol":{let p=0;if(t.symbolLayers)for(const h of t.symbolLayers)if(h)switch(h.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const g=h.width;null!=g&&g>p&&(p=g);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(h.markerPlacement&&m(h.markerPlacement)){const g=h.size??d.D.CIMVectorMarker.size;g>p&&(p=g)}break;case"CIMPictureFill":{const g=h.height;null!=g&&g>p&&(p=g)}}return p}}}function ht(t,p){if(null!==p){const h=p.get(t);return h?h.name:t}return t}function It(t){return t.map(p=>({...p,propertyName:H(p.propertyName)}))}function Pt(t){const p={};for(const h in t){const g=t[h];p[H(h)]=g}return p}function mt(t,p,h,g,L){const M=h*Math.PI/180;if(M){const G=Math.cos(M);return(Math.sin(M)*t+G*p)*g+L}return p*g+L}function yt(t,p,h,g,L){const M=h*Math.PI/180;return M?(Math.cos(M)*t-Math.sin(M)*p)*g+L:t*g+L}function Mt(t,p,h){return p?h-t:h+t}function St(t,p,h){const g="Color"===h||"TintColor"===h||"ToColor"===h,L="Rotation"===h||"Angle"===h||"ToRotation"===h;let M=p[H(h)];if(null!=M&&(g?M=[M[0]/255,M[1]/255,M[2]/255,M[3]/255]:L&&(M*=Math.PI/180)),null==M&&(M=dt(p.type,h.toLowerCase()),null!=M&&(g?M=[M[0]/255,M[1]/255,M[2]/255,M[3]]:L&&(M*=Math.PI/180))),null!=p.primitiveName){const G=t[p.primitiveName];if(null!=G){const F=G[h];null==F||("string"==typeof F||"number"==typeof F||Array.isArray(F)?(M=F,null!=M&&(g?M=[M[0]/255,M[1]/255,M[2]/255,M[3]/255]:L&&(M*=Math.PI/180))):(M={valueExpressionInfo:F,defaultValue:M},null!=M&&(g?M={type:"Process",op:"ArcadeColor",value:M}:L&&(M={type:"Process",op:"Divide",left:M,right:180/Math.PI}))))}}if(null==M)throw new Error(`Failed to derive a value or an expression for "${h}".`);return M}function Ot(t,p){return Math.max(Math.min((t??p)/100,1),0)}},91644:(B,D,e)=>{e.d(D,{A7:()=>R,Cx:()=>P,Hk:()=>n,JJ:()=>_,SF:()=>o,UK:()=>x,jM:()=>a,x3:()=>i}),e(3248);var E=e(88521),T=e(55417),s=e(46602),S=e(47705),v=e(48254);const x=s.A.fromJSON(v.Cb),R=T.A.fromJSON(v.yM),P=E.A.fromJSON(v.WR),n=S.A.fromJSON(v.JZ);function o(l){if(null==l)return null;switch(l.type){case"mesh":return null;case"point":case"multipoint":return x;case"polyline":return R;case"polygon":case"extent":return P}return null}const a=s.A.fromJSON(v.nC),i=T.A.fromJSON(v.HW),_=E.A.fromJSON(v.b6)},48254:(B,D,e)=>{e.d(D,{Cb:()=>T,HW:()=>R,JR:()=>E,JZ:()=>v,WR:()=>S,b6:()=>P,fT:()=>d,nC:()=>x,yM:()=>s});const d=[252,146,31,255],E=[153,153,153,255],T={type:"esriSMS",style:"esriSMSCircle",size:6,color:d,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},s={type:"esriSLS",style:"esriSLSSolid",width:.75,color:d},S={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},v={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},x={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},R={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},P={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},71655:(B,D,e)=>{var d,E;e.d(D,{X:()=>d}),(E=d||(d={}))[E.SAVE=0]="SAVE",E[E.SAVE_AS=1]="SAVE_AS"}}]);