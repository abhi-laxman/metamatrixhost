"use strict";(self.webpackChunkAngularClient=self.webpackChunkAngularClient||[]).push([[4588],{721:(ee,K,I)=>{function L(a){return a?{originPosition:"upper-left"===a.originPosition?"upperLeft":"lower-left"===a.originPosition?"lowerLeft":a.originPosition,scale:a.tolerance?[a.tolerance,a.tolerance,1,1]:[1,1,1,1],translate:null!=a.extent?[a.extent.xmin,a.extent.ymax,a.extent.zmin??0,a.extent.mmin??0]:[0,0,0,0]}:null}function d(a){if(function H(a){return"lowerLeft"===a.originPosition&&4===a.scale.length&&4===a.translate.length}(a))return a;const{originPosition:s,scale:i,translate:l}=a,f=i[1]??1;return{originPosition:"lowerLeft",scale:[i[0]??1,"lowerLeft"===s?f:-f,i[2]??1,i[3]??1],translate:[l[0]??0,l[1]??0,l[2]??0,l[3]??0]}}function E({scale:a,translate:s},i){return Math.round((i-s[0])/a[0])}function v({scale:a,translate:s},i){return Math.round((i-s[1])/a[1])}function T({scale:a,translate:s},i){return Math.round(((i??0)-s[2])/a[2])}function C({scale:a,translate:s},i){return i?Math.round((i-s[3])/a[3]):0}function p(a,s){return a&&s?m:a&&!s?c:!a&&s?h:b}I.d(K,{$X:()=>oe,B2:()=>v,Gy:()=>ne,IE:()=>E,P5:()=>ce,Q1:()=>d,QE:()=>X,SW:()=>$,Tr:()=>Q,VV:()=>L,wp:()=>se}),I(61320);const b=(a,s)=>{const i=[];if(!s.length)return null;const l=s[0];let u=E(a,l[0]),f=v(a,l[1]);i.push([u,f]);for(let g=1;g<s.length;g++){const[x,S]=s[g],z=E(a,x),P=v(a,S);z===u&&P===f||i.push([z-u,P-f]),u=z,f=P}return i},c=(a,s)=>{const i=[];if(!s.length)return null;const l=s[0];let u=E(a,l[0]),f=v(a,l[1]),g=T(a,l[2]);i.push([u,f,g]);for(let x=1;x<s.length;x++){const[S,z,P]=s[x],R=E(a,S),F=v(a,z),G=T(a,P);R===u&&F===f&&G===g||i.push([R-u,F-f,G]),u=R,f=F,g=G}return i},h=(a,s)=>{const i=[];if(!s.length)return null;const l=s[0];let u=E(a,l[0]),f=v(a,l[1]),g=C(a,l[2]);i.push([u,f,g]);for(let x=1;x<s.length;x++){const[S,z,P]=s[x],R=E(a,S),F=v(a,z),G=C(a,P);R===u&&F===f&&G===g||i.push([R-u,F-f,G]),u=R,f=F,g=G}return i},m=(a,s)=>{const i=[];if(!s.length)return null;const l=s[0];let u=E(a,l[0]),f=v(a,l[1]),g=T(a,l[2]),x=C(a,l[3]);i.push([u,f,g,x]);for(let S=1;S<s.length;S++){const[z,P,R,F]=s[S],G=E(a,z),q=v(a,P),ue=T(a,R),he=C(a,F);G===u&&q===f&&ue===g&&he===x||i.push([G-u,q-f,ue,he]),u=G,f=q,g=ue,x=he}return i};function _({scale:a,translate:s},i){return i*a[0]+s[0]}function w({scale:a,translate:s},i){return i*a[1]+s[1]}function D({scale:a,translate:s},i){return(i??0)*a[2]+s[2]}function N({scale:a,translate:s},i){return i?i*a[3]+s[3]:0}function O(a,s){return a&&s?k:a&&!s?j:!a&&s?U:W}const W=(a,s)=>{const i=new Array(s.length);if(!s.length)return i;const l=s[0];let u=_(a,l[0]),f=w(a,l[1]);i[0]=[u,f];const{scale:g,originPosition:x}=a,S=g[0],z="lowerLeft"===x?g[1]:-g[1];for(let P=1;P<s.length;P++){const[R,F]=s[P];u+=S*R,f+=z*F,i[P]=[u,f]}return i},j=(a,s)=>{const i=new Array(s.length);if(!s.length)return i;const l=s[0];let u=_(a,l[0]),f=w(a,l[1]);i[0]=[u,f,D(a,l[2])];const{scale:g,originPosition:x}=a,S=g[0],z="lowerLeft"===x?g[1]:-g[1];for(let P=1;P<s.length;P++){const[R,F,G]=s[P];u+=S*R,f+=z*F,i[P]=[u,f,D(a,G)]}return i},U=(a,s)=>{const i=new Array(s.length);if(!s.length)return i;const l=s[0];let u=_(a,l[0]),f=w(a,l[1]);i[0]=[u,f,N(a,l[2])];const{scale:g,originPosition:x}=a,S=g[0],z="lowerLeft"===x?g[1]:-g[1];for(let P=1;P<s.length;P++){const[R,F,G]=s[P];u+=S*R,f+=z*F,i[P]=[u,f,N(a,G)]}return i},k=(a,s)=>{const i=new Array(s.length);if(!s.length)return i;const l=s[0];let u=_(a,l[0]),f=w(a,l[1]);i[0]=[u,f,D(a,l[2]),N(a,l[3])];const{scale:g,originPosition:x}=a,S=g[0],z="lowerLeft"===x?g[1]:-g[1];for(let P=1;P<s.length;P++){const[R,F,G,q]=s[P];u+=S*R,f+=z*F,i[P]=[u,f,D(a,G),N(a,q)]}return i};function B(a,s,i){const l=new Array(i.length);for(let u=0;u<i.length;u++)l[u]=s(a,i[u]);return l}function ne(a,s,i){const l=d(a);return s.x=E(l,i.x),s.y=v(l,i.y),null!=i.z&&(s.z=T(l,i.z)),null!=i.m&&(s.m=C(l,i.m)),s}function se(a,s,i){const l=function y(a,s,i,l){const u=[],f=p(i,l);for(let g=0;g<s.length;g++){const x=f(a,s[g]);x&&x.length>=3&&u.push(x)}return u.length?u:null}(d(a),i.rings,i.hasZ,i.hasM);return l?(s.rings=l,s.hasZ=i.hasZ??!1,s.hasM=i.hasM??!1,s):null}function X(a,s,i){const l=function A(a,s,i,l){const u=[],f=p(i,l);for(let g=0;g<s.length;g++){const x=f(a,s[g]);x&&x.length>=2&&u.push(x)}return u.length?u:null}(d(a),i.paths,i.hasZ,i.hasM);return l?(s.paths=l,s.hasZ=i.hasZ??!1,s.hasM=i.hasM??!1,s):null}function $(a,s,i,l=i?.hasZ??!1,u=i?.hasM??!1){if(null!=i){const f=d(a);s.points=O(l,u)(f,i.points),s.hasZ=l,s.hasM=u}return s}function Q(a,s,i,l=null!=i?.z,u=null!=i?.m){if(null==i)return s;const f=d(a);return s.x=_(f,i.x),s.y=w(f,i.y),l&&(s.z=D(f,i.z)),u&&(s.m=N(f,i.m)),s}function oe(a,s,i,l=i?.hasZ??!1,u=i?.hasM??!1){if(null!=i){const f=d(a);s.rings=B(f,O(l,u),i.rings),s.hasZ=l,s.hasM=u}return s}function ce(a,s,i,l=i?.hasZ??!1,u=i?.hasM??!1){if(null!=i){const f=d(a);s.paths=B(f,O(l,u),i.paths),s.hasZ=l,s.hasM=u}return s}},51298:(ee,K,I)=>{I.r(K),I.d(K,{OverrideHelper:()=>p});var V=I(10467),L=I(68677),H=I(29430),d=I(77806),E=I(48218),v=I(32117),T=I(46191);const C=b=>{if(!b)return[0,0,0,0];const{r:c,g:h,b:m,a:M}=b;return[c,h,m,255*M]};class p{static findApplicableOverrides(c,h,m){if(c&&h){if(c.primitiveName){let M=!1;for(const y of m)if(y.primitiveName===c.primitiveName){M=!0;break}if(!M)for(const y of h)y.primitiveName===c.primitiveName&&m.push(y)}switch(c.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(c.effects)for(const M of c.effects)p.findApplicableOverrides(M,h,m);if(c.symbolLayers)for(const M of c.symbolLayers)p.findApplicableOverrides(M,h,m);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMVectorMarker":case"CIMCharacterMarker":case"CIMPictureMarker":if(c.effects)for(const M of c.effects)p.findApplicableOverrides(M,h,m);if(c.markerPlacement&&p.findApplicableOverrides(c.markerPlacement,h,m),"CIMVectorMarker"===c.type){if(c.markerGraphics)for(const M of c.markerGraphics)p.findApplicableOverrides(M,h,m),p.findApplicableOverrides(M.symbol,h,m)}else"CIMCharacterMarker"===c.type?p.findApplicableOverrides(c.symbol,h,m):"CIMHatchFill"===c.type?p.findApplicableOverrides(c.lineSymbol,h,m):"CIMPictureMarker"===c.type&&p.findApplicableOverrides(c.animatedSymbolProperties,h,m)}}}static findEffectOverrides(c,h){if(!c)return null;if("CIMGeometricEffectDashes"===c.type&&(0,v.FH)(c),!h||!c.primitiveName)return{type:"cim-effect-param",effect:c,overrides:[]};const m=(0,v.rB)(c),M=c.primitiveName,y=[];for(const A of h)A.primitiveName===M&&y.push((0,v.rB)(A));return{type:"cim-effect-param",effect:m,overrides:(0,v.pk)(y)}}static resolveSymbolOverrides(c,h,m,M,y,A,_){return(0,V.A)(function*(){if(!c?.symbol)return null;let{symbol:w,primitiveOverrides:D}=c;const N=!!D;if(!N&&!M)return w;w=(0,d.o8)(w),D=(0,d.o8)(D);let O=!0;if(h||(h={attributes:{}},O=!1),N){if(O||(D=D.filter(W=>!W.valueExpressionInfo?.expression.includes("$feature"))),_||(D=D.filter(W=>!W.valueExpressionInfo?.expression.includes("$view"))),D.length>0){const W={spatialReference:m,fields:(0,v.O2)(h.attributes),geometryType:y};yield p.createRenderExpressions(D,W),p.evaluateOverrides(D,h,y??"esriGeometryPoint",A,_)}p.applyOverrides(w,D)}return M&&p.applyDictionaryTextOverrides(w,h,M,null),w})()}static createRenderExpressions(c,h){return(0,V.A)(function*(){const m=[];for(const M of c){const y=M.valueExpressionInfo;if(!y||p._expressionToRenderExpression.has(y.expression))continue;const A=(0,E.Ad)(y.expression,h.spatialReference,h.fields);m.push(A),A.then(_=>p._expressionToRenderExpression.set(y.expression,_))}m.length>0&&(yield Promise.all(m))})()}static evaluateOverrides(c,h,m,M,y){const A={$view:{scale:y?.scale}};for(const _ of c){_.value&&"object"==typeof _.value&&(0,H.IB)(_.value)&&("Color"===_.propertyName||"StrokeColor"===_.propertyName)&&(_.value=C(_.value));const w=_.valueExpressionInfo;if(!w)continue;const D=p._expressionToRenderExpression.get(w.expression);D&&(_.value=(0,T.default)(D,h,A,m,M))}}static applyDictionaryTextOverrides(c,h,m,M,y="Normal"){if(c?.type)switch(c.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":case"CIMTextSymbol":{const A=c.symbolLayers;if(!A)return;for(const _ of A)_&&"CIMVectorMarker"===_.type&&p.applyDictionaryTextOverrides(_,h,m,M,"CIMTextSymbol"===c.type?c.textCase:y)}break;case"CIMVectorMarker":{const A=c.markerGraphics;if(!A)return;for(const _ of A)_&&p.applyDictionaryTextOverrides(_,h,m,M)}break;case"CIMMarkerGraphic":{const A=c.textString;if(A&&A.includes("[")){const _=(0,v.gQ)(A,m);c.textString=(0,v.FM)(h,_,M,y)}}}}static applyOverrides(c,h,m,M){if(c.primitiveName)for(const y of h)if(y.primitiveName===c.primitiveName){const A=(0,v.YF)(y.propertyName);if(M&&M.push({cim:c,nocapPropertyName:A,value:c[A]}),m){let _=!1;for(const w of m)w.primitiveName===c.primitiveName&&(_=!0);_||m.push(y)}null!=y.value&&(c[A]=y.value)}switch(c.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(c.effects)for(const y of c.effects)p.applyOverrides(y,h,m,M);if(c.symbolLayers)for(const y of c.symbolLayers)p.applyOverrides(y,h,m,M);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMSolidFill":case"CIMVectorMarker":if(c.effects)for(const y of c.effects)p.applyOverrides(y,h,m,M);if("CIMVectorMarker"===c.type&&c.markerGraphics)for(const y of c.markerGraphics)p.applyOverrides(y,h,m,M),p.applyOverrides(y.symbol,h,m,M)}}static restoreOverrides(c){for(const h of c)h.cim[h.nocapPropertyName]=h.value}static buildOverrideKey(c){let h="";for(const m of c)void 0!==m.value&&(h+=`${m.primitiveName}${m.propertyName}${JSON.stringify(m.value)}`);return h}static toValue(c,h){if("DashTemplate"===c)return h.split(" ").map(m=>Number(m));if("Color"===c){const m=new L.A(h).toRgba();return m[3]*=255,m}return h}}p._expressionToRenderExpression=new Map},46625:(ee,K,I)=>{I.r(K),I.d(K,{previewCIMSymbol:()=>w});var V=I(10467),L=I(67685),H=I(26747),d=I(14506),E=I(51298),v=I(32117),T=I(44460),C=I(16633);const p=new d.CIMSymbolRasterizer(null),b=(0,L.PN)(T.CB.size),c=(0,L.PN)(T.CB.maxSize),h=(0,L.PN)(T.CB.lineWidth),m=1;function y(){return y=(0,V.A)(function*(N,O,W){const j=O?.size;let U=null!=j&&"object"==typeof j&&"width"in j?j.width:j,k=null!=j&&"object"==typeof j&&"height"in j?j.height:j;if(null==U||null==k)if("esriGeometryPolygon"===W)U=k=O.maxSize?Math.min(O.maxSize,b):b;else{const B=yield function A(N,O,W){return _.apply(this,arguments)}(N,O,W);B&&(U=B.width,k=B.height),"esriGeometryPolyline"===W&&(U=O.maxSize?Math.min(O.maxSize,h):h),U=null!=U&&isFinite(U)?Math.min(U,c):b,k=null!=k&&isFinite(k)?Math.max(Math.min(k,c),m):b}return"legend"===O.style&&"esriGeometryPolyline"===W&&(U=h),{width:U,height:k}}),y.apply(this,arguments)}function _(){return(_=(0,V.A)(function*(N,O,W){const{feature:j,fieldMap:U,viewParams:k}=O.cimOptions||O,B=yield E.OverrideHelper.resolveSymbolOverrides(N.data,j,null,U,W,null,k);if(!B)return null;(N=N.clone()).data={type:"CIMSymbolReference",symbol:B},N.data.primitiveOverrides=void 0;const Y=[];return H.wp.fetchResources(B,p.resourceManager,Y),H.wp.fetchFonts(B,p.resourceManager,Y),Y.length>0&&(yield Promise.all(Y)),H.wp.getEnvelope(B,null,p.resourceManager)})).apply(this,arguments)}function w(N){return D.apply(this,arguments)}function D(){return D=(0,V.A)(function*(N,O={}){const{node:W,opacity:j,symbolConfig:U}=O,k=null!=U&&"object"==typeof U&&"isSquareFill"in U&&U.isSquareFill,B=O.cimOptions||O,Y=B.geometryType||(0,v.n5)(N?.data?.symbol),Z=yield function M(N,O,W){return y.apply(this,arguments)}(N,O,Y),{feature:te,fieldMap:fe}=B,me=O?.geometry||k||"esriGeometryPolygon"!==Y?"preview":"legend";let le=Z;const re=Z;if(O?.geometry&&("esriGeometryPolygon"===Y||"esriGeometryPolyline"===Y)&&((0,L.Lz)(Z.width)<200||(0,L.Lz)(Z.height)<200)){const ce=Z.width>Z.height?(0,L.PN)(200)*Z.height/Z.width:(0,L.PN)(200);le={width:Z.width>Z.height?(0,L.PN)(200):(0,L.PN)(200)*Z.width/Z.height,height:ce}}const J=yield p.rasterizeCIMSymbolAsync(N,te,le,me,fe,Y,null,B.viewParams,B.allowScalingUp,O?.geometry?.toJSON());if(!J)return null;const{width:ne,height:se}=J,X=document.createElement("canvas");X.width=ne,X.height=se,X.getContext("2d").putImageData(J,0,0);const ie=(0,L.Lz)(re.width),ae=(0,L.Lz)(re.height),$=new Image(ie,ae);$.src=X.toDataURL(),$.ariaLabel=O.ariaLabel??null,$.alt=O.ariaLabel??"",null!=j&&($.style.opacity=`${j}`);let Q=$;return null!=O.effectView&&(Q=(0,C.fz)([[{shape:{type:"image",x:0,y:0,width:ie,height:ae,src:$.src},fill:null,stroke:null,offset:[0,0]}]],[ie,ae],{effectView:O.effectView,ariaLabel:O.ariaLabel})),W&&Q&&W.appendChild(Q),Q}),D.apply(this,arguments)}},46191:(ee,K,I)=>{I.r(K),I.d(K,{default:()=>d});var V=I(5922),L=I(35150),H=I(721);function d(C,p,b,c,h){if(null==C)return null;const m=C.references("geometry")&&h?function v(C,p,b){const{transform:c,hasZ:h,hasM:m}=b;E.has(p)||E.set(p,function T(C){const p={};switch(C){case"esriGeometryPoint":return(b,c,h,m)=>(0,H.Tr)(c,p,b,h,m);case"esriGeometryPolygon":return(b,c,h,m)=>(0,H.$X)(c,p,b,h,m);case"esriGeometryPolyline":return(b,c,h,m)=>(0,H.P5)(c,p,b,h,m);case"esriGeometryMultipoint":return(b,c,h,m)=>(0,H.SW)(c,p,b,h,m);default:return L.A.getLogger("esri.views.2d.support.arcadeOnDemand").error(new V.A("mapview-arcade",`Unable to handle geometryType: ${C}`)),b=>b}}(p));const M=E.get(p)(C.geometry,c,h,m);return{...C,geometry:M}}(p,c,h):p,M=C.repurposeFeature(m);try{return C.evaluate({...b,$feature:M},C.services)}catch(y){return L.A.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",y),null}}const E=new Map},21260:(ee,K,I)=>{I.d(K,{A:()=>L});var V=I(88532);class L{constructor(d,E,v,T){this.transformedX=0,this.transformedY=0,this.center=(0,V.fA)(d,E),this.centerT=(0,V.vt)(),this.halfWidth=v/2,this.halfHeight=T/2,this.width=v,this.height=T}get x(){return this.center[0]}get y(){return this.center[1]}get blX(){return this.center[0]+this.halfWidth}get blY(){return this.center[1]+this.halfHeight}get trX(){return this.center[0]-this.halfWidth}get trY(){return this.center[1]-this.halfHeight}get xmin(){return this.x-this.halfWidth}get xmax(){return this.x+this.halfWidth}get ymin(){return this.y-this.halfHeight}get ymax(){return this.y+this.halfHeight}set x(d){this.center[0]=d}set y(d){this.center[1]=d}clone(){return new L(this.x,this.y,this.width,this.height)}serialize(d){return d.writeF32(this.center[0]),d.writeF32(this.center[1]),d.push(this.width),d.push(this.height),d}findCollisionDelta(d,E=4){const v=Math.abs(d.centerT[0]-this.centerT[0]),T=Math.abs(d.centerT[1]-this.centerT[1]),b=Math.min((d.halfWidth+this.halfWidth+E)/v,(d.halfHeight+this.halfHeight+E)/T);return Math.log2(b)}extend(d){const E=Math.min(this.xmin,d.xmin),v=Math.min(this.ymin,d.ymin),T=Math.max(this.xmax,d.xmax)-E,C=Math.max(this.ymax,d.ymax)-v,p=E+T/2,b=v+C/2;this.width=T,this.height=C,this.halfWidth=T/2,this.halfHeight=C/2,this.x=p,this.y=b}static deserialize(d){const E=d.readF32(),v=d.readF32(),T=d.readInt32(),C=d.readInt32();return new L(E,v,T,C)}}}}]);