"use strict";(self.webpackChunkAngularClient=self.webpackChunkAngularClient||[]).push([[9946],{27160:(Q,G,t)=>{t.r(G),t.d(G,{default:()=>ne});var $,M=t(10467),o=t(8189),N=t(31178),F=t(2993),Z=t(39693),_=t(56492),I=t(48900),K=t(45272),p=t(85211),S=(t(3248),t(35150),t(40707),t(17221)),y=t(76576),d=t(50305),v=t(28067),L=t(32034),D=t(95478),P=t(93410),l=t(17049),C=t(85551),U=t(1151),m=t(33036),O=t(22329),T=t(42425),A=t(71065),i=t(55098),s=t(1119),u=t(55739),n=t(70264);let j=$=class extends(T.A.EventedMixin(A.A.JSONSupportMixin(i.A))){constructor(...g){super(...g),this.description=null,this.fullExtent=null,this.id=null,this.networkLink=null,this.parent=null,this.sublayers=null,this.title=null,this.sourceJSON=null,this.layer=null,this.addHandles([(0,I.on)(()=>this.sublayers,"after-add",({item:h})=>{h.parent=this,h.layer=this.layer},I.OH),(0,I.on)(()=>this.sublayers,"after-remove",({item:h})=>{h.layer=h.parent=null},I.OH),(0,I.wB)(()=>this.sublayers,(h,x)=>{if(x)for(const W of x)W.layer=W.parent=null;if(h)for(const W of h)W.parent=this,W.layer=this.layer},I.OH),(0,I.wB)(()=>this.layer,h=>{if(this.sublayers)for(const x of this.sublayers)x.layer=h},I.OH)])}initialize(){(0,I.C_)(()=>this.networkLink).then(()=>(0,I.C_)(()=>!0===this.visible)).then(()=>this.load())}load(g){if(!this.networkLink||this.networkLink.viewFormat)return;const h=null!=g?g.signal:null,x=this._fetchService(this._get("networkLink")?.href??"",h).then(W=>{const ee=(0,n.Qm)(W.sublayers);this.fullExtent=v.A.fromJSON(ee),this.sourceJSON=W;const oe=(0,u.dp)(N.A.ofType($),(0,n.Jy)($,W));this.sublayers?this.sublayers.addMany(oe):this.sublayers=oe,this.layer?.emit("sublayer-update"),this.layer&&this.layer.notifyChange("visibleSublayers")});return this.addResolvingPromise(x),Promise.resolve(this)}get visible(){return this._get("visible")}set visible(g){this._get("visible")!==g&&(this._set("visible",g),this.layer&&this.layer.notifyChange("visibleSublayers"))}readVisible(g,h){return!!h.visibility}_fetchService(g,h){return(0,n.Ox)(g,this.layer.outSpatialReference,this.layer.refreshInterval,h).then(x=>(0,n._4)(x.data))}};(0,o._)([(0,p.MZ)()],j.prototype,"description",void 0),(0,o._)([(0,p.MZ)({type:v.A})],j.prototype,"fullExtent",void 0),(0,o._)([(0,p.MZ)()],j.prototype,"id",void 0),(0,o._)([(0,p.MZ)({readOnly:!0,value:null})],j.prototype,"networkLink",void 0),(0,o._)([(0,p.MZ)({json:{write:{allowNull:!0}}})],j.prototype,"parent",void 0),(0,o._)([(0,p.MZ)({type:N.A.ofType(j),json:{write:{allowNull:!0}}})],j.prototype,"sublayers",void 0),(0,o._)([(0,p.MZ)({value:null,json:{read:{source:"name",reader:g=>(0,s._e)(g)}}})],j.prototype,"title",void 0),(0,o._)([(0,p.MZ)({value:!0})],j.prototype,"visible",null),(0,o._)([(0,S.w)("visible",["visibility"])],j.prototype,"readVisible",null),(0,o._)([(0,p.MZ)()],j.prototype,"sourceJSON",void 0),(0,o._)([(0,p.MZ)()],j.prototype,"layer",void 0),j=$=(0,o._)([(0,y.$)("esri.layers.support.KMLSublayer")],j);const z=j,re=["kml","xml"];let B=class extends((0,P.dM)((0,U.J)((0,m.j)((0,l.q)((0,C.A)((0,Z.P)(D.A))))))){constructor(...g){super(...g),this._visibleFolders=[],this.allSublayers=new F.A({getCollections:()=>[this.sublayers],getChildrenFunction:h=>h.sublayers}),this.outSpatialReference=L.A.WGS84,this.path=null,this.legendEnabled=!1,this.operationalLayerType="KML",this.sublayers=null,this.type="kml",this.url=null}initialize(){this.addHandles([(0,I.wB)(()=>this.sublayers,(g,h)=>{h&&h.forEach(x=>{x.parent=null,x.layer=null}),g&&g.forEach(x=>{x.parent=this,x.layer=this})},I.OH),this.on("sublayer-update",()=>this.notifyChange("fullExtent"))])}normalizeCtorArgs(g,h){return"string"==typeof g?{url:g,...h}:g}readSublayersFromItemOrWebMap(g,h){this._visibleFolders=h.visibleFolders}readSublayers(g,h,x){return(0,n.Jy)(z,h,x,this._visibleFolders)}writeSublayers(g,h){const x=[],W=g.toArray();for(;W.length;){const ee=W[0];ee.networkLink||(ee.visible&&x.push(ee.id),ee.sublayers&&W.push(...ee.sublayers.toArray())),W.shift()}h.visibleFolders=x}get title(){const g=this._get("title");return g&&"defaults"!==this.originOf("title")?g:this.url?(0,K.e7)(this.url,re)||"KML":g}set title(g){this._set("title",g)}get visibleSublayers(){const g=this.sublayers,h=[],x=W=>{W.visible&&(h.push(W),W.sublayers&&W.sublayers.forEach(x))};return g&&g.forEach(x),h}get fullExtent(){return this._recomputeFullExtent()}load(g){const h=null!=g?g.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["KML"],supportsData:!1},g).catch(_.QP).then(()=>this._fetchService(h))),Promise.resolve(this)}destroy(){super.destroy(),this.allSublayers.destroy()}_fetchService(g){var h=this;return(0,M.A)(function*(){const x=yield Promise.resolve().then(()=>h.resourceInfo?{ssl:!1,data:h.resourceInfo}:(0,n.Ox)(h.url??"",h.outSpatialReference,h.refreshInterval,g)),W=(0,n._4)(x.data);h.read(W,{origin:"service"})})()}_recomputeFullExtent(){let g=null;null!=this.extent&&(g=this.extent.clone());const h=x=>{if(x.sublayers)for(const W of x.sublayers.items)h(W),W.visible&&W.fullExtent&&(null!=g?g.union(W.fullExtent):g=W.fullExtent.clone())};return h(this),g}};(0,o._)([(0,p.MZ)({readOnly:!0})],B.prototype,"allSublayers",void 0),(0,o._)([(0,p.MZ)({type:L.A})],B.prototype,"outSpatialReference",void 0),(0,o._)([(0,p.MZ)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],B.prototype,"path",void 0),(0,o._)([(0,p.MZ)({readOnly:!0,json:{read:!1,write:!1}})],B.prototype,"legendEnabled",void 0),(0,o._)([(0,p.MZ)({type:["show","hide","hide-children"]})],B.prototype,"listMode",void 0),(0,o._)([(0,p.MZ)({type:["KML"]})],B.prototype,"operationalLayerType",void 0),(0,o._)([(0,p.MZ)({})],B.prototype,"resourceInfo",void 0),(0,o._)([(0,p.MZ)({type:N.A.ofType(z),json:{write:{ignoreOrigin:!0}}})],B.prototype,"sublayers",void 0),(0,o._)([(0,S.w)(["web-map","portal-item"],"sublayers",["visibleFolders"])],B.prototype,"readSublayersFromItemOrWebMap",null),(0,o._)([(0,S.w)("service","sublayers",["sublayers"])],B.prototype,"readSublayers",null),(0,o._)([(0,d.K)("sublayers")],B.prototype,"writeSublayers",null),(0,o._)([(0,p.MZ)({readOnly:!0,json:{read:!1}})],B.prototype,"type",void 0),(0,o._)([(0,p.MZ)({json:{origins:{"web-map":{read:{source:"title"}}},write:{ignoreOrigin:!0}}})],B.prototype,"title",null),(0,o._)([(0,p.MZ)(O.OZ)],B.prototype,"url",void 0),(0,o._)([(0,p.MZ)({readOnly:!0})],B.prototype,"visibleSublayers",null),(0,o._)([(0,p.MZ)({type:v.A})],B.prototype,"extent",void 0),(0,o._)([(0,p.MZ)()],B.prototype,"fullExtent",null),B=(0,o._)([(0,y.$)("esri.layers.KMLLayer")],B);const ne=B},72211:(Q,G,t)=>{t.d(G,{LF:()=>Z,M9:()=>_,zu:()=>E});var M=t(5922),o=t(89221),N=t(79845),F=t(26073);function Z(S,y,d){try{return function K(S){if(!S||0===S.length)return null;if(function p(S){const y=S[0];return!!y&&"scale"in y}(S)){const y=[];for(const d of S)y.push({scale:d.scale,value:E(d.value)});return y}return E(S)}(S)}catch(v){d?.messages?.push(v)}return null}function _(S,y,d,v){try{const L=function I(S){const y=(0,N.q)(S);return y?(0,F.dw)(y)?y.map(d=>d.toJSON()):y.map(({scale:d,effects:v})=>({scale:d,value:v.map(L=>L.toJSON())})):null}(S);(0,o.sM)(d,L,y)}catch(L){v.messages&&v.messages.push(L)}}function E(S){if(!S?.length)return"";const y=[];for(const d of S){let v=[];switch(d.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":v=[b(d,"amount")];break;case"blur":v=[b(d,"radius","pt")];break;case"hue-rotate":v=[b(d,"angle","deg")];break;case"drop-shadow":v=[b(d,"xoffset","pt"),b(d,"yoffset","pt"),b(d,"blurRadius","pt"),w(d,"color")];break;case"bloom":v=[b(d,"strength"),b(d,"radius","pt"),b(d,"threshold")]}const L=`${d.type}(${v.filter(Boolean).join(" ")})`;(0,N.q)(L),y.push(L)}return y.join(" ")}function b(S,y,d){if(null==S[y])throw new M.A("effect:missing-parameter",`Missing parameter '${y}' in ${S.type} effect`,{effect:S});return d?S[y]+d:""+S[y]}function w(S,y){if(null==S[y])throw new M.A("effect:missing-parameter",`Missing parameter '${y}' in ${S.type} effect`,{effect:S});const d=S[y];return`rgba(${d[0]||0}, ${d[1]||0}, ${d[2]||0}, ${d[3]/255||0})`}},93410:(Q,G,t)=>{t.d(G,{LF:()=>b,dM:()=>w,sU:()=>p});var M=t(8189),o=t(85211),_=(t(3248),t(35150),t(40707),t(76576)),I=t(50501),K=t(72211);const p={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:{layerContainerTypes:I.K}},"portal-item":{read:!0,write:{layerContainerTypes:I.K}}}}},E={read:{reader:K.LF},write:{allowNull:!0,writer:K.M9,layerContainerTypes:I.K}},b={json:{read:!1,write:!1,origins:{"web-map":E,"portal-item":E}}},w=S=>{let y=class extends S{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return(0,M._)([(0,o.MZ)(p)],y.prototype,"blendMode",void 0),(0,M._)([(0,o.MZ)(b)],y.prototype,"effect",void 0),y=(0,M._)([(0,_.$)("esri.layers.mixins.BlendLayer")],y),y}},17049:(Q,G,t)=>{t.d(G,{q:()=>l});var M=t(8189),o=t(5922),N=t(45272),F=t(85211),Z=t(55739),K=(t(3248),t(40707),t(17221)),p=t(76576),E=t(50305),b=t(50501),w=t(34813),S=t(56558);const y={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},d={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},v={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},L={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,Object3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":y,"web-map/basemap":d,"web-map/tables":v,"link-chart/operational-layers":{...y,LinkChartLayer:!0},"link-chart/basemap":d,"link-chart/tables":v,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0,WCS:!0},"portal-item/tables":{ArcGISFeatureLayer:!0,SubtypeGroupTable:!0}};var D=t(22329),P=t(17181);const l=U=>{let m=class extends U{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(O,T,A){return"Group Layer"===A?.portalItem?.type?void 0:O}writeListMode(O,T,A,i){(i&&"ground"===i.layerContainerType||O&&(0,S.R)(this,A,{},i))&&(T[A]=O)}writeOperationalLayerType(O,T,A){O&&(T[A]=O)}writeTitle(O,T){T.title=O??"Layer"}readVisibilityTimeExtent(O){return O?P.A.fromArray(O):null}writeVisibilityTimeExtent(O,T,A,i){O&&"tables"!==i.layerContainerType&&(O.isEmpty?i?.messages&&i.messages.push(new o.A("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):T[A]=O.toArray())}read(O,T){T&&(T.layer=this),(0,w.t)(this,O,A=>super.read(O,A),T)}write(O,T){if(!this.persistenceEnabled&&!T?.ignorePersistenceEnabled)return null;if(T?.origin){const s=`${T.origin}/${T.layerContainerType||"operational-layers"}`;let n=!!L[s]?.[this.operationalLayerType];if("ArcGISTiledElevationServiceLayer"===this.operationalLayerType&&"web-scene/operational-layers"===s&&(n=!1),"ArcGISDimensionLayer"===this.operationalLayerType&&"web-map/operational-layers"===s&&(n=!1),!n)return T.messages?.push(new o.A("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${s}'`,{layer:this})),null}const A=super.write(O,{...T,layer:this}),i=!!T&&!!T.messages&&!!T.messages.filter(s=>s instanceof o.A&&"web-document-write:property-required"===s.name).length;return(0,N.w8)(A?.url)?(T?.messages?.push(new o.A("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&i?null:A}beforeSave(){}};return(0,M._)([(0,F.MZ)({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],m.prototype,"id",void 0),(0,M._)([(0,K.w)("id",["id"])],m.prototype,"readId",null),(0,M._)([(0,F.MZ)(D.C1)],m.prototype,"listMode",void 0),(0,M._)([(0,E.K)("listMode")],m.prototype,"writeListMode",null),(0,M._)([(0,F.MZ)({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:b.K,isRequired:!0}}}}})],m.prototype,"operationalLayerType",void 0),(0,M._)([(0,E.K)("operationalLayerType")],m.prototype,"writeOperationalLayerType",null),(0,M._)([(0,F.MZ)(D.ke)],m.prototype,"opacity",void 0),(0,M._)([(0,F.MZ)({type:Boolean,readOnly:!1})],m.prototype,"persistenceEnabled",void 0),(0,M._)([(0,F.MZ)({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],m.prototype,"title",void 0),(0,M._)([(0,E.K)("title"),(0,E.K)(["web-scene"],"title")],m.prototype,"writeTitle",null),(0,M._)([(0,F.MZ)({type:P.A,json:{origins:{"web-scene":{write:{layerContainerTypes:b.K}}}}})],m.prototype,"visibilityTimeExtent",void 0),(0,M._)([(0,K.w)("visibilityTimeExtent")],m.prototype,"readVisibilityTimeExtent",null),(0,M._)([(0,E.K)(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[Z.jz,Z.Uv]]}})],m.prototype,"writeVisibilityTimeExtent",null),(0,M._)([(0,F.MZ)({type:Boolean,json:{name:"visibility",write:{layerContainerTypes:b.K}}})],m.prototype,"visible",void 0),m=(0,M._)([(0,p.$)("esri.layers.mixins.OperationalLayer")],m),m}},85551:(Q,G,t)=>{t.d(G,{A:()=>m});var M=t(10467),o=t(8189),N=t(23098),F=t(77469),Z=t(89563),_=t(89447),I=t(5922),K=t(35150),p=t(11432),E=t(56492),b=t(45272),w=t(85211),d=(t(3248),t(40707),t(17221)),v=t(76576),L=t(50305),D=t(58443),P=t(73874),l=t(46577),C=t(52606),U=t(69927);const m=T=>{let A=class extends T{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=(0,p.pR)(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(i){i!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",i))}readPortalItem(i,s,u){if(s.itemId)return new l.default({id:s.itemId,portal:u?.portal})}writePortalItem(i,s){i?.id&&(s.itemId=i.id)}loadFromPortal(i,s){var u=this;return(0,M.A)(function*(){if(u.portalItem?.id)try{const{load:n}=yield Promise.all([t.e(2076),t.e(6180)]).then(t.bind(t,56180));return(0,E.Te)(s),yield n({instance:u,supportedTypes:i.supportedTypes,validateItem:i.validateItem,supportsData:i.supportsData,layerModuleTypeMap:i.layerModuleTypeMap,populateGroupLayer:i.populateGroupLayer},s)}catch(n){throw(0,E.zf)(n)||K.A.getLogger(u).warn(`Failed to load layer (${u.title}, ${u.id}) portal item (${u.portalItem.id})\n  ${n}`),n}})()}finishLoadEditablePortalLayer(i){var s=this;return(0,M.A)(function*(){s._set("userHasEditingPrivileges",yield s._fetchUserHasEditingPrivileges(i).catch(u=>((0,E.QP)(u),!0)))})()}setUserPrivileges(i,s){var u=this;return(0,M.A)(function*(){if(!N.A.userPrivilegesApplied)return u.finishLoadEditablePortalLayer(s);if(u.url)try{const{features:{edit:n,fullEdit:$},content:{updateItem:j}}=yield u._fetchUserPrivileges(i,s);u._set("userHasEditingPrivileges",n),u._set("userHasFullEditingPrivileges",$),u._set("userHasUpdateItemPrivileges",j)}catch(n){(0,E.QP)(n)}})()}_fetchUserPrivileges(i,s){var u=this;return(0,M.A)(function*(){let n=u.portalItem;if(!i||!n||!n.loaded||n.sourceUrl)return u._fetchFallbackUserPrivileges(s);const $=!F.id?.findCredential(u.url),j=i===n.id;if(j&&n.portal.user)return u._getUserPrivileges(n,$);let z,re;if(j)z=n.portal.url;else try{z=yield(0,D.wI)(u.url,s)}catch(h){(0,E.QP)(h)}if(!z||!(0,b.b8)(z,n.portal.url))return u._fetchFallbackUserPrivileges(s);try{const h=null!=s?s.signal:null;re=yield F.id?.getCredential(`${z}/sharing`,{prompt:!1,signal:h})}catch(h){(0,E.QP)(h)}if(!re)return{features:{edit:!0,fullEdit:!1},content:{updateItem:!1}};try{if(j?yield n.reload():(n=new l.default({id:i,portal:{url:z}}),yield n.load(s)),n.portal.user)return u._getUserPrivileges(n,$)}catch(h){(0,E.QP)(h)}return{features:{edit:!0,fullEdit:!1},content:{updateItem:!1}}})()}_getUserPrivileges(i,s){const u=(0,U.It)(i);return s&&(u.features.edit=!0),u}_fetchFallbackUserPrivileges(i){var s=this;return(0,M.A)(function*(){let u=!0;try{u=yield s._fetchUserHasEditingPrivileges(i)}catch(n){(0,E.QP)(n)}return{features:{edit:u,fullEdit:!1},content:{updateItem:!1}}})()}_fetchUserHasEditingPrivileges(i){var s=this;return(0,M.A)(function*(){const u=s.url?F.id?.findCredential(s.url):null;if(!u)return!0;const n=O.credential===u?O.user:yield s._fetchEditingUser(i);return O.credential=u,O.user=n,null==n?.privileges||n.privileges.includes("features:user:edit")})()}_fetchEditingUser(i){var s=this;return(0,M.A)(function*(){const u=s.portalItem?.portal?.user;if(u)return u;const n=F.id?.findServerInfo(s.url??"");if(!n?.owningSystemUrl)return null;const $=`${n.owningSystemUrl}/sharing/rest`,j=P.A.getDefault();if(j&&j.loaded&&(0,b.S8)(j.restUrl)===(0,b.S8)($))return j.user;const z=`${$}/community/self`,re=null!=i?i.signal:null,B=yield(0,_.Ke)((0,Z.A)(z,{authMode:"no-prompt",query:{f:"json"},signal:re}));return B.ok?C.A.fromJSON(B.value.data):null})()}read(i,s){s&&(s.layer=this),super.read(i,s)}write(i,s){const u=s?.portal,n=this.portalItem?.id&&(this.portalItem.portal||P.A.getDefault());return u&&n&&!(0,b.ut)(n.restUrl,u.restUrl)?(s.messages&&s.messages.push(new I.A("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(i,{...s,layer:this})}};return(0,o._)([(0,w.MZ)({type:l.default})],A.prototype,"portalItem",null),(0,o._)([(0,d.w)("web-document","portalItem",["itemId"])],A.prototype,"readPortalItem",null),(0,o._)([(0,L.K)("web-document","portalItem",{itemId:{type:String}})],A.prototype,"writePortalItem",null),(0,o._)([(0,w.MZ)({clonable:!1})],A.prototype,"resourceReferences",void 0),(0,o._)([(0,w.MZ)({type:Boolean,readOnly:!0})],A.prototype,"userHasEditingPrivileges",void 0),(0,o._)([(0,w.MZ)({type:Boolean,readOnly:!0})],A.prototype,"userHasFullEditingPrivileges",void 0),(0,o._)([(0,w.MZ)({type:Boolean,readOnly:!0})],A.prototype,"userHasUpdateItemPrivileges",void 0),A=(0,o._)([(0,v.$)("esri.layers.mixins.PortalLayer")],A),A},O={credential:null,user:null}},1151:(Q,G,t)=>{t.d(G,{J:()=>A});var M=t(10467),o=t(8189),F=(t(3248),t(35150)),Z=t(56492),_=t(85211),I=t(48669),p=(t(40707),t(76576)),E=t(50501),b=t(31178),w=t(48900),S=t(34703);const y=new b.A,d=new WeakMap;function P(i,s){return Number.isFinite(i)&&Number.isFinite(s)?s<=0?i:P(s,i%s):0}let l=0,C=0;function U(){const i=Date.now();let s=!1;for(const u of y){const n=u.deref();n?n.refreshInterval&&i-(d.get(n)??0)+5>=6e4*n.refreshInterval&&(d.set(n,i),n.refresh(i)):s=!0}if(s)for(let u=y.length-1;u>=0;u--)y.at(u).deref()||y.removeAt(u)}(0,S.fm)(()=>{const i=Date.now();let s=0;for(const u of y){const n=u.deref();n&&(s=P(Math.round(6e4*n.refreshInterval),s),n.refreshInterval?d.get(n)||d.set(n,i):d.delete(n))}if(s!==C){if(C=s,clearInterval(l),0===C)return void(l=0);l=setInterval(U,C)}},w.OH);const A=i=>{let s=class extends i{constructor(...u){super(...u),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=(0,Z.sg)(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||function v(i){(function D(i){return null!=i&&"object"==typeof i&&"refreshInterval"in i&&"refresh"in i})(i)&&y.push(new WeakRef(i))}(this)},()=>{})}destroy(){!function L(i){const s=y.find(u=>u.deref()===i);s&&y.remove(s)}(this)}castRefreshInterval(u){return u>=.1?u:u<=0?0:.1}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(u=Date.now()){(0,Z.QZ)(this._debounceHasDataChanged()).then(n=>{n&&this._set("refreshTimestamp",u),this.emit("refresh",{dataChanged:n})},n=>{F.A.getLogger(this).error(n),this.emit("refresh",{dataChanged:!1,error:n})})}hasDataChanged(){return(0,M.A)(function*(){return!0})()}get test(){}};return(0,o._)([(0,_.MZ)({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:E.K}}}}})],s.prototype,"refreshInterval",void 0),(0,o._)([(0,I.w)("refreshInterval")],s.prototype,"castRefreshInterval",null),(0,o._)([(0,_.MZ)({readOnly:!0})],s.prototype,"refreshTimestamp",void 0),(0,o._)([(0,_.MZ)({readOnly:!0})],s.prototype,"refreshParameters",null),s=(0,o._)([(0,p.$)("esri.layers.mixins.RefreshableLayer")],s),s}},33036:(Q,G,t)=>{t.d(G,{j:()=>I});var M=t(8189),o=t(85211),_=(t(3248),t(35150),t(40707),t(76576));const I=p=>{let E=class extends p{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const b={minScale:this.minScale,maxScale:this.maxScale},w=this.parent;w&&"effectiveScaleRange"in w&&function K(p,E){p.minScale=p.minScale>0?E.minScale>0?Math.min(p.minScale,E.minScale):p.minScale:E.minScale,p.maxScale=p.maxScale>0?E.maxScale>0?Math.max(p.maxScale,E.maxScale):p.maxScale:E.maxScale}(b,w.effectiveScaleRange);const S=this._get("effectiveScaleRange");return S&&S.minScale===b.minScale&&S.maxScale===b.maxScale?S:b}};return(0,M._)([(0,o.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],E.prototype,"minScale",void 0),(0,M._)([(0,o.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],E.prototype,"maxScale",void 0),(0,M._)([(0,o.MZ)({readOnly:!0})],E.prototype,"effectiveScaleRange",null),E=(0,M._)([(0,_.$)("esri.layers.mixins.ScaleRangeLayer")],E),E}},73258:(Q,G,t)=>{t.d(G,{A:()=>y});var M=t(5922),o=t(71065),N=t(35150),F=t(60797),Z=t(24098),_=t(86300),I=t(20543),K=t(22639),p=t(44549);const S=new Map;class y{static fromJSON(l){return new y(l.fields,l.timeZoneByFieldName)}static fromLayer(l){return new y(l.fields??[],D(l))}static fromLayerJSON(l){return new y(l.fields??[],D(l))}constructor(l=[],C){this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=l||[],this._timeZoneByFieldName=C?new Map(C):null;const U=[];for(const m of this.fields){const O=m?.name,T=v(O);if(O&&T){const A=d(O);this._fieldsMap.set(O,m),this._fieldsMap.set(A,m),this._normalizedFieldsMap.set(T,m),U.push(`${A}:${m.type}:${this._timeZoneByFieldName?.get(O)}`),(0,_.vE)(m)?(this.dateFields.push(m),this._dateFieldsSet.add(m)):(0,_.WA)(m)&&(this._numericFieldsSet.add(m),this.numericFields.push(m)),(0,_.te)(m)||(0,_.Xz)(m)||(m.editable=null==m.editable||!!m.editable,m.nullable=null==m.nullable||!!m.nullable)}}U.sort(),this.uid=U.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const l of this.fields)(0,_.te)(l)||(0,_.Xz)(l)||l.nullable||void 0!==(0,_.lD)(l)||this._requiredFields.push(l)}return this._requiredFields}equals(l){return this.uid===l?.uid}has(l){return null!=this.get(l)}get(l){if(!l)return;let C=this._fieldsMap.get(l);return C||(C=this._fieldsMap.get(d(l))??this._normalizedFieldsMap.get(v(l)),C&&this._fieldsMap.set(l,C),C)}getTimeZone(l){const C=this.get(l&&"string"!=typeof l?l.name:l);return C?this._timeZoneByFieldName?this._timeZoneByFieldName.get(C.name):"date"===C.type||"esriFieldTypeDate"===C.type?(N.A.getLogger("esri.layers.support.FieldsIndex").errorOnce(new M.A("getTimeZone:no-timezone-information",`no time zone information for field '${C.name}'`)),I.n$):L.has(C.type)?I.L5:null:null}getLuxonTimeZone(l){const C=this.getTimeZone(l);return C?C===I.L5?Z.GB.instance:C===I.n$?p.mQ.utcInstance:(0,F.tE)(S,C,()=>p.oh.create(C)):null}isDateField(l){return this._dateFieldsSet.has(this.get(l))}isTimeOnlyField(l){return(0,_.OH)(this.get(l))}isNumericField(l){return this._numericFieldsSet.has(this.get(l))}normalizeFieldName(l){return this.get(l)?.name??void 0}toJSON(){return{fields:this.fields.map(l=>o.A.isSerializable(l)?l.toJSON():l),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}function d(P){return P.trim().toLowerCase()}function v(P){return(0,_.rS)(P)?.toLowerCase()??""}const L=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function D(P){const l=new Map;if(!P.fields)return l;const C=!0===P.datesInUnknownTimezone,{timeInfo:U,editFieldsInfo:m}=P,O=(U?"startField"in U?U.startField:U.startTimeField:"")??"",T=(U?"endField"in U?U.endField:U.endTimeField:"")??"",A=function w(P){return"dateFieldsTimeZone"in P}(P)?P.dateFieldsTimeZone??null:P.dateFieldsTimeReference?(0,K.ZS)(P.dateFieldsTimeReference):null,i=m?function E(P){return"timeZone"in P}(m)?m.timeZone??A:m.dateFieldsTimeReference?(0,K.ZS)(m.dateFieldsTimeReference):A??I.n$:null,s=U?function b(P){return"timeZone"in P}(U)?U.timeZone??A:U.timeReference?(0,K.ZS)(U.timeReference):A:null,u=new Map([[d(m?.creationDateField??""),i],[d(m?.editDateField??""),i],[d(O),s],[d(T),s]]);for(const{name:n,type:$}of P.fields)if(L.has($))l.set(n,I.L5);else if("date"!==$&&"esriFieldTypeDate"!==$)l.set(n,null);else if(C)l.set(n,I.L5);else{const j=u.get(d(n??""))??A;l.set(n,j)}return l}},69927:(Q,G,t)=>{t.d(G,{It:()=>d,LG:()=>I,OM:()=>E,Sm:()=>b,Y:()=>K,bK:()=>p,mm:()=>y,sQ:()=>w});var M=t(10467),o=t(13970),N=t(32034),F=t(55039);function _(){return(_=(0,M.A)(function*(v){const L=v.spatialReference;if(L.isWGS84)return v.clone();if(L.isWebMercator)return(0,F.ci)(v);const D=N.A.WGS84;return yield(0,o.initializeProjection)(L,D),(0,o.project)(v,D)})).apply(this,arguments)}function I(v,L){if(!K(v,L)){const D=v.typeKeywords;D?D.push(L):v.typeKeywords=[L]}}function K(v,L){return!!v.typeKeywords?.includes(L)}function p(v){return K(v,y.HOSTED_SERVICE)}function E(v,L){const D=v.typeKeywords;if(D){const P=D.indexOf(L);P>-1&&D.splice(P,1)}}function b(v,L,D){D?I(v,L):E(v,L)}function w(v){return S.apply(this,arguments)}function S(){return S=(0,M.A)(function*(v){const L=v.clone().normalize();let D;if(L.length>1)for(const P of L)D?P.width>D.width&&(D=P):D=P;else D=L[0];return function Z(v){return _.apply(this,arguments)}(D)}),S.apply(this,arguments)}const y={DEVELOPER_BASEMAP:"DeveloperBasemap",GROUP_LAYER_MAP:"Map",HOSTED_SERVICE:"Hosted Service",JSAPI:"ArcGIS API for JavaScript",LOCAL_SCENE:"ViewingMode-Local",METADATA:"Metadata",MULTI_LAYER:"Multilayer",ORIENTED_IMAGERY_LAYER:"OrientedImageryLayer",SINGLE_LAYER:"Singlelayer",SUBTYPE_GROUP_LAYER:"SubtypeGroupLayer",SUBTYPE_GROUP_TABLE:"SubtypeGroupTable",TABLE:"Table",TILED_IMAGERY:"Tiled Imagery"};function d(v){const{portal:L,isOrgItem:D,itemControl:P}=v,l=L.user?.privileges;let C=!l||l.includes("features:user:edit"),U=!!D&&!!l?.includes("features:user:fullEdit");const m="update"===P||"admin"===P;return m?U=C=!0:U&&(C=!0),{features:{edit:C,fullEdit:U},content:{updateItem:m}}}},32117:(Q,G,t)=>{t.d(G,{$w:()=>L,Bu:()=>n,DW:()=>A,FH:()=>ee,FM:()=>K,G9:()=>F,GV:()=>P,Go:()=>E,K3:()=>W,Kn:()=>O,MM:()=>S,MO:()=>Me,Nl:()=>$,Ny:()=>l,O2:()=>j,UE:()=>z,YC:()=>Ie,YF:()=>B,ZO:()=>g,_1:()=>s,_H:()=>U,_W:()=>D,_d:()=>T,bs:()=>oe,dI:()=>Pe,e6:()=>b,gQ:()=>I,iA:()=>h,jn:()=>d,lW:()=>w,mA:()=>y,n5:()=>re,pM:()=>i,pV:()=>m,pk:()=>Le,rB:()=>_e,s4:()=>N,xo:()=>u,yH:()=>C,yX:()=>Ce,zb:()=>ne,zr:()=>v});var M=t(46988);function N(e,r,a,f){return function o(e){return"function"==typeof e}(e)?e(r,a,f):e}function F(e){return[e.r,e.g,e.b,e.a]}const Z=" /-,\n";function _(e){let r=e.length;for(;r--;)if(!Z.includes(e.charAt(r)))return!1;return!0}function I(e,r){const a=[];let f=0,R=-1;do{if(R=e.indexOf("[",f),R>=f){if(R>f){const c=e.slice(f,R);a.push([c,null,_(c)])}if(f=R+1,R=e.indexOf("]",f),R>=f){if(R>f){const c=r[e.slice(f,R)];c&&a.push([null,c,!1])}f=R+1}}}while(-1!==R);if(f<e.length){const c=e.slice(f);a.push([c,null,_(c)])}return a}function K(e,r,a,f){let R="",c=null;for(const q of r){const[J,X,k]=q;if(J)k?c=J:(c&&(R+=c,c=null),R+=J);else{let se=X;null!=a&&(se=Me(X,a));const H=e.attributes[se];H&&(c&&(R+=c,c=null),R+=H)}}return function p(e,r){switch("string"!=typeof e&&(e=String(e)),r){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}(R,f)}function E(e,r,a,f,R,c,q=!0){const J=r/R,X=a/c,k=Math.ceil(J/2),se=Math.ceil(X/2);for(let H=0;H<c;H++)for(let V=0;V<R;V++){const le=4*(V+(q?c-H-1:H)*R);let Y=0,ae=0,ce=0,ye=0,pe=0,fe=0,de=0;const he=(H+.5)*X;for(let ue=Math.floor(H*X);ue<(H+1)*X;ue++){const Ee=Math.abs(he-(ue+.5))/se,Oe=(V+.5)*J,Ae=Ee*Ee;for(let me=Math.floor(V*J);me<(V+1)*J;me++){let te=Math.abs(Oe-(me+.5))/k;const ie=Math.sqrt(Ae+te*te);ie>=-1&&ie<=1&&(Y=2*ie*ie*ie-3*ie*ie+1,Y>0&&(te=4*(me+ue*r),de+=Y*e[te+3],ce+=Y,e[te+3]<255&&(Y=Y*e[te+3]/250),ye+=Y*e[te],pe+=Y*e[te+1],fe+=Y*e[te+2],ae+=Y))}}f[le]=ye/ae,f[le+1]=pe/ae,f[le+2]=fe/ae,f[le+3]=de/ce}}function b(e){return e?[e[0],e[1],e[2],e[3]/255]:[0,0,0,0]}function w(e){return e.data?.symbol??null}function S(e){return"CIMVectorMarker"===e.type||"CIMPictureMarker"===e.type||"CIMBarChartMarker"===e.type||"CIMCharacterMarker"===e.type||"CIMPieChartMarker"===e.type||"CIMStackedBarChartMarker"===e.type}function y(e){return"CIMGradientStroke"===e.type||"CIMPictureStroke"===e.type||"CIMSolidStroke"===e.type}function d(e){return null!=e&&("CIMGradientFill"===e.type||"CIMHatchFill"===e.type||"CIMPictureFill"===e.type||"CIMSolidFill"===e.type||"CIMWaterFill"===e.type)}function v(e){return null!=e&&("CIMMarkerPlacementAlongLineRandomSize"===e.type||"CIMMarkerPlacementAlongLineSameSize"===e.type||"CIMMarkerPlacementAlongLineVariableSize"===e.type||"CIMMarkerPlacementAtExtremities"===e.type||"CIMMarkerPlacementAtMeasuredUnits"===e.type||"CIMMarkerPlacementAtRatioPositions"===e.type||"CIMMarkerPlacementOnLine"===e.type||"CIMMarkerPlacementOnVertices"===e.type)}const L=(e,r=0)=>null==e||isNaN(e)?r:e,D=(e,r)=>e??r,P=(e,r)=>e??r,l=e=>e.tintColor?b(e.tintColor):[255,255,255,1],C=e=>{if(!e)return!1;for(const r of e)switch(r.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function U(){return Promise.all([t.e(3930),t.e(2076),t.e(4108)]).then(t.bind(t,27815))}function m(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function O(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function T(e){let r="normal",a="normal";if(e){const f=e.toLowerCase();f.includes("italic")?r="italic":f.includes("oblique")&&(r="oblique"),f.includes("bold")?a="bold":f.includes("light")&&(a="lighter")}return{style:r,weight:a}}function A(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function i(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers)for(const r of e.symbolLayers){const a=i(r);if(null!=a)return a}break;case"CIMTextSymbol":return i(e.symbol);case"CIMSolidFill":return e.color}return null}function s(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const r=e.symbolLayers;if(r)for(const a of r){const f=s(a);if(null!=f)return f}break}case"CIMTextSymbol":return s(e.symbol);case"CIMSolidStroke":return e.color}}function u(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers)for(const r of e.symbolLayers){const a=u(r);if(void 0!==a)return a}break;case"CIMTextSymbol":return u(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}function n(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function $(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function j(e){return(e?Object.keys(e):[]).map(r=>({name:r,alias:r,type:"string"==typeof e[r]?"esriFieldTypeString":"esriFieldTypeDouble"}))}const z=e=>e.includes("data:image/svg+xml");function re(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function B(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}function ne(e,r,a,f,R,c,q=!0){const{infos:J}=c;let X=1,k=0,se=0,H=0,V=1;for(const{absoluteAnchorPoint:ae,offsetX:ce,offsetY:ye,rotation:pe,size:fe,frameHeight:de,rotateClockWise:he,scaleSymbolsProportionally:ue}of J)V=ae?1:X,se=Se(ce,ye,k,V,se),H=ve(ce,ye,k,V,H),de&&(ue||q)&&(X*=fe/de),k=ge(pe,he,k);const le=Se(f,R,k,V,se),Y=ve(f,R,k,V,H);return{size:e*X,rotation:ge(r,a,k),offsetX:le,offsetY:Y}}function g(e){if(null==e)return!1;if(Array.isArray(e))return e.every(r=>g(r));switch(typeof e){case"string":return!!e;case"number":return!isNaN(e)}}function h(e,r){if("color"===r||"outlinecolor"===r||"backgroundcolor"===r||"borderlinecolor"===r||"tintcolor"===r)return[...M.K[r]];const a=M.D[e];if(!a)throw new Error(`InternalError: default value for type ${e}.`);return a[r]}function W(e){return"string"==typeof e?function x(e){return e.split(" ").map(r=>Number(r))}(e):e}function ee(e){return e?.dashTemplate&&(e.dashTemplate=W(e.dashTemplate)),e}function oe(e){if(null==e)return"Normal";switch(e.type){case"CIMTextSymbol":return e.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const r=e.symbolLayers;if(!r)return"Normal";for(const a of r)if("CIMVectorMarker"===a.type)return oe(a)}break;case"CIMVectorMarker":{const r=e.markerGraphics;if(!r)return"Normal";for(const a of r)if(a.symbol)return oe(a.symbol)}}return"Normal"}function Ie(e){if(e)switch(e.type){case"CIMTextSymbol":return e.height;case"CIMPointSymbol":{let r=0;if(e.symbolLayers)for(const a of e.symbolLayers)if(a)switch(a.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const f=a.size??M.D.CIMVectorMarker.size;f>r&&(r=f);break}}return r}case"CIMLineSymbol":case"CIMPolygonSymbol":{let r=0;if(e.symbolLayers)for(const a of e.symbolLayers)if(a)switch(a.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const f=a.width;null!=f&&f>r&&(r=f);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(a.markerPlacement&&v(a.markerPlacement)){const f=a.size??M.D.CIMVectorMarker.size;f>r&&(r=f)}break;case"CIMPictureFill":{const f=a.height;null!=f&&f>r&&(r=f)}}return r}}}function Me(e,r){if(null!==r){const a=r.get(e);return a?a.name:e}return e}function Le(e){return e.map(r=>({...r,propertyName:B(r.propertyName)}))}function _e(e){const r={};for(const a in e){const f=e[a];r[B(a)]=f}return r}function ve(e,r,a,f,R){const c=a*Math.PI/180;if(c){const q=Math.cos(c);return(Math.sin(c)*e+q*r)*f+R}return r*f+R}function Se(e,r,a,f,R){const c=a*Math.PI/180;return c?(Math.cos(c)*e-Math.sin(c)*r)*f+R:e*f+R}function ge(e,r,a){return r?a-e:a+e}function Pe(e,r,a){const f="Color"===a||"TintColor"===a||"ToColor"===a,R="Rotation"===a||"Angle"===a||"ToRotation"===a;let c=r[B(a)];if(null!=c&&(f?c=[c[0]/255,c[1]/255,c[2]/255,c[3]/255]:R&&(c*=Math.PI/180)),null==c&&(c=h(r.type,a.toLowerCase()),null!=c&&(f?c=[c[0]/255,c[1]/255,c[2]/255,c[3]]:R&&(c*=Math.PI/180))),null!=r.primitiveName){const q=e[r.primitiveName];if(null!=q){const J=q[a];null==J||("string"==typeof J||"number"==typeof J||Array.isArray(J)?(c=J,null!=c&&(f?c=[c[0]/255,c[1]/255,c[2]/255,c[3]/255]:R&&(c*=Math.PI/180))):(c={valueExpressionInfo:J,defaultValue:c},null!=c&&(f?c={type:"Process",op:"ArcadeColor",value:c}:R&&(c={type:"Process",op:"Divide",left:c,right:180/Math.PI}))))}}if(null==c)throw new Error(`Failed to derive a value or an expression for "${a}".`);return c}function Ce(e,r){return Math.max(Math.min((e??r)/100,1),0)}},91644:(Q,G,t)=>{t.d(G,{A7:()=>K,Cx:()=>p,Hk:()=>E,JJ:()=>y,SF:()=>b,UK:()=>I,jM:()=>w,x3:()=>S}),t(3248);var o=t(88521),N=t(55417),F=t(46602),Z=t(47705),_=t(48254);const I=F.A.fromJSON(_.Cb),K=N.A.fromJSON(_.yM),p=o.A.fromJSON(_.WR),E=Z.A.fromJSON(_.JZ);function b(d){if(null==d)return null;switch(d.type){case"mesh":return null;case"point":case"multipoint":return I;case"polyline":return K;case"polygon":case"extent":return p}return null}const w=F.A.fromJSON(_.nC),S=N.A.fromJSON(_.HW),y=o.A.fromJSON(_.b6)},48254:(Q,G,t)=>{t.d(G,{Cb:()=>N,HW:()=>K,JR:()=>o,JZ:()=>_,WR:()=>Z,b6:()=>p,fT:()=>M,nC:()=>I,yM:()=>F});const M=[252,146,31,255],o=[153,153,153,255],N={type:"esriSMS",style:"esriSMSCircle",size:6,color:M,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},F={type:"esriSLS",style:"esriSLSSolid",width:.75,color:M},Z={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},_={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},I={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},K={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},p={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}}}]);