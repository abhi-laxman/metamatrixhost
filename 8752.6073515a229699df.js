"use strict";(self.webpackChunkAngularClient=self.webpackChunkAngularClient||[]).push([[8752],{89249:(U,f,i)=>{var c,t;i.d(f,{n:()=>c}),(t=c||(c={}))[t.ETC1_RGB=0]="ETC1_RGB",t[t.ETC2_RGBA=1]="ETC2_RGBA",t[t.BC1_RGB=2]="BC1_RGB",t[t.BC3_RGBA=3]="BC3_RGBA",t[t.BC4_R=4]="BC4_R",t[t.BC5_RG=5]="BC5_RG",t[t.BC7_M6_RGB=6]="BC7_M6_RGB",t[t.BC7_M5_RGBA=7]="BC7_M5_RGBA",t[t.PVRTC1_4_RGB=8]="PVRTC1_4_RGB",t[t.PVRTC1_4_RGBA=9]="PVRTC1_4_RGBA",t[t.ASTC_4x4_RGBA=10]="ASTC_4x4_RGBA",t[t.ATC_RGB=11]="ATC_RGB",t[t.ATC_RGBA=12]="ATC_RGBA",t[t.FXT1_RGB=17]="FXT1_RGB",t[t.PVRTC2_4_RGB=18]="PVRTC2_4_RGB",t[t.PVRTC2_4_RGBA=19]="PVRTC2_4_RGBA",t[t.ETC2_EAC_R11=20]="ETC2_EAC_R11",t[t.ETC2_EAC_RG11=21]="ETC2_EAC_RG11",t[t.RGBA32=13]="RGBA32",t[t.RGB565=14]="RGB565",t[t.BGR565=15]="BGR565",t[t.RGBA4444=16]="RGBA4444"},38752:(U,f,i)=>{i.r(f),i.d(f,{TextureCompressionWorkerOutput:()=>A,compress:()=>Q,compressRGBADataToKTX2:()=>P,createTextureDataKTX2:()=>v,initializeBasisEncoder:()=>F,initializeDXTEncoder:()=>M});var c=i(10467),t=i(90261);let w;var D=i(89249);let X;var d=i(50915);let K,L,R=null,h=null;class A{constructor(r,n){this.internalFormat=r,this.compressedTexture=n}}function Q(e){return p.apply(this,arguments)}function p(){return(p=(0,c.A)(function*(e){const r=function z(e,r=!1){const n=new OffscreenCanvas(e.width,e.height),s=n.getContext("2d");return r&&s.scale(1,-1),s.drawImage(e,0,r?-e.height:0),s.getImageData(0,0,n.width,n.height).data}(e.data,e.flipped);if(e.hasS3TC){h||(yield M());const n=new Uint8Array(r.length);h?.encode(new Uint8Array(r),e.width,e.height,n);const s=function tt(e,r){const n=new Int32Array(e.buffer,e.byteOffset,k);let s,u;switch(n[J]){case Y:s=8,u=d.CQ.COMPRESSED_RGB_S3TC_DXT1_EXT;break;case Z:s=16,u=d.CQ.COMPRESSED_RGBA_S3TC_DXT3_EXT;break;case q:s=16,u=d.CQ.COMPRESSED_RGBA_S3TC_DXT5_EXT;break;default:return null}let C=1,l=n[H],o=n[$];(3&l||3&o)&&(l=l+3&-4,o=o+3&-4);const a=l,G=o;let m,T;n[_]&N&&!1!==r&&(C=Math.max(1,n[j]));let B=e.byteOffset+n[W]+4;const b=[];for(let O=0;O<C;++O)T=(l+3>>2)*(o+3>>2)*s,m=new Uint8Array(e.buffer,B,T),b.push(m),B+=T,l=Math.max(1,l>>1),o=Math.max(1,o>>1);return{textureData:{type:"compressed",levels:b},internalFormat:u,width:a,height:G}}(n,!0),u=[n.buffer];return{result:new A(s?.internalFormat??null,s?.textureData??null),transferList:u}}if(e.hasETC){R||(yield F());const n=yield P(r,e.width,e.height,e.hasMipmap),s=n?yield v(n):null,u=s?.compressedTexture?.levels.map(C=>C.buffer)||[];return{result:new A(s?.internalFormat??null,s?.compressedTexture??null),transferList:u}}return{result:new A(null,null)}})).apply(this,arguments)}function F(){return y.apply(this,arguments)}function y(){return(y=(0,c.A)(function*(){R||(R=yield K??=function V(){return w??=(0,c.A)(function*(){const e=yield i.e(4308).then(i.bind(i,54308)),r=yield e.default({locateFile:n=>(0,t.s)(`esri/libs/basisu/${n}`)});return r.initializeBasis(),r})(),w}())})).apply(this,arguments)}function M(){return E.apply(this,arguments)}function E(){return(E=(0,c.A)(function*(){h||(h=yield L??=function I(){return X??=(0,c.A)(function*(){return yield(yield i.e(4106).then(i.bind(i,14106))).default({locateFile:r=>(0,t.s)(`esri/libs/dxtEncoder/${r}`)})})(),X}())})).apply(this,arguments)}function P(e,r,n,s){return g.apply(this,arguments)}function g(){return(g=(0,c.A)(function*(e,r,n,s,u=255,C=0,l=!1,o=!1){if(!R)return null;const a=new R.BasisEncoder;a.setPerceptual(!o),a.setCheckForAlpha(!0),a.setForceAlpha(!1),a.setRenormalize(o),a.setMipGen(s),a.setMipSRGB(!o),a.setCreateKTX2File(!0),a.setKTX2SRGBTransferFunc(!o),a.setQualityLevel(u),a.setCompressionLevel(C);const G=new Uint8Array(e.byteLength);a.setSliceSourceImage(0,new Uint8Array(e),r,n,l);const m=a.encode(G),T=new Uint8Array(G.buffer,0,m),B=new R.KTX2File(new Uint8Array(T));return B.isValid()?(a.delete(),T):(B.close(),B.delete(),a.delete(),null)})).apply(this,arguments)}function v(e){return x.apply(this,arguments)}function x(){return(x=(0,c.A)(function*(e){if(!R)return new A(null,null);const r=new R.KTX2File(new Uint8Array(e));r.startTranscoding();const[n,s]=r.getHasAlpha()?[D.n.ETC2_RGBA,d.CQ.COMPRESSED_RGBA8_ETC2_EAC]:[D.n.ETC1_RGB,d.CQ.COMPRESSED_RGB8_ETC2],u=r.getLevels(),C=[];for(let l=0;l<u;l++)C.push(new Uint8Array(r.getImageTranscodedSizeInBytes(l,0,0,n))),r.transcodeImage(C[l],l,0,0,n,0,-1,-1);return r.close(),r.delete(),{internalFormat:s,compressedTexture:{type:"compressed",levels:C}}})).apply(this,arguments)}const k=31,W=1,_=2,$=3,H=4,j=7,J=21,N=131072;function S(e){return e.charCodeAt(0)+(e.charCodeAt(1)<<8)+(e.charCodeAt(2)<<16)+(e.charCodeAt(3)<<24)}const Y=S("DXT1"),Z=S("DXT3"),q=S("DXT5")}}]);