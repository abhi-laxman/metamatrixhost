"use strict";(self.webpackChunkAngularClient=self.webpackChunkAngularClient||[]).push([[3414,1469],{83414:(ut,U,w)=>{w.r(U),w.d(U,{OperatorGeodeticArea:()=>Bt});var x=w(62257),A=w(95944),k=w(9279),o=w(3037),_=w(33165),D=w(87571),T=w(7085),W=w(83875),ct=w(80775),v=w(8189),X=w(23558);w(47402),w(1469),w(36656),Symbol;class mt{constructor(t,e,i,n,a=0,s=4){this.m_ptDistFrom=new _.P,this.m_segStartPt=new _.P,this.m_segEndPt=new _.P,this.m_geodeticLength=new o.E,this.m_az12=new o.E,this.m_minGeodeticDist=new o.E,this.m_segStartPt3d=new T.h,this.m_segEndPt3d=new T.h,this.m_sr=n,this.m_distCurveType=a,this.m_segCurveType=s,this.m_inputGCS=this.m_sr.getGCS(),this.m_rpu=this.m_inputGCS.getUnit().getUnitToBaseFactor(),this.m_bIsPannablePcs=2===this.m_sr.getCoordinateSystemType()&&this.m_sr.isPannable();const r=(0,o.G)();this.m_inputGCS.querySpheroidData(r),this.m_a=r.majorSemiAxis,this.m_eSquared=r.e2,this.setPointDistFrom(t),this.setSegmentEndPoints(e,i)}setSegmentEndPoints(t,e){this.m_segStartPt.assign(t),this.m_segEndPt.assign(e),this.m_bIsPannablePcs||(this.m_segStartPt.mulThis(this.m_rpu),this.m_segEndPt.mulThis(this.m_rpu)),2===this.m_segCurveType&&(this.m_segStartPt3d.assign((0,o.Q)(this.m_a,this.m_eSquared,this.m_segStartPt)),this.m_segEndPt3d.assign((0,o.Q)(this.m_a,this.m_eSquared,this.m_segEndPt))),this.calculateAndUpdateSegmentLength()}setPointDistFrom(t){this.m_ptDistFrom.assign(t),this.m_ptDistFrom.scale(this.m_rpu)}setSegmentCurveType(t){this.m_segCurveType=t}setDistanceCurveType(t){this.m_distCurveType=t}makeFunctor(){return t=>{let e;switch(this.m_segCurveType){case 0:case 1:case 3:{const i={stack:[],error:void 0,hasError:!1};try{const n=(0,v.b)(i,new o.E,!1),a=(0,v.b)(i,new o.E,!1);o.F.geodeticCoordinate(this.m_a,this.m_eSquared,this.m_segStartPt.x,this.m_segStartPt.y,this.m_geodeticLength.val*t,this.m_az12.val,n,a,this.m_segCurveType),e=new _.P(n.val,a.val);break}catch(n){i.error=n,i.hasError=!0}finally{(0,v.c)(i)}}case 2:{const i=T.h.lerp(this.m_segStartPt3d,this.m_segEndPt3d,t);e=(0,o.Y)(this.m_a,this.m_eSquared,i);break}case 4:e=_.P.lerp(this.m_segStartPt,this.m_segEndPt,t),this.m_bIsPannablePcs&&((0,o.S)(this.m_sr,0,[e],1),e.mulThis(this.m_rpu));break;default:(0,x.c)("Invalid curve type")}return o.F.geodeticDistance(this.m_a,this.m_eSquared,this.m_ptDistFrom.x,this.m_ptDistFrom.y,e.x,e.y,this.m_minGeodeticDist,null,null,this.m_distCurveType),this.m_minGeodeticDist.val}}calculateAndUpdateSegmentLength(){switch(this.m_segCurveType){case 0:case 2:case 1:case 3:o.F.geodeticDistance(this.m_a,this.m_eSquared,this.m_segStartPt.x,this.m_segStartPt.y,this.m_segEndPt.x,this.m_segEndPt.y,this.m_geodeticLength,this.m_az12,null,this.m_segCurveType);break;case 4:this.m_geodeticLength.val=_.P.distance(this.m_segStartPt,this.m_segEndPt);break;default:(0,x.c)("Invalid curve type")}}[Symbol.dispose](){this.m_geodeticLength[Symbol.dispose](),this.m_az12[Symbol.dispose](),this.m_minGeodeticDist[Symbol.dispose]()}}Symbol;class St{constructor(t,e,i,n,a=100){this.m_startPt=t.clone(),this.m_endPt=e.clone(),this.m_cE2=n,this.m_cE=Math.sqrt(this.m_cE2),this.m_c1By2e=1/(2*this.m_cE),this.m_cRpu=i.getGCS().getUnit().getUnitToBaseFactor(),this.isPcs=2===i.getCoordinateSystemType(),this.PEProjcs=i.getPECoordSys(),this.m_points=(0,_.d)(2*a,Number.NaN)}setSegmentEndPoints(t,e){this.m_startPt.assign(t),this.m_endPt.assign(e)}makeFunctor(){return t=>{const e=[0,0];e[0]=this.m_startPt.x*(1-t)+this.m_endPt.x*t,e[1]=this.m_startPt.y*(1-t)+this.m_endPt.y*t,this.isPcs&&o.Z.projToGeogCenter(this.PEProjcs,1,e,0);const i=Math.sin(e[1]*this.m_cRpu);return 0===this.m_cE2?i:-Math.log((1-this.m_cE*i)/(1+this.m_cE*i))*this.m_c1By2e+i/(1-this.m_cE2*i*i)}}}function ht(P,t,e,i,n){const a=(new k.O).execute(P,t,0,0,n);let s;s=i?(new o.v).execute(a,i,n):a;const r=1===e.getUnit().getUnitToBaseFactor()?Math.PI/180:1,m=new D.J;s.queryEnvelope(m);const h=new D.J,l=new D.J,u=new D.J;h.setCoords({xmin:m.xmin,ymin:75*r,xmax:m.xmax,ymax:90*r}),l.setCoords({xmin:m.xmin,ymin:-60*r,xmax:m.xmax,ymax:75*r}),u.setCoords({xmin:m.xmin,ymin:-90*r,xmax:m.xmax,ymax:-60*r}),h.inflateCoords(.01*h.width(),0),l.inflateCoords(.01*l.width(),0),u.inflateCoords(.01*u.width(),0);let c=0;return c+=it(s,h,e,n),c+=it(s,l,e,n),c+=it(s,u,e,n),c}function it(P,t,e,i){const n=(new W.O).execute(P,t,e,i);if(null!==n&&!n.isEmpty()){const a=new D.J;n.queryEnvelope(a);const{first:s,second:r}=function Tt(P,t,e){const i=function Gt(P,t,e){const i=P.getUnit().getUnitToBaseFactor(),n=t.getCenter();n.scale(180*i/Math.PI);const a=new _.P;a.x=0,a.y=0;let s=0;if(0===s){n.y>45?(a.y=_.l,s=0):n.y<-45?(a.y=-_.l,s=1):n.x>=45&&n.x<135?(a.x=_.l,s=2):n.x>=135||n.x<-135?(a.x=_.l,s=3):n.x<-45&&n.x>=-135?(a.x=-_.l,s=4):(a.x=0,s=5);const S=i*Math.sqrt((0,_.s)(t.xmin-t.xmax)+(0,_.s)(t.ymin-t.ymax)),f=a.clone(),G=t.getCenter();if(G.scale(i),s<2&&(f.x=G.x),_.P.distance(f,G)+.5*S>_.l)return null}const r=Q[s];if(null!==r&&r.getGCS().equalHorizontal(P))return r;const m=P.getText(),h=a.x,l=a.y;let p=0,g=-1;6!==s?g=o.a4.PE_PRJ_LAMBERT_AZIMUTHAL_EQAREA:((0,x.g)(e),p=0,g=o.a4.PE_PRJ_CYLINDRICAL_EQAREA);const d=(0,o.aw)("EqualAreaPCS");let y;g===o.a4.PE_PRJ_LAMBERT_AZIMUTHAL_EQAREA?y=`PROJCS["${d}",${m},PROJECTION["Lambert_Azimuthal_Equal_Area"],PARAMETER["False_Easting",0],PARAMETER["False_Northing",0],PARAMETER["Central_Meridian",${h}],PARAMETER["Latitude_of_Origin",${l}],UNIT["Meter",1.0]]`:g===o.a4.PE_PRJ_CYLINDRICAL_EQAREA?y=`PROJCS["${d}",${m},PROJECTION["Cylindrical_Equal_Area"],PARAMETER["False_Easting",0],PARAMETER["False_Northing",0],PARAMETER["Central_Meridian",${h}],PARAMETER["Standard_Parallel_1",${p}],PARAMETER["Latitude_of_Origin",${l}],UNIT["Meter",1.0]]`:(0,x.c)("getEqualAreaPcsFixed");const E=(0,o.b)(y);return Q[s]&&Q[s].destroy(),Q[s]=E,E}(P,t,e);if(null!==i)return(0,_.n)(i,!1);const n=P.getText(),a=P.getUnit().getUnitToBaseFactor(),s=(t.xmin+t.width()/2)*a,r=(t.ymin+t.height()/2)*a;let l=0,u=0,c=-1;t.ymin*a>=75*Math.PI/180||t.ymax*a<=-60*Math.PI/180?c=o.a4.PE_PRJ_LAMBERT_AZIMUTHAL_EQAREA:t.ymin>0||t.ymax<0?(l=(t.ymin+1/3*t.height())*a,u=(t.ymin+2/3*t.height())*a,c=o.a4.PE_PRJ_ALBERS):(l=(t.ymin+2/3*t.height())*a,c=o.a4.PE_PRJ_CYLINDRICAL_EQAREA);const p=(0,o.aw)("EqualAreaPCS");let g;return c===o.a4.PE_PRJ_LAMBERT_AZIMUTHAL_EQAREA?g=`PROJCS["${p}",${n},PROJECTION["Lambert_Azimuthal_Equal_Area"],PARAMETER["False_Easting",0],PARAMETER["False_Northing",0],PARAMETER["Central_Meridian",${s}],PARAMETER["Latitude_of_Origin",${r}],UNIT["Meter",1.0]]`:c===o.a4.PE_PRJ_ALBERS?g=`PROJCS["${p}",${n},PROJECTION["Albers"],PARAMETER["False_Easting",0],PARAMETER["False_Northing",0],PARAMETER["Central_Meridian",${s}],PARAMETER["Standard_Parallel_1",${l}],PARAMETER["Standard_Parallel_2",${u}],PARAMETER["Latitude_of_Origin",${r}],UNIT["Meter",1.0]]`:c===o.a4.PE_PRJ_CYLINDRICAL_EQAREA?g=`PROJCS["${p}",${n},PROJECTION["Cylindrical_Equal_Area"],PARAMETER["False_Easting",0],PARAMETER["False_Northing",0],PARAMETER["Central_Meridian",${s}],PARAMETER["Standard_Parallel_1",${l}],PARAMETER["Latitude_of_Origin",${r}],UNIT["Meter",1.0]]`:(0,x.c)("getEqualAreaPCSInstance"),(0,_.n)((0,o.b)(g),!0)}(e,a,!1),m=(0,o.p)(e,s,null),h=(new o.v).execute(n,m,i).calculateArea2D();return r&&s.destroy(),h}return 0}const Q=[null,null,null,null,null,null,null];class Rt{getOperatorType(){return 10314}supportsCurves(){return!0}accelerateGeometry(t,e,i){return!1}canAccelerateGeometry(t){return!1}execute(t,e,i){if(0===e.getCoordinateSystemType()&&(0,x.t)(""),t.isEmpty()||t.getDimension()<2)return 0;if((0,x.d)(t),t.getGeometryType()===x.G.enumEnvelope){const h=new A.a;return h.addEnvelope(t,!1),this.execute(h,e,i)}let n=t;t.getDescription().getAttributeCount()>1&&(n=t.clone(),n.dropAllAttributes());const a=(new k.O).execute(n,0,e.getTolerance(0),0,i);let s=null;const r=e.getGCS();r!==e&&(s=(0,o.p)(e,r));let m=(new o.g).execute(a,e,!1,i);return m.isEmpty()?0:(m===t&&(m=t.clone()),e.isPannable()?function ft(P,t,e){const i=new D.J;P.queryEnvelope(i);const n=(0,T.a)(t,i,!0).total(),a=t.getPannableExtent();a.xmin=i.xmin-10*n,a.xmax=i.xmax+10*n;const s=(new W.O).execute(P,a,t,e).getImpl().querySegmentIterator();s.stripAttributes();const r=(0,o.G)();t.querySpheroidData(r);const m=r.e2,h=0===m?2:1,l=new _.P(0,0),u=new _.P(0,0),c=new _.K(0),p=new St(l,u,t,m,100);for(;s.nextPath();)for(;s.hasNextSegment();){const d=s.nextSegment();l.assign(d.getStartXY()),u.assign(d.getEndXY()),p.setSegmentEndPoints(l,u);const y=(0,A.x)(6,0,1,1e-12,1e-15,p.makeFunctor());c.pe((u.x-l.x)*y)}const g=r.majorSemiAxis;return h*g*g*(1-m)*Math.PI*c.getResult()/t.getPannableExtent().width()}(m,e,i):function Et(P,t,e,i,n){const a=function Mt(P,t,e){const i=P.calculateLength2D(),n=(new ct.O).execute(P,t,e)/25e3,a=i/P.getSegmentCount()*2;let s=Math.min(a,i/n);return 0===s&&(s=1),(0,_.n)(s,i/s)}(P,t,n);let s=ht(P,a.first,e,i,n),r=1,m=0,h=0;do{if(r++,a.first*=.5,a.first<50*t.getTolerance(0))return s;a.second*=2,h=ht(P,a.first,e,i,n),m=Math.abs(h-s),s=h}while(Math.abs(s)>1&&m>1e-8*Math.abs(s)&&(a.second<65e3&&r<8||r<4));return h}(m,e,r,s,i))}}function nt(){return{m_p_PCS:new _.P,m_factor:Number.NaN,setValues:vt,assign:At}}function vt(P,t){this.m_factor=P,this.m_p_PCS.assign(t)}function At(P){this.m_factor=P.m_factor,this.m_p_PCS.assign(P.m_p_PCS)}class wt{constructor(t,e,i,n){this.m_ptStart=new T.h,this.m_ptEnd=new T.h,this.m_ptStart.assign(e),this.m_ptEnd.assign(i),this.m_deltaX=this.m_ptEnd.x-this.m_ptStart.x,this.m_deltaY=this.m_ptEnd.y-this.m_ptStart.y,this.m_e=Math.sqrt(t),this.m_e2=t,this.m_c1MinusE2=1-t;const a=Math.sin(n);let s;s=0===this.m_e2?2*a:a*((0,_.y)(this.m_e*a)+1/(1-this.m_e2*a*a)),this.m_baseA=s}setSegmentEndPoints(t,e){this.m_ptStart.assign(t),this.m_ptEnd.assign(e),this.m_deltaX=this.m_ptEnd.x-this.m_ptStart.x,this.m_deltaY=this.m_ptEnd.y-this.m_ptStart.y}makeFunctor(){return t=>{const e=1-t,i=e*this.m_ptStart.x+t*this.m_ptEnd.x,n=e*this.m_ptStart.y+t*this.m_ptEnd.y,a=e*this.m_ptStart.z+t*this.m_ptEnd.z,s=i*i+n*n,r=a/Math.sqrt(a*a+this.m_c1MinusE2*this.m_c1MinusE2*s);let m;return m=0===this.m_e2?2*r:r*((0,_.y)(this.m_e*r)+1/(1-this.m_e2*r*r)),(this.m_deltaY*i-this.m_deltaX*n)/s*(m-this.m_baseA)}}}function st(){return{sin_phi:Number.NaN,one_p_sin_phi:Number.NaN,one_m_sin_phi:Number.NaN,one_m_e_2_sin_2_phi:Number.NaN,sin_half_phi_pf:Number.NaN,sin_half_phi_pz:Number.NaN,sin_half_asin_e_sin_phi_pf:Number.NaN,sin_half_asin_e_sin_phi_pz:Number.NaN,atanh_sin_phi:Number.NaN,atanh_esin_phi:Number.NaN,make_negative:!1,initialize:Ct,changeSign:Dt,assign:It,clone:Nt}}function Ct(P,t,e,i){const n=.5*P;this.sin_phi=Math.sin(P);const a=t*this.sin_phi,s=.5*Math.asin(a);this.one_p_sin_phi=1+this.sin_phi,this.one_m_sin_phi=1-this.sin_phi,this.one_m_e_2_sin_2_phi=(1+a)*(1-a),this.sin_half_phi_pf=Math.sin(n+e),this.sin_half_phi_pz=Math.sin(n+i),this.sin_half_asin_e_sin_phi_pf=Math.sin(s+e),this.sin_half_asin_e_sin_phi_pz=Math.sin(s+i),this.atanh_sin_phi=Math.log(this.sin_half_phi_pf/this.sin_half_phi_pz),this.atanh_esin_phi=Math.log(this.sin_half_asin_e_sin_phi_pf/this.sin_half_asin_e_sin_phi_pz)}function Dt(){this.sin_phi=-this.sin_phi;let P=this.one_p_sin_phi;this.one_p_sin_phi=this.one_m_sin_phi,this.one_m_sin_phi=P,P=this.sin_half_phi_pf,this.sin_half_phi_pf=this.sin_half_phi_pz,this.sin_half_phi_pz=P,P=this.sin_half_asin_e_sin_phi_pf,this.sin_half_asin_e_sin_phi_pf=this.sin_half_asin_e_sin_phi_pz,this.sin_half_asin_e_sin_phi_pz=P,this.atanh_sin_phi=-this.atanh_sin_phi,this.atanh_esin_phi=-this.atanh_esin_phi}function It(P){this.sin_phi=P.sin_phi,this.one_p_sin_phi=P.one_p_sin_phi,this.one_m_sin_phi=P.one_m_sin_phi,this.one_m_e_2_sin_2_phi=P.one_m_e_2_sin_2_phi,this.sin_half_phi_pf=P.sin_half_phi_pf,this.sin_half_phi_pz=P.sin_half_phi_pz,this.sin_half_asin_e_sin_phi_pf=P.sin_half_asin_e_sin_phi_pf,this.sin_half_asin_e_sin_phi_pz=P.sin_half_asin_e_sin_phi_pz,this.atanh_sin_phi=P.atanh_sin_phi,this.atanh_esin_phi=P.atanh_esin_phi,this.make_negative=P.make_negative}function Nt(){return{...this}}class qt{constructor(t,e,i){this.m_transformPCS2GCS=null,this.m_scaleToRadians=new X.T,this.m_scaleToDegrees=new X.T,this.m_progressTracker=i,(0,x.g)(4!==e),this.m_curveType=e,this.m_inputSR=t,t&&0!==t.getCoordinateSystemType()||(0,x.t)(""),this.m_inputGCS=t.getGCS(),this.m_a=0,this.m_eSquared=0,this.m_b=0,this.m_rpu=0}executePolygonGeodeticArea(t){let e,i=t.clone();if(i.dropAllAttributes(),t.hasNonLinearSegments()&&(i=(new k.O).execute(i,0,this.m_inputSR.getTolerance(0),0,this.m_progressTracker)),this.m_inputSR.isPannable()){const s=new D.J;i.queryEnvelope(s);const r=this.m_inputSR.getPannableExtent();if(!r.containsEnvelope(s)){const m=r.getCenterX()-s.getCenterX(),h=new X.T;h.setShiftCoords(m,0),i.applyTransformation(h),s.move(m,0);const l=new _.E;r.queryIntervalX(l);const u=new _.E;s.queryIntervalX(u),i=l.contains(u)?(0,o.w)(i,this.m_inputSR):(new o.v).foldInto360RangeGeodetic(i,this.m_inputSR,this.m_curveType)}}if(this.m_transformPCS2GCS?(i=(new o.g).execute(i,this.m_inputSR,!1,this.m_progressTracker),e=i.createInstance(),(0,o.$)(this.m_transformPCS2GCS,i,e,this.m_progressTracker)||(e=(new o.v).execute(i,this.m_transformPCS2GCS,this.m_progressTracker))):e=(new o.g).execute(i,this.m_inputGCS,!1,this.m_progressTracker),e.isEmpty())return 0;if(1===this.m_curveType){const s=(0,o.G)();return this.m_inputGCS.querySpheroidData(s),this.m_a=s.majorSemiAxis,this.m_eSquared=s.e2,this.loxodromeArea(e)}const n=e.getImpl();this.m_rpu=this.m_inputGCS.getUnit().getUnitToBaseFactor(),this.m_scaleToRadians.setScale(this.m_rpu),n.applyTransformation(this.m_scaleToRadians),this.m_scaleToDegrees=this.m_scaleToRadians,this.m_scaleToDegrees.invertThis();const a=(0,o.G)();if(this.m_inputGCS.querySpheroidData(a),this.m_a=a.majorSemiAxis,this.m_b=a.minorSemiAxis,this.m_eSquared=a.e2,2===this.m_curveType)return this.executeClippedPolygonGreatEllipticArea(e);{const s={stack:[],error:void 0,hasError:!1};try{const r=o.ax.unit(9101),m=this.m_inputGCS.getPECoordSys(),h=(0,v.b)(s,m.cloneAlterUnits(r),!1);let l,u,c=this.executeClippedPolygonGeodeticArea(e,h,0),p=0;do{p++,l=this.executeClippedPolygonGeodeticArea(e,h,p),u=Math.abs(l-c),c=l}while(Math.abs(l)>1&&u>1e-8*Math.abs(l)&&p<7);return l}catch(r){s.error=r,s.hasError=!0}finally{(0,v.c)(s)}}}executeClippedPolygonGeodeticArea(t,e,i){const n={stack:[],error:void 0,hasError:!1};try{const a=new D.J;t.queryEnvelope(a);const s=(0,v.b)(n,this.getEqualAreaPCSInstance(e,a),!1),r=t.clone();(0,o.ay)(s,r);const m=50,h=r.getImpl().getAttributeStreamRef(0),l=t.getImpl().getAttributeStreamRef(0),u=(0,v.b)(n,new o.E,!1),c=(0,v.b)(n,new o.E,!1),p=40,g=[0,0],d=(0,_.p)(nt,p),y=(0,_.d)(p,-1),E=nt(),S=nt();let f,G;const M=s;let q=r.calculateArea2D();const N=new _.K(0),I=.5*Math.PI,Y=1e-10*Math.abs(q)+1e-6,z=t.getPathCount();let F,O,b,C;const R=new _.P,L=new _.P,H=new _.P,V=new _.P,j=new _.P,Z=new _.P;let _t,at;for(O=t.getPathStart(0),F=0;F<z;F++,O=b)for(b=t.getPathEnd(F),h.queryPoint2D(b-1<<1,H),l.queryPoint2D(b-1<<1,R),Math.abs(R.y)>I&&(R.y=(0,_.f)(I,R.y)),C=O;C<b;C++,H.assign(V),R.assign(L)){if(h.queryPoint2D(C<<1,V),l.queryPoint2D(C<<1,L),Math.abs(L.y)>I&&(L.y=(0,_.f)(I,L.y)),_t=_.P.distance(H,V),_t<m||0===R.y&&0===L.y)continue;o.F.geodeticDistance(this.m_a,this.m_eSquared,R.x,R.y,L.x,L.y,u,c,null,this.m_curveType);const Ft=u.val,Ot=c.val;for(E.setValues(0,H),S.setValues(1,V),G=i,d[0].assign(S),y[0]=i,f=0;f>=0;){at=.5*(E.m_factor+S.m_factor),o.F.geodeticCoordinate(this.m_a,this.m_eSquared,R.x,R.y,Ft*at,Ot,u,c,this.m_curveType),j.x=u.val,j.y=c.val,g[0]=j.x,g[1]=j.y,o.Z.geogToProj(M,1,g),Z.x=g[0],Z.y=g[1];const K=.5*-Z.offset(E.m_p_PCS,S.m_p_PCS)*_.P.distance(E.m_p_PCS,S.m_p_PCS);if(N.pe(K),Math.abs(K)>Y||Math.abs(K)>0&&G>0)S.setValues(at,Z),f++,d[f].assign(S),Math.abs(K)<=Y?(G--,y[f-1]=G,y[f]=G):(G=y[f-1],y[f]=G);else{if(f<=0)break;E.assign(S),f--,S.assign(d[f]),G=y[f]}}}return q+=N.getResult(),Math.abs(q)}catch(a){n.error=a,n.hasError=!0}finally{(0,v.c)(n)}}executeClippedPolygonGreatEllipticArea(t){const e=[],i=[],n=new _.P,a=new _.P,s=(0,o.Q)(1,this.m_eSquared,new _.P(0,.5*Math.PI)),r=new _.K(0),m=new _.K(0),h=new _.K(0),l=new T.h,u=new T.h,c=new D.J;t.queryLooseEnvelope(c);let p=0;c.containsCoords(c.xmin,0)||(p=Math.abs(c.ymin)<Math.abs(c.ymax)?c.ymin:c.ymax);const g=new wt(this.m_eSquared,l,u,p),d=this.m_a*this.m_a,y=t.getImpl().querySegmentIterator();for(y.stripAttributes();y.nextPath();)for(;y.hasNextSegment();){const E=y.nextSegment();n.assign(E.getStartXY()),a.assign(E.getEndXY()),a.x-n.x>Math.PI?n.x+=2*Math.PI:a.x-n.x<-Math.PI&&(a.x+=2*Math.PI),this.splitSegmentCrossingItegralThreshold(E,e,i);for(let S of e)l.assign((0,o.Q)(this.m_a,this.m_eSquared,S.getStartXY())),u.assign((0,o.Q)(this.m_a,this.m_eSquared,S.getEndXY())),g.setSegmentEndPoints(l,u),this.adaptiveIntegrationWithRomberg(g,r);for(let S of i){let f=S.getStartXY(),G=S.getEndXY(),M=p;f.y<0&&(G=(0,_.b)(f,f=G),f.y=-f.y,G.y=-G.y,M=-M);const q=(0,o.Q)(1,this.m_eSquared,f),N=(0,o.Q)(1,this.m_eSquared,G),I=Math.min(f.y,G.y),Y=(0,o.az)(this.m_eSquared,f.x,G.x,M,I);m.pe(Y);const z=Math.abs((0,o.az)(this.m_eSquared,f.x,G.x,I,_.l)),F=new T.h;F.setSub(q,s);const O=new T.h;O.setSub(N,s);const b=new T.h;b.setCrossProductVector(F,O);let C=d*(z-.5*b.length());C=(0,_.f)(C,G.x-f.x),h.pe(C)}e.length=0,i.length=0}return h.getResult()+d*(.5*(1-this.m_eSquared)*r.getResult()+m.getResult())}getEqualAreaPCSInstance(t,e){const i=e.getCenterX();let s,r;const m=e.height();let h,l;(h=e.ymin>45*Math.PI/180||e.ymax<45*-Math.PI/180)?s=(0,_.f)(.5*Math.PI,e.getCenterY()):(s=e.getCenterY(),r=e.ymin+m*(2/3));const u=(0,o.aw)("EqualAreaPCS"),c=t.toString();return l=o.ax.fromString(o.a4.PE_TYPE_PROJCS,h?`PROJCS["${u}", ${c}, PROJECTION["Lambert_Azimuthal_Equal_Area"],PARAMETER["False_Easting",0],PARAMETER["False_Northing", 0],PARAMETER["Central_Meridian", ${i}], PARAMETER["Latitude_of_Origin", ${s}], UNIT["Meter",1.0]]`:`PROJCS["${u}", ${c}, PROJECTION["Cylindrical_Equal_Area"],PARAMETER["False_Easting", 0],PARAMETER["False_Northing", 0],PARAMETER["Central_Meridian", ${i}],PARAMETER["Standard_Parallel_1", ${r}],PARAMETER["Latitude_of_Origin", ${s}],UNIT["Meter",1.0]]`),l}splitSegmentCrossingItegralThreshold(t,e,i){const r=(0,o.Q)(this.m_a,this.m_eSquared,new _.P(0,_.l)),m=(0,o.Q)(this.m_a,this.m_eSquared,new _.P(0,-_.l)),h=this.splitSegmentPassingThroughPole(t);for(let l of h){const u=l.getStartXY(),c=l.getEndXY(),p=(0,o.Q)(this.m_a,this.m_eSquared,u),g=(0,o.Q)(this.m_a,this.m_eSquared,c),d=new _.P,y=new T.h;let E=T.h.sqrDistance(r,p),S=T.h.sqrDistance(p,g);if(E<=100){if(!(S>400)){i.push(new A.L({start:u,end:c}));continue}y.assign(g.sub(p)),y.normalizeThis(),y.assign(p.add(y.mul(20))),d.assign((0,o.Y)(this.m_a,this.m_eSquared,y)),i.push(new A.L({start:u,end:d})),u.assign(d)}if(p.assign((0,o.Q)(this.m_a,this.m_eSquared,u)),E=T.h.sqrDistance(r,g),S=T.h.sqrDistance(p,g),E<=100){if(!(S>400)){i.push(new A.L({start:u,end:c}));continue}y.assign(g.sub(p)),y.normalizeThis(),y.assign(g.sub(y.mul(20))),d.assign((0,o.Y)(this.m_a,this.m_eSquared,y)),i.push(new A.L({start:d,end:c})),c.assign(d)}if(p.assign((0,o.Q)(this.m_a,this.m_eSquared,u)),g.assign((0,o.Q)(this.m_a,this.m_eSquared,c)),E=T.h.sqrDistance(m,p),S=T.h.sqrDistance(p,g),E<=100){if(!(S>400)){i.push(new A.L({start:u,end:c}));continue}y.assign(g.sub(p)),y.normalizeThis(),y.assign(p.add(y.mul(20))),d.assign((0,o.Y)(this.m_a,this.m_eSquared,y)),i.push(new A.L({start:u,end:d})),u.assign(d)}if(p.assign((0,o.Q)(this.m_a,this.m_eSquared,u)),g.assign((0,o.Q)(this.m_a,this.m_eSquared,c)),E=T.h.sqrDistance(m,g),S=T.h.sqrDistance(p,g),E<=100){if(!(S>400)){i.push(new A.L({start:u,end:c}));continue}y.assign(g.sub(p)),y.normalizeThis(),y.assign(g.sub(y.mul(20))),d.assign((0,o.Y)(this.m_a,this.m_eSquared,y)),i.push(new A.L({start:d,end:c})),c.assign(d)}e.push(new A.L({start:u,end:c}))}}splitSegmentPassingThroughPole(t){const e={stack:[],error:void 0,hasError:!1};try{const i=[],n=new T.h,a=new T.h,s=new T.h,r=new _.P,m=20,h=3.124139361,l=10,u=t.getStartXY(),c=t.getEndXY(),p=(0,v.b)(e,new o.E,!1);if(o.F.geodeticDistance(this.m_a,this.m_eSquared,u.x,u.y,c.x,c.y,p,null,null,2),Math.abs(c.x-u.x)>h&&p.val>m){const g=new mt(new _.P(0,90),u.divide(this.m_rpu),c.divide(this.m_rpu),this.m_inputGCS,2,2);let d=(0,o.U)(g.makeFunctor(),0,1,1e-10);if(d.second<=l&&d.first>0&&d.first<1)return n.assign((0,o.Q)(this.m_a,this.m_eSquared,u)),a.assign((0,o.Q)(this.m_a,this.m_eSquared,c)),(0,_.x)(n,a,d.first,s),r.assign((0,o.Y)(this.m_a,this.m_eSquared,s)),i.push(new A.L({start:u,end:r})),i.push(new A.L({start:r,end:c})),i;if(g.setPointDistFrom(new _.P(0,-90)),d=(0,o.U)(g.makeFunctor(),0,1,1e-10),d.second<=l&&d.first>0&&d.first<1)return n.assign((0,o.Q)(this.m_a,this.m_eSquared,u)),a.assign((0,o.Q)(this.m_a,this.m_eSquared,c)),(0,_.x)(n,a,d.first,s),r.assign((0,o.Y)(this.m_a,this.m_eSquared,s)),i.push(new A.L({start:u,end:r})),i.push(new A.L({start:r,end:c})),i}return i.push(new A.L({start:u,end:c})),i}catch(i){e.error=i,e.hasError=!0}finally{(0,v.c)(e)}}adaptiveIntegrationWithRomberg(t,e){const i=t.makeFunctor();let n=0,a=1,s=i(n),r=i(a);const m=1e-17,h=1e-14;let l=(n+a)/2,u=i(l),c=Math.abs(u-s),p=Math.abs(r-u),g=0;for(;g++<32&&(c/p<.1||p/c<.1);)c<p?(e.pe((0,A.x)(5,n,l,h,m,i)),n=l,s=u):(e.pe((0,A.x)(5,l,a,h,m,i)),a=l,r=u),l=(n+a)/2,u=Math.abs(i(l)),c=Math.abs(u-s),p=Math.abs(r-u);e.pe((0,A.x)(5,n,a,h,m,i))}loxodromeAreaHemi(t,e,i,n,a){const s=i.clone(),r=a.clone();let m,h,l,u,c,p,g,d,y,E,S,f,G,M,q,N;return s.make_negative&&s.changeSign(),r.make_negative&&r.changeSign(),S=n-e,1===Math.abs(s.sin_phi)||1===Math.abs(r.sin_phi)?t.half_qp*S:s.sin_phi===r.sin_phi?(E=.5*t.one_m_e_2*s.sin_phi*(1/s.one_m_e_2_sin_2_phi+(0,_.y)(t.e*s.sin_phi))*S,E):(q=Math.log(r.sin_half_phi_pf*s.sin_half_phi_pz/(r.sin_half_phi_pz*s.sin_half_phi_pf)),N=Math.log(r.sin_half_asin_e_sin_phi_pf*s.sin_half_asin_e_sin_phi_pz/(r.sin_half_asin_e_sin_phi_pz*s.sin_half_asin_e_sin_phi_pf)),1===this.m_eSquared?(c=0,m=.5*(q+r.sin_phi/r.one_m_e_2_sin_2_phi-s.sin_phi/s.one_m_e_2_sin_2_phi),h=0):(c=-2*t.atanh_e_over_e*(Math.log(r.one_p_sin_phi/s.one_p_sin_phi)-t.e*N),m=(q-t.e*N)/t.one_m_e_2,h=(Math.log(r.one_m_e_2_sin_2_phi/s.one_m_e_2_sin_2_phi)+c/t.atanh_e_over_e)/t.one_m_e_2),l=-N*(s.atanh_esin_phi+r.atanh_esin_phi),u=1/s.one_m_e_2_sin_2_phi-1/r.one_m_e_2_sin_2_phi,p=(0,_.z)(r.one_m_sin_phi/t.one_p_e,t.e)-(0,_.z)(s.one_m_sin_phi/t.one_p_e,t.e),g=(0,_.z)(r.one_p_sin_phi/t.one_p_e,t.e)-(0,_.z)(s.one_p_sin_phi/t.one_p_e,t.e),d=(0,_.z)(s.one_m_sin_phi/-t.one_m_e,t.e)-(0,_.z)(r.one_m_sin_phi/-t.one_m_e,t.e),y=(0,_.z)(s.one_p_sin_phi/-t.one_m_e,t.e)-(0,_.z)(r.one_p_sin_phi/-t.one_m_e,t.e),E=.25/m*(h+l+u+c+.5*(p+g+d+y)),E+=t.half_qp,f=.5*t.one_m_e_2*s.sin_phi*(1/s.one_m_e_2_sin_2_phi+(0,_.y)(t.e*s.sin_phi)),G=.5*t.one_m_e_2*r.sin_phi*(1/r.one_m_e_2_sin_2_phi+(0,_.y)(t.e*r.sin_phi)),G<f&&(M=f,f=G,G=M),E<f&&(E=f),E>G&&(E=G),E*=S,E)}loxodromeArea(t){const e=Math.PI/180;let i=0;const n=function bt(){return{e:Number.NaN,one_p_e:Number.NaN,one_m_e:Number.NaN,one_m_e_2:Number.NaN,atanh_e_over_e:Number.NaN,half_qp:Number.NaN,f:Number.NaN,z:Number.NaN}}(),a=st(),s=st();n.e=Math.sqrt(this.m_eSquared),n.one_p_e=1+n.e,n.one_m_e=1-n.e,n.one_m_e_2=1-this.m_eSquared,n.atanh_e_over_e=(0,_.y)(n.e),n.half_qp=this.m_eSquared>=1?1:.5*(1+n.atanh_e_over_e*n.one_m_e_2),n.f=.25*Math.PI,n.z=.75*Math.PI,s.initialize(0,n.e,n.f,n.z);const r=t.getPathCount(),m=new _.P,h=new _.P,l=t.getImpl().getAttributeStreamRef(0);for(let u=0;u<r;u++){const c=t.getPathStart(u),p=t.getPathEnd(u);if(!(p-c<=1)){l.queryPoint2D(2*(p-1),m);for(let g=c;g<p;g++){l.queryPoint2D(2*g,h);const d=m.y*e,y=h.y*e;if(g===c?(a.initialize(d,n.e,n.f,n.z),a.make_negative=!1):a.assign(s),s.initialize(y,n.e,n.f,n.z),s.make_negative=!1,m.y*h.y<0){if(m.y>=90&&h.y<=-90||h.y>=90&&m.y<=-90)return Number.NaN;const E=st();E.initialize(0,n.e,n.f,n.z),E.make_negative=!1;const S=a.atanh_sin_phi-n.e*a.atanh_esin_phi,f=s.atanh_sin_phi-n.e*s.atanh_esin_phi,G=(f*m.x-S*h.x)/(f-S);d<0?(a.make_negative=!0,i-=this.loxodromeAreaHemi(n,m.x*e,a,G*e,E),a.make_negative=!1,i+=this.loxodromeAreaHemi(n,G*e,E,h.x*e,s)):(i+=this.loxodromeAreaHemi(n,m.x*e,a,G*e,E),s.make_negative=!0,i-=this.loxodromeAreaHemi(n,G*e,E,h.x*e,s),s.make_negative=!1)}else m.y>=0?i+=this.loxodromeAreaHemi(n,m.x*e,a,h.x*e,s):(a.make_negative=!0,s.make_negative=!0,i-=this.loxodromeAreaHemi(n,m.x*e,a,h.x*e,s),a.make_negative=!1,s.make_negative=!1);m.assign(h)}}}return this.m_a*i*this.m_a}calculate(t){if(t.isEmpty()||t.getDimension()<2)return 0;if(t.getGeometryType()===x.G.enumEnvelope){const e=new A.a;return e.addEnvelope(t,!1),this.calculate(e)}return this.m_inputSR!==this.m_inputGCS&&null===this.m_transformPCS2GCS&&(this.m_transformPCS2GCS=(0,o.p)(this.m_inputSR,this.m_inputGCS,null)),this.executePolygonGeodeticArea(t)}}class Bt{getOperatorType(){return 10311}supportsCurves(){return!0}accelerateGeometry(t,e,i){return!1}canAccelerateGeometry(t){return!1}execute(t,e,i,n){return(0,x.d)(t),4===i?(new Rt).execute(t,e,n):new qt(e,i,n).calculate(t)}}},1469:(ut,U,w)=>{w.d(U,{G:()=>x,S:()=>k});class x{*[Symbol.iterator](){let _=this.next();for(;_;)yield _,_=this.next()}}class k extends x{constructor(_){super(),this.m_iGeom=-1,this.m_aGeoms=_?_.slice():[]}next(){if(this.m_iGeom<this.m_aGeoms.length-1){const _=this.m_aGeoms[++this.m_iGeom];return this.m_aGeoms[this.m_iGeom]=null,_}return null}tock(){return!1}getGeometryID(){return this.m_iGeom}getRank(){return 1}}}}]);