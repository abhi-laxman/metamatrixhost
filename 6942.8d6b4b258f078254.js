"use strict";(self.webpackChunkAngularClient=self.webpackChunkAngularClient||[]).push([[6942],{33087:(b,C,t)=>{t.d(C,{q:()=>g});var m=t(60611);class g{constructor(D,I){this._storage=new m.F,this.id="",this.name="",this.size=0,this._storage.maxSize=D,this._storage.register(this),I&&this._storage.registerRemoveFunc("",I)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(D,I,M=1){this._storage.put(this,D,I,M,1)}pop(D){return this._storage.pop(this,D)}get(D){return this._storage.get(this,D)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(D){this._storage.maxSize=D}resetHitRate(){}}},60611:(b,C,t)=>{t.d(C,{F:()=>M,Ti:()=>g});var m=t(12438);const g=-3,L=g-1;var D,z;(z=D||(D={}))[z.ALL=0]="ALL",z[z.SOME=1]="SOME";class M{get size(){return this._size}constructor(i=10485760){this._maxSize=i,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new m.A,this._users=new m.A}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear()}register(i){this._users.push(i)}deregister(i){this._users.removeUnordered(i)}registerRemoveFunc(i,s){this._removeFuncs.push([i,s])}deregisterRemoveFunc(i){this._removeFuncs.filterInPlace(s=>s[0]!==i)}get maxSize(){return this._maxSize}set maxSize(i){this._maxSize=Math.max(i,-1),this._checkSize()}getSize(i,s){return this._db.get(i.id+s)?.size??0}put(i,s,r,c,A){const h=this._db.get(s=i.id+s);if(h&&(this._size-=h.size,i.size-=h.size,this._db.delete(s),h.entry!==r&&this._notifyRemove(s,h.entry,h.size,D.ALL)),c>this._maxSize)return void this._notifyRemove(s,r,c,D.ALL);if(void 0===r)return void console.warn("Refusing to cache undefined entry ");if(!c||c<0)return console.warn(`Refusing to cache entry with size ${c} for key ${s}`),void this._notifyRemove(s,r,0,D.ALL);const v=1+Math.max(A,L)-g;this._db.set(s,new j(r,c,v)),this._size+=c,i.size+=c,this._checkSize()}updateSize(i,s,r,c){const A=this._db.get(s=i.id+s);if(A&&A.entry===r){for(this._size-=A.size,i.size-=A.size;c>this._maxSize;){const h=this._notifyRemove(s,r,c,D.SOME);if(!(null!=h&&h>0))return void this._db.delete(s);c=h}A.size=c,this._size+=c,i.size+=c,this._checkSize()}}pop(i,s){const r=this._db.get(s=i.id+s);if(r)return this._size-=r.size,i.size-=r.size,this._db.delete(s),++this._hit,r.entry;++this._miss}get(i,s){const r=this._db.get(s=i.id+s);if(void 0!==r)return this._db.delete(s),r.lives=r.lifetime,this._db.set(s,r),++this._hit,r.entry;++this._miss}peek(i,s){const r=this._db.get(i.id+s);return r?++this._hit:++this._miss,r?.entry}get performanceInfo(){const i={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},s={},r=new Array;this._db.forEach((h,v)=>{const T=h.lifetime;r[T]=(r[T]||0)+h.size,this._users.forAll(R=>{const{id:x,name:n}=R;v.startsWith(x)&&(s[n]=(s[n]||0)+h.size)})});const c={};this._users.forAll(h=>{const v=h.name;"hitRate"in h&&"number"==typeof h.hitRate&&!isNaN(h.hitRate)&&h.hitRate>0?(s[v]=s[v]||0,c[v]=Math.round(100*h.hitRate)+"%"):c[v]="0%"});const A=Object.keys(s);A.sort((h,v)=>s[v]-s[h]),A.forEach(h=>i[h]=Math.round(s[h]/2**20)+"MB / "+c[h]);for(let h=r.length-1;h>=0;--h){const v=r[h];v&&(i["Priority "+(h+g-1)]=Math.round(v/this._size*100)+"%")}return i}resetStats(){this._hit=this._miss=0,this._users.forAll(i=>i.resetHitRate())}clear(i){const s=i.id;this._db.forEach((r,c)=>{c.startsWith(s)&&(this._size-=r.size,this._db.delete(c),this._notifyRemove(c,r.entry,r.size,D.ALL))}),i.size=0}clearAll(){this._db.forEach((i,s)=>this._notifyRemove(s,i.entry,i.size,D.ALL)),this._users.forAll(i=>i.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(i,s,r,c){let A;return this._removeFuncs.some(h=>{if(i.startsWith(h[0])){const v=h[1](s,c,r);return"number"==typeof v&&(A=v),!0}return!1}),A}_checkSize(){this._users.forAll(i=>this._checkSizeLimits(i)),this._checkSizeLimits()}_checkSizeLimits(i){const s=i??this;if(s.maxSize<0||s.size<=s.maxSize)return;const r=i?.id;let c=!0;for(;c;){c=!1;for(const[A,h]of this._db)if(0===h.lifetime&&(!r||A.startsWith(r))){if(this._purgeItem(A,h,i),s.size<=.9*s.maxSize)return;c||=this._db.has(A)}}for(const[A,h]of this._db)if((!r||A.startsWith(r))&&(this._purgeItem(A,h,i),s.size<=.9*s.maxSize))return}_purgeItem(i,s,r=this._users.find(c=>i.startsWith(c.id))){if(this._db.delete(i),s.lives<=1){this._size-=s.size,r&&(r.size-=s.size);const c=this._notifyRemove(i,s.entry,s.size,D.SOME);null!=c&&c>0&&(this._size+=c,r&&(r.size+=c),s.lives=s.lifetime,s.size=c,this._db.set(i,s))}else--s.lives,this._db.set(i,s)}}class j{constructor(i,s,r){this.entry=i,this.size=s,this.lifetime=r,this.lives=r}}},79122:(b,C,t)=>{t.d(C,{A:()=>S});var y,m=t(10467),g=t(8189),L=t(49976),D=t(77806),I=t(35150),M=t(85211),B=t(48669),j=t(15463),z=t(17221),i=t(76576),s=t(50305),r=t(55739),c=t(86300),A=t(38582),h=t(18550),v=t(19390),T=t(36345),R=t(23005),x=t(48218),n=t(94048);const l="percent-of-total",p="field",u=new L.J({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:l,esriNormalizeByField:p}),P=(0,r.dp)(v.A);let d=y=class extends((0,h.h)(A.A)){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,a,o){if(!Array.isArray(e))return;let _=a.minValue;return e.map(O=>{const f=new v.A;return f.read(O,o),null==f.minValue&&(f.minValue=_),null==f.maxValue&&(f.maxValue=f.minValue),_=f.maxValue,f})}writeClassBreakInfos(e,a,o,_){const O=e.map(f=>f.write({},_));this._areClassBreaksConsecutive()&&O.forEach(f=>delete f.classMinValue),a[o]=O}castField(e){return null==e?e:"function"==typeof e?(I.A.getLogger(this).error(".field: field must be a string value"),null):(0,r.GX)(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const a=!!this.normalizationField,o=null!=this.normalizationTotal;return a||o?(e=a&&p||o&&l||null,a&&o&&I.A.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):e!==p&&e!==l||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,a,o){let _=null;_="number"==typeof e?new v.A({minValue:e,maxValue:a,symbol:(0,n.dp)(o)}):P((0,D.o8)(e)),this.classBreakInfos.push(_),1===this.classBreakInfos.length&&this.notifyChange("minValue")}removeClassBreakInfo(e,a){const o=this.classBreakInfos.length;for(let _=0;_<o;_++){const O=[this.classBreakInfos[_].minValue,this.classBreakInfos[_].maxValue];if(O[0]===e&&O[1]===a){this.classBreakInfos.splice(_,1);break}}}getBreakIndex(e,a){return this.valueExpression&&null==a?.arcade&&I.A.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(e,a):this._getBreakIndexForField(e)}getClassBreakInfo(e,a){var o=this;return(0,m.A)(function*(){let _=a;o.valueExpression&&null==a?.arcade&&(_={..._,arcade:yield(0,x.lw)()});const O=o.getBreakIndex(e,_);return-1!==O?o.classBreakInfos[O]:null})()}getSymbol(e,a){if(this.valueExpression&&null==a?.arcade)return void I.A.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const o=this.getBreakIndex(e,a);return o>-1?this.classBreakInfos[o].symbol:this.defaultSymbol}getSymbolAsync(e,a){var o=this;return(0,m.A)(function*(){let _=a;if(o.valueExpression&&null==a?.arcade){const f=yield(0,x.lw)(),{arcadeUtils:U}=f;U.hasGeometryOperations(o.valueExpression)&&(yield U.enableGeometryOperations()),_={..._,arcade:f}}const O=o.getBreakIndex(e,_);return O>-1?o.classBreakInfos[O].symbol:o.defaultSymbol})()}get symbols(){const e=[];return this.classBreakInfos.forEach(a=>{a.symbol&&e.push(a.symbol)}),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables?.reduce((e,a)=>e+a.getAttributeHash(),"")??""}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),a=JSON.stringify(this.defaultSymbol),o=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${e}.${a}.${this.classBreakInfos.reduce((_,O)=>_+O.getMeshHash(),"")}.${o}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new y({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol?.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol?.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:(0,D.o8)(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:(0,D.o8)(this.visualVariables),legendOptions:(0,D.o8)(this.legendOptions),authoringInfo:(0,D.o8)(this.authoringInfo)})}collectRequiredFields(e,a){var o=this;return(0,m.A)(function*(){const _=[o.collectVVRequiredFields(e,a),o.collectSymbolFields(e,a)];yield Promise.all(_)})()}collectSymbolFields(e,a){var o=this;return(0,m.A)(function*(){const _=[...o.symbols.map(O=>O.collectRequiredFields(e,a)),(0,c.Dx)(e,a,o.valueExpression)];(0,c.rq)(e,a,o.field),(0,c.rq)(e,a,o.normalizationField),yield Promise.all(_)})()}_getBreakIndexForExpression(e,a){const{viewingMode:o,scale:_,spatialReference:O,arcade:f,timeZone:U}=a??{},{valueExpression:K}=this;let V=this._compiledValueExpression.valueExpression===K?this._compiledValueExpression.compiledFunction:null;const W=f.arcadeUtils;if(!V){const w=W.createSyntaxTree(K);V=W.createFunction(w),this._compiledValueExpression.compiledFunction=V}this._compiledValueExpression.valueExpression=K;const F=W.executeFunction(V,W.createExecContext(e,W.getViewInfo({viewingMode:o,scale:_,spatialReference:O}),U));return this._getBreakIndexfromInfos(F)}_getBreakIndexForField(e){const o=e.attributes,_=this.normalizationType;let O=parseFloat(o[this.field]);if(_){const f=this.normalizationTotal,U=parseFloat(this.normalizationField?o[this.normalizationField]:void 0);if("log"===_)O=Math.log(O)*Math.LOG10E;else if(_!==l||null==f||isNaN(f)){if(_===p&&!isNaN(U)){if(isNaN(O)||isNaN(U))return-1;O/=U}}else O=O/f*100}return this._getBreakIndexfromInfos(O)}_getBreakIndexfromInfos(e){const a=this.isMaxInclusive;if(null!=e&&"number"==typeof e&&!isNaN(e))for(let o=0;o<this.classBreakInfos.length;o++){const _=[this.classBreakInfos[o].minValue,this.classBreakInfos[o].maxValue];if(_[0]<=e&&(a?e<=_[1]:e<_[1]))return o}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,a=e.length;for(let o=1;o<a;o++)if(e[o-1].maxValue!==e[o].minValue)return!1;return!0}};(0,g._)([(0,M.MZ)(T.As)],d.prototype,"backgroundFillSymbol",void 0),(0,g._)([(0,M.MZ)({type:[v.A],json:{write:{isRequired:!0}}})],d.prototype,"classBreakInfos",void 0),(0,g._)([(0,z.w)("classBreakInfos")],d.prototype,"readClassBreakInfos",null),(0,g._)([(0,s.K)("classBreakInfos")],d.prototype,"writeClassBreakInfos",null),(0,g._)([(0,M.MZ)({type:String,json:{write:!0}})],d.prototype,"defaultLabel",void 0),(0,g._)([(0,M.MZ)(T.z4)],d.prototype,"defaultSymbol",void 0),(0,g._)([(0,M.MZ)({type:String,json:{write:!0}})],d.prototype,"field",void 0),(0,g._)([(0,B.w)("field")],d.prototype,"castField",null),(0,g._)([(0,M.MZ)({type:Boolean})],d.prototype,"isMaxInclusive",void 0),(0,g._)([(0,M.MZ)({type:R.A,json:{write:!0}})],d.prototype,"legendOptions",void 0),(0,g._)([(0,M.MZ)({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],d.prototype,"minValue",null),(0,g._)([(0,M.MZ)({type:String,json:{write:!0}})],d.prototype,"normalizationField",void 0),(0,g._)([(0,M.MZ)({type:Number,json:{write:!0}})],d.prototype,"normalizationTotal",void 0),(0,g._)([(0,M.MZ)({type:u.apiValues,value:null,json:{type:u.jsonValues,read:u.read,write:u.write}})],d.prototype,"normalizationType",null),(0,g._)([(0,j.e)({classBreaks:"class-breaks"})],d.prototype,"type",void 0),(0,g._)([(0,M.MZ)({type:String,json:{write:!0}})],d.prototype,"valueExpression",void 0),(0,g._)([(0,M.MZ)({type:String,json:{write:!0}})],d.prototype,"valueExpressionTitle",void 0),d=y=(0,g._)([(0,i.$)("esri.renderers.ClassBreaksRenderer")],d);const S=d},73747:(b,C,t)=>{t.d(C,{A:()=>A});var r,m=t(10467),g=t(8189),L=t(77806),D=t(85211),B=(t(3248),t(35150),t(15463)),j=t(76576),z=t(38582),i=t(18550),s=t(36345);let c=r=class extends((0,i.h)(z.A)){constructor(h){super(h),this.description=null,this.label=null,this.symbol=null,this.type="simple"}collectRequiredFields(h,v){var T=this;return(0,m.A)(function*(){yield Promise.all([T.collectSymbolFields(h,v),T.collectVVRequiredFields(h,v)])})()}collectSymbolFields(h,v){var T=this;return(0,m.A)(function*(){yield Promise.all(T.symbols.map(R=>R.collectRequiredFields(h,v)))})()}getSymbol(h,v){return this.symbol}getSymbolAsync(h,v){var T=this;return(0,m.A)(function*(){return T.symbol})()}get symbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables?.reduce((h,v)=>h+v.getAttributeHash(),"")??""}getMeshHash(){return this.symbols.reduce((h,v)=>h+JSON.stringify(v),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new r({description:this.description,label:this.label,symbol:(0,L.o8)(this.symbol),visualVariables:(0,L.o8)(this.visualVariables),authoringInfo:(0,L.o8)(this.authoringInfo)})}};(0,g._)([(0,D.MZ)({type:String,json:{write:!0}})],c.prototype,"description",void 0),(0,g._)([(0,D.MZ)({type:String,json:{write:!0}})],c.prototype,"label",void 0),(0,g._)([(0,D.MZ)(s.Wp)],c.prototype,"symbol",void 0),(0,g._)([(0,B.e)({simple:"simple"})],c.prototype,"type",void 0),c=r=(0,g._)([(0,j.$)("esri.renderers.SimpleRenderer")],c);const A=c},19390:(b,C,t)=>{t.d(C,{A:()=>s});var z,m=t(8189),g=t(71065),L=t(85211),B=(t(3248),t(35150),t(40707),t(76576)),j=t(36345);let i=z=class extends g.A{constructor(r){super(r),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new z({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?.clone()??null})}getMeshHash(){const r=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${r}`}};(0,m._)([(0,L.MZ)({type:String,json:{write:!0}})],i.prototype,"description",void 0),(0,m._)([(0,L.MZ)({type:String,json:{write:!0}})],i.prototype,"label",void 0),(0,m._)([(0,L.MZ)({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],i.prototype,"minValue",void 0),(0,m._)([(0,L.MZ)({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],i.prototype,"maxValue",void 0),(0,m._)([(0,L.MZ)(j.Wp)],i.prototype,"symbol",void 0),i=z=(0,m._)([(0,B.$)("esri.renderers.support.ClassBreakInfo")],i);const s=i},78592:(b,C,t)=>{t.d(C,{O3:()=>z,PU:()=>B,YW:()=>s,ex:()=>I,hv:()=>i,zp:()=>M});var m=t(69287),g=t(67685),L=t(53781),D=t(89141);const I=2.4;function M(r){return(0,g.PN)(r*I)}function B(r){return(0,g.Lz)(r)/I}function j(r,c,A,h){let{color:v,ratio:T}=c,{color:R,ratio:x}=A;x===T&&(1===x?T-=1e-6:x+=1e-6);const n=(0,m.qE)((h-T)/(x-T),0,1);(0,L.l)(r,v.toArray(),R.toArray(),n)}function z(r){const A=new Uint8ClampedArray(2048);if((r=r.filter(({ratio:x})=>x>=0&&x<=1).sort((x,n)=>x.ratio-n.ratio).map(({color:x,ratio:n})=>({color:x,ratio:Math.max(n,.001)}))).length<1)return A;let h=r[0],v=r[0],T=1;const R=(0,D.vt)();for(let x=0;x<512;x++){const n=(x+.5)/512;for(;n>v.ratio&&T<r.length;)h=v,v=r[T++];j(R,h,v,n),A.set(R,4*x)}return A}function i(r,c,A){const h=Math.sqrt(r**2+c**2)/A;return h>1?0:3/(Math.PI*A**2)*(1-h**2)**2}function s(r){return"function"==typeof r?r:r?c=>+c[r]:()=>1}},85718:(b,C,t)=>{t.d(C,{L:()=>M,r:()=>D});var m=t(96996),g=t(71224),L=t(31595);function D(B,j){return M(B,null,j)}const I=(0,g.C)({types:L.Hg});function M(B,j,z){return B?B&&(B.styleName||B.styleUrl)&&"uniqueValue"!==B.type?(z?.messages&&z.messages.push(new m.A("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+B.type+"'",{definition:B,context:z})),null):I(B,j,z):null}},93327:(b,C,t)=>{t.d(C,{A:()=>x});var v,m=t(8189),g=t(81098),L=t(49976),D=t(71065),I=t(77806),M=t(85211),z=(t(3248),t(35150),t(17221)),i=t(76576),s=t(50305),r=t(32034),c=t(61320),A=t(6434),h=t(29141);const T=new L.J({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let R=v=class extends D.A{constructor(n){super(n),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(n,y){return this.readFeaturesWithClass(n,y,g.A)}writeGeometryType(n,y,E,l){if(n)return void T.write(n,y,E,l);const{features:p}=this;if(p)for(const u of p)if(null!=u?.geometry)return void T.write(u.geometry.type,y,E,l)}readQueryGeometry(n,y){if(!n)return null;const E=!!n.spatialReference,l=(0,c.rS)(n);return l&&!E&&y.spatialReference&&(l.spatialReference=r.A.fromJSON(y.spatialReference)),l}writeSpatialReference(n,y){if(n)return void(y.spatialReference=n.toJSON());const{features:E}=this;if(E)for(const l of E)if(l&&null!=l.geometry&&l.geometry.spatialReference)return void(y.spatialReference=l.geometry.spatialReference.toJSON())}clone(){return new v(this.cloneProperties())}cloneProperties(){return(0,I.o8)({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(n){const y=this.write();if(y.features&&Array.isArray(n)&&n.length>0)for(let E=0;E<y.features.length;E++){const l=y.features[E];if(l.geometry){const p=n?.[E];l.geometry=p?.toJSON()||l.geometry}}return y}quantize(n){const{scale:[y,E],translate:[l,p]}=n,d=this.features,S=this._getQuantizationFunction(this.geometryType,e=>Math.round((e-l)/y),e=>Math.round((p-e)/E));for(let e=0,a=d.length;e<a;e++)S?.(d[e].geometry)||(d.splice(e,1),e--,a--);return this.transform=n,this}unquantize(){const{geometryType:n,features:y,transform:E}=this;if(!E)return this;const{translate:[l,p],scale:[u,P]}=E;let e=null,a=null;if(this.hasZ&&null!=E?.scale?.[2]){const{translate:[,,_],scale:[,,O]}=E;e=f=>f*O+_}if(this.hasM&&null!=E?.scale?.[3]){const{translate:[,,,_],scale:[,,,O]}=E;a=f=>null==f?f:f*O+_}const o=this._getHydrationFunction(n,_=>_*u+l,_=>p-_*P,e,a);for(const{geometry:_}of y)null!=_&&o&&o(_);return this.transform=null,this}readFeaturesWithClass(n,y,E){const l=r.A.fromJSON(y.spatialReference),p=[];for(let u=0;u<n.length;u++){const P=n[u],d=E.fromJSON(P),S=P.geometry?.spatialReference;null==d.geometry||S||(d.geometry.spatialReference=l);const e=P.aggregateGeometries,a=d.aggregateGeometries;if(e&&null!=a)for(const o in a){const _=a[o],O=e[o],f=O?.spatialReference;null==_||f||(_.spatialReference=l)}p.push(d)}return p}_quantizePoints(n,y,E){let l,p;const u=[];for(let P=0,d=n.length;P<d;P++){const S=n[P];if(P>0){const e=y(S[0]),a=E(S[1]);e===l&&a===p||(u.push([e-l,a-p]),l=e,p=a)}else l=y(S[0]),p=E(S[1]),u.push([l,p])}return u.length>0?u:null}_getQuantizationFunction(n,y,E){return"point"===n?l=>(l.x=y(l.x),l.y=E(l.y),l):"polyline"===n||"polygon"===n?l=>{const p=(0,c.Bi)(l)?l.rings:l.paths,u=[];for(let P=0,d=p.length;P<d;P++){const e=this._quantizePoints(p[P],y,E);e&&u.push(e)}return u.length>0?((0,c.Bi)(l)?l.rings=u:l.paths=u,l):null}:"multipoint"===n?l=>{const p=this._quantizePoints(l.points,y,E);return p&&p.length>0?(l.points=p,l):null}:"extent"===n?l=>l:null}_getHydrationFunction(n,y,E,l,p){return"point"===n?u=>{u.x=y(u.x),u.y=E(u.y),l&&(u.z=l(u.z))}:"polyline"===n||"polygon"===n?u=>{const P=(0,c.Bi)(u)?u.rings:u.paths;let d,S;for(let e=0,a=P.length;e<a;e++){const o=P[e];for(let _=0,O=o.length;_<O;_++){const f=o[_];_>0?(d+=f[0],S+=f[1]):(d=f[0],S=f[1]),f[0]=y(d),f[1]=E(S)}}if(l&&p)for(let e=0,a=P.length;e<a;e++){const o=P[e];for(let _=0,O=o.length;_<O;_++){const f=o[_];f[2]=l(f[2]),f[3]=p(f[3])}}else if(l)for(let e=0,a=P.length;e<a;e++){const o=P[e];for(let _=0,O=o.length;_<O;_++){const f=o[_];f[2]=l(f[2])}}else if(p)for(let e=0,a=P.length;e<a;e++){const o=P[e];for(let _=0,O=o.length;_<O;_++){const f=o[_];f[2]=p(f[2])}}}:"extent"===n?u=>{u.xmin=y(u.xmin),u.ymin=E(u.ymin),u.xmax=y(u.xmax),u.ymax=E(u.ymax),l&&null!=u.zmax&&null!=u.zmin&&(u.zmax=l(u.zmax),u.zmin=l(u.zmin)),p&&null!=u.mmax&&null!=u.mmin&&(u.mmax=p(u.mmax),u.mmin=p(u.mmin))}:"multipoint"===n?u=>{const P=u.points;let d,S;for(let e=0,a=P.length;e<a;e++){const o=P[e];e>0?(d+=o[0],S+=o[1]):(d=o[0],S=o[1]),o[0]=y(d),o[1]=E(S)}if(l&&p)for(let e=0,a=P.length;e<a;e++){const o=P[e];o[2]=l(o[2]),o[3]=p(o[3])}else if(l)for(let e=0,a=P.length;e<a;e++){const o=P[e];o[2]=l(o[2])}else if(p)for(let e=0,a=P.length;e<a;e++){const o=P[e];o[2]=p(o[2])}}:null}};(0,m._)([(0,M.MZ)({type:String,json:{write:!0}})],R.prototype,"displayFieldName",void 0),(0,m._)([(0,M.MZ)({type:Boolean,json:{write:{overridePolicy:n=>({enabled:n})}}})],R.prototype,"exceededTransferLimit",void 0),(0,m._)([(0,M.MZ)({type:[g.A],json:{write:!0}})],R.prototype,"features",void 0),(0,m._)([(0,z.w)("features")],R.prototype,"readFeatures",null),(0,m._)([(0,M.MZ)({type:[h.A],json:{write:!0}})],R.prototype,"fields",void 0),(0,m._)([(0,M.MZ)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:T.read}}})],R.prototype,"geometryType",void 0),(0,m._)([(0,s.K)("geometryType")],R.prototype,"writeGeometryType",null),(0,m._)([(0,M.MZ)({type:Boolean,json:{write:{overridePolicy:n=>({enabled:n})}}})],R.prototype,"hasM",void 0),(0,m._)([(0,M.MZ)({type:Boolean,json:{write:{overridePolicy:n=>({enabled:n})}}})],R.prototype,"hasZ",void 0),(0,m._)([(0,M.MZ)({types:A.yR,json:{write:!0}})],R.prototype,"queryGeometry",void 0),(0,m._)([(0,z.w)("queryGeometry")],R.prototype,"readQueryGeometry",null),(0,m._)([(0,M.MZ)({type:r.A,json:{write:!0}})],R.prototype,"spatialReference",void 0),(0,m._)([(0,s.K)("spatialReference")],R.prototype,"writeSpatialReference",null),(0,m._)([(0,M.MZ)({json:{write:!0}})],R.prototype,"transform",void 0),R=v=(0,m._)([(0,i.$)("esri.rest.support.FeatureSet")],R),R.prototype.toJSON.isDefaultToJSON=!0;const x=R},46698:(b,C,t)=>{t.r(C),t.d(C,{default:()=>x});var m=t(10467),g=t(8189),L=t(92165),D=t(31178),I=t(48900),i=(t(35150),t(3248),t(40707),t(5922),t(76576)),s=t(73747),r=t(85718),c=t(93327),A=t(88219),h=t(57052),v=t(57141),T=t(41474);let R=class extends((0,A.e)(T.A)){constructor(){super(...arguments),this._graphicsViewMap={},this._popupTemplates=new Map,this.graphicsViews=[]}hitTest(n,y){var E=this;return(0,m.A)(function*(){if(!E.graphicsViews.length)return null;const l=E.layer;return E.graphicsViews.reverse().flatMap(p=>{const u=E._popupTemplates.get(p),P=p.hitTest(n);for(const d of P)d.layer=l,d.sourceLayer=l,d.popupTemplate=u;return P}).map(p=>({type:"graphic",graphic:p,layer:l,mapPoint:n}))})()}update(n){if(this.graphicsViews)for(const y of this.graphicsViews)y.processUpdate(n)}attach(){this.addAttachHandles([(0,I.wB)(()=>this.layer?.featureCollections,n=>{this._clear();for(const{popupInfo:y,featureSet:E,layerDefinition:l}of n){const p=c.A.fromJSON(E),u=new D.A(p.features),P=l.drawingInfo,d=y?L.A.fromJSON(y):null,S=(0,r.r)(P.renderer),e=new v.A({requestUpdateCallback:()=>this.requestUpdate(),view:this.view,graphics:u,renderer:S,container:new h.A(this.view.featuresTilingScheme)});this._graphicsViewMap[p.geometryType]=e,this._popupTemplates.set(e,d),"polygon"!==p.geometryType||this.layer.polygonSymbol?"polyline"!==p.geometryType||this.layer.lineSymbol?"point"!==p.geometryType||this.layer.pointSymbol||(this.layer.pointSymbol=S.symbol):this.layer.lineSymbol=S.symbol:this.layer.polygonSymbol=S.symbol,this.graphicsViews.push(e),this.container.addChild(e.container)}},I.Vh),(0,I.wB)(()=>this.layer?.polygonSymbol,n=>{this._graphicsViewMap.polygon.renderer=new s.A({symbol:n})},I.Vh),(0,I.wB)(()=>this.layer?.lineSymbol,n=>{this._graphicsViewMap.polyline.renderer=new s.A({symbol:n})},I.Vh),(0,I.wB)(()=>this.layer?.pointSymbol,n=>{this._graphicsViewMap.point.renderer=new s.A({symbol:n})},I.Vh)])}detach(){this._clear()}moveEnd(){}viewChange(){for(const n of this.graphicsViews)n.viewChange()}_clear(){this.container.removeAllChildren();for(const n of this.graphicsViews)n.destroy();this._graphicsViewMap={},this._popupTemplates.clear(),this.graphicsViews.length=0}};R=(0,g._)([(0,i.$)("esri.views.2d.layers.GeoRSSLayerView2D")],R);const x=R},57052:(b,C,t)=>{t.d(C,{A:()=>D});var m=t(69473),g=t(57641),L=t(62931);class D extends g.f{renderChildren(M){for(const B of this.children)B.setTransform(M.state);if(super.renderChildren(M),this._updateAttributeView(),this.children.some(B=>B.hasData)){switch(M.drawPhase){case m.S5.MAP:this._renderChildren(M,m.RI.All);break;case m.S5.HIGHLIGHT:this.hasHighlight&&this._renderHighlight(M)}this._boundsRenderer&&this._boundsRenderer.doRender(M)}}_renderHighlight(M){(0,L.lB)(M,!1,B=>{this._renderChildren(B,m.RI.Highlight)})}}}}]);