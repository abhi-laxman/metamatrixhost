"use strict";(self.webpackChunkAngularClient=self.webpackChunkAngularClient||[]).push([[2704],{94376:(J,w,t)=>{t.d(w,{p:()=>v});var _=t(8189),u=t(85211),m=(t(3248),t(35150),t(40707),t(76576));const v=E=>{let h=class extends E{get apiKey(){return this._isOverridden("apiKey")?this._get("apiKey"):function A(E){return"portalItem"in E}(this)?this.portalItem?.apiKey:null}set apiKey(D){null!=D?this._override("apiKey",D):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return(0,_._)([(0,u.MZ)({type:String})],h.prototype,"apiKey",null),h=(0,_._)([(0,m.$)("esri.layers.mixins.APIKeyMixin")],h),h}},50630:(J,w,t)=>{t.d(w,{V:()=>K});var _=t(10467),u=t(8189),x=t(89563),a=t(60797),b=t(56492),m=t(45272),A=t(43420),v=t(85211),d=(t(3248),t(35150),t(40707),t(17221)),L=t(76576),j=t(26514),y=t(28067),V=t(32034),T=t(68438),z=t(22329),W=t(69927);const K=P=>{let R=class extends P{constructor(){super(...arguments),this.capabilities=void 0,this.copyright=null,this.fullExtent=null,this.legendEnabled=!0,this.spatialReference=null,this.version=void 0,this._allLayersAndTablesMap=null}readCapabilities(f,s){const l=s.capabilities&&s.capabilities.split(",").map(se=>se.toLowerCase().trim());if(!l)return{operations:{supportsExportMap:!1,supportsExportTiles:!1,supportsIdentify:!1,supportsQuery:!1,supportsTileMap:!1},exportMap:null,exportTiles:null};const i=this.type,M="tile"!==i&&!!s.supportsDynamicLayers,B=l.includes("query"),F=l.includes("map"),Z=!!s.exportTilesAllowed,$=l.includes("tilemap"),H=l.includes("data"),N="tile"!==i&&(!s.tileInfo||M),Q="tile"!==i&&(!s.tileInfo||M),Y="tile"!==i,ee="tile"!==i&&M&&s.currentVersion>=11.1,ne=s.cimVersion?A.R.parse(s.cimVersion):null,le=ne?.greaterEqual(1,4)??!1,ue=ne?.greaterEqual(2,0)??!1;return{operations:{supportsExportMap:F,supportsExportTiles:Z,supportsIdentify:B,supportsQuery:H,supportsTileMap:$},exportMap:F?{supportsArcadeExpressionForLabeling:le,supportsCIMSymbols:ue,supportsDynamicLayers:M,supportsSublayerOrderBy:ee,supportsSublayerDefinitionExpression:Q,supportsSublayerVisibility:N,supportsSublayersChanges:Y}:null,exportTiles:Z?{maxExportTilesCount:+s.maxExportTilesCount}:null}}readVersion(f,s){let l=s.currentVersion;return l||(l=s.hasOwnProperty("capabilities")||s.hasOwnProperty("tables")?10:s.hasOwnProperty("supportedImageFormatTypes")?9.31:9.3),l}fetchRelatedService(f){var s=this;return(0,_.A)(function*(){const l=s.portalItem;if(!l||!(0,W.bK)(l))return null;s._relatedFeatureServicePromise||(s._relatedFeatureServicePromise=l.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},f).then(M=>M.find(B=>"Feature Service"===B.type)??null,()=>null));const i=yield s._relatedFeatureServicePromise;return(0,b.Te)(f),i?{itemId:i.id,url:i.url}:null})()}fetchSublayerInfo(f,s){var l=this;return(0,_.A)(function*(){const{source:i}=f;if(l?.portalItem&&"tile"===l.type&&"map-layer"===i?.type&&(0,W.bK)(l.portalItem)&&f.originIdOf("url")<j.Gr.SERVICE){const F=yield l.fetchRelatedService(s);F&&(f.url=(0,m.fj)(F.url,i.mapLayerId.toString()),f.layerItemId=F.itemId)}const{url:M}=f;let B;if("data-layer"===i.type)B=(yield(0,x.A)(M,{responseType:"json",query:{f:"json",...l.customParameters,token:l.apiKey},...s})).data;else if(M&&f.originIdOf("url")>j.Gr.SERVICE)try{const F=yield l._fetchAllLayersAndTablesFromService(M),Z=(0,T.qg)(M)?.sublayer??i.mapLayerId;B=F.get(Z)}catch{}else{let F=f.id;"map-layer"===i?.type&&(F=i.mapLayerId);try{B=(yield l.fetchAllLayersAndTables(s)).get(F)}catch{}}return B})()}fetchAllLayersAndTables(f){var s=this;return(0,_.A)(function*(){return s._fetchAllLayersAndTablesFromService(s.parsedUrl?.path,f)})()}_fetchAllLayersAndTablesFromService(f,s){var l=this;return(0,_.A)(function*(){yield l.load(s),l._allLayersAndTablesMap||=new Map;const i=(0,T.qg)(f),M=(0,a.tE)(l._allLayersAndTablesMap,i?.url.path,()=>(0,x.A)((0,m.fj)(i?.url.path,"/layers"),{responseType:"json",query:{f:"json",...l.customParameters,token:l.apiKey}}).then(F=>{const Z=new Map,{layers:$,tables:H}=F.data,N=[...$??[],...H??[]];for(const Q of N)Z.set(Q.id,Q);return{result:Z}},F=>({error:F}))),B=yield M;if((0,b.Te)(s),"result"in B)return B.result;throw B.error})()}};return(0,u._)([(0,v.MZ)({readOnly:!0})],R.prototype,"capabilities",void 0),(0,u._)([(0,d.w)("service","capabilities",["capabilities","exportTilesAllowed","maxExportTilesCount","supportsDynamicLayers","tileInfo"])],R.prototype,"readCapabilities",null),(0,u._)([(0,v.MZ)({json:{read:{source:"copyrightText"}}})],R.prototype,"copyright",void 0),(0,u._)([(0,v.MZ)({type:y.A})],R.prototype,"fullExtent",void 0),(0,u._)([(0,v.MZ)(z.id)],R.prototype,"id",void 0),(0,u._)([(0,v.MZ)({type:Boolean,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend"}}})],R.prototype,"legendEnabled",void 0),(0,u._)([(0,v.MZ)(z.M6)],R.prototype,"popupEnabled",void 0),(0,u._)([(0,v.MZ)({type:V.A})],R.prototype,"spatialReference",void 0),(0,u._)([(0,v.MZ)({readOnly:!0})],R.prototype,"version",void 0),(0,u._)([(0,d.w)("service","version",["currentVersion","capabilities","tables","supportedImageFormatTypes"])],R.prototype,"readVersion",null),R=(0,u._)([(0,L.$)("esri.layers.mixins.ArcGISMapService")],R),R}},43124:(J,w,t)=>{t.d(w,{Rr:()=>E,fY:()=>d,ne:()=>D});var _=t(8189),u=t(89221),x=t(85211),A=(t(3248),t(35150),t(40707),t(76576)),v=t(15848);function E(L,j,y){if(!L)return null;const V=L.find(z=>!!z.field);if(!V)return null;const T=new v.A;return T.read(V,y),[T]}const D={type:[v.A],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:E},write:{writer:function h(L,j,y,V){const T=L.find(z=>!!z.field);T&&(0,u.sM)(y,[T.toJSON()],j)}}}},d=L=>{let j=class extends L{constructor(){super(...arguments),this.orderBy=null}};return(0,_._)([(0,x.MZ)(D)],j.prototype,"orderBy",void 0),j=(0,_._)([(0,A.$)("esri.layers.mixins.OrderedLayer")],j),j}},58993:(J,w,t)=>{t.d(w,{I:()=>z});var _=t(8189),u=t(31178),x=t(2993),a=t(5922),b=t(35150),m=t(48900),A=t(85211),h=(t(3248),t(40707),t(74220)),D=t(76576),d=t(26514),L=t(49498),j=t(87293);const V=u.A.ofType(L.A);function T(W,K){W&&W.forEach(P=>{K(P),P.sublayers&&P.sublayers.length&&T(P.sublayers,K)})}const z=W=>{let K=class extends W{constructor(...P){super(...P),this.allSublayers=new x.A({getCollections:()=>[this.sublayers],getChildrenFunction:R=>R.sublayers}),this.sublayersSourceJSON={[d.Gr.SERVICE]:{},[d.Gr.PORTAL_ITEM]:{},[d.Gr.WEB_SCENE]:{},[d.Gr.WEB_MAP]:{},[d.Gr.LINK_CHART]:{}},this.subtables=null,this.addHandles([(0,m.wB)(()=>this.sublayers,(R,f)=>this._handleSublayersChange(R,f),m.OH),(0,m.wB)(()=>this.subtables,(R,f)=>this._handleSublayersChange(R,f),m.OH)])}destroy(){this.allSublayers.destroy()}readSublayers(P,R){if(!R||!P)return;const{sublayersSourceJSON:f}=this,s=(0,d.aB)(R.origin);if(s<d.Gr.SERVICE||(f[s]={context:R,visibleLayers:P.visibleLayers||f[s].visibleLayers,layers:P.layers||f[s].layers},s>d.Gr.SERVICE))return;this._set("serviceSublayers",this.createSublayersForOrigin("service").sublayers);const{sublayers:l,origin:i}=this.createSublayersForOrigin("web-document"),M=(0,h.oY)(this);M.setDefaultOrigin(i),this._set("sublayers",new V(l)),M.setDefaultOrigin("user")}findSublayerById(P){return this.allSublayers.find(R=>R.id===P)}createServiceSublayers(){return this.createSublayersForOrigin("service").sublayers}createSublayersForOrigin(P){const R=(0,d.aB)("web-document"===P?"web-map":P);let f=d.Gr.SERVICE,s=this.sublayersSourceJSON[d.Gr.SERVICE].layers,l=this.sublayersSourceJSON[d.Gr.SERVICE].context,i=null;const M=[d.Gr.PORTAL_ITEM,d.Gr.WEB_SCENE,d.Gr.WEB_MAP].filter(N=>N<=R);for(const N of M){const Q=this.sublayersSourceJSON[N];(0,j._X)(Q.layers)&&(f=N,s=Q.layers,l=Q.context,Q.visibleLayers&&(i={visibleLayers:Q.visibleLayers,context:Q.context}))}const B=[d.Gr.PORTAL_ITEM,d.Gr.WEB_SCENE,d.Gr.WEB_MAP].filter(N=>N>f&&N<=R);let F=null;for(const N of B){const{layers:Q,visibleLayers:Y,context:ee}=this.sublayersSourceJSON[N];Q&&(F={layers:Q,context:ee}),Y&&(i={visibleLayers:Y,context:ee})}const Z=function y(W,K){const P=[],R={};return W&&W.forEach(f=>{const s=new L.A;if(s.read(f,K),R[s.id]=s,null!=f.parentLayerId&&-1!==f.parentLayerId){const l=R[f.parentLayerId];l.sublayers||(l.sublayers=[]),l.sublayers.unshift(s)}else P.unshift(s)}),P}(s,l),$=new Map,H=new Set;if(F)for(const N of F.layers)$.set(N.id,N);if(i?.visibleLayers)for(const N of i.visibleLayers)H.add(N);return T(Z,N=>{F&&N.read($.get(N.id),F.context),i&&N.read({defaultVisibility:H.has(N.id)},i.context)}),{origin:(0,d.OL)(f),sublayers:new V({items:Z})}}read(P,R){super.read(P,R),this.readSublayers(P,R)}_handleSublayersChange(P,R){R&&(R.forEach(f=>{f.parent=null,f.layer=null}),this.removeHandles("sublayers-owner")),P&&(P.forEach(f=>{f.parent=this,f.layer=this}),this.addHandles([P.on("after-add",({item:f})=>{f.parent=this,f.layer=this}),P.on("after-remove",({item:f})=>{f.parent=null,f.layer=null})],"sublayers-owner"),"tile"===this.type&&this.addHandles(P.on("before-changes",f=>{b.A.getLogger("esri.layers.TileLayer").error(new a.A("tilelayer:sublayers-non-modifiable","ISublayer can't be added, moved, or removed from the layer's sublayers",{layer:this})),f.preventDefault()}),"sublayers-owner"))}};return(0,_._)([(0,A.MZ)({readOnly:!0})],K.prototype,"allSublayers",void 0),(0,_._)([(0,A.MZ)({readOnly:!0,type:u.A.ofType(L.A)})],K.prototype,"serviceSublayers",void 0),(0,_._)([(0,A.MZ)({value:null,type:V,json:{read:!1,write:{allowNull:!0,ignoreOrigin:!0}}})],K.prototype,"sublayers",void 0),(0,_._)([(0,A.MZ)({readOnly:!0})],K.prototype,"sublayersSourceJSON",void 0),(0,_._)([(0,A.MZ)({type:V,json:{read:{source:"tables"}}})],K.prototype,"subtables",void 0),K=(0,_._)([(0,D.$)("esri.layers.mixins.SublayersOwner")],K),K}},47063:(J,w,t)=>{t.d(w,{A:()=>j});var _=t(8189),u=t(90660),x=t(71065),a=t(85211),v=(t(3248),t(35150),t(40707),t(17221)),E=t(76576),h=t(50305),D=t(39664),d=t(69741);let L=class extends(u.A.ClonableMixin(x.A)){constructor(y){super(y),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(y){const V={};for(const T of Object.keys(y))V[T]=(0,D.rS)(y[T]);return V}writeDomains(y,V){const T={};for(const z of Object.keys(y))y[z]&&(T[z]=y[z]?.toJSON());V.domains=T}};(0,_._)([(0,a.MZ)({json:{write:!0}})],L.prototype,"id",void 0),(0,_._)([(0,a.MZ)({json:{write:!0}})],L.prototype,"name",void 0),(0,_._)([(0,a.MZ)({json:{write:!0}})],L.prototype,"domains",void 0),(0,_._)([(0,v.w)("domains")],L.prototype,"readDomains",null),(0,_._)([(0,h.K)("domains")],L.prototype,"writeDomains",null),(0,_._)([(0,a.MZ)({type:[d.A],json:{write:!0}})],L.prototype,"templates",void 0),L=(0,_._)([(0,E.$)("esri.layers.support.FeatureType")],L);const j=L},64584:(J,w,t)=>{t.d(w,{A:()=>D});var E,_=t(8189),u=t(31178),x=t(71065),a=t(85211),v=(t(3248),t(35150),t(40707),t(76576));let h=E=class extends x.A{constructor(d){super(d),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new u.A}clone(){return new E({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};(0,_._)([(0,a.MZ)({type:String,json:{write:{isRequired:!0}}})],h.prototype,"floorField",void 0),(0,_._)([(0,a.MZ)({json:{read:!1,write:!1}})],h.prototype,"viewAllMode",void 0),(0,_._)([(0,a.MZ)({json:{read:!1,write:!1}})],h.prototype,"viewAllLevelIds",void 0),h=E=(0,_._)([(0,v.$)("esri.layers.support.LayerFloorInfo")],h);const D=h},15848:(J,w,t)=>{t.d(w,{A:()=>d});var E,_=t(8189),u=t(49976),x=t(71065),a=t(85211),v=(t(3248),t(35150),t(40707),t(76576));const h=new u.J({asc:"ascending",desc:"descending"});let D=E=class extends x.A{constructor(L){super(L),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new E({field:this.field,valueExpression:this.valueExpression,order:this.order})}};(0,_._)([(0,a.MZ)({type:String,json:{write:!0}})],D.prototype,"field",void 0),(0,_._)([(0,a.MZ)({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],D.prototype,"valueExpression",void 0),(0,_._)([(0,a.MZ)({type:h.apiValues,json:{type:h.jsonValues,read:h.read,write:h.write}})],D.prototype,"order",void 0),D=E=(0,_._)([(0,v.$)("esri.layers.support.OrderByInfo")],D);const d=D},36267:(J,w,t)=>{t.d(w,{A:()=>L});var _=t(8189),u=t(90660),x=t(49976),a=t(71065),b=t(85211),E=(t(3248),t(35150),t(40707),t(76576));const h=new x.J({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),D=new x.J({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let d=class extends(u.A.ClonableMixin(a.A)){constructor(j){super(j),this.cardinality=null,this.catalogId=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};(0,_._)([(0,b.MZ)({json:{read:h.read,write:h.write}})],d.prototype,"cardinality",void 0),(0,_._)([(0,b.MZ)({json:{name:"catalogID"}})],d.prototype,"catalogId",void 0),(0,_._)([(0,b.MZ)({json:{read:!0,write:!0}})],d.prototype,"composite",void 0),(0,_._)([(0,b.MZ)({json:{read:!0,write:!0}})],d.prototype,"id",void 0),(0,_._)([(0,b.MZ)({json:{read:!0,write:!0}})],d.prototype,"keyField",void 0),(0,_._)([(0,b.MZ)({json:{read:!0,write:!0}})],d.prototype,"keyFieldInRelationshipTable",void 0),(0,_._)([(0,b.MZ)({json:{read:!0,write:!0}})],d.prototype,"name",void 0),(0,_._)([(0,b.MZ)({json:{read:!0,write:!0}})],d.prototype,"relatedTableId",void 0),(0,_._)([(0,b.MZ)({json:{read:!0,write:!0}})],d.prototype,"relationshipTableId",void 0),(0,_._)([(0,b.MZ)({json:{read:D.read,write:D.write}})],d.prototype,"role",void 0),d=(0,_._)([(0,E.$)("esri.layers.support.Relationship")],d);const L=d},49498:(J,w,t)=>{t.d(w,{A:()=>g});var ie,_=t(10467),u=t(8189),x=t(92165),a=t(89563),b=t(31178),m=t(5922),A=t(3248),v=t(3046),E=t(77806),h=t(55098),D=t(35150),d=t(39693),L=t(63484),j=t(45272),y=t(85211),V=t(48669),T=t(17221),z=t(76576),W=t(50305),K=t(55739),P=t(26514),R=t(74220),f=t(28067),s=t(32034),l=t(6434),i=t(5931),M=t(43124),B=t(47516),F=t(47063),Z=t(29141),$=t(73258),H=t(86300),N=t(54947),Q=t(73975),Y=t(64584),ee=t(15848),ne=t(36267),le=t(90543),ue=t(93164),se=t(77757),Ee=t(31595),de=t(68800),ge=t(52466),Me=t(87086),Pe=t(41843),ve=t(94048);function pe(e){return"esriSMS"===e?.type}function ce(e,o,n){const O=this.originIdOf(o)>=(0,P.aB)(n.origin);return{ignoreOrigin:!0,allowNull:O,enabled:!!n&&"map-image"===n.layer?.type&&(n.writeSublayerStructure||O)}}function ye(e,o,n){return{enabled:!!n&&"tile"===n.layer?.type&&(n.origin&&this.originIdOf(o)>=(0,P.aB)(n.origin)||this._isOverridden(o))}}function q(e,o,n){return{ignoreOrigin:!0,enabled:n&&n.writeSublayerStructure||!1}}function r(e,o,n){return{ignoreOrigin:!0,enabled:!!n?.writeSublayerStructure&&this.originIdOf(o)>P.Gr.SERVICE}}function p(e,o,n){return{ignoreOrigin:!0,enabled:!!n&&(n.writeSublayerStructure||this.originIdOf(o)>=(0,P.aB)(n.origin))}}let I=0;const S=new Set(["layer","parent","loaded","loadStatus","loadError","loadWarnings"]);let c=ie=class extends((0,d.P)(v.A.IdentifiableMixin(h.A))){constructor(e){super(e),this.capabilities=void 0,this.maxScaleRange={minScale:0,maxScale:0},this.fields=null,this.fullExtent=null,this.geometryType=null,this.globalIdField=null,this.isTable=!1,this.legendEnabled=!0,this.objectIdField=null,this.parent=null,this.popupEnabled=!0,this.popupTemplate=null,this.relationships=null,this.sourceJSON=null,this.spatialReference=null,this.title=null,this.typeIdField=null,this.type="sublayer",this.types=null,this._lastParsedUrl=null}load(e){var o=this;return(0,_.A)(function*(){return o.addResolvingPromise((0,_.A)(function*(){const{layer:n,url:O}=o;if(!n&&!O)throw new m.A("sublayer:missing-layer","Sublayer can't be loaded without being part of a layer",{sublayer:o});const C=n?yield n.fetchSublayerInfo(o,e):(yield(0,a.A)(O,{responseType:"json",query:{f:"json"},...e})).data;C&&(o.sourceJSON=C,o.read({layerDefinition:C},{origin:"service",layer:n,url:(0,de.Dl)(O)}))})()),o})()}readCapabilities(e,o){o=o.layerDefinition||o;const{attachment:n,operations:{supportsQuery:O,supportsQueryAttachments:C},query:{supportsFormatPBF:U,supportsOrderBy:G,supportsPagination:X},data:{supportsAttachment:k},queryRelated:te}=(0,le.S)(o,this.url);return{attachment:{supportsOrderByFields:n?.supportsOrderByFields??!1,supportsResize:n?.supportsResize??!1},exportMap:{supportsModification:!!o.canModifyLayer},operations:{supportsQuery:O,supportsQueryAttachments:C},data:{supportsAttachment:k},query:{supportsFormatPBF:U,supportsOrderBy:G,supportsPagination:X},queryRelated:te}}get defaultPopupTemplate(){return this.createPopupTemplate()}set definitionExpression(e){this._setAndNotifyLayer("definitionExpression",e)}get effectiveScaleRange(){const{minScale:e,maxScale:o}=this;return{minScale:e,maxScale:o}}readMaxScaleRange(e,o){return{minScale:(o=o.layerDefinition||o).minScale??0,maxScale:o.maxScale??0}}get fieldsIndex(){return new $.A(this.fields||[])}set floorInfo(e){this._setAndNotifyLayer("floorInfo",e)}readGlobalIdFieldFromService(e,o){if((o=o.layerDefinition||o).globalIdField)return o.globalIdField;if(o.fields)for(const n of o.fields)if("esriFieldTypeGlobalID"===n.type)return n.name}get id(){return this._get("id")??I++}set id(e){this._get("id")!==e&&(!1!==this.layer?.capabilities?.exportMap?.supportsDynamicLayers?this._set("id",e):this._logLockedError("id","capability not available 'layer.capabilities.exportMap.supportsDynamicLayers'"))}readIsTable(e,o){return"Table"===o.type}set labelingInfo(e){this._setAndNotifyLayer("labelingInfo",e)}writeLabelingInfo(e,o,n,O){e&&e.length&&(o.layerDefinition={drawingInfo:{labelingInfo:e.map(C=>C.write({},O))}})}set labelsVisible(e){this._setAndNotifyLayer("labelsVisible",e)}set layer(e){this._set("layer",e),this.sublayers?.forEach(o=>o.layer=e)}set listMode(e){this._set("listMode",e)}set minScale(e){this._setAndNotifyLayer("minScale",e)}readMinScale(e,o){return o.minScale||o.layerDefinition?.minScale||0}set maxScale(e){this._setAndNotifyLayer("maxScale",e)}readMaxScale(e,o){return o.maxScale||o.layerDefinition?.maxScale||0}readObjectIdFieldFromService(e,o){return(o=o.layerDefinition||o).objectIdField?o.objectIdField:o.fields?.find(O=>"esriFieldTypeOID"===O.type)?.name}set opacity(e){this._setAndNotifyLayer("opacity",e)}readOpacity(e,o){const{layerDefinition:n}=o;return 1-.01*(n?.transparency??n?.drawingInfo?.transparency??0)}writeOpacity(e,o,n,O){o.layerDefinition={drawingInfo:{transparency:100-100*e}}}set orderBy(e){this._setAndNotifyLayer("orderBy",e)}writeParent(e,o){o.parentLayerId=this.parent&&this.parent!==this.layer?(0,K.Vr)(this.parent.id):-1}get queryTask(){if(!this.layer)return null;const{capabilities:e,fieldsIndex:o,layer:n,url:O}=this,{spatialReference:C}=n,U="gdbVersion"in n?n.gdbVersion:void 0,G=(0,A.A)("featurelayer-pbf")&&e?.query.supportsFormatPBF;return new i.A({fieldsIndex:o,gdbVersion:U,pbfSupported:G,queryAttachmentsSupported:e?.operations?.supportsQueryAttachments??!1,sourceSpatialReference:C,url:O})}set renderer(e){if((0,H.yp)(e,this.fieldsIndex),e)for(const o of e.symbols)if((0,ve.wk)(o)){D.A.getLogger(this).warn("Sublayer renderer should use 2D symbols");break}this._setAndNotifyLayer("renderer",e)}get source(){return this._get("source")||new se.f({mapLayerId:this.id})}set source(e){this._setAndNotifyLayer("source",e)}set sublayers(e){this._handleSublayersChange(e,this._get("sublayers")),this._set("sublayers",e)}castSublayers(e){return(0,K.dp)(b.A.ofType(ie),e)}writeSublayers(e,o,n){this.sublayers?.length&&(o[n]=this.sublayers.map(O=>O.id).toArray().reverse())}readTitle(e,o){return o.layerDefinition?.name??o.name}readTypeIdField(e,o){let n=(o=o.layerDefinition||o).typeIdField;if(n&&o.fields){n=n.toLowerCase();const O=o.fields.find(C=>C.name.toLowerCase()===n);O&&(n=O.name)}return n}get url(){const e=this.layer?.parsedUrl??this._lastParsedUrl,o=this.source;if(!e)return null;if(this._lastParsedUrl=e,"map-layer"===o?.type)return`${e.path}/${o.mapLayerId}`;const n={layer:JSON.stringify({source:this.source})};return`${e.path}/dynamicLayer?${(0,j.x0)(n)}`}set url(e){this._overrideIfSome("url",e)}set visible(e){this._setAndNotifyLayer("visible",e)}writeVisible(e,o,n,O){o[n]=this.getAtOrigin("defaultVisibility","service")||e}clone(){const{store:e}=(0,R.oY)(this),o=new ie;return(0,R.oY)(o).store=e.clone(S),this.commitProperty("url"),o._lastParsedUrl=this._lastParsedUrl,o}createPopupTemplate(e){return(0,Pe.tn)(this,e)}createQuery(){return new Me.A({returnGeometry:!0,where:this.definitionExpression||"1=1"})}createFeatureLayer(){var e=this;return(0,_.A)(function*(){if(e.hasOwnProperty("sublayers"))return null;const o=(yield Promise.all([t.e(4792),t.e(680),t.e(5940),t.e(6598)]).then(t.bind(t,35940))).default,{layer:n,url:O}=e;let C;if(O&&e.originIdOf("url")>P.Gr.SERVICE)C=new o({url:O});else{if(!n?.parsedUrl)throw new m.A("createFeatureLayer:missing-information","Cannot create a FeatureLayer without a url or a parent layer");{const U=n.parsedUrl;C=new o({url:U.path}),U&&e.source&&("map-layer"===e.source.type?C.layerId=e.source.mapLayerId:C.dynamicDataSource=e.source)}}return null!=n?.refreshInterval&&(C.refreshInterval=n.refreshInterval),e.definitionExpression&&(C.definitionExpression=e.definitionExpression),e.floorInfo&&(C.floorInfo=(0,E.o8)(e.floorInfo)),e.originIdOf("labelingInfo")>P.Gr.SERVICE&&(C.labelingInfo=(0,E.o8)(e.labelingInfo)),e.originIdOf("labelsVisible")>P.Gr.DEFAULTS&&(C.labelsVisible=e.labelsVisible),e.originIdOf("legendEnabled")>P.Gr.DEFAULTS&&(C.legendEnabled=e.legendEnabled),e.originIdOf("visible")>P.Gr.DEFAULTS&&(C.visible=e.visible),e.originIdOf("minScale")>P.Gr.DEFAULTS&&(C.minScale=e.minScale),e.originIdOf("maxScale")>P.Gr.DEFAULTS&&(C.maxScale=e.maxScale),e.originIdOf("opacity")>P.Gr.DEFAULTS&&(C.opacity=e.opacity),e.originIdOf("popupTemplate")>P.Gr.DEFAULTS&&(C.popupTemplate=(0,E.o8)(e.popupTemplate)),e.originIdOf("renderer")>P.Gr.SERVICE&&(C.renderer=(0,E.o8)(e.renderer)),"data-layer"===e.source?.type&&(C.dynamicDataSource=e.source.clone()),e.originIdOf("title")>P.Gr.DEFAULTS&&(C.title=e.title),"map-image"===n?.type&&n.originIdOf("customParameters")>P.Gr.DEFAULTS&&(C.customParameters=n.customParameters),"tile"===n?.type&&n.originIdOf("customParameters")>P.Gr.DEFAULTS&&(C.customParameters=n.customParameters),C})()}getField(e){return this.fieldsIndex.get(e)}getFeatureType(e){return(0,B.xd)(this.types,this.typeIdField,e)}getFieldDomain(e,o){const n=o?.feature,O=this.getFeatureType(n);if(O){const C=O.domains&&O.domains[e];if(C&&"inherited"!==C.type)return C}return this._getLayerDomain(e)}queryAttachments(e,o){var n=this;return(0,_.A)(function*(){yield n.load(),e=ge.A.from(e);const O=n.capabilities;if(!O?.data?.supportsAttachment)throw new m.A("queryAttachments:not-supported","this layer doesn't support attachments");const{attachmentTypes:C,objectIds:U,globalIds:G,num:X,size:k,start:te,where:oe}=e;if(!O?.operations?.supportsQueryAttachments&&(C?.length>0||G?.length>0||k?.length>0||X||te||oe))throw new m.A("queryAttachments:option-not-supported","when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",e);if(!(U?.length||G?.length||oe))throw new m.A("queryAttachments:invalid-query","'objectIds', 'globalIds', or 'where' are required to perform attachment query",e);return!O?.attachment?.supportsOrderByFields&&e.orderByFields?.length&&((e=e.clone()).orderByFields=null),n.queryTask.executeAttachmentQuery(e,o)})()}queryFeatureCount(e=this.createQuery(),o){var n=this;return(0,_.A)(function*(){if(yield n.load(),!n.capabilities.operations.supportsQuery)throw new m.A("queryFeatureCount:not-supported","this layer doesn't support queries.");if(!n.url)throw new m.A("queryFeatureCount:not-supported","this layer has no url.");const O=n.layer?.apiKey;return yield n.queryTask.executeForCount(e,{...o,query:{...n.layer?.customParameters,token:O}})})()}queryFeatures(e=this.createQuery(),o){var n=this;return(0,_.A)(function*(){if(yield n.load(),!n.capabilities.operations.supportsQuery)throw new m.A("queryFeatures:not-supported","this layer doesn't support queries.");if(!n.url)throw new m.A("queryFeatures:not-supported","this layer has no url.");const O=yield n.queryTask.execute(e,{...o,query:{...n.layer?.customParameters,token:n.layer?.apiKey}});if(O?.features)for(const C of O.features)C.sourceLayer=n;return O})()}queryObjectIds(e=this.createQuery(),o){var n=this;return(0,_.A)(function*(){if(yield n.load(),!n.capabilities.operations.supportsQuery)throw new m.A("queryObjectIds:not-supported","this layer doesn't support queries.");if(!n.url)throw new m.A("queryObjectIds:not-supported","this layer has no url.");const O=n.layer?.apiKey;return yield n.queryTask.executeForIds(e,{...o,query:{...n.layer?.customParameters,token:O}})})()}queryRelatedFeatures(e,o){var n=this;return(0,_.A)(function*(){if(yield n.load(),!n.capabilities.operations.supportsQuery)throw new m.A("queryRelatedFeatures:not-supported","this layer doesn't support queries.");if(!n.url)throw new m.A("queryRelatedFeatures:not-supported","this layer has no url.");const O=n.layer?.apiKey;return yield n.queryTask.executeRelationshipQuery(e,{...o,query:{...n.layer?.customParameters,token:O}})})()}queryRelatedFeaturesCount(e,o){var n=this;return(0,_.A)(function*(){if(yield n.load(),!n.capabilities.operations.supportsQuery)throw new m.A("queryRelatedFeaturesCount:not-supported","this layer doesn't support queries.");if(!n.capabilities.queryRelated.supportsCount)throw new m.A("queryRelatedFeaturesCount:not-supported","this layer doesn't support query related counts.");if(!n.url)throw new m.A("queryRelatedFeaturesCount:not-supported","this layer has no url.");const O=n.layer?.apiKey;return yield n.queryTask.executeRelationshipQueryForCount(e,{...o,query:{...n.layer?.customParameters,token:O}})})()}toExportImageJSON(e){const o={id:this.id,source:this.source?.toJSON()||{mapLayerId:this.id,type:"mapLayer"}},n=(0,L.mA)(e,this.definitionExpression);null!=n&&(o.definitionExpression=n);const O=["renderer","labelingInfo","opacity","labelsVisible"].reduce((U,G)=>(U[G]=this.originIdOf(G),U),{});if(Object.keys(O).some(U=>O[U]>P.Gr.SERVICE)){const U=o.drawingInfo={};if(O.renderer>P.Gr.SERVICE&&(U.renderer=this.renderer?this.renderer.toJSON():null),O.labelsVisible>P.Gr.SERVICE&&(U.showLabels=this.labelsVisible),this.labelsVisible&&O.labelingInfo>P.Gr.SERVICE)if(this.labelingInfo){!this.loaded&&this.labelingInfo?.some(X=>!X.labelPlacement)&&D.A.getLogger(this).warnOnce(`A Sublayer (title: ${this.title}, id: ${this.id}) has an undefined 'labelPlacement' and so labels cannot be displayed. Either define a valid 'labelPlacement' or call Sublayer.load() to use a default value based on geometry type.`,{sublayer:this});let G=this.labelingInfo;null!=this.geometryType&&(G=(0,Q.z)(this.labelingInfo,l.gy.toJSON(this.geometryType))),U.showLabels=!0,U.labelingInfo=G.filter(X=>X.labelPlacement).map(X=>X.toJSON({origin:"service",layer:this.layer}))}else U.showLabels=!1;O.opacity>P.Gr.SERVICE&&(U.transparency=100-100*this.opacity),this._assignDefaultSymbolColors(U.renderer)}return(this.layer?.capabilities?.exportMap?.supportsSublayerOrderBy??!1)&&this.originIdOf("orderBy")>P.Gr.SERVICE&&(o.orderBy=this.orderBy?.map(U=>U.toJSON())??null),o}_assignDefaultSymbolColors(e){this._forEachSimpleMarkerSymbols(e,o=>{o.color||"esriSMSX"!==o.style&&"esriSMSCross"!==o.style||(o.color=o.outline?.color?o.outline.color:[0,0,0,0])})}_forEachSimpleMarkerSymbols(e,o){if(e){const n=("uniqueValueInfos"in e?e.uniqueValueInfos:"classBreakInfos"in e?e.classBreakInfos:null)??[];for(const O of n)pe(O.symbol)&&o(O.symbol);"symbol"in e&&pe(e.symbol)&&o(e.symbol),"defaultSymbol"in e&&pe(e.defaultSymbol)&&o(e.defaultSymbol)}}_setAndNotifyLayer(e,o){const n=this.layer,O=this._get(e);let C,U;switch(e){case"definitionExpression":case"floorInfo":C="supportsSublayerDefinitionExpression";break;case"minScale":case"maxScale":case"visible":C="supportsSublayerVisibility";break;case"labelingInfo":case"labelsVisible":case"opacity":case"renderer":case"source":C="supportsDynamicLayers",U="supportsModification";break;case"orderBy":C="supportsSublayerOrderBy",U="supportsModification"}const G=(0,R.oY)(this).getDefaultOrigin();if("service"!==G){if(C&&!1===this.layer?.capabilities?.exportMap?.[C])return void this._logLockedError(e,`capability not available 'layer.capabilities.exportMap.${C}'`);if(U&&!1===this.capabilities?.exportMap[U])return void this._logLockedError(e,`capability not available 'capabilities.exportMap.${U}'`)}"source"!==e||"not-loaded"===this.loadStatus?(this._set(e,o),"service"!==G&&O!==o&&n&&n.emit&&n.emit("sublayer-update",{propertyName:e,target:this})):this._logLockedError(e,"'source' can't be changed after calling sublayer.load()")}_handleSublayersChange(e,o){o&&(o.forEach(n=>{n.parent=null,n.layer=null}),this.removeAllHandles()),e&&(e.forEach(n=>{n.parent=this,n.layer=this.layer}),this.addHandles([e.on("after-add",({item:n})=>{n.parent=this,n.layer=this.layer}),e.on("after-remove",({item:n})=>{n.parent=null,n.layer=null}),e.on("before-changes",n=>{(this.layer?.capabilities?.exportMap?.supportsSublayersChanges??1)||(D.A.getLogger(this).error(new m.A("sublayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{sublayer:this,layer:this.layer})),n.preventDefault())})]))}_logLockedError(e,o){const{layer:n,declaredClass:O}=this;D.A.getLogger(O).error(new m.A("sublayer:locked",`Property '${String(e)}' can't be changed on Sublayer from the layer '${n?.id}'`,{reason:o,sublayer:this,layer:n}))}_getLayerDomain(e){return this.fieldsIndex.get(e)?.domain??null}};c.test={isMapImageLayerOverridePolicy:e=>e===r||e===q||e===ce,isTileImageLayerOverridePolicy:e=>e===ye},(0,u._)([(0,y.MZ)({readOnly:!0})],c.prototype,"capabilities",void 0),(0,u._)([(0,T.w)("service","capabilities",["layerDefinition.canModifyLayer","layerDefinition.capabilities"])],c.prototype,"readCapabilities",null),(0,u._)([(0,y.MZ)()],c.prototype,"defaultPopupTemplate",null),(0,u._)([(0,y.MZ)({type:String,value:null,json:{name:"layerDefinition.definitionExpression",write:{allowNull:!0,overridePolicy:ce}}})],c.prototype,"definitionExpression",null),(0,u._)([(0,y.MZ)({readOnly:!0})],c.prototype,"effectiveScaleRange",null),(0,u._)([(0,T.w)("service","maxScaleRange",["minScale","maxScale"])],c.prototype,"readMaxScaleRange",null),(0,u._)([(0,y.MZ)({type:[Z.A],json:{origins:{service:{read:{source:"layerDefinition.fields"}}}}})],c.prototype,"fields",void 0),(0,u._)([(0,y.MZ)({readOnly:!0})],c.prototype,"fieldsIndex",null),(0,u._)([(0,y.MZ)({type:Y.A,value:null,json:{name:"layerDefinition.floorInfo",read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo",overridePolicy:ce},origins:{"web-scene":{read:!1,write:!1}}}})],c.prototype,"floorInfo",null),(0,u._)([(0,y.MZ)({type:f.A,json:{read:{source:"layerDefinition.extent"}}})],c.prototype,"fullExtent",void 0),(0,u._)([(0,y.MZ)({type:l.gy.apiValues,json:{origins:{service:{name:"layerDefinition.geometryType",read:{reader:l.gy.read}}}}})],c.prototype,"geometryType",void 0),(0,u._)([(0,y.MZ)({type:String})],c.prototype,"globalIdField",void 0),(0,u._)([(0,T.w)("service","globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],c.prototype,"readGlobalIdFieldFromService",null),(0,u._)([(0,y.MZ)({type:K.jz,json:{write:{ignoreOrigin:!0}}})],c.prototype,"id",null),(0,u._)([(0,y.MZ)({readOnly:!0})],c.prototype,"isTable",void 0),(0,u._)([(0,T.w)("service","isTable",["type"])],c.prototype,"readIsTable",null),(0,u._)([(0,y.MZ)({value:null,type:[N.A],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo"},write:{target:"layerDefinition.drawingInfo.labelingInfo",overridePolicy:r}}})],c.prototype,"labelingInfo",null),(0,u._)([(0,W.K)("labelingInfo")],c.prototype,"writeLabelingInfo",null),(0,u._)([(0,y.MZ)({type:Boolean,value:!0,json:{read:{source:"layerDefinition.drawingInfo.showLabels"},write:{target:"layerDefinition.drawingInfo.showLabels",overridePolicy:q}}})],c.prototype,"labelsVisible",null),(0,u._)([(0,y.MZ)({value:null})],c.prototype,"layer",null),(0,u._)([(0,y.MZ)({type:String,json:{write:{overridePolicy:ye}}})],c.prototype,"layerItemId",void 0),(0,u._)([(0,y.MZ)({type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend",overridePolicy:p}}})],c.prototype,"legendEnabled",void 0),(0,u._)([(0,y.MZ)({type:["show","hide","hide-children"],value:"show",json:{read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],c.prototype,"listMode",null),(0,u._)([(0,y.MZ)({type:Number,value:0,json:{write:{overridePolicy:q}}})],c.prototype,"minScale",null),(0,u._)([(0,T.w)("minScale",["minScale","layerDefinition.minScale"])],c.prototype,"readMinScale",null),(0,u._)([(0,y.MZ)({type:Number,value:0,json:{write:{overridePolicy:q}}})],c.prototype,"maxScale",null),(0,u._)([(0,T.w)("maxScale",["maxScale","layerDefinition.maxScale"])],c.prototype,"readMaxScale",null),(0,u._)([(0,y.MZ)()],c.prototype,"objectIdField",void 0),(0,u._)([(0,T.w)("service","objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],c.prototype,"readObjectIdFieldFromService",null),(0,u._)([(0,y.MZ)({type:Number,value:1,json:{write:{target:"layerDefinition.drawingInfo.transparency",overridePolicy:q}}})],c.prototype,"opacity",null),(0,u._)([(0,T.w)("opacity",["layerDefinition.drawingInfo.transparency","layerDefinition.transparency"])],c.prototype,"readOpacity",null),(0,u._)([(0,W.K)("opacity")],c.prototype,"writeOpacity",null),(0,u._)([(0,y.MZ)({value:null,type:[ee.A],json:{name:"layerDefinition.orderBy",read:{reader:M.Rr}}})],c.prototype,"orderBy",null),(0,u._)([(0,y.MZ)({json:{type:K.jz,write:{target:"parentLayerId",writerEnsuresNonNull:!0,overridePolicy:q}}})],c.prototype,"parent",void 0),(0,u._)([(0,W.K)("parent")],c.prototype,"writeParent",null),(0,u._)([(0,y.MZ)({type:Boolean,value:!0,json:{read:{source:"disablePopup",reader:(e,o)=>!o.disablePopup},write:{target:"disablePopup",overridePolicy:p,writer(e,o,n){o[n]=!e}}}})],c.prototype,"popupEnabled",void 0),(0,u._)([(0,y.MZ)({type:x.A,json:{read:{source:"popupInfo"},write:{target:"popupInfo",overridePolicy:p}}})],c.prototype,"popupTemplate",void 0),(0,u._)([(0,y.MZ)({readOnly:!0})],c.prototype,"queryTask",null),(0,u._)([(0,y.MZ)({type:[ne.A],readOnly:!0,json:{origins:{service:{read:{source:"layerDefinition.relationships"}}}}})],c.prototype,"relationships",void 0),(0,u._)([(0,y.MZ)({types:Ee.Hg,value:null,json:{name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:r},origins:{"web-scene":{types:Ee.XJ,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:r}}}}})],c.prototype,"renderer",null),(0,u._)([(0,y.MZ)({types:{key:"type",base:null,typeMap:{"data-layer":ue.L,"map-layer":se.f}},cast(e){if(e){if("mapLayerId"in e)return(0,K.PZ)(se.f,e);if("dataSource"in e)return(0,K.PZ)(ue.L,e)}return e},json:{name:"layerDefinition.source",write:{overridePolicy:q}}})],c.prototype,"source",null),(0,u._)([(0,y.MZ)()],c.prototype,"sourceJSON",void 0),(0,u._)([(0,y.MZ)({type:s.A,json:{origins:{service:{read:{source:"layerDefinition.extent.spatialReference"}}}}})],c.prototype,"spatialReference",void 0),(0,u._)([(0,y.MZ)({value:null,json:{type:[K.jz],write:{target:"subLayerIds",allowNull:!0,overridePolicy:q}}})],c.prototype,"sublayers",null),(0,u._)([(0,V.w)("sublayers")],c.prototype,"castSublayers",null),(0,u._)([(0,W.K)("sublayers")],c.prototype,"writeSublayers",null),(0,u._)([(0,y.MZ)({type:String,json:{name:"name",write:{overridePolicy:p}}})],c.prototype,"title",void 0),(0,u._)([(0,T.w)("service","title",["name","layerDefinition.name"])],c.prototype,"readTitle",null),(0,u._)([(0,y.MZ)({type:String})],c.prototype,"typeIdField",void 0),(0,u._)([(0,y.MZ)({json:{read:!1},readOnly:!0,value:"sublayer"})],c.prototype,"type",void 0),(0,u._)([(0,T.w)("typeIdField",["layerDefinition.typeIdField"])],c.prototype,"readTypeIdField",null),(0,u._)([(0,y.MZ)({type:[F.A],json:{origins:{service:{read:{source:"layerDefinition.types"}}}}})],c.prototype,"types",void 0),(0,u._)([(0,y.MZ)({type:String,json:{name:"layerUrl",write:{overridePolicy:ye}}})],c.prototype,"url",null),(0,u._)([(0,y.MZ)({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"},write:{target:"defaultVisibility",overridePolicy:q}}})],c.prototype,"visible",null),(0,u._)([(0,W.K)("visible")],c.prototype,"writeVisible",null),c=ie=(0,u._)([(0,z.$)("esri.layers.support.Sublayer")],c);const g=c},63014:(J,w,t)=>{t.d(w,{C:()=>m,m:()=>a});var _=t(10467),u=t(5922),x=t(56492);function a(v,E,h){return b.apply(this,arguments)}function b(){return(b=(0,_.A)(function*(v,E,h){let D;try{D=yield createImageBitmap(v)}catch(d){throw new u.A("request:server",`Unable to load ${E}`,{url:E,error:d})}return(0,x.Te)(h),D})).apply(this,arguments)}function m(v,E,h,D,d){return A.apply(this,arguments)}function A(){return(A=(0,_.A)(function*(v,E,h,D,d){let L;try{L=yield createImageBitmap(v)}catch(j){throw new u.A("request:server",`Unable to load tile ${E}/${h}/${D}`,{error:j,level:E,row:h,col:D})}return(0,x.Te)(d),L})).apply(this,arguments)}},6829:(J,w,t)=>{t.d(w,{CW:()=>L,Fm:()=>v,Hz:()=>j,JQ:()=>d,JZ:()=>l,ND:()=>V,R_:()=>m,U9:()=>D,fu:()=>u,nr:()=>y,oF:()=>x,rq:()=>E,z$:()=>h});const _=[["binary","application/octet-stream","bin",""]];function u(i,M){return null!=K(M.name,i?.supportedFormats??[])}function x(i,M){if(!i)return!1;const B=E(M,i.supportedFormats??[]);return null!=B&&i.editFormats.includes(B)}function m(i,M){return P(function W(i,M){const B=i.toLowerCase();return T(M).find(F=>R(F)===B)}(i,M))}function A(i,M){return P(K(i,M))}function v(i,M){return R(function z(i,M){return T(M).find(B=>P(B)===i)}(i,M))}function E(i,M){return A(i.name,M)??m(i.type,M)}function h(i,M,B){return m(i,B)??A(M,B)}function D({supportedFormats:i}){return h("model/gltf-binary","glb",i)}function d(i){const M=D(i);return null!=M&&i.editFormats.includes(M)}function L({supportedFormats:i}){return h("model/gltf+json","gltf",i)}function j(i){if(!i)return null;const M=D(i),B=L(i);let F=null;for(const Z of i.queryFormats){if(Z===M)return Z;Z===B&&(F=Z)}return F}function y({supportedFormats:i}){return h("application/esri3do-SR_world","wld",i)}function V({supportedFormats:i}){return h("application/esri3do-SR_prj","prj",i)}function T(i){return[..._,...i]}function K(i,M){const B=i.toLowerCase();return T(M).find(F=>function f(i){return i?.[2].split(",").map(M=>M.toLowerCase())??[]}(F).some(Z=>B.endsWith(Z)))}function P(i){return i?.[0]}function R(i){return i?.[1].toLowerCase()}function l(i){return i.tables?.find(M=>"assetMaps"===M.role)}},4858:(J,w,t)=>{t.d(w,{BI:()=>j,D3:()=>d,XJ:()=>L,lc:()=>D,mX:()=>V,rU:()=>y,tH:()=>R});var _=t(1119);const u="__begin__",x="__end__",a=new RegExp(u,"ig"),b=new RegExp(x,"ig"),m=new RegExp("^"+u,"i"),A=new RegExp(x+"$","i"),v='"',E=v+" + ",h=" + "+v;function D(f){return f.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function d(f){return f.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function L(f){const s={expression:"",type:"none"};return f.labelExpressionInfo?f.labelExpressionInfo.value?(s.expression=f.labelExpressionInfo.value,s.type="conventional"):f.labelExpressionInfo.expression&&(s.expression=f.labelExpressionInfo.expression,s.type="arcade"):null!=f.labelExpression&&(s.expression=D(f.labelExpression),s.type="conventional"),s}function j(f){const s=L(f);switch(s.type){case"conventional":return V(s.expression);case"arcade":return s.expression}return null}function y(f){const s=L(f);switch(s.type){case"conventional":return function z(f){return f?.match(T)?.[1].trim()||null}(s.expression);case"arcade":return R(s.expression)}return null}function V(f){let s;return f?(s=(0,_.HC)(f,l=>u+'$feature["'+l+'"]'+x),s=m.test(s)?s.replace(m,""):v+s,s=A.test(s)?s.replace(A,""):s+v,s=s.replaceAll(a,E).replaceAll(b,h)):s='""',s}const T=/^\s*\{([^}]+)\}\s*$/i,W=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,K=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,P=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function R(f){if(!f)return null;let s=W.exec(f)||K.exec(f);return s?s[1]||s[3]:(s=P.exec(f),s?s[2]:null)}},90543:(J,w,t)=>{t.d(w,{S:()=>d,d:()=>f});var _=t(3248),u=t(68438),x=t(6829);function a(s,l,i){return!!m(s,l,i)}function b(s,l,i){return m(s,l,i)}function m(s,l,i){return s&&s.hasOwnProperty(l)?s[l]:i}const A={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function v(s){const l=s?.supportedSpatialAggregationStatistics?.map(i=>i.toLowerCase());return{envelope:!!l?.includes("envelopeaggregate"),centroid:!!l?.includes("centroidaggregate"),convexHull:!!l?.includes("convexhullaggregate")}}function E(s,l){return!!s?.supportedOperationsWithCacheHint?.map(M=>M.toLowerCase())?.includes(l.toLowerCase())}function h(s){const l=s?.supportedStatisticTypes?.map(i=>i.toLowerCase());return{count:!!l?.includes("count"),sum:!!l?.includes("sum"),min:!!l?.includes("min"),max:!!l?.includes("max"),avg:!!l?.includes("avg"),var:!!l?.includes("var"),stddev:!!l?.includes("stddev"),percentileContinuous:!!l?.includes("percentile_continuous"),percentileDiscrete:!!l?.includes("percentile_discrete"),envelope:!!l?.includes("envelopeaggregate"),centroid:!!l?.includes("centroidaggregate"),convexHull:!!l?.includes("convexhullaggregate")}}function D(s){const l=s?.supportedNormalizationTypes?.map(i=>i.toLowerCase());return{field:!!l?.includes("field"),log:!!l?.includes("log"),naturalLog:!!l?.includes("naturallog"),percentOfTotal:!!l?.includes("percentoftotal"),squareRoot:!!l?.includes("squareroot")}}function d(s,l){return{analytics:L(s),attachment:j(s),data:y(s),metadata:V(s),operations:T(s.capabilities,s,l),query:z(s,l),queryAttributeBins:P(s),queryRelated:W(s),queryTopFeatures:K(s),editing:R(s)}}function L(s){return{supportsCacheHint:E(s.advancedQueryCapabilities,"queryAnalytics")}}function j(s){const l=s.attachmentProperties,i={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:E(s.advancedQueryCapabilities,"queryAttachments"),supportsOrderByFields:a(s.advancedQueryCapabilities,"supportsQueryAttachmentOrderByFields",!1),supportsResize:a(s,"supportsAttachmentsResizing",!1)};return l&&Array.isArray(l)&&l.forEach(M=>{const B=A[M.name];B&&(i[B]=!!M.isEnabled)}),i}function y(s){return{isVersioned:a(s,"isDataVersioned",!1),isBranchVersioned:a(s,"isDataBranchVersioned",!1),supportsAttachment:a(s,"hasAttachments",!1),supportsM:a(s,"hasM",!1),supportsZ:a(s,"hasZ",!1)}}function V(s){return{supportsAdvancedFieldProperties:a(s,"supportsFieldDescriptionProperty",!1)}}function T(s,l,i){const M=s?s.toLowerCase().split(",").map(ee=>ee.trim()):[],B=i?(0,u.qg)(i):null,F=M.includes(null!=B&&"MapServer"===B.serverType?"data":"query"),Z=M.includes("editing")&&!l.datesInUnknownTimezone;let $=Z&&M.includes("create"),H=Z&&M.includes("delete"),N=Z&&M.includes("update");const Q=M.includes("changetracking"),Y=l.advancedQueryCapabilities;return Z&&!($||H||N)&&($=H=N=!0),{supportsCalculate:a(l,"supportsCalculate",!1),supportsTruncate:a(l,"supportsTruncate",!1),supportsValidateSql:a(l,"supportsValidateSql",!1),supportsAdd:$,supportsDelete:H,supportsEditing:Z,supportsChangeTracking:Q,supportsQuery:F,supportsQueryAnalytics:a(Y,"supportsQueryAnalytic",!1),supportsQueryAttachments:a(Y,"supportsQueryAttachments",!1),supportsQueryBins:a(Y,"supportsQueryBins",!1),supportsQueryTopFeatures:a(Y,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:a(l,"supportsAttachmentsResizing",!1),supportsSync:M.includes("sync"),supportsUpdate:N,supportsExceedsLimitStatistics:a(l,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:a(l,"supportsAsyncConvert3D",!1)}}function z(s,l){const i=s.advancedQueryCapabilities,M=s.ownershipBasedAccessControlForFeatures,B=s.archivingInfo,F=s.currentVersion,Z=l?.includes("MapServer"),$=!Z||F>=(0,_.A)("mapserver-pbf-version-support"),H=(0,u.Wo)(l),N=new Set((s.supportedQueryFormats??"").split(",").map(Q=>Q.toLowerCase().trim()));return{maxRecordCount:b(s,"maxRecordCount",void 0),maxRecordCountFactor:b(s,"maxRecordCountFactor",void 0),standardMaxRecordCount:b(s,"standardMaxRecordCount",void 0),supportedSpatialAggregationStatistics:v(i),supportsCacheHint:a(i,"supportsQueryWithCacheHint",!1)||E(i,"query"),supportsCentroid:a(i,"supportsReturningGeometryCentroid",!1),supportsCompactGeometry:H,supportsCurrentUser:a(i,"supportsCurrentUserQueries",!1),supportsDefaultSpatialReference:a(i,"supportsDefaultSR",!1),supportsDisjointSpatialRelationship:a(i,"supportsDisjointSpatialRel",!1),supportsDistance:a(i,"supportsQueryWithDistance",!1),supportsDistinct:a(i,"supportsDistinct",s.supportsAdvancedQueries),supportsExtent:a(i,"supportsReturningQueryExtent",!1),supportsFormatPBF:$&&N.has("pbf"),supportsFullTextSearch:a(i,"supportsFullTextSearch",!1),supportsGeometryProperties:a(i,"supportsReturningGeometryProperties",!1),supportsHavingClause:a(i,"supportsHavingClause",!1),supportsHistoricMoment:a(B,"supportsQueryWithHistoricMoment",!1),supportsMaxRecordCountFactor:a(i,"supportsMaxRecordCountFactor",!1),supportsOrderBy:a(i,"supportsOrderBy",s.supportsAdvancedQueries),supportsPagination:a(i,"supportsPagination",!1),supportsPercentileStatistics:a(i,"supportsPercentileStatistics",!1),supportsQuantization:a(s,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:a(s,"supportsQuantizationEditMode",!1),supportsQueryByAnonymous:a(M,"allowAnonymousToQuery",!0),supportsQueryByOthers:a(M,"allowOthersToQuery",!0),supportsQueryGeometry:a(s,"supportsReturningQueryGeometry",!1),supportsResultType:a(i,"supportsQueryWithResultType",!1),supportsReturnMesh:!!(0,x.Hz)(s.infoFor3D),supportsSpatialAggregationStatistics:a(i,"supportsSpatialAggregationStatistics",!1),supportsSqlExpression:a(i,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:a(s,"useStandardizedQueries",!1),supportsStatistics:a(i,"supportsStatistics",s.supportsStatistics),supportsTopFeaturesQuery:a(i,"supportsTopFeaturesQuery",!1),supportsTrueCurve:a(i,"supportsTrueCurve",!1),tileMaxRecordCount:b(s,"tileMaxRecordCount",void 0)}}function W(s){const l=s.advancedQueryCapabilities,i=a(l,"supportsAdvancedQueryRelated",!1);return{supportsPagination:a(l,"supportsQueryRelatedPagination",!1),supportsCount:i,supportsOrderBy:i,supportsCacheHint:E(l,"queryRelated")}}function K(s){return{supportsCacheHint:E(s.advancedQueryCapabilities,"queryTopFilter")}}function P(s){const l=s?s.queryBinsCapabilities:void 0;return{supportsDate:a(l,"supportsDateBin",!1),supportsFixedInterval:a(l,"supportsFixedIntervalBin",!1),supportsAutoInterval:a(l,"supportsAutoIntervalBin",!1),supportsFixedBoundaries:a(l,"supportsFixedBoundariesBin",!1),supportsStackBy:a(l,"supportsStackBy",!1),supportsSplitBy:a(l,"supportsSplitBy",!1),supportsSnapToData:a(l,"supportsSnapToData",!1),supportsReturnFullIntervalBin:a(l,"supportsReturnFullIntervalBin",!1),supportsFirstDayOfWeek:a(l,"supportsFirstDayOfWeek",!1),supportsNormalization:a(l,"supportsNormalization",!1),supportedStatistics:h(l),supportedNormalizationTypes:D(l)}}function R(s){const l=s.ownershipBasedAccessControlForFeatures,i=s?s.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:a(s,"allowGeometryUpdates",!0),supportsGlobalId:a(s,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:a(s,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:a(s,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:a(s,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:a(s,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:a(l,"allowAnonymousToDelete",!0),supportsDeleteByOthers:a(l,"allowOthersToDelete",!0),supportsUpdateByAnonymous:a(l,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:a(l,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:a(i,"supportsAsyncApplyEdits",!1),zDefault:b(s,"zDefault",void 0)}}function f(s){return{operations:{supportsAppend:a(s,"supportsAppend",!1),supportsCoverageQuery:s?.playbackInfo?.klv["0601"]??!1,supportsExportClip:a(s,"supportsExportClip",!1),supportsExportFrameset:a(s,"supportsExportFrameset",!1),supportsMensuration:a(s,"supportsMensuration",!1),supportsUpdate:a(s,"supportsUpdate",!1)}}}},87293:(J,w,t)=>{t.d(w,{Sk:()=>x,Zx:()=>u,_X:()=>b});var _=t(26514);function u(m,A,v){return A.flatten(({sublayers:h})=>h).length!==m.length||!!m.some(h=>h.originIdOf("minScale")>v||h.originIdOf("maxScale")>v||h.originIdOf("renderer")>v||h.originIdOf("labelingInfo")>v||h.originIdOf("opacity")>v||h.originIdOf("labelsVisible")>v||h.originIdOf("source")>v)||!a(m,A)}function x(m,A,v){return!!m.some(E=>{const h=E.source,D=!h||"map-layer"===h.type&&h.mapLayerId===E.id&&(null==h.gdbVersion||h.gdbVersion===v);E.commitProperty("renderer"),E.commitProperty("labelingInfo"),E.commitProperty("opacity"),E.commitProperty("labelsVisible"),E.commitProperty("orderBy");const d=E.layer?.capabilities?.exportMap?.supportsSublayerOrderBy??!1;return!D||E.originIdOf("renderer")>_.Gr.SERVICE||E.originIdOf("labelingInfo")>_.Gr.SERVICE||E.originIdOf("opacity")>_.Gr.SERVICE||E.originIdOf("labelsVisible")>_.Gr.SERVICE||d&&E.originIdOf("orderBy")>_.Gr.SERVICE})||!a(m,A)}function a(m,A){if(!m?.length||null==A)return!0;const v=A.slice().reverse().flatten(({sublayers:D})=>D&&D.toArray().reverse()).map(D=>D.id).toArray();if(m.length>v.length)return!1;let E=0;const h=v.length;for(const{id:D}of m){for(;E<h&&v[E]!==D;)E++;if(E>=h)return!1}return!0}function b(m){return!!m&&m.some(A=>null!=A.minScale||null!=A.layerDefinition?.minScale)}},78592:(J,w,t)=>{t.d(w,{O3:()=>E,PU:()=>A,YW:()=>D,ex:()=>b,hv:()=>h,zp:()=>m});var _=t(69287),u=t(67685),x=t(53781),a=t(89141);const b=2.4;function m(d){return(0,u.PN)(d*b)}function A(d){return(0,u.Lz)(d)/b}function v(d,L,j,y){let{color:V,ratio:T}=L,{color:z,ratio:W}=j;W===T&&(1===W?T-=1e-6:W+=1e-6);const K=(0,_.qE)((y-T)/(W-T),0,1);(0,x.l)(d,V.toArray(),z.toArray(),K)}function E(d){const j=new Uint8ClampedArray(2048);if((d=d.filter(({ratio:W})=>W>=0&&W<=1).sort((W,K)=>W.ratio-K.ratio).map(({color:W,ratio:K})=>({color:W,ratio:Math.max(K,.001)}))).length<1)return j;let y=d[0],V=d[0],T=1;const z=(0,a.vt)();for(let W=0;W<512;W++){const K=(W+.5)/512;for(;K>V.ratio&&T<d.length;)y=V,V=d[T++];v(z,y,V,K),j.set(z,4*W)}return j}function h(d,L,j){const y=Math.sqrt(d**2+L**2)/j;return y>1?0:3/(Math.PI*j**2)*(1-y**2)**2}function D(d){return"function"==typeof d?d:d?L=>+L[d]:()=>1}},98789:(J,w,t)=>{t.d(w,{q:()=>u});var _=t(23743);function u(x,a,b){if(!b?.features||!b.hasZ)return;const m=(0,_.N)(b.geometryType,a,x.outSpatialReference);if(null!=m)for(const A of b.features)m(A.geometry)}},68470:(J,w,t)=>{t.d(w,{K:()=>d,Q:()=>E});var _=t(8189),u=t(49976),x=t(35150),a=t(85211),A=(t(3248),t(40707),t(15463)),v=t(76576);const E=(0,u.O)()({naturalLog:"natural-log",squareRoot:"square-root",percentOfTotal:"percent-of-total",log:"log",field:"field"}),h="percent-of-total",D="field",d=L=>{let j=class extends L{constructor(){super(...arguments),this.normalizationField=null,this.normalizationMaxValue=null,this.normalizationMinValue=null,this.normalizationTotal=null}get normalizationType(){let y=this._get("normalizationType");const V=!!this.normalizationField,T=null!=this.normalizationTotal;return V||T?(y=V&&D||T&&h||null,V&&T&&x.A.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):y!==D&&y!==h||(y=null),y}set normalizationType(y){this._set("normalizationType",y)}};return(0,_._)([(0,a.MZ)({type:String,json:{name:"parameters.normalizationField",write:!0}})],j.prototype,"normalizationField",void 0),(0,_._)([(0,a.MZ)({type:Number,json:{name:"parameters.normalizationMaxValue",write:!0}})],j.prototype,"normalizationMaxValue",void 0),(0,_._)([(0,a.MZ)({type:Number,json:{name:"parameters.normalizationMinValue",write:!0}})],j.prototype,"normalizationMinValue",void 0),(0,_._)([(0,a.MZ)({type:Number,json:{name:"parameters.normalizationTotal",write:!0}})],j.prototype,"normalizationTotal",void 0),(0,_._)([(0,A.e)(E,{name:"parameters.normalizationType"})],j.prototype,"normalizationType",null),j=(0,_._)([(0,v.$)("esri.rest.support.NormalizationBinParametersMixin")],j),j}},32117:(J,w,t)=>{t.d(w,{$w:()=>T,Bu:()=>Z,DW:()=>i,FH:()=>Ee,FM:()=>v,G9:()=>a,GV:()=>W,Go:()=>h,K3:()=>se,Kn:()=>s,MM:()=>L,MO:()=>Me,Nl:()=>$,Ny:()=>K,O2:()=>H,UE:()=>N,YC:()=>ge,YF:()=>Y,ZO:()=>ne,_1:()=>B,_H:()=>R,_W:()=>z,_d:()=>l,bs:()=>de,dI:()=>ye,e6:()=>D,gQ:()=>A,iA:()=>le,jn:()=>y,lW:()=>d,mA:()=>j,n5:()=>Q,pM:()=>M,pV:()=>f,pk:()=>Pe,rB:()=>ve,s4:()=>x,xo:()=>F,yH:()=>P,yX:()=>q,zb:()=>ee,zr:()=>V});var _=t(46988);function x(r,p,I,S){return function u(r){return"function"==typeof r}(r)?r(p,I,S):r}function a(r){return[r.r,r.g,r.b,r.a]}const b=" /-,\n";function m(r){let p=r.length;for(;p--;)if(!b.includes(r.charAt(p)))return!1;return!0}function A(r,p){const I=[];let S=0,c=-1;do{if(c=r.indexOf("[",S),c>=S){if(c>S){const g=r.slice(S,c);I.push([g,null,m(g)])}if(S=c+1,c=r.indexOf("]",S),c>=S){if(c>S){const g=p[r.slice(S,c)];g&&I.push([null,g,!1])}S=c+1}}}while(-1!==c);if(S<r.length){const g=r.slice(S);I.push([g,null,m(g)])}return I}function v(r,p,I,S){let c="",g=null;for(const e of p){const[o,n,O]=e;if(o)O?g=o:(g&&(c+=g,g=null),c+=o);else{let C=n;null!=I&&(C=Me(n,I));const U=r.attributes[C];U&&(g&&(c+=g,g=null),c+=U)}}return function E(r,p){switch("string"!=typeof r&&(r=String(r)),p){case"LowerCase":return r.toLowerCase();case"Allcaps":return r.toUpperCase();default:return r}}(c,S)}function h(r,p,I,S,c,g,e=!0){const o=p/c,n=I/g,O=Math.ceil(o/2),C=Math.ceil(n/2);for(let U=0;U<g;U++)for(let G=0;G<c;G++){const X=4*(G+(e?g-U-1:U)*c);let k=0,te=0,oe=0,fe=0,he=0,Ie=0,me=0;const De=(U+.5)*n;for(let _e=Math.floor(U*n);_e<(U+1)*n;_e++){const Se=Math.abs(De-(_e+.5))/C,Ce=(G+.5)*o,be=Se*Se;for(let Oe=Math.floor(G*o);Oe<(G+1)*o;Oe++){let re=Math.abs(Ce-(Oe+.5))/O;const ae=Math.sqrt(be+re*re);ae>=-1&&ae<=1&&(k=2*ae*ae*ae-3*ae*ae+1,k>0&&(re=4*(Oe+_e*p),me+=k*r[re+3],oe+=k,r[re+3]<255&&(k=k*r[re+3]/250),fe+=k*r[re],he+=k*r[re+1],Ie+=k*r[re+2],te+=k))}}S[X]=fe/te,S[X+1]=he/te,S[X+2]=Ie/te,S[X+3]=me/oe}}function D(r){return r?[r[0],r[1],r[2],r[3]/255]:[0,0,0,0]}function d(r){return r.data?.symbol??null}function L(r){return"CIMVectorMarker"===r.type||"CIMPictureMarker"===r.type||"CIMBarChartMarker"===r.type||"CIMCharacterMarker"===r.type||"CIMPieChartMarker"===r.type||"CIMStackedBarChartMarker"===r.type}function j(r){return"CIMGradientStroke"===r.type||"CIMPictureStroke"===r.type||"CIMSolidStroke"===r.type}function y(r){return null!=r&&("CIMGradientFill"===r.type||"CIMHatchFill"===r.type||"CIMPictureFill"===r.type||"CIMSolidFill"===r.type||"CIMWaterFill"===r.type)}function V(r){return null!=r&&("CIMMarkerPlacementAlongLineRandomSize"===r.type||"CIMMarkerPlacementAlongLineSameSize"===r.type||"CIMMarkerPlacementAlongLineVariableSize"===r.type||"CIMMarkerPlacementAtExtremities"===r.type||"CIMMarkerPlacementAtMeasuredUnits"===r.type||"CIMMarkerPlacementAtRatioPositions"===r.type||"CIMMarkerPlacementOnLine"===r.type||"CIMMarkerPlacementOnVertices"===r.type)}const T=(r,p=0)=>null==r||isNaN(r)?p:r,z=(r,p)=>r??p,W=(r,p)=>r??p,K=r=>r.tintColor?D(r.tintColor):[255,255,255,1],P=r=>{if(!r)return!1;for(const p of r)switch(p.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function R(){return Promise.all([t.e(3930),t.e(2076),t.e(4108)]).then(t.bind(t,27815))}function f(r){if(!r)return"normal";switch(r.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function s(r){if(!r)return"normal";switch(r.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function l(r){let p="normal",I="normal";if(r){const S=r.toLowerCase();S.includes("italic")?p="italic":S.includes("oblique")&&(p="oblique"),S.includes("bold")?I="bold":S.includes("light")&&(I="lighter")}return{style:p,weight:I}}function i(r){return r.underline?"underline":r.strikethrough?"line-through":"none"}function M(r){if(!r)return null;switch(r.type){case"CIMPolygonSymbol":if(r.symbolLayers)for(const p of r.symbolLayers){const I=M(p);if(null!=I)return I}break;case"CIMTextSymbol":return M(r.symbol);case"CIMSolidFill":return r.color}return null}function B(r){if(r)switch(r.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const p=r.symbolLayers;if(p)for(const I of p){const S=B(I);if(null!=S)return S}break}case"CIMTextSymbol":return B(r.symbol);case"CIMSolidStroke":return r.color}}function F(r){if(r)switch(r.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(r.symbolLayers)for(const p of r.symbolLayers){const I=F(p);if(void 0!==I)return I}break;case"CIMTextSymbol":return F(r.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return r.width}}function Z(r){switch(r){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function $(r){switch(r){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function H(r){return(r?Object.keys(r):[]).map(p=>({name:p,alias:p,type:"string"==typeof r[p]?"esriFieldTypeString":"esriFieldTypeDouble"}))}const N=r=>r.includes("data:image/svg+xml");function Q(r){if(!r)return null;switch(r.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function Y(r){return r&&r.charAt(0).toLowerCase()+r.slice(1)}function ee(r,p,I,S,c,g,e=!0){const{infos:o}=g;let n=1,O=0,C=0,U=0,G=1;for(const{absoluteAnchorPoint:te,offsetX:oe,offsetY:fe,rotation:he,size:Ie,frameHeight:me,rotateClockWise:De,scaleSymbolsProportionally:_e}of o)G=te?1:n,C=pe(oe,fe,O,G,C),U=ie(oe,fe,O,G,U),me&&(_e||e)&&(n*=Ie/me),O=ce(he,De,O);const X=pe(S,c,O,G,C),k=ie(S,c,O,G,U);return{size:r*n,rotation:ce(p,I,O),offsetX:X,offsetY:k}}function ne(r){if(null==r)return!1;if(Array.isArray(r))return r.every(p=>ne(p));switch(typeof r){case"string":return!!r;case"number":return!isNaN(r)}}function le(r,p){if("color"===p||"outlinecolor"===p||"backgroundcolor"===p||"borderlinecolor"===p||"tintcolor"===p)return[..._.K[p]];const I=_.D[r];if(!I)throw new Error(`InternalError: default value for type ${r}.`);return I[p]}function se(r){return"string"==typeof r?function ue(r){return r.split(" ").map(p=>Number(p))}(r):r}function Ee(r){return r?.dashTemplate&&(r.dashTemplate=se(r.dashTemplate)),r}function de(r){if(null==r)return"Normal";switch(r.type){case"CIMTextSymbol":return r.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const p=r.symbolLayers;if(!p)return"Normal";for(const I of p)if("CIMVectorMarker"===I.type)return de(I)}break;case"CIMVectorMarker":{const p=r.markerGraphics;if(!p)return"Normal";for(const I of p)if(I.symbol)return de(I.symbol)}}return"Normal"}function ge(r){if(r)switch(r.type){case"CIMTextSymbol":return r.height;case"CIMPointSymbol":{let p=0;if(r.symbolLayers)for(const I of r.symbolLayers)if(I)switch(I.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const S=I.size??_.D.CIMVectorMarker.size;S>p&&(p=S);break}}return p}case"CIMLineSymbol":case"CIMPolygonSymbol":{let p=0;if(r.symbolLayers)for(const I of r.symbolLayers)if(I)switch(I.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const S=I.width;null!=S&&S>p&&(p=S);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(I.markerPlacement&&V(I.markerPlacement)){const S=I.size??_.D.CIMVectorMarker.size;S>p&&(p=S)}break;case"CIMPictureFill":{const S=I.height;null!=S&&S>p&&(p=S)}}return p}}}function Me(r,p){if(null!==p){const I=p.get(r);return I?I.name:r}return r}function Pe(r){return r.map(p=>({...p,propertyName:Y(p.propertyName)}))}function ve(r){const p={};for(const I in r){const S=r[I];p[Y(I)]=S}return p}function ie(r,p,I,S,c){const g=I*Math.PI/180;if(g){const e=Math.cos(g);return(Math.sin(g)*r+e*p)*S+c}return p*S+c}function pe(r,p,I,S,c){const g=I*Math.PI/180;return g?(Math.cos(g)*r-Math.sin(g)*p)*S+c:r*S+c}function ce(r,p,I){return p?I-r:I+r}function ye(r,p,I){const S="Color"===I||"TintColor"===I||"ToColor"===I,c="Rotation"===I||"Angle"===I||"ToRotation"===I;let g=p[Y(I)];if(null!=g&&(S?g=[g[0]/255,g[1]/255,g[2]/255,g[3]/255]:c&&(g*=Math.PI/180)),null==g&&(g=le(p.type,I.toLowerCase()),null!=g&&(S?g=[g[0]/255,g[1]/255,g[2]/255,g[3]]:c&&(g*=Math.PI/180))),null!=p.primitiveName){const e=r[p.primitiveName];if(null!=e){const o=e[I];null==o||("string"==typeof o||"number"==typeof o||Array.isArray(o)?(g=o,null!=g&&(S?g=[g[0]/255,g[1]/255,g[2]/255,g[3]/255]:c&&(g*=Math.PI/180))):(g={valueExpressionInfo:o,defaultValue:g},null!=g&&(S?g={type:"Process",op:"ArcadeColor",value:g}:c&&(g={type:"Process",op:"Divide",left:g,right:180/Math.PI}))))}}if(null==g)throw new Error(`Failed to derive a value or an expression for "${I}".`);return g}function q(r,p){return Math.max(Math.min((r??p)/100,1),0)}},91644:(J,w,t)=>{t.d(w,{A7:()=>v,Cx:()=>E,Hk:()=>h,JJ:()=>j,SF:()=>D,UK:()=>A,jM:()=>d,x3:()=>L}),t(3248);var u=t(88521),x=t(55417),a=t(46602),b=t(47705),m=t(48254);const A=a.A.fromJSON(m.Cb),v=x.A.fromJSON(m.yM),E=u.A.fromJSON(m.WR),h=b.A.fromJSON(m.JZ);function D(y){if(null==y)return null;switch(y.type){case"mesh":return null;case"point":case"multipoint":return A;case"polyline":return v;case"polygon":case"extent":return E}return null}const d=a.A.fromJSON(m.nC),L=x.A.fromJSON(m.HW),j=u.A.fromJSON(m.b6)},48254:(J,w,t)=>{t.d(w,{Cb:()=>x,HW:()=>v,JR:()=>u,JZ:()=>m,WR:()=>b,b6:()=>E,fT:()=>_,nC:()=>A,yM:()=>a});const _=[252,146,31,255],u=[153,153,153,255],x={type:"esriSMS",style:"esriSMSCircle",size:6,color:_,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},a={type:"esriSLS",style:"esriSLSSolid",width:.75,color:_},b={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},m={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},A={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},v={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},E={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}}}]);