"use strict";(self.webpackChunkAngularClient=self.webpackChunkAngularClient||[]).push([[9544],{8897:(ut,q,s)=>{s.d(q,{F:()=>A,l:()=>_});var b=s(10467),W=s(90261),G=s(3248);const C=128e3;let z=null,x=null;function A(){return f.apply(this,arguments)}function f(){return f=(0,b.A)(function*(){return z||(z=function L(){return M.apply(this,arguments)}()),z}),f.apply(this,arguments)}function M(){return(M=(0,b.A)(function*(){x=yield((0,G.A)("esri-csp-restrictions")?yield s.e(4049).then(s.bind(s,34049)).then(R=>R.l):yield s.e(787).then(s.bind(s,50787)).then(R=>R.l)).default({locateFile:R=>(0,W.s)(`esri/core/libs/libtess/${R}`)})})).apply(this,arguments)}function _(D,R){const g=Math.max(D.length,C);return x.triangulate(D,R,g)}},10223:(ut,q,s)=>{s.d(q,{V:()=>A});var b=s(72137),W=s(53262),G=s(47961),C=s(91486),z=s(26747);class A{static executeEffects(L,M,_,D,R){const r=(0,z.ll)(L);let l=new G.k(M);for(const u of L){const T=(0,C.A)(u);T&&(l=T.execute(l,u,1.3333333333333333,_,D,r,R))}return l}static applyEffects(L,M,_){if(!L)return M;const D=(0,z.ll)(L);let R,g=new G.k(b.z.fromJSONCIM(M));for(const u of L){const T=(0,C.A)(u);T&&(g=T.execute(g,u,1,null,_,D,!1))}const r=[];let l=null;for(;R=g.next();)r.push(...(0,W.x)(R)),l=R.geometryType;return 0===r.length||null===l?null:"esriGeometryPolygon"===l?{rings:r}:{paths:r}}}},71725:(ut,q,s)=>{s.d(q,{l:()=>W});var b=s(91486);class W{static getPlacement(C,z,x,A,f,L){const M=(0,b.c)(x);return M?(-1===z&&C.invertY(),M.execute(C,x,A,f,L)):null}}},7933:(ut,q,s)=>{s.d(q,{i:()=>R});var b=s(65374),W=s(47669);function G(g,r){return g.x===r.x&&g.y===r.y}function z(g,r){return g.x=r.y,g.y=-r.x,g}function x(g,r){return g.x=-r.y,g.y=r.x,g}function A(g,r){return g.x=r.x,g.y=r.y,g}function f(g,r){return g.x=-r.x,g.y=-r.y,g}function L(g){return Math.sqrt(g.x*g.x+g.y*g.y)}function M(g,r){return g.x*r.y-g.y*r.x}function _(g,r){return g.x*r.x+g.y*r.y}function D(g,r,l,u){return g.x=r.x*l+r.y*u,g.y=r.x*u-r.y*l,g}class R{constructor(r,l,u){this._writeVertex=r,this._writeTriangle=l,this._canUseThinTessellation=u,this._prevNormal={x:void 0,y:void 0},this._nextNormal={x:void 0,y:void 0},this._textureNormalLeft={x:0,y:1},this._textureNormalRight={x:0,y:-1},this._textureNormal={x:void 0,y:void 0},this._joinNormal={x:void 0,y:void 0},this._inner={x:void 0,y:void 0},this._outer={x:void 0,y:void 0},this._roundStart={x:void 0,y:void 0},this._roundEnd={x:void 0,y:void 0},this._startBreak={x:void 0,y:void 0},this._endBreak={x:void 0,y:void 0},this._innerPrev={x:void 0,y:void 0},this._innerNext={x:void 0,y:void 0},this._bevelStart={x:void 0,y:void 0},this._bevelEnd={x:void 0,y:void 0},this._bevelMiddle={x:void 0,y:void 0}}tessellate(r,l,u=this._canUseThinTessellation){(function C(g){if(!g)return;const r=g.length;if(r<=1)return;let l=0;for(let u=1;u<r;u++)G(g[u],g[l])||++l===u||(g[l]=g[u]);g.length=l+1})(r),u&&l.halfWidth<W.Gh&&!l.offset?this._tessellateThin(r,l):this._tessellate(r,l)}_tessellateThin(r,l){if(r.length<2)return;const u=l.wrapDistance||65535;let T=l.initialDistance||0,v=!1,S=r[0].x,p=r[0].y;const w=r.length;for(let H=1;H<w;++H){v&&(v=!1,T=0);let X=r[H].x,J=r[H].y,U=X-S,m=J-p,y=Math.sqrt(U*U+m*m);if(U/=y,m/=y,T+y>u){v=!0;const a=(u-T)/y;y=u-T,X=(1-a)*S+a*X,J=(1-a)*p+a*J,--H}const k=this._writeVertex(S,p,0,0,U,m,m,-U,0,-1,T),V=this._writeVertex(S,p,0,0,U,m,-m,U,0,1,T);T+=y;const O=this._writeVertex(X,J,0,0,U,m,m,-U,0,-1,T),n=this._writeVertex(X,J,0,0,U,m,-m,U,0,1,T);this._writeTriangle(k,V,O),this._writeTriangle(V,O,n),S=X,p=J}}_tessellate(r,l){const T=r[r.length-1],v=G(r[0],T);if(r.length<(v?3:2))return;const p=l.pixelCoordRatio,w=null!=l.capType?l.capType:b.xR.BUTT,H=null!=l.joinType?l.joinType:b.JO.MITER,X=null!=l.miterLimit?Math.min(l.miterLimit,4):2,J=null!=l.roundLimit?Math.min(l.roundLimit,1.05):1.05,U=null!=l.halfWidth?l.halfWidth:2,m=!!l.textured;let y,k,V,O=null;const n=this._prevNormal,a=this._nextNormal;let N=-1,F=-1;const B=this._joinNormal;let Y,K;const $=this._textureNormalLeft,j=this._textureNormalRight,Z=this._textureNormal;let rt=-1,et=-1;const ht=l.wrapDistance||65535;let nt=l.initialDistance||0;const _t=this._writeVertex,yt=this._writeTriangle,at=(e,c,o,h,i,d)=>{const E=_t(k,V,Y,K,o,h,e,c,i,d,nt);return rt>=0&&et>=0&&E>=0&&yt(rt,et,E),rt=et,et=E,E};v&&(y=r[r.length-2],a.x=T.x-y.x,a.y=T.y-y.y,F=L(a),a.x/=F,a.y/=F);let dt=!1;for(let e=0;e<r.length;++e){if(dt&&(dt=!1,nt=0),y&&(n.x=-a.x,n.y=-a.y,N=F,nt+N>ht&&(dt=!0)),dt){const P=(ht-nt)/N;N=ht-nt,y={x:(1-P)*y.x+P*r[e].x,y:(1-P)*y.y+P*r[e].y},--e}else y=r[e];k=y.x,V=y.y;const c=e<=0&&!dt,o=e===r.length-1;if(c||(nt+=N),O=o?v?r[1]:null:r[e+1],O?(a.x=O.x-k,a.y=O.y-V,F=L(a),a.x/=F,a.y/=F):(a.x=void 0,a.y=void 0),!v){if(c){x(B,a),Y=B.x,K=B.y,w===b.xR.SQUARE&&(at(-a.y-a.x,a.x-a.y,a.x,a.y,0,-1),at(a.y-a.x,-a.x-a.y,a.x,a.y,0,1)),w===b.xR.ROUND&&(at(-a.y-a.x,a.x-a.y,a.x,a.y,-1,-1),at(a.y-a.x,-a.x-a.y,a.x,a.y,-1,1)),w!==b.xR.ROUND&&w!==b.xR.BUTT||(at(-a.y,a.x,a.x,a.y,0,-1),at(a.y,-a.x,a.x,a.y,0,1));continue}if(o){z(B,n),Y=B.x,K=B.y,w!==b.xR.ROUND&&w!==b.xR.BUTT||(at(n.y,-n.x,-n.x,-n.y,0,-1),at(-n.y,n.x,-n.x,-n.y,0,1)),w===b.xR.SQUARE&&(at(n.y-n.x,-n.x-n.y,-n.x,-n.y,0,-1),at(-n.y-n.x,n.x-n.y,-n.x,-n.y,0,1)),w===b.xR.ROUND&&(at(n.y-n.x,-n.x-n.y,-n.x,-n.y,1,-1),at(-n.y-n.x,n.x-n.y,-n.x,-n.y,1,1));continue}}let h,i,d=-M(n,a);if(Math.abs(d)<.01)_(n,a)>0?(B.x=n.x,B.y=n.y,d=1,h=Number.MAX_VALUE,i=!0):(x(B,a),d=1,h=1,i=!1);else{B.x=(n.x+a.x)/d,B.y=(n.y+a.y)/d,h=L(B);const P=(h-1)*U*p;i=h>4||P>N&&P>F}Y=B.x,K=B.y;let E=H;switch(H){case b.JO.BEVEL:h<1.05&&(E=b.JO.MITER);break;case b.JO.ROUND:h<J&&(E=b.JO.MITER);break;case b.JO.MITER:h>X&&(E=b.JO.BEVEL)}switch(E){case b.JO.MITER:if(at(B.x,B.y,-n.x,-n.y,0,-1),at(-B.x,-B.y,-n.x,-n.y,0,1),o)break;if(m){const P=dt?0:nt;rt=this._writeVertex(k,V,Y,K,a.x,a.y,B.x,B.y,0,-1,P),et=this._writeVertex(k,V,Y,K,a.x,a.y,-B.x,-B.y,0,1,P)}break;case b.JO.BEVEL:{const P=d<0;let I,Q,tt,ot;if(P){const lt=rt;rt=et,et=lt,I=$,Q=j}else I=j,Q=$;if(i)tt=P?x(this._innerPrev,n):z(this._innerPrev,n),ot=P?z(this._innerNext,a):x(this._innerNext,a);else{const lt=P?f(this._inner,B):A(this._inner,B);tt=lt,ot=lt}const ct=P?z(this._bevelStart,n):x(this._bevelStart,n);at(tt.x,tt.y,-n.x,-n.y,I.x,I.y);const it=at(ct.x,ct.y,-n.x,-n.y,Q.x,Q.y);if(o)break;const st=P?x(this._bevelEnd,a):z(this._bevelEnd,a);if(i){const lt=this._writeVertex(k,V,Y,K,-n.x,-n.y,0,0,0,0,nt);rt=this._writeVertex(k,V,Y,K,a.x,a.y,ot.x,ot.y,I.x,I.y,nt),et=this._writeVertex(k,V,Y,K,a.x,a.y,st.x,st.y,Q.x,Q.y,nt),this._writeTriangle(it,lt,et)}else{if(m){const lt=this._bevelMiddle;lt.x=(ct.x+st.x)/2,lt.y=(ct.y+st.y)/2,D(Z,lt,-n.x,-n.y),at(lt.x,lt.y,-n.x,-n.y,Z.x,Z.y),D(Z,lt,a.x,a.y),rt=this._writeVertex(k,V,Y,K,a.x,a.y,lt.x,lt.y,Z.x,Z.y,nt),et=this._writeVertex(k,V,Y,K,a.x,a.y,ot.x,ot.y,I.x,I.y,nt)}else{const lt=rt;rt=et,et=lt}at(st.x,st.y,a.x,a.y,Q.x,Q.y)}if(P){const lt=rt;rt=et,et=lt}break}case b.JO.ROUND:{const P=d<0;let I,Q;if(P){const pt=rt;rt=et,et=pt,I=$,Q=j}else I=j,Q=$;const tt=P?f(this._inner,B):A(this._inner,B);let ot,ct;i?(ot=P?x(this._innerPrev,n):z(this._innerPrev,n),ct=P?z(this._innerNext,a):x(this._innerNext,a)):(ot=tt,ct=tt);const it=P?z(this._roundStart,n):x(this._roundStart,n),st=P?x(this._roundEnd,a):z(this._roundEnd,a),lt=at(ot.x,ot.y,-n.x,-n.y,I.x,I.y),xt=at(it.x,it.y,-n.x,-n.y,Q.x,Q.y);if(o)break;const mt=this._writeVertex(k,V,Y,K,-n.x,-n.y,0,0,0,0,nt);i||this._writeTriangle(rt,et,mt);const ft=f(this._outer,tt),Et=this._writeVertex(k,V,Y,K,a.x,a.y,st.x,st.y,Q.x,Q.y,nt);let Mt,Pt;const Tt=h>2;if(Tt){let pt;h!==Number.MAX_VALUE?(ft.x/=h,ft.y/=h,pt=_(n,ft),pt=(h*(pt*pt-1)+1)/pt):pt=-1,Mt=P?z(this._startBreak,n):x(this._startBreak,n),Mt.x+=n.x*pt,Mt.y+=n.y*pt,Pt=P?x(this._endBreak,a):z(this._endBreak,a),Pt.x+=a.x*pt,Pt.y+=a.y*pt}D(Z,ft,-n.x,-n.y);const Dt=this._writeVertex(k,V,Y,K,-n.x,-n.y,ft.x,ft.y,Z.x,Z.y,nt);D(Z,ft,a.x,a.y);const Lt=m?this._writeVertex(k,V,Y,K,a.x,a.y,ft.x,ft.y,Z.x,Z.y,nt):Dt,At=mt,Ot=m?this._writeVertex(k,V,Y,K,a.x,a.y,0,0,0,0,nt):mt;let vt=-1,gt=-1;if(Tt&&(D(Z,Mt,-n.x,-n.y),vt=this._writeVertex(k,V,Y,K,-n.x,-n.y,Mt.x,Mt.y,Z.x,Z.y,nt),D(Z,Pt,a.x,a.y),gt=this._writeVertex(k,V,Y,K,a.x,a.y,Pt.x,Pt.y,Z.x,Z.y,nt)),m?Tt?(this._writeTriangle(At,xt,vt),this._writeTriangle(At,vt,Dt),this._writeTriangle(Ot,Lt,gt),this._writeTriangle(Ot,gt,Et)):(this._writeTriangle(At,xt,Dt),this._writeTriangle(Ot,Lt,Et)):Tt?(this._writeTriangle(mt,xt,vt),this._writeTriangle(mt,vt,gt),this._writeTriangle(mt,gt,Et)):(this._writeTriangle(mt,xt,Dt),this._writeTriangle(mt,Lt,Et)),i?(rt=this._writeVertex(k,V,Y,K,a.x,a.y,ct.x,ct.y,I.x,I.y,nt),et=Et):(rt=m?this._writeVertex(k,V,Y,K,a.x,a.y,ct.x,ct.y,I.x,I.y,nt):lt,this._writeTriangle(rt,Ot,Et),et=Et),P){const pt=rt;rt=et,et=pt}break}}}}}},73584:(ut,q,s)=>{s.d(q,{uS:()=>dt,FE:()=>at,lO:()=>ht,XZ:()=>_t}),s(92405);var W=s(8897),G=s(91766),C=s(13682),z=s(47669);function A(e,c,o,h,i,d,E){K=0;const P=(h-o)*d,I=i&&i.length,Q=I?(i[0]-o)*d:P;let tt,ot,ct,it,st,lt=f(c,o,0,0,Q,d,!0);if(lt&&lt.next!==lt.prev){if(I&&(lt=function l(e,c,o,h,i,d){const E=new Array;for(let P=0,I=h.length;P<I;P++){const Q=f(e,c,0,h[P]*d,P<I-1?h[P+1]*d:o*d,d,!1);Q===Q.next&&(Q.steiner=!0),E.push(r(Q))}E.sort(k);for(const P of E)i=u(P,i);return i}(c,o,h,i,lt,d)),P>80*d){tt=ct=c[0+o*d],ot=it=c[1+o*d];for(let xt=d;xt<Q;xt+=d){const mt=c[xt+o*d],ft=c[xt+1+o*d];tt=Math.min(tt,mt),ot=Math.min(ot,ft),ct=Math.max(ct,mt),it=Math.max(it,ft)}st=Math.max(ct-tt,it-ot),st=0!==st?1/st:0}M(lt,e,d,tt,ot,st,E,0)}}function f(e,c,o,h,i,d,E){let P;if(E===function X(e,c,o,h,i,d){let E=0;for(let P=h,I=i-d;P<i;P+=d)E+=(e[I+c*d]-e[P+c*d])*(e[P+1+c*d]+e[I+1+c*d]),I=P;return E}(e,c,0,h,i,d)>0)for(let I=h;I<i;I+=d)P=R(I+c*d,e[I+c*d],e[I+1+c*d],P);else for(let I=i-d;I>=h;I-=d)P=R(I+c*d,e[I+c*d],e[I+1+c*d],P);return P&&y(P,P.next)&&(g(P),P=P.next),P}function L(e,c=e){if(!e)return e;let o,h=e;do{if(o=!1,h.steiner||!y(h,h.next)&&0!==p(h.prev,h,h.next))h=h.next;else{if(g(h),h=c=h.prev,h===h.next)break;o=!0}}while(o||h!==c);return c}function M(e,c,o,h,i,d,E,P){if(!e)return;!P&&d&&(e=v(e,h,i,d));let I=e;for(;e.prev!==e.next;){const Q=e.prev,tt=e.next;if(d?D(e,h,i,d):_(e))c.push(Q.index/o+E),c.push(e.index/o+E),c.push(tt.index/o+E),g(e),e=tt.next,I=tt.next;else if((e=tt)===I){P?1===P?M(e=V(e,c,o,E),c,o,h,i,d,E,2):2===P&&O(e,c,o,h,i,d,E):M(L(e),c,o,h,i,d,E,1);break}}}function _(e){const c=e.prev,o=e,h=e.next;if(p(c,o,h)>=0)return!1;let i=e.next.next;const d=i;let E=0;for(;i!==e.prev&&(0===E||i!==d);){if(E++,J(c.x,c.y,o.x,o.y,h.x,h.y,i.x,i.y)&&p(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function D(e,c,o,h){const i=e.prev,d=e,E=e.next;if(p(i,d,E)>=0)return!1;const Q=i.x>d.x?i.x>E.x?i.x:E.x:d.x>E.x?d.x:E.x,tt=i.y>d.y?i.y>E.y?i.y:E.y:d.y>E.y?d.y:E.y,ot=m(i.x<d.x?i.x<E.x?i.x:E.x:d.x<E.x?d.x:E.x,i.y<d.y?i.y<E.y?i.y:E.y:d.y<E.y?d.y:E.y,c,o,h),ct=m(Q,tt,c,o,h);let it=e.prevZ,st=e.nextZ;for(;it&&it.z>=ot&&st&&st.z<=ct;){if(it!==e.prev&&it!==e.next&&J(i.x,i.y,d.x,d.y,E.x,E.y,it.x,it.y)&&p(it.prev,it,it.next)>=0||(it=it.prevZ,st!==e.prev&&st!==e.next&&J(i.x,i.y,d.x,d.y,E.x,E.y,st.x,st.y)&&p(st.prev,st,st.next)>=0))return!1;st=st.nextZ}for(;it&&it.z>=ot;){if(it!==e.prev&&it!==e.next&&J(i.x,i.y,d.x,d.y,E.x,E.y,it.x,it.y)&&p(it.prev,it,it.next)>=0)return!1;it=it.prevZ}for(;st&&st.z<=ct;){if(st!==e.prev&&st!==e.next&&J(i.x,i.y,d.x,d.y,E.x,E.y,st.x,st.y)&&p(st.prev,st,st.next)>=0)return!1;st=st.nextZ}return!0}function R(e,c,o,h){const i=F.create(e,c,o);return h?(i.next=h.next,i.prev=h,h.next.prev=i,h.next=i):(i.prev=i,i.next=i),i}function g(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function r(e){let c=e,o=e;do{(c.x<o.x||c.x===o.x&&c.y<o.y)&&(o=c),c=c.next}while(c!==e);return o}function u(e,c){const o=function T(e,c){let o=c;const h=e.x,i=e.y;let d,E=-1/0;do{if(i<=o.y&&i>=o.next.y&&o.next.y!==o.y){const ct=o.x+(i-o.y)*(o.next.x-o.x)/(o.next.y-o.y);if(ct<=h&&ct>E){if(E=ct,ct===h){if(i===o.y)return o;if(i===o.next.y)return o.next}d=o.x<o.next.x?o:o.next}}o=o.next}while(o!==c);if(!d)return null;if(h===E)return d.prev;const P=d,I=d.x,Q=d.y;let tt,ot=1/0;for(o=d.next;o!==P;)h>=o.x&&o.x>=I&&h!==o.x&&J(i<Q?h:E,i,I,Q,i<Q?E:h,i,o.x,o.y)&&(tt=Math.abs(i-o.y)/(h-o.x),(tt<ot||tt===ot&&o.x>d.x)&&U(o,e)&&(d=o,ot=tt)),o=o.next;return d}(e,c);if(!o)return c;const h=N(o,e);return L(h,h.next),L(o,o.next)}function v(e,c,o,h){let i;for(;i!==e;i=i.next){if(i=i||e,null===i.z&&(i.z=m(i.x,i.y,c,o,h)),i.prev.next!==i||i.next.prev!==i)return i.prev.next=i,i.next.prev=i,v(e,c,o,h);i.prevZ=i.prev,i.nextZ=i.next}return e.prevZ.nextZ=null,e.prevZ=null,function S(e){let c,o=1;for(;;){let h,i=e;e=null,c=null;let d=0;for(;i;){d++,h=i;let E=0;for(;E<o&&h;E++)h=h.nextZ;let P=o;for(;E>0||P>0&&h;){let I;0===E?(I=h,h=h.nextZ,P--):0!==P&&h?i.z<=h.z?(I=i,i=i.nextZ,E--):(I=h,h=h.nextZ,P--):(I=i,i=i.nextZ,E--),c?c.nextZ=I:e=I,I.prevZ=c,c=I}i=h}if(c.nextZ=null,o*=2,d<2)return e}}(e)}function p(e,c,o){return(c.y-e.y)*(o.x-c.x)-(c.x-e.x)*(o.y-c.y)}function w(e,c,o,h){return!!(y(e,c)&&y(o,h)||y(e,h)&&y(o,c))||p(e,c,o)>0!=p(e,c,h)>0&&p(o,h,e)>0!=p(o,h,c)>0}function J(e,c,o,h,i,d,E,P){return(i-E)*(c-P)-(e-E)*(d-P)>=0&&(e-E)*(h-P)-(o-E)*(c-P)>=0&&(o-E)*(d-P)-(i-E)*(h-P)>=0}function U(e,c){return p(e.prev,e,e.next)<0?p(e,c,e.next)>=0&&p(e,e.prev,c)>=0:p(e,c,e.prev)<0||p(e,e.next,c)<0}function m(e,c,o,h,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-o)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=32767*(c-h)*i)|c<<8))|c<<4))|c<<2))|c<<1))<<1}function y(e,c){return e.x===c.x&&e.y===c.y}function k(e,c){return e.x-c.x}function V(e,c,o,h){let i=e;do{const d=i.prev,E=i.next.next;!y(d,E)&&w(d,i,i.next,E)&&U(d,E)&&U(E,d)&&(c.push(d.index/o+h),c.push(i.index/o+h),c.push(E.index/o+h),g(i),g(i.next),i=e=E),i=i.next}while(i!==e);return i}function O(e,c,o,h,i,d,E){let P=e;do{let I=P.next.next;for(;I!==P.prev;){if(P.index!==I.index&&n(P,I)){let Q=N(P,I);return P=L(P,P.next),Q=L(Q,Q.next),M(P,c,o,h,i,d,E,0),void M(Q,c,o,h,i,d,E,0)}I=I.next}P=P.next}while(P!==e)}function n(e,c){return e.next.index!==c.index&&e.prev.index!==c.index&&!function H(e,c){let o=e;do{if(o.index!==e.index&&o.next.index!==e.index&&o.index!==c.index&&o.next.index!==c.index&&w(o,o.next,e,c))return!0;o=o.next}while(o!==e);return!1}(e,c)&&U(e,c)&&U(c,e)&&function a(e,c){let o=e,h=!1;const i=(e.x+c.x)/2,d=(e.y+c.y)/2;do{o.y>d!=o.next.y>d&&o.next.y!==o.y&&i<(o.next.x-o.x)*(d-o.y)/(o.next.y-o.y)+o.x&&(h=!h),o=o.next}while(o!==e);return h}(e,c)}function N(e,c){const o=F.create(e.index,e.x,e.y),h=F.create(c.index,c.x,c.y),i=e.next,d=c.prev;return e.next=c,c.prev=e,o.next=i,i.prev=o,h.next=o,o.prev=h,d.next=h,h.prev=d,h}s(3248);class F{constructor(){this.index=0,this.x=0,this.y=0,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}static create(c,o,h){const i=K<B.length?B[K++]:new F;return i.index=c,i.x=o,i.y=h,i.prev=null,i.next=null,i.z=null,i.prevZ=null,i.nextZ=null,i.steiner=!1,i}}const B=[];let K=0;for(let e=0;e<8096;e++)B.push(new F);const $=1e-5,j=new G.O3(0,0,0,1,0),Z=new G.O3(0,0,0,1,0);function rt(e,c,o){let h=0;for(let i=1;i<o;i++)h+=(e[2*(c+i)]-e[2*(c+i-1)])*(e[2*(c+i)+1]+e[2*(c+i-1)+1]);return h}function et(e,c,o,h,i){let d=0;for(let P=o;P<h;P+=3){const I=2*(e[P]-i),Q=2*(e[P+1]-i),tt=2*(e[P+2]-i);d+=Math.abs((c[I]-c[tt])*(c[Q+1]-c[I+1])-(c[I]-c[Q])*(c[tt+1]-c[I+1]))}return d}function ht(e,c){const{coords:o,lengths:h}=c,d=e;let E=0;for(let P=0;P<h.length;){let I=P,Q=h[P],tt=rt(o,E,Q);const ot=[];for(;++I<h.length;){const lt=h[I],xt=rt(o,E+Q,lt);if(!(xt>0))break;tt+=xt,ot.push(E+Q),Q+=lt}const ct=d.length;A(d,o,E,E+Q,ot,2,0);const it=et(d,o,ct,d.length,0),st=Math.abs(tt);if(Math.abs((it-st)/Math.max(1e-7,st))>$)return d.length=0,!1;P=I,E+=Q}return!0}function _t(e){const{coords:c,lengths:o}=e,{buffer:h}=(0,W.l)(c,o);return h}function at(e,c){if(null==e)return null;if(!function yt(e,c,o){let h=0;for(let i=0;i<e.lengths.length;i++){const d=e.lengths[i];for(let E=0;E<d;E++){const P=e.coords[2*(E+h)],I=e.coords[2*(E+h)+1];if(P<c||P>o||I<c||I>o)return!0}h+=d}return!1}(e,-128,z.CQ+128))return e;j.setPixelMargin(c),j.reset(G.dC.Polygon);let o=0;for(let E=0;E<e.lengths.length;E++){const P=e.lengths[E];let I=e.coords[2*(0+o)],Q=e.coords[2*(0+o)+1];j.moveTo(I,Q);for(let tt=1;tt<P;tt++)I=e.coords[2*(tt+o)],Q=e.coords[2*(tt+o)+1],j.lineTo(I,Q);j.close(),o+=P}const h=j.result(!1);if(!h)return null;const i=[],d=[];for(const E of h){let P=0;for(const I of E)d.push(I.x),d.push(I.y),P++;i.push(P)}return new C.A(i,d)}function dt(e,c){Z.setPixelMargin(c);const o=Z,h=-c,i=z.CQ+c;let d=[],E=!1;if(!e.nextPath())return null;let P=e.pathLength(),I=!0;for(;I;){e.seekPathStart();const Q=[];if(!e.pathSize)return null;o.reset(G.dC.LineString),e.nextPoint();let tt=e.x,ot=e.y;if(E)o.moveTo(tt,ot);else{if(tt<h||tt>i||ot<h||ot>i){E=!0;continue}Q.push({x:tt,y:ot})}let ct=!1;for(;e.nextPoint();)if(tt=e.x,ot=e.y,E)o.lineTo(tt,ot);else{if(tt<h||tt>i||ot<h||ot>i){ct=!0;break}Q.push({x:tt,y:ot})}if(ct)E=!0;else{if(E){const it=o.resultWithStarts();if(it)for(const st of it)d.push({...st,pathLength:P})}else d.push({line:Q,start:0,pathLength:P});I=e.nextPath(),P=I?e.pathLength():0,E=!1}}return d=d.filter(Q=>Q.line.length>1),0===d.length?null:d}j.setExtent(z.CQ),Z.setExtent(z.CQ)},16006:(ut,q,s)=>{s.d(q,{k:()=>C});var b=s(77233),W=s(50915);const G={createComputedParams:z=>z,optionalAttributes:{},attributes:{id:{type:W.pe.UNSIGNED_BYTE,count:3,pack:"id"},bitset:{type:W.pe.UNSIGNED_BYTE,count:1},pos:{type:W.pe.SHORT,count:2,pack:"position",packPrecisionFactor:10},inverseArea:{type:W.pe.FLOAT,count:1,packTessellation:({inverseArea:z})=>z}}};class C extends b.N{constructor(){super(...arguments),this.vertexSpec=G}createTesselationParams(x){return{inverseArea:1/x.readGeometryArea()}}}},77233:(ut,q,s)=>{s.d(q,{N:()=>f});var b=s(10467),W=s(3248),G=s(8897),C=s(73584),z=s(9368);const A=(0,W.A)("featurelayer-fast-triangulation-enabled");class f extends z.r{loadDependencies(){var M=()=>super.loadDependencies,_=this;return(0,b.A)(function*(){yield Promise.all([M().call(_),(0,G.F)()])})()}_write(M,_,D){const R=D?.asOptimized()??_.readGeometryForDisplay(),g=this._clip(R);g&&(M.recordStart(this.instanceId,this.attributeLayout),this._writeGeometry(M,_,g),M.recordEnd())}_clip(M){return M?(0,C.FE)(M,this.hasEffects?256:8):null}_writeGeometry(M,_,D){const R=D.maxLength>100,g=[],r=this.createTesselationParams(_);if(!R&&A&&(0,C.lO)(g,D))return void(g.length&&this._writeVertices(M,_,D.coords,r,g));const l=(0,C.XZ)(D);this._writeVertices(M,_,l,r)}_writeVertices(M,_,D,R,g){const r=_.getDisplayId(),l=M.vertexCount(),u=this.hasEffects;let T=0;if(g)for(const v of g){const S=D[2*v],p=D[2*v+1];u&&M.recordBounds(S,p,0,0),this._writeVertex(M,r,S,p,R),T++}else for(let v=0;v<D.length;v+=2){const S=Math.round(D[v]),p=Math.round(D[v+1]);u&&M.recordBounds(S,p,0,0),this._writeVertex(M,r,S,p,R),T++}M.indexEnsureSize(T);for(let v=0;v<T;v++)M.indexWrite(v+l)}}},13494:(ut,q,s)=>{s.d(q,{KE:()=>M,KI:()=>f,lB:()=>L,oI:()=>A});var b=s(67685),W=s(4139),G=s(98522),C=s(76740),z=s(90731),x=s(50915);function A(_){const{sprite:D,aspectRatio:R,scaleProportionally:g}=_,r=(0,b.Lz)(_.height);let u=r*R;return u<=0?u=D.width:g&&(u*=D.width/D.height),{width:u,height:r>0?r:D.height}}function f(_){const{applyRandomOffset:D,sampleAlphaOnly:R}=_;return(0,G.xo)([[z.Fz,D],[z.cn,R]])}const L={createComputedParams:_=>_,optionalAttributes:C.l.optionalAttributes,attributes:{...C.l.attributes,bitset:{count:1,type:x.pe.UNSIGNED_BYTE,pack:f},width:{count:1,type:x.pe.HALF_FLOAT,pack:_=>A(_).width},height:{count:1,type:x.pe.HALF_FLOAT,pack:_=>A(_).height},offset:{count:2,type:x.pe.HALF_FLOAT,pack:({offsetX:_,offsetY:D})=>[(0,b.Lz)(_),-(0,b.Lz)(D)]},scale:{count:2,type:x.pe.UNSIGNED_BYTE,packPrecisionFactor:16,pack:({scaleX:_,scaleY:D})=>[_,D]},angle:{count:1,type:x.pe.UNSIGNED_BYTE,pack:({angle:_})=>(0,W.wV)(_)}}};class M extends C.m{constructor(){super(...arguments),this.vertexSpec=L}}},58096:(ut,q,s)=>{s.d(q,{O:()=>g});var b=s(10467),W=s(67685),G=s(72137),C=s(13494),z=s(98522),x=s(79184),A=s(90731),f=s(50915);const L=C.lB,_={createComputedParams:r=>r,optionalAttributes:L.optionalAttributes,attributes:{...L.attributes,bitset:{type:f.pe.UNSIGNED_BYTE,count:1,pack:r=>(0,C.KI)(r)},aux1:{count:1,type:f.pe.HALF_FLOAT,pack:r=>(0,C.oI)(r).width},aux2:{count:1,type:f.pe.HALF_FLOAT,pack:r=>(0,C.oI)(r).height},aux3:{count:2,type:f.pe.HALF_FLOAT,pack:({offsetX:r,offsetY:l})=>[(0,W.Lz)(r),(0,W.Lz)(l)]},aux4:{count:2,type:f.pe.UNSIGNED_BYTE,pack:({scaleX:r,scaleY:l})=>[r*A.cZ,l*A.cZ]}}},D={createComputedParams:r=>r,optionalAttributes:L.optionalAttributes,attributes:{...L.attributes,color:x.e4.attributes.color,bitset:{type:f.pe.UNSIGNED_BYTE,count:1,pack:r=>(0,z.xo)([[A.Xx,!0]])},aux1:{count:1,type:f.pe.HALF_FLOAT,pack:r=>(0,W.Lz)(.5*r.width)},aux2:{count:1,type:f.pe.HALF_FLOAT,pack:r=>(0,W.Lz)(.5*r.referenceWidth)},aux3:{count:2,type:f.pe.HALF_FLOAT,packTessellation:({extrusionOffsetX:r,extrusionOffsetY:l})=>[r,l]},aux4:{count:2,type:f.pe.UNSIGNED_BYTE,packTessellation:({normalX:r,normalY:l})=>[r*A.cZ+A.v9,l*A.cZ+A.v9]}}};class R extends x.eY{constructor(){super(...arguments),this.vertexSpec=D}}class g extends x.w0{constructor(){super(...arguments),this.vertexSpec=_}_createOutlineWriter(l,u,T,v){return new R(l,u,T,v)}_write(l,u,T){const v=T?.asOptimized()??u.readGeometryForDisplay(),S=this._clip(v);if(!S)return;const p=this.evaluatedMeshParams.sprite?.textureBinding;l.recordStart(this.instanceId,this.attributeLayout,p),this._writeGeometry(l,u,S),this._lineMeshWriter.writeLineVertices(l,G.z.fromOptimizedCIM(S,"esriGeometryPolyline"),u),l.recordEnd()}ensurePacked(l,u,T){super.ensurePacked(l,u,T),this._lineMeshWriter.ensurePacked(l,u,T)}enqueueRequest(l,u,T){super.enqueueRequest(l,u,T),this._lineMeshWriter.enqueueRequest(l,u,T)}loadDependencies(){var l=()=>super.loadDependencies,u=this;return(0,b.A)(function*(){yield Promise.all([l().call(u),u._lineMeshWriter.loadDependencies()])})()}}},82870:(ut,q,s)=>{s.d(q,{Y:()=>x,v:()=>z});var b=s(47669),W=s(77233),G=s(98522),C=s(50915);const z={createComputedParams:A=>A,optionalAttributes:{zoomRange:{type:C.pe.SHORT,count:2,packPrecisionFactor:b.fq,pack:({scaleInfo:A},{tileInfo:f})=>(0,G.My)(A,f)}},attributes:{id:{type:C.pe.UNSIGNED_BYTE,count:3,pack:"id"},bitset:{type:C.pe.UNSIGNED_BYTE,count:1},pos:{type:C.pe.SHORT,count:2,pack:"position",packPrecisionFactor:10},color:{type:C.pe.UNSIGNED_BYTE,count:4,normalized:!0,pack:({color:A})=>(0,G.Jb)(A)}}};class x extends W.N{constructor(){super(...arguments),this.vertexSpec=z}createTesselationParams(f){return null}}},88636:(ut,q,s)=>{s.d(q,{S:()=>v});var b=s(65374),W=s(47669),G=s(77233),C=s(82870),z=s(87187),x=s(35150),A=s(69287),f=s(67685);class M{constructor(p,w){this._size=p,this._sizeUnits=w,this._relativeSize=null}get relativeSize(){return this._relativeSize??=this.calculateRelativeSize(),this._relativeSize}calculateRelativeSize(){if(this._sizeUnits===b.OW.Relative){const p=Math.min(this._size/100,1);return[p,p]}return this.calculateRelativeSizeFromAbsolute()}}class _ extends M{constructor(p,w,H,X){super(w,H),this.rotationMatrix00=1,this.rotationMatrix01=0,this.rotationMatrix10=0,this.rotationMatrix11=1,this.bounds={xmin:1/0,ymin:1/0,xmax:-1/0,ymax:-1/0},this.rotationMatrix00=Math.cos(X),this.rotationMatrix01=-Math.sin(X),this.rotationMatrix10=-this.rotationMatrix01,this.rotationMatrix11=this.rotationMatrix00;const{bounds:J,rotationMatrix00:U,rotationMatrix01:m,rotationMatrix10:y,rotationMatrix11:k}=this;p.forEachVertex((V,O)=>{const n=V*U+O*m,a=V*y+O*k;J.xmin=Math.min(J.xmin,n),J.ymin=Math.min(J.ymin,a),J.xmax=Math.max(J.xmax,n),J.ymax=Math.max(J.ymax,a)}),this.center=[(J.xmin+J.xmax)/2,(J.ymin+J.ymax)/2]}}class D extends _{constructor(p,w,H,X){super(p,w,H,X),this.method="linear"}getRelativePosition(p,w){const{rotationMatrix00:H,rotationMatrix01:X,bounds:J}=this,{xmin:U,xmax:m}=J;return[(p*H+w*X-U)/(m-U),0]}calculateRelativeSizeFromAbsolute(){const{_size:p,bounds:w}=this,{xmin:H,xmax:X}=w;return[(0,f.Lz)(p)/(X-H),0]}}class R extends _{constructor(p,w,H,X){super(p,w,H,X),this.method="rectangular"}getRelativePosition(p,w){const{bounds:H,center:X,rotationMatrix00:J,rotationMatrix01:U,rotationMatrix10:m,rotationMatrix11:y}=this;return[2/(H.xmax-H.xmin)*(p*J+w*U-X[0]),2/(H.ymax-H.ymin)*-(p*m+w*y-X[1])]}calculateRelativeSizeFromAbsolute(){const{_size:p,bounds:w}=this,{xmin:H,ymin:X,xmax:J,ymax:U}=w;return[(0,f.Lz)(2*p)/(J-H),(0,f.Lz)(2*p)/(U-X)]}}class g extends _{constructor(p,w,H){super(p,w,H,0),this.method="circular";const{xmin:X,xmax:J,ymin:U,ymax:m}=this.bounds,y=J-X,k=m-U;this.radius=Math.sqrt(y*y+k*k)/2}getRelativePosition(p,w){const{center:H,radius:X}=this;return[(p-H[0])/X,-(w-H[1])/X]}calculateRelativeSizeFromAbsolute(){const{_size:p}=this;return[(0,f.Lz)(p)/this.radius,0]}}function r(S,p){if(null==S)return null;const w=(0,A.kU)(p.angle),H=p.gradientSize,X=p.gradientSizeUnits;switch(p.gradientMethod.toLowerCase()){case"linear":return new D(S,H,X,w);case"rectangular":return new R(S,H,X,w);case"circular":return new g(S,H,X);default:return x.A.getLogger("esri.views.2d.engine.webgl.shaderGraph.techniques.fill.GradientSizeHelper").errorOnce(`Gradient fill method "${p.gradientMethod}" currently unsupported.`),null}}var l=s(98522),u=s(50915);const T={createComputedParams:S=>S,optionalAttributes:C.v.optionalAttributes,attributes:{...C.v.attributes,bitset:{type:u.pe.UNSIGNED_BYTE,count:1,pack:({gradientSizeUnits:S,gradientType:p})=>{let w=0;return S===b.OW.Absolute&&(w|=(0,l.mR)(z.Q.isAbsolute)),"discrete"===p.toLowerCase()&&(w|=(0,l.mR)(z.Q.isDiscrete)),w}},tlbr:{count:4,type:u.pe.UNSIGNED_SHORT,pack:({sprite:S})=>{const{rect:p,width:w,height:H}=S,X=p.x+W.hM+W.MZ,J=p.y+W.hM;return[X,J,X+w-2*W.MZ,J+H]}},relativePosition:{count:2,type:u.pe.HALF_FLOAT,packTessellation:({gradientStats:S},p,w,H)=>S?.getRelativePosition(w,H)??[0,0]},relativeGradientSize:{count:2,type:u.pe.HALF_FLOAT,packTessellation:({gradientStats:S})=>S?.relativeSize??[1,1]},gradientMethod:{count:1,type:u.pe.UNSIGNED_BYTE,pack:({gradientMethod:S})=>{switch(S.toLowerCase()){case"rectangular":return z.m.rectangular;case"circular":return z.m.circular;default:return z.m.linear}}}}};class v extends G.N{constructor(){super(...arguments),this.vertexSpec=T}get _preventEffectClipping(){return!0}createTesselationParams(p){return{gradientStats:r(p.readGeometryForDisplay(),this.evaluatedMeshParams)}}_write(p,w,H){const X=H?.asOptimized()??w.readGeometryForDisplay(),J=this._clip(X);if(!J)return;const U=this.evaluatedMeshParams.sprite?.textureBinding;p.recordStart(this.instanceId,this.attributeLayout,U),this._writeGeometry(p,w,J),p.recordEnd()}}},79184:(ut,q,s)=>{s.d(q,{Lm:()=>M,e4:()=>_,eY:()=>D,w0:()=>R});var b=s(10467),W=s(72137),G=s(73584),C=s(82870),z=s(98522),x=s(26248),A=s(1416),f=s(90731),L=s(50915);const M={createComputedParams:g=>g,optionalAttributes:x.Eq.optionalAttributes,attributes:{...x.Eq.attributes,bitset:{type:L.pe.UNSIGNED_BYTE,count:1,pack:g=>0},color:{type:L.pe.UNSIGNED_BYTE,count:4,normalized:!0,pack:({color:g})=>(0,z.Jb)(g)}}},_={createComputedParams:g=>g,optionalAttributes:x.Eq.optionalAttributes,attributes:{...x.Eq.attributes,bitset:{type:L.pe.UNSIGNED_BYTE,count:1,pack:g=>(0,z.xo)([[f.Xx,!0]])},color:{type:L.pe.UNSIGNED_BYTE,count:4,normalized:!0,pack:({outlineColor:g})=>(0,z.Jb)(g)}}};class D extends x.Bw{constructor(){super(...arguments),this.vertexSpec=_}}class R extends C.Y{constructor(r,l,u,T){super(r,l,u,T),this.vertexSpec=M,this._lineMeshWriter=this._createOutlineWriter(r,l,u,T)}_createOutlineWriter(r,l,u,T){return new D(r,l,u,T)}_write(r,l,u){const T=u?.asOptimized()??l.readGeometryForDisplay(),v=this._clip(T);v&&(r.recordStart(this.instanceId,this.attributeLayout),this._writeGeometry(r,l,v),this._lineMeshWriter.writeLineVertices(r,W.z.fromOptimizedCIM(v,"esriGeometryPolyline"),l),r.recordEnd())}_clip(r){return r?(0,G.FE)(r,(0,A.Z0)(this.evaluatedMeshParams)):null}ensurePacked(r,l,u){super.ensurePacked(r,l,u),this._lineMeshWriter.ensurePacked(r,l,u)}enqueueRequest(r,l,u){super.enqueueRequest(r,l,u),this._lineMeshWriter.enqueueRequest(r,l,u)}loadDependencies(){var r=()=>super.loadDependencies,l=this;return(0,b.A)(function*(){yield Promise.all([r().call(l),l._lineMeshWriter.loadDependencies()])})()}}},76740:(ut,q,s)=>{s.d(q,{l:()=>C,m:()=>z});var b=s(47669),W=s(82870),G=s(50915);const C={createComputedParams:x=>x,optionalAttributes:W.v.optionalAttributes,attributes:{...W.v.attributes,tlbr:{count:4,type:G.pe.UNSIGNED_SHORT,pack:({sprite:x})=>{const{rect:A,width:f,height:L}=x,M=A.x+b.hM,_=A.y+b.hM;return[M,_,M+f,_+L]}},inverseRasterizationScale:{count:1,type:G.pe.BYTE,packPrecisionFactor:16,pack:({sprite:x})=>1/x.rasterizationScale}}};class z extends W.Y{constructor(){super(...arguments),this.vertexSpec=C}_write(A,f,L){const M=L?.asOptimized()??f.readGeometryForDisplay(),_=this._clip(M);if(!_)return;const D=this.evaluatedMeshParams.sprite?.textureBinding;A.recordStart(this.instanceId,this.attributeLayout,D),this._writeGeometry(A,f,_),A.recordEnd()}}},7610:(ut,q,s)=>{s.d(q,{Q:()=>f});var b=s(10467),W=s(72137),G=s(79184),C=s(76740);const z={optionalAttributes:C.l.optionalAttributes,createComputedParams:L=>L,attributes:{...C.l.attributes,...G.Lm.attributes}},x={optionalAttributes:C.l.optionalAttributes,createComputedParams:L=>L,attributes:{...C.l.attributes,...G.e4.attributes}};class A extends G.eY{constructor(){super(...arguments),this.vertexSpec=x}}class f extends G.w0{constructor(){super(...arguments),this.vertexSpec=z}_createOutlineWriter(M,_,D,R){return new A(M,_,D,R)}_write(M,_,D){const R=D?.asOptimized()??_.readGeometryForDisplay(),g=this._clip(R);if(!g)return;const r=this.evaluatedMeshParams.sprite?.textureBinding;M.recordStart(this.instanceId,this.attributeLayout,r),this._writeGeometry(M,_,g),this._lineMeshWriter.writeLineVertices(M,W.z.fromOptimizedCIM(g,"esriGeometryPolyline"),_),M.recordEnd()}ensurePacked(M,_,D){super.ensurePacked(M,_,D),this._lineMeshWriter.ensurePacked(M,_,D)}enqueueRequest(M,_,D){super.enqueueRequest(M,_,D),this._lineMeshWriter.enqueueRequest(M,_,D)}loadDependencies(){var M=()=>super.loadDependencies,_=this;return(0,b.A)(function*(){yield Promise.all([M().call(_),_._lineMeshWriter.loadDependencies()])})()}}},98522:(ut,q,s)=>{s.d(q,{By:()=>r,Jb:()=>_,My:()=>f,i8:()=>g,mR:()=>L,qE:()=>R,ue:()=>D,xo:()=>M});var b=s(68677),W=s(5922),G=s(35150),C=s(65374);const z=()=>G.A.getLogger("esri.views.2d.engine.webgl.shaderGraph.techniques.meshWriterUtils"),x=0,A=100;function f(l,u){return[!!l?.minScale&&u.scaleToZoom(l.minScale)||x,!!l?.maxScale&&u.scaleToZoom(l.maxScale)||A]}function L(l){return 1<<l}function M(l){let u=0;for(const[T,v]of l)v&&(u|=1<<T);return u}function _(l){let u;if(!l)return[0,0,0,0];if("string"==typeof l){const w=b.A.fromString(l);if(!w)return z().errorOnce(new W.A("mapview:mesh-processing","Unable to parse string into color",{color:l})),[0,0,0,0];u=w.toArray()}else u=l;const[T,v,S,p]=u;return[T*(p/255),v*(p/255),S*(p/255),p]}function D(l){switch(l){case"butt":case C.uT.Butt:return C.xR.BUTT;case"round":case C.uT.Round:return C.xR.ROUND;case"square":case C.uT.Square:return C.xR.SQUARE}}function R(l){switch(l){case"bevel":case C.wd.Bevel:return C.JO.BEVEL;case"miter":case C.wd.Miter:return C.JO.MITER;case"round":case C.wd.Round:return C.JO.ROUND}}function g(l,u){return Math.round(Math.min(Math.sqrt(l*u),255))}function r(l,u){return Math.round(l*u)/u}},99046:(ut,q,s)=>{s.d(q,{h:()=>C});var b=s(9368),W=s(50915);const G={createComputedParams:z=>z,optionalAttributes:{},attributes:{pos:{type:W.pe.SHORT,count:2,pack:"position",packPrecisionFactor:10},id:{type:W.pe.UNSIGNED_BYTE,count:3,pack:"id"},bitset:{type:W.pe.UNSIGNED_BYTE,count:1},offset:{type:W.pe.BYTE,count:2,packAlternating:{count:4,pack:()=>[[-1,-1],[1,-1],[-1,1],[1,1]]}}}};class C extends b.r{constructor(){super(...arguments),this.vertexSpec=G}_write(x,A){x.recordStart(this.instanceId,this.attributeLayout);const f=A.getDisplayId();if("esriGeometryPoint"===A.geometryType){const L=A.readXForDisplay(),M=A.readYForDisplay();this._writeQuad(x,f,L,M)}else"esriGeometryMultipoint"===A.geometryType&&A.readGeometryForDisplay()?.forEachVertex((M,_)=>{M>=0&&M<=512&&_>=0&&_<=512&&this._writeQuad(x,f,M,_)});x.recordEnd()}_writeQuad(x,A,f,L){const M=x.vertexCount();this._writeVertex(x,A,f,L),x.indexWrite(M+0),x.indexWrite(M+1),x.indexWrite(M+2),x.indexWrite(M+1),x.indexWrite(M+3),x.indexWrite(M+2)}}},19922:(ut,q,s)=>{s.d(q,{F:()=>M});var b=s(67685),W=s(72137),G=s(65374),C=s(47669),z=s(98522),x=s(63643),A=s(26248),f=s(50915);const L={createComputedParams:_=>_,optionalAttributes:A.Eq.optionalAttributes,attributes:{...A.Eq.attributes,bitset:{type:f.pe.UNSIGNED_BYTE,count:1,pack:({gradientMethod:_,gradientSizeUnits:D,gradientType:R})=>(0,z.xo)([[x.Q.isAlongLine,"alongline"===_.toLowerCase()],[x.Q.isAbsoluteSize,D===G.OW.Absolute],[x.Q.isDiscrete,"discrete"===R.toLowerCase()]])},tlbr:{type:f.pe.UNSIGNED_SHORT,count:4,pack:({sprite:_})=>{const{rect:D,width:R,height:g}=_,r=D.x+C.hM+C.MZ,l=D.y+C.hM;return[r,l,r+R-2*C.MZ,l+g]}},accumulatedDistance:{type:f.pe.UNSIGNED_SHORT,count:1,packTessellation:({distance:_})=>_},gradientSize:{type:f.pe.HALF_FLOAT,count:1,pack:({gradientSize:_,gradientSizeUnits:D})=>D===G.OW.Relative?_/100:(0,b.Lz)(_)},totalLength:{type:f.pe.HALF_FLOAT,count:1,packTessellation:({pathLength:_})=>_},segmentDirection:{type:f.pe.BYTE,count:2,packPrecisionFactor:16,packTessellation:({directionX:_,directionY:D})=>[_,D]}}};class M extends A.Bw{get _preventEffectClipping(){return!0}constructor(D,R,g,r){super(D,R,g,r),this.vertexSpec=L,this._tessellationOptions.textured=!0}_write(D,R,g){const r=g??W.z.fromFeatureSetReaderCIM(R);if(!r)return;const{sprite:l}=this.evaluatedMeshParams;this._writeGeometry(D,R,r,l?.textureBinding)}}},26248:(ut,q,s)=>{s.d(q,{Bw:()=>g,Eq:()=>_});var b=s(67685),W=s(72137),G=s(47669),C=s(7933),z=s(73584),x=s(98522),A=s(9368),f=s(1416),L=s(50915);class M{constructor(){this.extrusionOffsetX=0,this.extrusionOffsetY=0,this.normalX=0,this.normalY=0,this.directionX=0,this.directionY=0,this.distance=0,this.pathLength=0}}const _={createComputedParams:r=>r,optionalAttributes:{zoomRange:{type:L.pe.SHORT,count:2,packPrecisionFactor:G.fq,pack:({scaleInfo:r},{tileInfo:l})=>(0,x.My)(r,l)}},attributes:{id:{type:L.pe.UNSIGNED_BYTE,count:3,pack:"id"},pos:{type:L.pe.SHORT,count:2,pack:"position",packPrecisionFactor:10},bitset:{type:L.pe.UNSIGNED_BYTE,count:1},color:{type:L.pe.UNSIGNED_BYTE,count:4,normalized:!0,pack:({color:r})=>(0,x.Jb)(r)},offset:{type:L.pe.BYTE,count:2,packPrecisionFactor:16,packTessellation:({extrusionOffsetX:r,extrusionOffsetY:l})=>[(0,x.By)(r,16),(0,x.By)(l,16)]},normal:{type:L.pe.BYTE,count:2,packPrecisionFactor:16,packTessellation:({normalX:r,normalY:l})=>[(0,x.By)(r,16),(0,x.By)(l,16)]},halfWidth:{type:L.pe.HALF_FLOAT,count:1,pack:({width:r})=>(0,b.Lz)(.5*r)},referenceHalfWidth:{type:L.pe.HALF_FLOAT,count:1,pack:({referenceWidth:r})=>(0,b.Lz)(.5*r)}}};class D{constructor(){this.id=0,this.bitset=0,this.indexCount=0,this.vertexCount=0,this.vertexFrom=0,this.vertexBounds=0,this.pathLength=0}}class g extends A.r{constructor(l,u,T,v){super(l,u,T,v),this.vertexSpec=_,this._currentWrite=new D,this._tessellationOptions={halfWidth:0,pixelCoordRatio:1,offset:0,wrapDistance:65535,textured:!1},this._tessParams=new M,this._initializeTessellator()}writeLineVertices(l,u,T){const v=this._getLines(u);null!=v&&this._writeVertices(l,T,v)}_initializeTessellator(){this._lineTessellator=new C.i(this._writeTesselatedVertex.bind(this),this._writeTriangle.bind(this),!0)}_write(l,u,T){const v=T??W.z.fromFeatureSetReaderCIM(u);v&&this._writeGeometry(l,u,v)}_writeGeometry(l,u,T,v){l.recordStart(this.instanceId,this.attributeLayout,v),this.writeLineVertices(l,T,u),l.recordEnd()}_getLines(l){return(0,z.uS)(l,(0,f.Z0)(this.evaluatedMeshParams))}_writeVertices(l,u,T){const{_currentWrite:v,_tessellationOptions:S,evaluatedMeshParams:p}=this,{width:w,capType:H,joinType:X,miterLimit:J,hasSizeVV:U}=p,m=(0,b.Lz)(.5*w);S.halfWidth=m,S.capType=(0,x.ue)(H),S.joinType=(0,x.qE)(X),S.miterLimit=J;const y=!U;v.out=l,v.id=u.getDisplayId(),v.vertexCount=0,v.indexCount=0,v.vertexFrom=l.vertexCount(),v.vertexBounds=y&&m<G.Gh?0:1;for(const{line:k,start:V,pathLength:O}of T)S.initialDistance=V%65535,v.pathLength=O,this._lineTessellator.tessellate(k,S,y)}_writeTesselatedVertex(l,u,T,v,S,p,w,H,X,J,U){const{out:m,id:y,vertexBounds:k,pathLength:V}=this._currentWrite;return this.hasEffects&&m.recordBounds(l,u,k,k),this._tessParams.extrusionOffsetX=w,this._tessParams.extrusionOffsetY=H,this._tessParams.normalX=X,this._tessParams.normalY=J,this._tessParams.directionX=S,this._tessParams.directionY=p,this._tessParams.distance=U,this._tessParams.pathLength=V,this._writeVertex(m,y,l,u,this._tessParams),this._currentWrite.vertexFrom+this._currentWrite.vertexCount++}_writeTriangle(l,u,T){const{out:v}=this._currentWrite;v.indexEnsureSize(3),v.indexWrite(l),v.indexWrite(u),v.indexWrite(T),this._currentWrite.indexCount+=3}}},26689:(ut,q,s)=>{s.d(q,{K:()=>M});var b=s(67685),W=s(72137),G=s(65374),C=s(47669),z=s(98522),x=s(26248),A=s(90731),f=s(50915);const L={createComputedParams:_=>_,optionalAttributes:x.Eq.optionalAttributes,attributes:{...x.Eq.attributes,bitset:{type:f.pe.UNSIGNED_BYTE,count:1,pack:({shouldSampleAlphaOnly:_,shouldScaleDash:D,isSDF:R})=>(0,z.xo)([[A.cn,_],[A.kx,D],[A.b5,R]])},tlbr:{type:f.pe.UNSIGNED_SHORT,count:4,pack:({sprite:_})=>{const{rect:D,width:R,height:g}=_,r=D.x+C.hM,l=D.y+C.hM;return[r,l,r+R,l+g]}},accumulatedDistance:{type:f.pe.UNSIGNED_SHORT,count:1,packTessellation:({distance:_})=>_},segmentDirection:{type:f.pe.BYTE,count:2,packPrecisionFactor:16,packTessellation:({directionX:_,directionY:D})=>[_,D]},offsetAlongLine:{type:f.pe.HALF_FLOAT,count:1,pack:({offsetAlongLine:_})=>(0,b.Lz)(_)},capType:{type:f.pe.UNSIGNED_BYTE,count:1,pack:({capType:_})=>{switch(_){case G.uT.Butt:case"butt":return 0;case G.uT.Square:case"square":return 1;case G.uT.Round:case"round":return 2;default:return 0}}}}};class M extends x.Bw{constructor(D,R,g,r){super(D,R,g,r),this.vertexSpec=L,this._tessellationOptions.textured=!0}_write(D,R,g){const r=g??W.z.fromFeatureSetReaderCIM(R);if(!r)return;const{sprite:l}=this.evaluatedMeshParams;this._writeGeometry(D,R,r,l?.textureBinding)}}},37121:(ut,q,s)=>{s.d(q,{H:()=>J});var b=s(67685),W=s(76329),G=s(3672),C=s(83953),z=s(72137),x=s(84289),A=s(65374),f=s(71725),L=s(47669),M=s(98522),_=s(32117);class D{static from(m){return"width"in m?this.fromSimpleMeshParams(m):this.fromComplexMeshParams(m)}static fromSimpleMeshParams(m){const y=new D(m.sprite,m.color,m.outlineColor,m.minPixelBuffer,m.placement,m.scaleInfo,m.effects),{type:k,width:V,height:O,angle:n,alignment:a,outlineSize:N,referenceSize:F,sprite:B,overrideOutlineColor:Y}=m;return y.rawWidth=(0,b.Lz)(V),y.rawHeight=(0,b.Lz)(O),y.angle=n,y.alignment=a,y.outlineSize=(0,b.Lz)(N),y.referenceSize=(0,b.Lz)(F),y.overrideOutlineColor=Y,y.offsetX=(0,b.Lz)(m.offsetX),y.offsetY=(0,b.Lz)(m.offsetY),"simple"!==k||B.sdf||(y.rawWidth=B.width,y.rawHeight=B.height),y._computeSize(m,!1),y}static fromComplexMeshParams(m){const y=new D(m.sprite,m.color,m.outlineColor,m.minPixelBuffer,m.placement,m.scaleInfo,m.effects);let{alignment:k,transforms:V,size:O,scaleX:n,anchorX:a,anchorY:N,angle:F,colorLocked:B,frameHeight:Y,widthRatio:K,offsetX:$,offsetY:j,outlineSize:Z,referenceSize:rt,scaleFactor:et,sizeRatio:ht,isAbsoluteAnchorPoint:nt,rotateClockwise:_t,scaleSymbolsProportionally:yt,sprite:at}=m;if(V&&V.infos.length>0){const c=(0,_.zb)(O,F,_t,$,j,V);O=c.size,F=c.rotation,$=c.offsetX,j=c.offsetY,_t=!1}et&&(O*=et,$*=et,j*=et);const dt=n*(at.width/at.height);y.alignment=k,y.rawHeight=(0,b.Lz)(O),y.rawWidth=y.rawHeight*dt,y.referenceSize=(0,b.Lz)(rt),y.sizeRatio=ht,y.sdfDecodeCoeff=(at.sdfDecodeCoeff??1)*ht,y.angle=F,y.rotateClockwise=_t,y.anchorX=a,y.anchorY=N,y.offsetX=(0,b.Lz)($),y.offsetY=(0,b.Lz)(j),nt&&O&&(y.anchorX=at.sdf?a/(O*K):a/(O*dt),y.anchorY=N/O);const e=yt&&Y?O/Y:1;return y.outlineSize=0===Z||isNaN(Z)?0:(0,b.Lz)(Z)*e,y.scaleSymbolsProportionally=yt,y.colorLocked=B,y._computeSize(m,!0),y}constructor(m,y,k,V,O,n,a){this.sprite=m,this.color=y,this.outlineColor=k,this.minPixelBuffer=V,this.placement=O,this.scaleInfo=n,this.effects=a,this.rawWidth=0,this.rawHeight=0,this.angle=0,this.outlineSize=0,this.referenceSize=0,this.sizeRatio=1,this.sdfDecodeCoeff=1,this.alignment=A.C1.SCREEN,this.scaleSymbolsProportionally=!1,this.overrideOutlineColor=!1,this.colorLocked=!1,this.anchorX=0,this.anchorY=0,this.computedWidth=0,this.computedHeight=0,this.texXmin=0,this.texYmin=0,this.texXmax=0,this.texYmax=0,this.offsetX=0,this.offsetY=0,this.rotateClockwise=!0}get boundsInfo(){return{size:Math.max(this.computedHeight,this.computedWidth),offsetX:this.offsetX,offsetY:this.offsetY}}_computeSize(m,y){const{sprite:k,hasSizeVV:V}=m,O=!!k.sdf,n=k.sdfPaddingRatio??.5,{rawWidth:a,rawHeight:N,sizeRatio:F,outlineSize:B}=this,Y=k.rect;let K=a*F,$=N*F,j=0,Z=0;if(O){const _t=1/(1-n);if(K*=_t,$*=_t,V)this.computedWidth=K,this.computedHeight=$;else{const at=N,dt=B+2;this.computedWidth=Math.min((y&&a>N?K:a)+dt,K),this.computedHeight=Math.min(at+dt,$);const e=Math.max(k.width,k.height)/Math.max(K,$);j=(this.computedWidth-K)*e,Z=(this.computedHeight-$)*e}}else this.computedWidth=K*(Y.width/k.width),this.computedHeight=$*(Y.height/k.height),j=2*L.hM,Z=2*L.hM;const rt=Y.x+L.hM-j/2,et=Y.y+L.hM-Z/2,ht=rt+k.width+j,nt=et+k.height+Z;this.texXmin=R(rt),this.texYmin=R(et),this.texXmax=g(ht),this.texYmax=g(nt),this.computedWidth*=(this.texXmax-this.texXmin)/(ht-rt),this.computedHeight*=(this.texYmax-this.texYmin)/(nt-et),this.anchorX*=K/this.computedWidth,this.anchorY*=$/this.computedHeight}}function R(U,m=1e-7){const y=Math.ceil(U);return y-U<m?y:Math.floor(U)}function g(U,m=1e-7){const y=Math.floor(U);return U-y<m?y:Math.ceil(U)}var r=s(93300),l=s(23263),u=s(9368),T=s(50915);const S=128/Math.PI;const X={createComputedParams:U=>D.from(U),optionalAttributes:{zoomRange:{type:T.pe.SHORT,count:2,packPrecisionFactor:L.fq,pack:({scaleInfo:U},{tileInfo:m})=>(0,M.My)(U,m)}},attributes:{pos:{type:T.pe.SHORT,count:2,pack:"position",packPrecisionFactor:10},id:{type:T.pe.UNSIGNED_BYTE,count:3,pack:"id"},bitset:{type:T.pe.UNSIGNED_BYTE,count:1,pack:({sprite:U,alignment:m,scaleSymbolsProportionally:y,overrideOutlineColor:k,colorLocked:V})=>{let O=0;return U.sdf&&(O|=(0,M.mR)(r.c.bitset.isSDF)),m===A.C1.MAP&&(O|=(0,M.mR)(r.c.bitset.isMapAligned)),y&&(O|=(0,M.mR)(r.c.bitset.scaleSymbolsProportionally)),k&&(O|=(0,M.mR)(r.c.bitset.overrideOutlineColor)),V&&(O|=(0,M.mR)(r.c.bitset.colorLocked)),O}},offset:{type:T.pe.HALF_FLOAT,count:2,packAlternating:{count:4,pack:({angle:U,computedWidth:m,computedHeight:y,anchorX:k,anchorY:V,offsetX:O,offsetY:n,rotateClockwise:a})=>{const N=function H(U,m,y,k,V=!1){const O=(0,G.vt)(),n=V?1:-1;return(0,W.D_)(O),(m||y)&&(0,W.Tl)(O,O,[m,-y]),k&&(0,W.e$)(O,O,.017453292519944444*n*-k),O}(0,O,n,-U,a),F=-(.5+k)*m,B=-(.5-V)*y,Y=[F,B],K=[F+m,B],$=[F,B+y],j=[F+m,B+y];return(0,C.l0)(Y,Y,N),(0,C.l0)(K,K,N),(0,C.l0)($,$,N),(0,C.l0)(j,j,N),[Y,K,$,j]}}},textureUV:{type:T.pe.SHORT,count:2,packPrecisionFactor:4,packAlternating:{count:4,pack:({texXmax:U,texXmin:m,texYmax:y,texYmin:k})=>[[m,k],[U,k],[m,y],[U,y]]}},color:{type:T.pe.UNSIGNED_BYTE,count:4,normalized:!0,pack:({color:U})=>(0,M.Jb)(U)},outlineColor:{type:T.pe.UNSIGNED_BYTE,count:4,normalized:!0,pack:({outlineColor:U})=>(0,M.Jb)(U)},sizing:{type:T.pe.UNSIGNED_BYTE,count:4,pack:({rawWidth:U,rawHeight:m,outlineSize:y,referenceSize:k})=>{const V=Math.max(U,m);return[(0,M.i8)(V,128),(0,M.i8)(y,128),(0,M.i8)(k,128),0]}},placementAngle:{type:T.pe.UNSIGNED_BYTE,count:1,packTessellation:({placementAngle:U})=>function w(U){return function p(U,m){return U%=m,Math.abs(U>=0?U:U+m)}(U*S,256)}(U)},sdfDecodeCoeff:{type:T.pe.UNSIGNED_SHORT,count:1,packPrecisionFactor:64,pack:({sdfDecodeCoeff:U})=>U}}};class J extends u.r{constructor(){super(...arguments),this.vertexSpec=X}getBoundsInfo(){return this.evaluatedMeshParams.boundsInfo}_write(m,y,k){const V=this.evaluatedMeshParams.sprite?.textureBinding,O=y.getDisplayId();m.recordStart(this.instanceId,this.attributeLayout,V);const n=this.evaluatedMeshParams.minPixelBuffer,a=Math.max(this.evaluatedMeshParams.computedWidth,n),N=Math.max(this.evaluatedMeshParams.computedHeight,n),Y=this.evaluatedMeshParams.offsetX+-this.evaluatedMeshParams.anchorX*this.evaluatedMeshParams.computedWidth,K=this.evaluatedMeshParams.anchorY*this.evaluatedMeshParams.computedHeight-this.evaluatedMeshParams.offsetY;if(null!=this.evaluatedMeshParams.placement)this._writePlacedMarkers(m,y,k,a,N);else if(k?.nextPath()){k.nextPoint();const $=k.x,j=k.y;m.recordBounds($+Y,j+K,a,N),this._writeQuad(m,O,$,j)}else if("esriGeometryPolygon"===y.geometryType){const $=y.readCentroidForDisplay();if(!$)return;const[j,Z]=$.coords;m.recordBounds(j+Y,Z+K,a,N),this._writeQuad(m,O,j,Z)}else if("esriGeometryPoint"===y.geometryType){const $=y.readXForDisplay(),j=y.readYForDisplay();m.recordBounds($+Y,j+K,a,N),this._writeQuad(m,O,$,j)}else y.readGeometryForDisplay()?.forEachVertex((j,Z)=>{m.recordBounds(j+Y,Z+K,a,N),Math.abs(j)>x.$u||Math.abs(Z)>x.$u||this._writeQuad(m,O,j,Z)});m.recordEnd()}_writePlacedMarkers(m,y,k,V,O){const n=k??z.z.fromFeatureSetReaderCIM(y)?.clone();if(!n)return;const N=f.l.getPlacement(n,-1,this.evaluatedMeshParams.placement,(0,b.Lz)(1),m.id,(0,l.z)());if(!N)return;const F=y.getDisplayId();let B=N.next();const Y=this.evaluatedMeshParams.offsetX,K=-this.evaluatedMeshParams.offsetY;for(;null!=B;){const $=B.tx,j=-B.ty;if(Math.abs($)>x.$u||Math.abs(j)>x.$u){B=N.next();continue}const Z=-B.getAngle();m.recordBounds($+Y,j+K,V,O),this._writeQuad(m,F,$,j,Z),B=N.next()}}_writeQuad(m,y,k,V,O){const n=m.vertexCount();this._writeVertex(m,y,k,V,null==O?null:{placementAngle:O}),m.indexWrite(n+0),m.indexWrite(n+1),m.indexWrite(n+2),m.indexWrite(n+1),m.indexWrite(n+3),m.indexWrite(n+2)}}},9368:(ut,q,s)=>{s.d(q,{r:()=>r});var b=s(10467),W=s(72137),G=s(10223),C=s(23263),z=s(97550),A=(s(3248),s(1416)),f=s(50915);function L(l){switch(l){case f.pe.BYTE:case f.pe.UNSIGNED_BYTE:return 1;case f.pe.SHORT:case f.pe.UNSIGNED_SHORT:case f.pe.HALF_FLOAT:return 2;case f.pe.FLOAT:case f.pe.INT:case f.pe.UNSIGNED_INT:return 4}}class _{static fromVertexSpec(u,T){const{attributes:v,optionalAttributes:S}=u;let p,w,H;const X=[];for(const O in v){const n=v[O];"position"===n.pack?p={...n,name:O,offset:0}:"id"===n.pack?w={...n,name:O,offset:4}:"bitset"===O?H={...n,name:O,offset:7}:X.push({...n,name:O})}for(const O in S)!0===T[O]&&X.push({...S[O],name:O});const J=function M(l){const u=[],T=[],v=[];for(const S of l){const p=L(S.type)*S.count;switch(p%2||p%4||4){case 4:u.push(S);continue;case 2:T.push(S);continue;case 1:v.push(S);continue;default:throw new Error("Found unexpected dataType byte count")}}return u.push(...T),u.push(...v),u}(X),U=[];let m=8,y=1;for(const O of J)U.push({...O,offset:m}),m+=L(O.type)*O.count,O.packAlternating&&(y=Math.max(O.packAlternating.count,y));const k=Uint32Array.BYTES_PER_ELEMENT,V=m%k;return new _(p,w,H,U,m+(V?k-V:0),y)}constructor(u,T,v,S,p,w){this.position=u,this.id=T,this.bitset=v,this.standardAttributes=S,this.stride=p,this.packVertexCount=w,S.push(v),this._attributes=[u,T,v,...S]}get attributeLayout(){if(!this._attributeLayout){const u=(0,A.hU)(this._attributes),T=this._attributes.map(v=>({name:v.name,count:v.count,offset:v.offset,type:v.type,packPrecisionFactor:v.packPrecisionFactor,normalized:v.normalized??!1}));this._attributeLayout={attributes:T,hash:u,stride:this.stride}}return this._attributeLayout}}var D=s(73991);class R{static fromVertexSpec(u,T){const v=_.fromVertexSpec(u,T);return new R(v)}constructor(u){this._spec=u,this._packed=new Uint8Array(this._spec.stride*this._spec.packVertexCount),this._packedU32View=new Uint32Array(this._packed.buffer),this._dataView=new DataView(this._packed.buffer)}get attributeLayout(){return this._spec.attributeLayout}get stride(){return this._spec.stride}writeVertex(u,T,v,S,p,w){for(let H=0;H<this._spec.packVertexCount;H++){const X=H*this._spec.stride;this._packPosition(v,S,X),this._packId(T,X);const J=this._spec.bitset;if(w){if(J.packTessellation){const U=J.packTessellation(w,p,v,S);this._pack(U,J,X)}for(const U of this._spec.standardAttributes)if(null!=U.packTessellation){const m=U.packTessellation(w,p,v,S);this._pack(m,U,X)}else if(U.packAlternating?.packTessellation){const m=U.packAlternating.packTessellation(w,p,v,S);for(let y=0;y<this._spec.packVertexCount;y++)this._pack(m[y],U,y*this._spec.stride)}}}u.vertexWriteRegion(this._packedU32View)}pack(u,T){for(const v of this._spec.standardAttributes)if(v.pack&&"string"!=typeof v.pack){const S=v.pack(u,T);for(let p=0;p<this._spec.packVertexCount;p++)this._pack(S,v,p*this._spec.stride)}else if(v.packAlternating?.pack){const S=v.packAlternating.pack(u,T);for(let p=0;p<this._spec.packVertexCount;p++)this._pack(S[p],v,p*this._spec.stride)}}_packPosition(u,T,v){const{offset:S}=this._spec.position,p=this._spec.position.packPrecisionFactor??1,w=(0,z.M9)(u*p,T*p);this._dataView.setUint32(v+S,w,!0)}_packId(u,T){const v=u*(this._spec.id.packPrecisionFactor??1),S=4278190080&this._dataView.getUint32(T+this._spec.id.offset,!0);this._dataView.setUint32(T+this._spec.id.offset,v|S,!0)}_pack(u,T,v){(0,D.F)(this._dataView,u,T,v)}}class r{constructor(u,T,v,S){this._instanceId=u,this._evaluator=T,this._enabledOptionalAttributes=v,this._viewParams=S,this._evaluator.evaluator=p=>this.vertexSpec.createComputedParams(p)}get _vertexPack(){if(!this._cachedVertexPack){const u=R.fromVertexSpec(this.vertexSpec,this._enabledOptionalAttributes);this._evaluator.hasDynamicProperties||u.pack(this._evaluator.evaluatedMeshParams,this._viewParams),this._cachedVertexPack=u}return this._cachedVertexPack}get evaluatedMeshParams(){return this._evaluator.evaluatedMeshParams}get hasEffects(){return!!this.evaluatedMeshParams.effects}get instanceId(){return this._instanceId}get attributeLayout(){return this._vertexPack.attributeLayout}get _preventEffectClipping(){return!1}setReferences(u){this._references=u}getBoundsInfo(){return null}getTileInfo(){return this._viewParams.tileInfo}loadDependencies(){var u=this;return(0,b.A)(function*(){(function g(l){if(!l)return!1;for(const u of l)switch(u.effect.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1})(u._evaluator.inputMeshParams.effects?.effectInfos)&&(yield(0,C.R)())})()}enqueueRequest(u,T,v){this._evaluator.hasDynamicProperties&&this._evaluator.enqueueRequest(u,T,v)}write(u,T,v,S,p){this.ensurePacked(T,v,S);const w=this.evaluatedMeshParams.effects;if(!w||0===w.length)return void this._write(u,v,void 0,p);const H=v.readGeometryForDisplay()?.clone();if(!H)return;const X=W.z.fromOptimizedCIM(H,v.geometryType),J=(0,C.z)();X.invertY();const m=G.V.executeEffects(w,X,u.id||"",J,this._preventEffectClipping);let y;for(;y=m.next();)y.invertY(),this._write(u,v,y,p)}ensurePacked(u,T,v){if(!this._evaluator.hasDynamicProperties)return;const S=this._evaluator.evaluateMeshParams(u,T,v);this._vertexPack.pack(S,this._viewParams)}hasArcadeDependency(u){return this._evaluator.hasArcadeDependency(u)}_writeVertex(u,T,v,S,p){this._vertexPack.writeVertex(u,T,v,S,this.evaluatedMeshParams,p)}}},23263:(ut,q,s)=>{s.d(q,{R:()=>C,z:()=>G});var b=s(10467);let W=null;function G(){return W}function C(){return z.apply(this,arguments)}function z(){return(z=(0,b.A)(function*(){W=yield Promise.all([s.e(3930),s.e(2076),s.e(5674)]).then(s.bind(s,27815))})).apply(this,arguments)}},1416:(ut,q,s)=>{s.d(q,{Ph:()=>G,Z0:()=>z,hU:()=>W});var b=s(1119);function W(x){const A=x.map(({name:f,count:L,type:M})=>`${f}.${L}.${M}`).join(",");return(0,b.Wm)(A)}function G(x,A,f,L,M,_,D){if(x.primitiveName===A){let R=L?.readWithDefault(M,_,x[f]&&D);return"text"===x.type&&(R=R.toString()),void(x[f]=R)}if("type"in x&&null!=x.type){if(x.effects)for(const R of x.effects)G(R,A,f,L,M,_,D);switch(x.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(x.symbolLayers)for(const R of x.symbolLayers)G(R,A,f,L,M,_,D);break;case"CIMTextSymbol":x.symbol&&G(x.symbol,A,f,L,M,_,D);break;case"CIMHatchFill":x.lineSymbol&&G(x.lineSymbol,A,f,L,M,_,D);break;case"CIMPictureMarker":case"CIMCharacterMarker":case"CIMVectorMarker":if(x.markerPlacement&&G(x.markerPlacement,A,f,L,M,_,D),"CIMVectorMarker"===x.type&&x.markerGraphics)for(const R of x.markerGraphics)G(R,A,f,L,M,_,D),G(R.symbol,A,f,L,M,_,D)}}}const C=400;function z(x){return null!=x.effects?C:Math.max(1.25*x.width,8)}},8052:(ut,q,s)=>{s.d(q,{v:()=>x});var b=s(67685),W=s(98522),G=s(9368),C=s(50915);const z={createComputedParams:A=>A,optionalAttributes:{},attributes:{pos:{type:C.pe.SHORT,count:2,packPrecisionFactor:10,pack:"position"},id:{type:C.pe.UNSIGNED_BYTE,count:3,pack:"id"},bitset:{type:C.pe.UNSIGNED_BYTE,count:1,pack:A=>0},offset:{type:C.pe.SHORT,count:2,packPrecisionFactor:16,packAlternating:{count:4,pack:({size:A})=>{const f=(0,b.Lz)(A),L=-f/2,M=-f/2;return[[L,M],[L+f,M],[L,M+f],[L+f,M+f]]}}},texCoords:{type:C.pe.SHORT,count:2,packPrecisionFactor:4,packAlternating:{count:4,pack:()=>[[0,1],[1,1],[0,0],[1,0]]}},size:{type:C.pe.UNSIGNED_BYTE,count:2,pack:({size:A})=>[A,A]},referenceSize:{type:C.pe.UNSIGNED_BYTE,count:1,pack:({size:A})=>(0,b.Lz)(A)},zoomRange:{type:C.pe.UNSIGNED_BYTE,count:2,pack:({scaleInfo:A},{tileInfo:f})=>(0,W.My)(A,f)}}};class x extends G.r{constructor(){super(...arguments),this.vertexSpec=z}_write(f,L){const M=L.getDisplayId(),_=this.evaluatedMeshParams.minPixelBuffer,D=Math.max((0,b.Lz)(this.evaluatedMeshParams.size),_);let R,g;if("esriGeometryPoint"===L.geometryType)R=L.readXForDisplay(),g=L.readYForDisplay();else{const l=L.readCentroidForDisplay();if(!l)return;R=l?.coords[0],g=l?.coords[1]}f.recordStart(this.instanceId,this.attributeLayout),f.recordBounds(R,g,D,D);const r=f.vertexCount();this._writeVertex(f,M,R,g),f.indexWrite(r+0),f.indexWrite(r+1),f.indexWrite(r+2),f.indexWrite(r+1),f.indexWrite(r+3),f.indexWrite(r+2),f.recordEnd()}}},3991:(ut,q,s)=>{s.d(q,{G8:()=>k,GJ:()=>l});var b=s(69287),W=s(67685),G=s(72137),C=s(71725),z=s(30365),x=s(47669),A=s(42058),f=s(98522),L=s(23263),M=s(9368),_=s(90731),D=s(32117);class g{constructor(n){const{offsetX:a,offsetY:N,postAngle:F,fontSize:B,haloSize:Y,outlineSize:K,scaleFactor:$,transforms:j}=n;if(this.offsetX=a,this.offsetY=N,this.postAngle=F,this.fontSize=Math.min(B,96),this.haloSize=Y??0,this.outlineSize=K??0,this.transforms=j,j&&j.infos.length>1){const Z=(0,D.zb)(B,F,!1,a,N,j,!1);this.fontSize=Math.min(Z.size,96);const rt=Z.size/B;this.haloSize*=rt,this.outlineSize*=rt,this.postAngle=Z.rotation,this.offsetX=Z.offsetX,this.offsetY=Z.offsetY}$&&(this.fontSize*=$,this.offsetX*=$,this.offsetY*=$)}}var r=s(50915);const l=28,u=[4,4],T=[16,4],v={topLeft:T,topRight:T,bottomLeft:T,bottomRight:T},S=[4,2],p=[4,6],w={topLeft:S,topRight:S,bottomLeft:p,bottomRight:p},H={topLeft:S,topRight:p,bottomLeft:S,bottomRight:p},X={topLeft:p,topRight:p,bottomLeft:u,bottomRight:u},J={topLeft:u,topRight:u,bottomLeft:p,bottomRight:p},U={topLeft:p,topRight:u,bottomLeft:p,bottomRight:u},m={topLeft:u,topRight:p,bottomLeft:u,bottomRight:p},y={createComputedParams:O=>O,optionalAttributes:{zoomRange:{type:r.pe.UNSIGNED_SHORT,count:2,packPrecisionFactor:x.fq,packTessellation:({minZoom:O,maxZoom:n})=>[O||0,n||l]},clipAngle:{type:r.pe.UNSIGNED_BYTE,count:1,packTessellation:({clipAngle:O})=>V(O||0)},referenceSymbol:{type:r.pe.BYTE,count:4,packPrecisionFactor:1,packTessellation:(O,n)=>{const a=O.isLineLabel||!O.referenceBounds,N=(0,z.iT)(a?"center":n.horizontalAlignment),F=(0,z.Dy)(a?"middle":n.verticalAlignment),{offsetX:B,offsetY:Y,size:K}=a?{offsetX:0,offsetY:0,size:0}:O.referenceBounds;return[(0,W.Lz)(B),-(0,W.Lz)(Y),Math.round((0,W.Lz)(K)),N+1<<2|F+1]}}},attributes:{pos:{type:r.pe.SHORT,count:2,pack:"position",packPrecisionFactor:10},id:{type:r.pe.UNSIGNED_BYTE,count:3,pack:"id"},bitset:{type:r.pe.UNSIGNED_BYTE,count:1,packTessellation:({isBackground:O,mapAligned:n})=>(0,f.xo)([[_.bg,O],[_.ti,!!n]])},offset:{type:r.pe.SHORT,count:2,packPrecisionFactor:8,packAlternating:{count:4,packTessellation:({offsets:O})=>{const{bottomLeft:n,bottomRight:a,topLeft:N,topRight:F}=O;return[N,F,n,a]}}},textureUV:{type:r.pe.SHORT,count:2,packPrecisionFactor:4,packAlternating:{count:4,packTessellation:({texcoords:O})=>{const{bottomLeft:n,bottomRight:a,topLeft:N,topRight:F}=O;return[N,F,n,a]}}},color:{type:r.pe.UNSIGNED_BYTE,count:4,normalized:!0,packTessellation:({color:O})=>O},fontSize:{type:r.pe.UNSIGNED_SHORT,count:1,packPrecisionFactor:4,packTessellation:({fontSize:O})=>Math.round((0,W.Lz)(O))},referenceSize:{type:r.pe.UNSIGNED_BYTE,count:1,packPrecisionFactor:4,packTessellation:({fontSize:O},{referenceSize:n})=>Math.round((0,W.Lz)(n??O))},outlineColor:{type:r.pe.UNSIGNED_BYTE,count:4,normalized:!0,pack:({outlineColor:O})=>(0,f.Jb)(O)},haloColor:{type:r.pe.UNSIGNED_BYTE,count:4,normalized:!0,pack:({haloColor:O})=>(0,f.Jb)(O)},outlineAndHaloSize:{type:r.pe.UNSIGNED_SHORT,count:2,packPrecisionFactor:4,packTessellation:({outlineSize:O,haloSize:n})=>[Math.round((0,W.Lz)(O)),Math.round((0,W.Lz)(n))]}}};class k extends M.r{constructor(){super(...arguments),this.vertexSpec=y,this._textMeshParamsPropsInitialized=!1}ensurePacked(n,a,N){super.ensurePacked(n,a,N),this._textMeshParamsPropsInitialized&&!this._evaluator.hasDynamicProperties||(this._textMeshTransformProps=new g(this.evaluatedMeshParams),this._textMeshParamsPropsInitialized=!0)}_write(n,a,N){const F=this._getShaping();if(!F)return;const B=a.getDisplayId();if(null!=this.evaluatedMeshParams.placement)return this._writePlacedTextMarkers(n,a,F,N);if(N?.nextPath())return N.nextPoint(),this._writeGlyphs(n,B,N.x,N.y,F,0);if("esriGeometryPolygon"===a.geometryType){const $=a.readCentroidForDisplay();if(!$)return;const[j,Z]=$.coords;return this._writeGlyphs(n,B,j,Z,F,0)}if("esriGeometryMultipoint"===a.geometryType)return void a.readGeometryForDisplay()?.forEachVertex((j,Z)=>this._writeGlyphs(n,B,j,Z,F,0));const Y=a.readXForDisplay(),K=a.readYForDisplay();return this._writeGlyphs(n,B,Y,K,F,0)}_writePlacedTextMarkers(n,a,N,F){const B=F??G.z.fromFeatureSetReaderCIM(a);if(!B)return;const K=C.l.getPlacement(B,-1,this.evaluatedMeshParams.placement,(0,W.Lz)(1),n.id,(0,L.z)());if(!K)return;const $=a.getDisplayId();let j=K.next();for(;null!=j;){const Z=j.tx,rt=-j.ty,et=-j.getAngle();this._writeGlyphs(n,$,Z,rt,N,et),j=K.next()}}_getShaping(n){const a=this._textMeshTransformProps,N=this.evaluatedMeshParams;if(!N.glyphs?.glyphs.length)return null;const F=(0,W.Lz)(a.fontSize),B=(0,W.Lz)(a.offsetX),Y=(0,W.Lz)(a.offsetY),K=(0,b.qE)((0,W.Lz)(N.lineWidth),x.GR,x.cp),$=x.DY*(0,b.qE)(N.lineHeightRatio,.25,4);return(0,A.Tl)(N.glyphs,{scale:F/x.eG,angle:a.postAngle,xOffset:B,yOffset:Y,horizontalAlignment:N.horizontalAlignment,verticalAlignment:n||N.verticalAlignment,maxLineWidth:K,lineHeight:$,decoration:N.decoration,borderLineSizePx:(0,W.Lz)(N.boxBorderLineSize),hasBackground:!!N.boxBackgroundColor,useCIMAngleBehavior:N.useCIMAngleBehavior})}_writeGlyphs(n,a,N,F,B,Y,K,$){const j=this.evaluatedMeshParams,Z=this._textMeshTransformProps,rt=(0,W.Lz)(Z.fontSize),et=Z.haloSize,ht=Z.outlineSize,nt=(0,W.Lz)(Z.offsetX),_t=(0,W.Lz)(Z.offsetY),[yt,at]=(0,f.My)(j.scaleInfo,this.getTileInfo());0!==Y&&B.setRotation(Y);const dt=B.bounds,e=N+dt.x+nt,c=F+dt.y-_t,o=2*(j.minPixelBuffer?j.minPixelBuffer/rt:1),h=Math.max(dt.width,dt.height)*o;B.textBox&&(n.recordStart(this.instanceId,this.attributeLayout,B.glyphs[0].textureBinding),n.recordBounds(e,c,h,h),this._writeTextBox(n,a,N,F,B.textBox,K,$),n.recordEnd());for(const i of B.glyphs){n.recordStart(this.instanceId,this.attributeLayout,i.textureBinding),n.recordBounds(e,c,h,h);const{texcoords:d,offsets:E}=i;this._writeQuad(n,a,N,F,{texcoords:d,offsets:E,fontSize:rt,haloSize:et,outlineSize:ht,color:(0,f.Jb)(j.color),isBackground:!1,referenceBounds:K,minZoom:yt,maxZoom:at,...$}),n.recordEnd()}0!==Y&&B.setRotation(-Y)}_writeTextBox(n,a,N,F,B,Y,K){const $=this.evaluatedMeshParams,{fontSize:j,haloSize:Z,outlineSize:rt}=this._textMeshTransformProps,{boxBackgroundColor:et,boxBorderLineColor:ht}=$,nt={isBackground:!0,fontSize:j,haloSize:Z,outlineSize:rt,referenceBounds:Y,...K};et&&(this._writeQuad(n,a,N,F,{texcoords:v,offsets:B.main,color:(0,f.Jb)(et),...nt}),ht||(this._writeQuad(n,a,N,F,{texcoords:X,offsets:B.top,color:(0,f.Jb)(et),...nt}),this._writeQuad(n,a,N,F,{texcoords:J,offsets:B.bot,color:(0,f.Jb)(et),...nt}),this._writeQuad(n,a,N,F,{texcoords:U,offsets:B.left,color:(0,f.Jb)(et),...nt}),this._writeQuad(n,a,N,F,{texcoords:m,offsets:B.right,color:(0,f.Jb)(et),...nt}))),ht&&(this._writeQuad(n,a,N,F,{texcoords:w,offsets:B.top,color:(0,f.Jb)(ht),...nt}),this._writeQuad(n,a,N,F,{texcoords:w,offsets:B.bot,color:(0,f.Jb)(ht),...nt}),this._writeQuad(n,a,N,F,{texcoords:H,offsets:B.left,color:(0,f.Jb)(ht),...nt}),this._writeQuad(n,a,N,F,{texcoords:H,offsets:B.right,color:(0,f.Jb)(ht),...nt}))}_writeQuad(n,a,N,F,B){const Y=n.vertexCount();this._writeVertex(n,a,N,F,B),n.indexWrite(Y+0),n.indexWrite(Y+1),n.indexWrite(Y+2),n.indexWrite(Y+1),n.indexWrite(Y+3),n.indexWrite(Y+2)}}const V=O=>Math.round(O*(254/360))}}]);