"use strict";(self.webpackChunkAngularClient=self.webpackChunkAngularClient||[]).push([[2937],{92405:(Gt,wt,J)=>{function X(c,_,d){d=d||2;var g,T,r,l,m,O,F,nt=_&&_.length,K=nt?_[0]*d:c.length,st=gt(c,0,K,d,!0),tt=[];if(!st||st.next===st.prev)return tt;if(nt&&(st=function it(c,_,d,g){var T,r,l,m=[];for(T=0,r=_.length;T<r;T++)(l=gt(c,_[T]*g,T<r-1?_[T+1]*g:c.length,g,!1))===l.next&&(l.steiner=!0),m.push(ht(l));for(m.sort(E),T=0;T<m.length;T++)d=Q(d=b(m[T],d),d.next);return d}(c,_,st,d)),c.length>80*d){g=r=c[0],T=l=c[1];for(var H=d;H<K;H+=d)(m=c[H])<g&&(g=m),(O=c[H+1])<T&&(T=O),m>r&&(r=m),O>l&&(l=O);F=0!==(F=Math.max(r-g,l-T))?1/F:0}return z(st,tt,d,g,T,F),tt}function gt(c,_,d,g,T){var r,l;if(T===B(c,_,d,g)>0)for(r=_;r<d;r+=g)l=dt(r,c[r],c[r+1],l);else for(r=d-g;r>=_;r-=g)l=dt(r,c[r],c[r+1],l);if(l&&mt(l,l.next)){var m=l.next;Ot(l),l=m}return l}function Q(c,_){if(!c)return c;_||(_=c);var d,g=c;do{if(d=!1,g.steiner||!mt(g,g.next)&&0!==$(g.prev,g,g.next))g=g.next;else{var T=g.prev;if(Ot(g),(g=_=T)===g.next)break;d=!0}}while(d||g!==_);return _}function z(c,_,d,g,T,r,l){if(c){!l&&r&&function w(c,_,d,g){var T=c;do{null===T.z&&(T.z=lt(T.x,T.y,_,d,g)),T.prevZ=T.prev,T.nextZ=T.next,T=T.next}while(T!==c);T.prevZ.nextZ=null,T.prevZ=null,function q(c){var _,d,g,T,r,l,m,O,F=1;do{for(d=c,c=null,r=null,l=0;d;){for(l++,g=d,m=0,_=0;_<F&&(m++,g=g.nextZ);_++);for(O=F;m>0||O>0&&g;)0!==m&&(0===O||!g||d.z<=g.z)?(T=d,d=d.nextZ,m--):(T=g,g=g.nextZ,O--),r?r.nextZ=T:c=T,T.prevZ=r,r=T;d=g}r.nextZ=null,F*=2}while(l>1)}(T)}(c,g,T,r);for(var m,O,F=c;c.prev!==c.next;)if(m=c.prev,O=c.next,r?at(c,g,T,r):G(c))_.push(m.i/d),_.push(c.i/d),_.push(O.i/d),Ot(c),c=O.next,F=O.next;else if((c=O)===F){l?1===l?z(c=yt(Q(c),_,d),_,d,g,T,r,2):2===l&&ot(c,_,d,g,T,r):z(Q(c),_,d,g,T,r,1);break}}}function G(c){var _=c.prev,d=c,g=c.next;if($(_,d,g)>=0)return!1;for(var T=c.next.next;T!==c.prev;){if(bt(_.x,_.y,d.x,d.y,g.x,g.y,T.x,T.y)&&$(T.prev,T,T.next)>=0)return!1;T=T.next}return!0}function at(c,_,d,g){var T=c.prev,r=c,l=c.next;if($(T,r,l)>=0)return!1;for(var F=T.x>r.x?T.x>l.x?T.x:l.x:r.x>l.x?r.x:l.x,nt=T.y>r.y?T.y>l.y?T.y:l.y:r.y>l.y?r.y:l.y,K=lt(T.x<r.x?T.x<l.x?T.x:l.x:r.x<l.x?r.x:l.x,T.y<r.y?T.y<l.y?T.y:l.y:r.y<l.y?r.y:l.y,_,d,g),st=lt(F,nt,_,d,g),tt=c.prevZ,H=c.nextZ;tt&&tt.z>=K&&H&&H.z<=st;){if(tt!==c.prev&&tt!==c.next&&bt(T.x,T.y,r.x,r.y,l.x,l.y,tt.x,tt.y)&&$(tt.prev,tt,tt.next)>=0||(tt=tt.prevZ,H!==c.prev&&H!==c.next&&bt(T.x,T.y,r.x,r.y,l.x,l.y,H.x,H.y)&&$(H.prev,H,H.next)>=0))return!1;H=H.nextZ}for(;tt&&tt.z>=K;){if(tt!==c.prev&&tt!==c.next&&bt(T.x,T.y,r.x,r.y,l.x,l.y,tt.x,tt.y)&&$(tt.prev,tt,tt.next)>=0)return!1;tt=tt.prevZ}for(;H&&H.z<=st;){if(H!==c.prev&&H!==c.next&&bt(T.x,T.y,r.x,r.y,l.x,l.y,H.x,H.y)&&$(H.prev,H,H.next)>=0)return!1;H=H.nextZ}return!0}function yt(c,_,d){var g=c;do{var T=g.prev,r=g.next.next;!mt(T,r)&&It(T,g,g.next,r)&&_t(T,r)&&_t(r,T)&&(_.push(T.i/d),_.push(g.i/d),_.push(r.i/d),Ot(g),Ot(g.next),g=c=r),g=g.next}while(g!==c);return Q(g)}function ot(c,_,d,g,T,r){var l=c;do{for(var m=l.next.next;m!==l.prev;){if(l.i!==m.i&&ft(l,m)){var O=ut(l,m);return l=Q(l,l.next),O=Q(O,O.next),z(l,_,d,g,T,r),void z(O,_,d,g,T,r)}m=m.next}l=l.next}while(l!==c)}function E(c,_){return c.x-_.x}function D(c){if(c.next.prev===c)return c;let _=c;for(;;){const d=_.next;if(d.prev===_||d===_||d===c)break;_=d}return _}function b(c,_){var d=function L(c,_){var d,g=_,T=c.x,r=c.y,l=-1/0;do{if(r<=g.y&&r>=g.next.y&&g.next.y!==g.y){var m=g.x+(r-g.y)*(g.next.x-g.x)/(g.next.y-g.y);if(m<=T&&m>l){if(l=m,m===T){if(r===g.y)return g;if(r===g.next.y)return g.next}d=g.x<g.next.x?g:g.next}}g=g.next}while(g!==_);if(!d)return null;if(T===l)return d;var O,F=d,nt=d.x,K=d.y,st=1/0;g=d;do{T>=g.x&&g.x>=nt&&T!==g.x&&bt(r<K?T:l,r,nt,K,r<K?l:T,r,g.x,g.y)&&(O=Math.abs(r-g.y)/(T-g.x),_t(g,c)&&(O<st||O===st&&(g.x>d.x||g.x===d.x&&V(d,g)))&&(d=g,st=O)),g=g.next}while(g!==F);return d}(c,_);if(!d)return _;var g=ut(d,c),T=Q(d,d.next);let r=D(g);return Q(r,r.next),T=D(T),D(_===d?T:_)}function V(c,_){return $(c.prev,c,_.prev)<0&&$(_.next,c,c.next)<0}function lt(c,_,d,g,T){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=32767*(c-d)*T)|c<<8))|c<<4))|c<<2))|c<<1))|(_=1431655765&((_=858993459&((_=252645135&((_=16711935&((_=32767*(_-g)*T)|_<<8))|_<<4))|_<<2))|_<<1))<<1}function ht(c){var _=c,d=c;do{(_.x<d.x||_.x===d.x&&_.y<d.y)&&(d=_),_=_.next}while(_!==c);return d}function bt(c,_,d,g,T,r,l,m){return(T-l)*(_-m)-(c-l)*(r-m)>=0&&(c-l)*(g-m)-(d-l)*(_-m)>=0&&(d-l)*(r-m)-(T-l)*(g-m)>=0}function ft(c,_){return c.next.i!==_.i&&c.prev.i!==_.i&&!function Pt(c,_){var d=c;do{if(d.i!==c.i&&d.next.i!==c.i&&d.i!==_.i&&d.next.i!==_.i&&It(d,d.next,c,_))return!0;d=d.next}while(d!==c);return!1}(c,_)&&(_t(c,_)&&_t(_,c)&&function rt(c,_){var d=c,g=!1,T=(c.x+_.x)/2,r=(c.y+_.y)/2;do{d.y>r!=d.next.y>r&&d.next.y!==d.y&&T<(d.next.x-d.x)*(r-d.y)/(d.next.y-d.y)+d.x&&(g=!g),d=d.next}while(d!==c);return g}(c,_)&&($(c.prev,c,_.prev)||$(c,_.prev,_))||mt(c,_)&&$(c.prev,c,c.next)>0&&$(_.prev,_,_.next)>0)}function $(c,_,d){return(_.y-c.y)*(d.x-_.x)-(_.x-c.x)*(d.y-_.y)}function mt(c,_){return c.x===_.x&&c.y===_.y}function It(c,_,d,g){var T=Ct($(c,_,d)),r=Ct($(c,_,g)),l=Ct($(d,g,c)),m=Ct($(d,g,_));return T!==r&&l!==m||!(0!==T||!Rt(c,d,_))||!(0!==r||!Rt(c,g,_))||!(0!==l||!Rt(d,c,g))||!(0!==m||!Rt(d,_,g))}function Rt(c,_,d){return _.x<=Math.max(c.x,d.x)&&_.x>=Math.min(c.x,d.x)&&_.y<=Math.max(c.y,d.y)&&_.y>=Math.min(c.y,d.y)}function Ct(c){return c>0?1:c<0?-1:0}function _t(c,_){return $(c.prev,c,c.next)<0?$(c,_,c.next)>=0&&$(c,c.prev,_)>=0:$(c,_,c.prev)<0||$(c,c.next,_)<0}function ut(c,_){var d=new k(c.i,c.x,c.y),g=new k(_.i,_.x,_.y),T=c.next,r=_.prev;return c.next=_,_.prev=c,d.next=T,T.prev=d,g.next=d,d.prev=g,r.next=g,g.prev=r,g}function dt(c,_,d,g){var T=new k(c,_,d);return g?(T.next=g.next,T.prev=g,g.next.prev=T,g.next=T):(T.prev=T,T.next=T),T}function Ot(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function k(c,_,d){this.i=c,this.x=_,this.y=d,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function B(c,_,d,g){for(var T=0,r=_,l=d-g;r<d;r+=g)T+=(c[l]-c[r])*(c[r+1]+c[l+1]),l=r;return T}J.d(wt,{e:()=>X}),X.deviation=function(c,_,d,g){var T=_&&_.length,l=Math.abs(B(c,0,T?_[0]*d:c.length,d));if(T)for(var m=0,O=_.length;m<O;m++)l-=Math.abs(B(c,_[m]*d,m<O-1?_[m+1]*d:c.length,d));var K=0;for(m=0;m<g.length;m+=3){var st=g[m]*d,tt=g[m+1]*d,H=g[m+2]*d;K+=Math.abs((c[st]-c[H])*(c[tt+1]-c[st+1])-(c[st]-c[tt])*(c[H+1]-c[st+1]))}return 0===l&&0===K?0:Math.abs((K-l)/l)},X.flatten=function(c){for(var _=c[0][0].length,d={vertices:[],holes:[],dimensions:_},g=0,T=0;T<c.length;T++){for(var r=0;r<c[T].length;r++)for(var l=0;l<_;l++)d.vertices.push(c[T][r][l]);T>0&&d.holes.push(g+=c[T-1].length)}return d}},53781:(Gt,wt,J)=>{J.d(wt,{a:()=>ut,b:()=>V,c:()=>gt,d:()=>lt,e:()=>dt,f:()=>bt,g:()=>G,h:()=>It,j:()=>ht,l:()=>Rt,n:()=>mt,s:()=>z,t:()=>Pt});var X=J(85952);function gt(r,l){return r[0]=l[0],r[1]=l[1],r[2]=l[2],r[3]=l[3],r}function z(r,l,m,O,F){return r[0]=l,r[1]=m,r[2]=O,r[3]=F,r}function G(r,l,m){return r[0]=l[0]+m[0],r[1]=l[1]+m[1],r[2]=l[2]+m[2],r[3]=l[3]+m[3],r}function at(r,l,m){return r[0]=l[0]-m[0],r[1]=l[1]-m[1],r[2]=l[2]-m[2],r[3]=l[3]-m[3],r}function yt(r,l,m){return r[0]=l[0]*m[0],r[1]=l[1]*m[1],r[2]=l[2]*m[2],r[3]=l[3]*m[3],r}function ot(r,l,m){return r[0]=l[0]/m[0],r[1]=l[1]/m[1],r[2]=l[2]/m[2],r[3]=l[3]/m[3],r}function V(r,l,m){return r[0]=l[0]*m,r[1]=l[1]*m,r[2]=l[2]*m,r[3]=l[3]*m,r}function q(r,l){const m=l[0]-r[0],O=l[1]-r[1],F=l[2]-r[2],nt=l[3]-r[3];return Math.sqrt(m*m+O*O+F*F+nt*nt)}function lt(r,l){const m=l[0]-r[0],O=l[1]-r[1],F=l[2]-r[2],nt=l[3]-r[3];return m*m+O*O+F*F+nt*nt}function ht(r){const l=r[0],m=r[1],O=r[2],F=r[3];return Math.sqrt(l*l+m*m+O*O+F*F)}function bt(r){const l=r[0],m=r[1],O=r[2],F=r[3];return l*l+m*m+O*O+F*F}function mt(r,l){const m=l[0],O=l[1],F=l[2],nt=l[3];let K=m*m+O*O+F*F+nt*nt;return K>0&&(K=1/Math.sqrt(K),r[0]=m*K,r[1]=O*K,r[2]=F*K,r[3]=nt*K),r}function It(r,l){return r[0]*l[0]+r[1]*l[1]+r[2]*l[2]+r[3]*l[3]}function Rt(r,l,m,O){const F=l[0],nt=l[1],K=l[2],st=l[3];return r[0]=F+O*(m[0]-F),r[1]=nt+O*(m[1]-nt),r[2]=K+O*(m[2]-K),r[3]=st+O*(m[3]-st),r}function Pt(r,l,m){const O=l[0],F=l[1],nt=l[2],K=l[3];return r[0]=m[0]*O+m[4]*F+m[8]*nt+m[12]*K,r[1]=m[1]*O+m[5]*F+m[9]*nt+m[13]*K,r[2]=m[2]*O+m[6]*F+m[10]*nt+m[14]*K,r[3]=m[3]*O+m[7]*F+m[11]*nt+m[15]*K,r}function ut(r,l){return r[0]===l[0]&&r[1]===l[1]&&r[2]===l[2]&&r[3]===l[3]}function dt(r,l){const m=r[0],O=r[1],F=r[2],nt=r[3],K=l[0],st=l[1],tt=l[2],H=l[3],Et=(0,X.FD)();return Math.abs(m-K)<=Et*Math.max(1,Math.abs(m),Math.abs(K))&&Math.abs(O-st)<=Et*Math.max(1,Math.abs(O),Math.abs(st))&&Math.abs(F-tt)<=Et*Math.max(1,Math.abs(F),Math.abs(tt))&&Math.abs(nt-H)<=Et*Math.max(1,Math.abs(nt),Math.abs(H))}Object.freeze(Object.defineProperty({__proto__:null,add:G,ceil:function it(r,l){return r[0]=Math.ceil(l[0]),r[1]=Math.ceil(l[1]),r[2]=Math.ceil(l[2]),r[3]=Math.ceil(l[3]),r},copy:gt,copyVec3:function Q(r,l){return r[0]=l[0],r[1]=l[1],r[2]=l[2],r},dist:q,distance:q,div:ot,divide:ot,dot:It,equals:dt,exactEquals:ut,floor:function E(r,l){return r[0]=Math.floor(l[0]),r[1]=Math.floor(l[1]),r[2]=Math.floor(l[2]),r[3]=Math.floor(l[3]),r},inverse:function $(r,l){return r[0]=1/l[0],r[1]=1/l[1],r[2]=1/l[2],r[3]=1/l[3],r},len:ht,length:ht,lerp:Rt,max:function b(r,l,m){return r[0]=Math.max(l[0],m[0]),r[1]=Math.max(l[1],m[1]),r[2]=Math.max(l[2],m[2]),r[3]=Math.max(l[3],m[3]),r},min:function D(r,l,m){return r[0]=Math.min(l[0],m[0]),r[1]=Math.min(l[1],m[1]),r[2]=Math.min(l[2],m[2]),r[3]=Math.min(l[3],m[3]),r},mul:yt,multiply:yt,negate:function ft(r,l){return r[0]=-l[0],r[1]=-l[1],r[2]=-l[2],r[3]=-l[3],r},normalize:mt,random:function Ct(r,l=1){const m=X.Ov;let O,F,nt,K,st,tt;do{O=2*m()-1,F=2*m()-1,st=O*O+F*F}while(st>=1);do{nt=2*m()-1,K=2*m()-1,tt=nt*nt+K*K}while(tt>=1);const H=Math.sqrt((1-st)/tt);return r[0]=l*O,r[1]=l*F,r[2]=l*nt*H,r[3]=l*K*H,r},round:function L(r,l){return r[0]=Math.round(l[0]),r[1]=Math.round(l[1]),r[2]=Math.round(l[2]),r[3]=Math.round(l[3]),r},scale:V,scaleAndAdd:function w(r,l,m,O){return r[0]=l[0]+m[0]*O,r[1]=l[1]+m[1]*O,r[2]=l[2]+m[2]*O,r[3]=l[3]+m[3]*O,r},set:z,sqrDist:lt,sqrLen:bt,squaredDistance:lt,squaredLength:bt,str:function rt(r){return"vec4("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+")"},sub:at,subtract:at,transformMat4:Pt,transformQuat:function _t(r,l,m){const O=l[0],F=l[1],nt=l[2],K=m[0],st=m[1],tt=m[2],H=m[3],Et=H*O+st*nt-tt*F,Bt=H*F+tt*O-K*nt,zt=H*nt+K*F-st*O,kt=-K*O-st*F-tt*nt;return r[0]=Et*H+kt*-K+Bt*-tt-zt*-st,r[1]=Bt*H+kt*-st+zt*-K-Et*-tt,r[2]=zt*H+kt*-tt+Et*-st-Bt*-K,r[3]=l[3],r}},Symbol.toStringTag,{value:"Module"}))},89141:(Gt,wt,J)=>{function X(){return[0,0,0,0]}function gt(ft){return[ft[0],ft[1],ft[2],ft[3]]}function Q(ft,$,mt,It){return[ft,$,mt,It]}function z(ft,$,mt,It){return[ft,$,mt,It]}function G(ft,$=[0,0,0,0]){const mt=Math.min(4,ft.length);for(let It=0;It<mt;++It)$[It]=ft[It];return $}function ot(){return Q(1,1,1,1)}function it(){return Q(1,0,0,0)}function E(){return Q(0,1,0,0)}function D(){return Q(0,0,1,0)}function b(){return Q(0,0,0,1)}J.d(wt,{CN:()=>z,Un:()=>V,ci:()=>G,fA:()=>Q,o8:()=>gt,uY:()=>L,vt:()=>X});const L=[0,0,0,0],V=ot(),w=it(),q=E(),lt=D(),ht=b();Object.freeze(Object.defineProperty({__proto__:null,ONES:V,UNIT_W:ht,UNIT_X:w,UNIT_Y:q,UNIT_Z:lt,ZEROS:L,clone:gt,create:X,createView:function at(ft,$){return new Float64Array(ft,$,4)},freeze:z,fromArray:G,fromValues:Q,ones:ot,unitW:b,unitX:it,unitY:E,unitZ:D,zeros:function yt(){return[0,0,0,0]}},Symbol.toStringTag,{value:"Module"}))},11445:(Gt,wt,J)=>{J.d(wt,{Qf:()=>ot,Qh:()=>G,RS:()=>Q,ez:()=>D,i5:()=>b,lM:()=>z,qK:()=>E});var X=J(79139);const Q=16;function z(L){if(!L)return 0;let V=E;for(const w in L)L.hasOwnProperty(w)&&(V+=yt(L[w],!1));return V}function G(L){if(!L)return 0;if("number"==typeof L[0])return ot(L);if(Array.isArray(L))return function at(L){const V=L.length;if(0===V||"number"==typeof L[0])return it(L,8);let w=D;for(let q=0;q<V;q++)w+=yt(L[q]);return w}(L);let V=E;for(const w in L)L.hasOwnProperty(w)&&(V+=yt(L[w]));return V}function yt(L,V=!0){switch(typeof L){case"object":return V?G(L):E;case"string":return function gt(L){return 32+L.length}(L);case"number":return Q;case"boolean":return 4;default:return 8}}function ot(...L){return L.reduce((V,w)=>V+(w?(0,X.iu)(w)?w.byteLength+b:Array.isArray(w)?it(w,Q):0:0),0)}function it(L,V){return D+L.length*V}const E=32,D=16,b=145},55912:(Gt,wt,J)=>{J.d(wt,{A:()=>ot});var z,it,X=J(3248),gt=J(11445),Q=J(61591);(it=z||(z={}))[it.varint=0]="varint",it[it.fixed64=1]="fixed64",it[it.delimited=2]="delimited",it[it.fixed32=5]="fixed32",it[it.unknown=99]="unknown";const G=4294967296,at=new TextDecoder("utf-8"),yt=(0,X.A)("safari")||(0,X.A)("ios")?6:(0,X.A)("ff")?12:32;class ot{constructor(E,D,b=0,L=(E?E.byteLength:0)){this._tag=0,this._dataType=z.unknown,this._init(E,D,b,L)}_init(E,D,b,L){this._data=E,this._dataView=D,this._pos=b,this._end=L}get usedMemory(){return 64+(0,gt.Qf)(this._data)}asUnsafe(){return this}clone(){return new ot(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(E){this._pos=E}nextTag(E){for(;;){if(this._pos===this._end)return!1;const D=this._decodeVarint();if(this._tag=D>>3,this._dataType=7&D,!E||E===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const E=this._decodeVarint();return this._tag=E>>3,this._dataType=7&E,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let E=4294967295;if(E=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128||(E=(E|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128)||(E=(E|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128)||(E=(E|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128)||(E=(E|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128))return E;throw new Error("Varint overflow")}getUInt64(){return this._decodeVarint()}getSInt32(){const E=this.getUInt32();return E>>>1^-(1&E)}getSInt64(){return this._decodeSVarint()}getBool(){const E=0!==this._data[this._pos];return this._skip(1),E}getEnum(){return this._decodeVarint()}getFixed64(){const E=this._dataView,D=this._pos,b=E.getUint32(D,!0)+E.getUint32(D+4,!0)*G;return this._skip(8),b}getSFixed64(){const E=this._dataView,D=this._pos,b=E.getUint32(D,!0)+E.getInt32(D+4,!0)*G;return this._skip(8),b}getDouble(){const E=this._dataView.getFloat64(this._pos,!0);return this._skip(8),E}getFixed32(){const E=this._dataView.getUint32(this._pos,!0);return this._skip(4),E}getSFixed32(){const E=this._dataView.getInt32(this._pos,!0);return this._skip(4),E}getFloat(){const E=this._dataView.getFloat32(this._pos,!0);return this._skip(4),E}getString(){const E=this._getLength(),D=this._pos,b=this._toString(this._data,D,D+E);return this._skip(E),b}getBytes(){const E=this._getLength(),D=this._pos,b=this._toBytes(this._data,D,D+E);return this._skip(E),b}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(E,D,b,L){const V=this.getMessage(),w=E(V,D,b,L);return V.release(),w}processMessage(E){const D=this.getMessage(),b=E(D);return D.release(),b}getMessage(){const E=this._getLength(),D=ot.pool.acquire();return D._init(this._data,this._dataView,this._pos,this._pos+E),this._skip(E),D}release(){ot.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case z.varint:this._decodeVarint();break;case z.fixed64:this._skip(8);break;case z.delimited:this._skip(this._getLength());break;case z.fixed32:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(E){this._skip(E)}_skip(E){if(this._pos+E>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=E}_decodeVarint(){const E=this._data;let D=this._pos,b=0,L=0;if(this._end-D>=10)do{if(L=E[D++],b|=127&L,!(128&L&&(L=E[D++],b|=(127&L)<<7,128&L)&&(L=E[D++],b|=(127&L)<<14,128&L)&&(L=E[D++],b|=(127&L)<<21,128&L)&&(L=E[D++],b+=268435456*(127&L),128&L)&&(L=E[D++],b+=34359738368*(127&L),128&L)&&(L=E[D++],b+=4398046511104*(127&L),128&L)&&(L=E[D++],b+=562949953421312*(127&L),128&L)&&(L=E[D++],b+=72057594037927940*(127&L),128&L)&&(L=E[D++],b+=0x8000000000000000*(127&L),128&L)))break;throw new Error("Varint too long!")}while(0);else{let V=1;for(;D!==this._end&&(L=E[D],128&L);)++D,b+=(127&L)*V,V*=128;if(D===this._end)throw new Error("Varint overrun!");++D,b+=L*V}return this._pos=D,b}_decodeSVarint(){const E=this._data;let D,b=0,L=0;const V=1&E[this._pos];if(L=E[this._pos++],b|=127&L,!(128&L&&(L=E[this._pos++],b|=(127&L)<<7,128&L)&&(L=E[this._pos++],b|=(127&L)<<14,128&L)&&(L=E[this._pos++],b|=(127&L)<<21,128&L)&&(L=E[this._pos++],b+=268435456*(127&L),128&L)&&(L=E[this._pos++],b+=34359738368*(127&L),128&L)&&(L=E[this._pos++],b+=4398046511104*(127&L),128&L)))return V?-(b+1)/2:b/2;if(D=BigInt(b),L=E[this._pos++],D+=0x2000000000000n*BigInt(127&L),!(128&L&&(L=E[this._pos++],D+=0x100000000000000n*BigInt(127&L),128&L)&&(L=E[this._pos++],D+=0x8000000000000000n*BigInt(127&L),128&L)))return Number(V?-(D+1n)/2n:D/2n);throw new Error("Varint too long!")}_getLength(){if(this._dataType!==z.delimited)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(E,D,b){if((b=Math.min(this._end,b))-D>yt){const w=E.subarray(D,b);return at.decode(w)}let L="",V="";for(let w=D;w<b;++w){const q=E[w];128&q?V+="%"+q.toString(16):(L+=decodeURIComponent(V)+String.fromCharCode(q),V="")}return V.length&&(L+=decodeURIComponent(V)),L}_toBytes(E,D,b){return b=Math.min(this._end,b),new Uint8Array(E.buffer,D,b-D)}}ot.pool=new Q.A(ot,void 0,it=>{it._data=null,it._dataView=null})},8897:(Gt,wt,J)=>{J.d(wt,{F:()=>yt,l:()=>D});var X=J(10467),gt=J(90261),Q=J(3248);const z=128e3;let G=null,at=null;function yt(){return ot.apply(this,arguments)}function ot(){return ot=(0,X.A)(function*(){return G||(G=function it(){return E.apply(this,arguments)}()),G}),ot.apply(this,arguments)}function E(){return(E=(0,X.A)(function*(){at=yield((0,Q.A)("esri-csp-restrictions")?yield J.e(4049).then(J.bind(J,34049)).then(L=>L.l):yield J.e(787).then(J.bind(J,50787)).then(L=>L.l)).default({locateFile:L=>(0,gt.s)(`esri/core/libs/libtess/${L}`)})})).apply(this,arguments)}function D(b,L){const V=Math.max(b.length,z);return at.triangulate(b,L,V)}},65374:(Gt,wt,J)=>{var X,gt,Q,z,G,at,yt,ot,it,E,D,b,L,V,w,q,lt,ht,bt,ft,$,mt,It,Rt,Ct,Pt,_t,rt,ut,dt,Ot,k,B,c,_,d,g,T,r,l,m,O,F,nt,K,st,tt,H,Et,Bt,zt,kt,pt,At,Wt,Ut,xt,Lt,Dt,y,n,e,i,t;J.d(wt,{$2:()=>G,C1:()=>Q,Hz:()=>b,JO:()=>gt,M1:()=>It,O$:()=>Dt,OW:()=>Ut,Q1:()=>H,TZ:()=>lt,WE:()=>ut,Y:()=>yt,YI:()=>Bt,bj:()=>ot,e_:()=>tt,f0:()=>Lt,fu:()=>D,g7:()=>it,ip:()=>Et,mU:()=>dt,oF:()=>$,uQ:()=>mt,uT:()=>T,vG:()=>n,wd:()=>O,xR:()=>X,xn:()=>ht,xw:()=>Pt,yS:()=>r}),(t=X||(X={}))[t.BUTT=0]="BUTT",t[t.ROUND=1]="ROUND",t[t.SQUARE=2]="SQUARE",t[t.UNKNOWN=4]="UNKNOWN",function(t){t[t.BEVEL=0]="BEVEL",t[t.ROUND=1]="ROUND",t[t.MITER=2]="MITER",t[t.UNKNOWN=4]="UNKNOWN"}(gt||(gt={})),function(t){t[t.SCREEN=0]="SCREEN",t[t.MAP=1]="MAP"}(Q||(Q={})),function(t){t[t.Tint=0]="Tint",t[t.Ignore=1]="Ignore",t[t.Multiply=99]="Multiply"}(z||(z={})),function(t){t.Both="Both",t.JustBegin="JustBegin",t.JustEnd="JustEnd",t.None="None"}(G||(G={})),function(t){t[t.Mosaic=0]="Mosaic",t[t.Centered=1]="Centered"}(at||(at={})),function(t){t[t.Normal=0]="Normal",t[t.Superscript=1]="Superscript",t[t.Subscript=2]="Subscript"}(yt||(yt={})),function(t){t[t.MSSymbol=0]="MSSymbol",t[t.Unicode=1]="Unicode"}(ot||(ot={})),function(t){t[t.Unspecified=0]="Unspecified",t[t.TrueType=1]="TrueType",t[t.PSOpenType=2]="PSOpenType",t[t.TTOpenType=3]="TTOpenType",t[t.Type1=4]="Type1"}(it||(it={})),function(t){t[t.Display=0]="Display",t[t.Map=1]="Map"}(E||(E={})),function(t){t.None="None",t.Loop="Loop",t.Oscillate="Oscillate"}(D||(D={})),function(t){t.Linear="Linear",t.EaseIn="EaseIn",t.EaseOut="EaseOut",t.EaseInOut="EaseInOut"}(b||(b={})),function(t){t[t.Z=0]="Z",t[t.X=1]="X",t[t.Y=2]="Y"}(L||(L={})),function(t){t[t.XYZ=0]="XYZ",t[t.ZXY=1]="ZXY",t[t.YXZ=2]="YXZ"}(V||(V={})),function(t){t[t.Rectangle=0]="Rectangle",t[t.RoundedRectangle=1]="RoundedRectangle",t[t.Oval=2]="Oval"}(w||(w={})),function(t){t[t.None=0]="None",t[t.Alpha=1]="Alpha",t[t.Screen=2]="Screen",t[t.Multiply=3]="Multiply",t[t.Add=4]="Add"}(q||(q={})),function(t){t[t.TTB=0]="TTB",t[t.RTL=1]="RTL",t[t.BTT=2]="BTT"}(lt||(lt={})),function(t){t[t.None=0]="None",t[t.SignPost=1]="SignPost",t[t.FaceNearPlane=2]="FaceNearPlane"}(ht||(ht={})),function(t){t[t.Float=0]="Float",t[t.String=1]="String",t[t.Boolean=2]="Boolean"}(bt||(bt={})),function(t){t[t.Intersect=0]="Intersect",t[t.Subtract=1]="Subtract"}(ft||(ft={})),function(t){t.OpenEnded="OpenEnded",t.Block="Block",t.Crossed="Crossed"}($||($={})),function(t){t.FullGeometry="FullGeometry",t.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment",t.ReversedFirstSegment="ReversedFirstSegment",t.PerpendicularToSecondSegment="PerpendicularToSecondSegment",t.SecondSegmentWithTicks="SecondSegmentWithTicks",t.DoublePerpendicular="DoublePerpendicular",t.OppositeToFirstSegment="OppositeToFirstSegment",t.TriplePerpendicular="TriplePerpendicular",t.HalfCircleFirstSegment="HalfCircleFirstSegment",t.HalfCircleSecondSegment="HalfCircleSecondSegment",t.HalfCircleExtended="HalfCircleExtended",t.OpenCircle="OpenCircle",t.CoverageEdgesWithTicks="CoverageEdgesWithTicks",t.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks",t.GapExtentMidline="GapExtentMidline",t.Chevron="Chevron",t.PerpendicularWithArc="PerpendicularWithArc",t.ClosedHalfCircle="ClosedHalfCircle",t.TripleParallelExtended="TripleParallelExtended",t.ParallelWithTicks="ParallelWithTicks",t.Parallel="Parallel",t.PerpendicularToFirstSegment="PerpendicularToFirstSegment",t.ParallelOffset="ParallelOffset",t.OffsetOpposite="OffsetOpposite",t.OffsetSame="OffsetSame",t.CircleWithArc="CircleWithArc",t.DoubleJog="DoubleJog",t.PerpendicularOffset="PerpendicularOffset",t.LineExcludingLastSegment="LineExcludingLastSegment",t.MultivertexArrow="MultivertexArrow",t.CrossedArrow="CrossedArrow",t.ChevronArrow="ChevronArrow",t.ChevronArrowOffset="ChevronArrowOffset",t.PartialFirstSegment="PartialFirstSegment",t.Arch="Arch",t.CurvedParallelTicks="CurvedParallelTicks",t.Arc90Degrees="Arc90Degrees",t.TipWithPerpendicularAndTicks="TipWithPerpendicularAndTicks",t.ConcentricCircles="ConcentricCircles",t.DoubleJogArrow="DoubleJogArrow",t.LinkedChevrons="LinkedChevrons",t.SegmentThenHalfCircle="SegmentThenHalfCircle",t.LineWithStraightTicks="LineWithStraightTicks",t.DoubleCurve="DoubleCurve",t.ParallelWithTicksByWidth="ParallelWithTicksByWidth",t.EnclosingRoundedRectangle="EnclosingRoundedRectangle"}(mt||(mt={})),function(t){t.Mitered="Mitered",t.Bevelled="Bevelled",t.Rounded="Rounded",t.Square="Square",t.TrueBuffer="TrueBuffer"}(It||(It={})),function(t){t.ClosePath="ClosePath",t.ConvexHull="ConvexHull",t.RectangularBox="RectangularBox"}(Rt||(Rt={})),function(t){t.BeginningOfLine="BeginningOfLine",t.EndOfLine="EndOfLine"}(Ct||(Ct={})),function(t){t.Mitered="Mitered",t.Bevelled="Bevelled",t.Rounded="Rounded",t.Square="Square"}(Pt||(Pt={})),function(t){t.Fast="Fast",t.Accurate="Accurate"}(_t||(_t={})),function(t){t.BeginningOfLine="BeginningOfLine",t.EndOfLine="EndOfLine"}(rt||(rt={})),function(t){t.Sinus="Sinus",t.Square="Square",t.Triangle="Triangle",t.Random="Random"}(ut||(ut={})),function(t){t[t.None=0]="None",t[t.Default=1]="Default",t[t.Force=2]="Force"}(dt||(dt={})),function(t){t[t.Buffered=0]="Buffered",t[t.Left=1]="Left",t[t.Right=2]="Right",t[t.AlongLine=3]="AlongLine"}(Ot||(Ot={})),function(t){t[t.Linear=0]="Linear",t[t.Rectangular=1]="Rectangular",t[t.Circular=2]="Circular",t[t.Buffered=3]="Buffered"}(k||(k={})),function(t){t[t.Discrete=0]="Discrete",t[t.Continuous=1]="Continuous"}(B||(B={})),function(t){t[t.AcrossLine=0]="AcrossLine",t[t.AlongLine=1]="AlongLine"}(c||(c={})),function(t){t[t.Auto=0]="Auto",t[t.Clockwise=1]="Clockwise",t[t.Counterclockwise=2]="Counterclockwise"}(_||(_={})),function(t){t[t.Left=0]="Left",t[t.Right=1]="Right",t[t.Center=2]="Center",t[t.Justify=3]="Justify"}(d||(d={})),function(t){t[t.Base=0]="Base",t[t.MidPoint=1]="MidPoint",t[t.ThreePoint=2]="ThreePoint",t[t.FourPoint=3]="FourPoint",t[t.Underline=4]="Underline",t[t.CircularCW=5]="CircularCW",t[t.CircularCCW=6]="CircularCCW"}(g||(g={})),function(t){t.Butt="Butt",t.Round="Round",t.Square="Square"}(T||(T={})),function(t){t.NoConstraint="NoConstraint",t.HalfPattern="HalfPattern",t.HalfGap="HalfGap",t.FullPattern="FullPattern",t.FullGap="FullGap",t.Custom="Custom"}(r||(r={})),function(t){t[t.None=-1]="None",t[t.Custom=0]="Custom",t[t.Circle=1]="Circle",t[t.OpenArrow=2]="OpenArrow",t[t.ClosedArrow=3]="ClosedArrow",t[t.Diamond=4]="Diamond"}(l||(l={})),function(t){t[t.ExtraLeading=0]="ExtraLeading",t[t.Multiple=1]="Multiple",t[t.Exact=2]="Exact"}(m||(m={})),function(t){t.Bevel="Bevel",t.Round="Round",t.Miter="Miter"}(O||(O={})),function(t){t[t.Default=0]="Default",t[t.String=1]="String",t[t.Numeric=2]="Numeric"}(F||(F={})),function(t){t[t.InsidePolygon=0]="InsidePolygon",t[t.PolygonCenter=1]="PolygonCenter",t[t.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"}(nt||(nt={})),function(t){t[t.Tint=0]="Tint",t[t.Replace=1]="Replace",t[t.Multiply=2]="Multiply"}(K||(K={})),function(t){t[t.ClipAtBoundary=0]="ClipAtBoundary",t[t.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary",t[t.DoNotTouchBoundary=2]="DoNotTouchBoundary",t[t.DoNotClip=3]="DoNotClip"}(st||(st={})),function(t){t.NoConstraint="NoConstraint",t.WithMarkers="WithMarkers",t.WithFullGap="WithFullGap",t.WithHalfGap="WithHalfGap",t.Custom="Custom"}(tt||(tt={})),function(t){t.Fixed="Fixed",t.Random="Random",t.RandomFixedQuantity="RandomFixedQuantity"}(H||(H={})),function(t){t.LineMiddle="LineMiddle",t.LineBeginning="LineBeginning",t.LineEnd="LineEnd",t.SegmentMidpoint="SegmentMidpoint"}(Et||(Et={})),function(t){t.OnPolygon="OnPolygon",t.CenterOfMass="CenterOfMass",t.BoundingBoxCenter="BoundingBoxCenter"}(Bt||(Bt={})),function(t){t[t.Low=0]="Low",t[t.Medium=1]="Medium",t[t.High=2]="High"}(zt||(zt={})),function(t){t[t.MarkerCenter=0]="MarkerCenter",t[t.MarkerBounds=1]="MarkerBounds"}(kt||(kt={})),function(t){t[t.None=0]="None",t[t.PropUniform=1]="PropUniform",t[t.PropNonuniform=2]="PropNonuniform",t[t.DifUniform=3]="DifUniform",t[t.DifNonuniform=4]="DifNonuniform"}(pt||(pt={})),function(t){t.Tube="Tube",t.Strip="Strip",t.Wall="Wall"}(At||(At={})),function(t){t[t.Random=0]="Random",t[t.Increasing=1]="Increasing",t[t.Decreasing=2]="Decreasing",t[t.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"}(Wt||(Wt={})),function(t){t[t.Relative=0]="Relative",t[t.Absolute=1]="Absolute"}(Ut||(Ut={})),function(t){t[t.Normal=0]="Normal",t[t.LowerCase=1]="LowerCase",t[t.Allcaps=2]="Allcaps"}(xt||(xt={})),function(t){t[t.LTR=0]="LTR",t[t.RTL=1]="RTL"}(Lt||(Lt={})),function(t){t.Draft="Draft",t.Picture="Picture",t.Text="Text"}(Dt||(Dt={})),function(t){t[t.Top=0]="Top",t[t.Center=1]="Center",t[t.Baseline=2]="Baseline",t[t.Bottom=3]="Bottom"}(y||(y={})),function(t){t[t.Right=0]="Right",t[t.Upright=1]="Upright"}(n||(n={})),function(t){t[t.Small=0]="Small",t[t.Medium=1]="Medium",t[t.Large=2]="Large"}(e||(e={})),function(t){t[t.Calm=0]="Calm",t[t.Rippled=1]="Rippled",t[t.Slight=2]="Slight",t[t.Moderate=3]="Moderate"}(i||(i={}))},80996:(Gt,wt,J)=>{J.r(wt),J.d(wt,{default:()=>Dt});var X=J(10467),gt=J(56492),Q=J(20904),z=J(91766),G=J(4139);function yt(y){return!(y<11904)&&(y>=12704&&y<=12735||y>=12544&&y<=12591||y>=65072&&y<=65103||y>=63744&&y<=64255||y>=13056&&y<=13311||y>=11904&&y<=12031||y>=12736&&y<=12783||y>=12288&&y<=12351||y>=13312&&y<=19903||y>=19968&&y<=40959||y>=12800&&y<=13055||y>=65280&&y<=65519||y>=12352&&y<=12447||y>=12272&&y<=12287||y>=12032&&y<=12255||y>=12784&&y<=12799||y>=12448&&y<=12543||y>=65040&&y<=65055||y>=42128&&y<=42191||y>=40960&&y<=42127)}function ot(y){switch(y){case 10:case 32:case 38:case 40:case 41:case 43:case 45:case 47:case 173:case 183:case 8203:case 8208:case 8211:case 8231:return!0}return!1}function it(y){switch(y){case 9:case 10:case 11:case 12:case 13:case 32:return!0}return!1}var E=J(68973);const D=24;class L{constructor(n,e,i,t,s,a,o){this._glyphItems=n,this._maxWidth=e,this._lineHeight=i,this._letterSpacing=t,this._hAnchor=s,this._vAnchor=a,this._justify=o}getShaping(n,e,i){const t=this._letterSpacing,s=this._lineHeight,a=this._justify,o=this._maxWidth,u=[];let h=0,p=0;for(const P of n){const S=P.codePointAt(0);if(null==S)continue;const W=i&&(746===(y=S)||747===y||!(y<4352)&&(y>=12704&&y<=12735||y>=12544&&y<=12591||y>=65072&&y<=65103&&!(y>=65097&&y<=65103)||y>=63744&&y<=64255||y>=13056&&y<=13311||y>=11904&&y<=12031||y>=12736&&y<=12783||y>=12288&&y<=12351&&!(y>=12296&&y<=12305||y>=12308&&y<=12319||12336===y)||y>=13312&&y<=19903||y>=19968&&y<=40959||y>=12800&&y<=13055||y>=12592&&y<=12687||y>=43360&&y<=43391||y>=55216&&y<=55295||y>=4352&&y<=4607||y>=44032&&y<=55215||y>=12352&&y<=12447||y>=12272&&y<=12287||y>=12688&&y<=12703||y>=12032&&y<=12255||y>=12784&&y<=12799||y>=12448&&y<=12543&&12540!==y||y>=65280&&y<=65519&&!(65288===y||65289===y||65293===y||y>=65306&&y<=65310||65339===y||65341===y||65343===y||y>=65371&&y<=65503||65507===y||y>=65512&&y<=65519)||y>=65104&&y<=65135&&!(y>=65112&&y<=65118||y>=65123&&y<=65126)||y>=5120&&y<=5759||y>=6320&&y<=6399||y>=65040&&y<=65055||y>=19904&&y<=19967||y>=40960&&y<=42127||y>=42128&&y<=42191));let C;for(const U of this._glyphItems)if(C=U[S],C)break;u.push({codePoint:S,x:h,y:p,vertical:W,glyphMosaicItem:C}),C&&(h+=C.metrics.advance+t)}var y;let x=h;o>0&&(x=h/Math.max(1,Math.ceil(h/o)));const I=n.includes("\u200b"),f=[],v=u.length;for(let P=0;P<v-1;P++){const S=u[P].codePoint,W=yt(S);if(ot(S)||W){let C=0;if(10===S)C-=1e4;else if(W&&I)C+=150;else{40!==S&&65288!==S||(C+=50);const U=u[P+1].codePoint;41!==U&&65289!==U||(C+=50)}f.push(this._buildBreak(P+1,u[P].x,x,f,C,!1))}}const A=this._optimalBreaks(this._buildBreak(v,h,x,f,0,!0));let N=0;const M=e?-s:s;let R=0;for(let P=0;P<A.length;P++){const S=A[P];let W=R;for(;W<S&&it(u[W].codePoint);)u[W].glyphMosaicItem=null,++W;let C=S-1;for(;C>W&&it(u[C].codePoint);)u[C].glyphMosaicItem=null,--C;if(W<=C){const U=u[W].x;for(let j=W;j<=C;j++)u[j].x-=U,u[j].y=p;let Y=u[C].x;u[C].glyphMosaicItem&&(Y+=u[C].glyphMosaicItem.metrics.advance),N=Math.max(Y,N),a&&this._applyJustification(u,W,C)}R=S,p+=M}if(u.length>0){const P=A.length-1,S=(a-this._hAnchor)*N;let W=(-this._vAnchor*(P+1)+.5)*s;e&&P&&(W+=P*s);for(const C of u)C.x+=S,C.y+=W}return u.filter(P=>P.glyphMosaicItem)}static getTextBox(n,e){if(!n.length)return null;let i=1/0,t=1/0,s=0,a=0;for(const o of n){const h=o.x,p=o.y-17,x=h+o.glyphMosaicItem.metrics.advance,I=p+e;i=Math.min(i,h),s=Math.max(s,x),t=Math.min(t,p),a=Math.max(a,I)}return{x:i,y:t,width:s-i,height:a-t}}static getBox(n){if(!n.length)return null;let e=1/0,i=1/0,t=0,s=0;for(const a of n){const{height:o,left:u,top:h,width:p}=a.glyphMosaicItem.metrics,x=a.x,I=a.y-(o-Math.abs(h)),f=x+p+u,v=I+o;e=Math.min(e,x),t=Math.max(t,f),i=Math.min(i,I),s=Math.max(s,v)}return{x:e,y:i,width:t-e,height:s-i}}static addDecoration(n,e){const i=n.length;if(0===i)return;let s=n[0].x+n[0].glyphMosaicItem.metrics.left,a=n[0].y;for(let u=1;u<i;u++){const h=n[u];if(h.y!==a){const p=n[u-1].x+n[u-1].glyphMosaicItem.metrics.left+n[u-1].glyphMosaicItem.metrics.width;n.push({codePoint:0,x:s,y:a+e-3,vertical:!1,glyphMosaicItem:{sdf:!0,rect:new E.A(4,0,4,8),metrics:{width:p-s,height:8,left:0,top:0,advance:0},page:0,code:0}}),a=h.y,s=h.x+h.glyphMosaicItem.metrics.left}}const o=n[i-1].x+n[i-1].glyphMosaicItem.metrics.left+n[i-1].glyphMosaicItem.metrics.width;n.push({codePoint:0,x:s,y:a+e-3,vertical:!1,glyphMosaicItem:{sdf:!0,rect:new E.A(4,0,4,8),metrics:{width:o-s,height:8,left:0,top:0,advance:0},page:0,code:0}})}_breakScore(n,e,i,t){const s=(n-e)*(n-e);return t?n<e?s/2:2*s:s+Math.abs(i)*i}_buildBreak(n,e,i,t,s,a){let o=null,u=this._breakScore(e,i,s,a);for(const h of t){const x=this._breakScore(e-h.x,i,s,a)+h.score;x<=u&&(o=h,u=x)}return{index:n,x:e,score:u,previousBreak:o}}_optimalBreaks(n){return n?this._optimalBreaks(n.previousBreak).concat(n.index):[]}_applyJustification(n,e,i){const t=n[i],a=(t.x+(t.vertical?D:t.glyphMosaicItem?t.glyphMosaicItem.metrics.advance:0))*this._justify;for(let o=e;o<=i;o++)n[o].x-=a}}var V=J(24505),w=J(54e3);class ft{constructor(n,e,i=0,t=-1,s=.5){this.x=n,this.y=e,this.angle=i,this.segment=t,this.minzoom=s}}class ${constructor(n,e,i,t,s,a=.5,o=G.MG){this.anchor=n,this.labelAngle=e,this.glyphAngle=i,this.page=t,this.alternateVerticalGlyph=s,this.minzoom=a,this.maxzoom=o}}class mt{constructor(n,e,i,t,s,a,o,u,h,p,x,I){this.tl=n,this.tr=e,this.bl=i,this.br=t,this.mosaicRect=s,this.labelAngle=a,this.minAngle=o,this.maxAngle=u,this.anchor=h,this.minzoom=p,this.maxzoom=x,this.page=I}}class It{constructor(n){this.shapes=n}}class Rt{getIconPlacement(n,e,i){const t=new z.bR(n.x,n.y),s=i.rotationAlignment===w.I5.MAP,a=i.keepUpright;let o=i.rotate*G.os;s&&(o+=n.angle);const u=new It([]);return i.allowOverlap&&i.ignorePlacement||!V.IT||(u.iconColliders=[]),this._addIconPlacement(u,t,e,i,o),s&&a&&this._addIconPlacement(u,t,e,i,o+G.Jo),u}_addIconPlacement(n,e,i,t,s){const a=i.rasterizationScale,o=i.width/a,u=i.height/a,h=t.offset;let p=h[0],x=h[1];switch(t.anchor){case w.KI.CENTER:p-=o/2,x-=u/2;break;case w.KI.LEFT:x-=u/2;break;case w.KI.RIGHT:p-=o,x-=u/2;break;case w.KI.TOP:p-=o/2;break;case w.KI.BOTTOM:p-=o/2,x-=u;break;case w.KI.TOP_LEFT:break;case w.KI.BOTTOM_LEFT:x-=u;break;case w.KI.TOP_RIGHT:p-=o;break;case w.KI.BOTTOM_RIGHT:p-=o,x-=u}const I=i.rect,f=2/a,v=p-f,A=x-f,N=v+I.width/a,M=A+I.height/a,R=new z.bR(v,A),P=new z.bR(N,M),S=new z.bR(v,M),W=new z.bR(N,A);if(0!==s){const U=Math.cos(s),Y=Math.sin(s);R.rotate(U,Y),P.rotate(U,Y),S.rotate(U,Y),W.rotate(U,Y)}const C=new mt(R,W,S,P,I,s,0,256,e,.5,G.MG,0);if(n.shapes.push(C),(!t.allowOverlap||!t.ignorePlacement)&&V.IT){const U=t.size,Y=t.padding;n.iconColliders.push({xTile:e.x,yTile:e.y,dxPixels:p*U-Y,dyPixels:x*U-Y,hard:!t.optional,partIndex:0,width:o*U+2*Y,height:u*U+2*Y,angle:s,minLod:.5,maxLod:G.MG})}}getTextPlacement(n,e,i,t){const s=new z.bR(n.x,n.y),a=t.rotate*G.os,o=t.rotationAlignment===w.I5.MAP,u=t.keepUpright,h=t.padding;let p=.5;const x=o?n.angle:0,I=n.segment>=0&&o,f=t.allowOverlap&&t.ignorePlacement?null:[],v=[],N=!I;let M=Number.POSITIVE_INFINITY,R=Number.NEGATIVE_INFINITY,P=M,S=R;const W=(I||o)&&u,C=t.size/D;let U=!1;for(const Z of e)if(Z.vertical){U=!0;break}let Y,j=0,et=0;if(!I&&U){const Z=L.getTextBox(e,t.lineHeight*D);switch(t.anchor){case w.KI.LEFT:j=Z.height/2,et=-Z.width/2;break;case w.KI.RIGHT:j=-Z.height/2,et=Z.width/2;break;case w.KI.TOP:j=Z.height/2,et=Z.width/2;break;case w.KI.BOTTOM:j=-Z.height/2,et=-Z.width/2;break;case w.KI.TOP_LEFT:j=Z.height;break;case w.KI.BOTTOM_LEFT:et=-Z.width;break;case w.KI.TOP_RIGHT:et=Z.width;break;case w.KI.BOTTOM_RIGHT:j=-Z.height}}j+=t.offset[0]*D,et+=t.offset[1]*D;for(const Z of e){const vt=Z.glyphMosaicItem;if(!vt||vt.rect.isEmpty)continue;const Tt=vt.rect,Mt=vt.metrics,Vt=vt.page;if(f&&N){if(void 0!==Y&&Y!==Z.y){let St,Ft,jt,Zt;U?(St=-S+j,Ft=M+et,jt=S-P,Zt=R-M):(St=M+j,Ft=P+et,jt=R-M,Zt=S-P),f.push({xTile:n.x,yTile:n.y,dxPixels:St*C-h,dyPixels:Ft*C-h,hard:!t.optional,partIndex:1,width:jt*C+2*h,height:Zt*C+2*h,angle:a,minLod:.5,maxLod:G.MG}),M=Number.POSITIVE_INFINITY,R=Number.NEGATIVE_INFINITY,P=M,S=R}Y=Z.y}const Qt=[];if(I){const Ft=(Z.x+Mt.left-4+.5*vt.metrics.width)*C*8;if(p=this._placeGlyph(n,p,Ft,i,n.segment,1,Z.vertical,Vt,Qt),u&&(p=this._placeGlyph(n,p,Ft,i,n.segment,-1,Z.vertical,Vt,Qt)),p>=2)break}else Qt.push(new $(s,x,x,Vt,!1)),o&&u&&Qt.push(new $(s,x+G.Jo,x+G.Jo,Vt,!1));const Kt=Z.x+Mt.left,Jt=Z.y-17-Mt.top,qt=Kt+Mt.width,le=Jt+Mt.height;let Nt,Ht,ne,ie,$t,re,ce,he;!I&&U?Z.vertical?(Nt=new z.bR(-((Jt+le)/2+Mt.width/2)-4+j,(Kt+qt)/2-Mt.height/2-4+et),Ht=new z.bR(Nt.x+Tt.width,Nt.y+Tt.height),ne=new z.bR(Nt.x,Ht.y),ie=new z.bR(Ht.x,Nt.y)):(Nt=new z.bR(4-Jt+j,Kt-4+et),Ht=new z.bR(Nt.x-Tt.height,Nt.y+Tt.width),ne=new z.bR(Ht.x,Nt.y),ie=new z.bR(Nt.x,Ht.y)):(Nt=new z.bR(Kt-4+j,Jt-4+et),Ht=new z.bR(Nt.x+Tt.width,Nt.y+Tt.height),ne=new z.bR(Nt.x,Ht.y),ie=new z.bR(Ht.x,Nt.y));for(const St of Qt){let Ft,jt,Zt,Yt;St.alternateVerticalGlyph?($t||($t=new z.bR((Kt+qt)/2+j-Mt.height/2-4,(Jt+le)/2+et+Mt.width/2+4),re=new z.bR($t.x+Tt.height,$t.y-Tt.width),ce=new z.bR(re.x,$t.y),he=new z.bR($t.x,re.y)),Ft=$t,jt=ce,Zt=he,Yt=re):(Ft=Nt,jt=ne,Zt=ie,Yt=Ht);const se=Jt,ue=le,oe=St.glyphAngle+a;if(0!==oe){const Xt=Math.cos(oe),ae=Math.sin(oe);Ft=Ft.clone(),jt=jt?.clone(),Zt=Zt?.clone(),Yt=Yt?.clone(),Ft.rotate(Xt,ae),Yt?.rotate(Xt,ae),jt?.rotate(Xt,ae),Zt?.rotate(Xt,ae)}let te=0,ee=256;I&&U?Z.vertical?St.alternateVerticalGlyph?(te=32,ee=96):(te=224,ee=32):(te=224,ee=96):(te=192,ee=64),v.push(new mt(Ft,Zt,jt,Yt,Tt,St.labelAngle,te,ee,St.anchor,St.minzoom,St.maxzoom,St.page)),!f||W&&!this._legible(St.labelAngle)||(N?(Kt<M&&(M=Kt),se<P&&(P=se),qt>R&&(R=qt),ue>S&&(S=ue)):St.minzoom<2&&f.push({xTile:n.x,yTile:n.y,dxPixels:(Kt+j)*C-h,dyPixels:(se+j)*C-h,hard:!t.optional,partIndex:1,width:(qt-Kt)*C+2*h,height:(ue-se)*C+2*h,angle:oe,minLod:St.minzoom,maxLod:St.maxzoom}))}}if(p>=2)return null;if(f&&N){let Z,vt,Tt,Mt;U?(Z=-S+j,vt=M+et,Tt=S-P,Mt=R-M):(Z=M+j,vt=P+et,Tt=R-M,Mt=S-P),f.push({xTile:n.x,yTile:n.y,dxPixels:Z*C-h,dyPixels:vt*C-h,hard:!t.optional,partIndex:1,width:Tt*C+2*h,height:Mt*C+2*h,angle:a,minLod:.5,maxLod:G.MG})}const ct=new It(v);return f&&f.length>0&&(ct.textColliders=f),ct}_legible(n){const e=(0,G.z0)(n);return e<65||e>=193}_placeGlyph(n,e,i,t,s,a,o,u,h){let p=a;const x=p<0?(0,G.Wh)(n.angle+G.Jo,G.pJ):n.angle;let I=0;i<0&&(p*=-1,i*=-1,I=G.Jo),p>0&&++s;let f=new z.bR(n.x,n.y),v=t[s],A=G.MG;if(t.length<=s)return A;for(;;){const N=v.x-f.x,M=v.y-f.y,R=Math.sqrt(N*N+M*M),P=Math.max(i/R,e),C=(0,G.Wh)(Math.atan2(M/R,N/R)+I,G.pJ);if(h.push(new $(f,x,C,u,!1,P,A)),o&&h.push(new $(f,x,C,u,!0,P,A)),P<=e)return P;f=v.clone();do{if(t.length<=(s+=p)||s<0)return P;v=t[s]}while(f.isEqual(v));let U=v.x-f.x,Y=v.y-f.y;const j=Math.sqrt(U*U+Y*Y);U*=R/j,Y*=R/j,f.x-=U,f.y-=Y,A=P}}}var Ct=J(55912),Pt=J(8897),_t=J(20788),rt=J(80913);class ut extends rt.A{constructor(){super(12)}add(n,e,i){const t=this.array;t.push(n),t.push(e),t.push(i)}}var Ot=J(97944);class k extends rt.A{constructor(n){super(n)}add(n,e,i,t,s,a,o,u,h,p,x,I){const f=this.array;let v=rt.A.i1616to32(n,e);f.push(v);const A=31;v=rt.A.i8888to32(Math.round(A*i),Math.round(A*t),Math.round(A*s),Math.round(A*a)),f.push(v),v=rt.A.i8888to32(Math.round(A*o),Math.round(A*u),Math.round(A*h),Math.round(A*p)),f.push(v),v=rt.A.i1616to32(x,0),f.push(v),I&&f.push(...I)}}class B extends rt.A{constructor(n){super(n)}add(n,e,i){const t=this.array;t.push(rt.A.i1616to32(n,e)),i&&t.push(...i)}}class c extends rt.A{constructor(n){super(n)}add(n,e,i,t,s,a,o){const u=this.array,h=this.index;let p=rt.A.i1616to32(n,e);return u.push(p),p=rt.A.i8888to32(Math.round(15*i),Math.round(15*t),s,a),u.push(p),o&&u.push(...o),h}}class _ extends rt.A{constructor(n){super(n)}add(n,e,i,t,s,a,o,u,h,p,x,I){const f=this.array;let v=rt.A.i1616to32(n,e);f.push(v),v=rt.A.i1616to32(Math.round(8*i),Math.round(8*t)),f.push(v),v=rt.A.i8888to32(s/4,a/4,u,h),f.push(v),v=rt.A.i8888to32(0,(0,G.z0)(o),10*p,Math.min(10*x,255)),f.push(v),I&&f.push(...I)}}class d extends rt.A{constructor(n){super(n)}add(n,e,i,t,s){const a=this.array,o=rt.A.i1616to32(2*n+i,2*e+t);a.push(o),s&&a.push(...s)}}class g{constructor(n,e,i){this.layerExtent=4096,this._features=[],this.layer=n,this.zoom=e,this._spriteInfo=i,this._filter=n.getFeatureFilter()}pushFeature(n){this._filter&&!this._filter.filter(n,this.zoom)||this._features.push(n)}hasFeatures(){return this._features.length>0}getResources(n,e,i){}}class T extends g{constructor(n,e,i,t,s){super(n,e,i),this.type=Q.NP.CIRCLE,this._circleVertexBuffer=t,this._circleIndexBuffer=s}get circleIndexStart(){return this._circleIndexStart}get circleIndexCount(){return this._circleIndexCount}processFeatures(n){const e=this._circleVertexBuffer,i=this._circleIndexBuffer;this._circleIndexStart=3*i.index,this._circleIndexCount=0;const t=this.layer,s=this.zoom;n&&n.setExtent(this.layerExtent);for(const a of this._features){const o=a.getGeometry(n);if(!o)continue;const u=t.circleMaterial.encodeAttributes(a,s,t);for(const h of o)if(h)for(const p of h){const x=e.index;e.add(p.x,p.y,0,0,u),e.add(p.x,p.y,0,1,u),e.add(p.x,p.y,1,0,u),e.add(p.x,p.y,1,1,u),i.add(x,x+1,x+2),i.add(x+1,x+2,x+3),this._circleIndexCount+=6}}}serialize(){let n=6;n+=this.layerUIDs.length,n+=this._circleVertexBuffer.array.length,n+=this._circleIndexBuffer.array.length;const e=new Uint32Array(n),i=new Int32Array(e.buffer);let t=0;e[t++]=this.type,e[t++]=this.layerUIDs.length;for(let s=0;s<this.layerUIDs.length;s++)e[t++]=this.layerUIDs[s];e[t++]=this._circleIndexStart,e[t++]=this._circleIndexCount,e[t++]=this._circleVertexBuffer.array.length;for(let s=0;s<this._circleVertexBuffer.array.length;s++)i[t++]=this._circleVertexBuffer.array[s];e[t++]=this._circleIndexBuffer.array.length;for(let s=0;s<this._circleIndexBuffer.array.length;s++)e[t++]=this._circleIndexBuffer.array[s];return e.buffer}}var r=J(56595),l=J(92405);class m extends g{constructor(n,e,i,t,s,a,o){super(n,e,i),this.type=Q.NP.FILL,this._patternMap=new Map,this._fillVertexBuffer=t,this._fillIndexBuffer=s,this._outlineVertexBuffer=a,this._outlineIndexBuffer=o}get fillIndexStart(){return this._fillIndexStart}get fillIndexCount(){return this._fillIndexCount}get outlineIndexStart(){return this._outlineIndexStart}get outlineIndexCount(){return this._outlineIndexCount}getResources(n,e,i){const s=this.zoom,a=this.layer.getPaintProperty("fill-pattern");if(a)if(a.isDataDriven)for(const o of this._features)e(a.getValue(s,o),!0);else e(a.getValue(s),!0)}processFeatures(n){this._fillIndexStart=3*this._fillIndexBuffer.index,this._fillIndexCount=0,this._outlineIndexStart=3*this._outlineIndexBuffer.index,this._outlineIndexCount=0;const e=this.layer,i=this.zoom,{fillMaterial:t,outlineMaterial:s,hasDataDrivenFill:a,hasDataDrivenOutline:o}=e;n&&n.setExtent(this.layerExtent);const u=e.getPaintProperty("fill-pattern"),h=u?.isDataDriven;let p=!u&&e.getPaintValue("fill-antialias",i);if(e.outlineUsesFillColor){if(p&&!e.hasDataDrivenOpacity){const f=e.getPaintValue("fill-opacity",i),v=e.getPaintValue("fill-opacity",i+1);f<1&&v<1&&(p=!1)}if(p&&!e.hasDataDrivenColor){const f=e.getPaintValue("fill-color",i),v=e.getPaintValue("fill-color",i+1);f[3]<1&&v[3]<1&&(p=!1)}}const x=this._features,I=n?.validateTessellation;if(h){const f=[];for(const v of x){const A=u.getValue(i,v),N=this._spriteInfo[A];if(!N?.rect)continue;const M=t.encodeAttributes(v,i,e,N),R=p&&o?s.encodeAttributes(v,i,e):[],P=v.getGeometry(n);f.push({ddFillAttributes:M,ddOutlineAttributes:R,page:N.page,geometry:P}),f.sort((S,W)=>S.page-W.page);for(const{ddFillAttributes:S,ddOutlineAttributes:W,page:C,geometry:U}of f)this._processFeature(U,p,e.outlineUsesFillColor,S,W,I,C)}}else for(const f of x){const v=a?t.encodeAttributes(f,i,e):null,A=p&&o?s.encodeAttributes(f,i,e):null,N=f.getGeometry(n);this._processFeature(N,p,e.outlineUsesFillColor,v,A,I)}}serialize(){let n=10;n+=this.layerUIDs.length,n+=this._fillVertexBuffer.array.length,n+=this._fillIndexBuffer.array.length,n+=this._outlineVertexBuffer.array.length,n+=this._outlineIndexBuffer.array.length,n+=3*this._patternMap.size+1;const e=new Uint32Array(n),i=new Int32Array(e.buffer);let t=0;e[t++]=this.type,e[t++]=this.layerUIDs.length;for(let o=0;o<this.layerUIDs.length;o++)e[t++]=this.layerUIDs[o];e[t++]=this._fillIndexStart,e[t++]=this._fillIndexCount,e[t++]=this._outlineIndexStart,e[t++]=this._outlineIndexCount;const s=this._patternMap,a=s.size;if(e[t++]=a,a>0)for(const[o,[u,h]]of s)e[t++]=o,e[t++]=u,e[t++]=h;e[t++]=this._fillVertexBuffer.array.length;for(let o=0;o<this._fillVertexBuffer.array.length;o++)i[t++]=this._fillVertexBuffer.array[o];e[t++]=this._fillIndexBuffer.array.length;for(let o=0;o<this._fillIndexBuffer.array.length;o++)e[t++]=this._fillIndexBuffer.array[o];e[t++]=this._outlineVertexBuffer.array.length;for(let o=0;o<this._outlineVertexBuffer.array.length;o++)i[t++]=this._outlineVertexBuffer.array[o];e[t++]=this._outlineIndexBuffer.array.length;for(let o=0;o<this._outlineIndexBuffer.array.length;o++)e[t++]=this._outlineIndexBuffer.array[o];return e.buffer}_processFeature(n,e,i,t,s,a,o){if(!n)return;const u=n.length;if(e&&(!i||!s||0===s.length))for(let I=0;I<u;I++)this._processOutline(n[I],s);let x;for(let I=0;I<u;I++){const f=m._area(n[I]);f>32?(void 0!==x&&this._processFill(n,x,t,a,o),x=[I]):f<-32&&void 0!==x&&x.push(I)}void 0!==x&&this._processFill(n,x,t,a,o)}_processOutline(n,e){const i=this._outlineVertexBuffer,t=this._outlineIndexBuffer,s=t.index;let a,o,u;const h=new z.bR(0,0),p=new z.bR(0,0),x=new z.bR(0,0);let I=-1,f=-1,v=-1,A=-1,N=-1,M=!1,P=n.length;if(P<2)return;const S=n[0];let W=n[P-1];for(;P&&W.isEqual(S);)--P,W=n[P-1];if(!(P-0<2)){for(let C=0;C<P;++C){0===C?(a=n[P-1],o=n[0],u=n[1],h.assignSub(o,a),h.normalize(),h.rightPerpendicular()):(a=o,o=u,u=C!==P-1?n[C+1]:n[0],h.assign(p));const U=this._isClipEdge(a,o);-1===A&&(M=U),p.assignSub(u,o),p.normalize(),p.rightPerpendicular();const Y=h.x*p.y-h.y*p.x;x.assignAdd(h,p),x.normalize();const j=-x.x*-h.x+-x.y*-h.y;let et=Math.abs(0!==j?1/j:1);et>8&&(et=8),Y>=0?(v=i.add(o.x,o.y,h.x,h.y,0,1,e),-1===A&&(A=v),I>=0&&f>=0&&v>=0&&!U&&t.add(I,f,v),f=i.add(o.x,o.y,et*-x.x,et*-x.y,0,-1,e),-1===N&&(N=f),I>=0&&f>=0&&v>=0&&!U&&t.add(I,f,v),I=f,f=v,v=i.add(o.x,o.y,x.x,x.y,0,1,e),I>=0&&f>=0&&v>=0&&!U&&t.add(I,f,v),f=i.add(o.x,o.y,p.x,p.y,0,1,e),I>=0&&f>=0&&v>=0&&!U&&t.add(I,f,v)):(v=i.add(o.x,o.y,et*x.x,et*x.y,0,1,e),-1===A&&(A=v),I>=0&&f>=0&&v>=0&&!U&&t.add(I,f,v),f=i.add(o.x,o.y,-h.x,-h.y,0,-1,e),-1===N&&(N=f),I>=0&&f>=0&&v>=0&&!U&&t.add(I,f,v),I=f,f=v,v=i.add(o.x,o.y,-x.x,-x.y,0,-1,e),I>=0&&f>=0&&v>=0&&!U&&t.add(I,f,v),I=i.add(o.x,o.y,-p.x,-p.y,0,-1,e),I>=0&&f>=0&&v>=0&&!U&&t.add(I,f,v))}I>=0&&f>=0&&A>=0&&!M&&t.add(I,f,A),I>=0&&A>=0&&N>=0&&!M&&t.add(I,N,A),this._outlineIndexCount+=3*(t.index-s)}}_processFill(n,e,i,t,s){let a;e.length>1&&(a=[]);let o=0;for(const x of e)0!==o&&a.push(o),o+=n[x].length;const u=2*o,h=r.A.acquire();for(const x of e){const I=n[x],f=I.length;for(let v=0;v<f;++v)h.push(I[v].x,I[v].y)}const p=(0,l.e)(h,a,2);if(l.e.deviation(h,a,2,p)>0){const x=e.map(v=>n[v].length),{buffer:I,vertexCount:f}=(0,Pt.l)(h,x);if(f>0){const v=this._fillVertexBuffer.index;for(let A=0;A<f;A++)this._fillVertexBuffer.add(I[2*A],I[2*A+1],i);for(let A=0;A<f;A+=3){const N=v+A;this._fillIndexBuffer.add(N,N+1,N+2)}if(void 0!==s){const A=this._patternMap,N=A.get(s);N?N[1]+=f:A.set(s,[this._fillIndexStart+this._fillIndexCount,f])}this._fillIndexCount+=f}}else{const x=p.length;if(x>0){const I=this._fillVertexBuffer.index;let f=0;for(;f<u;)this._fillVertexBuffer.add(h[f++],h[f++],i);let v=0;for(;v<x;)this._fillIndexBuffer.add(I+p[v++],I+p[v++],I+p[v++]);if(void 0!==s){const A=this._patternMap,N=A.get(s);N?N[1]+=x:A.set(s,[this._fillIndexStart+this._fillIndexCount,x])}this._fillIndexCount+=x}}r.A.release(h)}_isClipEdge(n,e){return n.x===e.x?n.x<=-64||n.x>=4160:n.y===e.y&&(n.y<=-64||n.y>=4160)}static _area(n){let e=0;const i=n.length-1;for(let t=0;t<i;t++)e+=(n[t].x-n[t+1].x)*(n[t].y+n[t+1].y);return e+=(n[i].x-n[0].x)*(n[i].y+n[0].y),.5*e}}var O=J(7933);class nt extends g{constructor(n,e,i,t,s){super(n,e,i),this.type=Q.NP.LINE,this._tessellationOptions={pixelCoordRatio:8,halfWidth:0,offset:0},this._patternMap=new Map,this.tessellationProperties={_lineVertexBuffer:null,_lineIndexBuffer:null,_ddValues:null},this.tessellationProperties._lineVertexBuffer=t,this.tessellationProperties._lineIndexBuffer=s,this._lineTessellator=new O.i(K(this.tessellationProperties),st(this.tessellationProperties),n.canUseThinTessellation)}get lineIndexStart(){return this._lineIndexStart}get lineIndexCount(){return this._lineIndexCount}getResources(n,e,i){const t=this.layer,s=this.zoom,a=t.getPaintProperty("line-pattern"),o=t.getPaintProperty("line-dasharray"),u=t.getLayoutProperty("line-cap");if(!a&&!o)return;const h=u?.getValue(s)||0,p=u?.isDataDriven,x=a?.isDataDriven,I=o?.isDataDriven;if(x||I)for(const f of this._features)e(x?a.getValue(s,f):this._getDashArrayKey(f,s,t,o,p,u,h));else if(a)e(a.getValue(s));else if(o){const f=o.getValue(s);e(t.getDashKey(f,h))}}processFeatures(n){this._lineIndexStart=3*this.tessellationProperties._lineIndexBuffer.index,this._lineIndexCount=0;const e=this.layer,i=this.zoom,t=this._features,s=this._tessellationOptions,{hasDataDrivenLine:a,lineMaterial:o}=e;n&&n.setExtent(this.layerExtent);const u=e.getPaintProperty("line-pattern"),h=e.getPaintProperty("line-dasharray"),p=u?.isDataDriven,x=h?.isDataDriven;let I;I=e.getLayoutProperty("line-cap");const f=I?.isDataDriven?I:null,v=f?null:e.getLayoutValue("line-cap",i),A=v||0,N=!!f;I=e.getLayoutProperty("line-join");const M=I?.isDataDriven?I:null,R=M?null:e.getLayoutValue("line-join",i);I=e.getLayoutProperty("line-miter-limit");const P=I?.isDataDriven?I:null,S=P?null:e.getLayoutValue("line-miter-limit",i);I=e.getLayoutProperty("line-round-limit");const W=I?.isDataDriven?I:null,C=W?null:e.getLayoutValue("line-round-limit",i);I=e.getPaintProperty("line-width");const U=I?.isDataDriven?I:null,Y=U?null:e.getPaintValue("line-width",i);I=e.getPaintProperty("line-offset");const j=I?.isDataDriven?I:null,et=j?null:e.getPaintValue("line-offset",i);if(p||x){const ct=[];for(const Z of t){const vt=p?u.getValue(i,Z):this._getDashArrayKey(Z,i,e,h,N,f,A),Tt=this._spriteInfo[vt];if(!Tt?.rect)continue;const Mt=o.encodeAttributes(Z,i,e,Tt),Vt=Z.getGeometry(n);ct.push({ddAttributes:Mt,page:Tt.page,cap:f?f.getValue(i,Z):v,join:M?M.getValue(i,Z):R,miterLimit:P?P.getValue(i,Z):S,roundLimit:W?W.getValue(i,Z):C,halfWidth:.5*(U?U.getValue(i,Z):Y),offset:j?j.getValue(i,Z):et,geometry:Vt})}ct.sort((Z,vt)=>Z.page-vt.page),s.textured=!0;for(const{ddAttributes:Z,page:vt,cap:Tt,join:Mt,miterLimit:Vt,roundLimit:Qt,halfWidth:Kt,offset:Jt,geometry:qt}of ct)s.capType=Tt,s.joinType=Mt,s.miterLimit=Vt,s.roundLimit=Qt,s.halfWidth=Kt,s.offset=Jt,this._processFeature(qt,Z,vt)}else{if(u){const ct=u.getValue(i);if(!this._spriteInfo[ct]?.rect)return}s.textured=!(!u&&!h),s.capType=v,s.joinType=R,s.miterLimit=S,s.roundLimit=C,s.halfWidth=.5*Y,s.offset=et;for(const ct of t){const Z=a?o.encodeAttributes(ct,i,e):null;f&&(s.capType=f.getValue(i,ct)),M&&(s.joinType=M.getValue(i,ct)),P&&(s.miterLimit=P.getValue(i,ct)),W&&(s.roundLimit=W.getValue(i,ct)),U&&(s.halfWidth=.5*U.getValue(i,ct)),j&&(s.offset=j.getValue(i,ct));const vt=ct.getGeometry(n);this._processFeature(vt,Z)}}}serialize(){let n=6;n+=this.layerUIDs.length,n+=this.tessellationProperties._lineVertexBuffer.array.length,n+=this.tessellationProperties._lineIndexBuffer.array.length,n+=3*this._patternMap.size+1;const e=new Uint32Array(n),i=new Int32Array(e.buffer);let t=0;e[t++]=this.type,e[t++]=this.layerUIDs.length;for(let o=0;o<this.layerUIDs.length;o++)e[t++]=this.layerUIDs[o];e[t++]=this._lineIndexStart,e[t++]=this._lineIndexCount;const s=this._patternMap,a=s.size;if(e[t++]=a,a>0)for(const[o,[u,h]]of s)e[t++]=o,e[t++]=u,e[t++]=h;e[t++]=this.tessellationProperties._lineVertexBuffer.array.length;for(let o=0;o<this.tessellationProperties._lineVertexBuffer.array.length;o++)i[t++]=this.tessellationProperties._lineVertexBuffer.array[o];e[t++]=this.tessellationProperties._lineIndexBuffer.array.length;for(let o=0;o<this.tessellationProperties._lineIndexBuffer.array.length;o++)e[t++]=this.tessellationProperties._lineIndexBuffer.array[o];return e.buffer}_processFeature(n,e,i){if(!n)return;const t=n.length;for(let s=0;s<t;s++)this._processGeometry(n[s],e,i)}_processGeometry(n,e,i){if(n.length<2)return;let s,a,o=n[0],u=1;for(;u<n.length;)s=n[u].x-o.x,a=n[u].y-o.y,s*s+a*a<1e-6?n.splice(u,1):(o=n[u],++u);if(n.length<2)return;const h=this.tessellationProperties._lineIndexBuffer,p=3*h.index;this._tessellationOptions.initialDistance=0,this._tessellationOptions.wrapDistance=65535,this.tessellationProperties._ddValues=e,this._lineTessellator.tessellate(n,this._tessellationOptions);const x=3*h.index-p;if(void 0!==i){const I=this._patternMap,f=I.get(i);f?f[1]+=x:I.set(i,[p+this._lineIndexCount,x])}this._lineIndexCount+=x}_getDashArrayKey(n,e,i,t,s,a,o){const u=s?a.getValue(e,n):o,h=t.getValue(e,n);return i.getDashKey(h,u)}}const K=y=>(n,e,i,t,s,a,o,u,h,p,x)=>(y._lineVertexBuffer.add(n,e,o,u,i,t,s,a,h,p,x,y._ddValues),y._lineVertexBuffer.index-1),st=y=>(n,e,i)=>{y._lineIndexBuffer.add(n,e,i)};var At,y,tt=J(82818),H=J(11432),Et=J(1119),Bt=J(53220);function kt(y,n){return y.iconMosaicItem&&n.iconMosaicItem?y.iconMosaicItem.page===n.iconMosaicItem.page?0:y.iconMosaicItem.page-n.iconMosaicItem.page:y.iconMosaicItem&&!n.iconMosaicItem?1:!y.iconMosaicItem&&n.iconMosaicItem?-1:0}class pt extends g{constructor(n,e,i,t,s,a,o,u,h){super(e,i,h.getSpriteItems()),this.type=Q.NP.SYMBOL,this._markerMap=new Map,this._glyphMap=new Map,this._glyphBufferDataStorage=new Map,this._isIconSDF=!1,this._sourceTileKey=n,this._iconVertexBuffer=t,this._iconIndexBuffer=s,this._textVertexBuffer=a,this._textIndexBuffer=o,this._placementEngine=u,this._workerTileHandler=h}get markerPageMap(){return this._markerMap}get glyphsPageMap(){return this._glyphMap}get symbolInstances(){return this._symbolInstances}getResources(n,e,i){const t=this.layer,s=this.zoom;n&&n.setExtent(this.layerExtent);const a=t.getLayoutProperty("icon-image"),o=t.getLayoutProperty("text-field");let u=t.getLayoutProperty("text-transform"),h=t.getLayoutProperty("text-font");const p=[];let x,I,f,v;a&&!a.isDataDriven&&(x=a.getValue(s)),o&&!o.isDataDriven&&(I=o.getValue(s)),u&&u.isDataDriven||(f=t.getLayoutValue("text-transform",s),u=null),h&&h.isDataDriven||(v=t.getLayoutValue("text-font",s),h=null);for(const A of this._features){const N=A.getGeometry(n);if(!N||0===N.length)continue;let M,R;a&&(M=a.isDataDriven?a.getValue(s,A):this._replaceKeys(x,A.values),M&&e(M));let P=!1;if(o&&(R=o.isDataDriven?o.getValue(s,A):this._replaceKeys(I,A.values),R)){switch(R=R.replaceAll("\\n","\n"),u&&(f=u.getValue(s,A)),f){case w.Ms.LOWERCASE:R=R.toLowerCase();break;case w.Ms.UPPERCASE:R=R.toUpperCase()}if(pt._bidiEngine.hasBidiChar(R)){let C;C="rtl"===pt._bidiEngine.checkContextual(R)?"IDNNN":"ICNNN",R=pt._bidiEngine.bidiTransform(R,C,"VLYSN"),P=!0}if(R.length>0){h&&(v=h.getValue(s,A));for(const C of v){let U=i[C];U||(U=i[C]=new Set);for(const Y of R){const j=Y.codePointAt(0);null!=j&&U.add(j)}}}}if(!M&&!R)continue;const S=t.getLayoutValue("symbol-sort-key",s,A),W={feature:A,sprite:M,label:R,rtl:P,geometry:N,hash:(R?(0,Et.Wm)(R):0)^(M?(0,Et.Wm)(M):0),priority:S,textFont:v};p.push(W)}this._symbolFeatures=p}processFeatures(n){n&&n.setExtent(this.layerExtent);const e=this.layer,i=this.zoom,t=e.getLayoutValue("symbol-placement",i),s=t!==w.kt.POINT,a=8*e.getLayoutValue("symbol-spacing",i),o=e.getLayoutProperty("icon-image"),u=e.getLayoutProperty("text-field"),h=o?new Bt.aR(e,i,s):null,p=u?new Bt.uU(e,i,s):null,x=this._workerTileHandler;let I;o&&(I=x.getSpriteItems()),this._iconIndexStart=3*this._iconIndexBuffer.index,this._textIndexStart=3*this._textIndexBuffer.index,this._iconIndexCount=0,this._textIndexCount=0,this._markerMap.clear(),this._glyphMap.clear();const f=[];let v=1;p?.size&&(v=p.size/D);const A=p?p.maxAngle*G.os:0,N=p?8*p.size:0;for(const M of this._symbolFeatures){let R,P;h&&I&&M.sprite&&(R=I[M.sprite],R&&R.sdf&&(this._isIconSDF=!0)),R&&h.update(i,M.feature);let S=0;const W=M.label;if(W){(0,H.Lw)(p),p.update(i,M.feature);const C=s&&p.rotationAlignment===w.I5.MAP?p.keepUpright:p.writingMode&&p.writingMode.includes(w.v9.VERTICAL);let U=.5;switch(p.anchor){case w.KI.TOP_LEFT:case w.KI.LEFT:case w.KI.BOTTOM_LEFT:U=0;break;case w.KI.TOP_RIGHT:case w.KI.RIGHT:case w.KI.BOTTOM_RIGHT:U=1}let Y=.5;switch(p.anchor){case w.KI.TOP_LEFT:case w.KI.TOP:case w.KI.TOP_RIGHT:Y=0;break;case w.KI.BOTTOM_LEFT:case w.KI.BOTTOM:case w.KI.BOTTOM_RIGHT:Y=1}let j=.5;switch(p.justify){case w.O6.AUTO:j=U;break;case w.O6.LEFT:j=0;break;case w.O6.RIGHT:j=1}const et=p.letterSpacing*D,ct=s?0:p.maxWidth*D,Z=p.lineHeight*D,vt=M.textFont.map(Tt=>x.getGlyphItems(Tt));if(P=new L(vt,ct,Z,et,U,Y,j).getShaping(W,M.rtl,C),P&&P.length>0){let Tt=1e30,Mt=-1e30;for(const Vt of P)Tt=Math.min(Tt,Vt.x),Mt=Math.max(Mt,Vt.x);S=(Mt-Tt+48)*v*8}}for(let C of M.geometry){const U=[];if(t===w.kt.LINE){if(P?.length&&p?.size){const Y=8*p.size*(2+Math.min(2,4*Math.abs(p.offset[1])));C=pt._smoothVertices(C,Y)}pt._pushAnchors(U,C,a,S)}else t===w.kt.LINE_CENTER?pt._pushCenterAnchor(U,C):M.feature.type===z.dC.Polygon?pt._pushCentroid(U,C):U.push(new ft(C[0].x,C[0].y));for(const Y of U){if(Y.x<0||Y.x>4096||Y.y<0||Y.y>4096||s&&S>0&&p?.rotationAlignment===w.I5.MAP&&!pt._honorsTextMaxAngle(C,Y,S,A,N))continue;const j={shaping:P,line:C,iconMosaicItem:R,anchor:Y,symbolFeature:M,textColliders:[],iconColliders:[],textVertexRanges:[],iconVertexRanges:[]};f.push(j),this._processFeature(j,h,p)}}}f.sort(kt),this._addPlacedGlyphs(),this._symbolInstances=f}serialize(){let n=14;n+=this.layerUIDs.length,n+=3*this.markerPageMap.size,n+=3*this.glyphsPageMap.size,n+=pt._symbolsSerializationLength(this._symbolInstances),n+=this._iconVertexBuffer.array.length,n+=this._iconIndexBuffer.array.length,n+=this._textVertexBuffer.array.length,n+=this._textIndexBuffer.array.length;const e=new Uint32Array(n),i=new Int32Array(e.buffer),t=new Float32Array(e.buffer),[s,a,o]=this._sourceTileKey.split("/");let u=0;e[u++]=this.type,e[u++]=this.layerUIDs.length;for(let h=0;h<this.layerUIDs.length;h++)e[u++]=this.layerUIDs[h];e[u++]=this._isIconSDF?1:0,e[u++]=parseFloat(s),e[u++]=parseFloat(a),e[u++]=parseFloat(o),e[u++]=this.markerPageMap.size;for(const[h,[p,x]]of this.markerPageMap)e[u++]=h,e[u++]=p,e[u++]=x;e[u++]=this.glyphsPageMap.size;for(const[h,[p,x]]of this.glyphsPageMap)e[u++]=h,e[u++]=p,e[u++]=x;e[u++]=this._iconVertexBuffer.index/4,e[u++]=this._textVertexBuffer.index/4,u=pt.serializeSymbols(e,i,t,u,this._symbolInstances),e[u++]=this._iconVertexBuffer.array.length;for(let h=0;h<this._iconVertexBuffer.array.length;h++)i[u++]=this._iconVertexBuffer.array[h];e[u++]=this._iconIndexBuffer.array.length;for(let h=0;h<this._iconIndexBuffer.array.length;h++)e[u++]=this._iconIndexBuffer.array[h];e[u++]=this._textVertexBuffer.array.length;for(let h=0;h<this._textVertexBuffer.array.length;h++)i[u++]=this._textVertexBuffer.array[h];e[u++]=this._textIndexBuffer.array.length;for(let h=0;h<this._textIndexBuffer.array.length;h++)e[u++]=this._textIndexBuffer.array[h];return e.buffer}static _symbolsSerializationLength(n){let e=0;e+=1;for(const i of n||[]){e+=5,e+=1;for(const t of i.textColliders)e+=10;for(const t of i.iconColliders)e+=10;e+=1,e+=2*i.textVertexRanges.length,e+=1,e+=2*i.iconVertexRanges.length}return e}static serializeSymbols(n,e,i,t,s){e[t++]=(s=s||[]).length;for(const a of s){e[t++]=a.anchor.x,e[t++]=a.anchor.y,e[t++]=a.symbolFeature.hash,e[t++]=a.symbolFeature.priority,e[t++]=a.symbolFeature.feature.featureIndex,e[t++]=a.textColliders.length+a.iconColliders.length;for(const o of a.textColliders)e[t++]=o.xTile,e[t++]=o.yTile,e[t++]=o.dxPixels,e[t++]=o.dyPixels,e[t++]=o.hard?1:0,e[t++]=o.partIndex,i[t++]=o.minLod,i[t++]=o.maxLod,e[t++]=o.width,e[t++]=o.height;for(const o of a.iconColliders)e[t++]=o.xTile,e[t++]=o.yTile,e[t++]=o.dxPixels,e[t++]=o.dyPixels,e[t++]=o.hard?1:0,e[t++]=o.partIndex,i[t++]=o.minLod,i[t++]=o.maxLod,e[t++]=o.width,e[t++]=o.height;e[t++]=a.textVertexRanges.length;for(const[o,u]of a.textVertexRanges)e[t++]=o,e[t++]=u;e[t++]=a.iconVertexRanges.length;for(const[o,u]of a.iconVertexRanges)e[t++]=o,e[t++]=u}return t}_replaceKeys(n,e){return n.replaceAll(/{([^{}]+)}/g,(i,t)=>t in e?e[t]:"")}_processFeature(n,e,i){const{line:t,iconMosaicItem:s,shaping:a,anchor:o}=n,u=this.zoom,h=this.layer,p=!!s;let x=!0;p&&(x=e?.optional||!s);const I=a&&a.length>0,f=!I||i?.optional;let v,A;if(p&&(v=this._placementEngine.getIconPlacement(o,s,e)),(v||x)&&(I&&(A=this._placementEngine.getTextPlacement(o,a,t,i)),A||f)){if(v&&A||(f||x?f||A?x||v||(A=null):v=null:(v=null,A=null)),A){const N=h.hasDataDrivenText?h.textMaterial.encodeAttributes(n.symbolFeature.feature,u,h):null;if(this._storePlacedGlyphs(n,A.shapes,u,i.rotationAlignment,N),A.textColliders){n.textColliders=A.textColliders;for(const M of A.textColliders){M.minLod=Math.max(u+(0,G.p6)(M.minLod),0),M.maxLod=Math.min(u+(0,G.p6)(M.maxLod),25);const R=M.angle;if(R){const P=Math.cos(R),S=Math.sin(R),W=M.dxPixels*P-M.dyPixels*S,C=M.dxPixels*S+M.dyPixels*P,U=(M.dxPixels+M.width)*P-M.dyPixels*S,Y=(M.dxPixels+M.width)*S+M.dyPixels*P,j=M.dxPixels*P-(M.dyPixels+M.height)*S,et=M.dxPixels*S+(M.dyPixels+M.height)*P,ct=(M.dxPixels+M.width)*P-(M.dyPixels+M.height)*S,Z=(M.dxPixels+M.width)*S+(M.dyPixels+M.height)*P,vt=Math.min(W,U,j,ct),Tt=Math.max(W,U,j,ct),Mt=Math.min(C,Y,et,Z),Vt=Math.max(C,Y,et,Z);M.dxPixels=vt,M.dyPixels=Mt,M.width=Tt-vt,M.height=Vt-Mt}}}}if(v){const N=h.hasDataDrivenIcon?h.iconMaterial.encodeAttributes(n.symbolFeature.feature,u,h):null;if(this._addPlacedIcons(n,v.shapes,u,s.page,e.rotationAlignment===w.I5.VIEWPORT,N),v.iconColliders){n.iconColliders=v.iconColliders;for(const M of v.iconColliders){M.minLod=Math.max(u+(0,G.p6)(M.minLod),0),M.maxLod=Math.min(u+(0,G.p6)(M.maxLod),25);const R=M.angle;if(R){const P=Math.cos(R),S=Math.sin(R),W=M.dxPixels*P-M.dyPixels*S,C=M.dxPixels*S+M.dyPixels*P,U=(M.dxPixels+M.width)*P-M.dyPixels*S,Y=(M.dxPixels+M.width)*S+M.dyPixels*P,j=M.dxPixels*P-(M.dyPixels+M.height)*S,et=M.dxPixels*S+(M.dyPixels+M.height)*P,ct=(M.dxPixels+M.width)*P-(M.dyPixels+M.height)*S,Z=(M.dxPixels+M.width)*S+(M.dyPixels+M.height)*P,vt=Math.min(W,U,j,ct),Tt=Math.max(W,U,j,ct),Mt=Math.min(C,Y,et,Z),Vt=Math.max(C,Y,et,Z);M.dxPixels=vt,M.dyPixels=Mt,M.width=Tt-vt,M.height=Vt-Mt}}}}}}_addPlacedIcons(n,e,i,t,s,a){const o=Math.max(i-1,0),u=this._iconVertexBuffer,h=this._iconIndexBuffer,p=this._markerMap;for(const x of e){const I=s?0:Math.max(i+(0,G.p6)(x.minzoom),o),f=s?25:Math.min(i+(0,G.p6)(x.maxzoom),25);if(f<=I)continue;const v=x.tl,A=x.tr,N=x.bl,M=x.br,R=x.mosaicRect,P=x.labelAngle,S=x.minAngle,W=x.maxAngle,C=x.anchor,U=u.index,Y=R.x,j=R.y,et=Y+R.width,ct=j+R.height,Z=u.index;u.add(C.x,C.y,v.x,v.y,Y,j,P,S,W,I,f,a),u.add(C.x,C.y,A.x,A.y,et,j,P,S,W,I,f,a),u.add(C.x,C.y,N.x,N.y,Y,ct,P,S,W,I,f,a),u.add(C.x,C.y,M.x,M.y,et,ct,P,S,W,I,f,a),n.iconVertexRanges.length>0&&n.iconVertexRanges[0][0]+n.iconVertexRanges[0][1]===Z?n.iconVertexRanges[0][1]+=4:n.iconVertexRanges.push([Z,4]),h.add(U,U+1,U+2),h.add(U+1,U+2,U+3),p.has(t)?p.get(t)[1]+=6:p.set(t,[this._iconIndexStart+this._iconIndexCount,6]),this._iconIndexCount+=6}}_addPlacedGlyphs(){const n=this._textVertexBuffer,e=this._textIndexBuffer,i=this._glyphMap;for(const[t,s]of this._glyphBufferDataStorage)for(const a of s){const o=n.index,u=a.symbolInstance,h=a.ddAttributes,p=n.index;n.add(a.glyphAnchor[0],a.glyphAnchor[1],a.tl[0],a.tl[1],a.xmin,a.ymin,a.labelAngle,a.minAngle,a.maxAngle,a.minLod,a.maxLod,h),n.add(a.glyphAnchor[0],a.glyphAnchor[1],a.tr[0],a.tr[1],a.xmax,a.ymin,a.labelAngle,a.minAngle,a.maxAngle,a.minLod,a.maxLod,h),n.add(a.glyphAnchor[0],a.glyphAnchor[1],a.bl[0],a.bl[1],a.xmin,a.ymax,a.labelAngle,a.minAngle,a.maxAngle,a.minLod,a.maxLod,h),n.add(a.glyphAnchor[0],a.glyphAnchor[1],a.br[0],a.br[1],a.xmax,a.ymax,a.labelAngle,a.minAngle,a.maxAngle,a.minLod,a.maxLod,h),u.textVertexRanges.length>0&&u.textVertexRanges[0][0]+u.textVertexRanges[0][1]===p?u.textVertexRanges[0][1]+=4:u.textVertexRanges.push([p,4]),e.add(o,o+1,o+2),e.add(o+1,o+2,o+3),i.has(t)?i.get(t)[1]+=6:i.set(t,[this._textIndexStart+this._textIndexCount,6]),this._textIndexCount+=6}this._glyphBufferDataStorage.clear()}_storePlacedGlyphs(n,e,i,t,s){const a=Math.max(i-1,0),o=t===w.I5.VIEWPORT;let u,h,p,x,I,f,v,A,N,M,R;for(const P of e)u=o?0:Math.max(i+(0,G.p6)(P.minzoom),a),h=o?25:Math.min(i+(0,G.p6)(P.maxzoom),25),!(h<=u)&&(p=P.tl,x=P.tr,I=P.bl,f=P.br,v=P.labelAngle,A=P.minAngle,N=P.maxAngle,M=P.anchor,R=P.mosaicRect,this._glyphBufferDataStorage.has(P.page)||this._glyphBufferDataStorage.set(P.page,[]),this._glyphBufferDataStorage.get(P.page).push({glyphAnchor:[M.x,M.y],tl:[p.x,p.y],tr:[x.x,x.y],bl:[I.x,I.y],br:[f.x,f.y],xmin:R.x,ymin:R.y,xmax:R.x+R.width,ymax:R.y+R.height,labelAngle:v,minAngle:A,maxAngle:N,minLod:u,maxLod:h,placementLod:a,symbolInstance:n,ddAttributes:s}))}static _pushAnchors(n,e,i,t){i+=t;let s=0;const a=e.length-1;for(let I=0;I<a;I++)s+=z.bR.distance(e[I],e[I+1]);let o=t||i;if(o*=.5,s<=o)return;const u=o/s;let h=0,p=-(i=s/Math.max(Math.round(s/i),1))/2;const x=e.length-1;for(let I=0;I<x;I++){const f=e[I],v=e[I+1],A=v.x-f.x,N=v.y-f.y,M=Math.sqrt(A*A+N*N);let R;for(;p+i<h+M;){p+=i;const P=(p-h)/M,S=(0,G.GW)(f.x,v.x,P),W=(0,G.GW)(f.y,v.y,P);void 0===R&&(R=Math.atan2(N,A)),n.push(new ft(S,W,R,I,u))}h+=M}}static _pushCenterAnchor(n,e){let i=0;const t=e.length-1;for(let u=0;u<t;u++)i+=z.bR.distance(e[u],e[u+1]);const s=i/2;let a=0;const o=e.length-1;for(let u=0;u<o;u++){const h=e[u],p=e[u+1],x=p.x-h.x,I=p.y-h.y,f=Math.sqrt(x*x+I*I);if(s<a+f){const v=(s-a)/f,A=(0,G.GW)(h.x,p.x,v),N=(0,G.GW)(h.y,p.y,v),M=Math.atan2(I,x);return void n.push(new ft(A,N,M,u,0))}a+=f}}static _deviation(n,e,i){return Math.atan2((e.x-n.x)*(i.y-e.y)-(e.y-n.y)*(i.x-e.x),(e.x-n.x)*(i.x-e.x)+(e.y-n.y)*(i.y-e.y))}static _honorsTextMaxAngle(n,e,i,t,s){let a=0;const o=i/2;let u=new z.bR(e.x,e.y),h=e.segment+1;for(;a>-o;){if(--h,h<0)return!1;a-=z.bR.distance(n[h],u),u=n[h]}a+=z.bR.distance(n[h],n[h+1]);const p=[];let x=0;const I=n.length;for(;a<o;){const f=n[h];let v,A=h;do{if(++A,A===I)return!1;v=n[A]}while(v.isEqual(f));let N,M=A;do{if(++M,M===I)return!1;N=n[M]}while(N.isEqual(v));const R=this._deviation(f,v,N);for(p.push({deviation:R,distToAnchor:a}),x+=R;a-p[0].distToAnchor>s;)x-=p.shift().deviation;if(Math.abs(x)>t)return!1;a+=z.bR.distance(v,N),h=A}return!0}static _smoothVertices(n,e){if(e<=0)return n;let i=n.length;if(i<3)return n;const t=[];let s=0,a=0;t.push(0);for(let A=1;A<i;A++){const N=z.bR.distance(n[A],n[A-1]);N>0&&(s+=N,t.push(s),a++,a!==A&&(n[a]=n[A]))}if(i=a+1,i<3)return n;e=Math.min(e,.2*s);const o=n[0].x,u=n[0].y,h=n[i-1].x,p=n[i-1].y,x=z.bR.sub(n[0],n[1]);x.normalize(),n[0].x+=e*x.x,n[0].y+=e*x.y,x.assignSub(n[i-1],n[i-2]),x.normalize(),n[i-1].x+=e*x.x,n[i-1].y+=e*x.y,t[0]-=e,t[i-1]+=e;const I=[];I.push(new z.bR(o,u));const f=1e-6,v=.5*e;for(let A=1;A<i-1;A++){let N=0,M=0,R=0;for(let P=A-1;P>=0;P--){const S=v+t[P+1]-t[A];if(S<0)break;const W=t[P+1]-t[P],C=t[A]-t[P]<v?1:S/W;if(C<f)break;const U=C*C,Y=C*S-.5*U*W,j=C*W/e,et=n[P+1],ct=n[P].x-et.x,Z=n[P].y-et.y;N+=j/Y*(et.x*C*S+.5*U*(S*ct-W*et.x)-U*C*W*ct/3),M+=j/Y*(et.y*C*S+.5*U*(S*Z-W*et.y)-U*C*W*Z/3),R+=j}for(let P=A+1;P<i;P++){const S=v-t[P-1]+t[A];if(S<0)break;const W=t[P]-t[P-1],C=t[P]-t[A]<v?1:S/W;if(C<f)break;const U=C*C,Y=C*S-.5*U*W,j=C*W/e,et=n[P-1],ct=n[P].x-et.x,Z=n[P].y-et.y;N+=j/Y*(et.x*C*S+.5*U*(S*ct-W*et.x)-U*C*W*ct/3),M+=j/Y*(et.y*C*S+.5*U*(S*Z-W*et.y)-U*C*W*Z/3),R+=j}I.push(new z.bR(N/R,M/R))}return I.push(new z.bR(h,p)),n[0].x=o,n[0].y=u,n[i-1].x=h,n[i-1].y=p,I}static _pushCentroid(n,e){const o=e.length-1;let u=0,h=0,p=0,x=e[0].x,I=e[0].y;x>4096&&(x=4096),x<0&&(x=0),I>4096&&(I=4096),I<0&&(I=0);for(let f=1;f<o;f++){let v=e[f].x,A=e[f].y,N=e[f+1].x,M=e[f+1].y;v>4096&&(v=4096),v<0&&(v=0),A>4096&&(A=4096),A<0&&(A=0),N>4096&&(N=4096),N<0&&(N=0),M>4096&&(M=4096),M<0&&(M=0);const R=(v-x)*(M-I)-(N-x)*(A-I);u+=R*(x+v+N),h+=R*(I+A+M),p+=R}u/=3*p,h/=3*p,isNaN(u)||isNaN(h)||n.push(new ft(u,h))}}pt._bidiEngine=new tt.A,(y=At||(At={}))[y.INITIALIZED=0]="INITIALIZED",y[y.NO_DATA=1]="NO_DATA",y[y.READY=2]="READY",y[y.MODIFIED=3]="MODIFIED",y[y.INVALID=4]="INVALID";class Wt{constructor(n,e,i,t,s,a){if(this._pbfTiles={},this._tileClippers={},this._client=i,this._tile=e,this._sourceDataMaxLOD=t,a){this._styleLayerUIDs=new Set;for(const x of a)this._styleLayerUIDs.add(x)}this._styleRepository=s,this._layers=this._styleRepository?.layers??[];const[o,u,h]=e.tileKey.split("/").map(parseFloat);this._level=o;const p=(0,G.IU)(this._level);for(const x of Object.keys(n)){const I=n[x];if(this._pbfTiles[x]=new Ct.A(new Uint8Array(I.protobuff),new DataView(I.protobuff)),I.refKey){const[f]=I.refKey.split("/").map(parseFloat),v=o-f;if(v>0){const A=(1<<v)-1;this._tileClippers[x]=new z.O3(v,u&A,h&A,8,p)}}this._tileClippers[x]||(this._tileClippers[x]=new z.Ox)}}_canParseStyleLayer(n){return!this._styleLayerUIDs||this._styleLayerUIDs.has(n)}parse(n){var e=this;return(0,X.A)(function*(){const i=(0,Pt.F)(),t=e._initialize(n),{returnedBuckets:s}=t;e._processLayers(t),e._linkReferences(t),e._filterFeatures(t);const a=[],o=new Set,u=(x,I)=>{o.has(x)||(a.push({name:x,repeat:I}),o.add(x))},h={};for(const x of s)x.getResources(x.tileClipper,u,h);if(e._tile.status===At.INVALID)return[];const p=e._fetchResources(a,h,n);return Promise.all([...p,i]).then(()=>e._processFeatures(t.returnedBuckets))})()}_initialize(n){return{signal:n?.signal,sourceNameToTileData:this._parseTileData(this._pbfTiles),layers:this._layers,zoom:this._level,sourceNameToTileClipper:this._tileClippers,sourceNameToUniqueSourceLayerBuckets:{},sourceNameToUniqueSourceLayers:{},returnedBuckets:[],layerIdToBucket:{},referencerUIDToReferencedId:new Map}}_processLayers(n){const{sourceNameToTileData:e,zoom:i,layers:t,sourceNameToTileClipper:s,sourceNameToUniqueSourceLayerBuckets:a,sourceNameToUniqueSourceLayers:o,returnedBuckets:u,layerIdToBucket:h,referencerUIDToReferencedId:p}=n,x=this._sourceDataMaxLOD;for(let I=t.length-1;I>=0;I--){const f=t[I];if(i<x){if(f.minzoom&&i<Math.floor(f.minzoom)||f.maxzoom&&i>=f.maxzoom)continue}else if(f.maxzoom&&i>=f.maxzoom)continue;if(f.type===w.Dc.BACKGROUND||!this._canParseStyleLayer(f.uid)||!e[f.source]||!s[f.source])continue;const A=s[f.source],N=f.sourceLayer,M=e[f.source][N];if(M){let R=o[f.source];if(R||(R=o[f.source]=new Set),R.add(f.sourceLayer),f.refLayerId)p.set(f.uid,f.refLayerId);else{const P=this._createBucket(f);if(P){P.layerUIDs=[f.uid],P.layerExtent=M.extent,P.tileClipper=A;let S=a[f.source];S||(S=a[f.source]={});let W=S[N];W||(W=S[N]=[]),W.push(P),u.push(P),h[f.id]=P}}}}}_linkReferences(n){const{layerIdToBucket:e,referencerUIDToReferencedId:i}=n;i.forEach((t,s)=>{e[t]&&e[t].layerUIDs.push(s)})}_filterFeatures(n){const{signal:e,sourceNameToTileData:i,sourceNameToUniqueSourceLayerBuckets:t,sourceNameToUniqueSourceLayers:s}=n,a=10*this._level,o=10*(this._level+1),u=[],h=[];for(const p of Object.keys(s))s[p].forEach(x=>{u.push(x),h.push(p)});for(let p=0;p<u.length;p++){const x=h[p],I=u[p];if(!i[x]||!t[x])continue;const f=i[x][I],v=t[x][I];if(!v||0===v.length)continue;if((0,gt.G4)(e))return;let A=0;const N=f.getData();for(;N.nextTag(2);){const M=N.getMessage(),R=new _t.A(M,f,A++);M.release();const P=R.values;if(P){const S=P._minzoom;if(S&&S>=o)continue;const W=P._maxzoom;if(W&&W<=a)continue}for(const S of v)S.pushFeature(R)}}}_fetchResources(n,e,i){const t=[],s=this._tile.getWorkerTileHandler();let a,o;n.length>0&&(a=s.fetchSprites(n,this._client,i),t.push(a));for(const u in e){const h=e[u];h.size>0&&(o=s.fetchGlyphs(this._tile.tileKey,u,h,this._client,i),t.push(o))}return t}_processFeatures(n){const e=n.filter(i=>i.hasFeatures()||this._canParseStyleLayer(i.layer.uid));for(const i of e)i.processFeatures(i.tileClipper);return e}_parseTileData(n){const e={};for(const i of Object.keys(n)){const t=n[i],s={};for(;t.next();)switch(t.tag()){case 3:{const a=t.getMessage(),o=new Ot.A(a);a.release(),s[o.name]=o;break}default:t.skip()}e[i]=s}return e}_createBucket(n){switch(n.type){case w.Dc.BACKGROUND:return null;case w.Dc.FILL:return this._createFillBucket(n);case w.Dc.LINE:return this._createLineBucket(n);case w.Dc.CIRCLE:return this._createCircleBucket(n);case w.Dc.SYMBOL:return this._createSymbolBucket(n)}}_createFillBucket(n){return new m(n,this._level,this._tile.getWorkerTileHandler().getSpriteItems(),new B(n.fillMaterial.getStride()),new ut,new c(n.outlineMaterial.getStride()),new ut)}_createLineBucket(n){return new nt(n,this._level,this._tile.getWorkerTileHandler().getSpriteItems(),new k(n.lineMaterial.getStride()),new ut)}_createCircleBucket(n){return new T(n,this._level,this._tile.getWorkerTileHandler().getSpriteItems(),new d(n.circleMaterial.getStride()),new ut)}_createSymbolBucket(n){const e=this._tile;return new pt(e.tileKey,n,this._level,new _(n.iconMaterial.getStride()),new ut,new _(n.textMaterial.getStride()),new ut,e.placementEngine,e.getWorkerTileHandler())}}class Ut{constructor(n,e,i,t){this.status=At.INITIALIZED,this.placementEngine=new Rt,this.tileKey=n,this.refKeys=e,this._workerTileHandler=i,this._styleRepository=t}release(){this.tileKey="",this.refKeys=null,this.status=At.INITIALIZED,this._workerTileHandler=null}parse(n,e){var i=this;return(0,X.A)(function*(){const t=e?.signal;if(null!=t){const x=()=>{t.removeEventListener("abort",x),i.status=At.INVALID};t.addEventListener("abort",x)}let s;const a={bucketsWithData:[],emptyBuckets:null};try{s=yield i._parse(n,e)}catch(x){if((0,gt.zf)(x))throw x;return{result:a,transferList:[]}}i.status=At.READY;const o=a.bucketsWithData,u=[];for(const x of s)if(x.hasFeatures()){const I=x.serialize();o.push(I)}else u.push(x.layer.uid);const h=[...o];let p=null;return u.length>0&&(p=Uint32Array.from(u),h.push(p.buffer)),a.emptyBuckets=p,{result:a,transferList:h}})()}setObsolete(){this.status=At.INVALID}getLayers(){return this._workerTileHandler.getLayers()}getWorkerTileHandler(){return this._workerTileHandler}_parse(n,e){var i=this;return(0,X.A)(function*(){const t=n.sourceName2DataAndRefKey;return 0===Object.keys(t).length?[]:(i.status=At.MODIFIED,new Wt(t,i,e.client,n.sourceDataMaxLOD,i._styleRepository,n.styleLayerUIDs).parse(e))})()}}var xt=J(6517);class Dt{constructor(){this._spriteInfo={},this._glyphInfo={},this._sourceDataMaxLOD=25}reset(){return this._spriteInfo={},this._glyphInfo={},Promise.resolve()}getLayers(){return this._styleRepository?.layers??[]}createTileAndParse(n,e){var i=this;return(0,X.A)(function*(){const{key:t}=n,s={};for(const o of Object.keys(n.sourceName2DataAndRefKey))s[o]=n.sourceName2DataAndRefKey[o].refKey;const a=new Ut(t,s,i,i._styleRepository);try{return yield a.parse({...n,sourceDataMaxLOD:i._sourceDataMaxLOD},e)}catch(o){if(a.setObsolete(),a.release(),!(0,gt.zf)(o))throw o;return null}})()}updateStyle(n){if(!n||0===n.length||!this._styleRepository)return;const e=this._styleRepository;for(const i of n){const s=i.data;switch(i.type){case Q.$q.PAINTER_CHANGED:e.setPaintProperties(s.layer,s.paint);break;case Q.$q.LAYOUT_CHANGED:e.setLayoutProperties(s.layer,s.layout);break;case Q.$q.LAYER_REMOVED:e.deleteStyleLayer(s.layer);break;case Q.$q.LAYER_CHANGED:e.setStyleLayer(s.layer,s.index);break;case Q.$q.SPRITES_CHANGED:this._spriteInfo={}}}}setStyle(n){const{style:e,sourceDataMaxLOD:i}=n;this._styleRepository=new xt.A(e),this._sourceDataMaxLOD=i,this._spriteInfo={},this._glyphInfo={}}fetchSprites(n,e,i){const t=[],s=this._spriteInfo;for(const a of n)void 0===s[a.name]&&t.push(a);return 0===t.length?Promise.resolve():e.invoke("getSprites",t,{signal:i?.signal}).then(a=>{for(const o in a)s[o]=a[o]})}getSpriteItems(){return this._spriteInfo}fetchGlyphs(n,e,i,t,s){const a=[];let o=this._glyphInfo[e];return o?i.forEach(u=>{o[u]||a.push(u)}):(o=this._glyphInfo[e]=[],i.forEach(u=>a.push(u))),0===a.length?Promise.resolve():t.invoke("getGlyphs",{tileID:n,font:e,codePoints:a},s).then(u=>{for(let h=0;h<u.length;h++)u[h]&&(o[h]=u[h])})}getGlyphItems(n){return this._glyphInfo[n]}}},24505:(Gt,wt,J)=>{J.d(wt,{IT:()=>X,av:()=>Q,o2:()=>gt,zk:()=>z});const X=!0,gt=32,Q=1.5,z=200},54e3:(Gt,wt,J)=>{J.d(wt,{$u:()=>D,Cq:()=>it,Dc:()=>gt,I5:()=>G,KI:()=>yt,Ms:()=>ot,O6:()=>at,bv:()=>Q,kt:()=>z,v9:()=>E});var gt,Q,z,G,at,yt,ot,it,E,b,X=J(65374);(b=gt||(gt={}))[b.BACKGROUND=0]="BACKGROUND",b[b.FILL=1]="FILL",b[b.LINE=2]="LINE",b[b.SYMBOL=3]="SYMBOL",b[b.CIRCLE=4]="CIRCLE",function(b){b[b.VISIBLE=0]="VISIBLE",b[b.NONE=1]="NONE"}(Q||(Q={})),function(b){b[b.POINT=0]="POINT",b[b.LINE=1]="LINE",b[b.LINE_CENTER=2]="LINE_CENTER"}(z||(z={})),function(b){b[b.MAP=0]="MAP",b[b.VIEWPORT=1]="VIEWPORT",b[b.AUTO=2]="AUTO"}(G||(G={})),function(b){b[b.AUTO=0]="AUTO",b[b.LEFT=1]="LEFT",b[b.CENTER=2]="CENTER",b[b.RIGHT=3]="RIGHT"}(at||(at={})),function(b){b[b.CENTER=0]="CENTER",b[b.LEFT=1]="LEFT",b[b.RIGHT=2]="RIGHT",b[b.TOP=3]="TOP",b[b.BOTTOM=4]="BOTTOM",b[b.TOP_LEFT=5]="TOP_LEFT",b[b.TOP_RIGHT=6]="TOP_RIGHT",b[b.BOTTOM_LEFT=7]="BOTTOM_LEFT",b[b.BOTTOM_RIGHT=8]="BOTTOM_RIGHT"}(yt||(yt={})),function(b){b[b.NONE=0]="NONE",b[b.UPPERCASE=1]="UPPERCASE",b[b.LOWERCASE=2]="LOWERCASE"}(ot||(ot={})),function(b){b[b.MAP=0]="MAP",b[b.VIEWPORT=1]="VIEWPORT"}(it||(it={})),function(b){b[b.HORIZONTAL=0]="HORIZONTAL",b[b.VERTICAL=1]="VERTICAL"}(E||(E={}));class D{}D.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:Q.VISIBLE}},D.fillLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:Q.VISIBLE}},D.lineLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:Q.VISIBLE},"line-cap":{type:"enum",values:["butt","round","square"],default:X.xR.BUTT},"line-join":{type:"enum",values:["bevel","round","miter"],default:X.JO.MITER},"line-miter-limit":{type:"number",default:2},"line-round-limit":{type:"number",default:1.05}},D.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:Q.VISIBLE},"symbol-avoid-edges":{type:"boolean",default:!1},"symbol-placement":{type:"enum",values:["point","line","line-center"],default:z.POINT},"symbol-sort-key":{type:"number",default:-1},"symbol-spacing":{type:"number",minimum:1,default:250},"icon-allow-overlap":{type:"boolean",default:!1},"icon-anchor":{type:"enum",values:["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"],default:yt.CENTER},"icon-ignore-placement":{type:"boolean",default:!1},"icon-image":{type:"string"},"icon-keep-upright":{type:"boolean",default:!1},"icon-offset":{type:"array",value:"number",length:2,default:[0,0]},"icon-optional":{type:"boolean",default:!1},"icon-padding":{type:"number",minimum:0,default:2},"icon-rotate":{type:"number",default:0},"icon-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:G.AUTO},"icon-size":{type:"number",minimum:0,default:1},"text-allow-overlap":{type:"boolean",default:!1},"text-anchor":{type:"enum",values:["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"],default:yt.CENTER},"text-field":{type:"string"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"]},"text-ignore-placement":{type:"boolean",default:!1},"text-justify":{type:"enum",values:["auto","left","center","right"],default:at.CENTER},"text-keep-upright":{type:"boolean",default:!0},"text-letter-spacing":{type:"number",default:0},"text-line-height":{type:"number",default:1.2},"text-max-angle":{type:"number",minimum:0,default:45},"text-max-width":{type:"number",minimum:0,default:10},"text-offset":{type:"array",value:"number",length:2,default:[0,0]},"text-optional":{type:"boolean",default:!1},"text-padding":{type:"number",minimum:0,default:2},"text-rotate":{type:"number",default:0},"text-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:G.AUTO},"text-size":{type:"number",minimum:0,default:16},"text-transform":{type:"enum",values:["none","uppercase","lowercase"],default:ot.NONE},"text-writing-mode":{type:"array",value:"enum",values:["horizontal","vertical"],default:[E.HORIZONTAL]}},D.circleLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:Q.VISIBLE}},D.backgroundPaintDefinition={"background-color":{type:"color",default:[0,0,0,1]},"background-opacity":{type:"number",minimum:0,maximum:1,default:1},"background-pattern":{type:"string"}},D.fillPaintDefinition={"fill-antialias":{type:"boolean",default:!0},"fill-color":{type:"color",default:[0,0,0,1]},"fill-opacity":{type:"number",minimum:0,maximum:1,default:1},"fill-outline-color":{type:"color",default:[0,0,0,0]},"fill-pattern":{type:"string"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],default:it.MAP}},D.linePaintDefinition={"line-blur":{type:"number",minimum:0,default:0},"line-color":{type:"color",default:[0,0,0,1]},"line-dasharray":{type:"array",value:"number",default:[]},"line-gap-width":{type:"number",minimum:0,default:0},"line-offset":{type:"number",default:0},"line-opacity":{type:"number",minimum:0,maximum:1,default:1},"line-pattern":{type:"string"},"line-translate":{type:"array",value:"number",length:2,default:[0,0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],default:it.MAP},"line-width":{type:"number",minimum:0,default:1}},D.symbolPaintDefinition={"icon-color":{type:"color",default:[0,0,0,1]},"icon-halo-blur":{type:"number",minimum:0,default:0},"icon-halo-color":{type:"color",default:[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,default:0},"icon-opacity":{type:"number",minimum:0,maximum:1,default:1},"icon-translate":{type:"array",value:"number",length:2,default:[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],default:it.MAP},"text-color":{type:"color",default:[0,0,0,1]},"text-halo-blur":{type:"number",minimum:0,default:0},"text-halo-color":{type:"color",default:[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,default:0},"text-opacity":{type:"number",minimum:0,maximum:1,default:1},"text-translate":{type:"array",value:"number",length:2,default:[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],default:it.MAP}},D.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,default:1},"raster-hue-rotate":{type:"number",default:0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,default:0},"raster-brightness-max":{type:"number",minimum:0,maximum:1,default:1},"raster-saturation":{type:"number",minimum:-1,maximum:1,default:0},"raster-contrast":{type:"number",minimum:-1,maximum:1,default:0},"raster-fade-duration":{type:"number",minimum:0,default:300}},D.circlePaintDefinition={"circle-blur":{type:"number",minimum:0,default:0},"circle-color":{type:"color",default:[0,0,0,1]},"circle-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-radius":{type:"number",minimum:0,default:5},"circle-stroke-color":{type:"color",default:[0,0,0,1]},"circle-stroke-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-stroke-width":{type:"number",minimum:0,default:0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],default:it.MAP}}},7933:(Gt,wt,J)=>{J.d(wt,{i:()=>L});var X=J(65374),gt=J(47669);function Q(V,w){return V.x===w.x&&V.y===w.y}function G(V,w){return V.x=w.y,V.y=-w.x,V}function at(V,w){return V.x=-w.y,V.y=w.x,V}function yt(V,w){return V.x=w.x,V.y=w.y,V}function ot(V,w){return V.x=-w.x,V.y=-w.y,V}function it(V){return Math.sqrt(V.x*V.x+V.y*V.y)}function E(V,w){return V.x*w.y-V.y*w.x}function D(V,w){return V.x*w.x+V.y*w.y}function b(V,w,q,lt){return V.x=w.x*q+w.y*lt,V.y=w.x*lt-w.y*q,V}class L{constructor(w,q,lt){this._writeVertex=w,this._writeTriangle=q,this._canUseThinTessellation=lt,this._prevNormal={x:void 0,y:void 0},this._nextNormal={x:void 0,y:void 0},this._textureNormalLeft={x:0,y:1},this._textureNormalRight={x:0,y:-1},this._textureNormal={x:void 0,y:void 0},this._joinNormal={x:void 0,y:void 0},this._inner={x:void 0,y:void 0},this._outer={x:void 0,y:void 0},this._roundStart={x:void 0,y:void 0},this._roundEnd={x:void 0,y:void 0},this._startBreak={x:void 0,y:void 0},this._endBreak={x:void 0,y:void 0},this._innerPrev={x:void 0,y:void 0},this._innerNext={x:void 0,y:void 0},this._bevelStart={x:void 0,y:void 0},this._bevelEnd={x:void 0,y:void 0},this._bevelMiddle={x:void 0,y:void 0}}tessellate(w,q,lt=this._canUseThinTessellation){(function z(V){if(!V)return;const w=V.length;if(w<=1)return;let q=0;for(let lt=1;lt<w;lt++)Q(V[lt],V[q])||++q===lt||(V[q]=V[lt]);V.length=q+1})(w),lt&&q.halfWidth<gt.Gh&&!q.offset?this._tessellateThin(w,q):this._tessellate(w,q)}_tessellateThin(w,q){if(w.length<2)return;const lt=q.wrapDistance||65535;let ht=q.initialDistance||0,bt=!1,ft=w[0].x,$=w[0].y;const mt=w.length;for(let It=1;It<mt;++It){bt&&(bt=!1,ht=0);let Rt=w[It].x,Ct=w[It].y,Pt=Rt-ft,_t=Ct-$,rt=Math.sqrt(Pt*Pt+_t*_t);if(Pt/=rt,_t/=rt,ht+rt>lt){bt=!0;const B=(lt-ht)/rt;rt=lt-ht,Rt=(1-B)*ft+B*Rt,Ct=(1-B)*$+B*Ct,--It}const ut=this._writeVertex(ft,$,0,0,Pt,_t,_t,-Pt,0,-1,ht),dt=this._writeVertex(ft,$,0,0,Pt,_t,-_t,Pt,0,1,ht);ht+=rt;const Ot=this._writeVertex(Rt,Ct,0,0,Pt,_t,_t,-Pt,0,-1,ht),k=this._writeVertex(Rt,Ct,0,0,Pt,_t,-_t,Pt,0,1,ht);this._writeTriangle(ut,dt,Ot),this._writeTriangle(dt,Ot,k),ft=Rt,$=Ct}}_tessellate(w,q){const ht=w[w.length-1],bt=Q(w[0],ht);if(w.length<(bt?3:2))return;const $=q.pixelCoordRatio,mt=null!=q.capType?q.capType:X.xR.BUTT,It=null!=q.joinType?q.joinType:X.JO.MITER,Rt=null!=q.miterLimit?Math.min(q.miterLimit,4):2,Ct=null!=q.roundLimit?Math.min(q.roundLimit,1.05):1.05,Pt=null!=q.halfWidth?q.halfWidth:2,_t=!!q.textured;let rt,ut,dt,Ot=null;const k=this._prevNormal,B=this._nextNormal;let c=-1,_=-1;const d=this._joinNormal;let g,T;const r=this._textureNormalLeft,l=this._textureNormalRight,m=this._textureNormal;let O=-1,F=-1;const nt=q.wrapDistance||65535;let K=q.initialDistance||0;const st=this._writeVertex,tt=this._writeTriangle,H=(Bt,zt,kt,pt,At,Wt)=>{const Ut=st(ut,dt,g,T,kt,pt,Bt,zt,At,Wt,K);return O>=0&&F>=0&&Ut>=0&&tt(O,F,Ut),O=F,F=Ut,Ut};bt&&(rt=w[w.length-2],B.x=ht.x-rt.x,B.y=ht.y-rt.y,_=it(B),B.x/=_,B.y/=_);let Et=!1;for(let Bt=0;Bt<w.length;++Bt){if(Et&&(Et=!1,K=0),rt&&(k.x=-B.x,k.y=-B.y,c=_,K+c>nt&&(Et=!0)),Et){const xt=(nt-K)/c;c=nt-K,rt={x:(1-xt)*rt.x+xt*w[Bt].x,y:(1-xt)*rt.y+xt*w[Bt].y},--Bt}else rt=w[Bt];ut=rt.x,dt=rt.y;const zt=Bt<=0&&!Et,kt=Bt===w.length-1;if(zt||(K+=c),Ot=kt?bt?w[1]:null:w[Bt+1],Ot?(B.x=Ot.x-ut,B.y=Ot.y-dt,_=it(B),B.x/=_,B.y/=_):(B.x=void 0,B.y=void 0),!bt){if(zt){at(d,B),g=d.x,T=d.y,mt===X.xR.SQUARE&&(H(-B.y-B.x,B.x-B.y,B.x,B.y,0,-1),H(B.y-B.x,-B.x-B.y,B.x,B.y,0,1)),mt===X.xR.ROUND&&(H(-B.y-B.x,B.x-B.y,B.x,B.y,-1,-1),H(B.y-B.x,-B.x-B.y,B.x,B.y,-1,1)),mt!==X.xR.ROUND&&mt!==X.xR.BUTT||(H(-B.y,B.x,B.x,B.y,0,-1),H(B.y,-B.x,B.x,B.y,0,1));continue}if(kt){G(d,k),g=d.x,T=d.y,mt!==X.xR.ROUND&&mt!==X.xR.BUTT||(H(k.y,-k.x,-k.x,-k.y,0,-1),H(-k.y,k.x,-k.x,-k.y,0,1)),mt===X.xR.SQUARE&&(H(k.y-k.x,-k.x-k.y,-k.x,-k.y,0,-1),H(-k.y-k.x,k.x-k.y,-k.x,-k.y,0,1)),mt===X.xR.ROUND&&(H(k.y-k.x,-k.x-k.y,-k.x,-k.y,1,-1),H(-k.y-k.x,k.x-k.y,-k.x,-k.y,1,1));continue}}let pt,At,Wt=-E(k,B);if(Math.abs(Wt)<.01)D(k,B)>0?(d.x=k.x,d.y=k.y,Wt=1,pt=Number.MAX_VALUE,At=!0):(at(d,B),Wt=1,pt=1,At=!1);else{d.x=(k.x+B.x)/Wt,d.y=(k.y+B.y)/Wt,pt=it(d);const xt=(pt-1)*Pt*$;At=pt>4||xt>c&&xt>_}g=d.x,T=d.y;let Ut=It;switch(It){case X.JO.BEVEL:pt<1.05&&(Ut=X.JO.MITER);break;case X.JO.ROUND:pt<Ct&&(Ut=X.JO.MITER);break;case X.JO.MITER:pt>Rt&&(Ut=X.JO.BEVEL)}switch(Ut){case X.JO.MITER:if(H(d.x,d.y,-k.x,-k.y,0,-1),H(-d.x,-d.y,-k.x,-k.y,0,1),kt)break;if(_t){const xt=Et?0:K;O=this._writeVertex(ut,dt,g,T,B.x,B.y,d.x,d.y,0,-1,xt),F=this._writeVertex(ut,dt,g,T,B.x,B.y,-d.x,-d.y,0,1,xt)}break;case X.JO.BEVEL:{const xt=Wt<0;let Lt,Dt,y,n;if(xt){const s=O;O=F,F=s,Lt=r,Dt=l}else Lt=l,Dt=r;if(At)y=xt?at(this._innerPrev,k):G(this._innerPrev,k),n=xt?G(this._innerNext,B):at(this._innerNext,B);else{const s=xt?ot(this._inner,d):yt(this._inner,d);y=s,n=s}const e=xt?G(this._bevelStart,k):at(this._bevelStart,k);H(y.x,y.y,-k.x,-k.y,Lt.x,Lt.y);const i=H(e.x,e.y,-k.x,-k.y,Dt.x,Dt.y);if(kt)break;const t=xt?at(this._bevelEnd,B):G(this._bevelEnd,B);if(At){const s=this._writeVertex(ut,dt,g,T,-k.x,-k.y,0,0,0,0,K);O=this._writeVertex(ut,dt,g,T,B.x,B.y,n.x,n.y,Lt.x,Lt.y,K),F=this._writeVertex(ut,dt,g,T,B.x,B.y,t.x,t.y,Dt.x,Dt.y,K),this._writeTriangle(i,s,F)}else{if(_t){const s=this._bevelMiddle;s.x=(e.x+t.x)/2,s.y=(e.y+t.y)/2,b(m,s,-k.x,-k.y),H(s.x,s.y,-k.x,-k.y,m.x,m.y),b(m,s,B.x,B.y),O=this._writeVertex(ut,dt,g,T,B.x,B.y,s.x,s.y,m.x,m.y,K),F=this._writeVertex(ut,dt,g,T,B.x,B.y,n.x,n.y,Lt.x,Lt.y,K)}else{const s=O;O=F,F=s}H(t.x,t.y,B.x,B.y,Dt.x,Dt.y)}if(xt){const s=O;O=F,F=s}break}case X.JO.ROUND:{const xt=Wt<0;let Lt,Dt;if(xt){const P=O;O=F,F=P,Lt=r,Dt=l}else Lt=l,Dt=r;const y=xt?ot(this._inner,d):yt(this._inner,d);let n,e;At?(n=xt?at(this._innerPrev,k):G(this._innerPrev,k),e=xt?G(this._innerNext,B):at(this._innerNext,B)):(n=y,e=y);const i=xt?G(this._roundStart,k):at(this._roundStart,k),t=xt?at(this._roundEnd,B):G(this._roundEnd,B),s=H(n.x,n.y,-k.x,-k.y,Lt.x,Lt.y),a=H(i.x,i.y,-k.x,-k.y,Dt.x,Dt.y);if(kt)break;const o=this._writeVertex(ut,dt,g,T,-k.x,-k.y,0,0,0,0,K);At||this._writeTriangle(O,F,o);const u=ot(this._outer,y),h=this._writeVertex(ut,dt,g,T,B.x,B.y,t.x,t.y,Dt.x,Dt.y,K);let p,x;const I=pt>2;if(I){let P;pt!==Number.MAX_VALUE?(u.x/=pt,u.y/=pt,P=D(k,u),P=(pt*(P*P-1)+1)/P):P=-1,p=xt?G(this._startBreak,k):at(this._startBreak,k),p.x+=k.x*P,p.y+=k.y*P,x=xt?at(this._endBreak,B):G(this._endBreak,B),x.x+=B.x*P,x.y+=B.y*P}b(m,u,-k.x,-k.y);const f=this._writeVertex(ut,dt,g,T,-k.x,-k.y,u.x,u.y,m.x,m.y,K);b(m,u,B.x,B.y);const v=_t?this._writeVertex(ut,dt,g,T,B.x,B.y,u.x,u.y,m.x,m.y,K):f,A=o,N=_t?this._writeVertex(ut,dt,g,T,B.x,B.y,0,0,0,0,K):o;let M=-1,R=-1;if(I&&(b(m,p,-k.x,-k.y),M=this._writeVertex(ut,dt,g,T,-k.x,-k.y,p.x,p.y,m.x,m.y,K),b(m,x,B.x,B.y),R=this._writeVertex(ut,dt,g,T,B.x,B.y,x.x,x.y,m.x,m.y,K)),_t?I?(this._writeTriangle(A,a,M),this._writeTriangle(A,M,f),this._writeTriangle(N,v,R),this._writeTriangle(N,R,h)):(this._writeTriangle(A,a,f),this._writeTriangle(N,v,h)):I?(this._writeTriangle(o,a,M),this._writeTriangle(o,M,R),this._writeTriangle(o,R,h)):(this._writeTriangle(o,a,f),this._writeTriangle(o,v,h)),At?(O=this._writeVertex(ut,dt,g,T,B.x,B.y,e.x,e.y,Lt.x,Lt.y,K),F=h):(O=_t?this._writeVertex(ut,dt,g,T,B.x,B.y,e.x,e.y,Lt.x,Lt.y,K):s,this._writeTriangle(O,N,h),F=h),xt){const P=O;O=F,F=P}break}}}}}},30454:(Gt,wt,J)=>{J.d(wt,{_:()=>X});class X{constructor(Q,z,G,at,yt,ot=!1,it=0){this.name=Q,this.count=z,this.type=G,this.offset=at,this.stride=yt,this.normalized=ot,this.divisor=it}}}}]);