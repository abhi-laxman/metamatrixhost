"use strict";(self.webpackChunkAngularClient=self.webpackChunkAngularClient||[]).push([[2253,7522],{38582:(F,C,e)=>{e.d(C,{A:()=>O});var t=e(10467),u=e(8189),A=e(49976),f=e(71065),r=e(85211),v=(e(3248),e(35150),e(40707),e(76576)),_=e(71314);const h=new A.J({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let p=class extends f.A{constructor(T){super(T),this.authoringInfo=null,this.type=null}getRequiredFields(T){var j=this;return(0,t.A)(function*(){if(!j.collectRequiredFields)return[];const w=new Set;return yield j.collectRequiredFields(w,T),Array.from(w).sort()})()}getSymbol(T,j){}getSymbolAsync(T,j){return(0,t.A)(function*(){})()}get symbols(){return[]}get arcadeRequired(){return!1}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};(0,u._)([(0,r.MZ)({type:_.A,json:{write:!0}})],p.prototype,"authoringInfo",void 0),(0,u._)([(0,r.MZ)({type:h.apiValues,readOnly:!0,json:{type:h.jsonValues,read:!1,write:{writer:h.write,ignoreOrigin:!0,isRequired:!0}}})],p.prototype,"type",void 0),p=(0,u._)([(0,v.$)("esri.renderers.Renderer")],p);const O=p},18550:(F,C,e)=>{e.d(C,{h:()=>V});var t=e(10467),u=e(8189),A=e(85211),r=(e(3248),e(35150)),c=(e(40707),e(17221)),g=e(76576),v=e(50305),_=e(86300),h=e(59592),p=e(76725),O=e(91749),T=e(84495),j=e(35307),w=e(98877),L=e(49976),b=e(96996);const E={color:h.A,size:T.A,opacity:p.A,rotation:O.A},B=new L.J({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),K=/^\[([^\]]+)\]$/i;let N=class extends w.A{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(o){if(this._resetVariables(),o=o?.filter(D=>!!D),o?.length){for(const D of o)switch(D.type){case"color":this.colorVariables.push(D);break;case"opacity":this.opacityVariables.push(D);break;case"rotation":this.rotationVariables.push(D);break;case"size":this.sizeVariables.push(D)}this.sizeVariables.length&&this.sizeVariables.some(D=>!!D.target)&&o.sort((D,P)=>{let S=null;return S=D.target===P.target?0:D.target?1:-1,S});for(let D=0;D<o.length;D++)o[D].index=D;this._set("visualVariables",o)}else this._set("visualVariables",o)}readVariables(o,D,P){const{rotationExpression:S,rotationType:I}=D,l=S?.match(K),a=l?.[1];if(a&&(o||(o=[]),o.push({type:"rotationInfo",rotationType:I,field:a})),o)return o.map(n=>{const i=B.read(n.type),M=E[i];M||(r.A.getLogger(this).warn(`Unknown variable type: ${i}`),P?.messages&&P.messages.push(new b.A("visual-variable:unsupported",`visualVariable of type '${i}' is not supported`,{definition:n,context:P})));const m=new M;return m.read(n,P),m})}writeVariables(o,D){const P=[];for(const S of o){const I=S.toJSON(D);I&&P.push(I)}return P}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};(0,u._)([(0,A.MZ)()],N.prototype,"visualVariables",null),N=(0,u._)([(0,g.$)("esri.renderers.visualVariables.VisualVariableFactory")],N);const H=N;var Y=e(48573);const U={base:j.A,key:"type",typeMap:{opacity:p.A,color:h.A,rotation:O.A,size:T.A}},V=o=>{let D=class extends o{constructor(){super(...arguments),this._vvFactory=new H}set visualVariables(P){this._vvFactory.visualVariables=P,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(P,S,I){return this._vvFactory.readVariables(P,S,I)}writeVisualVariables(P,S,I,l){S[I]=this._vvFactory.writeVariables(P,l)}get arcadeRequiredForVisualVariables(){return this.visualVariables?.some(({arcadeRequired:P})=>P)??!1}hasVisualVariables(P,S){return P?this.getVisualVariablesForType(P,S).length>0:this.getVisualVariablesForType("size",S).length>0||this.getVisualVariablesForType("color",S).length>0||this.getVisualVariablesForType("opacity",S).length>0||this.getVisualVariablesForType("rotation",S).length>0}getVisualVariablesForType(P,S){return this.visualVariables?.filter(I=>I.type===P&&("string"==typeof S?I.target===S:!1!==S||!I.target))??[]}collectVVRequiredFields(P,S){var I=this;return(0,t.A)(function*(){let l=[];I.visualVariables&&(l=l.concat(I.visualVariables));for(const a of l)a&&(a.field&&(0,_.rq)(P,S,a.field),a.normalizationField&&(0,_.rq)(P,S,a.normalizationField),a.valueExpression&&(k(a.valueExpression,P,S)||(yield(0,_.Dx)(P,S,a.valueExpression))))})()}};return(0,u._)([(0,A.MZ)({types:[U],value:null,json:{write:!0}})],D.prototype,"visualVariables",null),(0,u._)([(0,c.w)("visualVariables",["visualVariables","rotationType","rotationExpression"])],D.prototype,"readVisualVariables",null),(0,u._)([(0,v.K)("visualVariables")],D.prototype,"writeVisualVariables",null),D=(0,u._)([(0,g.$)("esri.renderers.mixins.VisualVariablesMixin")],D),D};function k(o,D,P){const S=(0,Y.D)(o);return null!=S&&((0,_.rq)(D,P,S),!0)}},71314:(F,C,e)=>{e.d(C,{A:()=>R});var p,t=e(8189),u=e(49976),A=e(71065),f=e(77806),r=e(85211),y=e(55739),c=e(17221),g=e(76576);e(3248),e(35150),e(40707);let O=p=class extends A.A{constructor(s){super(s),this.minValue=0,this.maxValue=0}clone(){return new p({minValue:this.minValue,maxValue:this.maxValue})}};var T;(0,t._)([(0,r.MZ)({type:Number,json:{write:!0}})],O.prototype,"minValue",void 0),(0,t._)([(0,r.MZ)({type:Number,json:{write:!0}})],O.prototype,"maxValue",void 0),O=p=(0,t._)([(0,g.$)("esri.renderers.support.AuthoringInfoClassBreakInfo")],O);let j=T=class extends A.A{constructor(s){super(s),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=new Array}clone(){return new T({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:(0,f.o8)(this.classBreakInfos)})}};(0,t._)([(0,r.MZ)({type:String,json:{write:!0}})],j.prototype,"field",void 0),(0,t._)([(0,r.MZ)({type:String,json:{write:!0}})],j.prototype,"normalizationField",void 0),(0,t._)([(0,r.MZ)({type:String,json:{write:!0}})],j.prototype,"label",void 0),(0,t._)([(0,r.MZ)({type:[O],json:{write:!0}})],j.prototype,"classBreakInfos",void 0),j=T=(0,t._)([(0,g.$)("esri.renderers.support.AuthoringInfoFieldInfo")],j);var L,w=e(48669);let b=L=class extends A.A{constructor(s){super(s),this.label=null,this.size=null,this.value=null}clone(){return new L({label:this.label,value:this.value,size:this.size})}};(0,t._)([(0,r.MZ)({type:String,json:{write:!0}})],b.prototype,"label",void 0),(0,t._)([(0,r.MZ)({type:Number,json:{write:!0}})],b.prototype,"size",void 0),(0,t._)([(0,r.MZ)({type:Number,json:{write:!0}})],b.prototype,"value",void 0),b=L=(0,t._)([(0,g.$)("esri.renderers.support.AuthoringInfoSizeStop")],b);const E=b;var B;const K=new u.J({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),N=new u.J({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),H={key:s=>"number"==typeof s?"number":"string",typeMap:{number:Number,string:String},base:null},Y=["high-to-low","above-and-below","centered-on","extremes"],U=[...new Set(["high-to-low","above-and-below","centered-on","extremes","above","below","high-to-low","above-and-below","above","below","reference-size"])],V=["seconds","minutes","hours","days","months","years"];let o=B=class extends A.A{constructor(s){super(s),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(s){return"string"==typeof s||"number"==typeof s?s:null}get normalizationField(){return"reference-size"===this.theme?this._get("normalizationField"):null}set normalizationField(s){this._set("normalizationField",s)}get referenceSizeScale(){return"reference-size"===this.theme?this._get("referenceSizeScale"):null}set referenceSizeScale(s){this._set("referenceSizeScale",s)}get referenceSizeSymbolStyle(){return"reference-size"===this.theme?this._get("referenceSizeSymbolStyle"):null}set referenceSizeSymbolStyle(s){this._set("referenceSizeSymbolStyle",s)}castStartTime(s){return"string"==typeof s||"number"==typeof s?s:null}get sizeStops(){return"reference-size"===this.theme?this._get("sizeStops"):null}set sizeStops(s){this._set("sizeStops",s)}get style(){return"color"===this.type?this._get("style"):null}set style(s){this._set("style",s)}get theme(){return"color"===this.type||"size"===this.type?this._get("theme")||"high-to-low":null}set theme(s){this._set("theme",s)}clone(){return new B({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,normalizationField:this.normalizationField,referenceSizeScale:this.referenceSizeScale,referenceSizeSymbolStyle:this.referenceSizeSymbolStyle,sizeStops:(0,f.o8)(this.sizeStops),startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};(0,t._)([(0,r.MZ)({types:H,json:{write:!0}})],o.prototype,"endTime",void 0),(0,t._)([(0,w.w)("endTime")],o.prototype,"castEndTime",null),(0,t._)([(0,r.MZ)({type:String,json:{write:!0}})],o.prototype,"field",void 0),(0,t._)([(0,r.MZ)({type:Number,json:{write:!0}})],o.prototype,"maxSliderValue",void 0),(0,t._)([(0,r.MZ)({type:Number,json:{write:!0}})],o.prototype,"minSliderValue",void 0),(0,t._)([(0,r.MZ)({type:String,json:{origins:{"web-scene":{write:!1}},write:!0}})],o.prototype,"normalizationField",null),(0,t._)([(0,r.MZ)({type:Number,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],o.prototype,"referenceSizeScale",null),(0,t._)([(0,r.MZ)({type:["circle","diamond","hexagon-flat","hexagon-pointy","square"],value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],o.prototype,"referenceSizeSymbolStyle",null),(0,t._)([(0,r.MZ)({types:H,json:{write:!0}})],o.prototype,"startTime",void 0),(0,t._)([(0,w.w)("startTime")],o.prototype,"castStartTime",null),(0,t._)([(0,r.MZ)({type:[E],json:{origins:{"web-scene":{write:!1}},write:!0}})],o.prototype,"sizeStops",null),(0,t._)([(0,r.MZ)({type:K.apiValues,value:null,json:{type:K.jsonValues,read:K.read,write:K.write}})],o.prototype,"style",null),(0,t._)([(0,r.MZ)({type:U,value:null,json:{type:U,origins:{"web-scene":{type:Y,write:{writer:(s,z)=>{Y.includes(s)&&(z.theme=s)}}}},write:!0}})],o.prototype,"theme",null),(0,t._)([(0,r.MZ)({type:N.apiValues,json:{type:N.jsonValues,read:N.read,write:N.write}})],o.prototype,"type",void 0),(0,t._)([(0,r.MZ)({type:V,json:{type:V,write:!0}})],o.prototype,"units",void 0),o=B=(0,t._)([(0,g.$)("esri.renderers.support.AuthoringInfoVisualVariable")],o);const D=o;var S,P=e(54485);const I=new u.J({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),l=new u.J({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),a=new u.J({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),n=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers"];let d=S=class extends A.A{constructor(s){super(s),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const s=this._get("classificationMethod"),z=this.type;return z&&"relationship"!==z?"class-breaks-size"===z||"class-breaks-color"===z?s||"manual":null:s}set classificationMethod(s){this._set("classificationMethod",s)}readColorRamp(s){return s?(0,P.r)(s):void 0}get fields(){return this.type&&"predominance"!==this.type?null:this._get("fields")}set fields(s){this._set("fields",s)}get field1(){return this.type&&"relationship"!==this.type?null:this._get("field1")}set field1(s){this._set("field1",s)}get field2(){return this.type&&"relationship"!==this.type?null:this._get("field2")}set field2(s){this._set("field2",s)}get flowTheme(){return"flow"===this.type?this._get("flowTheme"):null}set flowTheme(s){this._set("flowTheme",s)}get focus(){return this.type&&"relationship"!==this.type?null:this._get("focus")}set focus(s){this._set("focus",s)}get numClasses(){return this.type&&"relationship"!==this.type?null:this._get("numClasses")}set numClasses(s){this._set("numClasses",s)}get statistics(){return"univariate-color-size"===this.type&&"above-and-below"===this.univariateTheme?this._get("statistics"):null}set statistics(s){this._set("statistics",s)}get standardDeviationInterval(){const s=this.type;return s&&"relationship"!==s&&"class-breaks-size"!==s&&"class-breaks-color"!==s||this.classificationMethod&&"standard-deviation"!==this.classificationMethod?null:this._get("standardDeviationInterval")}set standardDeviationInterval(s){this._set("standardDeviationInterval",s)}get type(){return this._get("type")}set type(s){let z=s;"classed-size"===s?z="class-breaks-size":"classed-color"===s&&(z="class-breaks-color"),this._set("type",z)}get univariateSymbolStyle(){return"univariate-color-size"===this.type&&"above-and-below"===this.univariateTheme?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(s){this._set("univariateSymbolStyle",s)}get univariateTheme(){return"univariate-color-size"===this.type?this._get("univariateTheme"):null}set univariateTheme(s){this._set("univariateTheme",s)}clone(){return new S({classificationMethod:this.classificationMethod,colorRamp:(0,f.o8)(this.colorRamp),fadeRatio:(0,f.o8)(this.fadeRatio),fields:this.fields?.slice(),field1:(0,f.o8)(this.field1),field2:(0,f.o8)(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(s=>s.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};(0,t._)([(0,r.MZ)({type:I.apiValues,value:null,json:{type:I.jsonValues,read:I.read,write:I.write,origins:{"web-document":{default:"manual",type:I.jsonValues,read:I.read,write:I.write}}}})],d.prototype,"classificationMethod",null),(0,t._)([(0,r.MZ)({types:P.g,json:{write:!0}})],d.prototype,"colorRamp",void 0),(0,t._)([(0,c.w)("colorRamp")],d.prototype,"readColorRamp",null),(0,t._)([(0,r.MZ)({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],d.prototype,"fadeRatio",void 0),(0,t._)([(0,r.MZ)({type:[String],value:null,json:{write:!0}})],d.prototype,"fields",null),(0,t._)([(0,r.MZ)({type:j,value:null,json:{write:!0}})],d.prototype,"field1",null),(0,t._)([(0,r.MZ)({type:j,value:null,json:{write:!0}})],d.prototype,"field2",null),(0,t._)([(0,r.MZ)({type:["flow-line","wave-front"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],d.prototype,"flowTheme",null),(0,t._)([(0,r.MZ)({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],d.prototype,"focus",null),(0,t._)([(0,r.MZ)({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],d.prototype,"isAutoGenerated",void 0),(0,t._)([(0,r.MZ)({type:Number,value:null,json:{type:y.jz,write:!0}})],d.prototype,"numClasses",null),(0,t._)([(0,r.MZ)({type:n,json:{type:n,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],d.prototype,"lengthUnit",void 0),(0,t._)([(0,r.MZ)({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],d.prototype,"maxSliderValue",void 0),(0,t._)([(0,r.MZ)({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],d.prototype,"minSliderValue",void 0),(0,t._)([(0,r.MZ)({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],d.prototype,"statistics",null),(0,t._)([(0,r.MZ)({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],d.prototype,"standardDeviationInterval",null),(0,t._)([(0,r.MZ)({type:l.apiValues,value:null,json:{type:l.jsonValues,read:l.read,write:l.write,origins:{"web-scene":{type:a.jsonValues,write:{writer:a.write,overridePolicy:s=>({enabled:"flow"!==s})}}}}})],d.prototype,"type",null),(0,t._)([(0,r.MZ)({type:[D],json:{write:!0}})],d.prototype,"visualVariables",void 0),(0,t._)([(0,r.MZ)({type:["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],d.prototype,"univariateSymbolStyle",null),(0,t._)([(0,r.MZ)({type:["high-to-low","above-and-below","above","below"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],d.prototype,"univariateTheme",null),d=S=(0,t._)([(0,g.$)("esri.renderers.support.AuthoringInfo")],d);const R=d},36345:(F,C,e)=>{e.d(C,{As:()=>v,Ug:()=>_,Wp:()=>g,z4:()=>c});var t=e(89221),u=e(71224),A=e(27093),f=e(84986),r=e(59787),y=e(94048);const c={types:y.xK,json:{write:{writer:r.M9},origins:{"web-scene":{types:y.On,write:{writer:r.M9},read:{reader:(0,u.C)({types:y.On})}}}}},g=(0,t.$N)({json:{origins:{"web-scene":{write:{isRequired:!0}}}}},c),v={types:{base:f.A,key:"type",typeMap:{"simple-fill":y.Es.typeMap["simple-fill"],"picture-fill":y.Es.typeMap["picture-fill"],"polygon-3d":y.Es.typeMap["polygon-3d"],cim:y.Es.typeMap.cim}},json:{write:{writer:r.M9},origins:{"web-scene":{type:A.A,write:{writer:r.M9}}}}},_={cast:h=>null==h||"string"==typeof h||"number"==typeof h?h:`${h}`,json:{type:String,write:{writer:(h,p)=>{p.value=h?.toString()}}}}},59592:(F,C,e)=>{e.d(C,{A:()=>h});var v,t=e(8189),u=e(85211),y=(e(3248),e(35150),e(40707),e(76576)),c=e(35307),g=e(5236);let _=v=class extends c.A{constructor(p){super(p),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(p){p&&Array.isArray(p)&&(p=p.filter(O=>!!O)).sort((O,T)=>O.value-T.value),this._set("stops",p)}clone(){return new v({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(p=>p.clone()),legendOptions:this.legendOptions?.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(p=>p.value||0)}};(0,t._)([(0,u.MZ)({readOnly:!0})],_.prototype,"cache",null),(0,t._)([(0,u.MZ)({type:["color"],json:{type:["colorInfo"]}})],_.prototype,"type",void 0),(0,t._)([(0,u.MZ)({type:String,json:{write:!0}})],_.prototype,"normalizationField",void 0),(0,t._)([(0,u.MZ)({type:[g.A],json:{write:!0}})],_.prototype,"stops",null),_=v=(0,t._)([(0,y.$)("esri.renderers.visualVariables.ColorVariable")],_);const h=_},76725:(F,C,e)=>{e.d(C,{A:()=>b});var O,t=e(8189),u=e(85211),y=(e(3248),e(35150),e(40707),e(76576)),c=e(35307),g=e(71065),v=e(55739),_=e(17221),h=e(50305),p=e(46873);let T=O=class extends g.A{constructor(E){super(E),this.label=null,this.opacity=null,this.value=null}readOpacity(E,B){return(0,p.D)(B.transparency)}writeOpacity(E,B,K){B[K]=(0,p.p)(E)}clone(){return new O({label:this.label,opacity:this.opacity,value:this.value})}};(0,t._)([(0,u.MZ)({type:String,json:{write:!0}})],T.prototype,"label",void 0),(0,t._)([(0,u.MZ)({type:Number,json:{type:v.jz,write:{target:"transparency",isRequired:!0}}})],T.prototype,"opacity",void 0),(0,t._)([(0,_.w)("opacity",["transparency"])],T.prototype,"readOpacity",null),(0,t._)([(0,h.K)("opacity")],T.prototype,"writeOpacity",null),(0,t._)([(0,u.MZ)({type:Number,json:{write:{isRequired:!0}}})],T.prototype,"value",void 0),T=O=(0,t._)([(0,y.$)("esri.renderers.visualVariables.support.OpacityStop")],T);const j=T;var w;let L=w=class extends c.A{constructor(E){super(E),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(E){E&&Array.isArray(E)&&(E=E.filter(B=>!!B)).sort((B,K)=>B.value-K.value),this._set("stops",E)}clone(){return new w({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(E=>E.clone()),legendOptions:this.legendOptions?.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(E=>E.value||0)}};(0,t._)([(0,u.MZ)({readOnly:!0})],L.prototype,"cache",null),(0,t._)([(0,u.MZ)({type:["opacity"],json:{type:["transparencyInfo"]}})],L.prototype,"type",void 0),(0,t._)([(0,u.MZ)({type:String,json:{write:!0}})],L.prototype,"normalizationField",void 0),(0,t._)([(0,u.MZ)({type:[j],json:{write:!0}})],L.prototype,"stops",null),L=w=(0,t._)([(0,y.$)("esri.renderers.visualVariables.OpacityVariable")],L);const b=L},91749:(F,C,e)=>{e.d(C,{A:()=>_});var g,t=e(8189),u=e(85211),y=(e(3248),e(35150),e(40707),e(76576)),c=e(35307);let v=g=class extends c.A{constructor(h){super(h),this.axis=null,this.type="rotation",this.rotationType="geographic"}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}clone(){return new g({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions?.clone()})}};(0,t._)([(0,u.MZ)({readOnly:!0})],v.prototype,"cache",null),(0,t._)([(0,u.MZ)({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],v.prototype,"axis",void 0),(0,t._)([(0,u.MZ)({type:["rotation"],json:{type:["rotationInfo"]}})],v.prototype,"type",void 0),(0,t._)([(0,u.MZ)({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],v.prototype,"rotationType",void 0),v=g=(0,t._)([(0,y.$)("esri.renderers.visualVariables.RotationVariable")],v);const _=v},84495:(F,C,e)=>{e.d(C,{A:()=>k});var t=e(8189),u=e(5922),A=e(49976),f=e(35150),r=e(85211),y=e(48669),c=e(17221),g=e(76576),v=e(50305),_=e(35307),h=e(67685),O=e(8042),w=(e(3248),e(40707),e(58742));let L=class extends w.A{constructor(){super(...arguments),this.customValues=null}};(0,t._)([(0,r.MZ)({type:[Number],json:{write:!0}})],L.prototype,"customValues",void 0),L=(0,t._)([(0,g.$)("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],L);const b=L;var K,E=e(64765),B=e(77522);const N=new A.J({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),H=new A.J({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers"});function Y(o){if(null!=o)return"string"==typeof o||"number"==typeof o?function p(o){return(0,h.cr)(o)}(o):"size"===o.type?(0,E.of)(o)?o:(delete(o={...o}).type,new V(o)):void 0}function U(o,D,P){if("object"!=typeof o)return o;const S=new V;return S.read(o,P),S}let V=K=class extends _.A{constructor(o){super(o),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:null!=this.valueExpression&&B.viewScaleRE.test(this.valueExpression)}}set index(o){(0,E.of)(this.maxSize)&&(this.maxSize.index=`visualVariables[${o}].maxSize`),(0,E.of)(this.minSize)&&(this.minSize.index=`visualVariables[${o}].minSize`),this._set("index",o)}get inputValueType(){return(0,E.eh)(this)}set maxDataValue(o){o&&this.stops&&(f.A.getLogger(this).warn("cannot set maxDataValue when stops is not null."),o=null),this._set("maxDataValue",o)}set maxSize(o){o&&this.stops&&(f.A.getLogger(this).warn("cannot set maxSize when stops is not null."),o=null),this._set("maxSize",o)}castMaxSize(o){return Y(o)}readMaxSize(o,D,P){return U(o,0,P)}set minDataValue(o){o&&this.stops&&(f.A.getLogger(this).warn("cannot set minDataValue when stops is not null."),o=null),this._set("minDataValue",o)}set minSize(o){o&&this.stops&&(f.A.getLogger(this).warn("cannot set minSize when stops is not null."),o=null),this._set("minSize",o)}castMinSize(o){return Y(o)}readMinSize(o,D,P){return U(o,0,P)}get arcadeRequired(){return!!this.valueExpression||null!=this.minSize&&"object"==typeof this.minSize&&this.minSize.arcadeRequired||null!=this.maxSize&&"object"==typeof this.maxSize&&this.maxSize.arcadeRequired}set stops(o){null==this.minDataValue&&null==this.maxDataValue&&null==this.minSize&&null==this.maxSize?o&&Array.isArray(o)&&(o=o.filter(D=>!!D)).sort((D,P)=>D.value-P.value):o&&(f.A.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),o=null),this._set("stops",o)}get transformationType(){return(0,E.KZ)(this,this.inputValueType)}readValueExpression(o,D){return o||D.expression&&"$view.scale"}writeValueExpressionWebScene(o,D,P,S){if("$view.scale"===o){if(S?.messages){const I=this.index;S.messages.push(new u.A("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:("string"==typeof I?I:`visualVariables[${I}]`)+".valueExpression",context:S}))}}else D[P]=o}readValueUnit(o){return o?H.read(o):null}clone(){return new K({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:(0,E.of)(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:(0,E.of)(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops?.map(o=>o.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions?.clone()})}flipSizes(){if(this.transformationType===E._w.ClampedLinear){const{minSize:o,maxSize:D}=this;return this.minSize=D,this.maxSize=o,this}if(this.transformationType===E._w.Stops){const o=this.stops;if(!o)return this;const D=o.map(S=>S.size).reverse(),P=o.length;for(let S=0;S<P;S++)o[S].size=D[S];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops?.map(o=>o.value||0)}};(0,t._)([(0,r.MZ)({readOnly:!0})],V.prototype,"cache",null),(0,t._)([(0,r.MZ)({type:N.apiValues,json:{type:N.jsonValues,origins:{"web-map":{read:!1}},read:N.read,write:N.write}})],V.prototype,"axis",void 0),(0,t._)([(0,r.MZ)()],V.prototype,"index",null),(0,t._)([(0,r.MZ)({type:String,readOnly:!0})],V.prototype,"inputValueType",null),(0,t._)([(0,r.MZ)({type:b,json:{write:!0}})],V.prototype,"legendOptions",void 0),(0,t._)([(0,r.MZ)({type:Number,value:null,json:{write:!0}})],V.prototype,"maxDataValue",null),(0,t._)([(0,r.MZ)({type:Number,value:null,json:{write:!0}})],V.prototype,"maxSize",null),(0,t._)([(0,y.w)("maxSize")],V.prototype,"castMaxSize",null),(0,t._)([(0,c.w)("maxSize")],V.prototype,"readMaxSize",null),(0,t._)([(0,r.MZ)({type:Number,value:null,json:{write:!0}})],V.prototype,"minDataValue",null),(0,t._)([(0,r.MZ)({type:Number,value:null,json:{write:!0}})],V.prototype,"minSize",null),(0,t._)([(0,y.w)("minSize")],V.prototype,"castMinSize",null),(0,t._)([(0,c.w)("minSize")],V.prototype,"readMinSize",null),(0,t._)([(0,r.MZ)({type:String,json:{write:!0}})],V.prototype,"normalizationField",void 0),(0,t._)([(0,r.MZ)({readOnly:!0})],V.prototype,"arcadeRequired",null),(0,t._)([(0,r.MZ)({type:String})],V.prototype,"scaleBy",void 0),(0,t._)([(0,r.MZ)({type:[O.A],value:null,json:{write:!0}})],V.prototype,"stops",null),(0,t._)([(0,r.MZ)({type:["outline"],json:{write:!0}})],V.prototype,"target",void 0),(0,t._)([(0,r.MZ)({type:String,readOnly:!0})],V.prototype,"transformationType",null),(0,t._)([(0,r.MZ)({type:["size"],json:{type:["sizeInfo"]}})],V.prototype,"type",void 0),(0,t._)([(0,r.MZ)({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],V.prototype,"useSymbolValue",void 0),(0,t._)([(0,r.MZ)({type:String,json:{write:!0}})],V.prototype,"valueExpression",void 0),(0,t._)([(0,c.w)("valueExpression",["valueExpression","expression"])],V.prototype,"readValueExpression",null),(0,t._)([(0,v.K)("web-scene","valueExpression")],V.prototype,"writeValueExpressionWebScene",null),(0,t._)([(0,r.MZ)({type:["radius","diameter","area","width","distance"],json:{write:!0}})],V.prototype,"valueRepresentation",void 0),(0,t._)([(0,r.MZ)({type:H.apiValues,json:{write:H.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],V.prototype,"valueUnit",void 0),(0,t._)([(0,c.w)("valueUnit")],V.prototype,"readValueUnit",null),V=K=(0,t._)([(0,g.$)("esri.renderers.visualVariables.SizeVariable")],V);const k=V},35307:(F,C,e)=>{e.d(C,{A:()=>p});var t=e(8189),u=e(49976),A=e(71065),f=e(35150),r=e(85211),y=e(48669),c=e(76576),g=e(55739),v=e(58742);const _=new u.J({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let h=class extends A.A{constructor(O){super(O),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(O){return null==O?O:"function"==typeof O?(f.A.getLogger(this).error(".field: field must be a string value"),null):(0,g.GX)(O)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};(0,t._)([(0,r.MZ)()],h.prototype,"index",void 0),(0,t._)([(0,r.MZ)({type:_.apiValues,readOnly:!0,json:{read:_.read,write:{writer:_.write,isRequired:!0}}})],h.prototype,"type",void 0),(0,t._)([(0,r.MZ)({type:String,json:{write:!0}})],h.prototype,"field",void 0),(0,t._)([(0,y.w)("field")],h.prototype,"castField",null),(0,t._)([(0,r.MZ)({type:String,json:{write:!0}})],h.prototype,"valueExpression",void 0),(0,t._)([(0,r.MZ)({type:String,json:{write:!0}})],h.prototype,"valueExpressionTitle",void 0),(0,t._)([(0,r.MZ)({readOnly:!0})],h.prototype,"arcadeRequired",null),(0,t._)([(0,r.MZ)({type:v.A,json:{write:!0}})],h.prototype,"legendOptions",void 0),h=(0,t._)([(0,c.$)("esri.renderers.visualVariables.VisualVariable")],h);const p=h},5236:(F,C,e)=>{e.d(C,{A:()=>p});var _,t=e(8189),u=e(68677),A=e(71065),f=e(85211),r=e(55739),g=(e(3248),e(40707),e(76576)),v=e(50305);let h=_=class extends A.A{constructor(O){super(O),this.color=null,this.label=null,this.value=null}writeValue(O,T,j){T[j]=O??0}clone(){return new _({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};(0,t._)([(0,f.MZ)({type:u.A,json:{type:[r.jz],write:{isRequired:!0}}})],h.prototype,"color",void 0),(0,t._)([(0,f.MZ)({type:String,json:{write:!0}})],h.prototype,"label",void 0),(0,t._)([(0,f.MZ)({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],h.prototype,"value",void 0),(0,t._)([(0,v.K)("value")],h.prototype,"writeValue",null),h=_=(0,t._)([(0,g.$)("esri.renderers.visualVariables.support.ColorStop")],h);const p=h},8042:(F,C,e)=>{e.d(C,{A:()=>h});var v,t=e(8189),u=e(71065),A=e(67685),f=e(85211),g=(e(3248),e(35150),e(40707),e(76576));let _=v=class extends u.A{constructor(p){super(p),this.label=null,this.size=null,this.value=null,this.useMinValue=null,this.useMaxValue=null}clone(){return new v({label:this.label,size:this.size,value:this.value,useMaxValue:this.useMaxValue,useMinValue:this.useMinValue})}};(0,t._)([(0,f.MZ)({type:String,json:{write:!0}})],_.prototype,"label",void 0),(0,t._)([(0,f.MZ)({type:Number,cast:A.cr,json:{write:{isRequired:!0}}})],_.prototype,"size",void 0),(0,t._)([(0,f.MZ)({type:Number,json:{write:{isRequired:!0}}})],_.prototype,"value",void 0),(0,t._)([(0,f.MZ)({type:Boolean,json:{write:!1}})],_.prototype,"useMinValue",void 0),(0,t._)([(0,f.MZ)({type:Boolean,json:{write:!1}})],_.prototype,"useMaxValue",void 0),_=v=(0,t._)([(0,g.$)("esri.renderers.visualVariables.support.SizeStop")],_);const h=_},58742:(F,C,e)=>{e.d(C,{A:()=>_});var t=e(8189),u=e(90660),A=e(71065),f=e(85211),g=(e(3248),e(35150),e(40707),e(76576));let v=class extends(u.A.ClonableMixin(A.A)){constructor(){super(...arguments),this.showLegend=null,this.title=null}};(0,t._)([(0,f.MZ)({type:Boolean,json:{write:!0}})],v.prototype,"showLegend",void 0),(0,t._)([(0,f.MZ)({type:String,json:{write:!0}})],v.prototype,"title",void 0),v=(0,t._)([(0,g.$)("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],v);const _=v},64765:(F,C,e)=>{var t,u,c;function A(c){return c&&"esri.renderers.visualVariables.SizeVariable"===c.declaredClass}function f(c){return null!=c&&!isNaN(c)&&isFinite(c)}function r(c){return c.valueExpression?t.Expression:c.field&&"string"==typeof c.field?t.Field:t.Unknown}function y(c,g){return(g||r(c))===t.Unknown?u.Constant:c.stops?u.Stops:null!=c.minSize&&null!=c.maxSize&&null!=c.minDataValue&&null!=c.maxDataValue?u.ClampedLinear:"unknown"===(c.valueUnit||"unknown")?null!=c.minSize&&null!=c.minDataValue?c.minSize&&c.minDataValue?u.Proportional:u.Additive:u.Identity:u.RealWorldSize}e.d(C,{KZ:()=>y,Yf:()=>t,_w:()=>u,eh:()=>r,gf:()=>f,of:()=>A}),(c=t||(t={})).Unknown="unknown",c.Expression="expression",c.Field="field",function(c){c.Unknown="unknown",c.Stops="stops",c.ClampedLinear="clamped-linear",c.Proportional="proportional",c.Additive="additive",c.Constant="constant",c.Identity="identity",c.RealWorldSize="real-world-size"}(u||(u={}))},77522:(F,C,e)=>{e.r(C),e.d(C,{getAllSizes:()=>I,getColor:()=>O,getOpacity:()=>T,getRotationAngle:()=>j,getSize:()=>b,getSizeForValue:()=>o,getSizeFromNumberOrVariable:()=>E,getSizeRangeAtScale:()=>D,getVisualVariableValues:()=>P,viewScaleRE:()=>p});var t=e(68677),u=e(81098),A=e(69690),f=e(35150),r=e(48716),y=e(64765);const c=()=>f.A.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),g=l=>c().warn(`The visualVariable should be an instance of esri.renderers.visualVariables.${l}`),v=()=>c().error("Use of arcade expressions requires an arcade context"),_=new u.A,h=Math.PI,p=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function O(l,a,n){const i="visualVariables"in l&&l.visualVariables?l.visualVariables.find(x=>"color"===x.type):l;if(!i)return;if("esri.renderers.visualVariables.ColorVariable"!==i.declaredClass)return void g("ColorVariable");const M="number"==typeof a,m=M?null:a,d=m?.attributes;let R=M?a:null;const s=i.field,{ipData:z,hasExpression:J}=i.cache;let W=i.cache.compiledFunc;if(!s&&!J){const x=i.stops;return x&&x[0]&&x[0].color}if("number"!=typeof R)if(J){if(null==n?.arcade)return void v();const Z=n.arcade.arcadeUtils,X=Z.getViewInfo({viewingMode:n.viewingMode,scale:n.scale,spatialReference:n.spatialReference}),Q=Z.createExecContext(m,X,n.timeZone);if(!W){const q=Z.createSyntaxTree(i.valueExpression);W=Z.createFunction(q),i.cache.compiledFunc=W}R=Z.executeFunction(W,Q)}else d&&(R=d[s]);const $=i.normalizationField,G=null!=d&&null!=$?parseFloat(d[$]):void 0;if(null!=R&&(!$||M||!isNaN(G)&&0!==G)){isNaN(G)||M||(R/=G);const x=S(R,z);if(x){const Z=x[0],X=x[1],Q=Z===X?i.stops[Z].color:t.A.blendColors(i.stops[Z].color,i.stops[X].color,x[2],n?.color);return new t.A(Q)}}}function T(l,a,n){const i="visualVariables"in l&&l.visualVariables?l.visualVariables.find(x=>"opacity"===x.type):l;if(!i)return;if("esri.renderers.visualVariables.OpacityVariable"!==i.declaredClass)return void g("OpacityVariable");const M="number"==typeof a,m=M?null:a,d=m?.attributes;let R=M?a:null;const s=i.field,{ipData:z,hasExpression:J}=i.cache;let W=i.cache.compiledFunc;if(!s&&!J){const x=i.stops;return x&&x[0]&&x[0].opacity}if("number"!=typeof R)if(J){if(null==n?.arcade)return void v();const Z=n.arcade.arcadeUtils,X=Z.getViewInfo({viewingMode:n.viewingMode,scale:n.scale,spatialReference:n.spatialReference}),Q=Z.createExecContext(m,X,n.timeZone);if(!W){const q=Z.createSyntaxTree(i.valueExpression);W=Z.createFunction(q),i.cache.compiledFunc=W}R=Z.executeFunction(W,Q)}else d&&(R=d[s]);const $=i.normalizationField,G=null!=d&&null!=$?parseFloat(d[$]):void 0;if(null!=R&&(!$||M||!isNaN(G)&&0!==G)){isNaN(G)||M||(R/=G);const x=S(R,z);if(x){const Z=x[0],X=x[1];if(Z===X)return i.stops[Z].opacity;{const Q=i.stops[Z].opacity;return Q+(i.stops[X].opacity-Q)*x[2]}}}}function j(l,a,n){const i="visualVariables"in l&&l.visualVariables?l.visualVariables.find(G=>"rotation"===G.type):l;if(!i)return;if("esri.renderers.visualVariables.RotationVariable"!==i.declaredClass)return void g("RotationVariable");const M=i.axis||"heading",m="heading"===M&&"arithmetic"===i.rotationType?90:0,d="heading"===M&&"arithmetic"===i.rotationType?-1:1,R="number"==typeof a?null:a,s=R?.attributes,z=i.field,{hasExpression:J}=i.cache;let W=i.cache.compiledFunc,$=0;if(!z&&!J)return $;if(J){if(null==n?.arcade)return void v();const x=n.arcade.arcadeUtils,Z=x.getViewInfo({viewingMode:n.viewingMode,scale:n.scale,spatialReference:n.spatialReference}),X=x.createExecContext(R,Z,n.timeZone);if(!W){const Q=x.createSyntaxTree(i.valueExpression);W=x.createFunction(Q),i.cache.compiledFunc=W}$=x.executeFunction(W,X)}else s&&($=s[z]||0);return $="number"!=typeof $||isNaN($)?null:m+d*$,$}function b(l,a,n){const i="visualVariables"in l&&l.visualVariables?l.visualVariables.find(m=>"size"===m.type):l;if(!i)return;if("esri.renderers.visualVariables.SizeVariable"!==i.declaredClass)return void g("SizeVariable");const M=o(function w(l,a,n){const i="number"==typeof a,M=i?null:a,m=M?.attributes;let d=i?a:null;const{isScaleDriven:R}=l.cache;let s=l.cache.compiledFunc;if(R){const J=n?.scale,W=n?.view;d=null==J||"3d"===W?function L(l){let a=null,n=null;const i=l.stops;return i?(a=i[0].value,n=i[i.length-1].value):(a=l.minDataValue||0,n=l.maxDataValue||0),(a+n)/2}(l):J}else if(!i)switch(l.inputValueType){case y.Yf.Expression:{if(null==n?.arcade)return void v();const W=n.arcade.arcadeUtils,$=W.getViewInfo({viewingMode:n.viewingMode,scale:n.scale,spatialReference:n.spatialReference}),G=W.createExecContext(M,$,n.timeZone);if(!s){const x=W.createSyntaxTree(l.valueExpression);s=W.createFunction(x),l.cache.compiledFunc=s}d=W.executeFunction(s,G);break}case y.Yf.Field:m&&(d=m[l.field]);break;case y.Yf.Unknown:d=null}if(!(0,y.gf)(d))return null;if(i||!l.normalizationField)return d;const z=m?parseFloat(m[l.normalizationField]):null;return(0,y.gf)(z)&&0!==z?d/z:null}(i,a,n),i,a,n,i.cache.ipData);return null==M||isNaN(M)?0:M}function E(l,a,n){return null==l?null:(0,y.of)(l)?b(l,a,n):(0,y.gf)(l)?l:null}function B(l,a,n){return(0,y.gf)(n)&&l>n?n:(0,y.gf)(a)&&l<a?a:l}function o(l,a,n,i,M){switch(a.transformationType){case y._w.Additive:return function K(l,a,n,i){return l+((E(a.minSize,n,i)||a.minDataValue)??0)}(l,a,n,i);case y._w.Constant:return function N(l,a,n){const i=l.stops;let M=i?.length&&i[0].size;return null==M&&(M=l.minSize),E(M,a,n)}(a,n,i);case y._w.ClampedLinear:return function H(l,a,n,i){const M=(l-a.minDataValue)/(a.maxDataValue-a.minDataValue),m=E(a.minSize,n,i),d=E(a.maxSize,n,i),R=i?.shape;if(l<=a.minDataValue)return m;if(l>=a.maxDataValue)return d;if(null==m||null==d)return null;if("area"===a.scaleBy&&R){const s="circle"===R,z=s?h*(m/2)**2:m*m,J=z+M*((s?h*(d/2)**2:d*d)-z);return s?2*Math.sqrt(J/h):Math.sqrt(J)}return m+M*(d-m)}(l,a,n,i);case y._w.Proportional:return function Y(l,a,n,i){const M=i?.shape,m=l/a.minDataValue,d=E(a.minSize,n,i),R=E(a.maxSize,n,i);let s=null;return s="circle"===M?2*Math.sqrt(m*(d/2)**2):"square"===M||"diamond"===M||"image"===M?Math.sqrt(m*d**2):m*d,B(s,d,R)}(l,a,n,i);case y._w.Stops:return function U(l,a,n,i,M){const[m,d,R]=S(l,M);if(m===d)return E(a.stops?.[m].size,n,i);{const s=E(a.stops?.[m].size,n,i);return s+(E(a.stops?.[d].size,n,i)-s)*R}}(l,a,n,i,M);case y._w.RealWorldSize:return function V(l,a,n,i){const M=(i?.resolution??1)*r.j[a.valueUnit],m=E(a.minSize,n,i),d=E(a.maxSize,n,i),{valueRepresentation:R}=a;let s=null;return s="area"===R?2*Math.sqrt(l/h)/M:"radius"===R||"distance"===R?2*l/M:l/M,B(s,m,d)}(l,a,n,i);case y._w.Identity:return l;case y._w.Unknown:return null}}function D(l,a,n){const{isScaleDriven:i}=l.cache;if(!(i&&"3d"===n||a))return null;const M={scale:a,view:n};let m=E(l.minSize,_,M),d=E(l.maxSize,_,M);if(null!=m||null!=d){if(m>d){const R=d;d=m,m=R}return{minSize:m,maxSize:d}}}function P(l,a,n){if(!l.visualVariables)return;const i=[],M=[],m=[],d=[],R=[];for(const s of l.visualVariables)switch(s.type){case"color":M.push(s);break;case"opacity":m.push(s);break;case"rotation":R.push(s);break;case"size":d.push(s)}return M.forEach(s=>{const z=O(s,a,n);i.push({variable:s,value:z})}),m.forEach(s=>{const z=T(s,a,n);i.push({variable:s,value:z})}),R.forEach(s=>{const z=j(s,a,n);i.push({variable:s,value:z})}),d.forEach(s=>{const z=b(s,a,n);i.push({variable:s,value:z})}),i.filter(s=>null!=s.value)}function S(l,a){if(!a)return;let n=0,i=a.length-1;return a.some((M,m)=>l<M?(i=m,!0):(n=m,!1)),[n,i,(l-a[n])/(a[i]-a[n])]}function I(l,a,n){const i=["proportional","proportional","proportional"];for(const M of l){const m=M.useSymbolValue?"symbol-value":b(M,a,n);switch(M.axis){case"width":i[0]=m;break;case"depth":i[1]=m;break;case"height":i[2]=m;break;case"width-and-depth":i[0]=m,i[1]=m;break;case"all":case void 0:case null:i[0]=m,i[1]=m,i[2]=m;break;default:(0,A.Xb)(M.axis)}}return i}},11029:(F,C,e)=>{e.d(C,{A:()=>h});var v,t=e(8189),u=e(68677),A=e(77806),f=e(85211),r=e(55739),y=e(15463),c=e(76576),g=e(3678);let _=v=class extends g.A{constructor(p){super(p),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new v({fromColor:(0,A.o8)(this.fromColor),toColor:(0,A.o8)(this.toColor),algorithm:this.algorithm})}};(0,t._)([(0,y.e)({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],_.prototype,"algorithm",void 0),(0,t._)([(0,f.MZ)({type:u.A,json:{type:[r.jz],write:!0}})],_.prototype,"fromColor",void 0),(0,t._)([(0,f.MZ)({type:u.A,json:{type:[r.jz],write:!0}})],_.prototype,"toColor",void 0),(0,t._)([(0,f.MZ)({type:["algorithmic"]})],_.prototype,"type",void 0),_=v=(0,t._)([(0,c.$)("esri.rest.support.AlgorithmicColorRamp")],_);const h=_},3678:(F,C,e)=>{e.d(C,{A:()=>v});var t=e(8189),u=e(71065),A=e(85211),c=(e(3248),e(35150),e(40707),e(76576));let g=class extends u.A{constructor(_){super(_),this.type=null}};(0,t._)([(0,A.MZ)({readOnly:!0,json:{read:!1,write:!0}})],g.prototype,"type",void 0),g=(0,t._)([(0,c.$)("esri.rest.support.ColorRamp")],g);const v=g},53754:(F,C,e)=>{e.d(C,{A:()=>h});var v,t=e(8189),u=e(77806),A=e(85211),y=(e(3248),e(35150),e(76576)),c=e(11029),g=e(3678);let _=v=class extends g.A{constructor(p){super(p),this.colorRamps=null,this.type="multipart"}clone(){return new v({colorRamps:(0,u.o8)(this.colorRamps)})}};(0,t._)([(0,A.MZ)({type:[c.A],json:{write:!0}})],_.prototype,"colorRamps",void 0),(0,t._)([(0,A.MZ)({type:["multipart"]})],_.prototype,"type",void 0),_=v=(0,t._)([(0,y.$)("esri.rest.support.MultipartColorRamp")],_);const h=_},54485:(F,C,e)=>{e.d(C,{g:()=>f,r:()=>r});var t=e(11029),u=e(3678),A=e(53754);const f={key:"type",base:u.A,typeMap:{algorithmic:t.A,multipart:A.A}};function r(y){return y?.type?"algorithmic"===y.type?t.A.fromJSON(y):"multipart"===y.type?A.A.fromJSON(y):null:null}},27572:(F,C,e)=>{e.d(C,{af:()=>E,al:()=>b,dX:()=>B});var t=e(68677),u=e(31178),f=(e(3248),e(67685)),r=e(92262),y=e(18399),c=e(92200),g=e(64484),v=e(25613),_=e(27093),h=e(97273),p=e(91644),O=e(48254);const T=v.A.fromSimpleMarkerSymbol(p.UK),j=y.A.fromSimpleLineSymbol(p.A7),w=_.A.fromSimpleFillSymbol(p.Cx),L=new g.A({symbolLayers:new u.A([new r.A({material:{color:O.fT},edges:new h.A({size:(0,f.PN)(1),color:new t.A(O.JR)})})])}),b=new y.A({symbolLayers:new u.A([new c.A({material:{color:new t.A([0,0,0])},size:(0,f.PN)(1)})])}),E=new _.A({symbolLayers:new u.A([new r.A({outline:{color:new t.A([0,0,0]),size:(0,f.PN)(1)}})])});function B(K){if(null==K)return null;switch(K.type){case"mesh":return L;case"point":case"multipoint":return T;case"polyline":return j;case"polygon":case"extent":return w}return null}},59787:(F,C,e)=>{e.d(C,{M9:()=>y,oO:()=>c,rS:()=>h});var t=e(5922),u=e(58443),A=e(75549),f=e(48298),r=e(94048);function y(p,O,T,j){const w=_(p,{},{context:j,isLabelSymbol:!1});null!=w&&(O[T]=w)}function c(p,O,T,j){const w=_(p,{},{context:j,isLabelSymbol:!0});null!=w&&(O[T]=w)}function g(p){return(0,r.wk)(p)||p instanceof A.A}function _(p,O,T){if(null==p)return null;const{context:j,isLabelSymbol:w}=T,L=j?.origin,b=j?.messages;if("web-scene"===L&&!g(p)){const E=(0,f.t)(p,{retainCIM:!0,hasLabelingContext:w});return null!=E.symbol?E.symbol.write(O,j):(b?.push(new t.A("symbol:unsupported",`Symbols of type '${p.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:p,context:j,error:E.error})),null)}return(0,u.TU)(j?.layer)&&function v(p){return"polygon-3d"===p?.type||"line-3d"===p?.type}(p)?(b?.push(new t.A("symbol:unsupported",`Symbols of type '${p.declaredClass}' are not supported on layers of type '${j?.layer?.declaredClass}'.`,{symbol:p,context:j})),null):("web-map"===L||"portal-item"===L&&!(0,u.TU)(j?.layer))&&g(p)?(b?.push(new t.A("symbol:unsupported",`Symbols of type '${p.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:p,context:j})),null):p.write(O,j)}function h(p,O){return(0,r.Bu)(p,null,O)}},48298:(F,C,e)=>{e.d(C,{c:()=>w,t:()=>L});var t=e(5922),u=e(6241),A=e(18399),f=e(64484),r=e(65824),y=e(25613),c=e(27093),g=e(88521),v=e(55417),_=e(46602),h=e(47705),p=e(75549),O=e(27572),T=e(94048);const j="#useCIMFallbackSymbology()",w={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function L(b,E=w){if(!b)return{symbol:null};const{retainId:B=w.retainId,ignoreDrivers:K=w.ignoreDrivers,hasLabelingContext:N=w.hasLabelingContext,retainCIM:H=w.retainCIM,cimFallbackEnabled:Y=w.cimFallbackEnabled}=E;let U=null;if((0,T.wk)(b)||b instanceof p.A)U=b.clone();else if("cim"===b.type){const V=b.data?.symbol?.type;switch(V){case"CIMPointSymbol":U=H?b.clone():y.A.fromCIMSymbol(b);break;case"CIMLineSymbol":Y&&(U=O.al.clone(),E?.logWarning?.(j,"Unsupported CIM line symbology converted to fallback 3D line symbology"));break;case"CIMPolygonSymbol":Y&&(U=O.af.clone(),E?.logWarning?.(j,"Unsupported CIM polygon symbology converted to fallback 3D polygon symbology"))}if(!U)return{error:new t.A("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${V||"unknown"}' is unsupported in 3D`,{symbol:b})}}else if(b instanceof v.A)U=A.A.fromSimpleLineSymbol(b);else if(b instanceof _.A)U=y.A.fromSimpleMarkerSymbol(b);else if(b instanceof r.A)U=y.A.fromPictureMarkerSymbol(b);else if(b instanceof g.A)U=E.geometryType&&"mesh"===E.geometryType?f.A.fromSimpleFillSymbol(b):c.A.fromSimpleFillSymbol(b);else{if(!(b instanceof h.A))return{error:new t.A("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${b.type||b.declaredClass}' is unsupported in 3D`,{symbol:b})};U=N?u.A.fromTextSymbol(b):y.A.fromTextSymbol(b)}return B&&U&&"cim"!==U.type&&(U.id=b.id),!K||"cim"===U.type||U instanceof p.A||U.symbolLayers.forEach(V=>V.ignoreDrivers=!0),{symbol:U}}}}]);