"use strict";(self.webpackChunkAngularClient=self.webpackChunkAngularClient||[]).push([[9146],{33096:(lt,N,_)=>{_.d(N,{a:()=>H,b:()=>St,d:()=>W,f:()=>C,g:()=>A,h:()=>ft,u:()=>S}),_(3248);var d=_(35150),f=_(69287),D=_(84149),T=_(92771),I=_(62789),P=_(28714),R=_(25866),O=_(51995),y=_(41510),b=_(71548),X=_(93617),p=_(55703),v=_(99608),F=_(19741);const z=()=>d.A.getLogger("esri.views.3d.support.geometryUtils.boundedPlane");function W(J=Dt){return{plane:(0,X.vt)(J.plane),origin:(0,R.o8)(J.origin),basis1:(0,R.o8)(J.basis1),basis2:(0,R.o8)(J.basis2)}}function H(J,it=W()){return C(J.origin,J.basis1,J.basis2,it)}function C(J,it,$,K=W()){return(0,P.c)(K.origin,J),(0,P.c)(K.basis1,it),(0,P.c)(K.basis2,$),S(K),function k(J,it){Math.abs((0,P.f)(J.basis1,J.basis2)/((0,P.l)(J.basis1)*(0,P.l)(J.basis2)))>1e-6&&z().warn(it,"Provided basis vectors are not perpendicular"),Math.abs((0,P.f)(J.basis1,vt(J)))>1e-6&&z().warn(it,"Basis vectors and plane normal are not perpendicular"),Math.abs(-(0,P.f)(vt(J),J.origin)-J.plane[3])>1e-6&&z().warn(it,"Plane offset is not consistent with plane origin")}(K,"fromValues()"),K}function S(J){(0,X.mR)(J.basis2,J.basis1,J.origin,J.plane)}function U(J,it,$){J!==$&&H(J,$);const K=(0,P.h)(F.rq.get(),vt(J),it);return(0,P.g)($.origin,$.origin,K),$.plane[3]-=it,$}function A(J,it=W()){const $=(J[2]-J[0])/2,K=(J[3]-J[1])/2;return(0,P.i)(it.origin,J[0]+$,J[1]+K,0),(0,P.i)(it.basis1,$,0,0),(0,P.i)(it.basis2,0,K,0),(0,X.fA)(0,0,1,0,it.plane),it}function w(J,it,$){return!!(0,X.Ui)(J.plane,it,$)&&M(J,$)}function Z(J,it,$){const K=It.get();_t(J,it,K,It.get());let Q=Number.POSITIVE_INFINITY;for(const rt of Rt){const pt=q(J,rt,Lt.get()),Ot=F.rq.get();if((0,X.T7)(K,pt,Ot)){const Mt=(0,P.o)(F.rq.get(),it.origin,Ot),At=Math.abs((0,f.XM)((0,P.f)(it.direction,Mt)));At<Q&&(Q=At,(0,P.c)($,Ot))}}return Q===Number.POSITIVE_INFINITY?Et(J,it,$):$}function Et(J,it,$){if(w(J,it,$))return $;const K=It.get(),Q=It.get();_t(J,it,K,Q);let rt=Number.POSITIVE_INFINITY;for(const pt of Rt){const Ot=q(J,pt,Lt.get()),Mt=F.rq.get();if((0,X.gv)(K,Ot,Mt)){const At=(0,p.kb)(it,Mt);if(!(0,X.Tj)(Q,Mt))continue;At<rt&&(rt=At,(0,P.c)($,Mt))}}return ot(J,it.origin)<rt&&st(J,it.origin,$),$}function st(J,it,$){const K=(0,X._I)(J.plane,it,F.rq.get()),Q=(0,b.H6)(j(J,J.basis1),K,-1,1,F.rq.get()),rt=(0,b.H6)(j(J,J.basis2),K,-1,1,F.rq.get());return(0,P.d)($,(0,P.g)(F.rq.get(),Q,rt),J.origin),$}function nt(J,it,$){const{origin:K,basis1:Q,basis2:rt}=J,pt=(0,P.d)(F.rq.get(),it,K),Ot=(0,v.gr)(Q,pt),Mt=(0,v.gr)(rt,pt),At=(0,v.gr)(vt(J),pt);return(0,P.i)($,Ot,Mt,At)}function ot(J,it){const $=nt(J,it,F.rq.get()),{basis1:K,basis2:Q}=J,rt=(0,P.l)(K),pt=(0,P.l)(Q),Ot=Math.max(Math.abs($[0])-rt,0),Mt=Math.max(Math.abs($[1])-pt,0),At=$[2];return Ot*Ot+Mt*Mt+At*At}function ft(J,it){return Math.sqrt(ot(J,it))}function Tt(J,it){const $=-J.plane[3];return(0,v.gr)(vt(J),it)-$}function vt(J){return(0,X.Qj)(J.plane)}function M(J,it){const $=(0,P.d)(F.rq.get(),it,J.origin),K=(0,P.k)(J.basis1),Q=(0,P.k)(J.basis2),rt=(0,P.f)(J.basis1,$),pt=(0,P.f)(J.basis2,$);return-rt-K<0&&rt-K<0&&-pt-Q<0&&pt-Q<0}function j(J,it){const $=Lt.get();return(0,P.c)($.origin,J.origin),(0,P.c)($.vector,it),$}function q(J,it,$){const{basis1:K,basis2:Q,origin:rt}=J,pt=(0,P.h)(F.rq.get(),K,it.origin[0]),Ot=(0,P.h)(F.rq.get(),Q,it.origin[1]);(0,P.g)($.origin,pt,Ot),(0,P.g)($.origin,$.origin,rt);const Mt=(0,P.h)(F.rq.get(),K,it.direction[0]),At=(0,P.h)(F.rq.get(),Q,it.direction[1]);return(0,P.h)($.vector,(0,P.g)(Mt,Mt,At),2),$}function _t(J,it,$,K){const Q=vt(J);(0,X.mR)(Q,it.direction,it.origin,$),(0,X.mR)((0,X.Qj)($),Q,it.origin,K)}const Dt={plane:(0,X.vt)(),origin:(0,R.fA)(0,0,0),basis1:(0,R.fA)(1,0,0),basis2:(0,R.fA)(0,1,0)},It=new D.I(X.vt),Lt=new D.I(b.vt),Ut=(0,R.vt)(),xt=new D.I(()=>W()),Rt=[{origin:[-1,-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],yt=(0,I.vt)(),Nt=(0,I.vt)(),St=Object.freeze(Object.defineProperty({__proto__:null,BoundedPlaneClass:class tt{constructor(){this.plane=(0,X.vt)(),this.origin=(0,R.vt)(),this.basis1=(0,R.vt)(),this.basis2=(0,R.vt)()}},altitudeAt:Tt,axisAt:function mt(J,it,$,K){return function x(J,it,$){switch(it){case y._.X:(0,P.c)($,J.basis1),(0,P.n)($,$);break;case y._.Y:(0,P.c)($,J.basis2),(0,P.n)($,$);break;case y._.Z:(0,P.c)($,vt(J))}return $}(J,$,K)},cameraFrustumCoverage:function at(J,it){return(it-J)/it},closestPoint:Et,closestPointOnSilhouette:Z,copy:H,copyWithoutVerify:function L(J,it){(0,P.c)(it.origin,J.origin),(0,P.c)(it.basis1,J.basis1),(0,P.c)(it.basis2,J.basis2),(0,X.C)(it.plane,J.plane)},create:W,distance:ft,distance2:ot,distanceToSilhouette:function ht(J,it){let $=Number.NEGATIVE_INFINITY;for(const K of Rt){const Q=q(J,K,Lt.get()),rt=(0,b.kb)(Q,it);rt>$&&($=rt)}return Math.sqrt($)},elevate:U,equals:function gt(J,it){return(0,P.p)(J.basis1,it.basis1)&&(0,P.p)(J.basis2,it.basis2)&&(0,P.p)(J.origin,it.origin)},extrusionContainsPoint:function ct(J,it){return(0,X.Tj)(J.plane,it)&&M(J,it)},fromAABoundingRect:A,fromValues:C,getExtent:function V(J,it){const $=J.basis1[0],K=J.basis2[1],[Q,rt]=J.origin;return(0,O.fA)(Q-$,rt-K,Q+$,rt+K,it)},intersectRay:w,intersectRayClosestSilhouette:function B(J,it,$){if(w(J,it,$))return $;const K=Z(J,it,F.rq.get());return(0,P.g)($,it.origin,(0,P.h)(F.rq.get(),it.direction,(0,P.j)(it.origin,K)/(0,P.l)(it.direction))),$},normal:vt,projectPoint:st,projectPointLocal:nt,rotate:function dt(J,it,$,K){return J!==K&&H(J,K),(0,T.$0)(Nt,it,$),(0,P.t)(K.basis1,J.basis1,Nt),(0,P.t)(K.basis2,J.basis2,Nt),S(K),K},setAltitudeAt:function Pt(J,it,$,K){const Q=Tt(J,it),rt=(0,P.h)(Ut,vt(J),$-Q);return(0,P.g)(K,it,rt),K},setExtent:function Y(J,it,$){return A(it,$),U($,Tt(J,J.origin),$),$},transform:function ut(J,it,$){return J!==$&&H(J,$),(0,T.B8)(yt,it),(0,T.mg)(yt,yt),(0,P.t)($.basis1,J.basis1,yt),(0,P.t)($.basis2,J.basis2,yt),(0,P.t)((0,X.Qj)($.plane),(0,X.Qj)(J.plane),yt),(0,P.t)($.origin,J.origin,it),(0,X.mP)($.plane,$.plane,$.origin),$},up:Dt,updateUnboundedPlane:S,wrap:function G(J,it,$){const K=xt.get();return K.origin=J,K.basis1=it,K.basis2=$,K.plane=(0,X.LV)(0,0,0,0),S(K),K}},Symbol.toStringTag,{value:"Module"}))},81596:(lt,N,_)=>{_.d(N,{AK:()=>T,Wz:()=>D,oe:()=>d});var h=_(79139);function d(I,P=!1){return I<=h.y9?P?new Array(I).fill(0):new Array(I):new Float32Array(I)}function D(I){return(Array.isArray(I)?I.length:I.byteLength/8)<=h.y9?Array.from(I):new Float32Array(I)}function T(I,P,R){return Array.isArray(I)?I.slice(P,P+R):I.subarray(P,P+R)}},83034:(lt,N,_)=>{_.d(N,{Dg:()=>d,EH:()=>X,JH:()=>T,my:()=>D,tM:()=>O});var h=_(79139);function d(v){if(Array.isArray(v)){if(v.length<h.y9)return v}else if(v.length<h.y9)return Array.from(v);let F=!0,z=!0;return v.some((tt,et)=>(F=F&&0===tt,z=z&&tt===et,!F&&!z)),F?X(v.length):z?O(v.length):(0,h.iu)(v)&&v.BYTES_PER_ELEMENT===Uint16Array.BYTES_PER_ELEMENT?v:function f(v){let F=!0;for(const z of v){if(z>=65536)return(0,h.iu)(v)?v:new Uint32Array(v);z>=256&&(F=!1)}return F?new Uint8Array(v):new Uint16Array(v)}(v)}function D(v){return v<=h.y9?new Array(v):v<=65536?new Uint16Array(v):new Uint32Array(v)}function T(v){return v<=h.y9?new Array(v):new Uint32Array(v)}let I=y(131072);const P=[0],R=(()=>{const v=new Uint16Array(65536);for(let F=0;F<v.length;++F)v[F]=F;return v})();function O(v){return 1===v?P:v<h.y9?Array.from(new Uint16Array(R.buffer,0,v)):v<R.length?new Uint16Array(R.buffer,0,v):(v>I.length&&(I=y(Math.max(2*I.length,v))),new Uint32Array(I.buffer,0,v))}function y(v){const F=new Uint32Array(v);for(let z=0;z<F.length;z++)F[z]=z;return F}let b=new Uint8Array(65536);function X(v){if(1===v)return P;if(v<h.y9)return new Array(v).fill(0);if(v>b.length){const F=Math.max(2*b.length,v);b=new Uint8Array(F)}return new Uint8Array(b.buffer,0,v)}},44703:(lt,N,_)=>{function h(T){switch(T){case"u8":case"i8":return 1;case"u16":case"i16":return 2;case"u32":case"i32":case"f32":return 4;case"f64":return 8}}_.d(N,{GJ:()=>h})},71548:(lt,N,_)=>{_.d(N,{C:()=>R,Cr:()=>y,H6:()=>v,_I:()=>X,dz:()=>F,fA:()=>O,kb:()=>b,ld:()=>z,sd:()=>p,vt:()=>I});var h=_(69287),d=_(84149),f=_(28714),D=_(25866),T=_(19741);function I(G){return G?{origin:(0,D.o8)(G.origin),vector:(0,D.o8)(G.vector)}:{origin:(0,D.vt)(),vector:(0,D.vt)()}}function R(G,H=I()){return O(G.origin,G.vector,H)}function O(G,H,L=I()){return(0,f.c)(L.origin,G),(0,f.c)(L.vector,H),L}function y(G,H,L=I()){return(0,f.c)(L.origin,G),(0,f.d)(L.vector,H,G),L}function b(G,H){const L=(0,f.d)(T.rq.get(),H,G.origin),C=(0,f.f)(G.vector,L),S=(0,f.f)(G.vector,G.vector),U=(0,h.qE)(C/S,0,1),Y=(0,f.d)(T.rq.get(),(0,f.h)(T.rq.get(),G.vector,U),L);return(0,f.f)(Y,Y)}function X(G,H,L){return v(G,H,0,1,L)}function p(G,H,L){return(0,f.g)(L,G.origin,(0,f.h)(L,G.vector,H))}function v(G,H,L,C,S){const{vector:U,origin:Y}=G,V=(0,f.d)(T.rq.get(),H,Y),A=(0,f.f)(U,V)/(0,f.k)(U);return(0,f.h)(S,U,(0,h.qE)(A,L,C)),(0,f.g)(S,S,G.origin)}function F(G,H){if(tt(G,function P(G,H){const L=W.get();return L.origin=G,L.vector=H,L}(H.origin,H.direction),!1,et)){const{tA:L,pB:C,distance2:S}=et;if(L>=0&&L<=1)return S;if(L<0)return(0,f.s)(G.origin,C);if(L>1)return(0,f.s)((0,f.g)(T.rq.get(),G.origin,G.vector),C)}return null}function z(G,H,L){return!!tt(G,H,!0,et)&&((0,f.c)(L,et.pA),!0)}function tt(G,H,L,C){const U=G.origin,Y=(0,f.g)(T.rq.get(),U,G.vector),V=H.origin,A=(0,f.g)(T.rq.get(),V,H.vector),w=T.rq.get(),B=T.rq.get();if(w[0]=U[0]-V[0],w[1]=U[1]-V[1],w[2]=U[2]-V[2],B[0]=A[0]-V[0],B[1]=A[1]-V[1],B[2]=A[2]-V[2],Math.abs(B[0])<1e-6&&Math.abs(B[1])<1e-6&&Math.abs(B[2])<1e-6)return!1;const Z=T.rq.get();if(Z[0]=Y[0]-U[0],Z[1]=Y[1]-U[1],Z[2]=Y[2]-U[2],Math.abs(Z[0])<1e-6&&Math.abs(Z[1])<1e-6&&Math.abs(Z[2])<1e-6)return!1;const at=w[0]*B[0]+w[1]*B[1]+w[2]*B[2],Et=B[0]*Z[0]+B[1]*Z[1]+B[2]*Z[2],st=w[0]*Z[0]+w[1]*Z[1]+w[2]*Z[2],nt=B[0]*B[0]+B[1]*B[1]+B[2]*B[2],ot=(Z[0]*Z[0]+Z[1]*Z[1]+Z[2]*Z[2])*nt-Et*Et;if(Math.abs(ot)<1e-6)return!1;let ft=(at*Et-st*nt)/ot,ht=(at+Et*ft)/nt;L&&(ft=(0,h.qE)(ft,0,1),ht=(0,h.qE)(ht,0,1));const ct=T.rq.get(),mt=T.rq.get();return ct[0]=U[0]+ft*Z[0],ct[1]=U[1]+ft*Z[1],ct[2]=U[2]+ft*Z[2],mt[0]=V[0]+ht*B[0],mt[1]=V[1]+ht*B[1],mt[2]=V[2]+ht*B[2],C.tA=ft,C.tB=ht,C.pA=ct,C.pB=mt,C.distance2=(0,f.s)(ct,mt),!0}const et={tA:0,tB:0,pA:(0,D.vt)(),pB:(0,D.vt)(),distance2:0},W=new d.I(()=>I())},53511:(lt,N,_)=>{_.d(N,{Fm:()=>X,Q7:()=>p});var h=_(84149),d=_(28714),f=_(25866),D=_(71548);function X(et,W,G){return.5*Math.abs((W[0]-et[0])*(G[1]-et[1])-(W[1]-et[1])*(G[0]-et[0]))}function p(et,W,G){return(0,d.d)(z,W,et),(0,d.d)(tt,G,et),.5*(0,d.l)((0,d.e)(z,z,tt))}_(19741),new h.I(D.vt),new h.I(()=>function I(et){return et?{p0:(0,f.o8)(et.p0),p1:(0,f.o8)(et.p1),p2:(0,f.o8)(et.p2)}:{p0:(0,f.vt)(),p1:(0,f.vt)(),p2:(0,f.vt)()}}());const z=(0,f.vt)(),tt=(0,f.vt)()},89249:(lt,N,_)=>{var h,d;_.d(N,{n:()=>h}),(d=h||(h={}))[d.ETC1_RGB=0]="ETC1_RGB",d[d.ETC2_RGBA=1]="ETC2_RGBA",d[d.BC1_RGB=2]="BC1_RGB",d[d.BC3_RGBA=3]="BC3_RGBA",d[d.BC4_R=4]="BC4_R",d[d.BC5_RG=5]="BC5_RG",d[d.BC7_M6_RGB=6]="BC7_M6_RGB",d[d.BC7_M5_RGBA=7]="BC7_M5_RGBA",d[d.PVRTC1_4_RGB=8]="PVRTC1_4_RGB",d[d.PVRTC1_4_RGBA=9]="PVRTC1_4_RGBA",d[d.ASTC_4x4_RGBA=10]="ASTC_4x4_RGBA",d[d.ATC_RGB=11]="ATC_RGB",d[d.ATC_RGBA=12]="ATC_RGBA",d[d.FXT1_RGB=17]="FXT1_RGB",d[d.PVRTC2_4_RGB=18]="PVRTC2_4_RGB",d[d.PVRTC2_4_RGBA=19]="PVRTC2_4_RGBA",d[d.ETC2_EAC_R11=20]="ETC2_EAC_R11",d[d.ETC2_EAC_RG11=21]="ETC2_EAC_RG11",d[d.RGBA32=13]="RGBA32",d[d.RGB565=14]="RGB565",d[d.BGR565=15]="BGR565",d[d.RGBA4444=16]="RGBA4444"},96797:(lt,N,_)=>{_.d(N,{D:()=>f});var h=_(10467),d=_(89563);function f(T,I){return D.apply(this,arguments)}function D(){return(D=(0,h.A)(function*(T,I){const{data:P}=yield(0,d.A)(T,{responseType:"image",...I});return P})).apply(this,arguments)}},85222:(lt,N,_)=>{_.d(N,{Gd:()=>ct,J_:()=>ft,VC:()=>Pt,b3:()=>Tt,s_:()=>ot,ul:()=>gt,wI:()=>Et}),_(3248);var p,v,x,d=_(69287),f=_(31610),D=_(32954),T=_(92771),I=_(62789),P=_(28714),R=_(25866),O=_(48716),y=_(68778),b=_(45321),X=_(70938);(x=p||(p={}))[x.Undefined=0]="Undefined",x[x.DefinedSize=1]="DefinedSize",x[x.DefinedScale=2]="DefinedScale",function(x){x[x.Undefined=0]="Undefined",x[x.DefinedAngle=1]="DefinedAngle"}(v||(v={}));class F{constructor(M){this.field=M}}class z extends F{constructor(M){super(M),this.minSize=[0,0,0],this.maxSize=[0,0,0],this.offset=[0,0,0],this.factor=[0,0,0],this.type=[p.Undefined,p.Undefined,p.Undefined]}}class tt extends F{constructor(M){super(M),this.colors=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.values=[0,0,0,0,0,0,0,0]}}class et extends F{constructor(M){super(M),this.values=[0,0,0,0,0,0,0,0],this.opacityValues=[0,0,0,0,0,0,0,0]}}class G{}function H(x){return null!=x}function L(x,M){x&&x.push(M)}function S(x,M,j,q,k){const _t=x.minSize,Dt=x.maxSize;if(x.useSymbolValue){const It=q.symbolSize[j];return M.minSize[j]=It,M.maxSize[j]=It,M.offset[j]=M.minSize[j],M.factor[j]=0,M.type[j]=p.DefinedSize,!0}if(H(x.field))return H(x.stops)?2===x.stops.length&&(0,y.Et)(x.stops[0].size)&&(0,y.Et)(x.stops[1].size)?(U(x.stops[0].size,x.stops[1].size,x.stops[0].value,x.stops[1].value,M,j),M.type[j]=p.DefinedSize,!0):(L(k,"Could not convert size info: stops only supported with 2 elements"),!1):(0,y.Et)(_t)&&(0,y.Et)(Dt)&&H(x.minDataValue)&&H(x.maxDataValue)?(U(_t,Dt,x.minDataValue,x.maxDataValue,M,j),M.type[j]=p.DefinedSize,!0):"unknown"===x.valueUnit?(L(k,"Could not convert size info: proportional size not supported"),!1):null!=O.j[x.valueUnit]?(M.minSize[j]=-1/0,M.maxSize[j]=1/0,M.offset[j]=0,M.factor[j]=1/O.j[x.valueUnit],M.type[j]=p.DefinedSize,!0):(L(k,"Could not convert size info: scale-dependent size not supported"),!1);if(!H(x.field)){if(x.stops?.[0]&&(0,y.Et)(x.stops[0].size))return M.minSize[j]=x.stops[0].size,M.maxSize[j]=x.stops[0].size,M.offset[j]=M.minSize[j],M.factor[j]=0,M.type[j]=p.DefinedSize,!0;if((0,y.Et)(_t))return M.minSize[j]=_t,M.maxSize[j]=_t,M.offset[j]=_t,M.factor[j]=0,M.type[j]=p.DefinedSize,!0}return L(k,"Could not convert size info: unsupported variant of sizeInfo"),!1}function U(x,M,j,q,k,_t){const Dt=Math.abs(q-j)>0?(M-x)/(q-j):0;k.minSize[_t]=Dt>0?x:M,k.maxSize[_t]=Dt>0?M:x,k.offset[_t]=x-j*Dt,k.factor[_t]=Dt}function A(x,M,j){x[4*M]=j.r/255,x[4*M+1]=j.g/255,x[4*M+2]=j.b/255,x[4*M+3]=j.a}function Z(x,M,j){const q=2===j&&"arithmetic"===x.rotationType;M.offset[j]=q?90:0,M.factor[j]=q?-1:1,M.type[j]=1}class Et{constructor(M,j=[1,1,1],q=[1,1,1],k=1,_t=[0,0,0],Dt=[1,1,1],It=[0,0,0]){this.supports=M,this.modelSize=j,this.symbolSize=q,this.unitInMeters=k,this.anchor=_t,this.scale=Dt,this.rotation=It}}function st(x,M,j){if(!x)return null;const q=x.reduce((k,_t)=>{if(!k)return k;if(_t.valueExpression)return L(j,"Could not convert visual variables: arcade expressions not supported"),null;switch(_t.type){case"size":return M.supports.size?function Y(x,M,j,q){if(x.normalizationField||x.valueRepresentation)return L(q,"Could not convert size info: unsupported property"),null;if(!(0,y.CO)(x.field))return L(q,"Could not convert size info: field is not a string"),null;if(M.size){if(x.field)if(M.size.field){if(x.field!==M.size.field)return L(q,"Could not convert size info: multiple fields in use"),null}else M.size.field=x.field}else M.size=new z(x.field);let k;switch(x.axis){case"width":return k=S(x,M.size,0,j,q),k?M:null;case"height":return k=S(x,M.size,2,j,q),k?M:null;case"depth":return k=S(x,M.size,1,j,q),k?M:null;case"width-and-depth":return k=S(x,M.size,0,j,q),k&&S(x,M.size,1,j,q),k?M:null;case null:case void 0:case"all":return k=S(x,M.size,0,j,q),k=k&&S(x,M.size,1,j,q),k=k&&S(x,M.size,2,j,q),k?M:null;default:return L(q,`Could not convert size info: unknown axis "${x.axis}""`),null}}(_t,k,M,j):k;case"color":return M.supports.color?function w(x,M,j){if(x.normalizationField)return L(j,"Could not convert color info: unsupported property"),null;if((0,y.Kg)(x.field)){if(!x.stops)return L(j,"Could not convert color info: missing stops or colors"),null;{if(x.stops.length>8)return L(j,"Could not convert color info: too many color stops"),null;M.color=new tt(x.field);const q=x.stops;for(let k=0;k<8;++k){const _t=q[Math.min(k,q.length-1)];M.color.values[k]=_t.value,A(M.color.colors,k,_t.color)}}}else{if(!(x.stops&&x.stops.length>=0))return L(j,"Could not convert color info: no field and no colors/stops"),null;{const q=x.stops&&x.stops.length>=0&&x.stops[0].color;M.color={field:null,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};for(let k=0;k<8;k++)M.color.values[k]=1/0,A(M.color.colors,k,q)}}return M}(_t,k,j):k;case"opacity":return M.supports.opacity?function B(x,M,j){if(x.normalizationField)return L(j,"Could not convert opacity info: unsupported property"),null;if((0,y.Kg)(x.field)){if(!x.stops)return L(j,"Could not convert opacity info: missing stops or opacities"),null;{if(x.stops.length>8)return L(j,"Could not convert opacity info: too many opacity stops"),null;M.opacity=new et(x.field);const q=x.stops;for(let k=0;k<8;++k){const _t=q[Math.min(k,q.length-1)];M.opacity.values[k]=_t.value,M.opacity.opacityValues[k]=_t.opacity}}}else{if(!(x.stops&&x.stops.length>=0))return L(j,"Could not convert opacity info: no field and no opacities/stops"),null;{const q=x.stops&&x.stops.length>=0?x.stops[0].opacity:0;M.opacity={field:null,values:[0,0,0,0,0,0,0,0],opacityValues:[0,0,0,0,0,0,0,0]};for(let k=0;k<8;k++)M.opacity.values[k]=1/0,M.opacity.opacityValues[k]=q}}return M}(_t,k,j):null;case"rotation":return M.supports.rotation?function at(x,M,j){if(!(0,y.Kg)(x.field))return L(j,"Could not convert rotation info: field is not a string"),null;if(M.rotation){if(x.field)if(M.rotation.field){if(x.field!==M.rotation.field)return L(j,"Could not convert rotation info: multiple fields in use"),null}else M.rotation.field=x.field}else M.rotation={field:x.field,offset:[0,0,0],factor:[1,1,1],type:[0,0,0]};switch(x.axis){case"tilt":return Z(x,M.rotation,0),M;case"roll":return Z(x,M.rotation,1),M;case null:case void 0:case"heading":return Z(x,M.rotation,2),M;default:return L(j,`Could not convert rotation info: unknown axis "${x.axis}""`),null}}(_t,k,j):k;default:return null}},new G);return!(x.length>0&&q)||q.size||q.color||q.opacity||q.rotation?q?.size&&!function V(x,M,j){for(let k=0;k<3;++k){let _t=M.unitInMeters;x.type[k]===p.DefinedSize&&(_t*=M.modelSize[k],x.type[k]=p.DefinedScale),x.minSize[k]=x.minSize[k]/_t,x.maxSize[k]=x.maxSize[k]/_t,x.offset[k]=x.offset[k]/_t,x.factor[k]=x.factor[k]/_t}let q;if(x.type[0]!==p.Undefined)q=0;else if(x.type[1]!==p.Undefined)q=1;else{if(x.type[2]===p.Undefined)return L(j,"No size axis contains a valid size or scale"),!1;q=2}for(let k=0;k<3;++k)x.type[k]===p.Undefined&&(x.minSize[k]=x.minSize[q],x.maxSize[k]=x.maxSize[q],x.offset[k]=x.offset[q],x.factor[k]=x.factor[q],x.type[k]=x.type[q]);return!0}(q.size,M,j)?null:q:null}class nt{constructor(M,j,q){this.visualVariables=M,this.materialParameters=j,this.requiresShaderTransformation=q}}function ot(x,M){if(!x||b.b.TESTS_DISABLE_FAST_UPDATES)return null;const j=st(x.visualVariables,M);return j?new nt(j,mt(j,M),!!j.size):null}function ft(x,M,j){if(!M||!x)return!1;const q=x.visualVariables,k=st(M.visualVariables,j);return!!k&&!!(ht(q.size,k.size,"size")&&ht(q.color,k.color,"color")&&ht(q.rotation,k.rotation,"rotation")&&ht(q.opacity,k.opacity,"opacity"))&&(x.visualVariables=k,x.materialParameters=mt(k,j),x.requiresShaderTransformation=!!k.size,!0)}function ht(x,M,j){if(!!x!=!!M||x&&x.field!==M?.field)return!1;if(x&&"rotation"===j){const q=x,k=M;for(let _t=0;_t<3;_t++)if(q.type[_t]!==k.type[_t]||q.offset[_t]!==k.offset[_t]||q.factor[_t]!==k.factor[_t])return!1}return!0}class ct extends X.Y{constructor(M){super(),this.vvSize=M?.size??null,this.vvColor=M?.color??null,this.vvOpacity=M?.opacity??null}}function mt(x,M){const j=new ct(x);return j.vvSize&&(j.vvSymbolAnchor=M.anchor,(0,T.D_)(vt),function C(x,M,j,q=(0,I.vt)()){const k=x||0,_t=M||0,Dt=j||0;0!==k&&(0,T.Qr)(q,q,-k/180*Math.PI),0!==_t&&(0,T.eL)(q,q,_t/180*Math.PI),0!==Dt&&(0,T.Z8)(q,q,Dt/180*Math.PI)}(M.rotation[2],M.rotation[0],M.rotation[1],vt),j.vvSymbolRotationMatrix=j.vvSymbolRotationMatrix||(0,D.vt)(),(0,f.z0)(j.vvSymbolRotationMatrix,vt)),j}function Tt(x,M,j){if(!x.vvSize)return j;(0,T.C)(ut,j);const q=x.vvSymbolRotationMatrix;(0,T.hZ)(vt,q[0],q[1],q[2],0,q[3],q[4],q[5],0,q[6],q[7],q[8],0,0,0,0,1),(0,T.lw)(ut,ut,vt);for(let k=0;k<3;++k)dt[k]=(0,d.qE)(x.vvSize.offset[k]+M[0]*x.vvSize.factor[k],x.vvSize.minSize[k],x.vvSize.maxSize[k]);return(0,T.hs)(ut,ut,dt),(0,T.Tl)(ut,ut,x.vvSymbolAnchor),ut}function Pt(x,M,j){if(!M.vvSize)return(0,P.i)(x,1,1,1),x;for(let q=0;q<3;++q)x[q]=(0,d.qE)(M.vvSize.offset[q]+j[0]*M.vvSize.factor[q],M.vvSize.minSize[q],M.vvSize.maxSize[q]);return x}function gt(x,M){const j=null==x?0:M.attributes[x];return"number"==typeof j&&isFinite(j)?j:0}const ut=(0,I.vt)(),dt=(0,R.vt)(),vt=(0,I.vt)()},48499:(lt,N,_)=>{_.d(N,{BP:()=>I,l5:()=>P,q3:()=>T});var h=_(45434),d=_(44703),f=_(65388);class D{constructor(p,v){this.layout=p,this.buffer="number"==typeof v?new ArrayBuffer(v*p.stride):v;for(const F of p.fields.keys()){const z=p.fields.get(F);this[F]=new z.constructor(this.buffer,z.offset,this.stride)}}get stride(){return this.layout.stride}get count(){return this.buffer.byteLength/this.stride}get byteLength(){return this.buffer.byteLength}getField(p,v){const F=this[p];return F&&F.elementCount===v.ElementCount&&F.elementType===v.ElementType?F:null}slice(p,v){return new D(this.layout,this.buffer.slice(p*this.stride,v*this.stride))}copyFrom(p,v=0,F=0,z=p.count){const tt=this.stride;if(tt%4==0){const et=new Uint32Array(p.buffer,v*tt,z*tt/4);new Uint32Array(this.buffer,F*tt,z*tt/4).set(et)}else{const et=new Uint8Array(p.buffer,v*tt,z*tt);new Uint8Array(this.buffer,F*tt,z*tt).set(et)}return this}get cachedMemory(){return this.byteLength}dispose(){}}class T{constructor(p){this._stride=0,this._lastAligned=0,this._fields=new Map,p&&(this._stride=p.stride,p.fields.forEach(v=>{return this._fields.set(v[0],{...v[1],constructor:(X=v[1].constructor,b.get(X))});var X}))}freeze(){return this}vec2f(p,v){return this._appendField(p,h.gH,v),this}vec2f64(p,v){return this._appendField(p,h.si,v),this}vec3f(p,v){return this._appendField(p,h.xs,v),this}vec3f64(p,v){return this._appendField(p,h.Xm,v),this}vec4f(p,v){return this._appendField(p,h.Eq,v),this}vec4f64(p,v){return this._appendField(p,h.Aj,v),this}mat3f(p,v){return this._appendField(p,h.jZ,v),this}mat3f64(p,v){return this._appendField(p,h.j0,v),this}mat4f(p,v){return this._appendField(p,h.Sx,v),this}mat4f64(p,v){return this._appendField(p,h.E$,v),this}vec4u8(p,v){return this._appendField(p,h.XP,v),this}f32(p,v){return this._appendField(p,h.Y$,v),this}f64(p,v){return this._appendField(p,h.qB,v),this}u8(p,v){return this._appendField(p,h.SL,v),this}u16(p,v){return this._appendField(p,h.h,v),this}i8(p,v){return this._appendField(p,h.bf,v),this}vec2i8(p,v){return this._appendField(p,h.D6,v),this}vec2i16(p,v){return this._appendField(p,h.mJ,v),this}vec2u8(p,v){return this._appendField(p,h.LC,v),this}vec4u16(p,v){return this._appendField(p,h.Uz,v),this}u32(p,v){return this._appendField(p,h.P,v),this}_appendField(p,v,F){if(this._fields.has(p))return void(0,f.vA)(!1,`${p} already added to vertex buffer layout`);const z=v.ElementCount*(0,d.GJ)(v.ElementType),tt=this._stride;this._stride+=z,this._fields.set(p,{size:z,constructor:v,offset:tt,optional:F})}createBuffer(p){return new D(this,p)}createView(p){return new D(this,p)}clone(){const p=new T;return p._stride=this._stride,p._fields=new Map,this._fields.forEach((v,F)=>p._fields.set(F,v)),p.BufferType=this.BufferType,p}get stride(){if(this._lastAligned!==this._fields.size){let p=1;this._fields.forEach(v=>p=Math.max(p,(0,d.GJ)(v.constructor.ElementType))),this._stride=Math.floor((this._stride+p-1)/p)*p,this._lastAligned=this._fields.size}return this._stride}get fields(){return this._fields}}function I(){return new T}class P{constructor(p){this.fields=new Array,p.fields.forEach((v,F)=>{const z={...v,constructor:O(v.constructor)};this.fields.push([F,z])}),this.stride=p.stride}}const R=[h.Y$,h.gH,h.xs,h.Eq,h.jZ,h.Sx,h.qB,h.si,h.Xm,h.Aj,h.j0,h.E$,h.SL,h.LC,h.eI,h.XP,h.h,h.Yi,h.nS,h.Uz,h.P,h.An,h.H$,h.ml,h.bf,h.D6,h.m8,h.TX,h.Qt,h.mJ,h.Vp,h.E7,h.My,h.UL,h.zD,h.Y4];function O(X){return`${X.ElementType}_${X.ElementCount}`}const b=new Map;R.forEach(X=>b.set(O(X),X))},45321:(lt,N,_)=>{_.d(N,{b:()=>O});var h=_(8189),d=_(98877),f=_(85211),P=(_(3248),_(35150),_(40707),_(76576));let R=class extends d.A{constructor(){super(...arguments),this.SCENEVIEW_HITTEST_RETURN_INTERSECTOR=!1,this.DECONFLICTOR_SHOW_VISIBLE=!1,this.DECONFLICTOR_SHOW_INVISIBLE=!1,this.DECONFLICTOR_SHOW_GRID=!1,this.LABELS_SHOW_BORDER=!1,this.TEXT_SHOW_BASELINE=!1,this.TEXT_SHOW_BORDER=!1,this.OVERLAY_DRAW_DEBUG_TEXTURE=!1,this.OVERLAY_SHOW_CENTER=!1,this.SHOW_POI=!1,this.TESTS_DISABLE_OPTIMIZATIONS=!1,this.TESTS_DISABLE_FAST_UPDATES=!1,this.DRAW_MESH_GEOMETRY_NORMALS=!1,this.FEATURE_TILE_FETCH_SHOW_TILES=!1,this.FEATURE_TILE_TREE_SHOW_TILES=!1,this.TERRAIN_TILE_TREE_SHOW_TILES=!1,this.I3S_TREE_SHOW_TILES=!1,this.I3S_SHOW_MODIFICATIONS=!1,this.LOD_INSTANCE_RENDERER_DISABLE_UPDATES=!1,this.LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL=!1,this.EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES=!1,this.LINE_WIREFRAMES=!1}};(0,h._)([(0,f.MZ)()],R.prototype,"SCENEVIEW_HITTEST_RETURN_INTERSECTOR",void 0),(0,h._)([(0,f.MZ)()],R.prototype,"DECONFLICTOR_SHOW_VISIBLE",void 0),(0,h._)([(0,f.MZ)()],R.prototype,"DECONFLICTOR_SHOW_INVISIBLE",void 0),(0,h._)([(0,f.MZ)()],R.prototype,"DECONFLICTOR_SHOW_GRID",void 0),(0,h._)([(0,f.MZ)()],R.prototype,"LABELS_SHOW_BORDER",void 0),(0,h._)([(0,f.MZ)()],R.prototype,"TEXT_SHOW_BASELINE",void 0),(0,h._)([(0,f.MZ)()],R.prototype,"TEXT_SHOW_BORDER",void 0),(0,h._)([(0,f.MZ)()],R.prototype,"OVERLAY_DRAW_DEBUG_TEXTURE",void 0),(0,h._)([(0,f.MZ)()],R.prototype,"OVERLAY_SHOW_CENTER",void 0),(0,h._)([(0,f.MZ)()],R.prototype,"SHOW_POI",void 0),(0,h._)([(0,f.MZ)()],R.prototype,"TESTS_DISABLE_OPTIMIZATIONS",void 0),(0,h._)([(0,f.MZ)()],R.prototype,"TESTS_DISABLE_FAST_UPDATES",void 0),(0,h._)([(0,f.MZ)()],R.prototype,"DRAW_MESH_GEOMETRY_NORMALS",void 0),(0,h._)([(0,f.MZ)()],R.prototype,"FEATURE_TILE_FETCH_SHOW_TILES",void 0),(0,h._)([(0,f.MZ)()],R.prototype,"FEATURE_TILE_TREE_SHOW_TILES",void 0),(0,h._)([(0,f.MZ)()],R.prototype,"TERRAIN_TILE_TREE_SHOW_TILES",void 0),(0,h._)([(0,f.MZ)()],R.prototype,"I3S_TREE_SHOW_TILES",void 0),(0,h._)([(0,f.MZ)()],R.prototype,"I3S_SHOW_MODIFICATIONS",void 0),(0,h._)([(0,f.MZ)()],R.prototype,"LOD_INSTANCE_RENDERER_DISABLE_UPDATES",void 0),(0,h._)([(0,f.MZ)()],R.prototype,"LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL",void 0),(0,h._)([(0,f.MZ)()],R.prototype,"EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES",void 0),(0,h._)([(0,f.MZ)()],R.prototype,"LINE_WIREFRAMES",void 0),R=(0,h._)([(0,P.$)("esri.views.3d.support.debugFlags")],R);const O=new R},18238:(lt,N,_)=>{_.d(N,{i$:()=>P,oD:()=>R,xJ:()=>I});var h=_(74567),d=_(83224),f=_(94804),D=_(24493);function T(O){O.varyings.add("linearDepth","float")}function I(O){O.vertex.uniforms.add(new f.E("nearFar",y=>y.camera.nearFar))}function P(O){O.vertex.code.add(D.H`float calculateLinearDepth(vec2 nearFar,float z) {
return (-z - nearFar[0]) / (nearFar[1] - nearFar[0]);
}`)}function R(O,y){const{vertex:b}=O;switch(y.output){case h.V.Color:case h.V.ColorEmission:if(y.receiveShadows)return T(O),void b.code.add(D.H`void forwardLinearDepth() { linearDepth = gl_Position.w; }`);break;case h.V.Shadow:case h.V.ShadowHighlight:case h.V.ShadowExcludeHighlight:case h.V.ViewshedShadow:return O.include(d.em,y),T(O),I(O),P(O),void b.code.add(D.H`void forwardLinearDepth() {
linearDepth = calculateLinearDepth(nearFar, vPosition_view.z);
}`)}b.code.add(D.H`void forwardLinearDepth() {}`)}},57524:(lt,N,_)=>{_.d(N,{y:()=>d});var h=_(24493);function d(f){const{fragment:D}=f;D.code.add(h.H`uint readChannelBits(uint channel, int highlightLevel) {
int llc = (highlightLevel & 3) << 1;
return (channel >> llc) & 3u;
}
uint readChannel(vec2 texel, int highlightLevel) {
int lic = (highlightLevel >> 2) & 1;
return uint(texel[lic] * 255.0);
}
uint readLevelBits(vec2 texel, int highlightLevel) {
return readChannelBits(readChannel(texel, highlightLevel), highlightLevel);
}`)}},65152:(lt,N,_)=>{_.d(N,{c:()=>f});var h=_(24493),d=_(40972);function f(D,T=!0){D.attributes.add(d.r.POSITION,"vec2"),T&&D.varyings.add("uv","vec2"),D.vertex.main.add(h.H`
      gl_Position = vec4(position, 0.0, 1.0);
      ${T?h.H`uv = position * 0.5 + vec2(0.5);`:""}
  `)}},74567:(lt,N,_)=>{var h,W;function d(W){return W===h.Shadow||W===h.ShadowHighlight||W===h.ShadowExcludeHighlight||W===h.ViewshedShadow}function f(W){return function F(W){return p(W)||tt(W)}(W)||W===h.Normal}function D(W){return z(W)||W===h.Normal}function T(W){return W===h.Highlight||W===h.ObjectAndLayerIdColor}function I(W){return P(W)||T(W)}function P(W){return W===h.Color}function R(W){return P(W)||et(W)}function O(W){return P(W)||W===h.ObjectAndLayerIdColor}function y(W){return R(W)||W===h.ObjectAndLayerIdColor}function X(W){return function b(W){return P(W)||W===h.Highlight}(W)||tt(W)}function p(W){return P(W)||T(W)}function v(W){return R(W)||T(W)}function z(W){return v(W)||tt(W)}function tt(W){return W===h.Depth}function et(W){return W===h.ColorEmission}_.d(N,{CL:()=>T,LG:()=>et,Mb:()=>v,PJ:()=>d,QG:()=>y,RN:()=>R,T2:()=>z,V:()=>h,XY:()=>f,_o:()=>P,aD:()=>X,dX:()=>p,eh:()=>tt,i3:()=>I,iq:()=>D,zW:()=>O}),(W=h||(h={}))[W.Color=0]="Color",W[W.ColorEmission=1]="ColorEmission",W[W.Depth=2]="Depth",W[W.Normal=3]="Normal",W[W.Shadow=4]="Shadow",W[W.ShadowHighlight=5]="ShadowHighlight",W[W.ShadowExcludeHighlight=6]="ShadowExcludeHighlight",W[W.ViewshedShadow=7]="ViewshedShadow",W[W.Highlight=8]="Highlight",W[W.ObjectAndLayerIdColor=9]="ObjectAndLayerIdColor",W[W.COUNT=10]="COUNT"},29359:(lt,N,_)=>{_.d(N,{HQ:()=>b,rA:()=>X});var h=_(92771),d=_(62789),f=_(28714),D=_(25866),T=_(41030),P=(_(88791),_(24493));function b(U,Y){!function F(U,Y,...V){v(U,Y,...V),U.code.add(Y.hasSlicePlane?"\n    void discardBySlice(vec3 pos) {\n      if (sliceByPlane(pos)) {\n        discard;\n      }\n    }\n\n    vec4 applySliceOutline(vec4 color, vec3 pos) {\n      SliceFactors factors = calculateSliceFactors(pos);\n\n      factors.front /= 2.0 * fwidth(factors.front);\n      factors.side0 /= 2.0 * fwidth(factors.side0);\n      factors.side1 /= 2.0 * fwidth(factors.side1);\n      factors.side2 /= 2.0 * fwidth(factors.side2);\n      factors.side3 /= 2.0 * fwidth(factors.side3);\n\n      // return after calling fwidth, to avoid aliasing caused by discontinuities in the input to fwidth\n      if (sliceByFactors(factors)) {\n        return color;\n      }\n\n      float outlineFactor = (1.0 - step(0.5, factors.front))\n        * (1.0 - step(0.5, factors.side0))\n        * (1.0 - step(0.5, factors.side1))\n        * (1.0 - step(0.5, factors.side2))\n        * (1.0 - step(0.5, factors.side3));\n\n      return mix(color, vec4(vec3(0.0), color.a), outlineFactor * 0.3);\n    }\n\n    vec4 applySlice(vec4 color, vec3 pos) {\n      return sliceEnabled() ? applySliceOutline(color, pos) : color;\n    }\n  ":P.H`void discardBySlice(vec3 pos) { }
vec4 applySlice(vec4 color, vec3 pos) { return color; }`)}(U,Y,new T.W("slicePlaneOrigin",(V,A)=>W(Y,V,A)),new T.W("slicePlaneBasis1",(V,A)=>G(Y,V,A,A.slicePlane?.basis1)),new T.W("slicePlaneBasis2",(V,A)=>G(Y,V,A,A.slicePlane?.basis2)))}function X(U,Y){v(U,Y,new T.W("slicePlaneOrigin",(V,A)=>W(Y,V,A)),new T.W("slicePlaneBasis1",(V,A)=>G(Y,V,A,A.slicePlane?.basis1)),new T.W("slicePlaneBasis2",(V,A)=>G(Y,V,A,A.slicePlane?.basis2)))}_(70938);const p=P.H`struct SliceFactors {
float front;
float side0;
float side1;
float side2;
float side3;
};
SliceFactors calculateSliceFactors(vec3 pos) {
vec3 rel = pos - slicePlaneOrigin;
vec3 slicePlaneNormal = -cross(slicePlaneBasis1, slicePlaneBasis2);
float slicePlaneW = -dot(slicePlaneNormal, slicePlaneOrigin);
float basis1Len2 = dot(slicePlaneBasis1, slicePlaneBasis1);
float basis2Len2 = dot(slicePlaneBasis2, slicePlaneBasis2);
float basis1Dot = dot(slicePlaneBasis1, rel);
float basis2Dot = dot(slicePlaneBasis2, rel);
return SliceFactors(
dot(slicePlaneNormal, pos) + slicePlaneW,
-basis1Dot - basis1Len2,
basis1Dot - basis1Len2,
-basis2Dot - basis2Len2,
basis2Dot - basis2Len2
);
}
bool sliceByFactors(SliceFactors factors) {
return factors.front < 0.0
&& factors.side0 < 0.0
&& factors.side1 < 0.0
&& factors.side2 < 0.0
&& factors.side3 < 0.0;
}
bool sliceEnabled() {
return dot(slicePlaneBasis1, slicePlaneBasis1) != 0.0;
}
bool sliceByPlane(vec3 pos) {
return sliceEnabled() && sliceByFactors(calculateSliceFactors(pos));
}
bool rejectBySlice(vec3 pos) {
return sliceByPlane(pos);
}`;function v(U,Y,...V){Y.hasSlicePlane?(U.uniforms.add(...V),U.code.add(p)):U.code.add("bool rejectBySlice(vec3 pos) { return false; }")}function z(U,Y,V){return U.instancedDoublePrecision?(0,f.i)(H,V.camera.viewInverseTransposeMatrix[3],V.camera.viewInverseTransposeMatrix[7],V.camera.viewInverseTransposeMatrix[11]):Y.slicePlaneLocalOrigin}function tt(U,Y){return null!=U?(0,f.d)(L,Y.origin,U):Y.origin}function et(U,Y,V){return U.hasSliceTranslatedView?null!=Y?(0,h.Tl)(S,V.camera.viewMatrix,Y):V.camera.viewMatrix:null}function W(U,Y,V){if(null==V.slicePlane)return D.uY;const A=z(U,Y,V),w=tt(A,V.slicePlane),B=et(U,A,V);return null!=B?(0,f.t)(L,w,B):w}function G(U,Y,V,A){if(null==A||null==V.slicePlane)return D.uY;const w=z(U,Y,V),B=tt(w,V.slicePlane),Z=et(U,w,V);return null!=Z?((0,f.g)(C,A,B),(0,f.t)(L,B,Z),(0,f.t)(C,C,Z),(0,f.d)(C,C,L)):A}const H=(0,D.vt)(),L=(0,D.vt)(),C=(0,D.vt)(),S=(0,d.vt)()},93877:(lt,N,_)=>{_.d(N,{d:()=>f});var h=_(18238),d=_(24493);function f(D){(0,h.i$)(D),D.vertex.code.add(d.H`vec4 transformPositionWithDepth(mat4 proj, mat4 view, vec3 pos, vec2 nearFar, out float depth) {
vec4 eye = view * vec4(pos, 1.0);
depth = calculateLinearDepth(nearFar,eye.z);
return proj * eye;
}`),D.vertex.code.add(d.H`vec4 transformPosition(mat4 proj, mat4 view, vec3 pos) {
return proj * (view * vec4(pos, 1.0));
}`)}},70094:(lt,N,_)=>{_.d(N,{g:()=>D});var h=_(74567),d=_(24493),f=_(40972);function D(T,I){if(I.output!==h.V.ObjectAndLayerIdColor)return T.vertex.code.add(d.H`void forwardObjectAndLayerIdColor() {}`),void T.fragment.code.add(d.H`void outputObjectAndLayerIdColor() {}`);const P=I.objectAndLayerIdColorInstanced;T.varyings.add("objectAndLayerIdColorVarying","vec4"),T.attributes.add(P?f.r.INSTANCEOBJECTANDLAYERIDCOLOR:f.r.OBJECTANDLAYERIDCOLOR,"vec4"),T.vertex.code.add(d.H`
    void forwardObjectAndLayerIdColor() {
      objectAndLayerIdColorVarying = ${P?"instanceObjectAndLayerIdColor":"objectAndLayerIdColor"} * 0.003921568627451;
    }`),T.fragment.code.add(d.H`void outputObjectAndLayerIdColor() {
fragColor = objectAndLayerIdColorVarying;
}`)}},79052:(lt,N,_)=>{_.d(N,{I:()=>f});var h=_(24493),d=_(40972);function f(D){D.attributes.add(d.r.POSITION,"vec3"),D.vertex.code.add(h.H`vec3 positionModel() { return position; }`)}},66874:(lt,N,_)=>{_.d(N,{I:()=>D,U:()=>T});var D,I,h=_(69690),d=_(24493),f=_(40972);function T(I,P){switch(P.textureCoordinateType){case D.Default:return I.attributes.add(f.r.UV0,"vec2"),I.varyings.add("vuv0","vec2"),void I.vertex.code.add(d.H`void forwardTextureCoordinates() {
vuv0 = uv0;
}`);case D.Compressed:return I.attributes.add(f.r.UV0,"vec2"),I.varyings.add("vuv0","vec2"),void I.vertex.code.add(d.H`vec2 getUV0() {
return uv0 / 16384.0;
}
void forwardTextureCoordinates() {
vuv0 = getUV0();
}`);case D.Atlas:return I.attributes.add(f.r.UV0,"vec2"),I.varyings.add("vuv0","vec2"),I.attributes.add(f.r.UVREGION,"vec4"),I.varyings.add("vuvRegion","vec4"),void I.vertex.code.add(d.H`void forwardTextureCoordinates() {
vuv0 = uv0;
vuvRegion = uvRegion;
}`);default:(0,h.Xb)(P.textureCoordinateType);case D.None:return void I.vertex.code.add(d.H`void forwardTextureCoordinates() {}`);case D.COUNT:return}}(I=D||(D={}))[I.None=0]="None",I[I.Default=1]="Default",I[I.Atlas=2]="Atlas",I[I.Compressed=3]="Compressed",I[I.COUNT=4]="COUNT"},23388:(lt,N,_)=>{_.d(N,{c:()=>f});var h=_(24493),d=_(40972);function f(D,T){T.hasVertexColors?(D.attributes.add(d.r.COLOR,"vec4"),D.varyings.add("vColor","vec4"),D.vertex.code.add(h.H`void forwardVertexColor() { vColor = color; }`),D.vertex.code.add(h.H`void forwardNormalizedVertexColor() { vColor = color * 0.003921568627451; }`)):D.vertex.code.add(h.H`void forwardVertexColor() {}
void forwardNormalizedVertexColor() {}`)}},83224:(lt,N,_)=>{_.d(N,{EM:()=>F,dO:()=>v,em:()=>p});var h=_(32954),d=_(62789),f=_(25866),D=_(79052),T=_(28825),I=_(41030),P=_(88791),R=_(24493),O=_(14705),y=_(33724),b=_(57887),X=_(70938);function p(z,tt){z.include(D.I);const et=z.vertex;et.include(T.u,tt),z.varyings.add("vPositionWorldCameraRelative","vec3"),z.varyings.add("vPosition_view","vec3"),et.uniforms.add(new P.t("transformWorldFromViewTH",W=>W.transformWorldFromViewTH),new P.t("transformWorldFromViewTL",W=>W.transformWorldFromViewTL),new y.k("transformViewFromCameraRelativeRS",W=>W.transformViewFromCameraRelativeRS),new b.X("transformProjFromView",W=>W.transformProjFromView),new O.h("transformWorldFromModelRS",W=>W.transformWorldFromModelRS),new I.W("transformWorldFromModelTH",W=>W.transformWorldFromModelTH),new I.W("transformWorldFromModelTL",W=>W.transformWorldFromModelTL)),et.code.add(R.H`vec3 positionWorldCameraRelative() {
vec3 rotatedModelPosition = transformWorldFromModelRS * positionModel();
vec3 transform_CameraRelativeFromModel = dpAdd(
transformWorldFromModelTL,
transformWorldFromModelTH,
-transformWorldFromViewTL,
-transformWorldFromViewTH
);
return transform_CameraRelativeFromModel + rotatedModelPosition;
}`),et.code.add(R.H`
    void forwardPosition(float fOffset) {
      vPositionWorldCameraRelative = positionWorldCameraRelative();
      if (fOffset != 0.0) {
        vPositionWorldCameraRelative += fOffset * ${tt.spherical?R.H`normalize(transformWorldFromViewTL + vPositionWorldCameraRelative)`:R.H`vec3(0.0, 0.0, 1.0)`};
      }

      vPosition_view = transformViewFromCameraRelativeRS * vPositionWorldCameraRelative;
      gl_Position = transformProjFromView * vec4(vPosition_view, 1.0);
    }
  `),z.fragment.uniforms.add(new P.t("transformWorldFromViewTL",W=>W.transformWorldFromViewTL)),et.code.add(R.H`vec3 positionWorld() {
return transformWorldFromViewTL + vPositionWorldCameraRelative;
}`),z.fragment.code.add(R.H`vec3 positionWorld() {
return transformWorldFromViewTL + vPositionWorldCameraRelative;
}`)}class v extends X.Y{constructor(){super(...arguments),this.transformWorldFromViewTH=(0,f.vt)(),this.transformWorldFromViewTL=(0,f.vt)(),this.transformViewFromCameraRelativeRS=(0,h.vt)(),this.transformProjFromView=(0,d.vt)()}}class F extends X.Y{constructor(){super(...arguments),this.transformWorldFromModelRS=(0,h.vt)(),this.transformWorldFromModelTH=(0,f.vt)(),this.transformWorldFromModelTL=(0,f.vt)()}}},10728:(lt,N,_)=>{_.d(N,{r:()=>D});var h=_(66874),d=_(24493);function f(T){T.fragment.code.add(d.H`vec4 textureAtlasLookup(sampler2D tex, vec2 textureCoordinates, vec4 atlasRegion) {
vec2 atlasScale = atlasRegion.zw - atlasRegion.xy;
vec2 uvAtlas = fract(textureCoordinates) * atlasScale + atlasRegion.xy;
float maxdUV = 0.125;
vec2 dUVdx = clamp(dFdx(textureCoordinates), -maxdUV, maxdUV) * atlasScale;
vec2 dUVdy = clamp(dFdy(textureCoordinates), -maxdUV, maxdUV) * atlasScale;
return textureGrad(tex, uvAtlas, dUVdx, dUVdy);
}`)}function D(T,I){const{textureCoordinateType:P}=I;if(P===h.I.None||P===h.I.COUNT)return;T.include(h.U,I);const R=P===h.I.Atlas;R&&T.include(f),T.fragment.code.add(d.H`
    vec4 textureLookup(sampler2D tex, vec2 uv) {
      return ${R?"textureAtlasLookup(tex, uv, vuvRegion)":"texture(tex, uv)"};
    }
  `)}},66360:(lt,N,_)=>{_.d(N,{G:()=>P,V:()=>O});var h=_(53781),d=_(89141),f=_(30475),D=_(7741),T=_(18356),I=_(24493);function P(y,b){const X=y.vertex;b.hasVerticalOffset?(O(X),b.hasScreenSizePerspective&&(y.include(f.Y6),(0,f.OH)(X),(0,D.yu)(y.vertex,b)),X.code.add(I.H`
      vec3 calculateVerticalOffset(vec3 worldPos, vec3 localOrigin) {
        float viewDistance = length((view * vec4(worldPos, 1.0)).xyz);
        ${b.spherical?I.H`vec3 worldNormal = normalize(worldPos + localOrigin);`:I.H`vec3 worldNormal = vec3(0.0, 0.0, 1.0);`}
        ${b.hasScreenSizePerspective?I.H`
            float cosAngle = dot(worldNormal, normalize(worldPos - cameraPosition));
            float verticalOffsetScreenHeight = screenSizePerspectiveScaleFloat(verticalOffset.x, abs(cosAngle), viewDistance, screenSizePerspectiveAlignment);`:I.H`
            float verticalOffsetScreenHeight = verticalOffset.x;`}
        // Screen sized offset in world space, used for example for line callouts
        float worldOffset = clamp(verticalOffsetScreenHeight * verticalOffset.y * viewDistance, verticalOffset.z, verticalOffset.w);
        return worldNormal * worldOffset;
      }

      vec3 addVerticalOffset(vec3 worldPos, vec3 localOrigin) {
        return worldPos + calculateVerticalOffset(worldPos, localOrigin);
      }
    `)):X.code.add(I.H`vec3 addVerticalOffset(vec3 worldPos, vec3 localOrigin) { return worldPos; }`)}const R=(0,d.vt)();function O(y){y.uniforms.add(new T.E("verticalOffset",(b,X)=>{const{minWorldLength:p,maxWorldLength:v,screenLength:F}=b.verticalOffset,z=Math.tan(.5*X.camera.fovY)/(.5*X.camera.fullViewport[3]);return(0,h.s)(R,F*(X.camera.pixelRatio||1),z,p,v)}))}},43167:(lt,N,_)=>{_.d(N,{NL:()=>X,ZX:()=>y});var y,p,h=_(74567),d=_(10728),f=_(41030),D=_(88791),T=_(24493),I=_(91784),P=_(35089),O=(_(19589),_(2006));function X(p,v){if(!(0,h.RN)(v.output))return;const{emissionSource:F,hasEmissiveTextureTransform:z,bindType:tt}=v,et=F===y.Texture;et&&(p.include(d.r,v),p.fragment.uniforms.add(tt===O.c.Pass?new P.N("texEmission",G=>G.textureEmissive):new I.o("texEmission",G=>G.textureEmissive)));const W=F===y.Value||et;W&&p.fragment.uniforms.add(tt===O.c.Pass?new D.t("emissionFactor",G=>G.emissiveFactor):new f.W("emissionFactor",G=>G.emissiveFactor)),p.fragment.code.add(T.H`
    vec4 getEmissions() {
      vec4 emissions = ${W?"vec4(emissionFactor, 1.0)":"vec4(0.0)"};
      ${(0,T.If)(et,`emissions *= textureLookup(texEmission, ${z?"emissiveUV":"vuv0"});\n         emissions.w = emissions.rgb == vec3(0.0) ? 0.0: emissions.w;`)}
      return emissions;
    }
  `)}(p=y||(y={}))[p.None=0]="None",p[p.Value=1]="Value",p[p.Texture=2]="Texture",p[p.COUNT=3]="COUNT"},14051:(lt,N,_)=>{_.d(N,{Q:()=>O});var h=_(57524),d=_(74567),f=_(24493),D=_(2006),T=_(64157);class I extends T.n{constructor(b,X){super(b,"ivec2",D.c.Bind,(p,v)=>p.setUniform2iv(b,X(v)))}}var P=_(75178),R=_(18679);function O(y,b){const{fragment:X}=y;b.output===d.V.Highlight?(X.uniforms.add(new R.x("depthTexture",p=>p.mainDepth),new R.x("highlightTexture",p=>p.highlightMixTexture),new P.W("highlightLevel",p=>p.highlightLevel??0),new I("highlightMixOrigin",p=>p.highlightMixOrigin)),y.outputs.add("fragHighlight","vec2",0),y.include(h.y),X.code.add(f.H`vec2 getAccumulatedHighlight() {
return texelFetch(highlightTexture, ivec2(gl_FragCoord.xy) - highlightMixOrigin, 0).rg;
}
void outputHighlight(bool occluded) {
if (highlightLevel == 0) {
uint bits = occluded ? 3u : 1u;
fragHighlight = vec2(float(bits) / 255.0, 0.0);
} else {
int ll = (highlightLevel & 3) << 1;
int li = (highlightLevel >> 2) & 3;
uint bits;
if (occluded) {
bits = 3u << ll;
} else {
bits = 1u << ll;
}
vec2 combinedHighlight = getAccumulatedHighlight();
uint accumulatedI = uint(combinedHighlight[li] * 255.0);
combinedHighlight[li] = float(bits | accumulatedI) / 255.0;
fragHighlight = combinedHighlight;
}
}
bool isHighlightOccluded() {
float sceneDepth = texelFetch(depthTexture, ivec2(gl_FragCoord.xy), 0).x;
return gl_FragCoord.z > sceneDepth + 5e-7;
}
void calculateOcclusionAndOutputHighlight() {
outputHighlight(isHighlightOccluded());
}`),b.canHaveOverlay&&X.code.add(f.H`void calculateOcclusionAndOutputHighlightOverlay(vec2 highlightToAdd) {
uint levelBits = readLevelBits(highlightToAdd, highlightLevel);
if ((levelBits & 1u) == 0u) { discard; }
outputHighlight(isHighlightOccluded());
}`)):X.code.add(f.H`void calculateOcclusionAndOutputHighlight() {}`)}},85340:(lt,N,_)=>{_.d(N,{E:()=>T});var h=_(83953),d=_(45475),f=_(94804),D=_(24493);function T(R){R.uniforms.add(new f.E("zProjectionMap",O=>function I(R){const O=R.projectionMatrix;return(0,h.hZ)(P,O[14],O[10])}(O.camera))),R.code.add(D.H`float linearizeDepth(float depth) {
float depthNdc = depth * 2.0 - 1.0;
float c1 = zProjectionMap[0];
float c2 = zProjectionMap[1];
return -(c1 / (depthNdc + c2 + 1e-7));
}`),R.code.add(D.H`float depthFromTexture(sampler2D depthTexture, vec2 uv) {
ivec2 iuv = ivec2(uv * vec2(textureSize(depthTexture, 0)));
float depth = texelFetch(depthTexture, iuv, 0).r;
return depth;
}`),R.code.add(D.H`float linearDepthFromTexture(sampler2D depthTexture, vec2 uv) {
return linearizeDepth(depthFromTexture(depthTexture, uv));
}`)}const P=(0,d.vt)()},44987:(lt,N,_)=>{_.d(N,{Gc:()=>f,O4:()=>D,Vt:()=>T});var h=_(58021),d=_(24493);function f(I){I.uniforms.add(new h.d("mainLightDirection",P=>P.lighting.mainLight.direction))}function D(I){I.uniforms.add(new h.d("mainLightIntensity",P=>P.lighting.mainLight.intensity))}function T(I){f(I.fragment),D(I.fragment),I.fragment.code.add(d.H`vec3 applyShading(vec3 shadingNormalWorld, float shadow) {
float dotVal = clamp(dot(shadingNormalWorld, mainLightDirection), 0.0, 1.0);
return mainLightIntensity * ((1.0 - shadow) * dotVal);
}`)}},87522:(lt,N,_)=>{_.d(N,{c:()=>T,f:()=>I});var h=_(24493);function d(P){const R=P.fragment.code;R.add(h.H`vec3 evaluateDiffuseIlluminationHemisphere(vec3 ambientGround, vec3 ambientSky, float NdotNG)
{
return ((1.0 - NdotNG) * ambientGround + (1.0 + NdotNG) * ambientSky) * 0.5;
}`),R.add(h.H`float integratedRadiance(float cosTheta2, float roughness)
{
return (cosTheta2 - 1.0) / (cosTheta2 * (1.0 - roughness * roughness) - 1.0);
}`),R.add(h.H`vec3 evaluateSpecularIlluminationHemisphere(vec3 ambientGround, vec3 ambientSky, float RdotNG, float roughness)
{
float cosTheta2 = 1.0 - RdotNG * RdotNG;
float intRadTheta = integratedRadiance(cosTheta2, roughness);
float ground = RdotNG < 0.0 ? 1.0 - intRadTheta : 1.0 + intRadTheta;
float sky = 2.0 - ground;
return (ground * ambientGround + sky * ambientSky) * 0.5;
}`)}var f=_(9933),D=_(64570);function T(P,R){const O=P.fragment.code;P.include(D.p),R.pbrMode!==f.A9.Normal&&R.pbrMode!==f.A9.Schematic&&R.pbrMode!==f.A9.Simplified&&R.pbrMode!==f.A9.TerrainWithWater||(O.add(h.H`float normalDistribution(float NdotH, float roughness)
{
float a = NdotH * roughness;
float b = roughness / (1.0 - NdotH * NdotH + a * a);
return b * b * INV_PI;
}`),O.add(h.H`const vec4 c0 = vec4(-1.0, -0.0275, -0.572,  0.022);
const vec4 c1 = vec4( 1.0,  0.0425,  1.040, -0.040);
const vec2 c2 = vec2(-1.04, 1.04);
vec2 prefilteredDFGAnalytical(float roughness, float NdotV) {
vec4 r = roughness * c0 + c1;
float a004 = min(r.x * r.x, exp2(-9.28 * NdotV)) * r.x + r.y;
return c2 * a004 + r.zw;
}`)),R.pbrMode!==f.A9.Normal&&R.pbrMode!==f.A9.Schematic||(P.include(d),O.add(h.H`struct PBRShadingInfo
{
float NdotV;
float LdotH;
float NdotNG;
float RdotNG;
float NdotAmbDir;
float NdotH_Horizon;
vec3 skyRadianceToSurface;
vec3 groundRadianceToSurface;
vec3 skyIrradianceToSurface;
vec3 groundIrradianceToSurface;
float averageAmbientRadiance;
float ssao;
vec3 albedoLinear;
vec3 f0;
vec3 f90;
vec3 diffuseColor;
float metalness;
float roughness;
};`),O.add(h.H`vec3 evaluateEnvironmentIllumination(PBRShadingInfo inputs) {
vec3 indirectDiffuse = evaluateDiffuseIlluminationHemisphere(inputs.groundIrradianceToSurface, inputs.skyIrradianceToSurface, inputs.NdotNG);
vec3 indirectSpecular = evaluateSpecularIlluminationHemisphere(inputs.groundRadianceToSurface, inputs.skyRadianceToSurface, inputs.RdotNG, inputs.roughness);
vec3 diffuseComponent = inputs.diffuseColor * indirectDiffuse * INV_PI;
vec2 dfg = prefilteredDFGAnalytical(inputs.roughness, inputs.NdotV);
vec3 specularColor = inputs.f0 * dfg.x + inputs.f90 * dfg.y;
vec3 specularComponent = specularColor * indirectSpecular;
return (diffuseComponent + specularComponent);
}`),O.add(h.H`float gamutMapChanel(float x, vec2 p){
return (x < p.x) ? mix(0.0, p.y, x/p.x) : mix(p.y, 1.0, (x - p.x) / (1.0 - p.x) );
}`),O.add(h.H`vec3 blackLevelSoftCompression(vec3 inColor, PBRShadingInfo inputs){
vec3 outColor;
vec2 p = vec2(0.02 * (inputs.averageAmbientRadiance), 0.0075 * (inputs.averageAmbientRadiance));
outColor.x = gamutMapChanel(inColor.x, p) ;
outColor.y = gamutMapChanel(inColor.y, p) ;
outColor.z = gamutMapChanel(inColor.z, p) ;
return outColor;
}`))}function I(P,R){const O=P.fragment.code;P.include(D.p),O.add(h.H`
  struct PBRShadingWater
  {
      float NdotL;   // cos angle between normal and light direction
      float NdotV;   // cos angle between normal and view direction
      float NdotH;   // cos angle between normal and half vector
      float VdotH;   // cos angle between view direction and half vector
      float LdotH;   // cos angle between light direction and half vector
      float VdotN;   // cos angle between view direction and normal vector
  };

  float dtrExponent = ${R.useCustomDTRExponentForWater?"2.2":"2.0"};
  `),O.add(h.H`vec3 fresnelReflection(float angle, vec3 f0, float f90) {
return f0 + (f90 - f0) * pow(1.0 - angle, 5.0);
}`),O.add(h.H`float normalDistributionWater(float NdotH, float roughness)
{
float r2 = roughness * roughness;
float NdotH2 = NdotH * NdotH;
float denom = pow((NdotH2 * (r2 - 1.0) + 1.0), dtrExponent) * PI;
return r2 / denom;
}`),O.add(h.H`float geometricOcclusionKelemen(float LoH)
{
return 0.25 / (LoH * LoH);
}`),O.add(h.H`vec3 brdfSpecularWater(in PBRShadingWater props, float roughness, vec3 F0, float F0Max)
{
vec3  F = fresnelReflection(props.VdotH, F0, F0Max);
float dSun = normalDistributionWater(props.NdotH, roughness);
float V = geometricOcclusionKelemen(props.LdotH);
float diffusionSunHaze = mix(roughness + 0.045, roughness + 0.385, 1.0 - props.VdotH);
float strengthSunHaze  = 1.2;
float dSunHaze = normalDistributionWater(props.NdotH, diffusionSunHaze) * strengthSunHaze;
return ((dSun + dSunHaze) * V) * F;
}`)}},9933:(lt,N,_)=>{_.d(N,{A9:()=>y,_Z:()=>X});var y,p,h=_(10728),d=_(41030),f=_(88791),D=_(24493),T=_(91784),I=_(35089),O=(_(19589),_(30906),_(2006));function X(p,v){const F=v.pbrMode,z=p.fragment;if(F!==y.Schematic&&F!==y.Disabled&&F!==y.Normal)return void z.code.add(D.H`void applyPBRFactors() {}`);if(F===y.Disabled)return void z.code.add(D.H`void applyPBRFactors() {}
float getBakedOcclusion() { return 1.0; }`);if(F===y.Schematic)return void z.code.add(D.H`vec3 mrr = vec3(0.0, 0.6, 0.2);
float occlusion = 1.0;
void applyPBRFactors() {}
float getBakedOcclusion() { return 1.0; }`);const{hasMetallicRoughnessTexture:tt,hasMetallicRoughnessTextureTransform:et,hasOcclusionTexture:W,hasOcclusionTextureTransform:G,bindType:H}=v;(tt||W)&&p.include(h.r,v),z.code.add(D.H`vec3 mrr;
float occlusion;`),tt&&z.uniforms.add(H===O.c.Pass?new I.N("texMetallicRoughness",L=>L.textureMetallicRoughness):new T.o("texMetallicRoughness",L=>L.textureMetallicRoughness)),W&&z.uniforms.add(H===O.c.Pass?new I.N("texOcclusion",L=>L.textureOcclusion):new T.o("texOcclusion",L=>L.textureOcclusion)),z.uniforms.add(H===O.c.Pass?new f.t("mrrFactors",L=>L.mrrFactors):new d.W("mrrFactors",L=>L.mrrFactors)),z.code.add(D.H`
    ${(0,D.If)(tt,D.H`void applyMetallicRoughness(vec2 uv) {
            vec3 metallicRoughness = textureLookup(texMetallicRoughness, uv).rgb;
            mrr[0] *= metallicRoughness.b;
            mrr[1] *= metallicRoughness.g;
          }`)}

    ${(0,D.If)(W,"void applyOcclusion(vec2 uv) { occlusion *= textureLookup(texOcclusion, uv).r; }")}

    float getBakedOcclusion() {
      return ${W?"occlusion":"1.0"};
    }

    void applyPBRFactors() {
      mrr = mrrFactors;
      occlusion = 1.0;

      ${(0,D.If)(tt,`applyMetallicRoughness(${et?"metallicRoughnessUV":"vuv0"});`)}
      ${(0,D.If)(W,`applyOcclusion(${G?"occlusionUV":"vuv0"});`)}
    }
  `)}(p=y||(y={}))[p.Disabled=0]="Disabled",p[p.Normal=1]="Normal",p[p.Schematic=2]="Schematic",p[p.Water=3]="Water",p[p.WaterOnIntegratedMesh=4]="WaterOnIntegratedMesh",p[p.Simplified=5]="Simplified",p[p.TerrainWithWater=6]="TerrainWithWater",p[p.COUNT=7]="COUNT"},64570:(lt,N,_)=>{function h(d){const f=3.141592653589793,D=.3183098861837907;d.vertex.constants.add("PI","float",f),d.fragment.constants.add("PI","float",f),d.fragment.constants.add("LIGHT_NORMALIZATION","float",D),d.fragment.constants.add("INV_PI","float",D),d.fragment.constants.add("HALF_PI","float",1.570796326794897),d.fragment.constants.add("TWO_PI","float",6.28318530717958)}_.d(N,{p:()=>h})},86679:(lt,N,_)=>{_.d(N,{O:()=>h,b:()=>d});const h=3e5,d=5e5},51734:(lt,N,_)=>{_.d(N,{Z:()=>D});var h=_(85340),d=_(24493),f=_(18679);function D(T,{occlusionPass:I,terrainDepthTest:P,cullAboveTerrain:R}){const O=T.vertex,y=T.fragment;if(!P)return O.code.add("void forwardViewPosDepth(vec3 pos) {}"),void y.code.add(`${I?"bool":"void"} discardByTerrainDepth() { ${(0,d.If)(I,"return false;")}}`);T.varyings.add("viewPosDepth","float"),O.code.add("void forwardViewPosDepth(vec3 pos) {\n    viewPosDepth = pos.z;\n  }"),y.include(h.E),y.uniforms.add(new f.x("terrainDepthTexture",b=>b.terrainDepth?.attachment)).code.add(d.H`
    ${I?"bool":"void"} discardByTerrainDepth() {
      float depth = texelFetch(terrainDepthTexture, ivec2(gl_FragCoord.xy), 0).r;
      float linearDepth = linearizeDepth(depth);
      ${I?"return viewPosDepth < linearDepth && depth < 1.0;":`if(viewPosDepth ${R?">":"<="} linearDepth) discard;`}
    }`)}},33605:(lt,N,_)=>{_.d(N,{A:()=>R});var h=_(88791),d=_(91187),f=_(60631),D=_(24493),T=_(33724),I=_(40972),P=_(59642);function R(O,y){const{vertex:b,attributes:X}=O;y.hasVvInstancing&&(y.vvSize||y.vvColor)&&X.add(I.r.INSTANCEFEATUREATTRIBUTE,"vec4"),y.vvSize?(b.uniforms.add(new h.t("vvSizeMinSize",p=>p.vvSize.minSize)),b.uniforms.add(new h.t("vvSizeMaxSize",p=>p.vvSize.maxSize)),b.uniforms.add(new h.t("vvSizeOffset",p=>p.vvSize.offset)),b.uniforms.add(new h.t("vvSizeFactor",p=>p.vvSize.factor)),b.uniforms.add(new T.k("vvSymbolRotationMatrix",p=>p.vvSymbolRotationMatrix)),b.uniforms.add(new h.t("vvSymbolAnchor",p=>p.vvSymbolAnchor)),b.code.add(D.H`vec3 vvScale(vec4 _featureAttribute) {
return clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize);
}
vec4 vvTransformPosition(vec3 position, vec4 _featureAttribute) {
return vec4(vvSymbolRotationMatrix * ( vvScale(_featureAttribute) * (position + vvSymbolAnchor)), 1.0);
}`),b.code.add(D.H`
      const float eps = 1.192092896e-07;
      vec4 vvTransformNormal(vec3 _normal, vec4 _featureAttribute) {
        vec3 vvScale = clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize + eps, vvSizeMaxSize);
        return vec4(vvSymbolRotationMatrix * _normal / vvScale, 1.0);
      }

      ${y.hasVvInstancing?D.H`
      vec4 vvLocalNormal(vec3 _normal) {
        return vvTransformNormal(_normal, instanceFeatureAttribute);
      }

      vec4 localPosition() {
        return vvTransformPosition(position, instanceFeatureAttribute);
      }`:""}
    `)):b.code.add(D.H`vec4 localPosition() { return vec4(position, 1.0); }
vec4 vvLocalNormal(vec3 _normal) { return vec4(_normal, 1.0); }`),y.vvColor?(b.constants.add("vvColorNumber","int",P.p),b.uniforms.add(new f.x("vvColorValues",p=>p.vvColor.values,P.p),new d.F("vvColorColors",p=>p.vvColor.colors,P.p)),b.code.add(D.H`
      vec4 interpolateVVColor(float value) {
        if (value <= vvColorValues[0]) {
          return vvColorColors[0];
        }

        for (int i = 1; i < vvColorNumber; ++i) {
          if (vvColorValues[i] >= value) {
            float f = (value - vvColorValues[i-1]) / (vvColorValues[i] - vvColorValues[i-1]);
            return mix(vvColorColors[i-1], vvColorColors[i], f);
          }
        }
        return vvColorColors[vvColorNumber - 1];
      }

      vec4 vvGetColor(vec4 featureAttribute) {
        return interpolateVVColor(featureAttribute.y);
      }

      ${y.hasVvInstancing?D.H`
            vec4 vvColor() {
              return vvGetColor(instanceFeatureAttribute);
            }`:"vec4 vvColor() { return vec4(1.0); }"}
    `)):b.code.add(D.H`vec4 vvColor() { return vec4(1.0); }`)}},8733:(lt,N,_)=>{_.d(N,{Ir:()=>R});var h=_(83953),d=_(45475),f=_(53781),D=_(89141),T=_(94804),I=_(21130),P=_(24493);function R(p){p.fragment.uniforms.add(new I.I("projInfo",v=>function O(p){const v=p.projectionMatrix;return 0===v[11]?(0,f.s)(y,2/(p.fullWidth*v[0]),2/(p.fullHeight*v[5]),(1+v[12])/v[0],(1+v[13])/v[5]):(0,f.s)(y,-2/(p.fullWidth*v[0]),-2/(p.fullHeight*v[5]),(1-v[8])/v[0],(1-v[9])/v[5])}(v.camera))),p.fragment.uniforms.add(new T.E("zScale",v=>function b(p){return 0===p.projectionMatrix[11]?(0,h.hZ)(X,0,1):(0,h.hZ)(X,1,0)}(v.camera))),p.fragment.code.add(P.H`vec3 reconstructPosition(vec2 fragCoord, float depth) {
return vec3((fragCoord * projInfo.xy + projInfo.zw) * (zScale.x * depth + zScale.y), depth);
}`)}const y=(0,D.vt)(),X=(0,d.vt)()},71781:(lt,N,_)=>{_.d(N,{a:()=>d});var h=_(24493);function d(f){f.code.add(h.H`vec4 premultiplyAlpha(vec4 v) {
return vec4(v.rgb * v.a, v.a);
}
vec3 rgb2hsv(vec3 c) {
vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);
vec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);
vec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);
float d = q.x - min(q.w, q.y);
float e = 1.0e-10;
return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), min(d / (q.x + e), 1.0), q.x);
}
vec3 hsv2rgb(vec3 c) {
vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);
vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
}
float rgb2v(vec3 c) {
return max(c.x, max(c.y, c.z));
}`)}},28825:(lt,N,_)=>{_.d(N,{u:()=>d});var h=_(24493);function d({code:f},D){f.add(D.doublePrecisionRequiresObfuscation?h.H`vec3 dpPlusFrc(vec3 a, vec3 b) {
return mix(a, a + b, vec3(notEqual(b, vec3(0))));
}
vec3 dpMinusFrc(vec3 a, vec3 b) {
return mix(vec3(0), a - b, vec3(notEqual(a, b)));
}
vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {
vec3 t1 = dpPlusFrc(hiA, hiB);
vec3 e = dpMinusFrc(t1, hiA);
vec3 t2 = dpMinusFrc(hiB, e) + dpMinusFrc(hiA, dpMinusFrc(t1, e)) + loA + loB;
return t1 + t2;
}`:h.H`vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {
vec3 t1 = hiA + hiB;
vec3 e = t1 - hiA;
vec3 t2 = ((hiB - e) + (hiA - (t1 - e))) + loA + loB;
return t1 + t2;
}`)}},30475:(lt,N,_)=>{_.d(N,{OH:()=>P,Y6:()=>T,pM:()=>I});var h=_(28714),d=_(25866),f=_(88791),D=_(24493);function T(y){y.vertex.code.add(D.H`float screenSizePerspectiveViewAngleDependentFactor(float absCosAngle) {
return absCosAngle * absCosAngle * absCosAngle;
}`),y.vertex.code.add(D.H`vec3 screenSizePerspectiveScaleFactor(float absCosAngle, float distanceToCamera, vec3 params) {
return vec3(
min(params.x / (distanceToCamera - params.y), 1.0),
screenSizePerspectiveViewAngleDependentFactor(absCosAngle),
params.z
);
}`),y.vertex.code.add(D.H`float applyScreenSizePerspectiveScaleFactorFloat(float size, vec3 factor) {
return mix(size * clamp(factor.x, factor.z, 1.0), size, factor.y);
}`),y.vertex.code.add(D.H`float screenSizePerspectiveScaleFloat(float size, float absCosAngle, float distanceToCamera, vec3 params) {
return applyScreenSizePerspectiveScaleFactorFloat(
size,
screenSizePerspectiveScaleFactor(absCosAngle, distanceToCamera, params)
);
}`),y.vertex.code.add(D.H`vec2 applyScreenSizePerspectiveScaleFactorVec2(vec2 size, vec3 factor) {
return mix(size * clamp(factor.x, factor.z, 1.0), size, factor.y);
}`),y.vertex.code.add(D.H`vec2 screenSizePerspectiveScaleVec2(vec2 size, float absCosAngle, float distanceToCamera, vec3 params) {
return applyScreenSizePerspectiveScaleFactorVec2(size, screenSizePerspectiveScaleFactor(absCosAngle, distanceToCamera, params));
}`)}function I(y){y.uniforms.add(new f.t("screenSizePerspective",b=>R(b.screenSizePerspective)))}function P(y){y.uniforms.add(new f.t("screenSizePerspectiveAlignment",b=>R(b.screenSizePerspectiveAlignment||b.screenSizePerspective)))}function R(y){return(0,h.i)(O,y.parameters.divisor,y.parameters.offset,y.minScaleFactor)}const O=(0,d.vt)()},7741:(lt,N,_)=>{_.d(N,{NB:()=>b,Nz:()=>F,S7:()=>v,yu:()=>y});var h=_(92771),d=_(62789),f=_(28714),D=_(25866),T=_(58021),I=_(41030),P=_(82374),R=_(50765),O=_(17806);function y(z,tt){tt.instancedDoublePrecision?z.constants.add("cameraPosition","vec3",D.uY):z.uniforms.add(new I.W("cameraPosition",(et,W)=>(0,f.i)(p,W.camera.viewInverseTransposeMatrix[3]-et.origin[0],W.camera.viewInverseTransposeMatrix[7]-et.origin[1],W.camera.viewInverseTransposeMatrix[11]-et.origin[2])))}function b(z,tt){if(!tt.instancedDoublePrecision)return void z.uniforms.add(new R.F("proj",W=>W.camera.projectionMatrix),new O.S("view",(W,G)=>(0,h.Tl)(X,G.camera.viewMatrix,W.origin)),new I.W("localOrigin",W=>W.origin));const et=({camera:W})=>(0,f.i)(p,W.viewInverseTransposeMatrix[3],W.viewInverseTransposeMatrix[7],W.viewInverseTransposeMatrix[11]);z.uniforms.add(new R.F("proj",W=>W.camera.projectionMatrix),new R.F("view",W=>(0,h.Tl)(X,W.camera.viewMatrix,et(W))),new T.d("localOrigin",W=>et(W)))}const X=(0,d.vt)(),p=(0,D.vt)();function v(z){z.uniforms.add(new R.F("viewNormal",tt=>tt.camera.viewInverseTransposeMatrix))}function F(z){z.uniforms.add(new P.U("pixelRatio",tt=>tt.camera.pixelRatio/tt.overlayStretch))}},81680:(lt,N,_)=>{_.d(N,{o:()=>f});var h=_(2006),d=_(64157);class f extends d.n{constructor(T,I){super(T,"bool",h.c.Bind,(P,R)=>P.setUniform1b(T,I(R)))}}},94804:(lt,N,_)=>{_.d(N,{E:()=>f});var h=_(2006),d=_(64157);class f extends d.n{constructor(T,I){super(T,"vec2",h.c.Bind,(P,R)=>P.setUniform2fv(T,I(R)))}}},15683:(lt,N,_)=>{_.d(N,{t:()=>f});var h=_(2006),d=_(64157);class f extends d.n{constructor(T,I){super(T,"vec2",h.c.Draw,(P,R,O,y)=>P.setUniform2fv(T,I(R,O,y)))}}},99286:(lt,N,_)=>{_.d(N,{G:()=>f});var h=_(2006),d=_(64157);class f extends d.n{constructor(T,I){super(T,"vec2",h.c.Pass,(P,R,O)=>P.setUniform2fv(T,I(R,O)))}}},58021:(lt,N,_)=>{_.d(N,{d:()=>f});var h=_(2006),d=_(64157);class f extends d.n{constructor(T,I){super(T,"vec3",h.c.Bind,(P,R)=>P.setUniform3fv(T,I(R)))}}},41030:(lt,N,_)=>{_.d(N,{W:()=>f});var h=_(2006),d=_(64157);class f extends d.n{constructor(T,I){super(T,"vec3",h.c.Draw,(P,R,O,y)=>P.setUniform3fv(T,I(R,O,y)))}}},88791:(lt,N,_)=>{_.d(N,{t:()=>f});var h=_(2006),d=_(64157);class f extends d.n{constructor(T,I){super(T,"vec3",h.c.Pass,(P,R,O)=>P.setUniform3fv(T,I(R,O)))}}},21130:(lt,N,_)=>{_.d(N,{I:()=>f});var h=_(2006),d=_(64157);class f extends d.n{constructor(T,I){super(T,"vec4",h.c.Bind,(P,R)=>P.setUniform4fv(T,I(R)))}}},18356:(lt,N,_)=>{_.d(N,{E:()=>f});var h=_(2006),d=_(64157);class f extends d.n{constructor(T,I){super(T,"vec4",h.c.Pass,(P,R,O)=>P.setUniform4fv(T,I(R,O)))}}},91187:(lt,N,_)=>{_.d(N,{F:()=>f});var h=_(2006),d=_(64157);class f extends d.n{constructor(T,I,P){super(T,"vec4",h.c.Pass,(R,O,y)=>R.setUniform4fv(T,I(O,y)),P)}}},82374:(lt,N,_)=>{_.d(N,{U:()=>f});var h=_(2006),d=_(64157);class f extends d.n{constructor(T,I){super(T,"float",h.c.Bind,(P,R)=>P.setUniform1f(T,I(R)))}}},65840:(lt,N,_)=>{_.d(N,{m:()=>f});var h=_(2006),d=_(64157);class f extends d.n{constructor(T,I){super(T,"float",h.c.Pass,(P,R,O)=>P.setUniform1f(T,I(R,O)))}}},60631:(lt,N,_)=>{_.d(N,{x:()=>f});var h=_(2006),d=_(64157);class f extends d.n{constructor(T,I,P){super(T,"float",h.c.Pass,(R,O,y)=>R.setUniform1fv(T,I(O,y)),P)}}},75178:(lt,N,_)=>{_.d(N,{W:()=>f});var h=_(2006),d=_(64157);class f extends d.n{constructor(T,I){super(T,"int",h.c.Bind,(P,R)=>P.setUniform1i(T,I(R)))}}},41204:(lt,N,_)=>{_.d(N,{c:()=>f});var h=_(2006),d=_(64157);class f extends d.n{constructor(T,I){super(T,"int",h.c.Pass,(P,R,O)=>P.setUniform1i(T,I(R,O)))}}},14705:(lt,N,_)=>{_.d(N,{h:()=>f});var h=_(2006),d=_(64157);class f extends d.n{constructor(T,I){super(T,"mat3",h.c.Draw,(P,R,O)=>P.setUniformMatrix3fv(T,I(R,O)))}}},33724:(lt,N,_)=>{_.d(N,{k:()=>f});var h=_(2006),d=_(64157);class f extends d.n{constructor(T,I){super(T,"mat3",h.c.Pass,(P,R,O)=>P.setUniformMatrix3fv(T,I(R,O)))}}},50765:(lt,N,_)=>{_.d(N,{F:()=>f});var h=_(2006),d=_(64157);class f extends d.n{constructor(T,I){super(T,"mat4",h.c.Bind,(P,R)=>P.setUniformMatrix4fv(T,I(R)))}}},17806:(lt,N,_)=>{_.d(N,{S:()=>f});var h=_(2006),d=_(64157);class f extends d.n{constructor(T,I){super(T,"mat4",h.c.Draw,(P,R,O)=>P.setUniformMatrix4fv(T,I(R,O)))}}},57887:(lt,N,_)=>{_.d(N,{X:()=>f});var h=_(2006),d=_(64157);class f extends d.n{constructor(T,I){super(T,"mat4",h.c.Pass,(P,R,O)=>P.setUniformMatrix4fv(T,I(R,O)))}}},18679:(lt,N,_)=>{_.d(N,{x:()=>f});var h=_(2006),d=_(64157);class f extends d.n{constructor(T,I){super(T,"sampler2D",h.c.Bind,(P,R)=>P.bindTexture(T,I(R)))}}},91784:(lt,N,_)=>{_.d(N,{o:()=>f});var h=_(2006),d=_(64157);class f extends d.n{constructor(T,I){super(T,"sampler2D",h.c.Draw,(P,R,O)=>P.bindTexture(T,I(R,O)))}}},35089:(lt,N,_)=>{_.d(N,{N:()=>f});var h=_(2006),d=_(64157);class f extends d.n{constructor(T,I){super(T,"sampler2D",h.c.Pass,(P,R,O)=>P.bindTexture(T,I(R,O)))}}},24493:(lt,N,_)=>{function h(f,...D){let T="";for(let I=0;I<D.length;I++)T+=f[I]+D[I];return T+=f[f.length-1],T}function d(f,D,T=""){return f?D:T}var f;_.d(N,{H:()=>h,If:()=>d}),(f=h).int=function D(I){return Math.round(I).toString()},f.float=function T(I){return I.toPrecision(8)}},11556:(lt,N,_)=>{_.d(N,{$:()=>d});var h=_(10467);class d{constructor(D,T){this._module=D,this._load=T}get(){return this._module}reload(){var D=this;return(0,h.A)(function*(){return D._module=yield D._load(),D._module})()}}},18110:(lt,N,_)=>{_.d(N,{w:()=>b});var h=_(10467),d=_(35150),f=_(11432),D=_(14253),T=_(12438),I=_(77440);class P{constructor(p,v,F){this._context=p,this._locations=F,this._textures=new Map,this._freeTextureUnits=new T.A({deallocator:null}),this._glProgram=p.programCache.acquire(v.generate("vertex",!0),v.generate("fragment",!0),F),this._glProgram.stop=()=>{throw new Error("Wrapped _glProgram used directly")},this.bind=v.generateBind(this),this.bindPass=v.generateBindPass(this),this.bindDraw=v.generateBindDraw(this),this._fragmentUniforms=(0,I.en)()?v.fragmentUniforms:null}dispose(){this._glProgram.dispose()}get glName(){return this._glProgram.glName}get hasTransformFeedbackVaryings(){return this._glProgram.hasTransformFeedbackVaryings}get compiled(){return this._glProgram.compiled}setUniform1b(p,v){this._glProgram.setUniform1i(p,v?1:0)}setUniform1i(p,v){this._glProgram.setUniform1i(p,v)}setUniform1f(p,v){this._glProgram.setUniform1f(p,v)}setUniform2fv(p,v){this._glProgram.setUniform2fv(p,v)}setUniform3fv(p,v){this._glProgram.setUniform3fv(p,v)}setUniform4fv(p,v){this._glProgram.setUniform4fv(p,v)}setUniformMatrix3fv(p,v){this._glProgram.setUniformMatrix3fv(p,v)}setUniformMatrix4fv(p,v){this._glProgram.setUniformMatrix4fv(p,v)}setUniform1fv(p,v){this._glProgram.setUniform1fv(p,v)}setUniform1iv(p,v){this._glProgram.setUniform1iv(p,v)}setUniform2iv(p,v){this._glProgram.setUniform2iv(p,v)}setUniform3iv(p,v){this._glProgram.setUniform3iv(p,v)}setUniform4iv(p,v){this._glProgram.setUniform4iv(p,v)}assertCompatibleVertexAttributeLocations(p){p.locations!==this._locations&&console.error("VertexAttributeLocations are incompatible")}stop(){this._textures.clear(),this._freeTextureUnits.clear()}bindTexture(p,v){if(null==v?.glName){const z=this._textures.get(p);return z&&(this._context.bindTexture(null,z.unit),this._freeTextureUnit(z),this._textures.delete(p)),null}let F=this._textures.get(p);return null==F?(F=this._allocTextureUnit(v),this._textures.set(p,F)):F.texture=v,this._context.useProgram(this),this.setUniform1i(p,F.unit),this._context.bindTexture(v,F.unit),F.unit}rebindTextures(){this._context.useProgram(this),this._textures.forEach((p,v)=>{this._context.bindTexture(p.texture,p.unit),this.setUniform1i(v,p.unit)}),this._fragmentUniforms?.forEach(p=>{"sampler2D"!==p.type&&"samplerCube"!==p.type||this._textures.has(p.name)||console.error(`Texture sampler ${p.name} has no bound texture`)})}_allocTextureUnit(p){return{texture:p,unit:0===this._freeTextureUnits.length?this._textures.size:this._freeTextureUnits.pop()}}_freeTextureUnit(p){this._freeTextureUnits.push(p.unit)}}var R=_(50915),O=_(41396);class b{constructor(p,v,F,z=D.D){var tt=this;this.locations=z,this.primitiveType=R.WR.TRIANGLES,this.key=v.key,this._program=new P(p.rctx,F.get().build(v),z),this._pipeline=this.initializePipeline(v),this.reload=function(){var et=(0,h.A)(function*(W){W&&(yield F.reload()),tt.key.equals(v.key)||d.A.getLogger("esri.views.3d.webgl.ShaderTechnique").warn("Configuration was changed after construction, cannot reload shader.",F),(0,f.WD)(tt._program),tt._program=new P(p.rctx,F.get().build(v),z),tt._pipeline=tt.initializePipeline(v)});return function(W){return et.apply(this,arguments)}}()}destroy(){this._program=(0,f.WD)(this._program),this._pipeline=null}get program(){return this._program}get compiled(){return this.program.compiled}ensureAttributeLocations(p){this.program.assertCompatibleVertexAttributeLocations(p)}getPipeline(p,v){return this._pipeline}initializePipeline(p){return(0,O.Ey)({blending:O.Os,colorWrite:O.kn})}}},55062:(lt,N,_)=>{_.d(N,{K:()=>T,W:()=>I});var h=_(5922),d=_(89952);class f{constructor(R){this._bits=[...R]}equals(R){return(0,d.aI)(this._bits,R.bits)}get code(){return this._code??=String.fromCharCode(...this._bits),this._code}get bits(){return this._bits}}var D=_(70938);class T extends D.Y{constructor(){super(),this._parameterBits=this._parameterBits?.map(()=>0)??[],this._parameterNames??=[]}get key(){return this._key??=new f(this._parameterBits),this._key}decode(R=this.key){const O=this._parameterBits;this._parameterBits=[...R.bits];const y=this._parameterNames.map(b=>`    ${b}: ${this[b]}`).join("\n");return this._parameterBits=O,y}}function I(P={}){return(R,O)=>{R.hasOwnProperty("_parameterNames")||Object.defineProperty(R,"_parameterNames",{value:R._parameterNames?.slice()??[],configurable:!0,writable:!0}),R.hasOwnProperty("_parameterBits")||Object.defineProperty(R,"_parameterBits",{value:R._parameterBits?.slice()??[0],configurable:!0,writable:!0}),R._parameterNames.push(O);const b=Math.ceil(Math.log2(P.count||2)),X=R._parameterBits;let p=0;for(;X[p]+b>16;)p++,p>=X.length&&X.push(0);const v=X[p],F=(1<<b)-1<<v;X[p]+=b,Object.defineProperty(R,O,P.count?{get(){return(this._parameterBits[p]&F)>>v},set(z){if(this[O]!==z){if(this._key=null,this._parameterBits[p]=this._parameterBits[p]&~F|+z<<v&F,"number"!=typeof z)throw new h.A(`Configuration value for ${O} must be a number, got ${typeof z}`);if(null==P.count)throw new h.A(`Configuration value for ${O} must provide a count option`)}}}:{get(){return!!((this._parameterBits[p]&F)>>v)},set(z){if(this[O]!==z&&(this._key=null,this._parameterBits[p]=this._parameterBits[p]&~F|+z<<v&F,"boolean"!=typeof z))throw new h.A(`Configuration value for ${O} must be boolean, got ${typeof z}`)}})}}},12335:(lt,N,_)=>{_.d(N,{E:()=>d});var h=_(3248);function d(){return!!(0,h.A)("enable-feature:objectAndLayerId-rendering")}},86493:(lt,N,_)=>{_.d(N,{S:()=>d});var h=_(79139);function d(f){if(f.length<h.y9)return Array.from(f);if(Array.isArray(f))return Float64Array.from(f);if(!("BYTES_PER_ELEMENT"in f))return Array.from(f);switch(f.BYTES_PER_ELEMENT){case 1:return Uint8Array.from(f);case 2:return(0,h.jq)(f)?Uint16Array.from(f):Int16Array.from(f);case 4:return Float32Array.from(f);default:return Float64Array.from(f)}}},88864:(lt,N,_)=>{_.d(N,{j:()=>T});var h=_(12438),d=_(28714),f=_(25866),D=_(65388);class T{constructor(R,O,y){this.primitiveIndices=R,this._numIndexPerPrimitive=O,this.position=y,this._children=void 0,(0,D.vA)(R.length>=1),(0,D.vA)(3===y.size||4===y.size);const{data:b,size:X,indices:p}=y;(0,D.vA)(p.length%this._numIndexPerPrimitive==0),(0,D.vA)(p.length>=R.length*this._numIndexPerPrimitive);const v=R.length;let F=X*p[this._numIndexPerPrimitive*R[0]];I.clear(),I.push(F);const z=(0,f.fA)(b[F],b[F+1],b[F+2]),tt=(0,f.o8)(z);for(let G=0;G<v;++G){const H=this._numIndexPerPrimitive*R[G];for(let L=0;L<this._numIndexPerPrimitive;++L){F=X*p[H+L],I.push(F);let C=b[F];z[0]=Math.min(C,z[0]),tt[0]=Math.max(C,tt[0]),C=b[F+1],z[1]=Math.min(C,z[1]),tt[1]=Math.max(C,tt[1]),C=b[F+2],z[2]=Math.min(C,z[2]),tt[2]=Math.max(C,tt[2])}}this.bbMin=z,this.bbMax=tt;const et=(0,d.m)((0,f.vt)(),this.bbMin,this.bbMax,.5);this.radius=.5*Math.max(Math.max(tt[0]-z[0],tt[1]-z[1]),tt[2]-z[2]);let W=this.radius*this.radius;for(let G=0;G<I.length;++G){F=I.at(G);const H=b[F]-et[0],L=b[F+1]-et[1],C=b[F+2]-et[2],S=H*H+L*L+C*C;if(S<=W)continue;const U=Math.sqrt(S),Y=.5*(U-this.radius);this.radius=this.radius+Y,W=this.radius*this.radius;const V=Y/U;et[0]+=H*V,et[1]+=L*V,et[2]+=C*V}this.center=et,I.clear()}getChildren(){if(this._children||(0,d.s)(this.bbMin,this.bbMax)<=1)return this._children;const R=(0,d.m)((0,f.vt)(),this.bbMin,this.bbMax,.5),O=this.primitiveIndices.length,y=new Uint8Array(O),b=new Array(8);for(let tt=0;tt<8;++tt)b[tt]=0;const{data:X,size:p,indices:v}=this.position;for(let tt=0;tt<O;++tt){let et=0;const W=this._numIndexPerPrimitive*this.primitiveIndices[tt];let G=p*v[W],H=X[G],L=X[G+1],C=X[G+2];for(let S=1;S<this._numIndexPerPrimitive;++S){G=p*v[W+S];const U=X[G],Y=X[G+1],V=X[G+2];U<H&&(H=U),Y<L&&(L=Y),V<C&&(C=V)}H<R[0]&&(et|=1),L<R[1]&&(et|=2),C<R[2]&&(et|=4),y[tt]=et,++b[et]}let F=0;for(let tt=0;tt<8;++tt)b[tt]>0&&++F;if(F<2)return;const z=new Array(8);for(let tt=0;tt<8;++tt)z[tt]=b[tt]>0?new Uint32Array(b[tt]):void 0;for(let tt=0;tt<8;++tt)b[tt]=0;for(let tt=0;tt<O;++tt){const et=y[tt];z[et][b[et]++]=this.primitiveIndices[tt]}this._children=new Array;for(let tt=0;tt<8;++tt)void 0!==z[tt]&&this._children.push(new T(z[tt],this._numIndexPerPrimitive,this.position));return this._children}static prune(){I.prune()}}const I=new h.A({deallocator:null})},43448:(lt,N,_)=>{_.d(N,{J:()=>d});var h=_(33894);class d{constructor(){this.id=(0,h.c)()}}},98176:(lt,N,_)=>{var h,d;_.d(N,{X:()=>h}),(d=h||(h={}))[d.Layer=0]="Layer",d[d.Object=1]="Object",d[d.Mesh=2]="Mesh",d[d.Line=3]="Line",d[d.Point=4]="Point",d[d.Material=5]="Material",d[d.Texture=6]="Texture",d[d.COUNT=7]="COUNT"},14253:(lt,N,_)=>{_.d(N,{D:()=>d});var h=_(40972);const d=new Map([[h.r.POSITION,0],[h.r.NORMAL,1],[h.r.NORMALCOMPRESSED,1],[h.r.UV0,2],[h.r.COLOR,3],[h.r.COLORFEATUREATTRIBUTE,3],[h.r.SIZE,4],[h.r.TANGENT,4],[h.r.CENTEROFFSETANDDISTANCE,5],[h.r.SYMBOLCOLOR,5],[h.r.FEATUREATTRIBUTE,6],[h.r.INSTANCEFEATUREATTRIBUTE,6],[h.r.INSTANCECOLOR,7],[h.r.OBJECTANDLAYERIDCOLOR,7],[h.r.INSTANCEOBJECTANDLAYERIDCOLOR,7],[h.r.ROTATION,8],[h.r.INSTANCEMODEL,8],[h.r.INSTANCEMODELNORMAL,12],[h.r.INSTANCEMODELORIGINHI,11],[h.r.INSTANCEMODELORIGINLO,15]])},91074:(lt,N,_)=>{_.d(N,{A:()=>d});var h=_(67496);class d{constructor(D){this._material=D.material,this._techniques=D.techniques,this._output=D.output}dispose(){}get _stippleTextures(){return this._techniques.context.stippleTextures}get _markerTextures(){return this._techniques.context.markerTextures}getTechnique(D,T){return this._techniques.get(D,this._material.getConfiguration(this._output,T))}ensureResources(D){return h.Am.LOADED}}},19589:(lt,N,_)=>{_.d(N,{NV:()=>R,m8:()=>I});var h=_(11432),d=_(56492),f=_(67496),D=_(91074),T=_(70938);class I extends D.A{constructor(y){super(y),this._numLoading=0,this._disposed=!1,this._textures=y.textures,this.updateTexture(y.textureId),this._acquire(y.normalTextureId,b=>this._textureNormal=b),this._acquire(y.emissiveTextureId,b=>this._textureEmissive=b),this._acquire(y.occlusionTextureId,b=>this._textureOcclusion=b),this._acquire(y.metallicRoughnessTextureId,b=>this._textureMetallicRoughness=b)}dispose(){super.dispose(),this._texture=(0,h.Gz)(this._texture),this._textureNormal=(0,h.Gz)(this._textureNormal),this._textureEmissive=(0,h.Gz)(this._textureEmissive),this._textureOcclusion=(0,h.Gz)(this._textureOcclusion),this._textureMetallicRoughness=(0,h.Gz)(this._textureMetallicRoughness),this._disposed=!0}ensureResources(y){return 0===this._numLoading?f.Am.LOADED:f.Am.LOADING}get textureBindParameters(){return new R(null!=this._texture?this._texture.glTexture:null,null!=this._textureNormal?this._textureNormal.glTexture:null,null!=this._textureEmissive?this._textureEmissive.glTexture:null,null!=this._textureOcclusion?this._textureOcclusion.glTexture:null,null!=this._textureMetallicRoughness?this._textureMetallicRoughness.glTexture:null)}updateTexture(y){null!=this._texture&&y===this._texture.id||(this._texture=(0,h.Gz)(this._texture),this._textureId=y,this._acquire(this._textureId,b=>this._texture=b))}_acquire(y,b){if(null==y)return void b(null);const X=this._textures.acquire(y);if((0,d.$X)(X))return++this._numLoading,void X.then(p=>{if(this._disposed)return(0,h.Gz)(p),void b(null);b(p)}).finally(()=>--this._numLoading);b(X)}}class P extends T.Y{constructor(y=null){super(),this.textureEmissive=y}}class R extends P{constructor(y=null,b=null,X=null,p=null,v=null,F,z){super(X),this.texture=y,this.textureNormal=b,this.textureOcclusion=p,this.textureMetallicRoughness=v,this.scale=F,this.normalTextureTransformMatrix=z}}},36884:(lt,N,_)=>{_.d(N,{V:()=>G});var h=_(62789),d=_(28714),f=_(83034),D=_(86493),T=_(88864),I=_(43448),P=_(98176),R=_(25866),O=_(53511);const p=(0,R.vt)(),v=(0,R.vt)(),F=(0,R.vt)(),z=(0,R.vt)();var tt=_(79622),et=_(65388),W=_(40972);class G extends I.J{constructor(C,S,U=null,Y=P.X.Mesh,V=null,A=-1){super(),this.material=C,this.mapPositions=U,this.type=Y,this.objectAndLayerIdColor=V,this.edgeIndicesLength=A,this.highlights=new Set,this._highlightOptionsCounts=new Map,this.visible=!0,this._attributes=new Map,this._boundingInfo=null;for(const[w,B]of S)this._attributes.set(w,{...B,indices:(0,f.Dg)(B.indices)}),w===W.r.POSITION&&(this.edgeIndicesLength=this.edgeIndicesLength<0?this._attributes.get(w).indices.length:this.edgeIndicesLength)}instantiate(C={}){const S=new G(C.material||this.material,[],this.mapPositions,this.type,this.objectAndLayerIdColor,this.edgeIndicesLength);return this._attributes.forEach((U,Y)=>{U.exclusive=!1,S._attributes.set(Y,U)}),S._boundingInfo=this._boundingInfo,S.transformation=C.transformation||this.transformation,S}get attributes(){return this._attributes}getMutableAttribute(C){let S=this._attributes.get(C);return S&&!S.exclusive&&(S={...S,exclusive:!0,data:(0,D.S)(S.data)},this._attributes.set(C,S)),S}setAttributeData(C,S){const U=this._attributes.get(C);U&&this._attributes.set(C,{...U,exclusive:!0,data:S})}get indexCount(){return this._attributes.values().next().value?.indices?.length??0}get faceCount(){return this.indexCount/3}get boundingInfo(){return null==this._boundingInfo&&(this._boundingInfo=this._calculateBoundingInfo()),this._boundingInfo}computeAttachmentOrigin(C){return!!(this.type===P.X.Mesh?this._computeAttachmentOriginTriangles(C):this.type===P.X.Line?this._computeAttachmentOriginLines(C):this._computeAttachmentOriginPoints(C))&&(null!=this._transformation&&(0,d.t)(C,C,this._transformation),!0)}_computeAttachmentOriginTriangles(C){return function y(L,C){if(!L)return!1;const{size:S,data:U,indices:Y}=L;(0,d.i)(C,0,0,0),(0,d.i)(z,0,0,0);let V=0,A=0;for(let w=0;w<Y.length-2;w+=3){const B=Y[w]*S,Z=Y[w+1]*S,at=Y[w+2]*S;(0,d.i)(p,U[B],U[B+1],U[B+2]),(0,d.i)(v,U[Z],U[Z+1],U[Z+2]),(0,d.i)(F,U[at],U[at+1],U[at+2]);const Et=(0,O.Q7)(p,v,F);Et?((0,d.g)(p,p,v),(0,d.g)(p,p,F),(0,d.h)(p,p,1/3*Et),(0,d.g)(C,C,p),V+=Et):((0,d.g)(z,z,p),(0,d.g)(z,z,v),(0,d.g)(z,z,F),A+=3)}return!(0===A&&0===V||(0!==V?((0,d.h)(C,C,1/V),0):0===A||((0,d.h)(C,z,1/A),0)))}(this.attributes.get(W.r.POSITION),C)}_computeAttachmentOriginLines(C){const S=this.attributes.get(W.r.POSITION);return function X(L,C,S){if(!L)return!1;(0,d.i)(S,0,0,0),(0,d.i)(z,0,0,0);let U=0,Y=0;const{size:V,data:A,indices:w}=L,B=w.length-1,Z=B+(C?2:0);for(let at=0;at<Z;at+=2){const st=w[at<B?at:B]*V,nt=w[at<B?at+1:0]*V;p[0]=A[st],p[1]=A[st+1],p[2]=A[st+2],v[0]=A[nt],v[1]=A[nt+1],v[2]=A[nt+2],(0,d.h)(p,(0,d.g)(p,p,v),.5);const ot=(0,d.G)(p,v);ot>0?((0,d.g)(S,S,(0,d.h)(p,p,ot)),U+=ot):0===U&&((0,d.g)(z,z,p),Y++)}return 0!==U?((0,d.h)(S,S,1/U),!0):0!==Y&&((0,d.h)(S,z,1/Y),!0)}(S,function H(L,C){return!(!("isClosed"in L)||!L.isClosed)&&C.indices.length>2}(this.material.parameters,S),C)}_computeAttachmentOriginPoints(C){return function b(L,C){if(!L)return!1;const{size:S,data:U,indices:Y}=L;(0,d.i)(C,0,0,0);let V=-1,A=0;for(let w=0;w<Y.length;w++){const B=Y[w]*S;V!==B&&(C[0]+=U[B],C[1]+=U[B+1],C[2]+=U[B+2],A++),V=B}return A>1&&(0,d.h)(C,C,1/A),A>0}(this.attributes.get(W.r.POSITION),C)}invalidateBoundingInfo(){this._boundingInfo=null}_calculateBoundingInfo(){const C=this.attributes.get(W.r.POSITION);if(!C||0===C.indices.length)return null;const S=this.type===P.X.Mesh?3:1;(0,et.vA)(C.indices.length%S==0,"Indexing error: "+C.indices.length+" not divisible by "+S);const U=(0,f.tM)(C.indices.length/S);return new T.j(U,S,C)}get transformation(){return this._transformation??h.zK}set transformation(C){this._transformation=C&&C!==h.zK?(0,h.o8)(C):null}get highlightNames(){return this._highlightOptionsCounts}get hasHighlights(){return this._highlightOptionsCounts.size>0}foreachHighlightOptions(C){this._highlightOptionsCounts.forEach((S,U)=>C(U))}allocateIdAndHighlight(C){const S=new tt.h(C);return this.addHighlight(S)}addHighlight(C){this.highlights.add(C);const{highlightName:S}=C,U=(this._highlightOptionsCounts.get(S)??0)+1;return this._highlightOptionsCounts.set(S,U),C}removeHighlight(C){if(this.highlights.delete(C)){const{highlightName:S}=C,U=this._highlightOptionsCounts.get(S)??0;U<=1?this._highlightOptionsCounts.delete(S):this._highlightOptionsCounts.set(S,U-1)}}}},50957:(lt,N,_)=>{_.d(N,{im:()=>P,m$:()=>R,qA:()=>O});var R,y,h=_(25866),d=_(43448),f=_(98176),D=_(14253),T=_(3264),I=_(70938);class P extends d.J{constructor(b,X){super(),this.type=f.X.Material,this.supportsEdges=!1,this._renderPriority=0,this.vertexAttributeLocations=D.D,this._pp0=(0,h.fA)(0,0,1),this._pp1=(0,h.fA)(0,0,0),this._parameters=new X,(0,T.MB)(this._parameters,b),this.validateParameters(this._parameters)}get parameters(){return this._parameters}update(b){return!1}setParameters(b,X=!0){(0,T.MB)(this._parameters,b)&&(this.validateParameters(this._parameters),X&&this._parametersChanged())}validateParameters(b){}shouldRender(b){return this.visible&&this.isVisibleForOutput(b.output)&&(!this.parameters.isDecoration||b.bind.decorations)&&!!(this.parameters.renderOccluded&b.renderOccludedMask)}isVisibleForOutput(b){return!0}get renderPriority(){return this._renderPriority}set renderPriority(b){b!==this._renderPriority&&(this._renderPriority=b,this._parametersChanged())}_parametersChanged(){this.repository?.materialChanged(this)}queryRenderOccludedState(b){return this.visible&&this.parameters.renderOccluded===b}get hasEmissions(){return!1}intersectDraped(b,X,p,v,F,z){return this._pp0[0]=this._pp1[0]=v[0],this._pp0[1]=this._pp1[1]=v[1],this.intersect(b,X,p,this._pp0,this._pp1,F)}}(y=R||(R={}))[y.None=0]="None",y[y.Occlude=1]="Occlude",y[y.Transparent=2]="Transparent",y[y.OccludeAndTransparent=4]="OccludeAndTransparent",y[y.OccludeAndTransparentStencil=8]="OccludeAndTransparentStencil",y[y.Opaque=16]="Opaque";class O extends I.Y{constructor(){super(...arguments),this.renderOccluded=R.Occlude,this.isDecoration=!1}}},96443:(lt,N,_)=>{var h,d;_.d(N,{Y:()=>h}),(d=h||(h={}))[d.NONE=0]="NONE",d[d.ColorAlpha=1]="ColorAlpha",d[d.FrontFace=2]="FrontFace",d[d.COUNT=3]="COUNT"},79622:(lt,N,_)=>{_.d(N,{h:()=>D,p:()=>T});var h=_(33894),d=_(67496);class f{constructor(){this.uid=(0,h.c)()}}class D extends f{constructor(P){super(),this.highlightName=P,this.channel=d.Mg.Highlight}}class T extends f{constructor(){super(...arguments),this.channel=d.Mg.MaskOccludee}}},14356:(lt,N,_)=>{_.d(N,{K_:()=>X,SE:()=>y,Yf:()=>P,aB:()=>b,ez:()=>I,m6:()=>p,xt:()=>O,z5:()=>R});var h=_(74567),d=_(96443),f=_(50915),D=_(41396);const T=(0,D.p3)(f.dn.ONE,f.dn.ZERO,f.dn.ONE,f.dn.ONE_MINUS_SRC_ALPHA);function I(v){return v===d.Y.FrontFace?null:T}function P(v){switch(v){case d.Y.NONE:return D.Ky;case d.Y.ColorAlpha:return T;case d.Y.FrontFace:case d.Y.COUNT:return null}}function R(v){if(v.draped)return null;switch(v.oitPass){case d.Y.NONE:case d.Y.FrontFace:return v.writeDepth?D.Uy:null;case d.Y.ColorAlpha:case d.Y.COUNT:return null}}const O=5e5,y={factor:-1,units:-2};function b(v){return v?y:null}function X(v,F=f.MT.LESS){return v===d.Y.NONE||v===d.Y.FrontFace?F:f.MT.LEQUAL}function p(v,F){const z=(0,h.LG)(F);return v===d.Y.ColorAlpha?z?{buffers:[f.Nm.COLOR_ATTACHMENT0,f.Nm.COLOR_ATTACHMENT1,f.Nm.COLOR_ATTACHMENT2]}:{buffers:[f.Nm.COLOR_ATTACHMENT0,f.Nm.COLOR_ATTACHMENT1]}:z?{buffers:[f.Nm.COLOR_ATTACHMENT0,f.Nm.COLOR_ATTACHMENT1]}:null}},49178:(lt,N,_)=>{_.d(N,{JG:()=>P,Uy:()=>O,Wb:()=>A,Z$:()=>p,b_:()=>F});var h=_(28714),d=_(25866),f=_(2296),D=_(98176),T=_(65388),I=_(40972);class P{constructor(nt=!1,ot=!0){this.isVerticalRay=nt,this.normalRequired=ot}}const R=(0,f.vt)();function O(st,nt,ot,ft,ht,ct){if(!st.visible)return;const mt=(0,h.a)(at,ft,ot),Tt=(gt,ut,dt)=>{ct(gt,dt,ut,!1)},Pt=new P(!1,nt.options.normalRequired);if(st.boundingInfo)(0,T.vA)(st.type===D.X.Mesh),b(st.boundingInfo,ot,mt,nt.tolerance,ht,Pt,Tt);else{const gt=st.attributes.get(I.r.POSITION),ut=gt.indices;et(ot,mt,0,ut.length/3,ut,gt.data,gt.stride,ht,Pt,Tt)}}const y=(0,d.vt)();function b(st,nt,ot,ft,ht,ct,mt){if(null==st)return;const Tt=function V(st,nt){return(0,h.i)(nt,1/st[0],1/st[1],1/st[2])}(ot,y);if((0,f.Ne)(R,st.bbMin),(0,f.vI)(R,st.bbMax),ht?.applyToAabb(R),A(R,nt,Tt,ft)){const{primitiveIndices:Pt,position:gt}=st,ut=Pt?Pt.length:gt.indices.length/3;if(ut>B){const dt=st.getChildren();if(void 0!==dt){for(const vt of dt)b(vt,nt,ot,ft,ht,ct,mt);return}}!function tt(st,nt,ot,ft,ht,ct,mt,Tt,Pt,gt,ut){const dt=st[0],vt=st[1],x=st[2],M=nt[0],j=nt[1],q=nt[2],{normalRequired:k}=gt;for(let _t=ot;_t<ft;++_t){const Dt=Tt[_t],It=3*Dt,Lt=mt*ht[It];let Ut=ct[Lt],xt=ct[Lt+1],Rt=ct[Lt+2];const yt=mt*ht[It+1];let Nt=ct[yt],St=ct[yt+1],J=ct[yt+2];const it=mt*ht[It+2];let $=ct[it],K=ct[it+1],Q=ct[it+2];null!=Pt&&([Ut,xt,Rt]=Pt.applyToVertex(Ut,xt,Rt,_t),[Nt,St,J]=Pt.applyToVertex(Nt,St,J,_t),[$,K,Q]=Pt.applyToVertex($,K,Q,_t));const rt=Nt-Ut,pt=St-xt,Ot=J-Rt,Mt=$-Ut,At=K-xt,Ct=Q-Rt,Wt=j*Ct-At*q,Bt=q*Mt-Ct*M,wt=M*At-Mt*j,bt=rt*Wt+pt*Bt+Ot*wt;if(Math.abs(bt)<=Z)continue;const jt=dt-Ut,Ft=vt-xt,Ht=x-Rt,Kt=jt*Wt+Ft*Bt+Ht*wt;if(bt>0){if(Kt<0||Kt>bt)continue}else if(Kt>0||Kt<bt)continue;const zt=Ft*Ot-pt*Ht,Yt=Ht*rt-Ot*jt,$t=jt*pt-rt*Ft,Vt=M*zt+j*Yt+q*$t;if(bt>0){if(Vt<0||Kt+Vt>bt)continue}else if(Vt>0||Kt+Vt<bt)continue;const Xt=(Mt*zt+At*Yt+Ct*$t)/bt;Xt>=0&&ut(Xt,Dt,k?L(rt,pt,Ot,Mt,At,Ct,X):null)}}(nt,ot,0,ut,gt.indices,gt.data,gt.stride,Pt,ht,ct,mt)}}const X=(0,d.vt)();function p(st,nt,ot,ft,ht,ct,mt,Tt,Pt){const{data:gt,stride:ut}=ct;et(st,(0,h.a)(at,nt,st),ot,ft,ht,gt,ut,mt,Tt,Pt)}function F(st,nt,ot,ft,ht,ct,mt,Tt){const Pt=st[0],gt=st[1],ut=st[2],dt=nt[0],vt=nt[1],x=nt[2];for(let M=ot;M<ft;++M){const j=3*M,_t=ct*j,Dt=ht[_t],It=ht[_t+1],Lt=ht[_t+2],Ut=ct*(j+1),xt=ct*(j+2),Rt=ht[Ut]-Dt,yt=ht[Ut+1]-It,Nt=ht[Ut+2]-Lt,St=ht[xt]-Dt,J=ht[xt+1]-It,it=ht[xt+2]-Lt,$=vt*it-J*x,K=x*St-it*dt,Q=dt*J-St*vt,rt=Rt*$+yt*K+Nt*Q;if(Math.abs(rt)<=Z)continue;const pt=Pt-Dt,Ot=gt-It,Mt=ut-Lt,At=pt*$+Ot*K+Mt*Q;if(rt>0){if(At<0||At>rt)continue}else if(At>0||At<rt)continue;const Ct=Ot*Nt-yt*Mt,Wt=Mt*Rt-Nt*pt,Bt=pt*yt-Rt*Ot,wt=dt*Ct+vt*Wt+x*Bt;if(rt>0){if(wt<0||At+wt>rt)continue}else if(wt>0||At+wt<rt)continue;const bt=(St*Ct+J*Wt+it*Bt)/rt;bt>=0&&Tt(bt,M,mt?L(Rt,yt,Nt,St,J,it,X):null)}}function et(st,nt,ot,ft,ht,ct,mt,Tt,Pt,gt){const ut=nt,dt=Et,vt=Math.abs(ut[0]),x=Math.abs(ut[1]),M=Math.abs(ut[2]),j=vt>=x?vt>=M?0:2:x>=M?1:2,q=j,k=ut[q]<0?2:1,_t=(j+k)%3,Dt=(j+(3-k))%3,It=ut[_t]/ut[q],Lt=ut[Dt]/ut[q],Ut=1/ut[q],xt=W,Rt=G,yt=H,{normalRequired:Nt}=Pt;for(let St=ot;St<ft;++St){const J=3*St,it=mt*ht[J];(0,h.i)(dt[0],ct[it+0],ct[it+1],ct[it+2]);const $=mt*ht[J+1];(0,h.i)(dt[1],ct[$+0],ct[$+1],ct[$+2]);const K=mt*ht[J+2];(0,h.i)(dt[2],ct[K+0],ct[K+1],ct[K+2]),Tt&&((0,h.c)(dt[0],Tt.applyToVertex(dt[0][0],dt[0][1],dt[0][2],St)),(0,h.c)(dt[1],Tt.applyToVertex(dt[1][0],dt[1][1],dt[1][2],St)),(0,h.c)(dt[2],Tt.applyToVertex(dt[2][0],dt[2][1],dt[2][2],St))),(0,h.a)(xt,dt[0],st),(0,h.a)(Rt,dt[1],st),(0,h.a)(yt,dt[2],st);const Q=xt[_t]-It*xt[q],rt=xt[Dt]-Lt*xt[q],pt=Rt[_t]-It*Rt[q],Ot=Rt[Dt]-Lt*Rt[q],Mt=yt[_t]-It*yt[q],At=yt[Dt]-Lt*yt[q],Ct=Mt*Ot-At*pt,Wt=Q*At-rt*Mt,Bt=pt*rt-Ot*Q;if((Ct<0||Wt<0||Bt<0)&&(Ct>0||Wt>0||Bt>0))continue;const wt=Ct+Wt+Bt;if(0===wt)continue;const bt=Ct*(Ut*xt[q])+Wt*(Ut*Rt[q])+Bt*(Ut*yt[q]);if(bt*Math.sign(wt)<0)continue;const jt=bt/wt;jt>=0&&gt(jt,St,Nt?C(dt):null)}}const W=(0,d.vt)(),G=(0,d.vt)(),H=(0,d.vt)();function L(st,nt,ot,ft,ht,ct,mt){return(0,h.i)(S,st,nt,ot),(0,h.i)(U,ft,ht,ct),(0,h.e)(mt,S,U),(0,h.n)(mt,mt),mt}function C(st){return(0,h.a)(S,st[1],st[0]),(0,h.a)(U,st[2],st[0]),(0,h.e)(X,S,U),(0,h.n)(X,X),X}const S=(0,d.vt)(),U=(0,d.vt)();function A(st,nt,ot,ft){return function w(st,nt,ot,ft,ht){const ct=(st[0]-ft-nt[0])*ot[0],mt=(st[3]+ft-nt[0])*ot[0];let Tt=Math.min(ct,mt),Pt=Math.max(ct,mt);const gt=(st[1]-ft-nt[1])*ot[1],ut=(st[4]+ft-nt[1])*ot[1];if(Pt=Math.min(Pt,Math.max(gt,ut)),Pt<0||(Tt=Math.max(Tt,Math.min(gt,ut)),Tt>Pt))return!1;const dt=(st[2]-ft-nt[2])*ot[2],vt=(st[5]+ft-nt[2])*ot[2];return Pt=Math.min(Pt,Math.max(dt,vt)),!(Pt<0)&&(Tt=Math.max(Tt,Math.min(dt,vt)),!(Tt>Pt)&&Tt<ht)}(st,nt,ot,ft,1/0)}const B=1e3,Z=1e-7,at=(0,d.vt)(),Et=[(0,d.vt)(),(0,d.vt)(),(0,d.vt)()]},55128:(lt,N,_)=>{var h,d;_.d(N,{N:()=>h}),(d=h||(h={}))[d.INTEGRATED_MESH=0]="INTEGRATED_MESH",d[d.OPAQUE_TERRAIN=1]="OPAQUE_TERRAIN",d[d.OPAQUE_MATERIAL=2]="OPAQUE_MATERIAL",d[d.OPAQUE_MATERIAL_WITHOUT_NORMALS=3]="OPAQUE_MATERIAL_WITHOUT_NORMALS",d[d.TRANSPARENT_MATERIAL=4]="TRANSPARENT_MATERIAL",d[d.TRANSPARENT_MATERIAL_WITHOUT_NORMALS=5]="TRANSPARENT_MATERIAL_WITHOUT_NORMALS",d[d.TRANSPARENT_TERRAIN=6]="TRANSPARENT_TERRAIN",d[d.TRANSPARENT_MATERIAL_WITHOUT_DEPTH=7]="TRANSPARENT_MATERIAL_WITHOUT_DEPTH",d[d.OCCLUDED_TERRAIN=8]="OCCLUDED_TERRAIN",d[d.OCCLUDER_MATERIAL=9]="OCCLUDER_MATERIAL",d[d.TRANSPARENT_OCCLUDER_MATERIAL=10]="TRANSPARENT_OCCLUDER_MATERIAL",d[d.OCCLUSION_PIXELS=11]="OCCLUSION_PIXELS",d[d.HUD_MATERIAL=12]="HUD_MATERIAL",d[d.LABEL_MATERIAL=13]="LABEL_MATERIAL",d[d.LINE_CALLOUTS=14]="LINE_CALLOUTS",d[d.LINE_CALLOUTS_HUD_DEPTH=15]="LINE_CALLOUTS_HUD_DEPTH",d[d.OVERLAY=16]="OVERLAY",d[d.DRAPED_MATERIAL=17]="DRAPED_MATERIAL",d[d.DRAPED_WATER=18]="DRAPED_WATER",d[d.VOXEL=19]="VOXEL",d[d.MAX_SLOTS=20]="MAX_SLOTS"},54501:(lt,N,_)=>{_.d(N,{I$:()=>b,a9:()=>y,m:()=>f,mK:()=>X,qh:()=>O,r8:()=>I,sf:()=>D,v0:()=>T});var h=_(67496),d=_(50915);const f={func:d.MT.LESS},D={func:d.MT.ALWAYS},T={mask:255},I={mask:0},O={function:{func:d.MT.ALWAYS,ref:h.dd.OutlineVisualElementMask,mask:h.dd.OutlineVisualElementMask},operation:{fail:d.eA.KEEP,zFail:d.eA.KEEP,zPass:d.eA.ZERO}},y={function:{func:d.MT.ALWAYS,ref:h.dd.OutlineVisualElementMask,mask:h.dd.OutlineVisualElementMask},operation:{fail:d.eA.KEEP,zFail:d.eA.KEEP,zPass:d.eA.REPLACE}},b={function:{func:d.MT.EQUAL,ref:h.dd.OutlineVisualElementMask,mask:h.dd.OutlineVisualElementMask},operation:{fail:d.eA.KEEP,zFail:d.eA.KEEP,zPass:d.eA.KEEP}},X={function:{func:d.MT.NOTEQUAL,ref:h.dd.OutlineVisualElementMask,mask:h.dd.OutlineVisualElementMask},operation:{fail:d.eA.KEEP,zFail:d.eA.KEEP,zPass:d.eA.KEEP}}},20706:(lt,N,_)=>{_.d(N,{g:()=>yt});var h=_(10467),f=(_(3248),_(5922)),D=_(42425),T=_(11432),I=_(56492),P=_(79139),R=_(45272),O=_(96797),y=_(3450),b=_(67496),X=_(90261);let v;var F=_(89249),z=_(50915),tt=_(76169),et=_(84757);let W=null,G=null;function H(){return L.apply(this,arguments)}function L(){return(L=(0,h.A)(function*(){return null==G&&(G=function p(){return v??=(0,h.A)(function*(){const $=yield _.e(8905).then(_.bind(_,68905)),K=yield $.default({locateFile:Q=>(0,X.s)(`esri/libs/basisu/${Q}`)});return K.initializeBasis(),K})(),v}(),W=yield G),G})).apply(this,arguments)}function U($,K,Q,rt,pt){const Ot=(0,et.IB)(K?z.CQ.COMPRESSED_RGBA8_ETC2_EAC:z.CQ.COMPRESSED_RGB8_ETC2);return Math.ceil(Q*rt*Ot*(pt&&$>1?(4**$-1)/(3*4**($-1)):1))}function Y($){return $.getNumImages()>=1&&!$.isUASTC()}function V($){return $.getFaces()>=1&&$.isETC1S()}function w(){return(w=(0,h.A)(function*($,K,Q){null==W&&(W=yield H());const rt=new W.BasisFile(new Uint8Array(Q));if(!Y(rt))return null;rt.startTranscoding();const pt=at($,K,rt.getNumLevels(0),rt.getHasAlpha(),rt.getImageWidth(0,0),rt.getImageHeight(0,0),(Ot,Mt)=>rt.getImageTranscodedSizeInBytes(0,Ot,Mt),(Ot,Mt,At)=>rt.transcodeImage(At,0,Ot,Mt,0,0));return rt.close(),rt.delete(),pt})).apply(this,arguments)}function Z(){return(Z=(0,h.A)(function*($,K,Q){null==W&&(W=yield H());const rt=new W.KTX2File(new Uint8Array(Q));if(!V(rt))return null;rt.startTranscoding();const pt=at($,K,rt.getLevels(),rt.getHasAlpha(),rt.getWidth(),rt.getHeight(),(Ot,Mt)=>rt.getImageTranscodedSizeInBytes(Ot,0,0,Mt),(Ot,Mt,At)=>rt.transcodeImage(At,Ot,0,0,Mt,0,-1,-1));return rt.close(),rt.delete(),pt})).apply(this,arguments)}function at($,K,Q,rt,pt,Ot,Mt,At){const{compressedTextureETC:Ct,compressedTextureS3TC:Wt}=$.capabilities,[Bt,wt]=Ct?rt?[F.n.ETC2_RGBA,z.CQ.COMPRESSED_RGBA8_ETC2_EAC]:[F.n.ETC1_RGB,z.CQ.COMPRESSED_RGB8_ETC2]:Wt?rt?[F.n.BC3_RGBA,z.CQ.COMPRESSED_RGBA_S3TC_DXT5_EXT]:[F.n.BC1_RGB,z.CQ.COMPRESSED_RGB_S3TC_DXT1_EXT]:[F.n.RGBA32,z.Ab.RGBA],bt=K.hasMipmap?Q:Math.min(1,Q),jt=[];for(let Ft=0;Ft<bt;Ft++)jt.push(new Uint8Array(Mt(Ft,Bt))),At(Ft,Bt,jt[Ft]);return K.internalFormat=wt,K.hasMipmap=jt.length>1,K.samplingMode=K.hasMipmap?z.Cj.LINEAR_MIPMAP_LINEAR:z.Cj.LINEAR,K.width=pt,K.height=Ot,new tt.g($,K,{type:"compressed",levels:jt})}var Et=_(43448),st=_(98176),nt=_(35150);const ot=()=>nt.A.getLogger("esri.views.3d.webgl-engine.lib.DDSUtil");function mt($){return $.charCodeAt(0)+($.charCodeAt(1)<<8)+($.charCodeAt(2)<<16)+($.charCodeAt(3)<<24)}const Pt=mt("DXT1"),gt=mt("DXT3"),ut=mt("DXT5");var J,$,Ut=_(7084),xt=_(65388),Rt=_(4931);class yt extends Et.J{constructor(K,Q){super(),this._data=K,this.type=st.X.Texture,this.events=new D.A,this._glTexture=null,this._loadingPromise=null,this._loadingController=null,this._parameters={...it,...Q},this._startPreload(K)}dispose(){this.unload(),this._data=this.frameUpdate=void 0}_startPreload(K){null!=K&&(K instanceof HTMLVideoElement?(this.frameUpdate=Q=>this._frameUpdate(K,Q),this._startPreloadVideoElement(K)):K instanceof HTMLImageElement&&this._startPreloadImageElement(K))}_startPreloadVideoElement(K){if(!((0,R.w8)(K.src)||"auto"===K.preload&&K.crossOrigin)){K.preload="auto",K.crossOrigin="anonymous";const Q=!K.paused;if(K.src=K.src,Q&&K.autoplay){const rt=()=>{K.removeEventListener("canplay",rt),K.play()};K.addEventListener("canplay",rt)}}}_startPreloadImageElement(K){(0,R.DB)(K.src)||(0,R.w8)(K.src)||K.crossOrigin||(K.crossOrigin="anonymous",K.src=K.src)}_createDescriptor(K){const Q=new Rt.R;return Q.wrapMode=this._parameters.wrap??z.pF.REPEAT,Q.flipped=!this._parameters.noUnpackFlip,Q.samplingMode=this._parameters.mipmap?z.Cj.LINEAR_MIPMAP_LINEAR:z.Cj.LINEAR,Q.hasMipmap=!!this._parameters.mipmap,Q.preMultiplyAlpha=!!this._parameters.preMultiplyAlpha,Q.maxAnisotropy=this._parameters.maxAnisotropy??(this._parameters.mipmap?K.parameters.maxMaxAnisotropy:1),Q}get glTexture(){return this._glTexture}get memoryEstimate(){return this._glTexture?.usedMemory||function Nt($,K){if(null==$)return 0;if((0,P.mw)($)||(0,P.mg)($))return K.encoding===b.JS.KTX2_ENCODING?function S($,K){if(null==W)return $.byteLength;const Q=new W.KTX2File(new Uint8Array($)),rt=V(Q)?U(Q.getLevels(),Q.getHasAlpha(),Q.getWidth(),Q.getHeight(),K):0;return Q.close(),Q.delete(),rt}($,!!K.mipmap):K.encoding===b.JS.BASIS_ENCODING?function C($,K){if(null==W)return $.byteLength;const Q=new W.BasisFile(new Uint8Array($)),rt=Y(Q)?U(Q.getNumLevels(0),Q.getHasAlpha(),Q.getImageWidth(0,0),Q.getImageHeight(0,0),K):0;return Q.close(),Q.delete(),rt}($,!!K.mipmap):$.byteLength;const{width:Q,height:rt}=$ instanceof Image||$ instanceof ImageData||$ instanceof HTMLCanvasElement||$ instanceof HTMLVideoElement?St($):K;return(K.mipmap?4/3:1)*Q*rt*(K.components||4)||0}(this._data,this._parameters)}load(K){if(this._glTexture)return this._glTexture;if(this._loadingPromise)return this._loadingPromise;const Q=this._data;return null==Q?(this._glTexture=new tt.g(K,this._createDescriptor(K),null),this._glTexture):(this._parameters.reloadable||(this._data=void 0),"string"==typeof Q?this._loadFromURL(K,Q):Q instanceof Image?this._loadFromImageElement(K,Q):Q instanceof HTMLVideoElement?this._loadFromVideoElement(K,Q):Q instanceof ImageData||Q instanceof HTMLCanvasElement?this._loadFromImage(K,Q):(0,P.mg)(Q)&&this._parameters.encoding===b.JS.DDS_ENCODING?this._loadFromDDSData(K,Q):(0,P.mw)(Q)&&this._parameters.encoding===b.JS.DDS_ENCODING?this._loadFromDDSData(K,new Uint8Array(Q)):((0,P.mw)(Q)||(0,P.mg)(Q))&&this._parameters.encoding===b.JS.KTX2_ENCODING?this._loadFromKTX2(K,Q):((0,P.mw)(Q)||(0,P.mg)(Q))&&this._parameters.encoding===b.JS.BASIS_ENCODING?this._loadFromBasis(K,Q):(0,P.mg)(Q)?this._loadFromPixelData(K,Q):(0,P.mw)(Q)?this._loadFromPixelData(K,new Uint8Array(Q)):null)}_frameUpdate(K,Q){return null==this._glTexture||K.readyState<J.HAVE_CURRENT_DATA||Q===K.currentTime?Q:(this._glTexture.setData(K),this._glTexture.descriptor.hasMipmap&&this._glTexture.generateMipmap(),this._parameters.updateCallback&&this._parameters.updateCallback(),K.currentTime)}_loadFromDDSData(K,Q){return this._glTexture=function It($,K,Q){const rt=function Lt($,K){const Q=new Int32Array($.buffer,$.byteOffset,31);if(542327876!==Q[0])return ot().error("Invalid magic number in DDS header"),null;if(!(4&Q[20]))return ot().error("Unsupported format, must contain a FourCC code"),null;const rt=Q[21];let pt,Ot;switch(rt){case Pt:pt=8,Ot=z.CQ.COMPRESSED_RGB_S3TC_DXT1_EXT;break;case gt:pt=16,Ot=z.CQ.COMPRESSED_RGBA_S3TC_DXT3_EXT;break;case ut:pt=16,Ot=z.CQ.COMPRESSED_RGBA_S3TC_DXT5_EXT;break;default:return ot().error("Unsupported FourCC code:",function Tt($){return String.fromCharCode(255&$,$>>8&255,$>>16&255,$>>24&255)}(rt)),null}let Mt=1,At=Q[4],Ct=Q[3];(3&At||3&Ct)&&(ot().warn("Rounding up compressed texture size to nearest multiple of 4."),At=At+3&-4,Ct=Ct+3&-4);const Wt=At,Bt=Ct;let wt,bt;131072&Q[2]&&!1!==K&&(Mt=Math.max(1,Q[7]));let jt=$.byteOffset+Q[1]+4;const Ft=[];for(let Ht=0;Ht<Mt;++Ht)bt=(At+3>>2)*(Ct+3>>2)*pt,wt=new Uint8Array($.buffer,jt,bt),Ft.push(wt),jt+=bt,At=Math.max(1,At>>1),Ct=Math.max(1,Ct>>1);return{textureData:{type:"compressed",levels:Ft},internalFormat:Ot,width:Wt,height:Bt}}(Q,K.hasMipmap??!1);if(null==rt)throw new Error("DDS texture data is null");const{textureData:pt,internalFormat:Ot,width:Mt,height:At}=rt;return K.samplingMode=pt.levels.length>1?z.Cj.LINEAR_MIPMAP_LINEAR:z.Cj.LINEAR,K.hasMipmap=pt.levels.length>1,K.internalFormat=Ot,K.width=Mt,K.height=At,new tt.g($,K,pt)}(K,this._createDescriptor(K),Q),this._glTexture}_loadFromKTX2(K,Q){return this._loadAsync(()=>function B($,K,Q){return Z.apply(this,arguments)}(K,this._createDescriptor(K),Q).then(rt=>(this._glTexture=rt,rt)))}_loadFromBasis(K,Q){return this._loadAsync(()=>function A($,K,Q){return w.apply(this,arguments)}(K,this._createDescriptor(K),Q).then(rt=>(this._glTexture=rt,rt)))}_loadFromPixelData(K,Q){(0,xt.vA)(this._parameters.width>0&&this._parameters.height>0);const rt=this._createDescriptor(K);return rt.pixelFormat=1===this._parameters.components?z.Ab.LUMINANCE:3===this._parameters.components?z.Ab.RGB:z.Ab.RGBA,rt.width=this._parameters.width??0,rt.height=this._parameters.height??0,this._glTexture=new tt.g(K,rt,Q),this._glTexture}_loadFromURL(K,Q){var rt=this;return this._loadAsync(function(){var pt=(0,h.A)(function*(Ot){const Mt=yield(0,O.D)(Q,{signal:Ot});return(0,I.Te)(Ot),rt._loadFromImage(K,Mt)});return function(Ot){return pt.apply(this,arguments)}}())}_loadFromImageElement(K,Q){var rt=this;return Q.complete?this._loadFromImage(K,Q):this._loadAsync(function(){var pt=(0,h.A)(function*(Ot){const Mt=yield(0,y.Sx)(Q,Q.src,!1,Ot);return(0,I.Te)(Ot),rt._loadFromImage(K,Mt)});return function(Ot){return pt.apply(this,arguments)}}())}_loadFromVideoElement(K,Q){return Q.readyState>=J.HAVE_CURRENT_DATA?this._loadFromImage(K,Q):this._loadFromVideoElementAsync(K,Q)}_loadFromVideoElementAsync(K,Q){return this._loadAsync(rt=>new Promise((pt,Ot)=>{const Mt=()=>{Q.removeEventListener("loadeddata",At),Q.removeEventListener("error",Ct),(0,T.xt)(Wt)},At=()=>{Q.readyState>=J.HAVE_CURRENT_DATA&&(Mt(),pt(this._loadFromImage(K,Q)))},Ct=Bt=>{Mt(),Ot(Bt||new f.A("Failed to load video"))};Q.addEventListener("loadeddata",At),Q.addEventListener("error",Ct);const Wt=(0,I.u7)(rt,()=>Ct((0,I.NK)()))}))}_loadFromImage(K,Q){let rt=Q;if(!(rt instanceof HTMLVideoElement)){const{maxTextureSize:Mt}=K.parameters;rt=this._parameters.downsampleUncompressed?(0,Ut.IR)(rt,Mt):(0,Ut.vM)(rt,Mt)}const pt=St(rt);this._parameters.width=pt.width,this._parameters.height=pt.height;const Ot=this._createDescriptor(K);return Ot.pixelFormat=3===this._parameters.components?z.Ab.RGB:z.Ab.RGBA,Ot.width=pt.width,Ot.height=pt.height,Ot.shouldCompress=this._parameters.shouldCompress,this._glTexture=new tt.g(K,Ot,rt),this._glTexture}_loadAsync(K){const Q=new AbortController;this._loadingController=Q;const rt=K(Q.signal);this._loadingPromise=rt;const pt=()=>{this._loadingController===Q&&(this._loadingController=null),this._loadingPromise===rt&&(this._loadingPromise=null)};return rt.then(pt,pt),rt}unload(){if(this._glTexture=(0,T.WD)(this._glTexture),null!=this._loadingController){const K=this._loadingController;this._loadingController=null,this._loadingPromise=null,K.abort()}this.events.emit("unloaded")}get parameters(){return this._parameters}}function St($){return $ instanceof HTMLVideoElement?{width:$.videoWidth,height:$.videoHeight}:$}($=J||(J={}))[$.HAVE_NOTHING=0]="HAVE_NOTHING",$[$.HAVE_METADATA=1]="HAVE_METADATA",$[$.HAVE_CURRENT_DATA=2]="HAVE_CURRENT_DATA",$[$.HAVE_FUTURE_DATA=3]="HAVE_FUTURE_DATA",$[$.HAVE_ENOUGH_DATA=4]="HAVE_ENOUGH_DATA";const it={wrap:{s:z.pF.REPEAT,t:z.pF.REPEAT},mipmap:!0,noUnpackFlip:!1,preMultiplyAlpha:!1,downsampleUncompressed:!1,shouldCompress:!1}},65388:(lt,N,_)=>{_.d(N,{L:()=>O,MX:()=>P,O_:()=>R,kL:()=>b,vA:()=>I,zH:()=>p});var h=_(45475);_(53781),(0,_(89141).vt)();class T{constructor(F){this.message=F}toString(){return`AssertException: ${this.message}`}}function I(v,F="Assertion"){if(!v){const z=new Error(F).stack;throw new T(`${F} at ${z}`)}}function P(v,F){v||(F=F||"",console.warn("Verify failed: "+F+"\n"+new Error("verify").stack))}function R(v,F,z,tt){let et,W=(z[0]-v[0])/F[0],G=(tt[0]-v[0])/F[0];W>G&&(et=W,W=G,G=et);let H=(z[1]-v[1])/F[1],L=(tt[1]-v[1])/F[1];if(H>L&&(et=H,H=L,L=et),W>L||H>G)return!1;H>W&&(W=H),L<G&&(G=L);let C=(z[2]-v[2])/F[2],S=(tt[2]-v[2])/F[2];return C>S&&(et=C,C=S,S=et),!(W>S||C>G||(S<G&&(G=S),G<0))}function O(v,F,z,tt,et,W=(0,h.vt)()){const G=(tt[et]-z[et])*(F[0]-v[0])-(tt[0]-z[0])*(F[et]-v[et]);if(0===G)return!1;const L=((tt[0]-z[0])*(v[et]-z[et])-(tt[et]-z[et])*(v[0]-z[0]))/G;return W[0]=v[0]+L*(F[0]-v[0]),W[1]=v[et]+L*(F[et]-v[et]),!0}function b(v,F){return Math.log(v)/Math.log(F)}function p(v){return 1===v[0]&&0===v[1]&&0===v[2]&&0===v[3]&&0===v[4]&&1===v[5]&&0===v[6]&&0===v[7]&&0===v[8]&&0===v[9]&&1===v[10]&&0===v[11]&&1===v[15]}},67496:(lt,N,_)=>{var h,d,f,D,T,I,P,R,O;_.d(N,{Am:()=>D,C7:()=>f,JS:()=>R,Mg:()=>I,dd:()=>T,it:()=>d,s2:()=>h,sf:()=>P}),(O=h||(h={}))[O.None=0]="None",O[O.Front=1]="Front",O[O.Back=2]="Back",O[O.COUNT=3]="COUNT",function(O){O[O.Less=0]="Less",O[O.Lequal=1]="Lequal",O[O.COUNT=2]="COUNT"}(d||(d={})),function(O){O[O.BACKGROUND=0]="BACKGROUND",O[O.UPDATE=1]="UPDATE"}(f||(f={})),function(O){O[O.NOT_LOADED=0]="NOT_LOADED",O[O.LOADING=1]="LOADING",O[O.LOADED=2]="LOADED"}(D||(D={})),function(O){O[O.IntegratedMeshMaskExcluded=1]="IntegratedMeshMaskExcluded",O[O.OutlineVisualElementMask=2]="OutlineVisualElementMask"}(T||(T={})),function(O){O[O.Highlight=0]="Highlight",O[O.MaskOccludee=1]="MaskOccludee"}(I||(I={})),function(O){O[O.Blend=0]="Blend",O[O.Opaque=1]="Opaque",O[O.Mask=2]="Mask",O[O.MaskBlend=3]="MaskBlend",O[O.COUNT=4]="COUNT"}(P||(P={})),function(O){O.DDS_ENCODING="image/vnd-ms.dds",O.KTX2_ENCODING="image/ktx2",O.BASIS_ENCODING="image/x.basis"}(R||(R={}))},30986:(lt,N,_)=>{_.d(N,{MD:()=>X,cJ:()=>b,hs:()=>p,m0:()=>O});var h=_(69287),f=(_(33096),_(83989));function R(H,L,C){const S=C.parameters;return et.scale=Math.min(S.divisor/(L-S.offset),1),et.factor=function P(H){return Math.abs(H*H*H)}(H),et}function O(H,L){return(0,h.Cc)(H*Math.max(L.scale,L.minScaleFactor),H,L.factor)}function b(H,L,C,S){S.scale=function y(H,L,C){const S=R(H,L,C);return S.minScaleFactor=0,O(1,S)}(H,L,C),S.factor=0,S.minScaleFactor=C.minScaleFactor}function X(H,L,C=[0,0]){const S=Math.min(Math.max(L.scale,L.minScaleFactor),1);return C[0]=H[0]*S,C[1]=H[1]*S,C}function p(H,L,C,S){return O(H,R(L,C,S))}_(23191),(0,h.kU)(10),(0,h.kU)(12),(0,h.kU)(70),(0,h.kU)(40);const et={scale:0,factor:0,minScaleFactor:0};(0,f.c)()},7084:(lt,N,_)=>{_.d(N,{IR:()=>T,Mv:()=>f,uT:()=>D,vM:()=>I});var h=_(5922);const d=16;function f(O){return Math.ceil(O/d)*d}function D(O){return Math.floor(O/d)*d}function T(O,y){let v=O.width*O.height;if(v<4096)return O instanceof ImageData?R(O):O;let F=O.width,z=O.height;do{F=Math.ceil(F/2),z=Math.ceil(z/2),v=F*z}while(v>1048576||null!=y&&(F>y||z>y));return P(O,F,z)}function I(O,y){const b=Math.max(O.width,O.height);if(b<=y)return O;const X=y/b;return P(O,Math.round(O.width*X),Math.round(O.height*X))}function P(O,y,b){if(O instanceof ImageData)return P(R(O),y,b);const X=document.createElement("canvas");return X.width=y,X.height=b,X.getContext("2d").drawImage(O,0,0,X.width,X.height),X}function R(O){const y=document.createElement("canvas");y.width=O.width,y.height=O.height;const b=y.getContext("2d");if(null==b)throw new h.A("Failed to create 2d context from HTMLCanvasElement");return b.putImageData(O,0,0),y}},29452:(lt,N,_)=>{_.d(N,{dg:()=>y,ou:()=>z});var h=_(31610),d=_(32954),f=_(92771),D=_(62789),T=_(28714),I=_(25866),P=_(83989),R=_(23191),O=_(19641);class y{constructor(){this._transform=(0,D.vt)(),this._transformInverse=new b({value:this._transform},f.B8,D.vt),this._transformInverseTranspose=new b(this._transformInverse,f.mg,D.vt),this._transformTranspose=new b({value:this._transform},f.mg,D.vt),this._transformInverseRotation=new b({value:this._transform},h.dR,d.vt)}_invalidateLazyTransforms(){this._transformInverse.invalidate(),this._transformInverseTranspose.invalidate(),this._transformTranspose.invalidate(),this._transformInverseRotation.invalidate()}get transform(){return this._transform}get inverse(){return this._transformInverse.value}get inverseTranspose(){return this._transformInverseTranspose.value}get inverseRotation(){return this._transformInverseRotation.value}get transpose(){return this._transformTranspose.value}setTransformMatrix(A){(0,f.C)(this._transform,A)}multiplyTransform(A){(0,f.lw)(this._transform,this._transform,A)}set(A){(0,f.C)(this._transform,A),this._invalidateLazyTransforms()}setAndInvalidateLazyTransforms(A,w){this.setTransformMatrix(A),this.multiplyTransform(w),this._invalidateLazyTransforms()}}class b{constructor(A,w,B){this._original=A,this._update=w,this._dirty=!0,this._transform=B()}invalidate(){this._dirty=!0}get value(){return this._dirty&&(this._update(this._transform,this._original.value),this._dirty=!1),this._transform}}const F=new class v{constructor(A=0){this.offset=A,this.sphere=(0,P.c)(),this.tmpVertex=(0,I.vt)()}applyToVertex(A,w,B){const Z=this.objectTransform.transform,at=(0,T.i)(L,A,w,B),Et=(0,T.t)(at,at,Z),st=this.offset/(0,T.l)(Et);return(0,T.b)(Et,Et,Et,st),(0,T.t)(this.tmpVertex,Et,this.objectTransform.inverse),this.tmpVertex}applyToMinMax(A,w){const B=this.offset/(0,T.l)(A);(0,T.b)(A,A,A,B);const Z=this.offset/(0,T.l)(w);(0,T.b)(w,w,w,Z)}applyToAabb(A){const w=this.offset/Math.sqrt(A[0]*A[0]+A[1]*A[1]+A[2]*A[2]);A[0]+=A[0]*w,A[1]+=A[1]*w,A[2]+=A[2]*w;const B=this.offset/Math.sqrt(A[3]*A[3]+A[4]*A[4]+A[5]*A[5]);return A[3]+=A[3]*B,A[4]+=A[4]*B,A[5]+=A[5]*B,A}applyToBoundingSphere(A){const w=(0,T.l)((0,P.a)(A)),B=this.offset/w;return(0,T.b)((0,P.a)(this.sphere),(0,P.a)(A),(0,P.a)(A),B),this.sphere[3]=A[3]+A[3]*this.offset/w,this.sphere}};function z(V){return null!=V?(F.offset=V,F):null}new class p{constructor(A=0){this.componentLocalOriginLength=0,this._totalOffset=0,this._offset=0,this._tmpVertex=(0,I.vt)(),this._tmpMbs=(0,P.c)(),this._tmpObb=new O.ab,this._resetOffset(A)}_resetOffset(A){this._offset=A,this._totalOffset=A}set offset(A){this._resetOffset(A)}get offset(){return this._offset}set componentOffset(A){this._totalOffset=this._offset+A}set localOrigin(A){this.componentLocalOriginLength=(0,T.l)(A)}applyToVertex(A,w,B){const Z=(0,T.i)(L,A,w,B),at=(0,T.i)(C,A,w,B+this.componentLocalOriginLength),Et=this._totalOffset/(0,T.l)(at);return(0,T.b)(this._tmpVertex,Z,at,Et),this._tmpVertex}applyToAabb(A){const w=this.componentLocalOriginLength,B=A[0],Z=A[1],at=A[2]+w,Et=A[3],st=A[4],nt=A[5]+w,ot=Math.abs(B),ft=Math.abs(Z),ht=Math.abs(at),ct=Math.abs(Et),mt=Math.abs(st),Tt=Math.abs(nt),Pt=.5*(1+Math.sign(B*Et))*Math.min(ot,ct),gt=.5*(1+Math.sign(Z*st))*Math.min(ft,mt),ut=.5*(1+Math.sign(at*nt))*Math.min(ht,Tt),dt=Math.max(ot,ct),vt=Math.max(ft,mt),x=Math.max(ht,Tt),M=Math.sqrt(Pt*Pt+gt*gt+ut*ut),j=Math.sign(ot+B),q=Math.sign(ft+Z),k=Math.sign(ht+at),_t=Math.sign(ct+Et),Dt=Math.sign(mt+st),It=Math.sign(Tt+nt),Lt=this._totalOffset;if(M<Lt)return A[0]-=(1-j)*Lt,A[1]-=(1-q)*Lt,A[2]-=(1-k)*Lt,A[3]+=_t*Lt,A[4]+=Dt*Lt,A[5]+=It*Lt,A;const Ut=Lt/Math.sqrt(dt*dt+vt*vt+x*x),xt=Lt/M,Rt=xt-Ut,yt=-Rt;return A[0]+=B*(j*yt+xt),A[1]+=Z*(q*yt+xt),A[2]+=at*(k*yt+xt),A[3]+=Et*(_t*Rt+Ut),A[4]+=st*(Dt*Rt+Ut),A[5]+=nt*(It*Rt+Ut),A}applyToMbs(A){const w=(0,T.l)((0,P.a)(A)),B=this._totalOffset/w;return(0,T.b)((0,P.a)(this._tmpMbs),(0,P.a)(A),(0,P.a)(A),B),this._tmpMbs[3]=A[3]+A[3]*this._totalOffset/w,this._tmpMbs}applyToObb(A){return(0,O.gm)(A,this._totalOffset,this._totalOffset,R.RT.Global,this._tmpObb),this._tmpObb}},new class X{constructor(A=0){this.offset=A,this.tmpVertex=(0,I.vt)()}applyToVertex(A,w,B){const Z=(0,T.i)(L,A,w,B),at=(0,T.g)(C,Z,this.localOrigin),Et=this.offset/(0,T.l)(at);return(0,T.b)(this.tmpVertex,Z,at,Et),this.tmpVertex}applyToAabb(A){const w=S,B=U,Z=Y;for(let nt=0;nt<3;++nt)w[nt]=A[0+nt]+this.localOrigin[nt],B[nt]=A[3+nt]+this.localOrigin[nt],Z[nt]=w[nt];const at=this.applyToVertex(w[0],w[1],w[2]);for(let nt=0;nt<3;++nt)A[nt]=at[nt],A[nt+3]=at[nt];const Et=nt=>{const ot=this.applyToVertex(nt[0],nt[1],nt[2]);for(let ft=0;ft<3;++ft)A[ft]=Math.min(A[ft],ot[ft]),A[ft+3]=Math.max(A[ft+3],ot[ft])};for(let nt=1;nt<8;++nt){for(let ot=0;ot<3;++ot)Z[ot]=nt&1<<ot?B[ot]:w[ot];Et(Z)}let st=0;for(let nt=0;nt<3;++nt)w[nt]*B[nt]<0&&(st|=1<<nt);if(0!==st&&7!==st)for(let nt=0;nt<8;++nt)if(!(st&nt)){for(let ot=0;ot<3;++ot)Z[ot]=st&1<<ot?0:nt&1<<ot?w[ot]:B[ot];Et(Z)}for(let nt=0;nt<3;++nt)A[nt]-=this.localOrigin[nt],A[nt+3]-=this.localOrigin[nt];return A}};const L=(0,I.vt)(),C=(0,I.vt)(),S=(0,I.vt)(),U=(0,I.vt)(),Y=(0,I.vt)()},5417:(lt,N,_)=>{_.d(N,{$p:()=>d,Qx:()=>D,_y:()=>f,e_:()=>T});var h=_(25866);class d{constructor(P=(0,h.Ul)()){this.intensity=P}}class f{constructor(P=(0,h.Ul)(),R=(0,h.fA)(.57735,.57735,.57735)){this.intensity=P,this.direction=R}}class D{constructor(P=(0,h.Ul)(),R=(0,h.fA)(.57735,.57735,.57735),O=!0,y=1,b=1){this.intensity=P,this.direction=R,this.castShadows=O,this.specularStrength=y,this.environmentStrength=b}}class T{constructor(){this.r=[0],this.g=[0],this.b=[0]}}},68675:(lt,N,_)=>{_.d(N,{TA:()=>Y,uH:()=>U});var h=_(69287),d=_(28714),f=_(25866),D=_(5417);function I(A,w,B){(B=B||A).length=A.length;for(let Z=0;Z<A.length;Z++)B[Z]=A[Z]*w[Z];return B}function P(A,w,B){(B=B||A).length=A.length;for(let Z=0;Z<A.length;Z++)B[Z]=A[Z]*w;return B}function R(A,w,B){(B=B||A).length=A.length;for(let Z=0;Z<A.length;Z++)B[Z]=A[Z]+w[Z];return B}function O(A){return(A+1)*(A+1)}function b(A,w,B){const Z=A[0],at=A[1],Et=A[2],st=B||[];return st.length=O(w),w>=0&&(st[0]=.28209479177),w>=1&&(st[1]=.4886025119*Z,st[2]=.4886025119*Et,st[3]=.4886025119*at),w>=2&&(st[4]=1.09254843059*Z*at,st[5]=1.09254843059*at*Et,st[6]=.31539156525*(3*Et*Et-1),st[7]=1.09254843059*Z*Et,st[8]=.54627421529*(Z*Z-at*at)),st}function F(A,w,B,Z){(function X(A,w){const B=O(A),Z=w||{r:[],g:[],b:[]};Z.r.length=Z.g.length=Z.b.length=B;for(let at=0;at<B;at++)Z.r[at]=Z.g[at]=Z.b[at]=0})(w,Z),(0,d.i)(B.intensity,0,0,0);let at=!1;const Et=z,st=tt,nt=et;Et.length=0,st.length=0,nt.length=0;for(const ot of A)ot instanceof D.Qx&&!at?((0,d.c)(B.direction,ot.direction),(0,d.c)(B.intensity,ot.intensity),B.specularStrength=ot.specularStrength,B.environmentStrength=ot.environmentStrength,B.castShadows=ot.castShadows,at=!0):ot instanceof D.Qx||ot instanceof D._y?Et.push(ot):ot instanceof D.$p?st.push(ot):ot instanceof D.e_&&nt.push(ot);(function p(A,w){const B=function y(A){return(0,h.qE)(Math.floor(Math.sqrt(A)-1),0,2)}(w.r.length);for(const Z of A)(0,d.v)(H,Z.direction),b(H,B,W),I(W,L),P(W,Z.intensity[0],G),R(w.r,G),P(W,Z.intensity[1],G),R(w.g,G),P(W,Z.intensity[2],G),R(w.b,G);return w})(Et,Z),function v(A,w){b(H,0,W);for(const B of A)w.r[0]+=W[0]*L[0]*B.intensity[0]*4*Math.PI,w.g[0]+=W[0]*L[0]*B.intensity[1]*4*Math.PI,w.b[0]+=W[0]*L[0]*B.intensity[2]*4*Math.PI}(st,Z);for(const ot of nt)R(Z.r,ot.r),R(Z.g,ot.g),R(Z.b,ot.b)}const z=[],tt=[],et=[],W=[0],G=[0],H=(0,f.vt)(),L=[3.141593,2.094395,2.094395,2.094395,.785398,.785398,.785398,.785398,.785398];class C{constructor(){this.color=(0,f.vt)(),this.intensity=1}}class S{constructor(){this.direction=(0,f.vt)(),this.ambient=new C,this.diffuse=new C}}const U=.4;class Y{constructor(){this._shOrder=2,this._legacy=new S,this.globalFactor=.5,this.noonFactor=.5,this._sphericalHarmonics=new D.e_,this._mainLight=new D.Qx((0,f.vt)(),(0,f.fA)(1,0,0),!1)}get legacy(){return this._legacy}get sh(){return this._sphericalHarmonics}get mainLight(){return this._mainLight}set(w){F(w,this._shOrder,this._mainLight,this._sphericalHarmonics),(0,d.c)(this._legacy.direction,this._mainLight.direction);const B=1/Math.PI;this._legacy.ambient.color[0]=.282095*this._sphericalHarmonics.r[0]*B,this._legacy.ambient.color[1]=.282095*this._sphericalHarmonics.g[0]*B,this._legacy.ambient.color[2]=.282095*this._sphericalHarmonics.b[0]*B,(0,d.h)(this._legacy.diffuse.color,this._mainLight.intensity,B),(0,d.c)(V,this._legacy.diffuse.color),(0,d.h)(V,V,U*this.globalFactor),(0,d.g)(this._legacy.ambient.color,this._legacy.ambient.color,V)}copyFrom(w){this._sphericalHarmonics.r=Array.from(w.sh.r),this._sphericalHarmonics.g=Array.from(w.sh.g),this._sphericalHarmonics.b=Array.from(w.sh.b),(0,d.c)(this._mainLight.direction,w.mainLight.direction),(0,d.c)(this._mainLight.intensity,w.mainLight.intensity),this._mainLight.castShadows=w.mainLight.castShadows,this._mainLight.specularStrength=w.mainLight.specularStrength,this._mainLight.environmentStrength=w.mainLight.environmentStrength,this.globalFactor=w.globalFactor,this.noonFactor=w.noonFactor}lerpLighting(w,B,Z){if((0,d.m)(this._mainLight.intensity,w.mainLight.intensity,B.mainLight.intensity,Z),this._mainLight.environmentStrength=(0,h.Cc)(w.mainLight.environmentStrength,B.mainLight.environmentStrength,Z),this._mainLight.specularStrength=(0,h.Cc)(w.mainLight.specularStrength,B.mainLight.specularStrength,Z),(0,d.c)(this._mainLight.direction,B.mainLight.direction),this._mainLight.castShadows=B.mainLight.castShadows,this.globalFactor=(0,h.Cc)(w.globalFactor,B.globalFactor,Z),this.noonFactor=(0,h.Cc)(w.noonFactor,B.noonFactor,Z),w.sh.r.length===B.sh.r.length)for(let at=0;at<B.sh.r.length;at++)this._sphericalHarmonics.r[at]=(0,h.Cc)(w.sh.r[at],B.sh.r[at],Z),this._sphericalHarmonics.g[at]=(0,h.Cc)(w.sh.g[at],B.sh.g[at],Z),this._sphericalHarmonics.b[at]=(0,h.Cc)(w.sh.b[at],B.sh.b[at],Z);else for(let at=0;at<B.sh.r.length;at++)this._sphericalHarmonics.r[at]=B.sh.r[at],this._sphericalHarmonics.g[at]=B.sh.g[at],this._sphericalHarmonics.b[at]=B.sh.b[at]}}const V=(0,f.vt)()},61427:(lt,N,_)=>{_.d(N,{Z:()=>P});var h=_(28714),d=_(25866),f=_(45434),D=_(49178),T=_(40972),I=_(38499);class P{constructor(y){this.vertexBufferLayout=y}elementCount(y){return y.get(T.r.POSITION).indices.length}write(y,b,X,p,v,F){(0,I.SA)(X,p,this.vertexBufferLayout,y,b,v,F)}intersect(y,b,X,p,v){const F=this.vertexBufferLayout.createView(y).getField(T.r.POSITION,f.xs);if(null==F)return;const z=(0,h.a)(R,p,X);(0,D.b_)(X,z,0,F.elementCount/3,F.typedBuffer,F.typedBufferStride,b.options.normalRequired,(H,L,C)=>{v(H,C,L,!1)})}}const R=(0,d.vt)()},35094:(lt,N,_)=>{_.d(N,{E:()=>P});var h=_(8189),d=_(74567),f=_(55062);class D extends f.K{constructor(){super(...arguments),this.instancedDoublePrecision=!1,this.hasModelTransformation=!1}}(0,h._)([(0,f.W)()],D.prototype,"instancedDoublePrecision",void 0),(0,h._)([(0,f.W)()],D.prototype,"hasModelTransformation",void 0);var T=_(96443),I=_(2006);class P extends D{constructor(){super(...arguments),this.output=d.V.Color,this.oitPass=T.Y.NONE,this.hasSlicePlane=!1,this.bindType=I.c.Pass,this.writeDepth=!0}}(0,h._)([(0,f.W)({count:d.V.COUNT})],P.prototype,"output",void 0),(0,h._)([(0,f.W)({count:T.Y.COUNT})],P.prototype,"oitPass",void 0),(0,h._)([(0,f.W)()],P.prototype,"hasSlicePlane",void 0)},59642:(lt,N,_)=>{_.d(N,{S:()=>f,p:()=>D});var h=_(85222),d=_(50957);class f extends h.Gd{constructor(){super(...arguments),this.renderOccluded=d.m$.Occlude,this.isDecoration=!1}}const D=8},3264:(lt,N,_)=>{_.d(N,{MB:()=>T,Um:()=>I,kE:()=>D});var h=_(89952),d=_(69287),f=_(30986);function D(P,R,O,y,b){let X=(O.screenLength||0)*P.pixelRatio;null!=b&&(X=(0,f.hs)(X,y,R,b));const p=X*Math.tan(.5*P.fovY)/(.5*P.fullHeight);return(0,d.qE)(p*R,O.minWorldLength||0,null!=O.maxWorldLength?O.maxWorldLength:1/0)}function T(P,R){let O=!1;for(const y in R){const b=R[y];void 0!==b&&(Array.isArray(b)?Array.isArray(P[y])&&(0,h.aI)(b,P[y])||(P[y]=b.slice(),O=!0):P[y]!==b&&(O=!0,P[y]=b))}return O}const I={multiply:1,ignore:2,replace:3,tint:4}},38499:(lt,N,_)=>{_.d(N,{Hk:()=>X,Pq:()=>O,SA:()=>et,Ut:()=>R,p1:()=>p,tH:()=>tt,tb:()=>F,uO:()=>T,zC:()=>W});var h=_(92771),d=_(45434),f=_(65388),D=_(40972);function T(G,H,L,C=1){const{data:S,indices:U}=G,Y=H.typedBuffer,V=H.typedBufferStride,A=U.length;if(L*=V,1===C)for(let w=0;w<A;++w)Y[L]=S[U[w]],L+=V;else for(let w=0;w<A;++w){const B=S[U[w]];for(let Z=0;Z<C;Z++)Y[L]=B,L+=V}}function I(G,H,L){const{data:C,indices:S}=G,U=H.typedBuffer,Y=H.typedBufferStride,V=S.length;L*=Y;for(let A=0;A<V;++A){const w=2*S[A];U[L]=C[w],U[L+1]=C[w+1],L+=Y}}function P(G,H,L,C){const{data:S,indices:U}=G,Y=H.typedBuffer,V=H.typedBufferStride,A=U.length;if(L*=V,null==C||1===C)for(let w=0;w<A;++w){const B=3*U[w];Y[L]=S[B],Y[L+1]=S[B+1],Y[L+2]=S[B+2],L+=V}else for(let w=0;w<A;++w){const B=3*U[w];for(let Z=0;Z<C;++Z)Y[L]=S[B],Y[L+1]=S[B+1],Y[L+2]=S[B+2],L+=V}}function R(G,H,L,C=1){const{data:S,indices:U}=G,Y=H.typedBuffer,V=H.typedBufferStride,A=U.length;if(L*=V,1===C)for(let w=0;w<A;++w){const B=4*U[w];Y[L]=S[B],Y[L+1]=S[B+1],Y[L+2]=S[B+2],Y[L+3]=S[B+3],L+=V}else for(let w=0;w<A;++w){const B=4*U[w];for(let Z=0;Z<C;++Z)Y[L]=S[B],Y[L+1]=S[B+1],Y[L+2]=S[B+2],Y[L+3]=S[B+3],L+=V}}function O(G,H,L){const C=G.typedBuffer,S=G.typedBufferStride;H*=S;for(let U=0;U<L;++U)C[H]=0,C[H+1]=0,C[H+2]=0,C[H+3]=0,H+=S}function X(G,H,L,C,S=1){if(!H)return void P(G,L,C,S);const{data:U,indices:Y}=G,V=L.typedBuffer,A=L.typedBufferStride,w=Y.length,B=H[0],Z=H[1],at=H[2],Et=H[4],st=H[5],nt=H[6],ot=H[8],ft=H[9],ht=H[10],ct=H[12],mt=H[13],Tt=H[14];C*=A;let Pt=0,gt=0,ut=0;const dt=(0,h.tZ)(H)?vt=>{Pt=U[vt]+ct,gt=U[vt+1]+mt,ut=U[vt+2]+Tt}:vt=>{const x=U[vt],M=U[vt+1],j=U[vt+2];Pt=B*x+Et*M+ot*j+ct,gt=Z*x+st*M+ft*j+mt,ut=at*x+nt*M+ht*j+Tt};if(1===S)for(let vt=0;vt<w;++vt)dt(3*Y[vt]),V[C]=Pt,V[C+1]=gt,V[C+2]=ut,C+=A;else for(let vt=0;vt<w;++vt){dt(3*Y[vt]);for(let x=0;x<S;++x)V[C]=Pt,V[C+1]=gt,V[C+2]=ut,C+=A}}function p(G,H,L,C,S=1){if(!H)return void P(G,L,C,S);const{data:U,indices:Y}=G,V=H,A=L.typedBuffer,w=L.typedBufferStride,B=Y.length,Z=V[0],at=V[1],Et=V[2],st=V[4],nt=V[5],ot=V[6],ft=V[8],ht=V[9],ct=V[10],mt=!(0,h.ut)(V);C*=w;let gt=0,ut=0,dt=0;const vt=(0,h.tZ)(V)?x=>{gt=U[x],ut=U[x+1],dt=U[x+2]}:x=>{const M=U[x],j=U[x+1],q=U[x+2];gt=Z*M+st*j+ft*q,ut=at*M+nt*j+ht*q,dt=Et*M+ot*j+ct*q};if(1===S)if(mt)for(let x=0;x<B;++x){vt(3*Y[x]);const M=gt*gt+ut*ut+dt*dt;if(M<.999999&&M>1e-6){const j=1/Math.sqrt(M);A[C]=gt*j,A[C+1]=ut*j,A[C+2]=dt*j}else A[C]=gt,A[C+1]=ut,A[C+2]=dt;C+=w}else for(let x=0;x<B;++x)vt(3*Y[x]),A[C]=gt,A[C+1]=ut,A[C+2]=dt,C+=w;else for(let x=0;x<B;++x){if(vt(3*Y[x]),mt){const M=gt*gt+ut*ut+dt*dt;if(M<.999999&&M>1e-6){const j=1/Math.sqrt(M);gt*=j,ut*=j,dt*=j}}for(let M=0;M<S;++M)A[C]=gt,A[C+1]=ut,A[C+2]=dt,C+=w}}function F(G,H,L,C,S=1){const{data:U,indices:Y}=G,V=L.typedBuffer,A=L.typedBufferStride,w=Y.length;if(C*=A,H!==U.length||4!==H)if(1!==S)if(4!==H)for(let B=0;B<w;++B){const Z=3*Y[B];for(let at=0;at<S;++at)V[C]=U[Z],V[C+1]=U[Z+1],V[C+2]=U[Z+2],V[C+3]=255,C+=A}else for(let B=0;B<w;++B){const Z=4*Y[B];for(let at=0;at<S;++at)V[C]=U[Z],V[C+1]=U[Z+1],V[C+2]=U[Z+2],V[C+3]=U[Z+3],C+=A}else{if(4===H){for(let B=0;B<w;++B){const Z=4*Y[B];V[C]=U[Z],V[C+1]=U[Z+1],V[C+2]=U[Z+2],V[C+3]=U[Z+3],C+=A}return}for(let B=0;B<w;++B){const Z=3*Y[B];V[C]=U[Z],V[C+1]=U[Z+1],V[C+2]=U[Z+2],V[C+3]=255,C+=A}}else{V[C]=U[0],V[C+1]=U[1],V[C+2]=U[2],V[C+3]=U[3];const B=new Uint32Array(L.typedBuffer.buffer,L.start),Z=A/4,at=B[C/=4];C+=Z;const Et=w*S;for(let st=1;st<Et;++st)B[C]=at,C+=Z}}function tt(G,H,L,C,S=1){const U=H.typedBuffer,Y=H.typedBufferStride;if(C*=Y,1===S)for(let V=0;V<L;++V)U[C]=G[0],U[C+1]=G[1],U[C+2]=G[2],U[C+3]=G[3],C+=Y;else for(let V=0;V<L;++V)for(let A=0;A<S;++A)U[C]=G[0],U[C+1]=G[1],U[C+2]=G[2],U[C+3]=G[3],C+=Y}function et(G,H,L,C,S,U,Y){for(const V of L.fields.keys()){const A=G.get(V),w=A?.indices;if(A&&w)W(V,A,C,S,U,Y);else if(V===D.r.OBJECTANDLAYERIDCOLOR&&null!=H){const B=G.get(D.r.POSITION)?.indices;if(B){const Z=B.length;tt(H,U.getField(V,d.XP),Z,Y)}}}}function W(G,H,L,C,S,U){switch(G){case D.r.POSITION:{(0,f.vA)(3===H.size);const Y=S.getField(G,d.xs);(0,f.vA)(!!Y,`No buffer view for ${G}`),Y&&X(H,L,Y,U);break}case D.r.NORMAL:{(0,f.vA)(3===H.size);const Y=S.getField(G,d.xs);(0,f.vA)(!!Y,`No buffer view for ${G}`),Y&&p(H,C,Y,U);break}case D.r.NORMALCOMPRESSED:{(0,f.vA)(2===H.size);const Y=S.getField(G,d.mJ);(0,f.vA)(!!Y,`No buffer view for ${G}`),Y&&I(H,Y,U);break}case D.r.UV0:{(0,f.vA)(2===H.size);const Y=S.getField(G,d.gH);(0,f.vA)(!!Y,`No buffer view for ${G}`),Y&&I(H,Y,U);break}case D.r.COLOR:case D.r.SYMBOLCOLOR:{const Y=S.getField(G,d.XP);(0,f.vA)(!!Y,`No buffer view for ${G}`),(0,f.vA)(3===H.size||4===H.size),!Y||3!==H.size&&4!==H.size||F(H,H.size,Y,U);break}case D.r.COLORFEATUREATTRIBUTE:{const Y=S.getField(G,d.Y$);(0,f.vA)(!!Y,`No buffer view for ${G}`),(0,f.vA)(1===H.size),Y&&1===H.size&&function z(G,H,L){const{data:C,indices:S}=G,U=H.typedBuffer,Y=H.typedBufferStride,V=S.length,A=C[0];L*=Y;for(let w=0;w<V;++w)U[L]=A,L+=Y}(H,Y,U);break}case D.r.TANGENT:{(0,f.vA)(4===H.size);const Y=S.getField(G,d.Eq);(0,f.vA)(!!Y,`No buffer view for ${G}`),Y&&function v(G,H,L,C,S=1){if(!H)return void R(G,L,C,S);const{data:U,indices:Y}=G,A=L.typedBuffer,w=L.typedBufferStride,B=Y.length,Z=H[0],at=H[1],Et=H[2],st=H[4],nt=H[5],ot=H[6],ft=H[8],ht=H[9],ct=H[10],mt=!(0,h.ut)(H);if(C*=w,1===S)for(let gt=0;gt<B;++gt){const ut=4*Y[gt],dt=U[ut],vt=U[ut+1],x=U[ut+2],M=U[ut+3];let j=Z*dt+st*vt+ft*x,q=at*dt+nt*vt+ht*x,k=Et*dt+ot*vt+ct*x;if(mt){const _t=j*j+q*q+k*k;if(_t<.999999&&_t>1e-6){const Dt=1/Math.sqrt(_t);j*=Dt,q*=Dt,k*=Dt}}A[C]=j,A[C+1]=q,A[C+2]=k,A[C+3]=M,C+=w}else for(let gt=0;gt<B;++gt){const ut=4*Y[gt],dt=U[ut],vt=U[ut+1],x=U[ut+2],M=U[ut+3];let j=Z*dt+st*vt+ft*x,q=at*dt+nt*vt+ht*x,k=Et*dt+ot*vt+ct*x;if(mt){const _t=j*j+q*q+k*k;if(_t<.999999&&_t>1e-6){const Dt=1/Math.sqrt(_t);j*=Dt,q*=Dt,k*=Dt}}for(let _t=0;_t<S;++_t)A[C]=j,A[C+1]=q,A[C+2]=k,A[C+3]=M,C+=w}}(H,L,Y,U);break}case D.r.PROFILERIGHT:case D.r.PROFILEUP:case D.r.PROFILEVERTEXANDNORMAL:case D.r.FEATUREVALUE:{(0,f.vA)(4===H.size);const Y=S.getField(G,d.Eq);(0,f.vA)(!!Y,`No buffer view for ${G}`),Y&&R(H,Y,U)}}}},30906:(lt,N,_)=>{_.d(N,{Bt:()=>I,Jr:()=>f,SY:()=>P,mb:()=>T});var h=_(28714),d=_(25866);function f({normalTexture:R,metallicRoughnessTexture:O,metallicFactor:y,roughnessFactor:b,emissiveTexture:X,emissiveFactor:p,occlusionTexture:v}){return null==R&&null==O&&null==X&&(null==p||(0,h.p)(p,d.uY))&&null==v&&(null==b||1===b)&&(null==y||1===y)}const T=(0,d.CN)(1,1,.5),I=(0,d.CN)(0,.6,.2),P=(0,d.CN)(0,1,.2)},18597:(lt,N,_)=>{_.d(N,{z:()=>R});var h=_(74567),d=_(43167),f=_(14051),D=_(71781),T=_(24493),I=_(96443),P=_(28700);function R(O,y){O.include(f.Q,y),O.include(d.NL,y),O.fragment.include(D.a);const b=y.output===h.V.ObjectAndLayerIdColor,X=(0,h.LG)(y.output),p=(0,h.RN)(y.output)&&y.oitPass===I.Y.ColorAlpha,v=(0,h.RN)(y.output)&&y.oitPass!==I.Y.ColorAlpha,F=y.discardInvisibleFragments;let z=0;(v||X||p)&&O.outputs.add("fragColor","vec4",z++),X&&O.outputs.add("fragEmission","vec4",z++),p&&O.outputs.add("fragAlpha","float",z++),O.fragment.code.add(T.H`
    void outputColorHighlightOID(vec4 finalColor, const in vec3 vWorldPosition) {
      ${(0,T.If)(b,"finalColor.a = 1.0;")}

      ${(0,T.If)(F,`if (finalColor.a < ${T.H.float(P.Q)}) { discard; }`)}

      finalColor = applySlice(finalColor, vWorldPosition);
      ${(0,T.If)(p,T.H`fragColor = premultiplyAlpha(finalColor);
             fragAlpha = finalColor.a;`)}
      ${(0,T.If)(v,"fragColor = finalColor;")}
      ${(0,T.If)(X,"fragEmission = finalColor.a * getEmissions();")}
      calculateOcclusionAndOutputHighlight();
      ${(0,T.If)(b,"outputObjectAndLayerIdColor();")}
    }
  `)}},10294:(lt,N,_)=>{var D,T,O;_.d(N,{OG:()=>T,hM:()=>D}),_(62789),_(83675),_(23234),(O=D||(D={})).OPAQUE="opaque-color",O.TRANSPARENT="transparent-color",O.COMPOSITE="composite-color",O.FINAL="final-color",function(O){O.SSAO="ssao",O.LASERLINES="laserline-color",O.ANTIALIASING="aa-color",O.HIGHLIGHTS="highlight-color",O.MAGNIFIER="magnifier-color",O.OCCLUDED="occluded-color",O.VIEWSHED="viewshed-color",O.OPAQUE_ENVIRONMENT="opaque-environment-color",O.TRANSPARENT_ENVIRONMENT="transparent-environment-color",O.FOCUSAREA="focus-area"}(T||(T={}))},22057:(lt,N,_)=>{_.d(N,{A:()=>y});var h=_(8189),d=_(98877),f=_(5922),D=_(48900),T=_(85211),I=_(76576),P=_(10294),R=_(67496);let O=class extends d.A{constructor(b){super(b),this.view=null,this.consumes={required:[]},this.produces=P.hM.COMPOSITE,this.requireGeometryDepth=!1,this._dirty=!0}initialize(){this.addHandles([(0,D.wB)(()=>this.view.ready,b=>{b&&this.view._stage?.renderer.addRenderNode(this)},D.Vh)])}destroy(){this.view._stage?.renderer?.removeRenderNode(this)}precompile(){}render(){throw new f.A("RenderNode:render-function-not-implemented","render() is not implemented.")}get camera(){return this.view.state.camera.clone()}get sunLight(){return this.bindParameters.lighting.legacy}get gl(){return this.view._stage.renderView.renderingContext.gl}get techniques(){return this.view._stage.renderView.techniques}acquireOutputFramebuffer(){const b=this._frameBuffer?.getTexture()?.descriptor,X=this.view._stage.renderer.fboCache.acquire(b?.width??640,b?.height??480,this.produces);return X.fbo?.initializeAndBind(),X}bindRenderTarget(){return this._frameBuffer?.fbo?.initializeAndBind(),this._frameBuffer}requestRender(b){b===R.C7.UPDATE&&this.view._stage?.renderView.requestRender(b),this._dirty=!0}resetWebGLState(){this.renderingContext.resetState(),this.renderingContext.bindFramebuffer(this._frameBuffer?.fbo)}get fboCache(){return this.view._stage.renderer.fboCache}get bindParameters(){return this.renderContext.bind}get renderingContext(){return this.view._stage.renderView.renderingContext}get renderContext(){return this.view._stage?.renderer.renderContext}updateAnimation(b){return!!this._dirty&&(this._dirty=!1,!0)}doRender(b){this._frameBuffer=b.find(({name:X})=>X===this.produces);try{return this.render(b)}finally{this._frameBuffer=null}}};(0,h._)([(0,T.MZ)({constructOnly:!0})],O.prototype,"view",void 0),(0,h._)([(0,T.MZ)({constructOnly:!0})],O.prototype,"consumes",void 0),(0,h._)([(0,T.MZ)()],O.prototype,"produces",void 0),(0,h._)([(0,T.MZ)({readOnly:!0})],O.prototype,"techniques",null),O=(0,h._)([(0,I.$)("esri.views.3d.webgl.RenderNode")],O);const y=O},5077:(lt,N,_)=>{var h,d,f;_.d(N,{N:()=>h,z:()=>d}),(f=h||(h={}))[f.RED=0]="RED",f[f.RG=1]="RG",f[f.RGBA4=2]="RGBA4",f[f.RGBA=3]="RGBA",f[f.RGBA_MIPMAP=4]="RGBA_MIPMAP",f[f.R16F=5]="R16F",f[f.RGBA16F=6]="RGBA16F",function(f){f[f.DEPTH_STENCIL_TEXTURE=0]="DEPTH_STENCIL_TEXTURE",f[f.DEPTH16_BUFFER=1]="DEPTH16_BUFFER"}(d||(d={}))},70938:(lt,N,_)=>{_.d(N,{Y:()=>d,m:()=>f});const d=class h{},f=new d},64157:(lt,N,_)=>{_.d(N,{n:()=>f}),_(3248);var d=_(2006);class f{constructor(T,I,P,R,O=null){if(this.name=T,this.type=I,this.arraySize=O,this.bind={[d.c.Bind]:null,[d.c.Pass]:null,[d.c.Draw]:null},R)switch(P){case void 0:break;case d.c.Bind:this.bind[d.c.Bind]=R;break;case d.c.Pass:this.bind[d.c.Pass]=R;break;case d.c.Draw:this.bind[d.c.Draw]=R}}equals(T){return this.type===T.type&&this.name===T.name&&this.arraySize===T.arraySize}}},45825:(lt,N,_)=>{function h(I,P,R){for(let O=0;O<R;++O)P[2*O]=I[O],P[2*O+1]=I[O]-P[2*O]}function f(I,P){const R=I.length;for(let O=0;O<R;++O)T[0]=I[O],P[O]=T[0];return P}function D(I,P){const R=I.length;for(let O=0;O<R;++O)T[0]=I[O],T[1]=I[O]-T[0],P[O]=T[1];return P}_.d(N,{Zo:()=>f,jA:()=>D,jS:()=>h});const T=new Float32Array(2)},41396:(lt,N,_)=>{_.d(N,{Ey:()=>S,Ky:()=>O,Ms:()=>x,Os:()=>R,Uy:()=>p,Xt:()=>X,gh:()=>T,hG:()=>b,kn:()=>v,p3:()=>D});var h=_(67496),d=_(50915);function f(M,j,q=d.Tb.ADD,k=[0,0,0,0]){return{srcRgb:M,srcAlpha:M,dstRgb:j,dstAlpha:j,opRgb:q,opAlpha:q,color:{r:k[0],g:k[1],b:k[2],a:k[3]}}}function D(M,j,q,k,_t=d.Tb.ADD,Dt=d.Tb.ADD,It=[0,0,0,0]){return{srcRgb:M,srcAlpha:j,dstRgb:q,dstAlpha:k,opRgb:_t,opAlpha:Dt,color:{r:It[0],g:It[1],b:It[2],a:It[3]}}}const T=f(d.dn.ZERO,d.dn.ONE_MINUS_SRC_ALPHA),R=(f(d.dn.ONE,d.dn.ZERO),f(d.dn.ONE,d.dn.ONE),f(d.dn.ONE,d.dn.ONE_MINUS_SRC_ALPHA)),O=D(d.dn.SRC_ALPHA,d.dn.ONE,d.dn.ONE_MINUS_SRC_ALPHA,d.dn.ONE_MINUS_SRC_ALPHA),y={face:d.Y7.BACK,mode:d.Ac.CCW},b={face:d.Y7.FRONT,mode:d.Ac.CCW},X=M=>M===h.s2.Back?y:M===h.s2.Front?b:null,p={zNear:0,zFar:1},v={r:!0,g:!0,b:!0,a:!0};function F(M){return V.intern(M)}function z(M){return w.intern(M)}function tt(M){return Z.intern(M)}function et(M){return Et.intern(M)}function W(M){return nt.intern(M)}function G(M){return ft.intern(M)}function H(M){return ct.intern(M)}function L(M){return Tt.intern(M)}function C(M){return gt.intern(M)}function S(M){return dt.intern(M)}class U{constructor(j,q){this._makeKey=j,this._makeRef=q,this._interns=new Map}intern(j){if(!j)return null;const q=this._makeKey(j),k=this._interns;return k.has(q)||k.set(q,this._makeRef(j)),k.get(q)??null}}function Y(M){return"["+M.join(",")+"]"}const V=new U(A,M=>({__tag:"Blending",...M}));function A(M){return M?Y([M.srcRgb,M.srcAlpha,M.dstRgb,M.dstAlpha,M.opRgb,M.opAlpha,M.color.r,M.color.g,M.color.b,M.color.a]):null}const w=new U(B,M=>({__tag:"Culling",...M}));function B(M){return M?Y([M.face,M.mode]):null}const Z=new U(at,M=>({__tag:"PolygonOffset",...M}));function at(M){return M?Y([M.factor,M.units]):null}const Et=new U(st,M=>({__tag:"DepthTest",...M}));function st(M){return M?Y([M.func]):null}const nt=new U(ot,M=>({__tag:"StencilTest",...M}));function ot(M){return M?Y([M.function.func,M.function.ref,M.function.mask,M.operation.fail,M.operation.zFail,M.operation.zPass]):null}const ft=new U(ht,M=>({__tag:"DepthWrite",...M}));function ht(M){return M?Y([M.zNear,M.zFar]):null}const ct=new U(mt,M=>({__tag:"ColorWrite",...M}));function mt(M){return M?Y([M.r,M.g,M.b,M.a]):null}const Tt=new U(Pt,M=>({__tag:"StencilWrite",...M}));function Pt(M){return M?Y([M.mask]):null}const gt=new U(ut,M=>({__tag:"DrawBuffers",...M}));function ut(M){return M?Y(M.buffers):null}const dt=new U(function vt(M){return M?Y([A(M.blending),B(M.culling),at(M.polygonOffset),st(M.depthTest),ot(M.stencilTest),ht(M.depthWrite),mt(M.colorWrite),Pt(M.stencilWrite),ut(M.drawBuffers)]):null},M=>({blending:F(M.blending),culling:z(M.culling),polygonOffset:tt(M.polygonOffset),depthTest:et(M.depthTest),stencilTest:W(M.stencilTest),depthWrite:G(M.depthWrite),colorWrite:H(M.colorWrite),stencilWrite:L(M.stencilWrite),drawBuffers:C(M.drawBuffers)}));class x{constructor(j){this._pipelineInvalid=!0,this._blendingInvalid=!0,this._cullingInvalid=!0,this._polygonOffsetInvalid=!0,this._depthTestInvalid=!0,this._stencilTestInvalid=!0,this._depthWriteInvalid=!0,this._colorWriteInvalid=!0,this._stencilWriteInvalid=!0,this._drawBuffersInvalid=!0,this._stateSetters=j}setPipeline(j){(this._pipelineInvalid||j!==this._pipeline)&&(this._setBlending(j.blending),this._setCulling(j.culling),this._setPolygonOffset(j.polygonOffset),this._setDepthTest(j.depthTest),this._setStencilTest(j.stencilTest),this._setDepthWrite(j.depthWrite),this._setColorWrite(j.colorWrite),this._setStencilWrite(j.stencilWrite),this._setDrawBuffers(j.drawBuffers),this._pipeline=j),this._pipelineInvalid=!1}invalidateBlending(){this._blendingInvalid=!0,this._pipelineInvalid=!0}invalidateCulling(){this._cullingInvalid=!0,this._pipelineInvalid=!0}invalidatePolygonOffset(){this._polygonOffsetInvalid=!0,this._pipelineInvalid=!0}invalidateDepthTest(){this._depthTestInvalid=!0,this._pipelineInvalid=!0}invalidateStencilTest(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}invalidateDepthWrite(){this._depthWriteInvalid=!0,this._pipelineInvalid=!0}invalidateColorWrite(){this._colorWriteInvalid=!0,this._pipelineInvalid=!0}invalidateStencilWrite(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}invalidateDrawBuffers(){this._drawBuffersInvalid=!0,this._pipelineInvalid=!0}_setBlending(j){this._blending=this._setSubState(j,this._blending,this._blendingInvalid,this._stateSetters.setBlending),this._blendingInvalid=!1}_setCulling(j){this._culling=this._setSubState(j,this._culling,this._cullingInvalid,this._stateSetters.setCulling),this._cullingInvalid=!1}_setPolygonOffset(j){this._polygonOffset=this._setSubState(j,this._polygonOffset,this._polygonOffsetInvalid,this._stateSetters.setPolygonOffset),this._polygonOffsetInvalid=!1}_setDepthTest(j){this._depthTest=this._setSubState(j,this._depthTest,this._depthTestInvalid,this._stateSetters.setDepthTest),this._depthTestInvalid=!1}_setStencilTest(j){this._stencilTest=this._setSubState(j,this._stencilTest,this._stencilTestInvalid,this._stateSetters.setStencilTest),this._stencilTestInvalid=!1}_setDepthWrite(j){this._depthWrite=this._setSubState(j,this._depthWrite,this._depthWriteInvalid,this._stateSetters.setDepthWrite),this._depthWriteInvalid=!1}_setColorWrite(j){this._colorWrite=this._setSubState(j,this._colorWrite,this._colorWriteInvalid,this._stateSetters.setColorWrite),this._colorWriteInvalid=!1}_setStencilWrite(j){this._stencilWrite=this._setSubState(j,this._stencilWrite,this._stencilWriteInvalid,this._stateSetters.setStencilWrite),this._stencilTestInvalid=!1}_setDrawBuffers(j){this._drawBuffers=this._setSubState(j,this._drawBuffers,this._drawBuffersInvalid,this._stateSetters.setDrawBuffers),this._drawBuffersInvalid=!1}_setSubState(j,q,k,_t){return(k||j!==q)&&(_t(j),this._pipelineInvalid=!0),j}}},28700:(lt,N,_)=>{_.d(N,{Q:()=>h});const h=1/255.5}}]);