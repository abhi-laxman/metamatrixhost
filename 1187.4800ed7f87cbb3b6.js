"use strict";(self.webpackChunkAngularClient=self.webpackChunkAngularClient||[]).push([[1187],{10442:(N,D,S)=>{S.d(D,{a:()=>U,b:()=>p,c:()=>P,d:()=>m,e:()=>d,f:()=>v,l:()=>j,n:()=>_,t:()=>g});var w=S(27980);function m(t,s,i){g(t.typedBuffer,s.typedBuffer,i,t.typedBufferStride,s.typedBufferStride)}function g(t,s,i,e=3,r=e){if(t.length/e!==Math.ceil(s.length/r))return t;const n=t.length/e,o=i[0],u=i[1],c=i[2],l=i[4],h=i[5],M=i[6],b=i[8],E=i[9],$=i[10],R=i[12],L=i[13],k=i[14];let B=0,I=0;for(let T=0;T<n;T++){const C=s[B],V=s[B+1],F=s[B+2];t[I]=o*C+l*V+b*F+R,t[I+1]=u*C+h*V+E*F+L,t[I+2]=c*C+M*V+$*F+k,B+=r,I+=e}return t}function P(t,s,i){p(t.typedBuffer,s.typedBuffer,i,t.typedBufferStride,s.typedBufferStride)}function p(t,s,i,e=3,r=e){if(t.length/e!==Math.ceil(s.length/r))return;const n=t.length/e,o=i[0],u=i[1],c=i[2],l=i[3],h=i[4],M=i[5],b=i[6],E=i[7],$=i[8];let R=0,L=0;for(let k=0;k<n;k++){const B=s[R],I=s[R+1],T=s[R+2];t[L]=o*B+l*I+b*T,t[L+1]=u*B+h*I+E*T,t[L+2]=c*B+M*I+$*T,R+=r,L+=e}}function x(t,s,i,e=3,r=e){const n=Math.min(t.length/e,s.length/r);let o=0,u=0;for(let c=0;c<n;c++)t[u]=i*s[o],t[u+1]=i*s[o+1],t[u+2]=i*s[o+2],o+=r,u+=e;return t}function j(t,s,i,e){v(t.typedBuffer,s.typedBuffer,i,e,t.typedBufferStride,s.typedBufferStride)}function v(t,s,i,e,r=3,n=r){const o=Math.min(t.length/r,s.length/n);let u=0,c=0;const l=1/w.Tf;for(let h=0;h<o;h++)t[c]=e*(i*s[u])**l,t[c+1]=e*(i*s[u+1])**l,t[c+2]=e*(i*s[u+2])**l,u+=n,c+=r}function U(t,s,i,e=3,r=e){const n=t.length/e;if(n!==Math.ceil(s.length/r))return t;let o=0,u=0;for(let c=0;c<n;c++)t[u]=s[o]+i[0],t[u+1]=s[o+1]+i[1],t[u+2]=s[o+2]+i[2],o+=r,u+=e;return t}function d(t,s){_(t.typedBuffer,s.typedBuffer,t.typedBufferStride,s.typedBufferStride)}function _(t,s,i=3,e=i){const r=Math.min(t.length/i,s.length/e);let n=0,o=0;for(let u=0;u<r;u++){const c=s[n],l=s[n+1],h=s[n+2],M=c*c+l*l+h*h;if(M>0){const b=1/Math.sqrt(M);t[o]=b*c,t[o+1]=b*l,t[o+2]=b*h}n+=e,o+=i}}S(3248),S(35150),Object.freeze(Object.defineProperty({__proto__:null,linearToSRGB:v,linearToSRGBView:j,normalize:_,normalizeView:d,scale:x,scaleView:function O(t,s,i){x(t.typedBuffer,s.typedBuffer,i,t.typedBufferStride,s.typedBufferStride)},shiftRight:function a(t,s,i){const e=Math.min(t.count,s.count),r=t.typedBuffer,n=t.typedBufferStride,o=s.typedBuffer,u=s.typedBufferStride;let c=0,l=0;for(let h=0;h<e;h++)r[l]=o[c]>>i,r[l+1]=o[c+1]>>i,r[l+2]=o[c+2]>>i,c+=u,l+=n},transformMat3:p,transformMat3View:P,transformMat4:g,transformMat4View:m,translate:U},Symbol.toStringTag,{value:"Module"}))},17559:(N,D,S)=>{S.d(D,{a:()=>p,b:()=>d,l:()=>U,n:()=>x,t:()=>O});var w=S(27980),y=(S(3248),S(35150));function p(a,f,t){O(a.typedBuffer,f.typedBuffer,t,a.typedBufferStride,f.typedBufferStride)}function O(a,f,t,s=4,i=s){if(a.length/s!=f.length/i)return;const e=a.length/s,r=t[0],n=t[1],o=t[2],u=t[3],c=t[4],l=t[5],h=t[6],M=t[7],b=t[8];let E=0,$=0;for(let R=0;R<e;R++){const L=f[E],k=f[E+1],B=f[E+2],I=f[E+3];a[$]=r*L+u*k+h*B,a[$+1]=n*L+c*k+M*B,a[$+2]=o*L+l*k+b*B,a[$+3]=I,E+=i,$+=s}}function x(a,f){const t=Math.min(a.count,f.count),s=a.typedBuffer,i=a.typedBufferStride,e=f.typedBuffer,r=f.typedBufferStride;for(let n=0;n<t;n++){const o=n*i,u=n*r,c=e[u],l=e[u+1],h=e[u+2],M=c*c+l*l+h*h;if(M>0){const b=1/Math.sqrt(M);s[o]=b*c,s[o+1]=b*l,s[o+2]=b*h}}}function v(a,f,t,s=4){const i=Math.min(a.length/s,f.count),e=f.typedBuffer,r=f.typedBufferStride;let n=0,o=0;for(let u=0;u<i;u++)a[o]=t*e[n],a[o+1]=t*e[n+1],a[o+2]=t*e[n+2],a[o+3]=t*e[n+3],n+=r,o+=s}function U(a,f,t,s){d(a.typedBuffer,f,t,s,a.typedBufferStride)}function d(a,f,t,s,i=4){const e=Math.min(a.length/i,f.count),r=f.typedBuffer,n=f.typedBufferStride;let o=0,u=0;const c=1/w.Tf;for(let l=0;l<e;l++)a[u]=s*(t*r[o])**c,a[u+1]=s*(t*r[o+1])**c,a[u+2]=s*(t*r[o+2])**c,a[u+3]=s*t*r[o+3],o+=n,u+=i}Object.freeze(Object.defineProperty({__proto__:null,linearToSRGB:d,linearToSRGBView:U,normalize:x,scale:v,scaleView:function j(a,f,t){v(a.typedBuffer,f,t,a.typedBufferStride)},transformMat3:O,transformMat3View:p,transformMat4:function P(a,f,t,s=4,i=s){if(a.length/s!=f.length/i)return void y.A.getLogger("esri.views.3d.support.buffer.math").error("source and destination buffers need to have the same number of elements");const e=a.length/s,r=t[0],n=t[1],o=t[2],u=t[3],c=t[4],l=t[5],h=t[6],M=t[7],b=t[8],E=t[9],$=t[10],R=t[11],L=t[12],k=t[13],B=t[14],I=t[15];let T=0,C=0;for(let V=0;V<e;V++){const F=f[T],z=f[T+1],G=f[T+2],W=f[T+3];a[C]=r*F+c*z+b*G+L*W,a[C+1]=n*F+l*z+E*G+k*W,a[C+2]=o*F+h*z+$*G+B*W,a[C+3]=u*F+M*z+R*G+I*W,T+=i,C+=s}},transformMat4View:function g(a,f,t){if(a.count!==f.count)return;const s=a.count,i=t[0],e=t[1],r=t[2],n=t[3],o=t[4],u=t[5],c=t[6],l=t[7],h=t[8],M=t[9],b=t[10],E=t[11],$=t[12],R=t[13],L=t[14],k=t[15],B=a.typedBuffer,I=a.typedBufferStride,T=f.typedBuffer,C=f.typedBufferStride;for(let V=0;V<s;V++){const F=V*I,z=V*C,G=T[z],W=T[z+1],K=T[z+2],X=T[z+3];B[F]=i*G+o*W+h*K+$*X,B[F+1]=e*G+u*W+M*K+R*X,B[F+2]=r*G+c*W+b*K+L*X,B[F+3]=n*G+l*W+E*K+k*X}}},Symbol.toStringTag,{value:"Module"}))},67571:(N,D,S)=>{S.d(D,{O:()=>w});class w{constructor(){this._outer=new Map}clear(){this._outer.clear()}get empty(){return 0===this._outer.size}get(y,m){return this._outer.get(y)?.get(m)}getInner(y){return this._outer.get(y)}set(y,m,g){const P=this._outer.get(y);P?P.set(m,g):this._outer.set(y,new Map([[m,g]]))}delete(y,m){const g=this._outer.get(y);g&&(g.delete(m),0===g.size&&this._outer.delete(y))}forEach(y){this._outer.forEach((m,g)=>y(m,g))}forAll(y){for(const m of this._outer.values())for(const g of m.values())y(g)}}},32954:(N,D,S)=>{function w(){return[1,0,0,0,1,0,0,0,1]}function y(p,O,x,j,v,U,d,_,a){return[p,O,x,j,v,U,d,_,a]}S.d(D,{fA:()=>y,vt:()=>w,zK:()=>g});const g=[1,0,0,0,1,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:g,clone:function A(p){return[p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8]]},create:w,createView:function m(p,O){return new Float64Array(p,O,9)},fromValues:y},Symbol.toStringTag,{value:"Module"}))},11445:(N,D,S)=>{S.d(D,{Qf:()=>O,Qh:()=>g,RS:()=>y,ez:()=>v,i5:()=>U,lM:()=>m,qK:()=>j});var w=S(79139);const y=16;function m(d){if(!d)return 0;let _=j;for(const a in d)d.hasOwnProperty(a)&&(_+=p(d[a],!1));return _}function g(d){if(!d)return 0;if("number"==typeof d[0])return O(d);if(Array.isArray(d))return function P(d){const _=d.length;if(0===_||"number"==typeof d[0])return x(d,8);let a=v;for(let f=0;f<_;f++)a+=p(d[f]);return a}(d);let _=j;for(const a in d)d.hasOwnProperty(a)&&(_+=p(d[a]));return _}function p(d,_=!0){switch(typeof d){case"object":return _?g(d):j;case"string":return function A(d){return 32+d.length}(d);case"number":return y;case"boolean":return 4;default:return 8}}function O(...d){return d.reduce((_,a)=>_+(a?(0,w.iu)(a)?a.byteLength+U:Array.isArray(a)?x(a,y):0:0),0)}function x(d,_){return v+d.length*_}const j=32,v=16,U=145},2006:(N,D,S)=>{var w,A;S.d(D,{c:()=>w}),(A=w||(w={}))[A.Bind=0]="Bind",A[A.Pass=1]="Pass",A[A.Draw=2]="Draw"},43713:(N,D,S)=>{S.d(D,{N5:()=>p});var w=S(5922),y=(S(3248),S(35150)),m=S(2006);const g=()=>y.A.getLogger("esri.views.3d.webgl-engine.core.shaderModules.shaderBuilder");class P{constructor(){this._includedModules=new Map}include(e,r){this._includedModules.has(e)?this._includedModules.get(e):(this._includedModules.set(e,r),e(this.builder,r))}}class p extends P{constructor(){super(...arguments),this.vertex=new v,this.fragment=new v,this.attributes=new U,this.varyings=new d,this.extensions=new _,this.outputs=new a}get fragmentUniforms(){return this.fragment.uniforms.entries}get builder(){return this}generate(e,r=!1){const n=this.extensions.generateSource(e),o=this.attributes.generateSource(e),u=this.varyings.generateSource(e),c="vertex"===e?this.vertex:this.fragment,l=c.uniforms.generateSource(),h=c.code.generateSource(),M=c.main.generateSource(r),b="vertex"===e?s:t,E=c.constants.generateSource(),$=this.outputs.generateSource(e);return`#version 300 es\n${n.join("\n")}\n${b}\n${E.join("\n")}\n${l.join("\n")}\n${o.join("\n")}\n${u.join("\n")}\n${$.join("\n")}\n${h.join("\n")}\n${M.join("\n")}`}generateBind(e){const r=new Map;this.vertex.uniforms.entries.forEach(u=>{const c=u.bind[m.c.Bind];c&&r.set(u.name,c)}),this.fragment.uniforms.entries.forEach(u=>{const c=u.bind[m.c.Bind];c&&r.set(u.name,c)});const n=Array.from(r.values()),o=n.length;return u=>{for(let c=0;c<o;++c)n[c](e,u)}}generateBindPass(e){const r=new Map;this.vertex.uniforms.entries.forEach(u=>{const c=u.bind[m.c.Pass];c&&r.set(u.name,c)}),this.fragment.uniforms.entries.forEach(u=>{const c=u.bind[m.c.Pass];c&&r.set(u.name,c)});const n=Array.from(r.values()),o=n.length;return(u,c)=>{for(let l=0;l<o;++l)n[l](e,u,c)}}generateBindDraw(e){const r=new Map;this.vertex.uniforms.entries.forEach(u=>{const c=u.bind[m.c.Draw];c&&r.set(u.name,c)}),this.fragment.uniforms.entries.forEach(u=>{const c=u.bind[m.c.Draw];c&&r.set(u.name,c)});const n=Array.from(r.values()),o=n.length;return(u,c,l)=>{for(let h=0;h<o;++h)n[h](e,l,u,c)}}}class O{constructor(e){this._stage=e,this._entries=new Map}add(...e){for(const r of e)this._add(r);return this._stage}get(e){return this._entries.get(e)}_add(e){if(null!=e){if(this._entries.has(e.name)&&!this._entries.get(e.name).equals(e))throw new w.A(`Duplicate uniform name ${e.name} for different uniform type`);this._entries.set(e.name,e)}else g().error(`Trying to add null Uniform from ${(new Error).stack}.`)}generateSource(){return Array.from(this._entries.values()).map(e=>null!=e.arraySize?`uniform ${e.type} ${e.name}[${e.arraySize}];`:`uniform ${e.type} ${e.name};`)}get entries(){return Array.from(this._entries.values())}}class x{constructor(e){this._stage=e,this._bodies=new Array}add(e){return this._bodies.push(e),this._stage}generateSource(e){if(this._bodies.length>0)return[`void main() {\n ${this._bodies.join("\n")||""} \n}`];if(e)throw new w.A("Shader does not contain main function body.");return[]}}class j{constructor(e){this._stage=e,this._entries=new Array}add(e){return this._entries.push(e),this._stage}generateSource(){return this._entries}}class v extends P{constructor(){super(...arguments),this.uniforms=new O(this),this.main=new x(this),this.code=new j(this),this.constants=new f(this)}get builder(){return this}}class U{constructor(){this._entries=new Array}add(e,r){this._entries.push([e,r])}generateSource(e){return"fragment"===e?[]:this._entries.map(r=>`in ${r[1]} ${r[0]};`)}}class d{constructor(){this._entries=new Map}add(e,r){this._entries.has(e)?g().warn(`Ignoring duplicate varying ${r} ${e}`):this._entries.set(e,r)}generateSource(e){const r=new Array;return this._entries.forEach((n,o)=>r.push("vertex"===e?`out ${n} ${o};`:`in ${n} ${o};`)),r}}class _{constructor(){this._entries=new Set}add(e){this._entries.add(e)}generateSource(e){const r="vertex"===e?_.ALLOWLIST_VERTEX:_.ALLOWLIST_FRAGMENT;return Array.from(this._entries).filter(n=>r.includes(n)).map(n=>`#extension ${n} : enable`)}}_.ALLOWLIST_FRAGMENT=["GL_EXT_shader_texture_lod","GL_OES_standard_derivatives"],_.ALLOWLIST_VERTEX=[];class a{constructor(){this._entries=new Map}add(e,r,n=0){const o=this._entries.get(n);o?.name!==e||o?.type!==r?this._entries.set(n,{name:e,type:r}):g().warn(`Fragment shader output location ${n} occupied`)}generateSource(e){if("vertex"===e)return[];0===this._entries.size&&this._entries.set(0,{name:a.DEFAULT_NAME,type:a.DEFAULT_TYPE});const r=new Array;return this._entries.forEach((n,o)=>r.push(`layout(location = ${o}) out ${n.type} ${n.name};`)),r}}a.DEFAULT_TYPE="vec4",a.DEFAULT_NAME="fragColor";class f{constructor(e){this._stage=e,this._entries=new Set}add(e,r,n){let o="ERROR_CONSTRUCTOR_STRING";switch(r){case"float":o=f._numberToFloatStr(n);break;case"int":o=f._numberToIntStr(n);break;case"bool":o=n.toString();break;case"vec2":o=`vec2(${f._numberToFloatStr(n[0])},                            ${f._numberToFloatStr(n[1])})`;break;case"vec3":o=`vec3(${f._numberToFloatStr(n[0])},                            ${f._numberToFloatStr(n[1])},                            ${f._numberToFloatStr(n[2])})`;break;case"vec4":o=`vec4(${f._numberToFloatStr(n[0])},                            ${f._numberToFloatStr(n[1])},                            ${f._numberToFloatStr(n[2])},                            ${f._numberToFloatStr(n[3])})`;break;case"ivec2":o=`ivec2(${f._numberToIntStr(n[0])},                             ${f._numberToIntStr(n[1])})`;break;case"ivec3":o=`ivec3(${f._numberToIntStr(n[0])},                             ${f._numberToIntStr(n[1])},                             ${f._numberToIntStr(n[2])})`;break;case"ivec4":o=`ivec4(${f._numberToIntStr(n[0])},                             ${f._numberToIntStr(n[1])},                             ${f._numberToIntStr(n[2])},                             ${f._numberToIntStr(n[3])})`;break;case"mat2":case"mat3":case"mat4":o=`${r}(${Array.prototype.map.call(n,u=>f._numberToFloatStr(u)).join(", ")})`}return this._entries.add(`const ${r} ${e} = ${o};`),this._stage}static _numberToIntStr(e){return e.toFixed(0)}static _numberToFloatStr(e){return Number.isInteger(e)?e.toFixed(1):e.toString()}generateSource(){return Array.from(this._entries)}}const t="#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n  precision highp int;\n  precision highp sampler2D;\n#else\n  precision mediump float;\n  precision mediump int;\n  precision mediump sampler2D;\n#endif",s="precision highp float;\nprecision highp sampler2D;"}}]);