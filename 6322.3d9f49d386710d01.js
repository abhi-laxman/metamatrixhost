"use strict";(self.webpackChunkAngularClient=self.webpackChunkAngularClient||[]).push([[6322,8860,5204,9728,6773,6598,2117],{33087:(N,B,s)=>{s.d(B,{q:()=>S});var f=s(60611);class S{constructor(n,R){this._storage=new f.F,this.id="",this.name="",this.size=0,this._storage.maxSize=n,this._storage.register(this),R&&this._storage.registerRemoveFunc("",R)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(n,R,g=1){this._storage.put(this,n,R,g,1)}pop(n){return this._storage.pop(this,n)}get(n){return this._storage.get(this,n)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(n){this._storage.maxSize=n}resetHitRate(){}}},60611:(N,B,s)=>{s.d(B,{F:()=>g,Ti:()=>S});var f=s(12438);const S=-3,j=S-1;var n,T;(T=n||(n={}))[T.ALL=0]="ALL",T[T.SOME=1]="SOME";class g{get size(){return this._size}constructor(c=10485760){this._maxSize=c,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new f.A,this._users=new f.A}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear()}register(c){this._users.push(c)}deregister(c){this._users.removeUnordered(c)}registerRemoveFunc(c,i){this._removeFuncs.push([c,i])}deregisterRemoveFunc(c){this._removeFuncs.filterInPlace(i=>i[0]!==c)}get maxSize(){return this._maxSize}set maxSize(c){this._maxSize=Math.max(c,-1),this._checkSize()}getSize(c,i){return this._db.get(c.id+i)?.size??0}put(c,i,_,u,h){const p=this._db.get(i=c.id+i);if(p&&(this._size-=p.size,c.size-=p.size,this._db.delete(i),p.entry!==_&&this._notifyRemove(i,p.entry,p.size,n.ALL)),u>this._maxSize)return void this._notifyRemove(i,_,u,n.ALL);if(void 0===_)return void console.warn("Refusing to cache undefined entry ");if(!u||u<0)return console.warn(`Refusing to cache entry with size ${u} for key ${i}`),void this._notifyRemove(i,_,0,n.ALL);const P=1+Math.max(h,j)-S;this._db.set(i,new b(_,u,P)),this._size+=u,c.size+=u,this._checkSize()}updateSize(c,i,_,u){const h=this._db.get(i=c.id+i);if(h&&h.entry===_){for(this._size-=h.size,c.size-=h.size;u>this._maxSize;){const p=this._notifyRemove(i,_,u,n.SOME);if(!(null!=p&&p>0))return void this._db.delete(i);u=p}h.size=u,this._size+=u,c.size+=u,this._checkSize()}}pop(c,i){const _=this._db.get(i=c.id+i);if(_)return this._size-=_.size,c.size-=_.size,this._db.delete(i),++this._hit,_.entry;++this._miss}get(c,i){const _=this._db.get(i=c.id+i);if(void 0!==_)return this._db.delete(i),_.lives=_.lifetime,this._db.set(i,_),++this._hit,_.entry;++this._miss}peek(c,i){const _=this._db.get(c.id+i);return _?++this._hit:++this._miss,_?.entry}get performanceInfo(){const c={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},i={},_=new Array;this._db.forEach((p,P)=>{const d=p.lifetime;_[d]=(_[d]||0)+p.size,this._users.forAll(y=>{const{id:v,name:o}=y;P.startsWith(v)&&(i[o]=(i[o]||0)+p.size)})});const u={};this._users.forAll(p=>{const P=p.name;"hitRate"in p&&"number"==typeof p.hitRate&&!isNaN(p.hitRate)&&p.hitRate>0?(i[P]=i[P]||0,u[P]=Math.round(100*p.hitRate)+"%"):u[P]="0%"});const h=Object.keys(i);h.sort((p,P)=>i[P]-i[p]),h.forEach(p=>c[p]=Math.round(i[p]/2**20)+"MB / "+u[p]);for(let p=_.length-1;p>=0;--p){const P=_[p];P&&(c["Priority "+(p+S-1)]=Math.round(P/this._size*100)+"%")}return c}resetStats(){this._hit=this._miss=0,this._users.forAll(c=>c.resetHitRate())}clear(c){const i=c.id;this._db.forEach((_,u)=>{u.startsWith(i)&&(this._size-=_.size,this._db.delete(u),this._notifyRemove(u,_.entry,_.size,n.ALL))}),c.size=0}clearAll(){this._db.forEach((c,i)=>this._notifyRemove(i,c.entry,c.size,n.ALL)),this._users.forAll(c=>c.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(c,i,_,u){let h;return this._removeFuncs.some(p=>{if(c.startsWith(p[0])){const P=p[1](i,u,_);return"number"==typeof P&&(h=P),!0}return!1}),h}_checkSize(){this._users.forAll(c=>this._checkSizeLimits(c)),this._checkSizeLimits()}_checkSizeLimits(c){const i=c??this;if(i.maxSize<0||i.size<=i.maxSize)return;const _=c?.id;let u=!0;for(;u;){u=!1;for(const[h,p]of this._db)if(0===p.lifetime&&(!_||h.startsWith(_))){if(this._purgeItem(h,p,c),i.size<=.9*i.maxSize)return;u||=this._db.has(h)}}for(const[h,p]of this._db)if((!_||h.startsWith(_))&&(this._purgeItem(h,p,c),i.size<=.9*i.maxSize))return}_purgeItem(c,i,_=this._users.find(u=>c.startsWith(u.id))){if(this._db.delete(c),i.lives<=1){this._size-=i.size,_&&(_.size-=i.size);const u=this._notifyRemove(c,i.entry,i.size,n.SOME);null!=u&&u>0&&(this._size+=u,_&&(_.size+=u),i.lives=i.lifetime,i.size=u,this._db.set(c,i))}else--i.lives,this._db.set(c,i)}}class b{constructor(c,i,_){this.entry=c,this.size=i,this.lifetime=_,this.lives=_}}},94376:(N,B,s)=>{s.d(B,{p:()=>b});var f=s(8189),S=s(85211),g=(s(3248),s(35150),s(40707),s(76576));const b=T=>{let c=class extends T{get apiKey(){return this._isOverridden("apiKey")?this._get("apiKey"):function z(T){return"portalItem"in T}(this)?this.portalItem?.apiKey:null}set apiKey(i){null!=i?this._override("apiKey",i):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return(0,f._)([(0,S.MZ)({type:String})],c.prototype,"apiKey",null),c=(0,f._)([(0,g.$)("esri.layers.mixins.APIKeyMixin")],c),c}},43124:(N,B,s)=>{s.d(B,{Rr:()=>T,fY:()=>_,ne:()=>i});var f=s(8189),S=s(89221),j=s(85211),z=(s(3248),s(35150),s(40707),s(76576)),b=s(15848);function T(u,h,p){if(!u)return null;const P=u.find(y=>!!y.field);if(!P)return null;const d=new b.A;return d.read(P,p),[d]}const i={type:[b.A],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:T},write:{writer:function c(u,h,p,P){const d=u.find(y=>!!y.field);d&&(0,S.sM)(p,[d.toJSON()],h)}}}},_=u=>{let h=class extends u{constructor(){super(...arguments),this.orderBy=null}};return(0,f._)([(0,j.MZ)(i)],h.prototype,"orderBy",void 0),h=(0,f._)([(0,z.$)("esri.layers.mixins.OrderedLayer")],h),h}},47063:(N,B,s)=>{s.d(B,{A:()=>h});var f=s(8189),S=s(90660),j=s(71065),n=s(85211),b=(s(3248),s(35150),s(40707),s(17221)),T=s(76576),c=s(50305),i=s(39664),_=s(69741);let u=class extends(S.A.ClonableMixin(j.A)){constructor(p){super(p),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(p){const P={};for(const d of Object.keys(p))P[d]=(0,i.rS)(p[d]);return P}writeDomains(p,P){const d={};for(const y of Object.keys(p))p[y]&&(d[y]=p[y]?.toJSON());P.domains=d}};(0,f._)([(0,n.MZ)({json:{write:!0}})],u.prototype,"id",void 0),(0,f._)([(0,n.MZ)({json:{write:!0}})],u.prototype,"name",void 0),(0,f._)([(0,n.MZ)({json:{write:!0}})],u.prototype,"domains",void 0),(0,f._)([(0,b.w)("domains")],u.prototype,"readDomains",null),(0,f._)([(0,c.K)("domains")],u.prototype,"writeDomains",null),(0,f._)([(0,n.MZ)({type:[_.A],json:{write:!0}})],u.prototype,"templates",void 0),u=(0,f._)([(0,T.$)("esri.layers.support.FeatureType")],u);const h=u},73258:(N,B,s)=>{s.d(B,{A:()=>h});var f=s(5922),S=s(71065),j=s(35150),n=s(60797),R=s(24098),g=s(86300),z=s(20543),b=s(22639),T=s(44549);const u=new Map;class h{static fromJSON(o){return new h(o.fields,o.timeZoneByFieldName)}static fromLayer(o){return new h(o.fields??[],y(o))}static fromLayerJSON(o){return new h(o.fields??[],y(o))}constructor(o=[],M){this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=o||[],this._timeZoneByFieldName=M?new Map(M):null;const O=[];for(const l of this.fields){const t=l?.name,a=P(t);if(t&&a){const r=p(t);this._fieldsMap.set(t,l),this._fieldsMap.set(r,l),this._normalizedFieldsMap.set(a,l),O.push(`${r}:${l.type}:${this._timeZoneByFieldName?.get(t)}`),(0,g.vE)(l)?(this.dateFields.push(l),this._dateFieldsSet.add(l)):(0,g.WA)(l)&&(this._numericFieldsSet.add(l),this.numericFields.push(l)),(0,g.te)(l)||(0,g.Xz)(l)||(l.editable=null==l.editable||!!l.editable,l.nullable=null==l.nullable||!!l.nullable)}}O.sort(),this.uid=O.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const o of this.fields)(0,g.te)(o)||(0,g.Xz)(o)||o.nullable||void 0!==(0,g.lD)(o)||this._requiredFields.push(o)}return this._requiredFields}equals(o){return this.uid===o?.uid}has(o){return null!=this.get(o)}get(o){if(!o)return;let M=this._fieldsMap.get(o);return M||(M=this._fieldsMap.get(p(o))??this._normalizedFieldsMap.get(P(o)),M&&this._fieldsMap.set(o,M),M)}getTimeZone(o){const M=this.get(o&&"string"!=typeof o?o.name:o);return M?this._timeZoneByFieldName?this._timeZoneByFieldName.get(M.name):"date"===M.type||"esriFieldTypeDate"===M.type?(j.A.getLogger("esri.layers.support.FieldsIndex").errorOnce(new f.A("getTimeZone:no-timezone-information",`no time zone information for field '${M.name}'`)),z.n$):d.has(M.type)?z.L5:null:null}getLuxonTimeZone(o){const M=this.getTimeZone(o);return M?M===z.L5?R.GB.instance:M===z.n$?T.mQ.utcInstance:(0,n.tE)(u,M,()=>T.oh.create(M)):null}isDateField(o){return this._dateFieldsSet.has(this.get(o))}isTimeOnlyField(o){return(0,g.OH)(this.get(o))}isNumericField(o){return this._numericFieldsSet.has(this.get(o))}normalizeFieldName(o){return this.get(o)?.name??void 0}toJSON(){return{fields:this.fields.map(o=>S.A.isSerializable(o)?o.toJSON():o),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}function p(v){return v.trim().toLowerCase()}function P(v){return(0,g.rS)(v)?.toLowerCase()??""}const d=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function y(v){const o=new Map;if(!v.fields)return o;const M=!0===v.datesInUnknownTimezone,{timeInfo:O,editFieldsInfo:l}=v,t=(O?"startField"in O?O.startField:O.startTimeField:"")??"",a=(O?"endField"in O?O.endField:O.endTimeField:"")??"",r=function _(v){return"dateFieldsTimeZone"in v}(v)?v.dateFieldsTimeZone??null:v.dateFieldsTimeReference?(0,b.ZS)(v.dateFieldsTimeReference):null,E=l?function c(v){return"timeZone"in v}(l)?l.timeZone??r:l.dateFieldsTimeReference?(0,b.ZS)(l.dateFieldsTimeReference):r??z.n$:null,x=O?function i(v){return"timeZone"in v}(O)?O.timeZone??r:O.timeReference?(0,b.ZS)(O.timeReference):r:null,C=new Map([[p(l?.creationDateField??""),E],[p(l?.editDateField??""),E],[p(t),x],[p(a),x]]);for(const{name:L,type:F}of v.fields)if(d.has(F))o.set(L,z.L5);else if("date"!==F&&"esriFieldTypeDate"!==F)o.set(L,null);else if(M)o.set(L,z.L5);else{const U=C.get(p(L??""))??r;o.set(L,U)}return o}},64584:(N,B,s)=>{s.d(B,{A:()=>i});var T,f=s(8189),S=s(31178),j=s(71065),n=s(85211),b=(s(3248),s(35150),s(40707),s(76576));let c=T=class extends j.A{constructor(_){super(_),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new S.A}clone(){return new T({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};(0,f._)([(0,n.MZ)({type:String,json:{write:{isRequired:!0}}})],c.prototype,"floorField",void 0),(0,f._)([(0,n.MZ)({json:{read:!1,write:!1}})],c.prototype,"viewAllMode",void 0),(0,f._)([(0,n.MZ)({json:{read:!1,write:!1}})],c.prototype,"viewAllLevelIds",void 0),c=T=(0,f._)([(0,b.$)("esri.layers.support.LayerFloorInfo")],c);const i=c},15848:(N,B,s)=>{s.d(B,{A:()=>_});var T,f=s(8189),S=s(49976),j=s(71065),n=s(85211),b=(s(3248),s(35150),s(40707),s(76576));const c=new S.J({asc:"ascending",desc:"descending"});let i=T=class extends j.A{constructor(u){super(u),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new T({field:this.field,valueExpression:this.valueExpression,order:this.order})}};(0,f._)([(0,n.MZ)({type:String,json:{write:!0}})],i.prototype,"field",void 0),(0,f._)([(0,n.MZ)({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],i.prototype,"valueExpression",void 0),(0,f._)([(0,n.MZ)({type:c.apiValues,json:{type:c.jsonValues,read:c.read,write:c.write}})],i.prototype,"order",void 0),i=T=(0,f._)([(0,b.$)("esri.layers.support.OrderByInfo")],i);const _=i},36267:(N,B,s)=>{s.d(B,{A:()=>u});var f=s(8189),S=s(90660),j=s(49976),n=s(71065),R=s(85211),T=(s(3248),s(35150),s(40707),s(76576));const c=new j.J({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),i=new j.J({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let _=class extends(S.A.ClonableMixin(n.A)){constructor(h){super(h),this.cardinality=null,this.catalogId=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};(0,f._)([(0,R.MZ)({json:{read:c.read,write:c.write}})],_.prototype,"cardinality",void 0),(0,f._)([(0,R.MZ)({json:{name:"catalogID"}})],_.prototype,"catalogId",void 0),(0,f._)([(0,R.MZ)({json:{read:!0,write:!0}})],_.prototype,"composite",void 0),(0,f._)([(0,R.MZ)({json:{read:!0,write:!0}})],_.prototype,"id",void 0),(0,f._)([(0,R.MZ)({json:{read:!0,write:!0}})],_.prototype,"keyField",void 0),(0,f._)([(0,R.MZ)({json:{read:!0,write:!0}})],_.prototype,"keyFieldInRelationshipTable",void 0),(0,f._)([(0,R.MZ)({json:{read:!0,write:!0}})],_.prototype,"name",void 0),(0,f._)([(0,R.MZ)({json:{read:!0,write:!0}})],_.prototype,"relatedTableId",void 0),(0,f._)([(0,R.MZ)({json:{read:!0,write:!0}})],_.prototype,"relationshipTableId",void 0),(0,f._)([(0,R.MZ)({json:{read:i.read,write:i.write}})],_.prototype,"role",void 0),_=(0,f._)([(0,T.$)("esri.layers.support.Relationship")],_);const u=_},85791:(N,B,s)=>{s.d(B,{A:()=>P});var f=s(10467),S=s(8189),j=s(98877),n=s(89447),R=s(31178),g=s(85211),c=(s(3248),s(35150),s(40707),s(76576)),i=s(86300),_=s(48218);let p=class extends j.A{constructor(d){super(d),this._featureUtils=null,this.effectivePopupTemplate=null}get _arcadeTask(){return this.expressionsUsedInTitle.length>0?this._get("_arcadeTask")||(0,n.UT)(()=>(0,_.lw)()):null}get featureUtilsPromise(){return this._get("featureUtilsPromise")??s.e(3958).then(s.bind(s,93958)).then(d=>this._featureUtils=d)}get calculatedExpressions(){const d=new R.A;if(!this.expressionsUsedInTitle.length)return d;if(!this._arcadeTask?.value){for(const y of this.expressionsUsedInTitle??[])d.push({name:y.name,invalid:!0});return d}for(const y of this.expressionsUsedInTitle)try{const v=this._arcadeTask.value.arcade.parseScript(y.expression,["$layer","$map","$datastore"]);if(v.isAsync){d.push({name:y.name,invalid:!0});break}d.push({name:y.name,syntax:v,invalid:!1,func:this._arcadeTask.value.arcade.compileScript(v,{vars:{$feature:"any"}})})}catch{d.push({name:y.name,invalid:!0});break}return d}get expressionsUsedInTitle(){let d=this.effectivePopupTemplate?.title??"";return"string"!=typeof d?[]:(d=d.toLowerCase(),this.effectivePopupTemplate?.expressionInfos?.filter(y=>d.includes(`{expression/${y.name.toLowerCase()}}`))??[])}get fieldInfoMap(){return this._featureUtils?this._createFieldInfoMap(this._featureUtils.getAllFieldInfos(this.effectivePopupTemplate)):null}get hasBadExpressions(){return this.calculatedExpressions.some(d=>!0===d.invalid)}get requiredFields(){const d=new Set;if(this._arcadeTask?.value&&!this.hasBadExpressions)for(const v of this.calculatedExpressions?.toArray()??[])try{const o=this._arcadeTask.value.arcade.extractFieldLiterals(v.syntax);for(const M of o){const O=M.split("."),l=this.fieldsIndex.get(O.at(-1)??"");l&&d.add(l.name)}}catch{}const y=this._extractFieldNames(this.workingTitle);for(const v of y){const o=this.fieldsIndex.get(v);o&&d.add(o.name)}return d}get titleFromDisplayField(){let d="";return this.displayField&&(d=this.fieldsIndex.get(this.displayField)?.name??""),d||(d=this.fieldsIndex.get(this.objectIdField)?.name??""),d?`{${d}}`:""}get workingTitle(){const d=this.effectivePopupTemplate?this.effectivePopupTemplate.title:"";return""===d||null==d||this.hasBadExpressions||"string"!=typeof d?this.titleFromDisplayField:d}getTitle(d,y,v){var o=this;return(0,f.A)(function*(){try{const{attributes:M}=y,O=v?.timeZone??"system",[{substituteFieldsInLinksAndAttributes:l}]=yield Promise.all([o.featureUtilsPromise,o._arcadeTask?.promise]);if(v.fetchMissingFields&&(y=yield o._checkAndReQueryGraphic(d,y)),o.workingTitle&&o.fieldInfoMap){const t=o._createFormattedAttributes(d,y,O).global;return l({attributes:M,expressionAttributes:null,fieldInfoMap:o.fieldInfoMap,globalAttributes:t,layer:d,text:o.workingTitle})}return""}catch{}return""})()}_checkAndReQueryGraphic(d,y){var v=this;return(0,f.A)(function*(){const o=y.getObjectId();if(null==o)return y;if(!(0,i.Kl)(v.requiredFields,y)){const M=d.createQuery();M.where="1=1",M.outFields=[...v.requiredFields],M.objectIds=[o];const O=yield d.queryFeatures(M);if(1===O?.features.length)return O.features[0]}return y})()}_createFieldInfoMap(d){const y=new Map;if(!d)return y;for(const v of d){if(!v.fieldName)continue;const o=this.fieldsIndex.get(v.fieldName),M=o?.name??v.fieldName;v.fieldName=M,y.set(M.toLowerCase(),v)}return y}_createFormattedAttributes(d,y,v="system"){const o=this.effectivePopupTemplate?.fieldInfos??[],M={};if(!this._featureUtils)return{};if(!this.hasBadExpressions&&this.calculatedExpressions.length>0&&this._arcadeTask?.value){const l=this._arcadeTask.value.Feature.createFromGraphicLikeObject(y.geometry,y.attributes,d,null);for(const t of this.calculatedExpressions)try{M[`expression/${t.name}`]=t.func({vars:{$feature:l}})}catch{}}const O={...y.attributes,...M};return{global:this._featureUtils.formatAttributes({fieldInfos:o,attributes:O,graphic:y,timeZone:v,layer:d,fieldInfoMap:this.fieldInfoMap}),content:[]}}_extractFieldNames(d){return(0,i.nw)(d).filter(y=>!(0===y.indexOf("relationships/")||0===y.indexOf("expression/")))}};(0,S._)([(0,g.MZ)({readOnly:!0})],p.prototype,"_arcadeTask",null),(0,S._)([(0,g.MZ)()],p.prototype,"_featureUtils",void 0),(0,S._)([(0,g.MZ)({readOnly:!0})],p.prototype,"featureUtilsPromise",null),(0,S._)([(0,g.MZ)({readOnly:!0})],p.prototype,"calculatedExpressions",null),(0,S._)([(0,g.MZ)()],p.prototype,"displayField",void 0),(0,S._)([(0,g.MZ)()],p.prototype,"effectivePopupTemplate",void 0),(0,S._)([(0,g.MZ)()],p.prototype,"expressionsUsedInTitle",null),(0,S._)([(0,g.MZ)()],p.prototype,"fieldsIndex",void 0),(0,S._)([(0,g.MZ)()],p.prototype,"fieldInfoMap",null),(0,S._)([(0,g.MZ)()],p.prototype,"fields",void 0),(0,S._)([(0,g.MZ)()],p.prototype,"objectIdField",void 0),(0,S._)([(0,g.MZ)()],p.prototype,"requiredFields",null),p=(0,S._)([(0,c.$)("esri.layers.support.TitleCreator")],p);const P=p},27960:(N,B,s)=>{s.d(B,{Ch:()=>R,mW:()=>j,u2:()=>n});var f=s(69287),S=s(63484);function j(u,h){return{...h,filterMode:u.mode}}function n(u,h){return z(u,h).next().value??null}function R(u,h,p){const P=function g(u){if("manual"===c(u))return null;const h=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:p,maxScale:P}of u.filters)h[0]=Math.max(h[0],i(p)),h[1]=Math.min(h[1],_(P));return h}(u);if(P&&((0,f.gg)(h,P[0])||(0,f.ZH)(p,P[1])))return"";const d=Array.from(z(u,h,p)),y=function b(u,h,p){if(0===u.length)return!0;const P=i(u.at(0)?.minScale),d=_(u.at(-1)?.maxScale);if((0,f.ZH)(P,h)||(0,f.gg)(d,p))return!0;for(let y=0;y<u.length-1;y++){const v=u[y];if((0,f.ZH)(i(u[y+1].minScale),_(v.maxScale)))return!0}return!1}(d,h,p)?"1=1":d.map(v=>v.where||"1=1").reduce((v,o)=>(0,S.IW)(v,o),"");return y&&"1=1"!==y?y:""}function*z(u,h,p){if("manual"===c(u)){const P=u.filters.find(d=>d.id===u.activeFilterId);P&&(yield P)}else{"object"==typeof h&&(h=h.scale);for(const P of u.filters)T(P.minScale,P.maxScale,h,p)&&(yield P)}}function T(u,h,p,P){return u=i(u),p=i(p),h=_(h),!(!(0,f.Sp)(p,u)&&(P??p)>u||(0,f.Hx)(h,p)||void 0!==P&&(0,f.Sp)(P,u))}function c(u){return"mode"in u?u.mode:u.filterMode}function i(u){return u||Number.POSITIVE_INFINITY}function _(u){return u||0}},6829:(N,B,s)=>{s.d(B,{CW:()=>u,Fm:()=>b,Hz:()=>h,JQ:()=>_,JZ:()=>a,ND:()=>P,R_:()=>g,U9:()=>i,fu:()=>S,nr:()=>p,oF:()=>j,rq:()=>T,z$:()=>c});const f=[["binary","application/octet-stream","bin",""]];function S(r,E){return null!=o(E.name,r?.supportedFormats??[])}function j(r,E){if(!r)return!1;const x=T(E,r.supportedFormats??[]);return null!=x&&r.editFormats.includes(x)}function g(r,E){return M(function v(r,E){const x=r.toLowerCase();return d(E).find(C=>O(C)===x)}(r,E))}function z(r,E){return M(o(r,E))}function b(r,E){return O(function y(r,E){return d(E).find(x=>M(x)===r)}(r,E))}function T(r,E){return z(r.name,E)??g(r.type,E)}function c(r,E,x){return g(r,x)??z(E,x)}function i({supportedFormats:r}){return c("model/gltf-binary","glb",r)}function _(r){const E=i(r);return null!=E&&r.editFormats.includes(E)}function u({supportedFormats:r}){return c("model/gltf+json","gltf",r)}function h(r){if(!r)return null;const E=i(r),x=u(r);let C=null;for(const L of r.queryFormats){if(L===E)return L;L===x&&(C=L)}return C}function p({supportedFormats:r}){return c("application/esri3do-SR_world","wld",r)}function P({supportedFormats:r}){return c("application/esri3do-SR_prj","prj",r)}function d(r){return[...f,...r]}function o(r,E){const x=r.toLowerCase();return d(E).find(C=>function l(r){return r?.[2].split(",").map(E=>E.toLowerCase())??[]}(C).some(L=>x.endsWith(L)))}function M(r){return r?.[0]}function O(r){return r?.[1].toLowerCase()}function a(r){return r.tables?.find(E=>"assetMaps"===E.role)}},4858:(N,B,s)=>{s.d(B,{BI:()=>h,D3:()=>_,XJ:()=>u,lc:()=>i,mX:()=>P,rU:()=>p,tH:()=>O});var f=s(1119);const S="__begin__",j="__end__",n=new RegExp(S,"ig"),R=new RegExp(j,"ig"),g=new RegExp("^"+S,"i"),z=new RegExp(j+"$","i"),b='"',T=b+" + ",c=" + "+b;function i(l){return l.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function _(l){return l.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function u(l){const t={expression:"",type:"none"};return l.labelExpressionInfo?l.labelExpressionInfo.value?(t.expression=l.labelExpressionInfo.value,t.type="conventional"):l.labelExpressionInfo.expression&&(t.expression=l.labelExpressionInfo.expression,t.type="arcade"):null!=l.labelExpression&&(t.expression=i(l.labelExpression),t.type="conventional"),t}function h(l){const t=u(l);switch(t.type){case"conventional":return P(t.expression);case"arcade":return t.expression}return null}function p(l){const t=u(l);switch(t.type){case"conventional":return function y(l){return l?.match(d)?.[1].trim()||null}(t.expression);case"arcade":return O(t.expression)}return null}function P(l){let t;return l?(t=(0,f.HC)(l,a=>S+'$feature["'+a+'"]'+j),t=g.test(t)?t.replace(g,""):b+t,t=z.test(t)?t.replace(z,""):t+b,t=t.replaceAll(n,T).replaceAll(R,c)):t='""',t}const d=/^\s*\{([^}]+)\}\s*$/i,v=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,o=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,M=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function O(l){if(!l)return null;let t=v.exec(l)||o.exec(l);return t?t[1]||t[3]:(t=M.exec(l),t?t[2]:null)}},90543:(N,B,s)=>{s.d(B,{S:()=>_,d:()=>l});var f=s(3248),S=s(68438),j=s(6829);function n(t,a,r){return!!g(t,a,r)}function R(t,a,r){return g(t,a,r)}function g(t,a,r){return t&&t.hasOwnProperty(a)?t[a]:r}const z={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function b(t){const a=t?.supportedSpatialAggregationStatistics?.map(r=>r.toLowerCase());return{envelope:!!a?.includes("envelopeaggregate"),centroid:!!a?.includes("centroidaggregate"),convexHull:!!a?.includes("convexhullaggregate")}}function T(t,a){return!!t?.supportedOperationsWithCacheHint?.map(E=>E.toLowerCase())?.includes(a.toLowerCase())}function c(t){const a=t?.supportedStatisticTypes?.map(r=>r.toLowerCase());return{count:!!a?.includes("count"),sum:!!a?.includes("sum"),min:!!a?.includes("min"),max:!!a?.includes("max"),avg:!!a?.includes("avg"),var:!!a?.includes("var"),stddev:!!a?.includes("stddev"),percentileContinuous:!!a?.includes("percentile_continuous"),percentileDiscrete:!!a?.includes("percentile_discrete"),envelope:!!a?.includes("envelopeaggregate"),centroid:!!a?.includes("centroidaggregate"),convexHull:!!a?.includes("convexhullaggregate")}}function i(t){const a=t?.supportedNormalizationTypes?.map(r=>r.toLowerCase());return{field:!!a?.includes("field"),log:!!a?.includes("log"),naturalLog:!!a?.includes("naturallog"),percentOfTotal:!!a?.includes("percentoftotal"),squareRoot:!!a?.includes("squareroot")}}function _(t,a){return{analytics:u(t),attachment:h(t),data:p(t),metadata:P(t),operations:d(t.capabilities,t,a),query:y(t,a),queryAttributeBins:M(t),queryRelated:v(t),queryTopFeatures:o(t),editing:O(t)}}function u(t){return{supportsCacheHint:T(t.advancedQueryCapabilities,"queryAnalytics")}}function h(t){const a=t.attachmentProperties,r={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:T(t.advancedQueryCapabilities,"queryAttachments"),supportsOrderByFields:n(t.advancedQueryCapabilities,"supportsQueryAttachmentOrderByFields",!1),supportsResize:n(t,"supportsAttachmentsResizing",!1)};return a&&Array.isArray(a)&&a.forEach(E=>{const x=z[E.name];x&&(r[x]=!!E.isEnabled)}),r}function p(t){return{isVersioned:n(t,"isDataVersioned",!1),isBranchVersioned:n(t,"isDataBranchVersioned",!1),supportsAttachment:n(t,"hasAttachments",!1),supportsM:n(t,"hasM",!1),supportsZ:n(t,"hasZ",!1)}}function P(t){return{supportsAdvancedFieldProperties:n(t,"supportsFieldDescriptionProperty",!1)}}function d(t,a,r){const E=t?t.toLowerCase().split(",").map(ue=>ue.trim()):[],x=r?(0,S.qg)(r):null,C=E.includes(null!=x&&"MapServer"===x.serverType?"data":"query"),L=E.includes("editing")&&!a.datesInUnknownTimezone;let F=L&&E.includes("create"),U=L&&E.includes("delete"),w=L&&E.includes("update");const K=E.includes("changetracking"),V=a.advancedQueryCapabilities;return L&&!(F||U||w)&&(F=U=w=!0),{supportsCalculate:n(a,"supportsCalculate",!1),supportsTruncate:n(a,"supportsTruncate",!1),supportsValidateSql:n(a,"supportsValidateSql",!1),supportsAdd:F,supportsDelete:U,supportsEditing:L,supportsChangeTracking:K,supportsQuery:C,supportsQueryAnalytics:n(V,"supportsQueryAnalytic",!1),supportsQueryAttachments:n(V,"supportsQueryAttachments",!1),supportsQueryBins:n(V,"supportsQueryBins",!1),supportsQueryTopFeatures:n(V,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:n(a,"supportsAttachmentsResizing",!1),supportsSync:E.includes("sync"),supportsUpdate:w,supportsExceedsLimitStatistics:n(a,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:n(a,"supportsAsyncConvert3D",!1)}}function y(t,a){const r=t.advancedQueryCapabilities,E=t.ownershipBasedAccessControlForFeatures,x=t.archivingInfo,C=t.currentVersion,L=a?.includes("MapServer"),F=!L||C>=(0,f.A)("mapserver-pbf-version-support"),U=(0,S.Wo)(a),w=new Set((t.supportedQueryFormats??"").split(",").map(K=>K.toLowerCase().trim()));return{maxRecordCount:R(t,"maxRecordCount",void 0),maxRecordCountFactor:R(t,"maxRecordCountFactor",void 0),standardMaxRecordCount:R(t,"standardMaxRecordCount",void 0),supportedSpatialAggregationStatistics:b(r),supportsCacheHint:n(r,"supportsQueryWithCacheHint",!1)||T(r,"query"),supportsCentroid:n(r,"supportsReturningGeometryCentroid",!1),supportsCompactGeometry:U,supportsCurrentUser:n(r,"supportsCurrentUserQueries",!1),supportsDefaultSpatialReference:n(r,"supportsDefaultSR",!1),supportsDisjointSpatialRelationship:n(r,"supportsDisjointSpatialRel",!1),supportsDistance:n(r,"supportsQueryWithDistance",!1),supportsDistinct:n(r,"supportsDistinct",t.supportsAdvancedQueries),supportsExtent:n(r,"supportsReturningQueryExtent",!1),supportsFormatPBF:F&&w.has("pbf"),supportsFullTextSearch:n(r,"supportsFullTextSearch",!1),supportsGeometryProperties:n(r,"supportsReturningGeometryProperties",!1),supportsHavingClause:n(r,"supportsHavingClause",!1),supportsHistoricMoment:n(x,"supportsQueryWithHistoricMoment",!1),supportsMaxRecordCountFactor:n(r,"supportsMaxRecordCountFactor",!1),supportsOrderBy:n(r,"supportsOrderBy",t.supportsAdvancedQueries),supportsPagination:n(r,"supportsPagination",!1),supportsPercentileStatistics:n(r,"supportsPercentileStatistics",!1),supportsQuantization:n(t,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:n(t,"supportsQuantizationEditMode",!1),supportsQueryByAnonymous:n(E,"allowAnonymousToQuery",!0),supportsQueryByOthers:n(E,"allowOthersToQuery",!0),supportsQueryGeometry:n(t,"supportsReturningQueryGeometry",!1),supportsResultType:n(r,"supportsQueryWithResultType",!1),supportsReturnMesh:!!(0,j.Hz)(t.infoFor3D),supportsSpatialAggregationStatistics:n(r,"supportsSpatialAggregationStatistics",!1),supportsSqlExpression:n(r,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:n(t,"useStandardizedQueries",!1),supportsStatistics:n(r,"supportsStatistics",t.supportsStatistics),supportsTopFeaturesQuery:n(r,"supportsTopFeaturesQuery",!1),supportsTrueCurve:n(r,"supportsTrueCurve",!1),tileMaxRecordCount:R(t,"tileMaxRecordCount",void 0)}}function v(t){const a=t.advancedQueryCapabilities,r=n(a,"supportsAdvancedQueryRelated",!1);return{supportsPagination:n(a,"supportsQueryRelatedPagination",!1),supportsCount:r,supportsOrderBy:r,supportsCacheHint:T(a,"queryRelated")}}function o(t){return{supportsCacheHint:T(t.advancedQueryCapabilities,"queryTopFilter")}}function M(t){const a=t?t.queryBinsCapabilities:void 0;return{supportsDate:n(a,"supportsDateBin",!1),supportsFixedInterval:n(a,"supportsFixedIntervalBin",!1),supportsAutoInterval:n(a,"supportsAutoIntervalBin",!1),supportsFixedBoundaries:n(a,"supportsFixedBoundariesBin",!1),supportsStackBy:n(a,"supportsStackBy",!1),supportsSplitBy:n(a,"supportsSplitBy",!1),supportsSnapToData:n(a,"supportsSnapToData",!1),supportsReturnFullIntervalBin:n(a,"supportsReturnFullIntervalBin",!1),supportsFirstDayOfWeek:n(a,"supportsFirstDayOfWeek",!1),supportsNormalization:n(a,"supportsNormalization",!1),supportedStatistics:c(a),supportedNormalizationTypes:i(a)}}function O(t){const a=t.ownershipBasedAccessControlForFeatures,r=t?t.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:n(t,"allowGeometryUpdates",!0),supportsGlobalId:n(t,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:n(t,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:n(t,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:n(t,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:n(t,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:n(a,"allowAnonymousToDelete",!0),supportsDeleteByOthers:n(a,"allowOthersToDelete",!0),supportsUpdateByAnonymous:n(a,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:n(a,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:n(r,"supportsAsyncApplyEdits",!1),zDefault:R(t,"zDefault",void 0)}}function l(t){return{operations:{supportsAppend:n(t,"supportsAppend",!1),supportsCoverageQuery:t?.playbackInfo?.klv["0601"]??!1,supportsExportClip:n(t,"supportsExportClip",!1),supportsExportFrameset:n(t,"supportsExportFrameset",!1),supportsMensuration:n(t,"supportsMensuration",!1),supportsUpdate:n(t,"supportsUpdate",!1)}}}},78592:(N,B,s)=>{s.d(B,{O3:()=>T,PU:()=>z,YW:()=>i,ex:()=>R,hv:()=>c,zp:()=>g});var f=s(69287),S=s(67685),j=s(53781),n=s(89141);const R=2.4;function g(_){return(0,S.PN)(_*R)}function z(_){return(0,S.Lz)(_)/R}function b(_,u,h,p){let{color:P,ratio:d}=u,{color:y,ratio:v}=h;v===d&&(1===v?d-=1e-6:v+=1e-6);const o=(0,f.qE)((p-d)/(v-d),0,1);(0,j.l)(_,P.toArray(),y.toArray(),o)}function T(_){const h=new Uint8ClampedArray(2048);if((_=_.filter(({ratio:v})=>v>=0&&v<=1).sort((v,o)=>v.ratio-o.ratio).map(({color:v,ratio:o})=>({color:v,ratio:Math.max(o,.001)}))).length<1)return h;let p=_[0],P=_[0],d=1;const y=(0,n.vt)();for(let v=0;v<512;v++){const o=(v+.5)/512;for(;o>P.ratio&&d<_.length;)p=P,P=_[d++];b(y,p,P,o),h.set(y,4*v)}return h}function c(_,u,h){const p=Math.sqrt(_**2+u**2)/h;return p>1?0:3/(Math.PI*h**2)*(1-p**2)**2}function i(_){return"function"==typeof _?_:_?u=>+u[_]:()=>1}},98789:(N,B,s)=>{s.d(B,{q:()=>S});var f=s(23743);function S(j,n,R){if(!R?.features||!R.hasZ)return;const g=(0,f.N)(R.geometryType,n,j.outSpatialReference);if(null!=g)for(const z of R.features)g(z.geometry)}},93327:(N,B,s)=>{s.d(B,{A:()=>v});var P,f=s(8189),S=s(81098),j=s(49976),n=s(71065),R=s(77806),g=s(85211),T=(s(3248),s(35150),s(17221)),c=s(76576),i=s(50305),_=s(32034),u=s(61320),h=s(6434),p=s(29141);const d=new j.J({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let y=P=class extends n.A{constructor(o){super(o),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(o,M){return this.readFeaturesWithClass(o,M,S.A)}writeGeometryType(o,M,O,l){if(o)return void d.write(o,M,O,l);const{features:t}=this;if(t)for(const a of t)if(null!=a?.geometry)return void d.write(a.geometry.type,M,O,l)}readQueryGeometry(o,M){if(!o)return null;const O=!!o.spatialReference,l=(0,u.rS)(o);return l&&!O&&M.spatialReference&&(l.spatialReference=_.A.fromJSON(M.spatialReference)),l}writeSpatialReference(o,M){if(o)return void(M.spatialReference=o.toJSON());const{features:O}=this;if(O)for(const l of O)if(l&&null!=l.geometry&&l.geometry.spatialReference)return void(M.spatialReference=l.geometry.spatialReference.toJSON())}clone(){return new P(this.cloneProperties())}cloneProperties(){return(0,R.o8)({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(o){const M=this.write();if(M.features&&Array.isArray(o)&&o.length>0)for(let O=0;O<M.features.length;O++){const l=M.features[O];if(l.geometry){const t=o?.[O];l.geometry=t?.toJSON()||l.geometry}}return M}quantize(o){const{scale:[M,O],translate:[l,t]}=o,E=this.features,x=this._getQuantizationFunction(this.geometryType,C=>Math.round((C-l)/M),C=>Math.round((t-C)/O));for(let C=0,L=E.length;C<L;C++)x?.(E[C].geometry)||(E.splice(C,1),C--,L--);return this.transform=o,this}unquantize(){const{geometryType:o,features:M,transform:O}=this;if(!O)return this;const{translate:[l,t],scale:[a,r]}=O;let C=null,L=null;if(this.hasZ&&null!=O?.scale?.[2]){const{translate:[,,U],scale:[,,w]}=O;C=K=>K*w+U}if(this.hasM&&null!=O?.scale?.[3]){const{translate:[,,,U],scale:[,,,w]}=O;L=K=>null==K?K:K*w+U}const F=this._getHydrationFunction(o,U=>U*a+l,U=>t-U*r,C,L);for(const{geometry:U}of M)null!=U&&F&&F(U);return this.transform=null,this}readFeaturesWithClass(o,M,O){const l=_.A.fromJSON(M.spatialReference),t=[];for(let a=0;a<o.length;a++){const r=o[a],E=O.fromJSON(r),x=r.geometry?.spatialReference;null==E.geometry||x||(E.geometry.spatialReference=l);const C=r.aggregateGeometries,L=E.aggregateGeometries;if(C&&null!=L)for(const F in L){const U=L[F],w=C[F],K=w?.spatialReference;null==U||K||(U.spatialReference=l)}t.push(E)}return t}_quantizePoints(o,M,O){let l,t;const a=[];for(let r=0,E=o.length;r<E;r++){const x=o[r];if(r>0){const C=M(x[0]),L=O(x[1]);C===l&&L===t||(a.push([C-l,L-t]),l=C,t=L)}else l=M(x[0]),t=O(x[1]),a.push([l,t])}return a.length>0?a:null}_getQuantizationFunction(o,M,O){return"point"===o?l=>(l.x=M(l.x),l.y=O(l.y),l):"polyline"===o||"polygon"===o?l=>{const t=(0,u.Bi)(l)?l.rings:l.paths,a=[];for(let r=0,E=t.length;r<E;r++){const C=this._quantizePoints(t[r],M,O);C&&a.push(C)}return a.length>0?((0,u.Bi)(l)?l.rings=a:l.paths=a,l):null}:"multipoint"===o?l=>{const t=this._quantizePoints(l.points,M,O);return t&&t.length>0?(l.points=t,l):null}:"extent"===o?l=>l:null}_getHydrationFunction(o,M,O,l,t){return"point"===o?a=>{a.x=M(a.x),a.y=O(a.y),l&&(a.z=l(a.z))}:"polyline"===o||"polygon"===o?a=>{const r=(0,u.Bi)(a)?a.rings:a.paths;let E,x;for(let C=0,L=r.length;C<L;C++){const F=r[C];for(let U=0,w=F.length;U<w;U++){const K=F[U];U>0?(E+=K[0],x+=K[1]):(E=K[0],x=K[1]),K[0]=M(E),K[1]=O(x)}}if(l&&t)for(let C=0,L=r.length;C<L;C++){const F=r[C];for(let U=0,w=F.length;U<w;U++){const K=F[U];K[2]=l(K[2]),K[3]=t(K[3])}}else if(l)for(let C=0,L=r.length;C<L;C++){const F=r[C];for(let U=0,w=F.length;U<w;U++){const K=F[U];K[2]=l(K[2])}}else if(t)for(let C=0,L=r.length;C<L;C++){const F=r[C];for(let U=0,w=F.length;U<w;U++){const K=F[U];K[2]=t(K[2])}}}:"extent"===o?a=>{a.xmin=M(a.xmin),a.ymin=O(a.ymin),a.xmax=M(a.xmax),a.ymax=O(a.ymax),l&&null!=a.zmax&&null!=a.zmin&&(a.zmax=l(a.zmax),a.zmin=l(a.zmin)),t&&null!=a.mmax&&null!=a.mmin&&(a.mmax=t(a.mmax),a.mmin=t(a.mmin))}:"multipoint"===o?a=>{const r=a.points;let E,x;for(let C=0,L=r.length;C<L;C++){const F=r[C];C>0?(E+=F[0],x+=F[1]):(E=F[0],x=F[1]),F[0]=M(E),F[1]=O(x)}if(l&&t)for(let C=0,L=r.length;C<L;C++){const F=r[C];F[2]=l(F[2]),F[3]=t(F[3])}else if(l)for(let C=0,L=r.length;C<L;C++){const F=r[C];F[2]=l(F[2])}else if(t)for(let C=0,L=r.length;C<L;C++){const F=r[C];F[2]=t(F[2])}}:null}};(0,f._)([(0,g.MZ)({type:String,json:{write:!0}})],y.prototype,"displayFieldName",void 0),(0,f._)([(0,g.MZ)({type:Boolean,json:{write:{overridePolicy:o=>({enabled:o})}}})],y.prototype,"exceededTransferLimit",void 0),(0,f._)([(0,g.MZ)({type:[S.A],json:{write:!0}})],y.prototype,"features",void 0),(0,f._)([(0,T.w)("features")],y.prototype,"readFeatures",null),(0,f._)([(0,g.MZ)({type:[p.A],json:{write:!0}})],y.prototype,"fields",void 0),(0,f._)([(0,g.MZ)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:d.read}}})],y.prototype,"geometryType",void 0),(0,f._)([(0,i.K)("geometryType")],y.prototype,"writeGeometryType",null),(0,f._)([(0,g.MZ)({type:Boolean,json:{write:{overridePolicy:o=>({enabled:o})}}})],y.prototype,"hasM",void 0),(0,f._)([(0,g.MZ)({type:Boolean,json:{write:{overridePolicy:o=>({enabled:o})}}})],y.prototype,"hasZ",void 0),(0,f._)([(0,g.MZ)({types:h.yR,json:{write:!0}})],y.prototype,"queryGeometry",void 0),(0,f._)([(0,T.w)("queryGeometry")],y.prototype,"readQueryGeometry",null),(0,f._)([(0,g.MZ)({type:_.A,json:{write:!0}})],y.prototype,"spatialReference",void 0),(0,f._)([(0,i.K)("spatialReference")],y.prototype,"writeSpatialReference",null),(0,f._)([(0,g.MZ)({json:{write:!0}})],y.prototype,"transform",void 0),y=P=(0,f._)([(0,c.$)("esri.rest.support.FeatureSet")],y),y.prototype.toJSON.isDefaultToJSON=!0;const v=y},68470:(N,B,s)=>{s.d(B,{K:()=>_,Q:()=>T});var f=s(8189),S=s(49976),j=s(35150),n=s(85211),z=(s(3248),s(40707),s(15463)),b=s(76576);const T=(0,S.O)()({naturalLog:"natural-log",squareRoot:"square-root",percentOfTotal:"percent-of-total",log:"log",field:"field"}),c="percent-of-total",i="field",_=u=>{let h=class extends u{constructor(){super(...arguments),this.normalizationField=null,this.normalizationMaxValue=null,this.normalizationMinValue=null,this.normalizationTotal=null}get normalizationType(){let p=this._get("normalizationType");const P=!!this.normalizationField,d=null!=this.normalizationTotal;return P||d?(p=P&&i||d&&c||null,P&&d&&j.A.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):p!==i&&p!==c||(p=null),p}set normalizationType(p){this._set("normalizationType",p)}};return(0,f._)([(0,n.MZ)({type:String,json:{name:"parameters.normalizationField",write:!0}})],h.prototype,"normalizationField",void 0),(0,f._)([(0,n.MZ)({type:Number,json:{name:"parameters.normalizationMaxValue",write:!0}})],h.prototype,"normalizationMaxValue",void 0),(0,f._)([(0,n.MZ)({type:Number,json:{name:"parameters.normalizationMinValue",write:!0}})],h.prototype,"normalizationMinValue",void 0),(0,f._)([(0,n.MZ)({type:Number,json:{name:"parameters.normalizationTotal",write:!0}})],h.prototype,"normalizationTotal",void 0),(0,f._)([(0,z.e)(T,{name:"parameters.normalizationType"})],h.prototype,"normalizationType",null),h=(0,f._)([(0,b.$)("esri.rest.support.NormalizationBinParametersMixin")],h),h}},32117:(N,B,s)=>{s.d(B,{$w:()=>d,Bu:()=>L,DW:()=>r,FH:()=>ve,FM:()=>b,G9:()=>n,GV:()=>v,Go:()=>c,K3:()=>fe,Kn:()=>t,MM:()=>u,MO:()=>he,Nl:()=>F,Ny:()=>o,O2:()=>U,UE:()=>w,YC:()=>Pe,YF:()=>V,ZO:()=>_e,_1:()=>x,_H:()=>O,_W:()=>y,_d:()=>a,bs:()=>ce,dI:()=>Ie,e6:()=>i,gQ:()=>z,iA:()=>de,jn:()=>p,lW:()=>_,mA:()=>h,n5:()=>K,pM:()=>E,pV:()=>l,pk:()=>Oe,rB:()=>Ce,s4:()=>j,xo:()=>C,yH:()=>M,yX:()=>Se,zb:()=>ue,zr:()=>P});var f=s(46988);function j(e,m,I,A){return function S(e){return"function"==typeof e}(e)?e(m,I,A):e}function n(e){return[e.r,e.g,e.b,e.a]}const R=" /-,\n";function g(e){let m=e.length;for(;m--;)if(!R.includes(e.charAt(m)))return!1;return!0}function z(e,m){const I=[];let A=0,W=-1;do{if(W=e.indexOf("[",A),W>=A){if(W>A){const D=e.slice(A,W);I.push([D,null,g(D)])}if(A=W+1,W=e.indexOf("]",A),W>=A){if(W>A){const D=m[e.slice(A,W)];D&&I.push([null,D,!1])}A=W+1}}}while(-1!==W);if(A<e.length){const D=e.slice(A);I.push([D,null,g(D)])}return I}function b(e,m,I,A){let W="",D=null;for(const H of m){const[Z,$,J]=H;if(Z)J?D=Z:(D&&(W+=D,D=null),W+=Z);else{let X=$;null!=I&&(X=he($,I));const G=e.attributes[X];G&&(D&&(W+=D,D=null),W+=G)}}return function T(e,m){switch("string"!=typeof e&&(e=String(e)),m){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}(W,A)}function c(e,m,I,A,W,D,H=!0){const Z=m/W,$=I/D,J=Math.ceil(Z/2),X=Math.ceil($/2);for(let G=0;G<D;G++)for(let Q=0;Q<W;Q++){const ee=4*(Q+(H?D-G-1:G)*W);let k=0,te=0,re=0,oe=0,ie=0,ae=0,ne=0;const pe=(G+.5)*$;for(let se=Math.floor(G*$);se<(G+1)*$;se++){const Ee=Math.abs(pe-(se+.5))/X,De=(Q+.5)*Z,Ae=Ee*Ee;for(let le=Math.floor(Q*Z);le<(Q+1)*Z;le++){let Y=Math.abs(De-(le+.5))/J;const q=Math.sqrt(Ae+Y*Y);q>=-1&&q<=1&&(k=2*q*q*q-3*q*q+1,k>0&&(Y=4*(le+se*m),ne+=k*e[Y+3],re+=k,e[Y+3]<255&&(k=k*e[Y+3]/250),oe+=k*e[Y],ie+=k*e[Y+1],ae+=k*e[Y+2],te+=k))}}A[ee]=oe/te,A[ee+1]=ie/te,A[ee+2]=ae/te,A[ee+3]=ne/re}}function i(e){return e?[e[0],e[1],e[2],e[3]/255]:[0,0,0,0]}function _(e){return e.data?.symbol??null}function u(e){return"CIMVectorMarker"===e.type||"CIMPictureMarker"===e.type||"CIMBarChartMarker"===e.type||"CIMCharacterMarker"===e.type||"CIMPieChartMarker"===e.type||"CIMStackedBarChartMarker"===e.type}function h(e){return"CIMGradientStroke"===e.type||"CIMPictureStroke"===e.type||"CIMSolidStroke"===e.type}function p(e){return null!=e&&("CIMGradientFill"===e.type||"CIMHatchFill"===e.type||"CIMPictureFill"===e.type||"CIMSolidFill"===e.type||"CIMWaterFill"===e.type)}function P(e){return null!=e&&("CIMMarkerPlacementAlongLineRandomSize"===e.type||"CIMMarkerPlacementAlongLineSameSize"===e.type||"CIMMarkerPlacementAlongLineVariableSize"===e.type||"CIMMarkerPlacementAtExtremities"===e.type||"CIMMarkerPlacementAtMeasuredUnits"===e.type||"CIMMarkerPlacementAtRatioPositions"===e.type||"CIMMarkerPlacementOnLine"===e.type||"CIMMarkerPlacementOnVertices"===e.type)}const d=(e,m=0)=>null==e||isNaN(e)?m:e,y=(e,m)=>e??m,v=(e,m)=>e??m,o=e=>e.tintColor?i(e.tintColor):[255,255,255,1],M=e=>{if(!e)return!1;for(const m of e)switch(m.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function O(){return Promise.all([s.e(3930),s.e(2076),s.e(4108)]).then(s.bind(s,27815))}function l(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function t(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function a(e){let m="normal",I="normal";if(e){const A=e.toLowerCase();A.includes("italic")?m="italic":A.includes("oblique")&&(m="oblique"),A.includes("bold")?I="bold":A.includes("light")&&(I="lighter")}return{style:m,weight:I}}function r(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function E(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers)for(const m of e.symbolLayers){const I=E(m);if(null!=I)return I}break;case"CIMTextSymbol":return E(e.symbol);case"CIMSolidFill":return e.color}return null}function x(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const m=e.symbolLayers;if(m)for(const I of m){const A=x(I);if(null!=A)return A}break}case"CIMTextSymbol":return x(e.symbol);case"CIMSolidStroke":return e.color}}function C(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers)for(const m of e.symbolLayers){const I=C(m);if(void 0!==I)return I}break;case"CIMTextSymbol":return C(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}function L(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function F(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function U(e){return(e?Object.keys(e):[]).map(m=>({name:m,alias:m,type:"string"==typeof e[m]?"esriFieldTypeString":"esriFieldTypeDouble"}))}const w=e=>e.includes("data:image/svg+xml");function K(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function V(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}function ue(e,m,I,A,W,D,H=!0){const{infos:Z}=D;let $=1,J=0,X=0,G=0,Q=1;for(const{absoluteAnchorPoint:te,offsetX:re,offsetY:oe,rotation:ie,size:ae,frameHeight:ne,rotateClockWise:pe,scaleSymbolsProportionally:se}of Z)Q=te?1:$,X=ye(re,oe,J,Q,X),G=me(re,oe,J,Q,G),ne&&(se||H)&&($*=ae/ne),J=Me(ie,pe,J);const ee=ye(A,W,J,Q,X),k=me(A,W,J,Q,G);return{size:e*$,rotation:Me(m,I,J),offsetX:ee,offsetY:k}}function _e(e){if(null==e)return!1;if(Array.isArray(e))return e.every(m=>_e(m));switch(typeof e){case"string":return!!e;case"number":return!isNaN(e)}}function de(e,m){if("color"===m||"outlinecolor"===m||"backgroundcolor"===m||"borderlinecolor"===m||"tintcolor"===m)return[...f.K[m]];const I=f.D[e];if(!I)throw new Error(`InternalError: default value for type ${e}.`);return I[m]}function fe(e){return"string"==typeof e?function ge(e){return e.split(" ").map(m=>Number(m))}(e):e}function ve(e){return e?.dashTemplate&&(e.dashTemplate=fe(e.dashTemplate)),e}function ce(e){if(null==e)return"Normal";switch(e.type){case"CIMTextSymbol":return e.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const m=e.symbolLayers;if(!m)return"Normal";for(const I of m)if("CIMVectorMarker"===I.type)return ce(I)}break;case"CIMVectorMarker":{const m=e.markerGraphics;if(!m)return"Normal";for(const I of m)if(I.symbol)return ce(I.symbol)}}return"Normal"}function Pe(e){if(e)switch(e.type){case"CIMTextSymbol":return e.height;case"CIMPointSymbol":{let m=0;if(e.symbolLayers)for(const I of e.symbolLayers)if(I)switch(I.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const A=I.size??f.D.CIMVectorMarker.size;A>m&&(m=A);break}}return m}case"CIMLineSymbol":case"CIMPolygonSymbol":{let m=0;if(e.symbolLayers)for(const I of e.symbolLayers)if(I)switch(I.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const A=I.width;null!=A&&A>m&&(m=A);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(I.markerPlacement&&P(I.markerPlacement)){const A=I.size??f.D.CIMVectorMarker.size;A>m&&(m=A)}break;case"CIMPictureFill":{const A=I.height;null!=A&&A>m&&(m=A)}}return m}}}function he(e,m){if(null!==m){const I=m.get(e);return I?I.name:e}return e}function Oe(e){return e.map(m=>({...m,propertyName:V(m.propertyName)}))}function Ce(e){const m={};for(const I in e){const A=e[I];m[V(I)]=A}return m}function me(e,m,I,A,W){const D=I*Math.PI/180;if(D){const H=Math.cos(D);return(Math.sin(D)*e+H*m)*A+W}return m*A+W}function ye(e,m,I,A,W){const D=I*Math.PI/180;return D?(Math.cos(D)*e-Math.sin(D)*m)*A+W:e*A+W}function Me(e,m,I){return m?I-e:I+e}function Ie(e,m,I){const A="Color"===I||"TintColor"===I||"ToColor"===I,W="Rotation"===I||"Angle"===I||"ToRotation"===I;let D=m[V(I)];if(null!=D&&(A?D=[D[0]/255,D[1]/255,D[2]/255,D[3]/255]:W&&(D*=Math.PI/180)),null==D&&(D=de(m.type,I.toLowerCase()),null!=D&&(A?D=[D[0]/255,D[1]/255,D[2]/255,D[3]]:W&&(D*=Math.PI/180))),null!=m.primitiveName){const H=e[m.primitiveName];if(null!=H){const Z=H[I];null==Z||("string"==typeof Z||"number"==typeof Z||Array.isArray(Z)?(D=Z,null!=D&&(A?D=[D[0]/255,D[1]/255,D[2]/255,D[3]/255]:W&&(D*=Math.PI/180))):(D={valueExpressionInfo:Z,defaultValue:D},null!=D&&(A?D={type:"Process",op:"ArcadeColor",value:D}:W&&(D={type:"Process",op:"Divide",left:D,right:180/Math.PI}))))}}if(null==D)throw new Error(`Failed to derive a value or an expression for "${I}".`);return D}function Se(e,m){return Math.max(Math.min((e??m)/100,1),0)}},91644:(N,B,s)=>{s.d(B,{A7:()=>b,Cx:()=>T,Hk:()=>c,JJ:()=>h,SF:()=>i,UK:()=>z,jM:()=>_,x3:()=>u}),s(3248);var S=s(88521),j=s(55417),n=s(46602),R=s(47705),g=s(48254);const z=n.A.fromJSON(g.Cb),b=j.A.fromJSON(g.yM),T=S.A.fromJSON(g.WR),c=R.A.fromJSON(g.JZ);function i(p){if(null==p)return null;switch(p.type){case"mesh":return null;case"point":case"multipoint":return z;case"polyline":return b;case"polygon":case"extent":return T}return null}const _=n.A.fromJSON(g.nC),u=j.A.fromJSON(g.HW),h=S.A.fromJSON(g.b6)},48254:(N,B,s)=>{s.d(B,{Cb:()=>j,HW:()=>b,JR:()=>S,JZ:()=>g,WR:()=>R,b6:()=>T,fT:()=>f,nC:()=>z,yM:()=>n});const f=[252,146,31,255],S=[153,153,153,255],j={type:"esriSMS",style:"esriSMSCircle",size:6,color:f,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},n={type:"esriSLS",style:"esriSLSSolid",width:.75,color:f},R={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},g={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},z={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},b={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},T={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},71655:(N,B,s)=>{var f,S;s.d(B,{X:()=>f}),(S=f||(f={}))[S.SAVE=0]="SAVE",S[S.SAVE_AS=1]="SAVE_AS"}}]);