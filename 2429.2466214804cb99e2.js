"use strict";(self.webpackChunkAngularClient=self.webpackChunkAngularClient||[]).push([[2429],{82429:(B,A,e)=>{e.r(A),e.d(A,{default:()=>R});var s=e(10467),i=e(8189),C=e(2993),P=e(4879),b=e(35150),U=e(39693),I=e(56492),L=e(48900),c=e(85211),g=(e(3248),e(40707),e(74220)),n=e(17221),_=e(76576),y=e(50305),S=e(26514),T=e(95478),x=e(93410),W=e(17049),K=e(85551),$=e(33036),G=e(66323),O=e(64833),v=e(46577),E=e(76227),h=e(74613),l=e(93480),r=e(96381),o=e(71655),p=e(95945),j=e(85263);let m=class extends((0,x.dM)((0,$.j)((0,W.q)((0,K.A)((0,l.l)((0,h.Q)((0,U.P)(T.A)))))))){constructor(t){var d;super(t),d=this,this.allLayers=new C.A({getCollections:()=>[this.layers],getChildrenFunction:M=>"layers"in M?M.layers:null}),this.allTables=(0,E.Z)(this),this.fullExtent=void 0,this.operationalLayerType="GroupLayer",this.spatialReference=void 0,this.type="group",this._debouncedSaveOperations=(0,I.sg)(function(){var M=(0,s.A)(function*(D,f,w){const{save:V,saveAs:Z}=yield e.e(4814).then(e.bind(e,54814));switch(D){case o.X.SAVE:return V(d,f);case o.X.SAVE_AS:return Z(d,w,f)}});return function(D,f,w){return M.apply(this,arguments)}}())}initialize(){this._enforceVisibility(this.visibilityMode,this.visible),this.addHandles([(0,L.wB)(()=>{let t=this.parent;for(;t&&"parent"in t&&t.parent;)t=t.parent;return t&&r.X in t},t=>{const d="prevent-adding-tables";this.removeHandles(d),t&&(this.tables.removeAll(),this.addHandles((0,L.on)(()=>this.tables,"before-add",M=>{M.preventDefault(),b.A.getLogger(this).errorOnce("tables","tables in group layers in a webscene are not supported. Please move the tables from the group layer to the webscene if you want to persist them.")}),d))},L.pc),(0,L.wB)(()=>this.visible,this._onVisibilityChange.bind(this),L.OH)])}destroy(){this.allLayers.destroy(),this.allTables.destroy()}get sourceIsPortalItem(){return this.portalItem&&this.originIdOf("portalItem")===S.Gr.USER}_writeLayers(t,d,M,D){const f=[];if(!t)return f;t.forEach(w=>{const V=(0,j.CJ)(w,D.webmap?D.webmap.getLayerJSONFromResourceInfo(w):null,D);V?.layerType&&f.push(V)}),d.layers=f}set portalItem(t){this._set("portalItem",t)}readPortalItem(t,d,M){const{itemId:D,layerType:f}=d;if("GroupLayer"===f&&D)return new v.default({id:D,portal:M?.portal})}writePortalItem(t,d){t?.id&&(d.itemId=t.id)}set visibilityMode(t){const d=this._get("visibilityMode")!==t;this._set("visibilityMode",t),d&&this._enforceVisibility(t,this.visible)}beforeSave(){var t=this;return(0,s.A)(function*(){return(0,p.d)(t)})()}load(t){const d=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Group Layer","Scene Service"],layerModuleTypeMap:O.S,populateGroupLayer:G.populateGroupLayer},t).catch(M=>{if((0,I.QP)(M),this.sourceIsPortalItem)throw M});return this.addResolvingPromise(d),Promise.resolve(this)}loadAll(){var t=this;return(0,s.A)(function*(){return(0,P.g)(t,d=>{d(t.layers,t.tables)})})()}save(t){var d=this;return(0,s.A)(function*(){return d._debouncedSaveOperations(o.X.SAVE,t)})()}saveAs(t,d){var M=this;return(0,s.A)(function*(){return M._debouncedSaveOperations(o.X.SAVE_AS,d,t)})()}layerAdded(t){t.visible&&"exclusive"===this.visibilityMode?this._turnOffOtherLayers(t):"inherited"===this.visibilityMode&&(t.visible=this.visible),this.hasHandles(t.uid)?console.error(`Layer read to Grouplayer: uid=${t.uid}`):this.addHandles((0,L.wB)(()=>t.visible,d=>this._onChildVisibilityChange(t,d),L.OH),t.uid)}layerRemoved(t){this.removeHandles(t.uid),this._enforceVisibility(this.visibilityMode,this.visible)}_turnOffOtherLayers(t){this.layers.forEach(d=>{d!==t&&(d.visible=!1)})}_enforceVisibility(t,d){if(!(0,g.oY)(this).initialized)return;const M=this.layers;let D=M.find(f=>f.visible);switch(t){case"exclusive":M.length&&!D&&(D=M.at(0),D.visible=!0),this._turnOffOtherLayers(D);break;case"inherited":M.forEach(f=>{f.visible=d})}}_onVisibilityChange(t){"inherited"===this.visibilityMode&&this.layers.forEach(d=>{d.visible=t})}_onChildVisibilityChange(t,d){switch(this.visibilityMode){case"exclusive":d?this._turnOffOtherLayers(t):this._isAnyLayerVisible()||(t.visible=!0);break;case"inherited":t.visible=this.visible}}_isAnyLayerVisible(){return this.layers.some(t=>t.visible)}};(0,i._)([(0,c.MZ)({readOnly:!0,dependsOn:[]})],m.prototype,"allLayers",void 0),(0,i._)([(0,c.MZ)({readOnly:!0})],m.prototype,"allTables",void 0),(0,i._)([(0,c.MZ)({json:{read:!0,write:!0}})],m.prototype,"blendMode",void 0),(0,i._)([(0,c.MZ)()],m.prototype,"fullExtent",void 0),(0,i._)([(0,c.MZ)({readOnly:!0})],m.prototype,"sourceIsPortalItem",null),(0,i._)([(0,c.MZ)({json:{read:!1,write:{ignoreOrigin:!0}}})],m.prototype,"layers",void 0),(0,i._)([(0,y.K)("layers")],m.prototype,"_writeLayers",null),(0,i._)([(0,c.MZ)({type:["GroupLayer"]})],m.prototype,"operationalLayerType",void 0),(0,i._)([(0,c.MZ)({json:{origins:{"web-map":{read:!1,write:{overridePolicy(t,d,M){return{enabled:"Group Layer"===t?.type&&M?.initiator!==this}}}},"web-scene":{read:!1,write:!1}}}})],m.prototype,"portalItem",null),(0,i._)([(0,n.w)("web-map","portalItem",["itemId"])],m.prototype,"readPortalItem",null),(0,i._)([(0,y.K)("web-map","portalItem",{itemId:{type:String}})],m.prototype,"writePortalItem",null),(0,i._)([(0,c.MZ)()],m.prototype,"spatialReference",void 0),(0,i._)([(0,c.MZ)({json:{read:!1},readOnly:!0,value:"group"})],m.prototype,"type",void 0),(0,i._)([(0,c.MZ)({type:["independent","inherited","exclusive"],value:"independent",json:{write:!0,origins:{"web-map":{type:["independent","exclusive"],write:(t,d,M)=>{"inherited"!==t&&(d[M]=t)}}}}})],m.prototype,"visibilityMode",null),m=(0,i._)([(0,_.$)("esri.layers.GroupLayer")],m);const R=m},72211:(B,A,e)=>{e.d(A,{LF:()=>b,M9:()=>U,zu:()=>a});var s=e(5922),i=e(89221),C=e(79845),P=e(26073);function b(n,_,y){try{return function L(n){if(!n||0===n.length)return null;if(function c(n){const _=n[0];return!!_&&"scale"in _}(n)){const _=[];for(const y of n)_.push({scale:y.scale,value:a(y.value)});return _}return a(n)}(n)}catch(S){y?.messages?.push(S)}return null}function U(n,_,y,S){try{const T=function I(n){const _=(0,C.q)(n);return _?(0,P.dw)(_)?_.map(y=>y.toJSON()):_.map(({scale:y,effects:S})=>({scale:y,value:S.map(T=>T.toJSON())})):null}(n);(0,i.sM)(y,T,_)}catch(T){S.messages&&S.messages.push(T)}}function a(n){if(!n?.length)return"";const _=[];for(const y of n){let S=[];switch(y.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":S=[u(y,"amount")];break;case"blur":S=[u(y,"radius","pt")];break;case"hue-rotate":S=[u(y,"angle","deg")];break;case"drop-shadow":S=[u(y,"xoffset","pt"),u(y,"yoffset","pt"),u(y,"blurRadius","pt"),g(y,"color")];break;case"bloom":S=[u(y,"strength"),u(y,"radius","pt"),u(y,"threshold")]}const T=`${y.type}(${S.filter(Boolean).join(" ")})`;(0,C.q)(T),_.push(T)}return _.join(" ")}function u(n,_,y){if(null==n[_])throw new s.A("effect:missing-parameter",`Missing parameter '${_}' in ${n.type} effect`,{effect:n});return y?n[_]+y:""+n[_]}function g(n,_){if(null==n[_])throw new s.A("effect:missing-parameter",`Missing parameter '${_}' in ${n.type} effect`,{effect:n});const y=n[_];return`rgba(${y[0]||0}, ${y[1]||0}, ${y[2]||0}, ${y[3]/255||0})`}},93410:(B,A,e)=>{e.d(A,{LF:()=>u,dM:()=>g,sU:()=>c});var s=e(8189),i=e(85211),U=(e(3248),e(35150),e(40707),e(76576)),I=e(50501),L=e(72211);const c={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:{layerContainerTypes:I.K}},"portal-item":{read:!0,write:{layerContainerTypes:I.K}}}}},a={read:{reader:L.LF},write:{allowNull:!0,writer:L.M9,layerContainerTypes:I.K}},u={json:{read:!1,write:!1,origins:{"web-map":a,"portal-item":a}}},g=n=>{let _=class extends n{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return(0,s._)([(0,i.MZ)(c)],_.prototype,"blendMode",void 0),(0,s._)([(0,i.MZ)(u)],_.prototype,"effect",void 0),_=(0,s._)([(0,U.$)("esri.layers.mixins.BlendLayer")],_),_}},17049:(B,A,e)=>{e.d(A,{q:()=>K});var s=e(8189),i=e(5922),C=e(45272),P=e(85211),b=e(55739),L=(e(3248),e(40707),e(17221)),c=e(76576),a=e(50305),u=e(50501),g=e(34813),n=e(56558);const _={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},y={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},S={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},T={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,Object3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":_,"web-map/basemap":y,"web-map/tables":S,"link-chart/operational-layers":{..._,LinkChartLayer:!0},"link-chart/basemap":y,"link-chart/tables":S,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0,WCS:!0},"portal-item/tables":{ArcGISFeatureLayer:!0,SubtypeGroupTable:!0}};var x=e(22329),W=e(17181);const K=G=>{let O=class extends G{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(v,E,h){return"Group Layer"===h?.portalItem?.type?void 0:v}writeListMode(v,E,h,l){(l&&"ground"===l.layerContainerType||v&&(0,n.R)(this,h,{},l))&&(E[h]=v)}writeOperationalLayerType(v,E,h){v&&(E[h]=v)}writeTitle(v,E){E.title=v??"Layer"}readVisibilityTimeExtent(v){return v?W.A.fromArray(v):null}writeVisibilityTimeExtent(v,E,h,l){v&&"tables"!==l.layerContainerType&&(v.isEmpty?l?.messages&&l.messages.push(new i.A("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):E[h]=v.toArray())}read(v,E){E&&(E.layer=this),(0,g.t)(this,v,h=>super.read(v,h),E)}write(v,E){if(!this.persistenceEnabled&&!E?.ignorePersistenceEnabled)return null;if(E?.origin){const r=`${E.origin}/${E.layerContainerType||"operational-layers"}`;let p=!!T[r]?.[this.operationalLayerType];if("ArcGISTiledElevationServiceLayer"===this.operationalLayerType&&"web-scene/operational-layers"===r&&(p=!1),"ArcGISDimensionLayer"===this.operationalLayerType&&"web-map/operational-layers"===r&&(p=!1),!p)return E.messages?.push(new i.A("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${r}'`,{layer:this})),null}const h=super.write(v,{...E,layer:this}),l=!!E&&!!E.messages&&!!E.messages.filter(r=>r instanceof i.A&&"web-document-write:property-required"===r.name).length;return(0,C.w8)(h?.url)?(E?.messages?.push(new i.A("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&l?null:h}beforeSave(){}};return(0,s._)([(0,P.MZ)({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],O.prototype,"id",void 0),(0,s._)([(0,L.w)("id",["id"])],O.prototype,"readId",null),(0,s._)([(0,P.MZ)(x.C1)],O.prototype,"listMode",void 0),(0,s._)([(0,a.K)("listMode")],O.prototype,"writeListMode",null),(0,s._)([(0,P.MZ)({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:u.K,isRequired:!0}}}}})],O.prototype,"operationalLayerType",void 0),(0,s._)([(0,a.K)("operationalLayerType")],O.prototype,"writeOperationalLayerType",null),(0,s._)([(0,P.MZ)(x.ke)],O.prototype,"opacity",void 0),(0,s._)([(0,P.MZ)({type:Boolean,readOnly:!1})],O.prototype,"persistenceEnabled",void 0),(0,s._)([(0,P.MZ)({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],O.prototype,"title",void 0),(0,s._)([(0,a.K)("title"),(0,a.K)(["web-scene"],"title")],O.prototype,"writeTitle",null),(0,s._)([(0,P.MZ)({type:W.A,json:{origins:{"web-scene":{write:{layerContainerTypes:u.K}}}}})],O.prototype,"visibilityTimeExtent",void 0),(0,s._)([(0,L.w)("visibilityTimeExtent")],O.prototype,"readVisibilityTimeExtent",null),(0,s._)([(0,a.K)(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[b.jz,b.Uv]]}})],O.prototype,"writeVisibilityTimeExtent",null),(0,s._)([(0,P.MZ)({type:Boolean,json:{name:"visibility",write:{layerContainerTypes:u.K}}})],O.prototype,"visible",void 0),O=(0,s._)([(0,c.$)("esri.layers.mixins.OperationalLayer")],O),O}},85551:(B,A,e)=>{e.d(A,{A:()=>O});var s=e(10467),i=e(8189),C=e(23098),P=e(77469),b=e(89563),U=e(89447),I=e(5922),L=e(35150),c=e(11432),a=e(56492),u=e(45272),g=e(85211),y=(e(3248),e(40707),e(17221)),S=e(76576),T=e(50305),x=e(58443),W=e(73874),K=e(46577),$=e(52606),G=e(69927);const O=E=>{let h=class extends E{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=(0,c.pR)(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(l){l!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",l))}readPortalItem(l,r,o){if(r.itemId)return new K.default({id:r.itemId,portal:o?.portal})}writePortalItem(l,r){l?.id&&(r.itemId=l.id)}loadFromPortal(l,r){var o=this;return(0,s.A)(function*(){if(o.portalItem?.id)try{const{load:p}=yield Promise.all([e.e(2076),e.e(6180)]).then(e.bind(e,56180));return(0,a.Te)(r),yield p({instance:o,supportedTypes:l.supportedTypes,validateItem:l.validateItem,supportsData:l.supportsData,layerModuleTypeMap:l.layerModuleTypeMap,populateGroupLayer:l.populateGroupLayer},r)}catch(p){throw(0,a.zf)(p)||L.A.getLogger(o).warn(`Failed to load layer (${o.title}, ${o.id}) portal item (${o.portalItem.id})\n  ${p}`),p}})()}finishLoadEditablePortalLayer(l){var r=this;return(0,s.A)(function*(){r._set("userHasEditingPrivileges",yield r._fetchUserHasEditingPrivileges(l).catch(o=>((0,a.QP)(o),!0)))})()}setUserPrivileges(l,r){var o=this;return(0,s.A)(function*(){if(!C.A.userPrivilegesApplied)return o.finishLoadEditablePortalLayer(r);if(o.url)try{const{features:{edit:p,fullEdit:j},content:{updateItem:m}}=yield o._fetchUserPrivileges(l,r);o._set("userHasEditingPrivileges",p),o._set("userHasFullEditingPrivileges",j),o._set("userHasUpdateItemPrivileges",m)}catch(p){(0,a.QP)(p)}})()}_fetchUserPrivileges(l,r){var o=this;return(0,s.A)(function*(){let p=o.portalItem;if(!l||!p||!p.loaded||p.sourceUrl)return o._fetchFallbackUserPrivileges(r);const j=!P.id?.findCredential(o.url),m=l===p.id;if(m&&p.portal.user)return o._getUserPrivileges(p,j);let R,t;if(m)R=p.portal.url;else try{R=yield(0,x.wI)(o.url,r)}catch(f){(0,a.QP)(f)}if(!R||!(0,u.b8)(R,p.portal.url))return o._fetchFallbackUserPrivileges(r);try{const f=null!=r?r.signal:null;t=yield P.id?.getCredential(`${R}/sharing`,{prompt:!1,signal:f})}catch(f){(0,a.QP)(f)}if(!t)return{features:{edit:!0,fullEdit:!1},content:{updateItem:!1}};try{if(m?yield p.reload():(p=new K.default({id:l,portal:{url:R}}),yield p.load(r)),p.portal.user)return o._getUserPrivileges(p,j)}catch(f){(0,a.QP)(f)}return{features:{edit:!0,fullEdit:!1},content:{updateItem:!1}}})()}_getUserPrivileges(l,r){const o=(0,G.It)(l);return r&&(o.features.edit=!0),o}_fetchFallbackUserPrivileges(l){var r=this;return(0,s.A)(function*(){let o=!0;try{o=yield r._fetchUserHasEditingPrivileges(l)}catch(p){(0,a.QP)(p)}return{features:{edit:o,fullEdit:!1},content:{updateItem:!1}}})()}_fetchUserHasEditingPrivileges(l){var r=this;return(0,s.A)(function*(){const o=r.url?P.id?.findCredential(r.url):null;if(!o)return!0;const p=v.credential===o?v.user:yield r._fetchEditingUser(l);return v.credential=o,v.user=p,null==p?.privileges||p.privileges.includes("features:user:edit")})()}_fetchEditingUser(l){var r=this;return(0,s.A)(function*(){const o=r.portalItem?.portal?.user;if(o)return o;const p=P.id?.findServerInfo(r.url??"");if(!p?.owningSystemUrl)return null;const j=`${p.owningSystemUrl}/sharing/rest`,m=W.A.getDefault();if(m&&m.loaded&&(0,u.S8)(m.restUrl)===(0,u.S8)(j))return m.user;const R=`${j}/community/self`,t=null!=l?l.signal:null,d=yield(0,U.Ke)((0,b.A)(R,{authMode:"no-prompt",query:{f:"json"},signal:t}));return d.ok?$.A.fromJSON(d.value.data):null})()}read(l,r){r&&(r.layer=this),super.read(l,r)}write(l,r){const o=r?.portal,p=this.portalItem?.id&&(this.portalItem.portal||W.A.getDefault());return o&&p&&!(0,u.ut)(p.restUrl,o.restUrl)?(r.messages&&r.messages.push(new I.A("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(l,{...r,layer:this})}};return(0,i._)([(0,g.MZ)({type:K.default})],h.prototype,"portalItem",null),(0,i._)([(0,y.w)("web-document","portalItem",["itemId"])],h.prototype,"readPortalItem",null),(0,i._)([(0,T.K)("web-document","portalItem",{itemId:{type:String}})],h.prototype,"writePortalItem",null),(0,i._)([(0,g.MZ)({clonable:!1})],h.prototype,"resourceReferences",void 0),(0,i._)([(0,g.MZ)({type:Boolean,readOnly:!0})],h.prototype,"userHasEditingPrivileges",void 0),(0,i._)([(0,g.MZ)({type:Boolean,readOnly:!0})],h.prototype,"userHasFullEditingPrivileges",void 0),(0,i._)([(0,g.MZ)({type:Boolean,readOnly:!0})],h.prototype,"userHasUpdateItemPrivileges",void 0),h=(0,i._)([(0,S.$)("esri.layers.mixins.PortalLayer")],h),h},v={credential:null,user:null}},33036:(B,A,e)=>{e.d(A,{j:()=>I});var s=e(8189),i=e(85211),U=(e(3248),e(35150),e(40707),e(76576));const I=c=>{let a=class extends c{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const u={minScale:this.minScale,maxScale:this.maxScale},g=this.parent;g&&"effectiveScaleRange"in g&&function L(c,a){c.minScale=c.minScale>0?a.minScale>0?Math.min(c.minScale,a.minScale):c.minScale:a.minScale,c.maxScale=c.maxScale>0?a.maxScale>0?Math.max(c.maxScale,a.maxScale):c.maxScale:a.maxScale}(u,g.effectiveScaleRange);const n=this._get("effectiveScaleRange");return n&&n.minScale===u.minScale&&n.maxScale===u.maxScale?n:u}};return(0,s._)([(0,i.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],a.prototype,"minScale",void 0),(0,s._)([(0,i.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],a.prototype,"maxScale",void 0),(0,s._)([(0,i.MZ)({readOnly:!0})],a.prototype,"effectiveScaleRange",null),a=(0,s._)([(0,U.$)("esri.layers.mixins.ScaleRangeLayer")],a),a}},96381:(B,A,e)=>{e.d(A,{X:()=>s});const s=Symbol("WebScene")},71655:(B,A,e)=>{var s,i;e.d(A,{X:()=>s}),(i=s||(s={}))[i.SAVE=0]="SAVE",i[i.SAVE_AS=1]="SAVE_AS"},95945:(B,A,e)=>{e.d(A,{c:()=>U,d:()=>C});var s=e(10467),i=e(5922);function C(I){return P.apply(this,arguments)}function P(){return(P=(0,s.A)(function*(I){const L=[];for(const c of I.allLayers)if("beforeSave"in c&&"function"==typeof c.beforeSave){const a=c.beforeSave();a&&L.push(a)}yield Promise.allSettled(L)})).apply(this,arguments)}const b=new Set(["layer:unsupported","property:unsupported","symbol:unsupported","symbol-layer:unsupported","url:unsupported"]);function U(I,L,c){let a=(I.messages??[]).filter(({type:u})=>"error"===u).map(({name:u,message:g,details:n})=>new i.A(u,g,n));if(I.blockedRelativeUrls&&(a=a.concat(I.blockedRelativeUrls.map(u=>new i.A("url:unsupported",`Relative url '${u}' is not supported`)))),c){const{ignoreUnsupported:u,supplementalUnsupportedErrors:g=[],requiredPropertyChecksDisabled:n}=c;u&&(a=a.filter(({name:_})=>!(b.has(_)||g.includes(_)))),n&&(a=a.filter(_=>"web-document-write:property-required"!==_.name))}if(a.length>0)throw new i.A(L.errorName,"Failed to save due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:a})}}}]);