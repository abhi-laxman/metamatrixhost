"use strict";(self.webpackChunkAngularClient=self.webpackChunkAngularClient||[]).push([[5821],{55144:(G,C,l)=>{l.d(C,{T:()=>S,d:()=>w});const S={Base64:0,Hex:1,String:2,Raw:3},p=8,j=(1<<p)-1;function R(r,u){const e=(65535&r)+(65535&u);return(r>>16)+(u>>16)+(e>>16)<<16|65535&e}function M(r,u,e,t,o,n){return R(function P(r,u){return r<<u|r>>>32-u}(R(R(u,r),R(t,n)),o),e)}function g(r,u,e,t,o,n,s){return M(u&e|~u&t,r,u,o,n,s)}function m(r,u,e,t,o,n,s){return M(u&t|e&~t,r,u,o,n,s)}function y(r,u,e,t,o,n,s){return M(u^e^t,r,u,o,n,s)}function x(r,u,e,t,o,n,s){return M(e^(u|~t),r,u,o,n,s)}function w(r,u=S.Hex){const e=u||S.Base64,t=function B(r,u){r[u>>5]|=128<<u%32,r[14+(u+64>>>9<<4)]=u;let e=1732584193,t=-271733879,o=-1732584194,n=271733878;for(let s=0;s<r.length;s+=16){const K=e,z=t,J=o,$=n;e=g(e,t,o,n,r[s],7,-680876936),n=g(n,e,t,o,r[s+1],12,-389564586),o=g(o,n,e,t,r[s+2],17,606105819),t=g(t,o,n,e,r[s+3],22,-1044525330),e=g(e,t,o,n,r[s+4],7,-176418897),n=g(n,e,t,o,r[s+5],12,1200080426),o=g(o,n,e,t,r[s+6],17,-1473231341),t=g(t,o,n,e,r[s+7],22,-45705983),e=g(e,t,o,n,r[s+8],7,1770035416),n=g(n,e,t,o,r[s+9],12,-1958414417),o=g(o,n,e,t,r[s+10],17,-42063),t=g(t,o,n,e,r[s+11],22,-1990404162),e=g(e,t,o,n,r[s+12],7,1804603682),n=g(n,e,t,o,r[s+13],12,-40341101),o=g(o,n,e,t,r[s+14],17,-1502002290),t=g(t,o,n,e,r[s+15],22,1236535329),e=m(e,t,o,n,r[s+1],5,-165796510),n=m(n,e,t,o,r[s+6],9,-1069501632),o=m(o,n,e,t,r[s+11],14,643717713),t=m(t,o,n,e,r[s],20,-373897302),e=m(e,t,o,n,r[s+5],5,-701558691),n=m(n,e,t,o,r[s+10],9,38016083),o=m(o,n,e,t,r[s+15],14,-660478335),t=m(t,o,n,e,r[s+4],20,-405537848),e=m(e,t,o,n,r[s+9],5,568446438),n=m(n,e,t,o,r[s+14],9,-1019803690),o=m(o,n,e,t,r[s+3],14,-187363961),t=m(t,o,n,e,r[s+8],20,1163531501),e=m(e,t,o,n,r[s+13],5,-1444681467),n=m(n,e,t,o,r[s+2],9,-51403784),o=m(o,n,e,t,r[s+7],14,1735328473),t=m(t,o,n,e,r[s+12],20,-1926607734),e=y(e,t,o,n,r[s+5],4,-378558),n=y(n,e,t,o,r[s+8],11,-2022574463),o=y(o,n,e,t,r[s+11],16,1839030562),t=y(t,o,n,e,r[s+14],23,-35309556),e=y(e,t,o,n,r[s+1],4,-1530992060),n=y(n,e,t,o,r[s+4],11,1272893353),o=y(o,n,e,t,r[s+7],16,-155497632),t=y(t,o,n,e,r[s+10],23,-1094730640),e=y(e,t,o,n,r[s+13],4,681279174),n=y(n,e,t,o,r[s],11,-358537222),o=y(o,n,e,t,r[s+3],16,-722521979),t=y(t,o,n,e,r[s+6],23,76029189),e=y(e,t,o,n,r[s+9],4,-640364487),n=y(n,e,t,o,r[s+12],11,-421815835),o=y(o,n,e,t,r[s+15],16,530742520),t=y(t,o,n,e,r[s+2],23,-995338651),e=x(e,t,o,n,r[s],6,-198630844),n=x(n,e,t,o,r[s+7],10,1126891415),o=x(o,n,e,t,r[s+14],15,-1416354905),t=x(t,o,n,e,r[s+5],21,-57434055),e=x(e,t,o,n,r[s+12],6,1700485571),n=x(n,e,t,o,r[s+3],10,-1894986606),o=x(o,n,e,t,r[s+10],15,-1051523),t=x(t,o,n,e,r[s+1],21,-2054922799),e=x(e,t,o,n,r[s+8],6,1873313359),n=x(n,e,t,o,r[s+15],10,-30611744),o=x(o,n,e,t,r[s+6],15,-1560198380),t=x(t,o,n,e,r[s+13],21,1309151649),e=x(e,t,o,n,r[s+4],6,-145523070),n=x(n,e,t,o,r[s+11],10,-1120210379),o=x(o,n,e,t,r[s+2],15,718787259),t=x(t,o,n,e,r[s+9],21,-343485551),e=R(e,K),t=R(t,z),o=R(o,J),n=R(n,$)}return[e,t,o,n]}(function N(r){const u=[];for(let e=0,t=r.length*p;e<t;e+=p)u[e>>5]|=(r.charCodeAt(e/p)&j)<<e%32;return u}(r),r.length*p);switch(e){case S.Raw:return t;case S.Hex:return function U(r){const u="0123456789abcdef",e=[];for(let t=0,o=4*r.length;t<o;t++)e.push(u.charAt(r[t>>2]>>t%4*8+4&15)+u.charAt(r[t>>2]>>t%4*8&15));return e.join("")}(t);case S.String:return function Z(r){const u=[];for(let e=0,t=32*r.length;e<t;e+=p)u.push(String.fromCharCode(r[e>>5]>>>e%32&j));return u.join("")}(t);case S.Base64:return function E(r){const t=[];for(let o=0,n=4*r.length;o<n;o+=3){const s=(r[o>>2]>>o%4*8&255)<<16|(r[o+1>>2]>>(o+1)%4*8&255)<<8|r[o+2>>2]>>(o+2)%4*8&255;for(let K=0;K<4;K++)t.push(8*o+6*K>32*r.length?"=":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(s>>6*(3-K)&63))}return t.join("")}(t)}}},12138:(G,C,l)=>{l.r(C),l.d(C,{default:()=>_});var v,S=l(10467),p=l(8189),j=l(5922),R=l(35150),N=l(39693),Z=l(56492),U=l(48900),E=l(85211),g=(l(3248),l(40707),l(17221)),m=l(76576),y=l(25968),x=l(95478),B=l(94376),w=l(25936),r=l(23e3),u=l(17049),e=l(85551),t=l(33036),o=l(46406),n=l(22329),s=l(10581),K=l(89563),z=l(31178),J=l(71065),$=l(45272),V=l(77806),F=l(96996),i=l(50305),a=l(55861),d=l(13970);let h=v=class extends J.A{constructor(c){super(c),this.geometry=null,this.type="clip"}writeGeometry(c,f,I,A){if(A.layer?.spatialReference&&!A.layer.spatialReference.equals(this.geometry.spatialReference)){if(!(0,d.canProjectWithoutEngine)(c.spatialReference,A.layer.spatialReference))return void(A?.messages&&A.messages.push(new F.A("scenemodification:unsupported","Scene modifications with incompatible spatial references are not supported",{modification:this,spatialReference:A.layer.spatialReference,context:A})));const H=new a.A;(0,d.projectPolygon)(c,H,A.layer.spatialReference),f[I]=H.toJSON(A)}else f[I]=c.toJSON(A);delete f[I].spatialReference}clone(){return new v({geometry:(0,V.o8)(this.geometry),type:this.type})}};(0,p._)([(0,E.MZ)({type:a.A}),(0,y.P)()],h.prototype,"geometry",void 0),(0,p._)([(0,i.K)(["web-scene","portal-item"],"geometry")],h.prototype,"writeGeometry",null),(0,p._)([(0,E.MZ)({type:["clip","mask","replace"],nonNullable:!0}),(0,y.P)()],h.prototype,"type",void 0),h=v=(0,p._)([(0,m.$)("esri.layers.support.SceneModification")],h);const T=h;var D;let O=D=class extends(J.A.JSONSupportMixin(z.A.ofType(T))){constructor(c){super(c),this.url=null}clone(){return new D({url:this.url,items:this.items.map(c=>c.clone())})}toJSON(c){return this.toArray().map(f=>f.toJSON(c)).filter(f=>!!f.geometry)}static fromJSON(c,f){const I=new D;for(const A of c)I.add(T.fromJSON(A,f));return I}static fromUrl(c,f,I){return(0,S.A)(function*(){const A={url:(0,$.An)(c),origin:"service"},H=yield(0,K.A)(c,{responseType:"json",signal:I?.signal}),k=f.toJSON(),X=[];for(const Q of H.data)X.push(T.fromJSON({...Q,geometry:{...Q.geometry,spatialReference:k}},A));return new D({url:c,items:X})})()}};(0,p._)([(0,E.MZ)({type:String})],O.prototype,"url",void 0),O=D=(0,p._)([(0,m.$)("esri.layers.support.SceneModifications")],O);const W=O;var b=l(73812),Y=l(88135);let L=class extends((0,o.w6)((0,w.b)((0,u.q)((0,e.A)((0,t.j)((0,N.P)((0,r.d)((0,B.p)(x.A))))))))){constructor(...c){super(...c),this.geometryType="mesh",this.operationalLayerType="IntegratedMeshLayer",this.type="integrated-mesh",this.nodePages=null,this.materialDefinitions=null,this.textureSetDefinitions=null,this.geometryDefinitions=null,this.serviceUpdateTimeStamp=null,this.profile="mesh-pyramids",this.modifications=null,this._modificationsSource=null,this.path=null,this.definitionExpression=null}initialize(){this.addHandles((0,U.on)(()=>this.modifications,"after-changes",()=>this.modifications=this.modifications,U.OH))}normalizeCtorArgs(c,f){return"string"==typeof c?{url:c,...f}:c}readModifications(c,f,I){this._modificationsSource={url:(0,Y.f)(c,I),context:I}}set elevationInfo(c){null!=c&&"absolute-height"!==c.mode||this._set("elevationInfo",c),this._validateElevationInfo(c)}load(c){var f=this;return(0,S.A)(function*(){return f.addResolvingPromise(f._doLoad(c)),f})()}_doLoad(c){var f=this;return(0,S.A)(function*(){const I=c?.signal;try{yield f.loadFromPortal({supportedTypes:["Scene Service"]},c)}catch(A){(0,Z.QP)(A)}if(yield f._fetchService(I),null!=f._modificationsSource){const A=yield W.fromUrl(f._modificationsSource.url,f.spatialReference,c);f.setAtOrigin("modifications",A,f._modificationsSource.context.origin),f._modificationsSource=null}yield f._fetchIndexAndUpdateExtent(f.nodePages,I)})()}beforeSave(){if(null!=this._modificationsSource)return this.load().then(()=>{},()=>{})}saveAs(c,f){var I=this;return(0,S.A)(function*(){return I._debouncedSaveOperations(o.Xh.SAVE_AS,{...f,getTypeKeywords:()=>I._getTypeKeywords(),portalItemLayerType:"integrated-mesh"},c)})()}save(){var c=this;return(0,S.A)(function*(){const f={getTypeKeywords:()=>c._getTypeKeywords(),portalItemLayerType:"integrated-mesh"};return c._debouncedSaveOperations(o.Xh.SAVE,f)})()}validateLayer(c){if(c.layerType&&"IntegratedMesh"!==c.layerType)throw new j.A("integrated-mesh-layer:layer-type-not-supported","IntegratedMeshLayer does not support this layer type",{layerType:c.layerType});if(isNaN(this.version.major)||isNaN(this.version.minor))throw new j.A("layer:service-version-not-supported","Service version is not supported.",{serviceVersion:this.version.versionString,supportedVersions:"1.x"});if(this.version.major>1)throw new j.A("layer:service-version-too-new","Service version is too new.",{serviceVersion:this.version.versionString,supportedVersions:"1.x"})}_getTypeKeywords(){return["IntegratedMeshLayer"]}_validateElevationInfo(c){const f="Integrated mesh layers";(0,b.XF)(R.A.getLogger(this),(0,b.B)(f,"absolute-height",c)),(0,b.XF)(R.A.getLogger(this),(0,b.tW)(f,c))}};(0,p._)([(0,E.MZ)({type:String,readOnly:!0})],L.prototype,"geometryType",void 0),(0,p._)([(0,E.MZ)({type:["show","hide"]})],L.prototype,"listMode",void 0),(0,p._)([(0,E.MZ)({type:["IntegratedMeshLayer"]})],L.prototype,"operationalLayerType",void 0),(0,p._)([(0,E.MZ)({json:{read:!1},readOnly:!0})],L.prototype,"type",void 0),(0,p._)([(0,E.MZ)({type:s.W4,readOnly:!0})],L.prototype,"nodePages",void 0),(0,p._)([(0,E.MZ)({type:[s.uV],readOnly:!0})],L.prototype,"materialDefinitions",void 0),(0,p._)([(0,E.MZ)({type:[s.Ot],readOnly:!0})],L.prototype,"textureSetDefinitions",void 0),(0,p._)([(0,E.MZ)({type:[s.L0],readOnly:!0})],L.prototype,"geometryDefinitions",void 0),(0,p._)([(0,E.MZ)({readOnly:!0})],L.prototype,"serviceUpdateTimeStamp",void 0),(0,p._)([(0,E.MZ)({type:W}),(0,y.P)({origins:["web-scene","portal-item"],type:"resource",prefix:"modifications"})],L.prototype,"modifications",void 0),(0,p._)([(0,g.w)(["web-scene","portal-item"],"modifications")],L.prototype,"readModifications",null),(0,p._)([(0,E.MZ)(n.Yj)],L.prototype,"elevationInfo",null),(0,p._)([(0,E.MZ)({type:String,json:{origins:{"web-scene":{read:!0,write:!0},"portal-item":{read:!0,write:!0}},read:!1}})],L.prototype,"path",void 0),L=(0,p._)([(0,m.$)("esri.layers.IntegratedMeshLayer")],L);const _=L},23e3:(G,C,l)=>{l.d(C,{d:()=>U});var S=l(8189),p=l(85211),Z=(l(3248),l(35150),l(40707),l(76576));const U=E=>{let P=class extends E{constructor(){super(...arguments),this.customParameters=null}};return(0,S._)([(0,p.MZ)({type:Object,json:{write:{overridePolicy:M=>({enabled:!!(M&&Object.keys(M).length>0)})}}})],P.prototype,"customParameters",void 0),P=(0,S._)([(0,Z.$)("esri.layers.mixins.CustomParametersMixin")],P),P}},33036:(G,C,l)=>{l.d(C,{j:()=>U});var S=l(8189),p=l(85211),Z=(l(3248),l(35150),l(40707),l(76576));const U=P=>{let M=class extends P{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const g={minScale:this.minScale,maxScale:this.maxScale},m=this.parent;m&&"effectiveScaleRange"in m&&function E(P,M){P.minScale=P.minScale>0?M.minScale>0?Math.min(P.minScale,M.minScale):P.minScale:M.minScale,P.maxScale=P.maxScale>0?M.maxScale>0?Math.max(P.maxScale,M.maxScale):P.maxScale:M.maxScale}(g,m.effectiveScaleRange);const y=this._get("effectiveScaleRange");return y&&y.minScale===g.minScale&&y.maxScale===g.maxScale?y:g}};return(0,S._)([(0,p.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],M.prototype,"minScale",void 0),(0,S._)([(0,p.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],M.prototype,"maxScale",void 0),(0,S._)([(0,p.MZ)({readOnly:!0})],M.prototype,"effectiveScaleRange",null),M=(0,S._)([(0,Z.$)("esri.layers.mixins.ScaleRangeLayer")],M),M}},73812:(G,C,l)=>{l.d(C,{$7:()=>K,B:()=>s,Fo:()=>e,M7:()=>$,NN:()=>M,Q5:()=>t,Tq:()=>F,Up:()=>n,XF:()=>J,Ze:()=>B,bK:()=>N,bh:()=>P,id:()=>w,ky:()=>E,qt:()=>V,tW:()=>z,v9:()=>g,w7:()=>Z,wF:()=>R,wS:()=>r,wz:()=>y,x:()=>m,xS:()=>u,ze:()=>U});var S=l(82663),p=l(82575);function j(i){return i?V:F}function R(i,a){return a?.mode?a.mode:j(i).mode}function N(i,a){return a??j(i)}function Z(i,a){return R(null==i||(i.hasZ??!1),a)}function U(i,a){return N(null==i||(i.hasZ??!1),a)}function E(i){const a=x(i);return Z(i.geometry,a)}function P(i){const a=x(i),d=Z(i.geometry,a),v=null!=a&&"on-the-ground"!==d?$(a):0,h=a?.featureExpressionInfo;return{mode:d,offset:v,featureExpressionInfo:h}}function M(i){return y(P(i))}function g(i){return y(i)||m(i)}function m(i){return"0"===i?.featureExpressionInfo?.expression}function y(i){if(!i||"on-the-ground"===i.mode)return!1;const a=i?.featureExpressionInfo?i.featureExpressionInfo.expression:null;return!(!a||"0"===a)}function x(i){return i.layer&&"elevationInfo"in i.layer?i.layer.elevationInfo:null}function B(i,a){if(!i?.offset)return 0;const{offset:d,unit:v}=i;if("decimal-degrees"===v)return 0;const h="unknown"!==v&&v?v:"meters",T=(0,S.mq)(a);return T?(0,S.oU)(d,h,T):0}function w(i,a,d){if(!d?.mode)return;const v=i.hasZ?i.z:0,h=B(d,i.spatialReference);switch(d.mode){case"absolute-height":return v-h;case"on-the-ground":return 0;case"relative-to-ground":return v-((a.elevationProvider.getElevation(i.x,i.y,v,i.spatialReference,"ground")??0)+h);case"relative-to-scene":return v-((a.elevationProvider.getElevation(i.x,i.y,v,i.spatialReference,"scene")??0)+h)}}function r(i,a,d,v=null){return e(i,a.x,a.y,a.hasZ?a.z:0,a.spatialReference,d,v)}function u(i,a,d,v,h=null){return e(i,a[0],a[1],a.length>2?a[2]:0,d,v,h)}function e(i,a,d,v,h,T,D=null){if(null==T)return;const O=null!=D?D.mode:"absolute-height";if("on-the-ground"===O)return 0;const{absoluteZ:W}=t(a,d,v,h,i,T);return function o(i,a,d,v,h,T,D,O){const W=B(D,h);switch(O){case"absolute-height":return i-W;case"relative-to-ground":return i-((T.elevationProvider.getElevation(a,d,v,h,"ground")??0)+W);case"relative-to-scene":return i-((T.elevationProvider.getElevation(a,d,v,h,"scene")??0)+W)}}(W,a,d,v,h,i,D,O)}function t(i,a,d,v,h,T){const D=B(T,v);switch(T.mode){case"absolute-height":return{absoluteZ:d+D,elevation:0};case"on-the-ground":{const O=h.elevationProvider.getElevation(i,a,0,v,"ground")??0;return{absoluteZ:O,elevation:O}}case"relative-to-ground":{const O=h.elevationProvider.getElevation(i,a,d,v,"ground")??0;return{absoluteZ:d+O+D,elevation:O}}case"relative-to-scene":{const O=h.elevationProvider.getElevation(i,a,d,v,"scene")??0;return{absoluteZ:d+O+D,elevation:O}}}}function n(i,a){if(null==a)return!1;const{mode:d}=a;return null!=d&&("scene"===i&&"relative-to-scene"===d||"ground"===i&&"absolute-height"!==d)}function s(i,a,d){return d&&d.mode!==a?`${i} only support ${a} elevation mode`:null}function K(i,a,d){return d?.mode===a?`${i} do not support ${a} elevation mode`:null}function z(i,a){return null!=a?.featureExpressionInfo&&"0"!==a.featureExpressionInfo.expression?`${i} do not support featureExpressionInfo`:null}function J(i,a){a&&i.warn(".elevationInfo=",a)}function $(i){return(i?.offset??0)*(0,p.Ao)(i?.unit)}const V={mode:"absolute-height",offset:0},F={mode:"on-the-ground",offset:null}}}]);